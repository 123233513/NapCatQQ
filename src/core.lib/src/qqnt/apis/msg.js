function _0x49ef(_0x58954f,_0x387456){const _0x3a7de5=_0x3a7d();return _0x49ef=function(_0x49ef3d,_0x71acbb){_0x49ef3d=_0x49ef3d-0x19b;let _0x35e103=_0x3a7de5[_0x49ef3d];return _0x35e103;},_0x49ef(_0x58954f,_0x387456);}const _0x407635=_0x49ef;(function(_0x2826ee,_0x1b3f6a){const _0x225e1e=_0x49ef,_0x4c6810=_0x2826ee();while(!![]){try{const _0x44097a=parseInt(_0x225e1e(0x1be))/0x1*(parseInt(_0x225e1e(0x1a6))/0x2)+-parseInt(_0x225e1e(0x1c7))/0x3*(parseInt(_0x225e1e(0x1cf))/0x4)+-parseInt(_0x225e1e(0x1b3))/0x5+parseInt(_0x225e1e(0x1a8))/0x6+-parseInt(_0x225e1e(0x1c4))/0x7+-parseInt(_0x225e1e(0x1ae))/0x8*(-parseInt(_0x225e1e(0x1b9))/0x9)+parseInt(_0x225e1e(0x1c8))/0xa;if(_0x44097a===_0x1b3f6a)break;else _0x4c6810['push'](_0x4c6810['shift']());}catch(_0x5a18db){_0x4c6810['push'](_0x4c6810['shift']());}}}(_0x3a7d,0x5261e));function _0x3a7d(){const _0x2147e8=['1004078VqqMCS','addMsgListener','153780RKLGZw','msgId','cAlIX','fetchRecentContact','then','HhRzS','3224iHjlng','getMsgsIncludeSelf','sendMsg','AKaqX','bytesData','1376240nLffLG','onAddSendMsg','Kkipr','activateChat','NsWqL','map','549okcGEh','TWkri','uid','forwardMsg','removeKernelMsgListener','1hMUcyk','peerUid','app','recallMsg','ZeoZq','multiForwardMsg','1294965nBwVwI','arkElement','multiForwardMsgWithComment','1659201rSCblf','7984960jJwfOy','msg','kwgtD','ERNdT','nHOEf','AGENo','onMsgInfoListUpdate','4gcNwAW','service','Meavd','JTRPY','chatType','转发消息超时','NqjZs','sendStatus','kernelService','fTDoZ','发送超时','nick','getMultiMsg','SKQsh'];_0x3a7d=function(){return _0x2147e8;};return _0x3a7d();}import{selfInfo}from'@/common/data';import{log}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/qqnt/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},msgListener=new MsgListener();msgListener[_0x407635(0x1b4)]=_0x173340=>{const _0x1b4730=_0x407635,_0x5ab1bd={'kwgtD':function(_0xb2877c,_0xaeeb0f){return _0xb2877c instanceof _0xaeeb0f;}};if(sendMessagePool[_0x173340[_0x1b4730(0x1bf)]]){const _0x560d55=sendMessagePool[_0x173340[_0x1b4730(0x1bf)]]?.(_0x173340);_0x5ab1bd[_0x1b4730(0x1ca)](_0x560d55,Promise)&&_0x560d55[_0x1b4730(0x1ac)]()[_0x1b4730(0x1ac)](log);}},msgListener[_0x407635(0x1ce)]=_0x2b7a66=>{const _0x4b94c3={'NsWqL':function(_0x9cf564,_0x23e1ab){return _0x9cf564(_0x23e1ab);}};_0x2b7a66['forEach'](_0x54e477=>{const _0x427a8f=_0x49ef,_0x55bc77={'Meavd':function(_0xb84f81,_0x41e491){const _0x512b1a=_0x49ef;return _0x4b94c3[_0x512b1a(0x1b7)](_0xb84f81,_0x41e491);}};new Promise((_0x44ca77,_0x1b7cd7)=>{const _0x14a5f5=_0x49ef;for(const _0x33313c in sendSuccessCBMap){const _0x395349=sendSuccessCBMap[_0x33313c],_0x5dd2e=_0x55bc77['Meavd'](_0x395349,_0x54e477),_0x35edc8=_0x3ef571=>{_0x3ef571&&delete sendSuccessCBMap[_0x33313c];};_0x5dd2e instanceof Promise?_0x5dd2e[_0x14a5f5(0x1ac)](_0x35edc8):_0x55bc77[_0x14a5f5(0x1d1)](_0x35edc8,_0x5dd2e);}})[_0x427a8f(0x1ac)]()['catch'](log);});},setTimeout(()=>{napCatCore['addLoginSuccessCallback'](()=>{const _0x57427b=_0x49ef;napCatCore[_0x57427b(0x1d0)][_0x57427b(0x1c9)][_0x57427b(0x1a7)](msgListener);});},0x64);export class NTQQMsgApi{static ['napCatCore']=null;static async[_0x407635(0x1a4)](_0x522d41,_0x541824,_0x18ad5b){const _0x23e2f3=_0x407635;return napCatCore['service']['msg']['kernelService']?.[_0x23e2f3(0x1a4)](_0x522d41,_0x541824,_0x18ad5b);}static async[_0x407635(0x1b6)](_0xbb0da){}static async['activateChatAndGetHistory'](_0x45a152){}static async['getMsgHistory'](_0x2ff92f,_0x3c00e1,_0x269b23){const _0x3244a0=_0x407635;return napCatCore[_0x3244a0(0x1d0)][_0x3244a0(0x1c9)]['kernelService'][_0x3244a0(0x1af)](_0x2ff92f,_0x3c00e1,_0x269b23,!![]);}static async[_0x407635(0x1ab)](){}static async[_0x407635(0x1c1)](_0x56988a,_0x304c17){const _0x5b0713=_0x407635;await napCatCore['service']['msg'][_0x5b0713(0x1a0)]?.[_0x5b0713(0x1c1)]({'chatType':_0x56988a[_0x5b0713(0x19c)],'peerUid':_0x56988a[_0x5b0713(0x1bf)]},_0x304c17);}static async['sendMsg'](_0x4739fd,_0x524fda,_0x2aa189=!![],_0x1ca866=0x2710){const _0x30e708=_0x407635,_0x2faa52={'AGENo':function(_0x39d9f0,_0x32ad57){return _0x39d9f0>_0x32ad57;},'SKQsh':function(_0x259b2b,_0x4ad6de){return _0x259b2b(_0x4ad6de);},'ERNdT':function(_0x2d1559){return _0x2d1559();},'TWkri':function(_0x5a4c20,_0x45e05a){return _0x5a4c20===_0x45e05a;},'ZeoZq':function(_0x94d51b,_0x4bf70a){return _0x94d51b===_0x4bf70a;},'fTDoZ':function(_0x5bc767,_0x41b8f1){return _0x5bc767(_0x41b8f1);},'nHOEf':function(_0x556b46,_0x145745){return _0x556b46(_0x145745);},'HhRzS':_0x30e708(0x1a2),'JTRPY':function(_0x2128a6){return _0x2128a6();},'cAlIX':function(_0x3dbde6,_0x41c092,_0x322b1e){return _0x3dbde6(_0x41c092,_0x322b1e);},'AKaqX':function(_0x51e3a8){return _0x51e3a8();}},_0x464552=_0x4739fd['peerUid'];let _0x464e80=0x0;const _0x4281ff=async()=>{const _0x243997=_0x30e708;if(_0x2faa52[_0x243997(0x1cd)](_0x464e80,_0x1ca866))throw'发送超时';const _0x967f22=sendMessagePool[_0x4739fd['peerUid']];if(_0x967f22)return await _0x2faa52[_0x243997(0x1a5)](sleep,0x1f4),_0x464e80+=0x1f4,await _0x2faa52[_0x243997(0x1cb)](_0x4281ff);else return;};return await _0x2faa52[_0x30e708(0x1b1)](_0x4281ff),new Promise((_0x450431,_0x39b446)=>{const _0x2eb598=_0x30e708;let _0x37b5d5=![],_0x24d524=null;const _0x147dc1=_0x2faa52[_0x2eb598(0x19b)](randomUUID);sendSuccessCBMap[_0x147dc1]=_0x135846=>{const _0x32114c=_0x2eb598;if(_0x2faa52[_0x32114c(0x1ba)](_0x135846['msgId'],_0x24d524?.[_0x32114c(0x1a9)])){if(_0x2faa52[_0x32114c(0x1c2)](_0x135846[_0x32114c(0x19f)],0x2))return delete sendSuccessCBMap[_0x147dc1],_0x37b5d5=!![],_0x2faa52[_0x32114c(0x1a1)](_0x450431,_0x135846),!![];return![];}return![];},sendMessagePool[_0x464552]=async _0x367333=>{delete sendMessagePool[_0x464552],_0x24d524=_0x367333;},_0x2faa52[_0x2eb598(0x1aa)](setTimeout,()=>{const _0xc2fecd=_0x2eb598;if(_0x37b5d5)return;delete sendMessagePool[_0x464552],delete sendSuccessCBMap[_0x147dc1],_0x2faa52[_0xc2fecd(0x1cc)](_0x39b446,_0x2faa52[_0xc2fecd(0x1ad)]);},_0x1ca866);const _0xe942bd=napCatCore[_0x2eb598(0x1d0)][_0x2eb598(0x1c9)][_0x2eb598(0x1a0)]?.[_0x2eb598(0x1b0)]('0',_0x4739fd,_0x524fda,new Map());});}static async[_0x407635(0x1bc)](_0x10f5d3,_0x3a4773,_0x31c80b){}static async[_0x407635(0x1c3)](_0x52f397,_0x44182f,_0x42fafd){const _0x4d8620=_0x407635,_0x57169a={'NWkSz':function(_0x18b9a8,_0x23c7dc){return _0x18b9a8!=_0x23c7dc;},'kJTsd':function(_0x1aab05,_0x12afc3){return _0x1aab05==_0x12afc3;},'Kkipr':function(_0x2c301c,_0x391e5e){return _0x2c301c(_0x391e5e);},'NqjZs':_0x4d8620(0x19d)},_0x4ae868=_0x42fafd[_0x4d8620(0x1b8)](_0xdb01e5=>{const _0x2f3876=_0x4d8620;return{'msgId':_0xdb01e5,'senderShowName':selfInfo[_0x2f3876(0x1a3)]};});return new Promise((_0x40bc71,_0x5a1526)=>{const _0x4e0eac=_0x4d8620;let _0x31fa52=![];const _0xf79d2d=new MsgListener(),_0x4958fe=_0x30c94f=>{const _0x25521a=_0x49ef,_0x5b48dd=_0x30c94f['elements']['find'](_0x42b246=>_0x42b246['arkElement']);if(!_0x5b48dd)return;const _0x3c3fe8=JSON['parse'](_0x5b48dd[_0x25521a(0x1c5)][_0x25521a(0x1b2)]);if(_0x57169a['NWkSz'](_0x3c3fe8[_0x25521a(0x1c0)],'com.tencent.multimsg'))return;_0x57169a['kJTsd'](_0x30c94f['peerUid'],_0x44182f[_0x25521a(0x1bf)])&&_0x30c94f['senderUid']==selfInfo[_0x25521a(0x1bb)]&&(_0x31fa52=!![]);};_0xf79d2d[_0x4e0eac(0x1b4)]=_0x4958fe;const _0x37eef6=napCatCore[_0x4e0eac(0x1d0)][_0x4e0eac(0x1c9)][_0x4e0eac(0x1a7)](_0xf79d2d);setTimeout(()=>{const _0x5e6c4e=_0x4e0eac;!_0x31fa52&&(napCatCore[_0x5e6c4e(0x1d0)]['msg'][_0x5e6c4e(0x1a0)]?.[_0x5e6c4e(0x1bd)](_0x37eef6),_0x57169a[_0x5e6c4e(0x1b5)](_0x5a1526,_0x57169a[_0x5e6c4e(0x19e)]));},0x1388),napCatCore[_0x4e0eac(0x1d0)]['msg'][_0x4e0eac(0x1a0)]?.[_0x4e0eac(0x1c6)](_0x4ae868,_0x52f397,_0x44182f,[],new Map());});}}