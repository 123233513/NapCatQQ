const _0x5e8147=_0x288b;(function(_0x3519ce,_0x271c85){const _0xc699ce=_0x288b,_0x3d8db4=_0x3519ce();while(!![]){try{const _0x224033=parseInt(_0xc699ce(0x19a))/0x1*(-parseInt(_0xc699ce(0x17f))/0x2)+-parseInt(_0xc699ce(0x169))/0x3*(-parseInt(_0xc699ce(0x180))/0x4)+-parseInt(_0xc699ce(0x17d))/0x5*(parseInt(_0xc699ce(0x171))/0x6)+parseInt(_0xc699ce(0x173))/0x7*(-parseInt(_0xc699ce(0x188))/0x8)+parseInt(_0xc699ce(0x190))/0x9*(-parseInt(_0xc699ce(0x17a))/0xa)+-parseInt(_0xc699ce(0x197))/0xb*(-parseInt(_0xc699ce(0x18c))/0xc)+parseInt(_0xc699ce(0x166))/0xd;if(_0x224033===_0x271c85)break;else _0x3d8db4['push'](_0x3d8db4['shift']());}catch(_0x4685d5){_0x3d8db4['push'](_0x3d8db4['shift']());}}}(_0x42fa,0x948e1));function _0x42fa(){const _0x46e0fb=['getMultiMsg','27GYPDyh','uid','addMsgListener','evJaD','rNEeo','kernelService','msg','2422838hoJjjg','activateChat','BKUwd','7661UlrujC','onAddSendMsg','36843534fGoAFv','ayGEH','DEFQV','1079487FbSWld','发送超时','GPLIz','senderUid','forEach','multiForwardMsg','removeKernelMsgListener','addLoginSuccessCallback','564ZiJYaM','arkElement','130473AqFxDy','peerUid','jsTJZ','getMsgHistory','app','KbeYc','napCatCore','978430UdmvRV','nick','catch','46305VQpBqF','chatType','268NhpVoH','4VxiqZg','转发消息超时','sendMsg','service','ErvQm','find','then','recallMsg','264kOIRrl','onMsgInfoListUpdate','bytesData','YMbBa','12PzzaGj','msgId','Rtfrq'];_0x42fa=function(){return _0x46e0fb;};return _0x42fa();}import{selfInfo}from'@/common/data';import{log}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/qqnt/listeners';function _0x288b(_0x5c93d8,_0x2ae069){const _0x42fa81=_0x42fa();return _0x288b=function(_0x288b8f,_0x57af17){_0x288b8f=_0x288b8f-0x165;let _0x4971ef=_0x42fa81[_0x288b8f];return _0x4971ef;},_0x288b(_0x5c93d8,_0x2ae069);}import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},msgListener=new MsgListener();msgListener[_0x5e8147(0x165)]=_0x163bf9=>{const _0xc055e8=_0x5e8147,_0x5ab842={'BKUwd':function(_0x4a79eb,_0x2f1aa2){return _0x4a79eb instanceof _0x2f1aa2;}};if(sendMessagePool[_0x163bf9[_0xc055e8(0x174)]]){const _0x20646d=sendMessagePool[_0x163bf9[_0xc055e8(0x174)]]?.(_0x163bf9);_0x5ab842[_0xc055e8(0x199)](_0x20646d,Promise)&&_0x20646d[_0xc055e8(0x186)]()[_0xc055e8(0x186)](log);}},msgListener[_0x5e8147(0x189)]=_0x34c909=>{const _0x328044=_0x5e8147,_0x29b8c1={'cuQZo':function(_0x29bc15,_0x1be519){return _0x29bc15(_0x1be519);}};_0x34c909[_0x328044(0x16d)](_0x3d7c15=>{const _0x191a4b=_0x328044,_0x480c0c={'GPLIz':function(_0x38555c,_0x144d40){return _0x38555c instanceof _0x144d40;},'Rtfrq':function(_0x4f619d,_0x577029){return _0x29b8c1['cuQZo'](_0x4f619d,_0x577029);}};new Promise((_0x2080f9,_0x568e80)=>{const _0x18a595=_0x288b;for(const _0x5a3902 in sendSuccessCBMap){const _0x4888bc=sendSuccessCBMap[_0x5a3902],_0x5ace06=_0x4888bc(_0x3d7c15),_0x1c4173=_0x62b273=>{_0x62b273&&delete sendSuccessCBMap[_0x5a3902];};_0x480c0c[_0x18a595(0x16b)](_0x5ace06,Promise)?_0x5ace06[_0x18a595(0x186)](_0x1c4173):_0x480c0c[_0x18a595(0x18e)](_0x1c4173,_0x5ace06);}})[_0x191a4b(0x186)]()[_0x191a4b(0x17c)](log);});},setTimeout(()=>{const _0x413706=_0x5e8147;napCatCore[_0x413706(0x170)](()=>{const _0x351c2b=_0x413706;napCatCore[_0x351c2b(0x183)][_0x351c2b(0x196)]['addMsgListener'](msgListener);});},0x64);export class NTQQMsgApi{static [_0x5e8147(0x179)]=null;static async[_0x5e8147(0x18f)](_0x384564,_0x1b759e,_0x36b86c){const _0x566b50=_0x5e8147;return napCatCore[_0x566b50(0x183)][_0x566b50(0x196)]['kernelService']?.[_0x566b50(0x18f)](_0x384564,_0x1b759e,_0x36b86c);}static async[_0x5e8147(0x198)](_0x5037c3){}static async['activateChatAndGetHistory'](_0x5b6dff){}static async[_0x5e8147(0x176)](_0x1f492a,_0x25dee3,_0x3208aa){const _0x59cbb0=_0x5e8147;return napCatCore[_0x59cbb0(0x183)][_0x59cbb0(0x196)]['kernelService']['getMsgsIncludeSelf'](_0x1f492a,_0x25dee3,_0x3208aa,!![]);}static async['fetchRecentContact'](){}static async[_0x5e8147(0x187)](_0x321dbb,_0x5dcad3){const _0x263bbc=_0x5e8147;await napCatCore[_0x263bbc(0x183)][_0x263bbc(0x196)][_0x263bbc(0x195)]?.[_0x263bbc(0x187)]({'chatType':_0x321dbb[_0x263bbc(0x17e)],'peerUid':_0x321dbb[_0x263bbc(0x174)]},_0x5dcad3);}static async[_0x5e8147(0x182)](_0x585cd0,_0x47a650,_0xad3d31=!![],_0x2f635a=0x2710){const _0x3c119c=_0x5e8147,_0x4c71c8={'KbeYc':function(_0x27ce30,_0x4cd808){return _0x27ce30(_0x4cd808);},'meKOv':function(_0x43fba4){return _0x43fba4();},'ayGEH':function(_0x3de136,_0x505ea6){return _0x3de136===_0x505ea6;},'YMbBa':function(_0x325cea,_0x2d3d78){return _0x325cea(_0x2d3d78);},'jsTJZ':function(_0x521d2f,_0x29f3c9){return _0x521d2f(_0x29f3c9);}},_0x8c5762=_0x585cd0[_0x3c119c(0x174)];let _0x5a07ab=0x0;const _0x1ea311=async()=>{const _0x2e268e=_0x3c119c;if(_0x5a07ab>_0x2f635a)throw _0x2e268e(0x16a);const _0x5ad52b=sendMessagePool[_0x585cd0['peerUid']];if(_0x5ad52b)return await _0x4c71c8[_0x2e268e(0x178)](sleep,0x1f4),_0x5a07ab+=0x1f4,await _0x4c71c8['meKOv'](_0x1ea311);else return;};return await _0x1ea311(),new Promise((_0x2fbc98,_0x2063df)=>{const _0x444399=_0x3c119c,_0x1aa9ee={'rNEeo':function(_0x2342b8,_0x2b57e7){const _0x6c5f6a=_0x288b;return _0x4c71c8[_0x6c5f6a(0x175)](_0x2342b8,_0x2b57e7);}};let _0x3c7a76=![],_0x136d58=null;const _0x39d60a=_0x4c71c8['meKOv'](randomUUID);sendSuccessCBMap[_0x39d60a]=_0x10d2a1=>{const _0x169c23=_0x288b;if(_0x4c71c8['ayGEH'](_0x10d2a1[_0x169c23(0x18d)],_0x136d58?.['msgId'])){if(_0x4c71c8[_0x169c23(0x167)](_0x10d2a1['sendStatus'],0x2))return delete sendSuccessCBMap[_0x39d60a],_0x3c7a76=!![],_0x4c71c8[_0x169c23(0x18b)](_0x2fbc98,_0x10d2a1),!![];return![];}return![];},sendMessagePool[_0x8c5762]=async _0x31045f=>{delete sendMessagePool[_0x8c5762],_0x136d58=_0x31045f;},setTimeout(()=>{const _0x3b0e9d=_0x288b;if(_0x3c7a76)return;delete sendMessagePool[_0x8c5762],delete sendSuccessCBMap[_0x39d60a],_0x1aa9ee[_0x3b0e9d(0x194)](_0x2063df,_0x3b0e9d(0x16a));},_0x2f635a);const _0x24de7f=napCatCore[_0x444399(0x183)][_0x444399(0x196)]['kernelService']?.[_0x444399(0x182)]('0',_0x585cd0,_0x47a650,new Map());});}static async['forwardMsg'](_0x2fdbb2,_0x570a1c,_0x55a22c){}static async[_0x5e8147(0x16e)](_0x29234f,_0x1764fb,_0xe14a9){const _0x5db988={'ErvQm':function(_0x55473e,_0x1b8f3d){return _0x55473e!=_0x1b8f3d;},'DEFQV':function(_0x4db009,_0x4f2f1c){return _0x4db009==_0x4f2f1c;},'evJaD':function(_0x19261a,_0x418512,_0x119012){return _0x19261a(_0x418512,_0x119012);}},_0x3c529f=_0xe14a9['map'](_0x3cfd21=>{const _0x219502=_0x288b;return{'msgId':_0x3cfd21,'senderShowName':selfInfo[_0x219502(0x17b)]};});return new Promise((_0x15edbd,_0x1c064e)=>{const _0x53ab17=_0x288b;let _0x16afc0=![];const _0x356ee9=new MsgListener(),_0x522494=_0x47fa24=>{const _0x2e47a1=_0x288b,_0x1e877d=_0x47fa24['elements'][_0x2e47a1(0x185)](_0x5c6920=>_0x5c6920[_0x2e47a1(0x172)]);if(!_0x1e877d)return;const _0x12649c=JSON['parse'](_0x1e877d[_0x2e47a1(0x172)][_0x2e47a1(0x18a)]);if(_0x5db988[_0x2e47a1(0x184)](_0x12649c[_0x2e47a1(0x177)],'com.tencent.multimsg'))return;_0x47fa24[_0x2e47a1(0x174)]==_0x1764fb['peerUid']&&_0x5db988[_0x2e47a1(0x168)](_0x47fa24[_0x2e47a1(0x16c)],selfInfo[_0x2e47a1(0x191)])&&(_0x16afc0=!![]);};_0x356ee9[_0x53ab17(0x165)]=_0x522494;const _0xe5598d=napCatCore[_0x53ab17(0x183)][_0x53ab17(0x196)][_0x53ab17(0x192)](_0x356ee9);_0x5db988[_0x53ab17(0x193)](setTimeout,()=>{const _0x5040b4=_0x53ab17;!_0x16afc0&&(napCatCore[_0x5040b4(0x183)][_0x5040b4(0x196)][_0x5040b4(0x195)]?.[_0x5040b4(0x16f)](_0xe5598d),_0x1c064e(_0x5040b4(0x181)));},0x1388),napCatCore[_0x53ab17(0x183)][_0x53ab17(0x196)][_0x53ab17(0x195)]?.['multiForwardMsgWithComment'](_0x3c529f,_0x29234f,_0x1764fb,[],new Map());});}}