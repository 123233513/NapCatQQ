const _0x1dbfca=_0x549a;(function(_0x545fbb,_0x391207){const _0x18aba3=_0x549a,_0x1e6e96=_0x545fbb();while(!![]){try{const _0x4ef638=parseInt(_0x18aba3(0x17b))/0x1*(parseInt(_0x18aba3(0x176))/0x2)+parseInt(_0x18aba3(0x159))/0x3+-parseInt(_0x18aba3(0x173))/0x4*(parseInt(_0x18aba3(0x15b))/0x5)+parseInt(_0x18aba3(0x18a))/0x6*(-parseInt(_0x18aba3(0x18f))/0x7)+-parseInt(_0x18aba3(0x17a))/0x8*(-parseInt(_0x18aba3(0x183))/0x9)+-parseInt(_0x18aba3(0x171))/0xa+parseInt(_0x18aba3(0x15c))/0xb*(parseInt(_0x18aba3(0x17c))/0xc);if(_0x4ef638===_0x391207)break;else _0x1e6e96['push'](_0x1e6e96['shift']());}catch(_0x2a44a6){_0x1e6e96['push'](_0x1e6e96['shift']());}}}(_0x50dc,0x908b7));import{selfInfo}from'@/common/data';function _0x50dc(){const _0x448a3e=['service','ktsgz','ELPAS','uid','msgId','cMwSH','14262ciDpTa','com.tencent.multimsg','arkElement','removeKernelMsgListener','iLIFi','434xHdpFw','getMsgHistory','recallMsg','转发消息超时','341100UqnVJO','vDutF','82970vIYrmD','11cpxfgg','hAtXu','forwardMsg','onAddSendMsg','msg','sendStatus','GqZLp','发送超时','IBJBY','multiForwardMsg','senderUid','chatType','activateChatAndGetHistory','bytesData','addLoginSuccessCallback','peerUid','sendMsg','napCatCore','activateChat','then','catch','1330670qLbgkg','multiForwardMsgWithComment','196lnRgFI','gZnfP','BbBDK','1724582uXvDJq','onMsgInfoListUpdate','parse','fetchRecentContact','433240IcWgti','1yBUIZk','7215612Norzrc','find','getMultiMsg','kernelService','BJyTb','oiyek','addMsgListener','18rdrcCs'];_0x50dc=function(){return _0x448a3e;};return _0x50dc();}import{log}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/qqnt/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},msgListener=new MsgListener();function _0x549a(_0x1bd3b0,_0x8585dc){const _0x50dcea=_0x50dc();return _0x549a=function(_0x549a81,_0x32b370){_0x549a81=_0x549a81-0x157;let _0x16b580=_0x50dcea[_0x549a81];return _0x16b580;},_0x549a(_0x1bd3b0,_0x8585dc);}msgListener['onAddSendMsg']=_0x100077=>{const _0x9fc58f=_0x549a,_0x33cdaa={'hAtXu':function(_0x5add12,_0x4b6f2f){return _0x5add12 instanceof _0x4b6f2f;}};if(sendMessagePool[_0x100077[_0x9fc58f(0x16b)]]){const _0x1d0a98=sendMessagePool[_0x100077[_0x9fc58f(0x16b)]]?.(_0x100077);_0x33cdaa[_0x9fc58f(0x15d)](_0x1d0a98,Promise)&&_0x1d0a98[_0x9fc58f(0x16f)]()[_0x9fc58f(0x16f)](log);}},msgListener[_0x1dbfca(0x177)]=_0x1df3fe=>{const _0x4be96a={'WuiiW':function(_0x4c9cc9,_0x15a06a){return _0x4c9cc9 instanceof _0x15a06a;},'cMwSH':function(_0x523174,_0x2e3cd7){return _0x523174(_0x2e3cd7);}};_0x1df3fe['forEach'](_0x395936=>{const _0x305fa9=_0x549a;new Promise((_0x17c46a,_0xc296b5)=>{const _0x1fca95=_0x549a;for(const _0x26b11a in sendSuccessCBMap){const _0x16b834=sendSuccessCBMap[_0x26b11a],_0x562fc8=_0x16b834(_0x395936),_0xe74dec=_0x2dc69e=>{_0x2dc69e&&delete sendSuccessCBMap[_0x26b11a];};_0x4be96a['WuiiW'](_0x562fc8,Promise)?_0x562fc8[_0x1fca95(0x16f)](_0xe74dec):_0x4be96a[_0x1fca95(0x189)](_0xe74dec,_0x562fc8);}})['then']()[_0x305fa9(0x170)](log);});},setTimeout(()=>{const _0x10a2f0=_0x1dbfca;napCatCore[_0x10a2f0(0x16a)](()=>{const _0x13d5f9=_0x10a2f0;napCatCore['service'][_0x13d5f9(0x160)][_0x13d5f9(0x182)](msgListener);});},0x64);export class NTQQMsgApi{static [_0x1dbfca(0x16d)]=null;static async[_0x1dbfca(0x17e)](_0x1a16ab,_0x5ea404,_0x3dd3f2){const _0x4fc3c1=_0x1dbfca;return napCatCore[_0x4fc3c1(0x184)]['msg'][_0x4fc3c1(0x17f)]?.['getMultiMsg'](_0x1a16ab,_0x5ea404,_0x3dd3f2);}static async[_0x1dbfca(0x16e)](_0x2cb919){}static async[_0x1dbfca(0x168)](_0x51df77){}static async[_0x1dbfca(0x190)](_0x2f7134,_0xe77ff5,_0x1c4e34){const _0x4ac6a4=_0x1dbfca;return napCatCore[_0x4ac6a4(0x184)]['msg'][_0x4ac6a4(0x17f)]['getMsgsIncludeSelf'](_0x2f7134,_0xe77ff5,_0x1c4e34,!![]);}static async[_0x1dbfca(0x179)](){}static async[_0x1dbfca(0x157)](_0x15238a,_0x50c21a){const _0x297adc=_0x1dbfca;await napCatCore['service'][_0x297adc(0x160)][_0x297adc(0x17f)]?.[_0x297adc(0x157)]({'chatType':_0x15238a[_0x297adc(0x167)],'peerUid':_0x15238a[_0x297adc(0x16b)]},_0x50c21a);}static async['sendMsg'](_0x32ee1b,_0x58d596,_0x4360f1=!![],_0x38d2e9=0x2710){const _0x5a06a1=_0x1dbfca,_0x3b43ef={'gZnfP':function(_0x4498de,_0x2e05f1){return _0x4498de>_0x2e05f1;},'oiyek':function(_0x103e42,_0x551567){return _0x103e42(_0x551567);},'GqZLp':function(_0x21f0d0){return _0x21f0d0();},'BbBDK':function(_0x50eba6,_0x424c4f){return _0x50eba6===_0x424c4f;},'IBJBY':function(_0x5d05b4){return _0x5d05b4();},'iLIFi':function(_0x40f262,_0x1a78a8,_0x284744){return _0x40f262(_0x1a78a8,_0x284744);}},_0x1ceec7=_0x32ee1b[_0x5a06a1(0x16b)];let _0x4917d8=0x0;const _0x262b15=async()=>{const _0x13f829=_0x5a06a1;if(_0x3b43ef[_0x13f829(0x174)](_0x4917d8,_0x38d2e9))throw _0x13f829(0x163);const _0x45997f=sendMessagePool[_0x32ee1b[_0x13f829(0x16b)]];if(_0x45997f)return await _0x3b43ef[_0x13f829(0x181)](sleep,0x1f4),_0x4917d8+=0x1f4,await _0x3b43ef[_0x13f829(0x162)](_0x262b15);else return;};return await _0x3b43ef[_0x5a06a1(0x164)](_0x262b15),new Promise((_0xe103d6,_0x43f96f)=>{const _0x4aa0f8=_0x5a06a1;let _0x4f221a=![],_0x5003ee=null;const _0x3a7f68=_0x3b43ef[_0x4aa0f8(0x164)](randomUUID);sendSuccessCBMap[_0x3a7f68]=_0x3aadac=>{const _0x5e808f=_0x4aa0f8;if(_0x3aadac[_0x5e808f(0x188)]===_0x5003ee?.[_0x5e808f(0x188)]){if(_0x3b43ef[_0x5e808f(0x175)](_0x3aadac[_0x5e808f(0x161)],0x2))return delete sendSuccessCBMap[_0x3a7f68],_0x4f221a=!![],_0x3b43ef['oiyek'](_0xe103d6,_0x3aadac),!![];return![];}return![];},sendMessagePool[_0x1ceec7]=async _0x46e44f=>{delete sendMessagePool[_0x1ceec7],_0x5003ee=_0x46e44f;},_0x3b43ef[_0x4aa0f8(0x18e)](setTimeout,()=>{const _0x339c01=_0x4aa0f8;if(_0x4f221a)return;delete sendMessagePool[_0x1ceec7],delete sendSuccessCBMap[_0x3a7f68],_0x3b43ef[_0x339c01(0x181)](_0x43f96f,'发送超时');},_0x38d2e9);const _0x3e31f0=napCatCore[_0x4aa0f8(0x184)][_0x4aa0f8(0x160)][_0x4aa0f8(0x17f)]?.[_0x4aa0f8(0x16c)]('0',_0x32ee1b,_0x58d596,new Map());});}static async[_0x1dbfca(0x15e)](_0x56e15e,_0x49bf1f,_0x2e27a4){}static async[_0x1dbfca(0x165)](_0x52d720,_0x1c7d54,_0x578fa8){const _0x5f1670=_0x1dbfca,_0x505059={'BJyTb':_0x5f1670(0x158),'Pzgah':function(_0x4dcf46,_0x4ab524){return _0x4dcf46!=_0x4ab524;},'ELPAS':function(_0x4e8344,_0x4e7db9){return _0x4e8344(_0x4e7db9);}},_0x333292=_0x578fa8['map'](_0x5b04b0=>{return{'msgId':_0x5b04b0,'senderShowName':selfInfo['nick']};});return new Promise((_0x4fa0ca,_0x1e285d)=>{const _0x337eed=_0x5f1670,_0x442da6={'vDutF':function(_0x414899,_0x5a3c9a){return _0x505059['Pzgah'](_0x414899,_0x5a3c9a);},'PBYVs':function(_0x24ef4d,_0x3960c7){return _0x24ef4d==_0x3960c7;},'ktsgz':function(_0x5756b7,_0x1ede80){const _0x1aff5c=_0x549a;return _0x505059[_0x1aff5c(0x186)](_0x5756b7,_0x1ede80);}};let _0x2b04cf=![];const _0x11b467=new MsgListener(),_0x2760c8=_0x54556f=>{const _0x12d482=_0x549a,_0x97e943=_0x54556f['elements'][_0x12d482(0x17d)](_0x5bdf3d=>_0x5bdf3d['arkElement']);if(!_0x97e943)return;const _0x41032e=JSON[_0x12d482(0x178)](_0x97e943[_0x12d482(0x18c)][_0x12d482(0x169)]);if(_0x442da6[_0x12d482(0x15a)](_0x41032e['app'],_0x12d482(0x18b)))return;_0x54556f[_0x12d482(0x16b)]==_0x1c7d54['peerUid']&&_0x442da6['PBYVs'](_0x54556f[_0x12d482(0x166)],selfInfo[_0x12d482(0x187)])&&(_0x2b04cf=!![],napCatCore[_0x12d482(0x184)]['msg'][_0x12d482(0x17f)]?.[_0x12d482(0x18d)](_0x43b504),_0x442da6[_0x12d482(0x185)](_0x4fa0ca,_0x54556f));};_0x11b467[_0x337eed(0x15f)]=_0x2760c8;const _0x43b504=napCatCore[_0x337eed(0x184)][_0x337eed(0x160)][_0x337eed(0x182)](_0x11b467);setTimeout(()=>{const _0x3c5806=_0x337eed;!_0x2b04cf&&(napCatCore['service'][_0x3c5806(0x160)][_0x3c5806(0x17f)]?.[_0x3c5806(0x18d)](_0x43b504),_0x1e285d(_0x505059[_0x3c5806(0x180)]));},0x1388),napCatCore[_0x337eed(0x184)][_0x337eed(0x160)][_0x337eed(0x17f)]?.[_0x337eed(0x172)](_0x333292,_0x52d720,_0x1c7d54,[],new Map());});}}