const _0x59e62f=_0x5251;(function(_0x59b3ae,_0x582139){const _0xbcd4be=_0x5251,_0x1b1be8=_0x59b3ae();while(!![]){try{const _0x3dc6c7=-parseInt(_0xbcd4be(0x177))/0x1+-parseInt(_0xbcd4be(0x195))/0x2+parseInt(_0xbcd4be(0x18f))/0x3+-parseInt(_0xbcd4be(0x18e))/0x4*(parseInt(_0xbcd4be(0x178))/0x5)+-parseInt(_0xbcd4be(0x18d))/0x6+parseInt(_0xbcd4be(0x172))/0x7*(-parseInt(_0xbcd4be(0x1a8))/0x8)+parseInt(_0xbcd4be(0x176))/0x9*(parseInt(_0xbcd4be(0x17f))/0xa);if(_0x3dc6c7===_0x582139)break;else _0x1b1be8['push'](_0x1b1be8['shift']());}catch(_0x285803){_0x1b1be8['push'](_0x1b1be8['shift']());}}}(_0x16de,0x6bdb2));import{selfInfo}from'@/common/data';import{log}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x5251(_0x2d3a67,_0x228263){const _0x16de53=_0x16de();return _0x5251=function(_0x5251bd,_0x1fa82e){_0x5251bd=_0x5251bd-0x172;let _0x363a23=_0x16de53[_0x5251bd];return _0x363a23;},_0x5251(_0x2d3a67,_0x228263);}import{MsgListener}from'@/core/qqnt/listeners';import{randomUUID}from'crypto';function _0x16de(){const _0x369dfe=['vkOMK','840ZjYVGX','guildId','HZpva','fetchRecentContact','onAddSendMsg','recallMsg','peerUid','hZtLp','arkElement','find','nick','elements','activateChatAndGetHistory','addLoginSuccessCallback','3544950kgHxXT','4mIOIjY','984753vnsFVa','chatType','parse','getMsgsIncludeSelf','msgId','kernelService','1666090ExKDzK','rKrSX','xjSDT','onMsgInfoListUpdate','vmkNq','bytesData','LAOON','multiForwardMsg','forwardMsg','msg','multiForwardMsgWithComment','napCatCore','setMsgRead','removeKernelMsgListener','mJdBk','forEach','then','aCQxs','catch','306416MdEQoi','jLpKu','map','getMsgHistory','sendMsg','activateChat','21UXIfeB','service','uid','AVZLU','263970mRscdi','649568dKzFrG','809245BcBbWB','getMultiMsg','PFxdL','app','addMsgListener','转发消息超时'];_0x16de=function(){return _0x369dfe;};return _0x16de();}const sendMessagePool={},sendSuccessCBMap={},msgListener=new MsgListener();msgListener['onAddSendMsg']=_0x5c2ed0=>{const _0xd05f48=_0x5251,_0x50d861={'AVZLU':function(_0x3538d4,_0x454058){return _0x3538d4 instanceof _0x454058;}};if(sendMessagePool[_0x5c2ed0[_0xd05f48(0x185)]]){const _0xc972be=sendMessagePool[_0x5c2ed0[_0xd05f48(0x185)]]?.(_0x5c2ed0);_0x50d861[_0xd05f48(0x175)](_0xc972be,Promise)&&_0xc972be[_0xd05f48(0x1a5)]()[_0xd05f48(0x1a5)](log);}},msgListener[_0x59e62f(0x198)]=_0x25869c=>{const _0x5af1be=_0x59e62f,_0x23e0b5={'PYFbm':function(_0x2be5c6,_0x3ba579){return _0x2be5c6(_0x3ba579);},'HZpva':function(_0x247674,_0x5d25ee){return _0x247674 instanceof _0x5d25ee;},'hZtLp':function(_0x4ea229,_0x3c56dd){return _0x4ea229(_0x3c56dd);}};_0x25869c[_0x5af1be(0x1a4)](_0x2db7e3=>{const _0x3b0acd=_0x5af1be;new Promise((_0x39bd1f,_0x5b822f)=>{const _0x4f1c66=_0x5251;for(const _0x40afbd in sendSuccessCBMap){const _0x1e0e31=sendSuccessCBMap[_0x40afbd],_0x1f4b18=_0x23e0b5['PYFbm'](_0x1e0e31,_0x2db7e3),_0x16c81e=_0xe32572=>{_0xe32572&&delete sendSuccessCBMap[_0x40afbd];};_0x23e0b5[_0x4f1c66(0x181)](_0x1f4b18,Promise)?_0x1f4b18[_0x4f1c66(0x1a5)](_0x16c81e):_0x23e0b5[_0x4f1c66(0x186)](_0x16c81e,_0x1f4b18);}})[_0x3b0acd(0x1a5)]()[_0x3b0acd(0x1a7)](log);});},setTimeout(()=>{const _0x5138fe=_0x59e62f;napCatCore[_0x5138fe(0x18c)](()=>{const _0x18ee43=_0x5138fe;napCatCore[_0x18ee43(0x173)][_0x18ee43(0x19e)]['addMsgListener'](msgListener);});},0x64);export class NTQQMsgApi{static [_0x59e62f(0x1a0)]=null;static async[_0x59e62f(0x179)](_0x2a4a55,_0x3fe39d,_0x59e4c0){const _0x527bc8=_0x59e62f;return napCatCore[_0x527bc8(0x173)][_0x527bc8(0x19e)]['kernelService']?.[_0x527bc8(0x179)](_0x2a4a55,_0x3fe39d,_0x59e4c0);}static async[_0x59e62f(0x1ad)](_0x84089d){}static async[_0x59e62f(0x18b)](_0x3d3f9d){}static async[_0x59e62f(0x1a1)](_0x5307e0){const _0x23d73f=_0x59e62f;return napCatCore[_0x23d73f(0x173)][_0x23d73f(0x19e)]['kernelService'][_0x23d73f(0x1a1)](_0x5307e0[_0x23d73f(0x190)],_0x5307e0[_0x23d73f(0x185)],_0x5307e0[_0x23d73f(0x180)]);}static async[_0x59e62f(0x1ab)](_0x4ba800,_0x2858f8,_0x45b16e){const _0x4e70d3=_0x59e62f;return napCatCore[_0x4e70d3(0x173)]['msg'][_0x4e70d3(0x194)][_0x4e70d3(0x192)](_0x4ba800,_0x2858f8,_0x45b16e,!![]);}static async[_0x59e62f(0x182)](){}static async[_0x59e62f(0x184)](_0x4d3627,_0x2d67ff){const _0x3d7d14=_0x59e62f;await napCatCore[_0x3d7d14(0x173)]['msg'][_0x3d7d14(0x194)]?.['recallMsg']({'chatType':_0x4d3627[_0x3d7d14(0x190)],'peerUid':_0x4d3627[_0x3d7d14(0x185)]},_0x2d67ff);}static async[_0x59e62f(0x1ac)](_0xf0d615,_0x1e35de,_0x1f2dbc=!![],_0x1ce912=0x2710){const _0x5140ca=_0x59e62f,_0x51f928={'TbrTR':function(_0x29db4e,_0x3e7d35){return _0x29db4e(_0x3e7d35);},'MiQKG':function(_0x46d16f,_0x4ba6e4){return _0x46d16f(_0x4ba6e4);},'aCQxs':'发送超时','PFxdL':function(_0x53120d){return _0x53120d();},'nMNWw':function(_0x31fe55,_0x19e609,_0x290a30){return _0x31fe55(_0x19e609,_0x290a30);}},_0xbbf157=_0xf0d615[_0x5140ca(0x185)];let _0x104eca=0x0;const _0x359aa1=async()=>{if(_0x104eca>_0x1ce912)throw'发送超时';const _0x5645ae=sendMessagePool[_0xf0d615['peerUid']];if(_0x5645ae)return await _0x51f928['TbrTR'](sleep,0x1f4),_0x104eca+=0x1f4,await _0x359aa1();else return;};return await _0x359aa1(),new Promise((_0x2c0434,_0x4e414a)=>{const _0x10e67b=_0x5140ca,_0xe870c7={'xjSDT':function(_0x3fc1ba,_0x39a237){return _0x3fc1ba===_0x39a237;}};let _0x4eca47=![],_0x302b81=null;const _0x85ce1f=_0x51f928[_0x10e67b(0x17a)](randomUUID);sendSuccessCBMap[_0x85ce1f]=_0x55dc78=>{const _0x31e4c4=_0x10e67b;if(_0xe870c7[_0x31e4c4(0x197)](_0x55dc78[_0x31e4c4(0x193)],_0x302b81?.['msgId'])){if(_0xe870c7[_0x31e4c4(0x197)](_0x55dc78['sendStatus'],0x2))return delete sendSuccessCBMap[_0x85ce1f],_0x4eca47=!![],_0x2c0434(_0x55dc78),!![];return![];}return![];},sendMessagePool[_0xbbf157]=async _0x5dc035=>{delete sendMessagePool[_0xbbf157],_0x302b81=_0x5dc035;},_0x51f928['nMNWw'](setTimeout,()=>{const _0x10d124=_0x10e67b;if(_0x4eca47)return;delete sendMessagePool[_0xbbf157],delete sendSuccessCBMap[_0x85ce1f],_0x51f928['MiQKG'](_0x4e414a,_0x51f928[_0x10d124(0x1a6)]);},_0x1ce912);const _0x1fc087=napCatCore['service'][_0x10e67b(0x19e)][_0x10e67b(0x194)]?.['sendMsg']('0',_0xf0d615,_0x1e35de,new Map());});}static async[_0x59e62f(0x19d)](_0x33979a,_0x5d9de2,_0x3d3635){}static async[_0x59e62f(0x19c)](_0x51a009,_0x568def,_0x43498c){const _0x48e1b9=_0x59e62f,_0x371314={'JvLUV':function(_0xbcf971,_0x14b430){return _0xbcf971(_0x14b430);},'jLpKu':_0x48e1b9(0x17d),'vkOMK':function(_0x7431f9,_0x1e094e){return _0x7431f9!=_0x1e094e;},'vmkNq':'com.tencent.multimsg','rKrSX':function(_0x9c89a4,_0x37de31){return _0x9c89a4==_0x37de31;},'LAOON':function(_0x574cfc,_0x52c656,_0x1f7738){return _0x574cfc(_0x52c656,_0x1f7738);}},_0x2a74c5=_0x43498c[_0x48e1b9(0x1aa)](_0x21b84a=>{const _0x5ec2b7=_0x48e1b9;return{'msgId':_0x21b84a,'senderShowName':selfInfo[_0x5ec2b7(0x189)]};});return new Promise((_0x10d0cd,_0x1b50ad)=>{const _0x5320bd=_0x48e1b9,_0x11997a={'ouCFe':function(_0x4d4a4e,_0x238f97){const _0x36484e=_0x5251;return _0x371314[_0x36484e(0x17e)](_0x4d4a4e,_0x238f97);},'fVAVI':_0x371314[_0x5320bd(0x199)],'mZGkU':function(_0x31d1f4,_0x6176dc){const _0x58ba5f=_0x5320bd;return _0x371314[_0x58ba5f(0x196)](_0x31d1f4,_0x6176dc);},'mJdBk':function(_0x20ee66,_0x7df54f){return _0x20ee66(_0x7df54f);}};let _0x321e90=![];const _0x492ba1=new MsgListener(),_0x344972=_0x470426=>{const _0x4fff9d=_0x5320bd,_0xe93e32=_0x470426[_0x4fff9d(0x18a)][_0x4fff9d(0x188)](_0x10a648=>_0x10a648[_0x4fff9d(0x187)]);if(!_0xe93e32)return;const _0x232650=JSON[_0x4fff9d(0x191)](_0xe93e32[_0x4fff9d(0x187)][_0x4fff9d(0x19a)]);if(_0x11997a['ouCFe'](_0x232650[_0x4fff9d(0x17b)],_0x11997a['fVAVI']))return;_0x11997a['mZGkU'](_0x470426['peerUid'],_0x568def[_0x4fff9d(0x185)])&&_0x11997a['mZGkU'](_0x470426['senderUid'],selfInfo[_0x4fff9d(0x174)])&&(_0x321e90=!![],napCatCore['service'][_0x4fff9d(0x19e)][_0x4fff9d(0x194)]?.[_0x4fff9d(0x1a2)](_0x1186ed),_0x11997a[_0x4fff9d(0x1a3)](_0x10d0cd,_0x470426));};_0x492ba1[_0x5320bd(0x183)]=_0x344972;const _0x1186ed=napCatCore[_0x5320bd(0x173)][_0x5320bd(0x19e)][_0x5320bd(0x17c)](_0x492ba1);_0x371314[_0x5320bd(0x19b)](setTimeout,()=>{const _0x547596=_0x5320bd;!_0x321e90&&(napCatCore[_0x547596(0x173)]['msg'][_0x547596(0x194)]?.[_0x547596(0x1a2)](_0x1186ed),_0x371314['JvLUV'](_0x1b50ad,_0x371314[_0x547596(0x1a9)]));},0x1388),napCatCore[_0x5320bd(0x173)][_0x5320bd(0x19e)]['kernelService']?.[_0x5320bd(0x19f)](_0x2a74c5,_0x51a009,_0x568def,[],new Map());});}}