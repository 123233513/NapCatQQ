const _0x3b6e35=_0x4974;(function(_0x3eed8f,_0x32eb2a){const _0x59cfc7=_0x4974,_0x329fcc=_0x3eed8f();while(!![]){try{const _0xbc0706=-parseInt(_0x59cfc7(0x17d))/0x1+parseInt(_0x59cfc7(0x195))/0x2+-parseInt(_0x59cfc7(0x18f))/0x3*(parseInt(_0x59cfc7(0x198))/0x4)+parseInt(_0x59cfc7(0x181))/0x5*(parseInt(_0x59cfc7(0x17c))/0x6)+-parseInt(_0x59cfc7(0x19a))/0x7+-parseInt(_0x59cfc7(0x17b))/0x8+-parseInt(_0x59cfc7(0x183))/0x9*(-parseInt(_0x59cfc7(0x19b))/0xa);if(_0xbc0706===_0x32eb2a)break;else _0x329fcc['push'](_0x329fcc['shift']());}catch(_0x5e82e8){_0x329fcc['push'](_0x329fcc['shift']());}}}(_0x1509,0xc9439));function _0x4974(_0x5d82ce,_0x7207fa){const _0x150909=_0x1509();return _0x4974=function(_0x4974fc,_0x4581d1){_0x4974fc=_0x4974fc-0x173;let _0x393b43=_0x150909[_0x4974fc];return _0x393b43;},_0x4974(_0x5d82ce,_0x7207fa);}import{Wrapper}from'./qqnt';import{GlobalAdapter}from'./qqnt/adapters';import{NapCatCoreWrapper}from'./wrapper';import{NapCatCoreLogin}from'./login';import{NapCatCoreSession}from'./session';import{NapCatCoreService}from'./service';import{appid,qqVersionConfigInfo}from'@/common/utils/QQBasicInfo';import{dbUtil}from'@/common/utils/db';import{hostname,systemVersion}from'@/common/utils/system';import{selfInfo}from'@/common/data';import _0x2248a5 from'node:path';import _0x595de9 from'node:fs';import{EventEmitter}from'node:events';import*as _0x5a6170 from'@log4js-node/log4js-api';export class NapCatCore extends EventEmitter{['log'];['adapter'];['wrapper'];[_0x3b6e35(0x173)];[_0x3b6e35(0x19f)];[_0x3b6e35(0x179)];[_0x3b6e35(0x196)]=[];constructor(){const _0x53ad68=_0x3b6e35,_0x4c7b8b={'CIvSf':'7|4|10|3|5|1|9|2|0|6|8','WsLSp':'QQNT\x20数据目录：','tujbw':_0x53ad68(0x1a7),'LLWRm':_0x53ad68(0x185),'qGXKT':'Windows\x2010\x20Pro'},_0x583f75=_0x4c7b8b['CIvSf'][_0x53ad68(0x176)]('|');let _0x541ef1=0x0;while(!![]){switch(_0x583f75[_0x541ef1++]){case'0':this['log']['debug'](_0x4c7b8b[_0x53ad68(0x19e)],this[_0x53ad68(0x18d)][_0x53ad68(0x17a)]);continue;case'1':this[_0x53ad68(0x19f)]=new NapCatCoreSession();continue;case'2':this['log'][_0x53ad68(0x188)](_0x4c7b8b[_0x53ad68(0x1a9)],qqVersionConfigInfo[_0x53ad68(0x19d)]);continue;case'3':this['wrapper']=new NapCatCoreWrapper();continue;case'4':this[_0x53ad68(0x199)]=_0x5a6170[_0x53ad68(0x194)](_0x4c7b8b[_0x53ad68(0x182)]);continue;case'5':this[_0x53ad68(0x173)]=new NapCatCoreLogin(this);continue;case'6':this[_0x53ad68(0x18d)][_0x53ad68(0x1a6)]({'base_path_prefix':'','platform_type':0x3,'app_type':0x4,'app_version':qqVersionConfigInfo[_0x53ad68(0x19d)],'os_version':_0x4c7b8b[_0x53ad68(0x187)],'use_xlog':!![],'qua':_0x53ad68(0x190)+qqVersionConfigInfo[_0x53ad68(0x19d)][_0x53ad68(0x18c)]('-','_')+'_GW_B','global_path_config':{'desktopGlobalPath':this[_0x53ad68(0x18d)][_0x53ad68(0x17a)]},'thumb_config':{'maxSide':0x144,'minSide':0x30,'longLimit':0x6,'density':0x2}},new Wrapper['NodeIGlobalAdapter'](this[_0x53ad68(0x193)]));continue;case'7':super();continue;case'8':this[_0x53ad68(0x173)][_0x53ad68(0x1a6)]({'machineId':'','appid':appid,'platVer':systemVersion,'commonPath':this[_0x53ad68(0x18d)][_0x53ad68(0x17a)],'clientVer':qqVersionConfigInfo[_0x53ad68(0x19d)],'hostName':hostname});continue;case'9':this[_0x53ad68(0x179)]=new NapCatCoreService(this);continue;case'10':this[_0x53ad68(0x193)]=new GlobalAdapter();continue;}break;}}async[_0x3b6e35(0x18e)](_0x449f60){const _0x33b2cd=_0x3b6e35,_0x39e289={'FkPlR':_0x33b2cd(0x189)};this[_0x33b2cd(0x19f)][_0x33b2cd(0x1a6)](_0x449f60[_0x33b2cd(0x186)],_0x449f60[_0x33b2cd(0x17f)],this['wrapper'][_0x33b2cd(0x19c)])['then'](()=>{this['onLoginSuccess'](_0x449f60['uin'],_0x449f60['uid']);})[_0x33b2cd(0x175)](_0x2dee32=>{const _0x142e73=_0x33b2cd;console[_0x142e73(0x197)](_0x39e289['FkPlR'],JSON[_0x142e73(0x1a3)](_0x2dee32)),this['emit'](_0x142e73(0x18a),{'code':'-1','message':_0x2dee32});});}[_0x3b6e35(0x184)](_0x255701,_0x1dcd30){const _0x3144fb=_0x3b6e35,_0x2df415={'Fkxqd':_0x3144fb(0x177),'seBLi':_0x3144fb(0x180),'qPXCV':'system.online'},_0x834c44=_0x2248a5['resolve'](this[_0x3144fb(0x18d)][_0x3144fb(0x19c)],_0x2df415['Fkxqd']);_0x595de9[_0x3144fb(0x1a8)](_0x834c44,{'recursive':!![]}),this[_0x3144fb(0x199)]['debug'](_0x2df415[_0x3144fb(0x1a5)],_0x834c44),dbUtil['createConnection'](_0x2248a5['resolve'](_0x834c44,'./'+_0x255701+_0x3144fb(0x1a2))),selfInfo[_0x3144fb(0x186)]=_0x255701,selfInfo[_0x3144fb(0x17f)]=_0x1dcd30,this[_0x3144fb(0x179)][_0x3144fb(0x1a6)](this['session'][_0x3144fb(0x18d)][_0x3144fb(0x174)](),this['session'][_0x3144fb(0x18d)][_0x3144fb(0x1a0)](),this[_0x3144fb(0x19f)][_0x3144fb(0x18d)][_0x3144fb(0x191)](),this[_0x3144fb(0x19f)][_0x3144fb(0x18d)][_0x3144fb(0x1a1)](),this['session'][_0x3144fb(0x18d)][_0x3144fb(0x1a4)]()),this[_0x3144fb(0x196)][_0x3144fb(0x178)](_0x10c93f=>{const _0x497de8=_0x3144fb;new Promise((_0x3047f2,_0x343025)=>{const _0x4c9101=_0x4974,_0x564fe0=_0x10c93f();_0x564fe0 instanceof Promise&&_0x564fe0[_0x4c9101(0x18b)](_0x3047f2)[_0x4c9101(0x175)](_0x343025);})[_0x497de8(0x18b)]();}),this['emit'](_0x2df415[_0x3144fb(0x192)],{'uin':_0x255701,'uid':_0x1dcd30});}[_0x3b6e35(0x17e)](){}['addLoginSuccessCallback'](_0x356259){this['loginSuccessCbList']['push'](_0x356259);}}function _0x1509(){const _0x2f1e79=['curVersion','WsLSp','session','getGroupService','getProfileService','.db','stringify','getProfileLikeService','seBLi','init','QQNT\x20版本：','mkdirSync','tujbw','login','getMsgService','catch','split','./NapCat/data','map','service','dataPathGlobal','12582608DkQbzq','15288xKELqY','1380360qUiYIa','onMessage','uid','本账号数据/缓存目录：','905kHpRge','LLWRm','35000253LPCOwZ','onLoginSuccess','Core','uin','qGXKT','debug','登录失败','system.login.error','then','replace','wrapper','initPostLogin','9444NJQcgm','V1_WIN_NQ_','getBuddyService','qPXCV','adapter','getLogger','2314990ErtQTc','loginSuccessCbList','error','2052mUdsxy','log','805791Xjtqgq','10pztQLQ','dataPath'];_0x1509=function(){return _0x2f1e79;};return _0x1509();}export const napCatCore=new NapCatCore();