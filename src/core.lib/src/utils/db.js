function _0x16dc(){const _0x425067=['then','db\x20could\x20not\x20add\x20msg','清理消息缓存','YxsEl','wLiUd','716DMigeE','Could\x20not\x20create\x20table\x20msgs','msgSeq','UPFyP','ZcBIS','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','Xddvp','QsyTD','3676424ypevxY','lbSVc','uuid','qaFZi','IblJH','1148646INbmOf','ARSSj','gRXzd','getMsgByLongId','addMsg','get','UYhlK','catch','updateMsg','hVAvm','IPsPp','XpGtq','LJtqS','qXZnT','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?','TPIhP','JHtGh','INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','lJQaR','getReceivedTempUinMap','Could\x20not\x20get\x20msg','716576oakPTI','WkXve','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','msgCache','uid','has','SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?','getMsg','2643hfUVDe','OrYah','tNzsm','yJzKX','tdMjp','delete','sypzs','msgId','sbqgK','iQsyz','forEach','Xiyvi','elementId','记录消息到数据库,\x20消息长id:\x20','path','POhLo','wwyuh','maxId','getMsgsByMsgId','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','assign','UMECq','prepare',',\x20短id:\x20','db\x20could\x20not\x20add\x20file','hAyVT','element','now','parse','JDmNz','db\x20could\x20not\x20get\x20file\x20cache','kGWlX','set','getFileCache','all','run','Method\x20not\x20implemented.','KzlLT','QvAyD','UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?','5341406dGXQBW','size','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?','kvPgH','msgList','tUkny','DIYbs','pHuhs','Could\x20not\x20create\x20table\x20temp_uins','db\x20could\x20not\x20get\x20temp\x20uin\x20map','getMsgBySeq','NdljG','errno','gRQqJ','chatType','Could\x20not\x20create\x20table\x20files','LiBGl','close','stack','kfvSw','SELECT\x20*\x20FROM\x20temp_uins','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','QWIWx','sueAy','KoEFP','hCvgF','Cvjds','elementType','Could\x20not\x20connect\x20to\x20database','url','oevYA','INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','getMsgByShortId','PSDtA','数据库中消息最大短id','db\x20could\x20not\x20update\x20file\x20cache','iEdlz','agrmz','swfrD','init','XZbNU','toString','16068942VtIggb','peerUid','db\x20getMsgByLongId\x20error','BWyxb','1985268AydWVb','addTempUin','getFileCacheByUuid','QlpvE','createTable','getFileCacheByName','更新消息,\x20shortId:','BknsT','name','gRsVx','globalMsgShortId','UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?','getCurrentMaxShortId','Database','padFO','OPEN_READWRITE','5CRLuPt','EeemT','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','BKxNd','OPEN_CREATE'];_0x16dc=function(){return _0x425067;};return _0x16dc();}const _0x3ca36c=_0x1e9f;(function(_0x1de2fd,_0x639761){const _0x1a5957=_0x1e9f,_0x45dea2=_0x1de2fd();while(!![]){try{const _0x30856f=parseInt(_0x1a5957(0x13c))/0x1+-parseInt(_0x1a5957(0xff))/0x2+parseInt(_0x1a5957(0x144))/0x3*(parseInt(_0x1a5957(0x119))/0x4)+parseInt(_0x1a5957(0x10f))/0x5*(parseInt(_0x1a5957(0x126))/0x6)+-parseInt(_0x1a5957(0x16c))/0x7+-parseInt(_0x1a5957(0x121))/0x8+parseInt(_0x1a5957(0xfb))/0x9;if(_0x30856f===_0x639761)break;else _0x45dea2['push'](_0x45dea2['shift']());}catch(_0x13c6e9){_0x45dea2['push'](_0x45dea2['shift']());}}}(_0x16dc,0x9b405));import _0x120ee5 from'sqlite3';function _0x1e9f(_0x58ec3f,_0x39e7ac){const _0x16dcd5=_0x16dc();return _0x1e9f=function(_0x1e9f9a,_0x28bc80){_0x1e9f9a=_0x1e9f9a-0xe6;let _0x314dd1=_0x16dcd5[_0x1e9f9a];return _0x314dd1;},_0x1e9f(_0x58ec3f,_0x39e7ac);}import{logDebug,logError}from'@/common/utils/log';import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async[_0x3ca36c(0xf8)](_0x4ecb41){const _0x153410=_0x3ca36c,_0x446054={'lbSVc':function(_0x23bd05,_0x429169,_0x56ba64){return _0x23bd05(_0x429169,_0x56ba64);},'PsyLc':_0x153410(0xed),'pHPzz':function(_0x2686b1){return _0x2686b1();},'padFO':function(_0x24821c,_0x4d0a19){return _0x24821c|_0x4d0a19;}};if(this['db'])return;return new Promise((_0x56de21,_0x40452b)=>{const _0x37fc1d=_0x153410,_0x2d96d8={'UYhlK':function(_0x4997b6,_0x3314f6,_0x2e0b5b){const _0x17593d=_0x1e9f;return _0x446054[_0x17593d(0x122)](_0x4997b6,_0x3314f6,_0x2e0b5b);},'WkXve':_0x446054['PsyLc'],'EeemT':function(_0x5dff7c,_0x401517){return _0x5dff7c(_0x401517);},'iQsyz':function(_0x3b9560){return _0x446054['pHPzz'](_0x3b9560);}};this['db']=new _0x120ee5[(_0x37fc1d(0x10c))](_0x4ecb41,_0x446054[_0x37fc1d(0x10d)](_0x120ee5[_0x37fc1d(0x10e)],_0x120ee5[_0x37fc1d(0x113)]),_0x554a1a=>{const _0x46d635=_0x37fc1d;if(_0x554a1a){_0x2d96d8[_0x46d635(0x12c)](logError,_0x2d96d8[_0x46d635(0x13d)],_0x554a1a),_0x2d96d8[_0x46d635(0x110)](_0x40452b,_0x554a1a);return;}this['createTable'](),_0x2d96d8[_0x46d635(0x14d)](_0x56de21);});});}['createTable'](){const _0x3bf583=_0x3ca36c;throw new Error(_0x3bf583(0x168));}[_0x3ca36c(0x17d)](){this['db']?.['close']();}}class DBUtil extends DBUtilBase{['msgCache']=new Map();['globalMsgShortId']=-0x7ffffff8;constructor(){const _0x385a44=_0x3ca36c,_0x40b464={'VIjmH':function(_0x4ac4e0,_0x9e5873){return _0x4ac4e0-_0x9e5873;},'hVAvm':function(_0x3b15f4,_0x5abb26){return _0x3b15f4*_0x5abb26;},'lJQaR':function(_0x2e4317,_0x353aa2){return _0x2e4317(_0x353aa2);},'qXZnT':_0x385a44(0x116),'CMYDK':function(_0x280ac4,_0x119154){return _0x280ac4*_0x119154;}};super();const _0xf36b05=_0x40b464['CMYDK'](0x3e8,0x3c)*0xa;setInterval(()=>{const _0x5f4ea9=_0x385a44,_0x42f580={'PSDtA':function(_0x18bd19,_0x4b0b43){return _0x18bd19>_0x4b0b43;},'XpGtq':function(_0x4db48f,_0x173eee){return _0x40b464['VIjmH'](_0x4db48f,_0x173eee);},'BknsT':function(_0x59e5e7,_0x2e7fca){const _0x27d3f9=_0x1e9f;return _0x40b464[_0x27d3f9(0x12f)](_0x59e5e7,_0x2e7fca);},'hCvgF':function(_0x5c7966,_0x1806e6){return _0x5c7966(_0x1806e6);}};_0x40b464[_0x5f4ea9(0x139)](logDebug,_0x40b464[_0x5f4ea9(0x133)]),this[_0x5f4ea9(0x13f)]['forEach']((_0x3c2ccc,_0x1fefd2)=>{const _0xc5e5b4=_0x5f4ea9;_0x42f580[_0xc5e5b4(0xf2)](_0x42f580[_0xc5e5b4(0x131)](Date[_0xc5e5b4(0x15f)](),_0x42f580[_0xc5e5b4(0x106)](_0x42f580[_0xc5e5b4(0xea)](parseInt,_0x3c2ccc['msgTime']),0x3e8)),_0xf36b05)&&this[_0xc5e5b4(0x13f)][_0xc5e5b4(0x149)](_0x1fefd2);});},_0xf36b05);}async[_0x3ca36c(0xf8)](_0x475683){const _0xae8bd2=_0x3ca36c;await super[_0xae8bd2(0xf8)](_0x475683),this['globalMsgShortId']=await this['getCurrentMaxShortId']();}[_0x3ca36c(0x103)](){const _0x420981=_0x3ca36c,_0x1d2f87={'wwyuh':function(_0x17b409,_0x18d963,_0xef5fa6){return _0x17b409(_0x18d963,_0xef5fa6);},'kfvSw':_0x420981(0x17b),'wLiUd':_0x420981(0x174)},_0x102d6c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)';this['db'][_0x420981(0x167)](_0x102d6c,function(_0x258865){const _0xbdb784=_0x420981;_0x258865&&logError(_0xbdb784(0x11a),_0x258865[_0xbdb784(0x17e)]);});const _0x46d823=_0x420981(0xe6);this['db']['run'](_0x46d823,function(_0xfe1e4f){const _0x2f0b3c=_0x420981;_0xfe1e4f&&_0x1d2f87[_0x2f0b3c(0x154)](logError,_0x1d2f87[_0x2f0b3c(0x17f)],_0xfe1e4f);});const _0x4670f8=_0x420981(0x111);this['db'][_0x420981(0x167)](_0x4670f8,function(_0x55c800){const _0x8b6de5=_0x420981;_0x55c800&&logError(_0x1d2f87[_0x8b6de5(0x118)],_0x55c800);});}async[_0x3ca36c(0x10b)](){const _0x1a33e9=_0x3ca36c,_0x4dcbe4={'IPsPp':function(_0x3e9aee,_0x5799c5,_0x44f858){return _0x3e9aee(_0x5799c5,_0x44f858);},'XZbNU':'Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','KoEFP':function(_0x3dc738,_0x35bd62){return _0x3dc738(_0x35bd62);},'BKxNd':_0x1a33e9(0xf3),'oevYA':_0x1a33e9(0x11e)};return new Promise((_0x160676,_0x2792d9)=>{const _0x9a060d=_0x1a33e9;this['db']['get'](_0x4dcbe4[_0x9a060d(0xef)],(_0x3a235d,_0xc0dd90)=>{const _0x3ed541=_0x9a060d;if(_0x3a235d)return _0x4dcbe4[_0x3ed541(0x130)](logDebug,_0x4dcbe4[_0x3ed541(0xf9)],_0x3a235d),_0x4dcbe4[_0x3ed541(0xe9)](_0x160676,-0x7ffffff8);_0x4dcbe4[_0x3ed541(0x130)](logDebug,_0x4dcbe4[_0x3ed541(0x112)],_0xc0dd90?.['maxId']),_0x4dcbe4['KoEFP'](_0x160676,_0xc0dd90?.[_0x3ed541(0x155)]??-0x7ffffff8);});});}async[_0x3ca36c(0x143)](_0x20d0ce,_0x9df7cc){const _0x15db31=_0x3ca36c,_0x591f2a={'CwAbz':_0x15db31(0x13b),'UMECq':function(_0x84289d,_0x4f8a8c){return _0x84289d(_0x4f8a8c);},'sypzs':function(_0x23bcc8,_0x520cd2){return _0x23bcc8(_0x520cd2);}},_0x399dec=this['db'][_0x15db31(0x15a)](_0x20d0ce);return new Promise((_0x40a3f6,_0x179730)=>{const _0x3c1ad5=_0x15db31,_0x2e6e48={'QsyTD':function(_0x2e2553,_0x48d7e9){const _0x4dcb18=_0x1e9f;return _0x591f2a[_0x4dcb18(0x14a)](_0x2e2553,_0x48d7e9);}};_0x399dec[_0x3c1ad5(0x12b)](..._0x9df7cc,(_0x50e43b,_0x5c7992)=>{const _0x2be365=_0x3c1ad5,_0x2123a8={'YxsEl':function(_0x3fb088,_0xd53c06){return _0x3fb088(_0xd53c06);}};if(_0x50e43b)return logError(_0x591f2a['CwAbz'],_0x50e43b,_0x20d0ce,_0x9df7cc),_0x591f2a[_0x2be365(0x159)](_0x40a3f6,null);if(!_0x5c7992){_0x40a3f6(null);return;}const _0x2bb4fc=_0x5c7992['longId'];NTQQMsgApi[_0x2be365(0x156)]({'peerUid':_0x5c7992[_0x2be365(0xfc)],'chatType':_0x5c7992[_0x2be365(0x17a)]},[_0x2bb4fc])[_0x2be365(0x114)](_0xca4eff=>{const _0x50e9d0=_0x2be365,_0x59570c=_0xca4eff[_0x50e9d0(0x170)][0x0];if(!_0x59570c){_0x40a3f6(null);return;}_0x59570c['id']=_0x5c7992['shortId'],_0x2123a8[_0x50e9d0(0x117)](_0x40a3f6,_0x59570c);})['catch'](_0xec580c=>{const _0x3d8df9=_0x2be365;_0x2e6e48[_0x3d8df9(0x120)](_0x40a3f6,null);});});});}async[_0x3ca36c(0xf1)](_0x312418){const _0xf28603=_0x3ca36c,_0x29d31a={'IblJH':'SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?'};if(this['msgCache'][_0xf28603(0x141)](_0x312418))return this['msgCache']['get'](_0x312418);const _0x213f9a=_0x29d31a[_0xf28603(0x125)];return this['getMsg'](_0x213f9a,[_0x312418]);}async[_0x3ca36c(0x129)](_0x57771d){const _0x36cd9d=_0x3ca36c,_0xa37ff={'qaFZi':_0x36cd9d(0x16e)};if(this[_0x36cd9d(0x13f)][_0x36cd9d(0x141)](_0x57771d))return this[_0x36cd9d(0x13f)][_0x36cd9d(0x12b)](_0x57771d);return this['getMsg'](_0xa37ff[_0x36cd9d(0x124)],[_0x57771d]);}async[_0x3ca36c(0x176)](_0x2ff131,_0x5110a3){const _0x2dcf34=_0x3ca36c,_0x74fdd3={'kBaUz':_0x2dcf34(0x134)},_0x692bf0=_0x74fdd3['kBaUz'];return this[_0x2dcf34(0x143)](_0x692bf0,[_0x2ff131,_0x5110a3]);}async[_0x3ca36c(0x12a)](_0x4948e6,_0x24495a=!![]){const _0x4c1d42=_0x3ca36c,_0x2f208c={'kvPgH':function(_0x5e774d,_0x410c0d,_0x3d6d1d){return _0x5e774d(_0x410c0d,_0x3d6d1d);},'Xiyvi':'db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','KzlLT':function(_0x30784c,_0x2ba91c){return _0x30784c===_0x2ba91c;},'LiBGl':_0x4c1d42(0x115),'LJtqS':_0x4c1d42(0xf0),'elkTH':function(_0x31b203,_0x438741){return _0x31b203(_0x438741);}},_0x549af4=await this[_0x4c1d42(0x129)](_0x4948e6[_0x4c1d42(0x14b)]);if(_0x549af4){if(_0x24495a)this['updateMsg'](_0x4948e6)[_0x4c1d42(0x114)]();return _0x549af4['id'];}const _0x3e7937=this['db']['prepare'](_0x2f208c[_0x4c1d42(0x132)]),_0x2cd3e2=++this[_0x4c1d42(0x109)];return _0x4948e6['id']=_0x2cd3e2,_0x2f208c['elkTH'](logDebug,_0x4c1d42(0x151)+_0x4948e6['msgId']+_0x4c1d42(0x15b)+_0x4948e6['id']),this[_0x4c1d42(0x13f)][_0x4c1d42(0x164)](_0x2cd3e2,_0x4948e6),this[_0x4c1d42(0x13f)][_0x4c1d42(0x164)](_0x4948e6[_0x4c1d42(0x14b)],_0x4948e6),_0x3e7937[_0x4c1d42(0x167)](this['globalMsgShortId'],_0x4948e6[_0x4c1d42(0x14b)],_0x4948e6[_0x4c1d42(0x11b)][_0x4c1d42(0xfa)](),_0x4948e6[_0x4c1d42(0xfc)],_0x4948e6['chatType'],_0x3705ad=>{const _0x184a8e=_0x4c1d42;_0x3705ad&&(_0x2f208c[_0x184a8e(0x169)](_0x3705ad[_0x184a8e(0x178)],0x13)?this[_0x184a8e(0x129)](_0x4948e6['msgId'])['then'](_0xfa8ef7=>{const _0x5bf444=_0x184a8e;_0xfa8ef7?(this[_0x5bf444(0x13f)][_0x5bf444(0x164)](_0x2cd3e2,_0xfa8ef7),this[_0x5bf444(0x13f)][_0x5bf444(0x164)](_0xfa8ef7[_0x5bf444(0x14b)],_0xfa8ef7)):_0x2f208c[_0x5bf444(0x16f)](logError,_0x2f208c[_0x5bf444(0x14f)],_0x3705ad);})[_0x184a8e(0x12d)](_0x533bc1=>logError(_0x184a8e(0xfd),_0x533bc1)):logError(_0x2f208c[_0x184a8e(0x17c)],_0x3705ad));}),_0x2cd3e2;}async[_0x3ca36c(0x12e)](_0x141612){const _0x3da6bb=_0x3ca36c,_0x112ba1={'NdljG':function(_0x4f656f,_0x40312b,_0x779f){return _0x4f656f(_0x40312b,_0x779f);},'sbqgK':'updateMsg\x20db\x20error'},_0x1db70e=this[_0x3da6bb(0x13f)]['get'](_0x141612['msgId']);_0x1db70e&&Object[_0x3da6bb(0x158)](_0x1db70e,_0x141612);logDebug(_0x3da6bb(0x105)+_0x141612['id']+',\x20seq:\x20'+_0x141612[_0x3da6bb(0x11b)]+',\x20msgId:\x20'+_0x141612[_0x3da6bb(0x14b)]);const _0x5a6da=this['db'][_0x3da6bb(0x15a)](_0x3da6bb(0x10a));_0x5a6da[_0x3da6bb(0x167)](_0x141612[_0x3da6bb(0x11b)],_0x141612[_0x3da6bb(0x14b)],_0x4a4b2f=>{const _0x184ec7=_0x3da6bb;_0x4a4b2f&&_0x112ba1[_0x184ec7(0x177)](logError,_0x112ba1[_0x184ec7(0x14c)],_0x4a4b2f);});}async['addFileCache'](_0x554c08){const _0x2b6bb2=_0x3ca36c,_0x673265={'POhLo':function(_0x17fbd9,_0x4b7374,_0x276775){return _0x17fbd9(_0x4b7374,_0x276775);},'sueAy':_0x2b6bb2(0x15c),'BWyxb':function(_0x150843,_0xeaab49){return _0x150843(_0xeaab49);},'swfrD':function(_0x192368,_0x8ade9c){return _0x192368(_0x8ade9c);},'ARSSj':_0x2b6bb2(0x157)},_0x1b054a=this['db'][_0x2b6bb2(0x15a)](_0x673265[_0x2b6bb2(0x127)]);return new Promise((_0x1367fe,_0x66f86a)=>{const _0x57d6d8=_0x2b6bb2;_0x1b054a[_0x57d6d8(0x167)](_0x554c08[_0x57d6d8(0x107)],_0x554c08['path'],_0x554c08['url'],_0x554c08[_0x57d6d8(0x16d)],_0x554c08['uuid'],_0x554c08[_0x57d6d8(0xec)],JSON['stringify'](_0x554c08[_0x57d6d8(0x15e)]),_0x554c08[_0x57d6d8(0x150)],_0x554c08[_0x57d6d8(0x14b)],function(_0xcd039a){const _0x8aad25=_0x57d6d8;_0xcd039a&&(_0x673265[_0x8aad25(0x153)](logError,_0x673265[_0x8aad25(0xe8)],_0xcd039a),_0x673265[_0x8aad25(0xfe)](_0x66f86a,_0xcd039a)),_0x673265[_0x8aad25(0xf7)](_0x1367fe,null);});});}async['getFileCache'](_0x449878,_0x2b1dbf){const _0x341399=_0x3ca36c,_0x1ebe37={'wkgCU':function(_0x19f715,_0x176a60,_0x24ae45){return _0x19f715(_0x176a60,_0x24ae45);},'gRsVx':_0x341399(0x162),'QvAyD':function(_0x4dcf60,_0x4fe1dd){return _0x4dcf60(_0x4fe1dd);}},_0x475ad8=this['db'][_0x341399(0x15a)](_0x449878);return new Promise((_0x3370be,_0x37668c)=>{const _0x321474=_0x341399,_0x548a3f={'UPFyP':function(_0x4b0d47,_0x2a505d,_0x1c7646){return _0x1ebe37['wkgCU'](_0x4b0d47,_0x2a505d,_0x1c7646);},'kGWlX':_0x1ebe37[_0x321474(0x108)],'qFBob':function(_0x40b5ed,_0x5e2ff9){const _0x5cf3df=_0x321474;return _0x1ebe37[_0x5cf3df(0x16a)](_0x40b5ed,_0x5e2ff9);},'JDmNz':function(_0x3f3ac3,_0x527091){const _0x6dca72=_0x321474;return _0x1ebe37[_0x6dca72(0x16a)](_0x3f3ac3,_0x527091);}};_0x475ad8['get'](..._0x2b1dbf,(_0x45b3e9,_0xf086ac)=>{const _0x1ab02f=_0x321474;_0x45b3e9&&(_0x548a3f[_0x1ab02f(0x11c)](logError,_0x548a3f[_0x1ab02f(0x163)],_0x45b3e9),_0x548a3f['qFBob'](_0x37668c,_0x45b3e9)),_0xf086ac&&(_0xf086ac[_0x1ab02f(0x15e)]=JSON[_0x1ab02f(0x160)](_0xf086ac[_0x1ab02f(0x15e)])),_0x548a3f[_0x1ab02f(0x161)](_0x3370be,_0xf086ac);});});}async[_0x3ca36c(0x104)](_0x463551){const _0x2711a5=_0x3ca36c,_0x1a8b80={'Dcmxv':_0x2711a5(0x13e)};return this[_0x2711a5(0x165)](_0x1a8b80['Dcmxv'],[_0x463551]);}async[_0x3ca36c(0x101)](_0x411470){const _0x4fb7ed=_0x3ca36c,_0x49ad2b={'TPIhP':_0x4fb7ed(0x142)};return this['getFileCache'](_0x49ad2b[_0x4fb7ed(0x135)],[_0x411470]);}async['updateFileCache'](_0x20052e){const _0x5ee077=_0x3ca36c,_0x105320={'yJzKX':function(_0x26d93b,_0x4c0520,_0x278954){return _0x26d93b(_0x4c0520,_0x278954);},'gRXzd':_0x5ee077(0xf4),'NZqqZ':function(_0x791e5c,_0x57daa6){return _0x791e5c(_0x57daa6);}},_0x5eab1e=this['db'][_0x5ee077(0x15a)](_0x5ee077(0x16b));return new Promise((_0xdc4067,_0x234622)=>{const _0x502404=_0x5ee077,_0x4fa5b8={'yioeF':function(_0x2fea23,_0xbfa623,_0x859775){const _0x5bcca2=_0x1e9f;return _0x105320[_0x5bcca2(0x147)](_0x2fea23,_0xbfa623,_0x859775);},'ZcBIS':_0x105320[_0x502404(0x128)],'tNzsm':function(_0x18cfee,_0x43d781){return _0x105320['NZqqZ'](_0x18cfee,_0x43d781);},'iEdlz':function(_0x50b825,_0x189d16){return _0x50b825(_0x189d16);}};_0x5eab1e[_0x502404(0x167)](_0x20052e[_0x502404(0x152)],_0x20052e[_0x502404(0xee)],_0x20052e[_0x502404(0x123)],function(_0x366a13){const _0x967fb1=_0x502404;_0x366a13&&(_0x4fa5b8['yioeF'](logError,_0x4fa5b8[_0x967fb1(0x11d)],_0x366a13),_0x4fa5b8[_0x967fb1(0x146)](_0x234622,_0x366a13)),_0x4fa5b8[_0x967fb1(0xf5)](_0xdc4067,null);});});}async[_0x3ca36c(0x13a)](){const _0x52285c=_0x3ca36c,_0x253444={'hAyVT':function(_0x443d6b,_0x49a0bb){return _0x443d6b(_0x49a0bb);},'tUkny':_0x52285c(0x180)},_0x52af69=_0x253444[_0x52285c(0x171)];return new Promise((_0x2fb3a8,_0x26044c)=>{const _0x6a2ba4=_0x52285c,_0x4cb5f5={'QlpvE':function(_0x13f97f,_0x3b8c4e,_0x13463f){return _0x13f97f(_0x3b8c4e,_0x13463f);},'OrYah':function(_0xf23e8a,_0x2200cf){const _0x42fdf4=_0x1e9f;return _0x253444[_0x42fdf4(0x15d)](_0xf23e8a,_0x2200cf);},'DIYbs':function(_0x2b4a19,_0x1a2309){return _0x2b4a19(_0x1a2309);}};this['db'][_0x6a2ba4(0x166)](_0x52af69,(_0x4fc1aa,_0x135fd0)=>{const _0x57a917=_0x6a2ba4;_0x4fc1aa&&(_0x4cb5f5[_0x57a917(0x102)](logError,_0x57a917(0x175),_0x4fc1aa),_0x4cb5f5[_0x57a917(0x145)](_0x26044c,_0x4fc1aa));const _0x5a906c={};_0x135fd0[_0x57a917(0x14e)](_0x1b9dac=>{const _0x2f4553=_0x57a917;_0x5a906c[_0x1b9dac['uin']]=_0x1b9dac[_0x2f4553(0x140)];}),_0x4cb5f5[_0x57a917(0x172)](_0x2fb3a8,_0x5a906c);});});}async['getUidByTempUin'](_0x2279d9){const _0x2a9861=_0x3ca36c,_0xa125a9={'XrFFQ':function(_0x5bbf2a,_0x2f70d0,_0x26be11){return _0x5bbf2a(_0x2f70d0,_0x26be11);},'Xddvp':function(_0xf195b2,_0xb0c6b4){return _0xf195b2(_0xb0c6b4);},'YdkXd':_0x2a9861(0x138)},_0x35d445=_0xa125a9['YdkXd'];return new Promise((_0x5d4548,_0x12bfc0)=>{const _0x3f903f=_0x2a9861,_0x2ba01d={'Cvjds':function(_0x3adca0,_0x35e778,_0x481a8b){return _0xa125a9['XrFFQ'](_0x3adca0,_0x35e778,_0x481a8b);},'JHtGh':function(_0x3c1029,_0xb97512){return _0x3c1029(_0xb97512);},'agrmz':function(_0x42f1db,_0x3be5cb){const _0x3f244f=_0x1e9f;return _0xa125a9[_0x3f244f(0x11f)](_0x42f1db,_0x3be5cb);}};this['db'][_0x3f903f(0x12b)](_0x35d445,[_0x2279d9],(_0x4d50c0,_0x21c740)=>{const _0x55ef1c=_0x3f903f;_0x4d50c0&&(_0x2ba01d[_0x55ef1c(0xeb)](logError,_0x55ef1c(0x175),_0x4d50c0),_0x2ba01d[_0x55ef1c(0x136)](_0x12bfc0,_0x4d50c0)),_0x2ba01d[_0x55ef1c(0xf6)](_0x5d4548,_0x21c740?.['uid']);});});}async[_0x3ca36c(0x100)](_0x236c60,_0x39ac45){const _0xe65ee7=_0x3ca36c,_0x28dc7d={'OxfsB':'db\x20could\x20not\x20add\x20temp\x20uin','pHuhs':function(_0x2e7afa,_0x278706){return _0x2e7afa(_0x278706);},'QWIWx':_0xe65ee7(0x137)},_0x13d368=await this['getUidByTempUin'](_0x236c60);if(!_0x13d368){const _0x5aa4ce=this['db'][_0xe65ee7(0x15a)](_0x28dc7d[_0xe65ee7(0xe7)]);return new Promise((_0x55a49b,_0xf729c8)=>{const _0x2b97fe=_0xe65ee7,_0x41ce87={'tdMjp':_0x28dc7d['OxfsB'],'gRQqJ':function(_0x43a45b,_0x53bd20){const _0xf45724=_0x1e9f;return _0x28dc7d[_0xf45724(0x173)](_0x43a45b,_0x53bd20);}};_0x5aa4ce[_0x2b97fe(0x167)](_0x236c60,_0x39ac45,function(_0x453176){const _0x2b226d=_0x2b97fe;_0x453176&&(logError(_0x41ce87[_0x2b226d(0x148)],_0x453176),_0x41ce87[_0x2b226d(0x179)](_0xf729c8,_0x453176)),_0x41ce87['gRQqJ'](_0x55a49b,null);});});}}}export const dbUtil=new DBUtil();