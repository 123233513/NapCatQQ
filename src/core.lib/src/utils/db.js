function _0x3f75(_0x10c9ac,_0x119a0a){const _0x53de9f=_0x53de();return _0x3f75=function(_0x3f75e7,_0xf9aa38){_0x3f75e7=_0x3f75e7-0x1b5;let _0x11553c=_0x53de9f[_0x3f75e7];return _0x11553c;},_0x3f75(_0x10c9ac,_0x119a0a);}const _0x1cb453=_0x3f75;(function(_0x3dbb71,_0x5cb82b){const _0x28d994=_0x3f75,_0x3b966d=_0x3dbb71();while(!![]){try{const _0xe03b50=parseInt(_0x28d994(0x1cf))/0x1+parseInt(_0x28d994(0x1be))/0x2+parseInt(_0x28d994(0x1df))/0x3+parseInt(_0x28d994(0x222))/0x4*(-parseInt(_0x28d994(0x1e2))/0x5)+-parseInt(_0x28d994(0x1c8))/0x6*(parseInt(_0x28d994(0x214))/0x7)+-parseInt(_0x28d994(0x1d6))/0x8+parseInt(_0x28d994(0x1e7))/0x9*(-parseInt(_0x28d994(0x1d3))/0xa);if(_0xe03b50===_0x5cb82b)break;else _0x3b966d['push'](_0x3b966d['shift']());}catch(_0x4ba01e){_0x3b966d['push'](_0x3b966d['shift']());}}}(_0x53de,0x8ef58));import _0x342d08 from'sqlite3';import{logDebug,logError}from'@/common/utils/log';function _0x53de(){const _0x4093b0=['maxId','run','uKMcX','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','msgId','kAOlP','get','hZMjo','JeMbv','216rydjmc','uid','uin','bkcXt','getFileCache','path','globalMsgShortId','868978rPYUNl','forEach','Database','JMssl','731560WpULUV','viitG','INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)','3924120FpkeEw','getReceivedTempUinMap','msgList','updateMsg','getMsgBySeq','yXYsU','NZWKB','CgppU','tVLvl','3087438wiKoyb','Could\x20not\x20create\x20table\x20temp_uins','Could\x20not\x20create\x20table\x20files','13865zpfhvf','url','msgSeq','LHINQ','shortId','18ZgcNlk','YYGXn','db\x20could\x20not\x20get\x20temp\x20uin\x20map','RLzpA','chatType','elementType','aPvrm','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','getMsgsByMsgId','Could\x20not\x20get\x20msg','getFileCacheByName','ARDte','QmQxA','LeGtQ','size','uuid','msgCache','db\x20could\x20not\x20add\x20msg','uBwZM','element','stringify','getMsgByLongId','MZFwJ','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','GkXXT','getCurrentMaxShortId','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?','mLBks','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','close','db\x20could\x20not\x20get\x20file\x20cache','has','更新消息,\x20shortId:','zjSCx',',\x20seq:\x20','addTempUin','longId','rLDgN','updateMsg\x20db\x20error','jINmU','INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','addMsg','Method\x20not\x20implemented.','errno','RRAiU','119735vqBRwU','UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?','OUZfb','Acieg','catch','OPEN_CREATE','stack','xHLtb','Could\x20not\x20create\x20table\x20msgs','db\x20getMsgByLongId\x20error','gyfyM','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','getMsgByShortId','DlbRo','1336jngoXb','OPEN_READWRITE','peerUid','LUKzk','hnMPL','prepare','saqGB','getFileCacheByUuid','SGiwz','记录消息到数据库,\x20消息长id:\x20','SVmuw','set','getMsg','Kudgt','init','updateFileCache','elementId','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id',',\x20短id:\x20','ayYRG','then','JCgpK','db\x20could\x20not\x20update\x20file\x20cache','hpFXq','HOmge','EfnwN','TOZMS','getUidByTempUin','msgTime','createTable','oPipc','parse','SxXPE','1732450daWBpZ'];_0x53de=function(){return _0x4093b0;};return _0x53de();}import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async[_0x1cb453(0x230)](_0x513453){const _0x4b4639={'OUZfb':function(_0x3deb49,_0x1b64a0,_0x5252c4){return _0x3deb49(_0x1b64a0,_0x5252c4);},'xHLtb':'Could\x20not\x20connect\x20to\x20database','KCHhT':function(_0x3af0a1,_0x3aec8c){return _0x3af0a1|_0x3aec8c;}};if(this['db'])return;return new Promise((_0x501223,_0x528bd1)=>{const _0x253705=_0x3f75,_0x125685={'CgppU':function(_0x43e9f7,_0x11f224,_0x30461b){const _0x353561=_0x3f75;return _0x4b4639[_0x353561(0x216)](_0x43e9f7,_0x11f224,_0x30461b);},'JCgpK':_0x4b4639[_0x253705(0x21b)]};this['db']=new _0x342d08[(_0x253705(0x1d1))](_0x513453,_0x4b4639['KCHhT'](_0x342d08[_0x253705(0x223)],_0x342d08[_0x253705(0x219)]),_0x54df12=>{const _0x5df843=_0x253705;if(_0x54df12){_0x125685[_0x5df843(0x1dd)](logError,_0x125685[_0x5df843(0x237)],_0x54df12),_0x528bd1(_0x54df12);return;}this[_0x5df843(0x1ba)](),_0x501223();});});}[_0x1cb453(0x1ba)](){const _0x4b34a9=_0x1cb453,_0x4484e3={'gyfyM':_0x4b34a9(0x211)};throw new Error(_0x4484e3[_0x4b34a9(0x21e)]);}[_0x1cb453(0x204)](){const _0x17e6ea=_0x1cb453;this['db']?.[_0x17e6ea(0x204)]();}}class DBUtil extends DBUtilBase{[_0x1cb453(0x1f7)]=new Map();['globalMsgShortId']=-0x7ffffff8;constructor(){const _0x26fcc5=_0x1cb453,_0x10365e={'JMssl':function(_0x1486e1,_0x48f5a8){return _0x1486e1*_0x48f5a8;},'LUKzk':function(_0x2c3d42,_0x350a2d){return _0x2c3d42(_0x350a2d);},'hZMjo':'清理消息缓存','zjSCx':function(_0x3c03e5,_0x4af27f){return _0x3c03e5*_0x4af27f;}};super();const _0x37ff6f=_0x10365e[_0x26fcc5(0x1d2)](_0x10365e[_0x26fcc5(0x208)](0x3e8,0x3c),0xa);setInterval(()=>{const _0x36f3a9=_0x26fcc5,_0x5350a8={'YVSSG':function(_0x31685a,_0x305b00){return _0x31685a>_0x305b00;},'SVmuw':function(_0x390b2e,_0x3bad11){const _0x2ebb8a=_0x3f75;return _0x10365e[_0x2ebb8a(0x1d2)](_0x390b2e,_0x3bad11);}};_0x10365e[_0x36f3a9(0x225)](logDebug,_0x10365e[_0x36f3a9(0x1c6)]),this[_0x36f3a9(0x1f7)][_0x36f3a9(0x1d0)]((_0x438796,_0x2f8126)=>{const _0x1ade71=_0x36f3a9;_0x5350a8['YVSSG'](Date['now']()-_0x5350a8[_0x1ade71(0x22c)](parseInt(_0x438796[_0x1ade71(0x1b9)]),0x3e8),_0x37ff6f)&&this[_0x1ade71(0x1f7)]['delete'](_0x2f8126);});},_0x37ff6f);}async[_0x1cb453(0x230)](_0x31c077){const _0x55451d=_0x1cb453;await super[_0x55451d(0x230)](_0x31c077),this[_0x55451d(0x1ce)]=await this[_0x55451d(0x200)]();}[_0x1cb453(0x1ba)](){const _0x46b31f=_0x1cb453,_0x8f2470={'bkcXt':_0x46b31f(0x21c),'saqGB':function(_0x11ad5d,_0xea1ae4,_0x21d18a){return _0x11ad5d(_0xea1ae4,_0x21d18a);},'aPvrm':_0x46b31f(0x1e1)},_0x4aede2='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)';this['db'][_0x46b31f(0x1c0)](_0x4aede2,function(_0x46c38a){const _0x4bcd4e=_0x46b31f;_0x46c38a&&logError(_0x8f2470[_0x4bcd4e(0x1cb)],_0x46c38a[_0x4bcd4e(0x21a)]);});const _0x519175=_0x46b31f(0x1c2);this['db'][_0x46b31f(0x1c0)](_0x519175,function(_0x460c35){const _0x3e559b=_0x46b31f;_0x460c35&&_0x8f2470[_0x3e559b(0x228)](logError,_0x8f2470[_0x3e559b(0x1ed)],_0x460c35);});const _0x11318b=_0x46b31f(0x21f);this['db'][_0x46b31f(0x1c0)](_0x11318b,function(_0x32c277){const _0x528577=_0x46b31f;_0x32c277&&_0x8f2470[_0x528577(0x228)](logError,_0x528577(0x1e0),_0x32c277);});}async['getCurrentMaxShortId'](){const _0x4d1845=_0x1cb453,_0x415ee8={'YYGXn':'Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','jINmU':function(_0x4567c4,_0x4b0c4a){return _0x4567c4(_0x4b0c4a);},'oPipc':function(_0x5e564c,_0x85c4e6,_0x496282){return _0x5e564c(_0x85c4e6,_0x496282);},'kAOlP':_0x4d1845(0x1ee)};return new Promise((_0x3b3c6b,_0x5d0faa)=>{const _0x10d415=_0x4d1845;this['db'][_0x10d415(0x1c5)](_0x415ee8[_0x10d415(0x1c4)],(_0x175dca,_0x82b91a)=>{const _0x5cdb39=_0x10d415;if(_0x175dca)return logDebug(_0x415ee8[_0x5cdb39(0x1e8)],_0x175dca),_0x415ee8[_0x5cdb39(0x20e)](_0x3b3c6b,-0x7ffffff8);_0x415ee8[_0x5cdb39(0x1bb)](logDebug,'数据库中消息最大短id',_0x82b91a?.[_0x5cdb39(0x1bf)]),_0x415ee8[_0x5cdb39(0x20e)](_0x3b3c6b,_0x82b91a?.[_0x5cdb39(0x1bf)]??-0x7ffffff8);});});}async[_0x1cb453(0x22e)](_0x29af6d,_0x85054c){const _0x4800d0=_0x1cb453,_0x47cec0={'hpFXq':function(_0x438fd5,_0x457178){return _0x438fd5(_0x457178);},'LHINQ':function(_0x8e8ade,_0x20ea9e,_0x403cd9,_0x5669bc,_0x2fe101){return _0x8e8ade(_0x20ea9e,_0x403cd9,_0x5669bc,_0x2fe101);}},_0x464925=this['db'][_0x4800d0(0x227)](_0x29af6d);return new Promise((_0x585409,_0x5cfd9a)=>{const _0x32de4d=_0x4800d0;_0x464925[_0x32de4d(0x1c5)](..._0x85054c,(_0x51b776,_0x3e630e)=>{const _0x37eac1=_0x32de4d,_0x2a50fc={'yXYsU':function(_0x55d33b,_0x11f7f4){const _0x2be654=_0x3f75;return _0x47cec0[_0x2be654(0x239)](_0x55d33b,_0x11f7f4);},'RRAiU':function(_0x1bc884,_0x50c08f){const _0x6c8a6d=_0x3f75;return _0x47cec0[_0x6c8a6d(0x239)](_0x1bc884,_0x50c08f);}};if(_0x51b776)return _0x47cec0[_0x37eac1(0x1e5)](logError,_0x37eac1(0x1f0),_0x51b776,_0x29af6d,_0x85054c),_0x585409(null);if(!_0x3e630e){_0x47cec0[_0x37eac1(0x239)](_0x585409,null);return;}const _0x3f55b9=_0x3e630e[_0x37eac1(0x20b)];NTQQMsgApi[_0x37eac1(0x1ef)]({'peerUid':_0x3e630e[_0x37eac1(0x224)],'chatType':_0x3e630e[_0x37eac1(0x1eb)]},[_0x3f55b9])['then'](_0x10a33=>{const _0x185ebb=_0x37eac1,_0x40ab25=_0x10a33[_0x185ebb(0x1d8)][0x0];if(!_0x40ab25){_0x2a50fc[_0x185ebb(0x1db)](_0x585409,null);return;}_0x40ab25['id']=_0x3e630e[_0x185ebb(0x1e6)],_0x2a50fc[_0x185ebb(0x213)](_0x585409,_0x40ab25);})[_0x37eac1(0x218)](_0x541081=>{const _0x228d09=_0x37eac1;_0x2a50fc[_0x228d09(0x1db)](_0x585409,null);});});});}async[_0x1cb453(0x220)](_0x2114b9){const _0x121161=_0x1cb453,_0x47ac01={'hnMPL':_0x121161(0x1fe)};if(this['msgCache'][_0x121161(0x206)](_0x2114b9))return this['msgCache'][_0x121161(0x1c5)](_0x2114b9);const _0x5bf924=_0x47ac01[_0x121161(0x226)];return this[_0x121161(0x22e)](_0x5bf924,[_0x2114b9]);}async[_0x1cb453(0x1fc)](_0x15e133){const _0x10b091=_0x1cb453,_0x68e282={'pZkaD':'SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?'};if(this[_0x10b091(0x1f7)][_0x10b091(0x206)](_0x15e133))return this[_0x10b091(0x1f7)][_0x10b091(0x1c5)](_0x15e133);return this[_0x10b091(0x22e)](_0x68e282['pZkaD'],[_0x15e133]);}async[_0x1cb453(0x1da)](_0x1b411b,_0x362948){const _0x36e86c=_0x1cb453,_0xe76c9c={'DlbRo':_0x36e86c(0x201)},_0x36db6c=_0xe76c9c[_0x36e86c(0x221)];return this['getMsg'](_0x36db6c,[_0x1b411b,_0x362948]);}async[_0x1cb453(0x210)](_0x25d0a0,_0x163176=!![]){const _0x285c70=_0x1cb453,_0x1dd68b={'RLzpA':function(_0x48ad25,_0x204006,_0xdc4673){return _0x48ad25(_0x204006,_0xdc4673);},'pmvIL':_0x285c70(0x233),'LeGtQ':function(_0x198069,_0x54c081){return _0x198069===_0x54c081;},'EfnwN':function(_0x153d0c,_0x2cc44c,_0x17a0e1){return _0x153d0c(_0x2cc44c,_0x17a0e1);},'Acieg':_0x285c70(0x1f8),'rLDgN':_0x285c70(0x20f),'tVLvl':function(_0x5dd8a3,_0x2820b6){return _0x5dd8a3(_0x2820b6);}},_0x2de2bd=await this[_0x285c70(0x1fc)](_0x25d0a0['msgId']);if(_0x2de2bd){if(_0x163176)this[_0x285c70(0x1d9)](_0x25d0a0)[_0x285c70(0x236)]();return _0x2de2bd['id'];}const _0x39adea=this['db']['prepare'](_0x1dd68b[_0x285c70(0x20c)]),_0x46d4b6=++this[_0x285c70(0x1ce)];return _0x25d0a0['id']=_0x46d4b6,_0x1dd68b[_0x285c70(0x1de)](logDebug,_0x285c70(0x22b)+_0x25d0a0['msgId']+_0x285c70(0x234)+_0x25d0a0['id']),this[_0x285c70(0x1f7)][_0x285c70(0x22d)](_0x46d4b6,_0x25d0a0),this[_0x285c70(0x1f7)]['set'](_0x25d0a0[_0x285c70(0x1c3)],_0x25d0a0),_0x39adea['run'](this['globalMsgShortId'],_0x25d0a0[_0x285c70(0x1c3)],_0x25d0a0[_0x285c70(0x1e4)]['toString'](),_0x25d0a0[_0x285c70(0x224)],_0x25d0a0[_0x285c70(0x1eb)],_0x2df25c=>{const _0x206297=_0x285c70;_0x2df25c&&(_0x1dd68b[_0x206297(0x1f4)](_0x2df25c[_0x206297(0x212)],0x13)?this['getMsgByLongId'](_0x25d0a0['msgId'])['then'](_0x4ec10c=>{const _0x5c77c8=_0x206297;_0x4ec10c?(this[_0x5c77c8(0x1f7)]['set'](_0x46d4b6,_0x4ec10c),this[_0x5c77c8(0x1f7)][_0x5c77c8(0x22d)](_0x4ec10c[_0x5c77c8(0x1c3)],_0x4ec10c)):_0x1dd68b[_0x5c77c8(0x1ea)](logError,_0x1dd68b['pmvIL'],_0x2df25c);})[_0x206297(0x218)](_0x3bffb8=>logError(_0x206297(0x21d),_0x3bffb8)):_0x1dd68b[_0x206297(0x1b6)](logError,_0x1dd68b[_0x206297(0x217)],_0x2df25c));}),_0x46d4b6;}async[_0x1cb453(0x1d9)](_0x122e21){const _0x32ab75=_0x1cb453,_0x39436f={'MZFwJ':function(_0x2b6019,_0x1ff9f0,_0x5a27cb){return _0x2b6019(_0x1ff9f0,_0x5a27cb);},'JeMbv':_0x32ab75(0x20d),'SGiwz':function(_0x211bed,_0x5a0380){return _0x211bed(_0x5a0380);},'HOmge':_0x32ab75(0x215)},_0x3f12da=this[_0x32ab75(0x1f7)][_0x32ab75(0x1c5)](_0x122e21[_0x32ab75(0x1c3)]);_0x3f12da&&Object['assign'](_0x3f12da,_0x122e21);_0x39436f[_0x32ab75(0x22a)](logDebug,_0x32ab75(0x207)+_0x122e21['id']+_0x32ab75(0x209)+_0x122e21[_0x32ab75(0x1e4)]+',\x20msgId:\x20'+_0x122e21[_0x32ab75(0x1c3)]);const _0x3fae11=this['db'][_0x32ab75(0x227)](_0x39436f[_0x32ab75(0x1b5)]);_0x3fae11[_0x32ab75(0x1c0)](_0x122e21['msgSeq'],_0x122e21[_0x32ab75(0x1c3)],_0x258882=>{const _0x767a2e=_0x32ab75;_0x258882&&_0x39436f[_0x767a2e(0x1fd)](logError,_0x39436f[_0x767a2e(0x1c7)],_0x258882);});}async['addFileCache'](_0x403482){const _0xa0af1f=_0x1cb453,_0x53eecb={'meHic':function(_0x32eaad,_0x369ef2,_0x4cdc5c){return _0x32eaad(_0x369ef2,_0x4cdc5c);},'mLBks':function(_0x20df23,_0x14ea1d){return _0x20df23(_0x14ea1d);},'GkXXT':'INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)'},_0x1ed40e=this['db'][_0xa0af1f(0x227)](_0x53eecb[_0xa0af1f(0x1ff)]);return new Promise((_0x2dd1bc,_0x29f2b5)=>{const _0x32722a=_0xa0af1f;_0x1ed40e[_0x32722a(0x1c0)](_0x403482['name'],_0x403482[_0x32722a(0x1cd)],_0x403482[_0x32722a(0x1e3)],_0x403482[_0x32722a(0x1f5)],_0x403482['uuid'],_0x403482[_0x32722a(0x1ec)],JSON[_0x32722a(0x1fb)](_0x403482[_0x32722a(0x1fa)]),_0x403482[_0x32722a(0x232)],_0x403482[_0x32722a(0x1c3)],function(_0x173844){const _0x44ffff=_0x32722a;_0x173844&&(_0x53eecb['meHic'](logError,'db\x20could\x20not\x20add\x20file',_0x173844),_0x53eecb[_0x44ffff(0x202)](_0x29f2b5,_0x173844)),_0x2dd1bc(null);});});}async['getFileCache'](_0x1bf0bb,_0x567dce){const _0x248bd8=_0x1cb453,_0x396501={'ARDte':function(_0x59ea83,_0x31100a){return _0x59ea83(_0x31100a);}},_0x583616=this['db'][_0x248bd8(0x227)](_0x1bf0bb);return new Promise((_0x33a0ae,_0x18387e)=>{const _0x131b6b=_0x248bd8;_0x583616[_0x131b6b(0x1c5)](..._0x567dce,(_0x273ebb,_0x33eeec)=>{const _0x36b5dd=_0x131b6b;_0x273ebb&&(logError(_0x36b5dd(0x205),_0x273ebb),_0x396501[_0x36b5dd(0x1f2)](_0x18387e,_0x273ebb)),_0x33eeec&&(_0x33eeec[_0x36b5dd(0x1fa)]=JSON[_0x36b5dd(0x1bc)](_0x33eeec[_0x36b5dd(0x1fa)])),_0x396501[_0x36b5dd(0x1f2)](_0x33a0ae,_0x33eeec);});});}async[_0x1cb453(0x1f1)](_0x591c7b){const _0x44ce3b=_0x1cb453,_0xe4ac38={'xXCQz':_0x44ce3b(0x203)};return this[_0x44ce3b(0x1cc)](_0xe4ac38['xXCQz'],[_0x591c7b]);}async[_0x1cb453(0x229)](_0x4d24d3){const _0x378668=_0x1cb453;return this[_0x378668(0x1cc)]('SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?',[_0x4d24d3]);}async[_0x1cb453(0x231)](_0x4062e6){const _0x23406b=_0x1cb453,_0x30c662={'uKMcX':function(_0x173674,_0x56b7bc,_0x1b308f){return _0x173674(_0x56b7bc,_0x1b308f);},'AQWml':_0x23406b(0x238),'SxXPE':function(_0x5f3988,_0x2f2035){return _0x5f3988(_0x2f2035);},'viitG':function(_0x32ceb3,_0x1454d9){return _0x32ceb3(_0x1454d9);},'jGxDd':'UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?'},_0x4c996d=this['db'][_0x23406b(0x227)](_0x30c662['jGxDd']);return new Promise((_0x1ddc71,_0x556d94)=>{const _0x4a4d97=_0x23406b;_0x4c996d[_0x4a4d97(0x1c0)](_0x4062e6['path'],_0x4062e6['url'],_0x4062e6[_0x4a4d97(0x1f6)],function(_0x1c28f5){const _0x41ac3b=_0x4a4d97;_0x1c28f5&&(_0x30c662[_0x41ac3b(0x1c1)](logError,_0x30c662['AQWml'],_0x1c28f5),_0x30c662[_0x41ac3b(0x1bd)](_0x556d94,_0x1c28f5)),_0x30c662[_0x41ac3b(0x1d4)](_0x1ddc71,null);});});}async[_0x1cb453(0x1d7)](){const _0x1be66a=_0x1cb453,_0x3efac8={'EVzCR':function(_0x52983c,_0xa5df13,_0x316394){return _0x52983c(_0xa5df13,_0x316394);},'HvnEh':'db\x20could\x20not\x20get\x20temp\x20uin\x20map','TOZMS':function(_0x96d33a,_0x26e37e){return _0x96d33a(_0x26e37e);},'QmQxA':'SELECT\x20*\x20FROM\x20temp_uins'},_0x961d46=_0x3efac8[_0x1be66a(0x1f3)];return new Promise((_0x41e864,_0x46ade3)=>{this['db']['all'](_0x961d46,(_0x55a730,_0x14bae0)=>{const _0x4e706c=_0x3f75;_0x55a730&&(_0x3efac8['EVzCR'](logError,_0x3efac8['HvnEh'],_0x55a730),_0x3efac8[_0x4e706c(0x1b7)](_0x46ade3,_0x55a730));const _0x56e67c={};_0x14bae0[_0x4e706c(0x1d0)](_0x521609=>{const _0x2e4098=_0x4e706c;_0x56e67c[_0x521609[_0x2e4098(0x1ca)]]=_0x521609[_0x2e4098(0x1c9)];}),_0x41e864(_0x56e67c);});});}async[_0x1cb453(0x1b8)](_0x426e9b){const _0x325e26=_0x1cb453,_0x3463bf={'ayYRG':function(_0x5e8a3d,_0x2635d6,_0x2f8c34){return _0x5e8a3d(_0x2635d6,_0x2f8c34);},'uBwZM':_0x325e26(0x1e9),'NUZJa':function(_0x34893b,_0x1ef4d0){return _0x34893b(_0x1ef4d0);},'qpBTY':function(_0x11dc98,_0x1db374){return _0x11dc98(_0x1db374);},'HoLzo':'SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?'},_0x242b70=_0x3463bf['HoLzo'];return new Promise((_0x8e7126,_0xb4fbc5)=>{const _0x3495e3=_0x325e26;this['db'][_0x3495e3(0x1c5)](_0x242b70,[_0x426e9b],(_0x343595,_0x50edc8)=>{const _0x38f3f2=_0x3495e3;_0x343595&&(_0x3463bf[_0x38f3f2(0x235)](logError,_0x3463bf[_0x38f3f2(0x1f9)],_0x343595),_0x3463bf['NUZJa'](_0xb4fbc5,_0x343595)),_0x3463bf['qpBTY'](_0x8e7126,_0x50edc8?.['uid']);});});}async[_0x1cb453(0x20a)](_0x2186e1,_0x41b255){const _0x1d8a8d=_0x1cb453,_0x26f4c1={'Kudgt':function(_0x366b39,_0x1eded3,_0x1bd99d){return _0x366b39(_0x1eded3,_0x1bd99d);},'NZWKB':function(_0xe21a0a,_0x59088a){return _0xe21a0a(_0x59088a);},'nBnPt':function(_0x334ea4,_0x2e1b71){return _0x334ea4(_0x2e1b71);},'LcIvK':_0x1d8a8d(0x1d5)},_0x46f6c6=await this[_0x1d8a8d(0x1b8)](_0x2186e1);if(!_0x46f6c6){const _0x20ff11=this['db'][_0x1d8a8d(0x227)](_0x26f4c1['LcIvK']);return new Promise((_0x16fc74,_0x4d683e)=>{const _0x29174b=_0x1d8a8d;_0x20ff11[_0x29174b(0x1c0)](_0x2186e1,_0x41b255,function(_0x180974){const _0x5bb74f=_0x29174b;_0x180974&&(_0x26f4c1[_0x5bb74f(0x22f)](logError,'db\x20could\x20not\x20add\x20temp\x20uin',_0x180974),_0x26f4c1[_0x5bb74f(0x1dc)](_0x4d683e,_0x180974)),_0x26f4c1['nBnPt'](_0x16fc74,null);});});}}}export const dbUtil=new DBUtil();