const _0x14ab8d=_0x4112;(function(_0x1d82d5,_0x38c892){const _0x5b21ec=_0x4112,_0x3869e2=_0x1d82d5();while(!![]){try{const _0x2ace13=-parseInt(_0x5b21ec(0xfc))/0x1+parseInt(_0x5b21ec(0xf3))/0x2*(parseInt(_0x5b21ec(0x120))/0x3)+-parseInt(_0x5b21ec(0x170))/0x4*(-parseInt(_0x5b21ec(0x161))/0x5)+-parseInt(_0x5b21ec(0x14a))/0x6*(-parseInt(_0x5b21ec(0x134))/0x7)+parseInt(_0x5b21ec(0x118))/0x8+-parseInt(_0x5b21ec(0x169))/0x9*(-parseInt(_0x5b21ec(0x135))/0xa)+-parseInt(_0x5b21ec(0x113))/0xb;if(_0x2ace13===_0x38c892)break;else _0x3869e2['push'](_0x3869e2['shift']());}catch(_0x4601c0){_0x3869e2['push'](_0x3869e2['shift']());}}}(_0x17e9,0x84fa5));import _0x2d917e from'sqlite3';import{logDebug,logError}from'@/common/utils/log';function _0x4112(_0x425467,_0x2be4a3){const _0x17e9fc=_0x17e9();return _0x4112=function(_0x411227,_0x5b8e69){_0x411227=_0x411227-0xeb;let _0x16238b=_0x17e9fc[_0x411227];return _0x16238b;},_0x4112(_0x425467,_0x2be4a3);}function _0x17e9(){const _0x179808=['UmeVG','getUidByTempUin','Could\x20not\x20create\x20table\x20temp_uins','globalMsgShortId','iUudQ','addMsg','epEMX','563067wSchGc','Method\x20not\x20implemented.','stack','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','toString','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?','7028RqKXPR','msgId','db\x20getMsgByLongId\x20error','数据库中消息最大短id','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','lNipj','getMsgByShortId','getReceivedTempUinMap','SjwIH','YhutS','stringify','KiMeG','OpbuD','19068iuDgXK','peerUid','addTempUin','cwRXA','IOUjs','then','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?','dGfbx','getCurrentMaxShortId','3995zaWdfY','msgSeq','vKyPd','db\x20could\x20not\x20add\x20temp\x20uin','db\x20could\x20not\x20add\x20file','WdUdj','size','get','MZRRJ','UHfoa','getFileCache','getMsgsByMsgId','getFileCacheByName','FafjZ','createTable','记录消息到数据库,\x20消息长id:\x20','url','redlG','uugen','UBryx','parse','prepare','has','12519980qrjdyS','qmpKg','oPQVL','uid','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','2919240nVtHPi','db\x20could\x20not\x20get\x20file\x20cache','assign','init','kGDwY','element','db\x20could\x20not\x20get\x20temp\x20uin\x20map','BKlHn','312qmdkCe','OrNAJ','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','addFileCache','VjROh','jfvxe','msgList','WpBgb','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','lLAgm','maxId','WqRmP','YyZUt','UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?','INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)','close','updateMsg\x20db\x20error','uuid','4865TvdpPA','10xczJpV','Could\x20not\x20connect\x20to\x20database','更新消息,\x20shortId:','msgCache','db\x20could\x20not\x20add\x20msg','bTtxz','pNWJq','catch','run','all','QnSaY','BuTDF','axDhp','Bogdd','updateMsg','fvwKQ','aAjJV','name','VJEAV','ZwXWV','NCtvr','2100xuAOMC','YuJHz','uin','set','gIJVi','jcIXe','XNptR','errno','path','nzENN','updateFileCache',',\x20msgId:\x20','now','INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','elementId','getMsg','forEach','LVAXm','getMsgByLongId','chatType','OPEN_READWRITE','清理消息缓存','getMsgBySeq','70ClkqUt'];_0x17e9=function(){return _0x179808;};return _0x17e9();}import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async['init'](_0x908476){const _0x1eb575={'SYKMD':function(_0x1d309b,_0x500719){return _0x1d309b(_0x500719);},'fvwKQ':function(_0x183058,_0x1818c8){return _0x183058|_0x1818c8;}};if(this['db'])return;return new Promise((_0x14a8c6,_0x185345)=>{const _0x3521ca=_0x4112,_0x22d7ee={'aAjJV':function(_0x3fb257,_0x14ee48){return _0x1eb575['SYKMD'](_0x3fb257,_0x14ee48);},'BuTDF':function(_0x5d9ce9){return _0x5d9ce9();}};this['db']=new _0x2d917e['Database'](_0x908476,_0x1eb575[_0x3521ca(0x144)](_0x2d917e[_0x3521ca(0x15e)],_0x2d917e['OPEN_CREATE']),_0x116c89=>{const _0x3db993=_0x3521ca;if(_0x116c89){logError(_0x3db993(0x136),_0x116c89),_0x22d7ee[_0x3db993(0x145)](_0x185345,_0x116c89);return;}this[_0x3db993(0x10a)](),_0x22d7ee[_0x3db993(0x140)](_0x14a8c6);});});}[_0x14ab8d(0x10a)](){const _0xc28198=_0x14ab8d,_0x2710ce={'UmeVG':_0xc28198(0x16a)};throw new Error(_0x2710ce[_0xc28198(0x162)]);}[_0x14ab8d(0x131)](){const _0x5a414a=_0x14ab8d;this['db']?.[_0x5a414a(0x131)]();}}class DBUtil extends DBUtilBase{[_0x14ab8d(0x138)]=new Map();['globalMsgShortId']=-0x7ffffff8;constructor(){const _0x340f87=_0x14ab8d,_0x1cf62={'ZwXWV':function(_0xd74ac3,_0x423692){return _0xd74ac3*_0x423692;},'WdUdj':function(_0x4fbc51,_0x5a10df){return _0x4fbc51(_0x5a10df);},'jcIXe':function(_0x4098ec,_0x344f8f){return _0x4098ec*_0x344f8f;},'UBryx':function(_0x1c58b6,_0x1d7e34,_0xd18e5a){return _0x1c58b6(_0x1d7e34,_0xd18e5a);}};super();const _0x58926f=_0x1cf62[_0x340f87(0x14f)](_0x1cf62[_0x340f87(0x148)](0x3e8,0x3c),0xa);_0x1cf62[_0x340f87(0x10f)](setInterval,()=>{const _0x4c7b38=_0x340f87;_0x1cf62[_0x4c7b38(0x101)](logDebug,_0x4c7b38(0x15f)),this[_0x4c7b38(0x138)]['forEach']((_0x128c12,_0x50fa42)=>{const _0x34e5af=_0x4c7b38;Date[_0x34e5af(0x156)]()-_0x1cf62[_0x34e5af(0x148)](_0x1cf62['WdUdj'](parseInt,_0x128c12['msgTime']),0x3e8)>_0x58926f&&this[_0x34e5af(0x138)]['delete'](_0x50fa42);});},_0x58926f);}async[_0x14ab8d(0x11b)](_0x16e235){const _0x2026b4=_0x14ab8d;await super[_0x2026b4(0x11b)](_0x16e235),this[_0x2026b4(0x165)]=await this[_0x2026b4(0xfb)]();}['createTable'](){const _0x403048=_0x14ab8d,_0xc98c67={'QnSaY':function(_0x75e5dd,_0x2645bf,_0x183b80){return _0x75e5dd(_0x2645bf,_0x183b80);},'axDhp':'Could\x20not\x20create\x20table\x20msgs','RXfIV':'Could\x20not\x20create\x20table\x20files','rThmg':_0x403048(0x164)},_0x286137=_0x403048(0x117);this['db'][_0x403048(0x13d)](_0x286137,function(_0x23abe3){const _0x46e50f=_0x403048;_0x23abe3&&_0xc98c67[_0x46e50f(0x13f)](logError,_0xc98c67[_0x46e50f(0x141)],_0x23abe3[_0x46e50f(0x16b)]);});const _0x3c6ba8='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)';this['db'][_0x403048(0x13d)](_0x3c6ba8,function(_0x1d8d26){_0x1d8d26&&logError(_0xc98c67['RXfIV'],_0x1d8d26);});const _0x4654a4=_0x403048(0x174);this['db'][_0x403048(0x13d)](_0x4654a4,function(_0x403c40){_0x403c40&&logError(_0xc98c67['rThmg'],_0x403c40);});}async[_0x14ab8d(0xfb)](){const _0x4fad2b={'bTtxz':function(_0x199f43,_0x1163e8,_0xada36){return _0x199f43(_0x1163e8,_0xada36);},'qNbkS':'Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','xqiQG':function(_0x1c1bcd,_0x3b743d){return _0x1c1bcd(_0x3b743d);}};return new Promise((_0x2edec6,_0x3ccbed)=>{const _0x3d69ea=_0x4112,_0x3ef69c={'pNWJq':function(_0x2317ab,_0x230e09,_0x5ed9c8){const _0x56c7a3=_0x4112;return _0x4fad2b[_0x56c7a3(0x13a)](_0x2317ab,_0x230e09,_0x5ed9c8);},'wxZeu':_0x4fad2b['qNbkS'],'YhutS':function(_0x4b279c,_0x45991a){return _0x4b279c(_0x45991a);},'xyehU':function(_0x57b896,_0x51a0e8){return _0x4fad2b['xqiQG'](_0x57b896,_0x51a0e8);}};this['db'][_0x3d69ea(0x103)](_0x3d69ea(0x16c),(_0x20dbcc,_0x518d82)=>{const _0x40d984=_0x3d69ea;if(_0x20dbcc)return _0x3ef69c['pNWJq'](logDebug,_0x3ef69c['wxZeu'],_0x20dbcc),_0x3ef69c[_0x40d984(0xef)](_0x2edec6,-0x7ffffff8);_0x3ef69c[_0x40d984(0x13b)](logDebug,_0x40d984(0x173),_0x518d82?.[_0x40d984(0x12c)]),_0x3ef69c['xyehU'](_0x2edec6,_0x518d82?.[_0x40d984(0x12c)]??-0x7ffffff8);});});}async[_0x14ab8d(0x159)](_0x2e2eb9,_0x4f75ea){const _0x38a298=_0x14ab8d,_0x1f63fc={'oPQVL':function(_0x584359,_0x3c46ec){return _0x584359(_0x3c46ec);},'UNXoZ':function(_0x1d1f0d,_0xac957f,_0x1e6058,_0x32a820,_0xffefa0){return _0x1d1f0d(_0xac957f,_0x1e6058,_0x32a820,_0xffefa0);},'hECaN':'Could\x20not\x20get\x20msg','WpBgb':function(_0x4f9b2b,_0x15ae72){return _0x4f9b2b(_0x15ae72);},'Bogdd':function(_0x5c5e95,_0x24d556){return _0x5c5e95(_0x24d556);}},_0x58d770=this['db'][_0x38a298(0x111)](_0x2e2eb9);return new Promise((_0x98659d,_0x55529b)=>{const _0x42efcf={'jfvxe':function(_0x1af650,_0x3bdfa5){return _0x1af650(_0x3bdfa5);}};_0x58d770['get'](..._0x4f75ea,(_0xf9b269,_0x149081)=>{const _0x416fb4=_0x4112,_0x3da185={'VjROh':function(_0x13ff9b,_0x3866d2){const _0x1f4960=_0x4112;return _0x1f63fc[_0x1f4960(0x115)](_0x13ff9b,_0x3866d2);}};if(_0xf9b269)return _0x1f63fc['UNXoZ'](logError,_0x1f63fc['hECaN'],_0xf9b269,_0x2e2eb9,_0x4f75ea),_0x1f63fc[_0x416fb4(0x128)](_0x98659d,null);if(!_0x149081){_0x1f63fc[_0x416fb4(0x142)](_0x98659d,null);return;}const _0x3cf3e6=_0x149081['longId'];NTQQMsgApi[_0x416fb4(0x107)]({'peerUid':_0x149081['peerUid'],'chatType':_0x149081[_0x416fb4(0x15d)]},[_0x3cf3e6])[_0x416fb4(0xf8)](_0x30c642=>{const _0x3927e3=_0x416fb4,_0x3bbcb1=_0x30c642[_0x3927e3(0x127)][0x0];if(!_0x3bbcb1){_0x42efcf['jfvxe'](_0x98659d,null);return;}_0x3bbcb1['id']=_0x149081['shortId'],_0x42efcf[_0x3927e3(0x126)](_0x98659d,_0x3bbcb1);})[_0x416fb4(0x13c)](_0x2e40ba=>{const _0x36fc50=_0x416fb4;_0x3da185[_0x36fc50(0x125)](_0x98659d,null);});});});}async[_0x14ab8d(0xec)](_0x228813){const _0x5aee4c=_0x14ab8d,_0x114128={'UHfoa':_0x5aee4c(0x123)};if(this[_0x5aee4c(0x138)][_0x5aee4c(0x112)](_0x228813))return this[_0x5aee4c(0x138)][_0x5aee4c(0x103)](_0x228813);const _0x29ed6a=_0x114128[_0x5aee4c(0x105)];return this['getMsg'](_0x29ed6a,[_0x228813]);}async[_0x14ab8d(0x15c)](_0x5da568){const _0x1a1051=_0x14ab8d,_0x3dbfec={'lZENs':_0x1a1051(0x122)};if(this[_0x1a1051(0x138)][_0x1a1051(0x112)](_0x5da568))return this[_0x1a1051(0x138)][_0x1a1051(0x103)](_0x5da568);return this[_0x1a1051(0x159)](_0x3dbfec['lZENs'],[_0x5da568]);}async[_0x14ab8d(0x160)](_0x2054f0,_0x3dea4a){const _0x35855d=_0x14ab8d,_0x55cc56={'OrNAJ':_0x35855d(0xf9)},_0x324e65=_0x55cc56[_0x35855d(0x121)];return this['getMsg'](_0x324e65,[_0x2054f0,_0x3dea4a]);}async[_0x14ab8d(0x167)](_0x12364b,_0x5d0b31=!![]){const _0x3de12c=_0x14ab8d,_0x19fd0f={'KAkrP':_0x3de12c(0x12a),'epEMX':function(_0x580815,_0x2863f9){return _0x580815===_0x2863f9;},'KiMeG':_0x3de12c(0x139),'VJEAV':_0x3de12c(0x157)},_0x3bc064=await this[_0x3de12c(0x15c)](_0x12364b[_0x3de12c(0x171)]);if(_0x3bc064){if(_0x5d0b31)this['updateMsg'](_0x12364b)[_0x3de12c(0xf8)]();return _0x3bc064['id'];}const _0x2054fa=this['db'][_0x3de12c(0x111)](_0x19fd0f[_0x3de12c(0x147)]),_0x5a8997=++this[_0x3de12c(0x165)];return _0x12364b['id']=_0x5a8997,logDebug(_0x3de12c(0x10b)+_0x12364b[_0x3de12c(0x171)]+',\x20短id:\x20'+_0x12364b['id']),this[_0x3de12c(0x138)]['set'](_0x5a8997,_0x12364b),this['msgCache'][_0x3de12c(0x14d)](_0x12364b[_0x3de12c(0x171)],_0x12364b),_0x2054fa[_0x3de12c(0x13d)](this['globalMsgShortId'],_0x12364b['msgId'],_0x12364b[_0x3de12c(0xfd)][_0x3de12c(0x16d)](),_0x12364b[_0x3de12c(0xf4)],_0x12364b[_0x3de12c(0x15d)],_0x54beda=>{const _0xf348cf=_0x3de12c;_0x54beda&&(_0x19fd0f[_0xf348cf(0x168)](_0x54beda[_0xf348cf(0x151)],0x13)?this[_0xf348cf(0x15c)](_0x12364b[_0xf348cf(0x171)])[_0xf348cf(0xf8)](_0x2c18db=>{const _0x4027a5=_0xf348cf;_0x2c18db?(this[_0x4027a5(0x138)][_0x4027a5(0x14d)](_0x5a8997,_0x2c18db),this[_0x4027a5(0x138)]['set'](_0x2c18db[_0x4027a5(0x171)],_0x2c18db)):logError(_0x19fd0f['KAkrP'],_0x54beda);})['catch'](_0x8b1fa3=>logError(_0xf348cf(0x172),_0x8b1fa3)):logError(_0x19fd0f[_0xf348cf(0xf1)],_0x54beda));}),_0x5a8997;}async[_0x14ab8d(0x143)](_0x3bda8b){const _0x37da45=_0x14ab8d,_0x39f5e1={'kWJNx':function(_0x1c4e06,_0x463167,_0x437bd5){return _0x1c4e06(_0x463167,_0x437bd5);},'kGDwY':_0x37da45(0x132),'zEboA':function(_0x2afb7d,_0x10c3c3){return _0x2afb7d(_0x10c3c3);},'YuJHz':_0x37da45(0x16f)},_0x36b35d=this['msgCache'][_0x37da45(0x103)](_0x3bda8b[_0x37da45(0x171)]);_0x36b35d&&Object[_0x37da45(0x11a)](_0x36b35d,_0x3bda8b);_0x39f5e1['zEboA'](logDebug,_0x37da45(0x137)+_0x3bda8b['id']+',\x20seq:\x20'+_0x3bda8b['msgSeq']+_0x37da45(0x155)+_0x3bda8b[_0x37da45(0x171)]);const _0x1adda3=this['db'][_0x37da45(0x111)](_0x39f5e1[_0x37da45(0x14b)]);_0x1adda3[_0x37da45(0x13d)](_0x3bda8b[_0x37da45(0xfd)],_0x3bda8b[_0x37da45(0x171)],_0x59cb5e=>{const _0xb0b4d4=_0x37da45;_0x59cb5e&&_0x39f5e1['kWJNx'](logError,_0x39f5e1[_0xb0b4d4(0x11c)],_0x59cb5e);});}async[_0x14ab8d(0x124)](_0x4ef7f1){const _0x4b402e=_0x14ab8d,_0x2b98aa={'MZRRJ':function(_0x2fdcd1,_0x5b57df){return _0x2fdcd1(_0x5b57df);},'lLAgm':_0x4b402e(0x16e)},_0x1dead8=this['db'][_0x4b402e(0x111)](_0x2b98aa[_0x4b402e(0x12b)]);return new Promise((_0x4e92c9,_0x361283)=>{const _0x39134e=_0x4b402e,_0x10053a={'gIJVi':function(_0x5c6dcb,_0x363934){const _0x9871be=_0x4112;return _0x2b98aa[_0x9871be(0x104)](_0x5c6dcb,_0x363934);}};_0x1dead8[_0x39134e(0x13d)](_0x4ef7f1[_0x39134e(0x146)],_0x4ef7f1[_0x39134e(0x152)],_0x4ef7f1[_0x39134e(0x10c)],_0x4ef7f1[_0x39134e(0x102)],_0x4ef7f1[_0x39134e(0x133)],_0x4ef7f1['elementType'],JSON[_0x39134e(0xf0)](_0x4ef7f1[_0x39134e(0x11d)]),_0x4ef7f1[_0x39134e(0x158)],_0x4ef7f1['msgId'],function(_0xf3d2e3){const _0x1bbc76=_0x39134e;_0xf3d2e3&&(logError(_0x1bbc76(0x100),_0xf3d2e3),_0x10053a[_0x1bbc76(0x14e)](_0x361283,_0xf3d2e3)),_0x10053a[_0x1bbc76(0x14e)](_0x4e92c9,null);});});}async['getFileCache'](_0x370a26,_0xa15d9e){const _0x48e239=_0x14ab8d,_0x5c8614={'lNipj':function(_0x4ca2f7,_0x156604,_0xf14f5){return _0x4ca2f7(_0x156604,_0xf14f5);},'NCtvr':_0x48e239(0x119)},_0x3a0e8c=this['db'][_0x48e239(0x111)](_0x370a26);return new Promise((_0x11c54d,_0x195d0b)=>{const _0x296580=_0x48e239,_0x13ed0d={'dVqsy':function(_0x45bf7e,_0xb2ccb2,_0x23d40a){const _0xdb6ad2=_0x4112;return _0x5c8614[_0xdb6ad2(0xeb)](_0x45bf7e,_0xb2ccb2,_0x23d40a);},'qmpKg':_0x5c8614[_0x296580(0x149)],'BKlHn':function(_0x550dd0,_0x501e97){return _0x550dd0(_0x501e97);}};_0x3a0e8c[_0x296580(0x103)](..._0xa15d9e,(_0x2e8392,_0x3a0c45)=>{const _0x203c88=_0x296580;_0x2e8392&&(_0x13ed0d['dVqsy'](logError,_0x13ed0d[_0x203c88(0x114)],_0x2e8392),_0x13ed0d[_0x203c88(0x11f)](_0x195d0b,_0x2e8392)),_0x3a0c45&&(_0x3a0c45[_0x203c88(0x11d)]=JSON[_0x203c88(0x110)](_0x3a0c45['element'])),_0x13ed0d[_0x203c88(0x11f)](_0x11c54d,_0x3a0c45);});});}async[_0x14ab8d(0x108)](_0x32efda){const _0x297912=_0x14ab8d,_0x172f45={'cwRXA':'SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?'};return this[_0x297912(0x106)](_0x172f45[_0x297912(0xf6)],[_0x32efda]);}async['getFileCacheByUuid'](_0x256b66){const _0x2fda35=_0x14ab8d,_0x2ee275={'IOUjs':'SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?'};return this[_0x2fda35(0x106)](_0x2ee275[_0x2fda35(0xf7)],[_0x256b66]);}async[_0x14ab8d(0x154)](_0x51b8c9){const _0x5d5a14=_0x14ab8d,_0x20f68e=this['db'][_0x5d5a14(0x111)](_0x5d5a14(0x12f));return new Promise((_0x2632c2,_0x481b4c)=>{const _0x14f9da=_0x5d5a14,_0x986535={'LVAXm':'db\x20could\x20not\x20update\x20file\x20cache','dGfbx':function(_0x6f6cfd,_0x27d2ce){return _0x6f6cfd(_0x27d2ce);},'IzgnT':function(_0x8b2956,_0xd12e2e){return _0x8b2956(_0xd12e2e);}};_0x20f68e['run'](_0x51b8c9[_0x14f9da(0x152)],_0x51b8c9[_0x14f9da(0x10c)],_0x51b8c9[_0x14f9da(0x133)],function(_0x505ebb){const _0x304b02=_0x14f9da;_0x505ebb&&(logError(_0x986535[_0x304b02(0x15b)],_0x505ebb),_0x986535[_0x304b02(0xfa)](_0x481b4c,_0x505ebb)),_0x986535['IzgnT'](_0x2632c2,null);});});}async[_0x14ab8d(0xed)](){const _0x5adfd4=_0x14ab8d,_0x1b0b18={'nzENN':function(_0x448d78,_0x1c0a70,_0x2129be){return _0x448d78(_0x1c0a70,_0x2129be);},'uugen':_0x5adfd4(0x11e),'YyZUt':function(_0x568a59,_0x4c2c6d){return _0x568a59(_0x4c2c6d);},'ymiHO':'SELECT\x20*\x20FROM\x20temp_uins'},_0x1c1c9d=_0x1b0b18['ymiHO'];return new Promise((_0x3b7c7f,_0x90419e)=>{const _0x29aba4=_0x5adfd4,_0x6570e3={'SjwIH':function(_0xcdf3d4,_0x3f33e0,_0x565ec7){const _0x229340=_0x4112;return _0x1b0b18[_0x229340(0x153)](_0xcdf3d4,_0x3f33e0,_0x565ec7);},'iUudQ':_0x1b0b18[_0x29aba4(0x10e)],'WqRmP':function(_0x136d10,_0xe02c5){const _0x30bedc=_0x29aba4;return _0x1b0b18[_0x30bedc(0x12e)](_0x136d10,_0xe02c5);}};this['db'][_0x29aba4(0x13e)](_0x1c1c9d,(_0x1f0b3d,_0x3ba112)=>{const _0xd47b9a=_0x29aba4;_0x1f0b3d&&(_0x6570e3[_0xd47b9a(0xee)](logError,_0x6570e3[_0xd47b9a(0x166)],_0x1f0b3d),_0x90419e(_0x1f0b3d));const _0x9edcfb={};_0x3ba112[_0xd47b9a(0x15a)](_0xae3e2=>{const _0xc6f889=_0xd47b9a;_0x9edcfb[_0xae3e2[_0xc6f889(0x14c)]]=_0xae3e2[_0xc6f889(0x116)];}),_0x6570e3[_0xd47b9a(0x12d)](_0x3b7c7f,_0x9edcfb);});});}async[_0x14ab8d(0x163)](_0x43cf33){const _0x8f8640=_0x14ab8d,_0x147842={'vKyPd':function(_0x66cb3,_0x282eff,_0x234c99){return _0x66cb3(_0x282eff,_0x234c99);},'FafjZ':_0x8f8640(0x11e),'XNptR':function(_0x4b13ca,_0xf601c0){return _0x4b13ca(_0xf601c0);}},_0x4dc169=_0x8f8640(0x129);return new Promise((_0x249790,_0x2cdc84)=>{this['db']['get'](_0x4dc169,[_0x43cf33],(_0x930a4b,_0x48cfbf)=>{const _0x1978dd=_0x4112;_0x930a4b&&(_0x147842[_0x1978dd(0xfe)](logError,_0x147842[_0x1978dd(0x109)],_0x930a4b),_0x147842['XNptR'](_0x2cdc84,_0x930a4b)),_0x147842[_0x1978dd(0x150)](_0x249790,_0x48cfbf?.['uid']);});});}async[_0x14ab8d(0xf5)](_0x2b4340,_0x3e46ad){const _0x568137=_0x14ab8d,_0x28d9ce={'OpbuD':function(_0x1a9415,_0x2147dc,_0x3b2c53){return _0x1a9415(_0x2147dc,_0x3b2c53);},'redlG':_0x568137(0xff),'jOQVm':function(_0x29a8f8,_0x377192){return _0x29a8f8(_0x377192);}},_0x3f1a18=await this['getUidByTempUin'](_0x2b4340);if(!_0x3f1a18){const _0xde36a3=this['db'][_0x568137(0x111)](_0x568137(0x130));return new Promise((_0x44ffd7,_0x41fcee)=>{_0xde36a3['run'](_0x2b4340,_0x3e46ad,function(_0x2d09ee){const _0x2311e9=_0x4112;_0x2d09ee&&(_0x28d9ce[_0x2311e9(0xf2)](logError,_0x28d9ce[_0x2311e9(0x10d)],_0x2d09ee),_0x41fcee(_0x2d09ee)),_0x28d9ce['jOQVm'](_0x44ffd7,null);});});}}}export const dbUtil=new DBUtil();