function _0x40fc(_0x26852c,_0x410812){const _0x33cfa4=_0x33cf();return _0x40fc=function(_0x40fc69,_0x3f6c78){_0x40fc69=_0x40fc69-0x117;let _0x3019f4=_0x33cfa4[_0x40fc69];return _0x3019f4;},_0x40fc(_0x26852c,_0x410812);}function _0x33cf(){const _0x4bfa5a=[',\x20短id:\x20','NrPeU','init','dqivx','close','SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?','prepare','dxGvK','cBggO','now','24xclMtj','Method\x20not\x20implemented.','oXKWJ','updateMsg\x20db\x20error','getMsgsByMsgId','WAWIO','ZBnSm','set','element','2513864oMDLrU','iCyxg','记录消息到数据库,\x20消息长id:\x20','LQsUV','msgList','db\x20could\x20not\x20get\x20file\x20cache','更新消息,\x20shortId:','kWIXA','VbFXj','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','maxId','PEDiq','updateFileCache','xpVjD','createTable','igapG','881629CrRNKu','19688ZZszKa','mebSI','catch','MiLrF','SELECT\x20*\x20FROM\x20temp_uins','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?','KBsrE','PHbLj','getMsg','数据库中消息最大短id','peerUid',',\x20seq:\x20','rVEED','msgTime','db\x20could\x20not\x20add\x20msg','zQPDE','dDGfW','Could\x20not\x20create\x20table\x20files','toString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','rUOGa','9617861wGrjgg','elementId','forEach','QNUaf','db\x20could\x20not\x20get\x20temp\x20uin\x20map','gGagT','iCluc','then','getFileCache','HsmOi','db\x20getMsgByLongId\x20error','get','10Qovxmx','kCeBl','getFileCacheByName','updateMsg','uin','db\x20could\x20not\x20add\x20file','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','addFileCache','kPdxm','chatType','45HvZubQ','GCifY','IrTnW','fpOvs','Gnbsd','gAJRv','db\x20could\x20not\x20add\x20temp\x20uin','16382772RdZxZZ','Could\x20not\x20create\x20table\x20temp_uins','aQogp','AjCWs','TIdpw','getMsgByLongId','db\x20could\x20not\x20update\x20file\x20cache','parse','url','getUidByTempUin','OBkzx','iFsCx','run','globalMsgShortId','7515660bRRDvh','2jUBXSO','size','name','UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?','dnSQY','addTempUin','errno','IfEXy','84xzNuJH','longId','NzULF','AvhVd','aQMXw','1738979SljwCP','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','all','assign','getFileCacheByUuid','sXutu','ZvNeK','qWOFe','JPwtf','Could\x20not\x20create\x20table\x20msgs','gCxFV','msgSeq','OLDTN','shortId','stringify','uid','msgCache','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?','ynGku','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','ZvCRl','Database','msgId','delete',',\x20msgId:\x20','Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','uuid','VKUEy','ZNEUf','INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','DzHJo','getCurrentMaxShortId','Could\x20not\x20connect\x20to\x20database'];_0x33cf=function(){return _0x4bfa5a;};return _0x33cf();}const _0x58347f=_0x40fc;(function(_0x8f5c9d,_0x2cf3aa){const _0x41a280=_0x40fc,_0x5160d7=_0x8f5c9d();while(!![]){try{const _0x19eae0=-parseInt(_0x41a280(0x12f))/0x1*(-parseInt(_0x41a280(0x122))/0x2)+parseInt(_0x41a280(0x15d))/0x3*(parseInt(_0x41a280(0x177))/0x4)+-parseInt(_0x41a280(0x121))/0x5+-parseInt(_0x41a280(0x12a))/0x6*(-parseInt(_0x41a280(0x176))/0x7)+parseInt(_0x41a280(0x166))/0x8*(-parseInt(_0x41a280(0x1a3))/0x9)+parseInt(_0x41a280(0x199))/0xa*(-parseInt(_0x41a280(0x18d))/0xb)+parseInt(_0x41a280(0x1aa))/0xc;if(_0x19eae0===_0x2cf3aa)break;else _0x5160d7['push'](_0x5160d7['shift']());}catch(_0x372ab7){_0x5160d7['push'](_0x5160d7['shift']());}}}(_0x33cf,0xe9ef4));import _0x44c28f from'sqlite3';import{logDebug,logError}from'@/common/utils/log';import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async['init'](_0x53aca7){const _0x35510b=_0x40fc,_0x4887c5={'sXutu':function(_0xc273a5,_0x1ccf86,_0x11f387){return _0xc273a5(_0x1ccf86,_0x11f387);},'NzULF':_0x35510b(0x152),'QNUaf':function(_0x5ecf95,_0x316c1e){return _0x5ecf95(_0x316c1e);},'kPdxm':function(_0x38076b){return _0x38076b();}};if(this['db'])return;return new Promise((_0x2588ec,_0x1d186d)=>{const _0x8fec8b=_0x35510b;this['db']=new _0x44c28f[(_0x8fec8b(0x144))](_0x53aca7,_0x44c28f['OPEN_READWRITE']|_0x44c28f['OPEN_CREATE'],_0x590557=>{const _0x355b58=_0x8fec8b;if(_0x590557){_0x4887c5[_0x355b58(0x134)](logError,_0x4887c5[_0x355b58(0x12c)],_0x590557),_0x4887c5[_0x355b58(0x190)](_0x1d186d,_0x590557);return;}this['createTable'](),_0x4887c5[_0x355b58(0x1a1)](_0x2588ec);});});}[_0x58347f(0x174)](){const _0x70312c=_0x58347f;throw new Error(_0x70312c(0x15e));}['close'](){const _0x43a291=_0x58347f;this['db']?.[_0x43a291(0x157)]();}}class DBUtil extends DBUtilBase{[_0x58347f(0x13f)]=new Map();[_0x58347f(0x120)]=-0x7ffffff8;constructor(){const _0x4c57c0=_0x58347f,_0x27b70a={'GCifY':function(_0x3df172,_0x2fb1b7){return _0x3df172>_0x2fb1b7;},'WdbSe':function(_0xc5b1af,_0x595f66){return _0xc5b1af-_0x595f66;},'gCxFV':function(_0x9e59c2,_0x2b6b96){return _0x9e59c2*_0x2b6b96;},'ZBnSm':function(_0x675237,_0x1daebb){return _0x675237(_0x1daebb);},'PHbLj':'清理消息缓存','KBsrE':function(_0x38fd67,_0x32c7ef,_0x28666c){return _0x38fd67(_0x32c7ef,_0x28666c);}};super();const _0xc14f02=0x3e8*0x3c*0xa;_0x27b70a[_0x4c57c0(0x17e)](setInterval,()=>{const _0x2ee725=_0x4c57c0;logDebug(_0x27b70a[_0x2ee725(0x17f)]),this[_0x2ee725(0x13f)][_0x2ee725(0x18f)]((_0x4453f7,_0x4cb433)=>{const _0x57f14e=_0x2ee725;_0x27b70a[_0x57f14e(0x1a4)](_0x27b70a['WdbSe'](Date[_0x57f14e(0x15c)](),_0x27b70a[_0x57f14e(0x139)](_0x27b70a[_0x57f14e(0x163)](parseInt,_0x4453f7[_0x57f14e(0x185)]),0x3e8)),_0xc14f02)&&this[_0x57f14e(0x13f)][_0x57f14e(0x146)](_0x4cb433);});},_0xc14f02);}async[_0x58347f(0x155)](_0x4b5ff1){const _0x154758=_0x58347f;await super[_0x154758(0x155)](_0x4b5ff1),this[_0x154758(0x120)]=await this[_0x154758(0x151)]();}[_0x58347f(0x174)](){const _0x4e4e18=_0x58347f,_0x5b2e74={'fpOvs':function(_0xe64cb0,_0x2ed6f0,_0x56a9e3){return _0xe64cb0(_0x2ed6f0,_0x56a9e3);},'kCeBl':_0x4e4e18(0x138),'kDAwz':function(_0x5497d2,_0x5dffdc,_0x646938){return _0x5497d2(_0x5dffdc,_0x646938);},'hOdAj':function(_0x5d1243,_0x62ca7a,_0x3457d9){return _0x5d1243(_0x62ca7a,_0x3457d9);},'ynGku':_0x4e4e18(0x1ab)},_0x9620a1=_0x4e4e18(0x17c);this['db'][_0x4e4e18(0x11f)](_0x9620a1,function(_0x2b40b7){const _0x12b516=_0x4e4e18;_0x2b40b7&&_0x5b2e74[_0x12b516(0x1a6)](logError,_0x5b2e74[_0x12b516(0x19a)],_0x2b40b7['stack']);});const _0x5c3270=_0x4e4e18(0x130);this['db'][_0x4e4e18(0x11f)](_0x5c3270,function(_0x4a87e3){const _0x1054bf=_0x4e4e18;_0x4a87e3&&_0x5b2e74['kDAwz'](logError,_0x1054bf(0x189),_0x4a87e3);});const _0x46ef32=_0x4e4e18(0x18b);this['db'][_0x4e4e18(0x11f)](_0x46ef32,function(_0x1ee41e){const _0x567e5a=_0x4e4e18;_0x1ee41e&&_0x5b2e74['hOdAj'](logError,_0x5b2e74[_0x567e5a(0x141)],_0x1ee41e);});}async['getCurrentMaxShortId'](){const _0x34e1ae=_0x58347f,_0x41fc3b={'rVEED':function(_0x3186fa,_0x3c2f3b,_0x3d4860){return _0x3186fa(_0x3c2f3b,_0x3d4860);},'zQPDE':_0x34e1ae(0x148),'qRJRr':function(_0x2607ff,_0x3622f4){return _0x2607ff(_0x3622f4);}};return new Promise((_0x51c257,_0x21a0d8)=>{const _0x4314db=_0x34e1ae,_0x23aceb={'OLDTN':function(_0xba829a,_0x46331d,_0x2e08b4){const _0x124ad8=_0x40fc;return _0x41fc3b[_0x124ad8(0x184)](_0xba829a,_0x46331d,_0x2e08b4);},'MiLrF':_0x41fc3b[_0x4314db(0x187)],'rUOGa':function(_0x671be0,_0x2cd394){return _0x41fc3b['qRJRr'](_0x671be0,_0x2cd394);},'FczcE':function(_0x1e66bb,_0x389769,_0x41dfc6){const _0x5eab62=_0x4314db;return _0x41fc3b[_0x5eab62(0x184)](_0x1e66bb,_0x389769,_0x41dfc6);}};this['db'][_0x4314db(0x198)](_0x4314db(0x16f),(_0x3b76ef,_0x22e524)=>{const _0x1096e8=_0x4314db;if(_0x3b76ef)return _0x23aceb[_0x1096e8(0x13b)](logDebug,_0x23aceb[_0x1096e8(0x17a)],_0x3b76ef),_0x23aceb['rUOGa'](_0x51c257,-0x7ffffff8);_0x23aceb['FczcE'](logDebug,_0x1096e8(0x181),_0x22e524?.[_0x1096e8(0x170)]),_0x23aceb[_0x1096e8(0x18c)](_0x51c257,_0x22e524?.[_0x1096e8(0x170)]??-0x7ffffff8);});});}async['getMsg'](_0x79aa97,_0xfbf452){const _0x1c2dd3=_0x58347f,_0x207d1c={'VKUEy':function(_0x5ea7a9,_0x4dd55a){return _0x5ea7a9(_0x4dd55a);},'iFsCx':function(_0x2e0cf8,_0x278113){return _0x2e0cf8(_0x278113);},'dDGfW':function(_0x19d908,_0x247db,_0x3a949d,_0x5619dc,_0x2deb94){return _0x19d908(_0x247db,_0x3a949d,_0x5619dc,_0x2deb94);},'OBkzx':'Could\x20not\x20get\x20msg'},_0x33621f=this['db'][_0x1c2dd3(0x159)](_0x79aa97);return new Promise((_0x255446,_0x2016b1)=>{const _0xf8ef2=_0x1c2dd3;_0x33621f[_0xf8ef2(0x198)](..._0xfbf452,(_0x25337d,_0x39dccc)=>{const _0xddaf0f=_0xf8ef2,_0x9be0df={'NrPeU':function(_0x50ae9f,_0x3c4bf5){const _0x546284=_0x40fc;return _0x207d1c[_0x546284(0x14a)](_0x50ae9f,_0x3c4bf5);},'dqivx':function(_0x5d308c,_0x417e7d){const _0x513da9=_0x40fc;return _0x207d1c[_0x513da9(0x14a)](_0x5d308c,_0x417e7d);},'IrTnW':function(_0x6c84a0,_0x3ed6ae){const _0x6e2747=_0x40fc;return _0x207d1c[_0x6e2747(0x11e)](_0x6c84a0,_0x3ed6ae);}};if(_0x25337d)return _0x207d1c[_0xddaf0f(0x188)](logError,_0x207d1c[_0xddaf0f(0x11d)],_0x25337d,_0x79aa97,_0xfbf452),_0x207d1c[_0xddaf0f(0x11e)](_0x255446,null);if(!_0x39dccc){_0x207d1c[_0xddaf0f(0x14a)](_0x255446,null);return;}const _0x38e8dd=_0x39dccc[_0xddaf0f(0x12b)];NTQQMsgApi[_0xddaf0f(0x161)]({'peerUid':_0x39dccc[_0xddaf0f(0x182)],'chatType':_0x39dccc[_0xddaf0f(0x1a2)]},[_0x38e8dd])[_0xddaf0f(0x194)](_0x256d59=>{const _0x475ebd=_0xddaf0f,_0x3b597a=_0x256d59[_0x475ebd(0x16a)][0x0];if(!_0x3b597a){_0x9be0df[_0x475ebd(0x154)](_0x255446,null);return;}_0x3b597a['id']=_0x39dccc[_0x475ebd(0x13c)],_0x9be0df[_0x475ebd(0x156)](_0x255446,_0x3b597a);})[_0xddaf0f(0x179)](_0x21231f=>{const _0x357923=_0xddaf0f;_0x9be0df[_0x357923(0x1a5)](_0x255446,null);});});});}async['getMsgByShortId'](_0x4e8cb0){const _0x38f8c0=_0x58347f,_0x2dc500={'aQogp':_0x38f8c0(0x142)};if(this[_0x38f8c0(0x13f)]['has'](_0x4e8cb0))return this[_0x38f8c0(0x13f)][_0x38f8c0(0x198)](_0x4e8cb0);const _0x4f0727=_0x2dc500[_0x38f8c0(0x1ac)];return this[_0x38f8c0(0x180)](_0x4f0727,[_0x4e8cb0]);}async[_0x58347f(0x118)](_0x182dbf){const _0x78c2a0=_0x58347f,_0x18a521={'dnSQY':_0x78c2a0(0x140)};if(this[_0x78c2a0(0x13f)]['has'](_0x182dbf))return this[_0x78c2a0(0x13f)][_0x78c2a0(0x198)](_0x182dbf);return this[_0x78c2a0(0x180)](_0x18a521[_0x78c2a0(0x126)],[_0x182dbf]);}async['getMsgBySeq'](_0x19e96b,_0x59e2fd){const _0x10e038=_0x58347f,_0x5cd858={'IfEXy':_0x10e038(0x17d)},_0x2371df=_0x5cd858[_0x10e038(0x129)];return this[_0x10e038(0x180)](_0x2371df,[_0x19e96b,_0x59e2fd]);}async['addMsg'](_0x28aaf3,_0x2a8523=!![]){const _0x107a57=_0x58347f,_0x213ea2={'AvhVd':function(_0xcfab58,_0x30d3ee,_0x2baf55){return _0xcfab58(_0x30d3ee,_0x2baf55);},'xpVjD':_0x107a57(0x186),'PEDiq':'INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','gAJRv':function(_0x3fdae4,_0xc8b41e){return _0x3fdae4(_0xc8b41e);}},_0x4409f0=await this[_0x107a57(0x118)](_0x28aaf3[_0x107a57(0x145)]);if(_0x4409f0){if(_0x2a8523)this[_0x107a57(0x19c)](_0x28aaf3)[_0x107a57(0x194)]();return _0x4409f0['id'];}const _0x391b03=this['db'][_0x107a57(0x159)](_0x213ea2[_0x107a57(0x171)]),_0x43c036=++this[_0x107a57(0x120)];return _0x28aaf3['id']=_0x43c036,_0x213ea2[_0x107a57(0x1a8)](logDebug,_0x107a57(0x168)+_0x28aaf3[_0x107a57(0x145)]+_0x107a57(0x153)+_0x28aaf3['id']),this[_0x107a57(0x13f)][_0x107a57(0x164)](_0x43c036,_0x28aaf3),this[_0x107a57(0x13f)][_0x107a57(0x164)](_0x28aaf3[_0x107a57(0x145)],_0x28aaf3),_0x391b03[_0x107a57(0x11f)](this[_0x107a57(0x120)],_0x28aaf3[_0x107a57(0x145)],_0x28aaf3['msgSeq'][_0x107a57(0x18a)](),_0x28aaf3['peerUid'],_0x28aaf3[_0x107a57(0x1a2)],_0x104169=>{const _0xf4d37=_0x107a57,_0x4ff5b3={'WQtkT':function(_0x296a16,_0x1105ce,_0x528303){const _0x25c32b=_0x40fc;return _0x213ea2[_0x25c32b(0x12d)](_0x296a16,_0x1105ce,_0x528303);}};_0x104169&&(_0x104169[_0xf4d37(0x128)]===0x13?this[_0xf4d37(0x118)](_0x28aaf3[_0xf4d37(0x145)])['then'](_0x214ceb=>{const _0x8dfed8=_0xf4d37;_0x214ceb?(this[_0x8dfed8(0x13f)]['set'](_0x43c036,_0x214ceb),this[_0x8dfed8(0x13f)][_0x8dfed8(0x164)](_0x214ceb['msgId'],_0x214ceb)):_0x4ff5b3['WQtkT'](logError,_0x8dfed8(0x19f),_0x104169);})['catch'](_0x50e0d6=>logError(_0xf4d37(0x197),_0x50e0d6)):logError(_0x213ea2[_0xf4d37(0x173)],_0x104169));}),_0x43c036;}async[_0x58347f(0x19c)](_0x1c06bc){const _0x35d202=_0x58347f,_0x2d6e41={'LQsUV':function(_0xb1d2f4,_0x9726a6,_0x1bd4bb){return _0xb1d2f4(_0x9726a6,_0x1bd4bb);},'VbFXj':_0x35d202(0x160)},_0x45e139=this[_0x35d202(0x13f)]['get'](_0x1c06bc[_0x35d202(0x145)]);_0x45e139&&Object[_0x35d202(0x132)](_0x45e139,_0x1c06bc);logDebug(_0x35d202(0x16c)+_0x1c06bc['id']+_0x35d202(0x183)+_0x1c06bc[_0x35d202(0x13a)]+_0x35d202(0x147)+_0x1c06bc['msgId']);const _0x420ab2=this['db'][_0x35d202(0x159)](_0x35d202(0x125));_0x420ab2[_0x35d202(0x11f)](_0x1c06bc[_0x35d202(0x13a)],_0x1c06bc[_0x35d202(0x145)],_0x75c645=>{const _0xb45f22=_0x35d202;_0x75c645&&_0x2d6e41[_0xb45f22(0x169)](logError,_0x2d6e41[_0xb45f22(0x16e)],_0x75c645);});}async[_0x58347f(0x1a0)](_0x3ced59){const _0x1e2fc0=_0x58347f,_0x36e029={'HsmOi':function(_0x5852c9,_0x3537c5){return _0x5852c9(_0x3537c5);},'KGmWN':_0x1e2fc0(0x14e)},_0x59850a=this['db'][_0x1e2fc0(0x159)](_0x36e029['KGmWN']);return new Promise((_0x1013dc,_0x4491fd)=>{const _0x66d760=_0x1e2fc0,_0x5864ef={'ZvNeK':function(_0x852e0d,_0x194a97){const _0x534238=_0x40fc;return _0x36e029[_0x534238(0x196)](_0x852e0d,_0x194a97);}};_0x59850a[_0x66d760(0x11f)](_0x3ced59[_0x66d760(0x124)],_0x3ced59['path'],_0x3ced59[_0x66d760(0x11b)],_0x3ced59[_0x66d760(0x123)],_0x3ced59[_0x66d760(0x149)],_0x3ced59['elementType'],JSON[_0x66d760(0x13d)](_0x3ced59['element']),_0x3ced59[_0x66d760(0x18e)],_0x3ced59['msgId'],function(_0x37f7c7){const _0x38595a=_0x66d760;_0x37f7c7&&(logError(_0x38595a(0x19e),_0x37f7c7),_0x5864ef[_0x38595a(0x135)](_0x4491fd,_0x37f7c7)),_0x5864ef[_0x38595a(0x135)](_0x1013dc,null);});});}async[_0x58347f(0x195)](_0x244fcb,_0x2d8cb7){const _0x5d0016=_0x58347f,_0x12c882={'dxGvK':function(_0x587710,_0x2209c4,_0x226787){return _0x587710(_0x2209c4,_0x226787);},'Gnbsd':_0x5d0016(0x16b),'gTHkw':function(_0x44103b,_0x30d836){return _0x44103b(_0x30d836);},'aQMXw':function(_0x1dd62a,_0x4850c2){return _0x1dd62a(_0x4850c2);}},_0x53629e=this['db']['prepare'](_0x244fcb);return new Promise((_0x206eda,_0x2e0a86)=>{const _0x13b0c1=_0x5d0016;_0x53629e[_0x13b0c1(0x198)](..._0x2d8cb7,(_0x1c0243,_0x38950c)=>{const _0x47b448=_0x13b0c1;_0x1c0243&&(_0x12c882[_0x47b448(0x15a)](logError,_0x12c882[_0x47b448(0x1a7)],_0x1c0243),_0x12c882['gTHkw'](_0x2e0a86,_0x1c0243)),_0x38950c&&(_0x38950c[_0x47b448(0x165)]=JSON[_0x47b448(0x11a)](_0x38950c[_0x47b448(0x165)])),_0x12c882[_0x47b448(0x12e)](_0x206eda,_0x38950c);});});}async[_0x58347f(0x19b)](_0x300321){const _0x2beafa=_0x58347f,_0x9f4ffe={'hppRb':_0x2beafa(0x14d)};return this['getFileCache'](_0x9f4ffe['hppRb'],[_0x300321]);}async[_0x58347f(0x133)](_0x3dbc33){const _0x539a6e=_0x58347f,_0x1b06c4={'TIdpw':_0x539a6e(0x158)};return this[_0x539a6e(0x195)](_0x1b06c4[_0x539a6e(0x117)],[_0x3dbc33]);}async[_0x58347f(0x172)](_0x1f4b2a){const _0x4a2593=_0x58347f,_0xd56768={'ZNEUf':function(_0x4505f8,_0x5d9c15,_0x36a73b){return _0x4505f8(_0x5d9c15,_0x36a73b);},'qWOFe':'UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?'},_0x8ef6f6=this['db']['prepare'](_0xd56768[_0x4a2593(0x136)]);return new Promise((_0x140885,_0x1364ad)=>{const _0x5acb41=_0x4a2593,_0x23ba2f={'DzHJo':function(_0x1a2ea8,_0x2a546e,_0x5d4451){const _0x32a977=_0x40fc;return _0xd56768[_0x32a977(0x14b)](_0x1a2ea8,_0x2a546e,_0x5d4451);},'fBdbW':_0x5acb41(0x119),'ZvCRl':function(_0x23210d,_0x4af58e){return _0x23210d(_0x4af58e);}};_0x8ef6f6['run'](_0x1f4b2a['path'],_0x1f4b2a[_0x5acb41(0x11b)],_0x1f4b2a['uuid'],function(_0x197bf7){const _0x135de5=_0x5acb41;_0x197bf7&&(_0x23ba2f[_0x135de5(0x150)](logError,_0x23ba2f['fBdbW'],_0x197bf7),_0x23ba2f[_0x135de5(0x143)](_0x1364ad,_0x197bf7)),_0x140885(null);});});}async['getReceivedTempUinMap'](){const _0x4be532=_0x58347f,_0x5ab8ce={'oXKWJ':function(_0x2056b5,_0x2b7d8b,_0x2245d4){return _0x2056b5(_0x2b7d8b,_0x2245d4);},'mebSI':function(_0x1c50da,_0x36eb6e){return _0x1c50da(_0x36eb6e);},'JPwtf':_0x4be532(0x17b)},_0x30cd79=_0x5ab8ce[_0x4be532(0x137)];return new Promise((_0x1ca658,_0x19916a)=>{const _0x251362=_0x4be532,_0x5b315c={'qrygi':function(_0x1beab8,_0x44f10b,_0x31a30e){const _0x586b03=_0x40fc;return _0x5ab8ce[_0x586b03(0x15f)](_0x1beab8,_0x44f10b,_0x31a30e);},'igapG':function(_0x369112,_0x44df52){const _0x513e30=_0x40fc;return _0x5ab8ce[_0x513e30(0x178)](_0x369112,_0x44df52);}};this['db'][_0x251362(0x131)](_0x30cd79,(_0x5da9e9,_0x564950)=>{const _0x1fe1a5=_0x251362;_0x5da9e9&&(_0x5b315c['qrygi'](logError,_0x1fe1a5(0x191),_0x5da9e9),_0x5b315c[_0x1fe1a5(0x175)](_0x19916a,_0x5da9e9));const _0x3d1b0b={};_0x564950[_0x1fe1a5(0x18f)](_0x3d27da=>{const _0xc923ad=_0x1fe1a5;_0x3d1b0b[_0x3d27da[_0xc923ad(0x19d)]]=_0x3d27da[_0xc923ad(0x13e)];}),_0x5b315c[_0x1fe1a5(0x175)](_0x1ca658,_0x3d1b0b);});});}async[_0x58347f(0x11c)](_0x284b20){const _0x1c640b=_0x58347f,_0x9ef893={'gGagT':_0x1c640b(0x191),'AjCWs':_0x1c640b(0x14f)},_0x496124=_0x9ef893[_0x1c640b(0x1ad)];return new Promise((_0x10f5f8,_0x6dd400)=>{const _0x217450=_0x1c640b;this['db'][_0x217450(0x198)](_0x496124,[_0x284b20],(_0x162c33,_0x41906d)=>{const _0x5b821d=_0x217450;_0x162c33&&(logError(_0x9ef893[_0x5b821d(0x192)],_0x162c33),_0x6dd400(_0x162c33)),_0x10f5f8(_0x41906d?.['uid']);});});}async[_0x58347f(0x127)](_0x205f9a,_0x227fc6){const _0x4d999=_0x58347f,_0x5e2bff={'iCyxg':function(_0x2760be,_0x4c0520,_0x56073c){return _0x2760be(_0x4c0520,_0x56073c);},'cBggO':function(_0x31fc4a,_0x162e1e){return _0x31fc4a(_0x162e1e);},'iCluc':_0x4d999(0x14c)},_0x454ab8=await this[_0x4d999(0x11c)](_0x205f9a);if(!_0x454ab8){const _0x42b918=this['db'][_0x4d999(0x159)](_0x5e2bff[_0x4d999(0x193)]);return new Promise((_0x271588,_0x495417)=>{const _0x43c7f9=_0x4d999,_0x3b1fef={'kWIXA':function(_0x6651e9,_0x609417,_0x271987){const _0x333e8d=_0x40fc;return _0x5e2bff[_0x333e8d(0x167)](_0x6651e9,_0x609417,_0x271987);},'WAWIO':function(_0x3a9c55,_0x10236c){const _0x4b2566=_0x40fc;return _0x5e2bff[_0x4b2566(0x15b)](_0x3a9c55,_0x10236c);}};_0x42b918[_0x43c7f9(0x11f)](_0x205f9a,_0x227fc6,function(_0x4dc4c3){const _0x18f588=_0x43c7f9;_0x4dc4c3&&(_0x3b1fef[_0x18f588(0x16d)](logError,_0x18f588(0x1a9),_0x4dc4c3),_0x3b1fef['WAWIO'](_0x495417,_0x4dc4c3)),_0x3b1fef[_0x18f588(0x162)](_0x271588,null);});});}}}export const dbUtil=new DBUtil();