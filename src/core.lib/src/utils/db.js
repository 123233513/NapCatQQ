function _0x2606(){const _0x4fbcf3=[',\x20短id:\x20','SELECT\x20*\x20FROM\x20temp_uins','CeKgE','get','DgRgB','SkiLa','清理消息缓存','getMsg','qddKr','MmNmX','globalMsgShortId','fXHnm','msgId','OPEN_CREATE','ygHBD','NSNSm','db\x20could\x20not\x20get\x20temp\x20uin\x20map','UhzMn','数据库中消息最大短id','run','65jcumDr','getFileCacheByName','addTempUin','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','KOVVl','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','getMsgByLongId','SHUoL','gZqef','YiOTe','delete','name','kxEYB','msgSeq','2HCVsyX','sltzM','INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','all','createTable','LJZvM','now','slPHk',',\x20msgId:\x20','addMsg','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?','maxId','Could\x20not\x20get\x20msg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','5nRbJSX','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','has','4740nSpZOR','db\x20could\x20not\x20add\x20temp\x20uin','deOGO','oRxvG','1592223HaAcWa','UahwS','prepare','element','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','CqQYY','getCurrentMaxShortId','path','YQkSG','561387obHHmw','5841AUxcqA','size','UPeUe','SZbAv','uid','url','Could\x20not\x20create\x20table\x20temp_uins','qGApq','Could\x20not\x20create\x20table\x20msgs','close','dLWHD','APfez','aCQJl','init','jCmUr','XjuWZ','1073352ZctSVP','rFxXS','6VJdjsF','GkkXR','1064456eSaFwC','addFileCache','xKKsR','Database','SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?','PNexS','stringify','jcOwX','toString','longId','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','msgList','UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','Method\x20not\x20implemented.','rOxeN','记录消息到数据库,\x20消息长id:\x20','getMsgBySeq','sNwvZ','db\x20getMsgByLongId\x20error','vvyaC','msgTime','WzEad','uuid','peerUid','XWFNK','MPSlQ','qUxrk','3641708DvLTfY','getMsgsByMsgId','ZgTpw','catch',',\x20seq:\x20','208TlnHAM','Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','vrDpG','elementType','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','ENjZp','chatType','MenIl','updateMsg','msgCache','db\x20could\x20not\x20add\x20msg','db\x20could\x20not\x20add\x20file','getFileCache','TyuDk','forEach','db\x20could\x20not\x20update\x20file\x20cache','Ctoho','then','DotEZ','getUidByTempUin','116568CpfraA','Could\x20not\x20connect\x20to\x20database','set'];_0x2606=function(){return _0x4fbcf3;};return _0x2606();}const _0x400dfd=_0x2ee3;(function(_0xdadc3c,_0x1a2536){const _0x7dea6c=_0x2ee3,_0x2ee6cd=_0xdadc3c();while(!![]){try{const _0x5f418d=parseInt(_0x7dea6c(0xd0))/0x1+-parseInt(_0x7dea6c(0xb2))/0x2*(parseInt(_0x7dea6c(0xc7))/0x3)+-parseInt(_0x7dea6c(0xe5))/0x4*(-parseInt(_0x7dea6c(0xc0))/0x5)+parseInt(_0x7dea6c(0xe3))/0x6*(-parseInt(_0x7dea6c(0x101))/0x7)+parseInt(_0x7dea6c(0x79))/0x8*(parseInt(_0x7dea6c(0x8d))/0x9)+parseInt(_0x7dea6c(0xc3))/0xa*(-parseInt(_0x7dea6c(0xd1))/0xb)+-parseInt(_0x7dea6c(0xe1))/0xc*(-parseInt(_0x7dea6c(0xa4))/0xd);if(_0x5f418d===_0x1a2536)break;else _0x2ee6cd['push'](_0x2ee6cd['shift']());}catch(_0x546fab){_0x2ee6cd['push'](_0x2ee6cd['shift']());}}}(_0x2606,0x4b644));import _0x331a59 from'sqlite3';import{logDebug,logError}from'@/common/utils/log';import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async[_0x400dfd(0xde)](_0x4072d1){const _0x4c8b98=_0x400dfd,_0xe61559={'CeKgE':_0x4c8b98(0x8e),'YQkSG':function(_0x270ab5,_0xbf3742){return _0x270ab5|_0xbf3742;}};if(this['db'])return;return new Promise((_0x4dac6f,_0x40d495)=>{const _0xc8da4e=_0x4c8b98,_0x22a941={'UahwS':function(_0x35b26e,_0x1e767a,_0x40c41e){return _0x35b26e(_0x1e767a,_0x40c41e);},'MmNmX':_0xe61559[_0xc8da4e(0x92)]};this['db']=new _0x331a59[(_0xc8da4e(0xe8))](_0x4072d1,_0xe61559[_0xc8da4e(0xcf)](_0x331a59['OPEN_READWRITE'],_0x331a59[_0xc8da4e(0x9d)]),_0x3d07cd=>{const _0x5f25e8=_0xc8da4e;if(_0x3d07cd){_0x22a941[_0x5f25e8(0xc8)](logError,_0x22a941[_0x5f25e8(0x99)],_0x3d07cd),_0x40d495(_0x3d07cd);return;}this['createTable'](),_0x4dac6f();});});}[_0x400dfd(0xb6)](){const _0x3e197a=_0x400dfd,_0x483ce4={'CqQYY':_0x3e197a(0xf3)};throw new Error(_0x483ce4[_0x3e197a(0xcc)]);}[_0x400dfd(0xda)](){const _0x5712bb=_0x400dfd;this['db']?.[_0x5712bb(0xda)]();}}class DBUtil extends DBUtilBase{[_0x400dfd(0x82)]=new Map();[_0x400dfd(0x9a)]=-0x7ffffff8;constructor(){const _0x374537={'rFxXS':function(_0x19ce81,_0x5ac04b){return _0x19ce81>_0x5ac04b;},'RECvU':function(_0x336c62,_0x1dc7a6){return _0x336c62-_0x1dc7a6;},'Ctoho':function(_0x3182e5,_0x7d35b6){return _0x3182e5*_0x7d35b6;},'SZbAv':function(_0x228fd2,_0x21f6bd){return _0x228fd2(_0x21f6bd);},'EUtsX':function(_0x1b5faa,_0x2cbe4f){return _0x1b5faa*_0x2cbe4f;}};super();const _0x578d23=_0x374537['EUtsX'](_0x374537['Ctoho'](0x3e8,0x3c),0xa);setInterval(()=>{const _0x212c1b=_0x2ee3,_0x2338f1={'gRPGZ':function(_0x560e6f,_0x237708){const _0x1bf259=_0x2ee3;return _0x374537[_0x1bf259(0xe2)](_0x560e6f,_0x237708);},'fXHnm':function(_0xaa1e00,_0x5b510c){return _0x374537['RECvU'](_0xaa1e00,_0x5b510c);},'IMxCc':function(_0x2ca8be,_0x13e8c4){const _0x120928=_0x2ee3;return _0x374537[_0x120928(0x89)](_0x2ca8be,_0x13e8c4);},'sNwvZ':function(_0x2a8131,_0x25aac9){return _0x374537['SZbAv'](_0x2a8131,_0x25aac9);}};_0x374537[_0x212c1b(0xd4)](logDebug,_0x212c1b(0x96)),this[_0x212c1b(0x82)][_0x212c1b(0x87)]((_0x46e3d2,_0x40a2ea)=>{const _0x3bea01=_0x212c1b;_0x2338f1['gRPGZ'](_0x2338f1[_0x3bea01(0x9b)](Date[_0x3bea01(0xb8)](),_0x2338f1['IMxCc'](_0x2338f1[_0x3bea01(0xf7)](parseInt,_0x46e3d2[_0x3bea01(0xfa)]),0x3e8)),_0x578d23)&&this[_0x3bea01(0x82)][_0x3bea01(0xae)](_0x40a2ea);});},_0x578d23);}async[_0x400dfd(0xde)](_0x16fabe){const _0x4f8071=_0x400dfd;await super[_0x4f8071(0xde)](_0x16fabe),this['globalMsgShortId']=await this[_0x4f8071(0xcd)]();}[_0x400dfd(0xb6)](){const _0x195bab=_0x400dfd,_0x47b83c={'PjzGy':_0x195bab(0xd9),'qddKr':'Could\x20not\x20create\x20table\x20files','aCQJl':function(_0x3a3690,_0x32b63b,_0x56d916){return _0x3a3690(_0x32b63b,_0x56d916);},'UPeUe':_0x195bab(0xd7)},_0x4f2fa9=_0x195bab(0xbf);this['db'][_0x195bab(0xa3)](_0x4f2fa9,function(_0x1cf488){_0x1cf488&&logError(_0x47b83c['PjzGy'],_0x1cf488['stack']);});const _0x33d70c=_0x195bab(0xc1);this['db'][_0x195bab(0xa3)](_0x33d70c,function(_0x54ea42){const _0x51e0ea=_0x195bab;_0x54ea42&&logError(_0x47b83c[_0x51e0ea(0x98)],_0x54ea42);});const _0x3c4bbe=_0x195bab(0xa9);this['db'][_0x195bab(0xa3)](_0x3c4bbe,function(_0x48d19a){const _0x41c929=_0x195bab;_0x48d19a&&_0x47b83c[_0x41c929(0xdd)](logError,_0x47b83c[_0x41c929(0xd3)],_0x48d19a);});}async['getCurrentMaxShortId'](){const _0x1b8622=_0x400dfd,_0x165899={'dLWHD':_0x1b8622(0x7a),'UhzMn':function(_0x32054a,_0x108f61){return _0x32054a(_0x108f61);},'YVSyU':function(_0x32f84c,_0x20be03,_0x35e38e){return _0x32f84c(_0x20be03,_0x35e38e);},'DotEZ':_0x1b8622(0xa2),'slPHk':_0x1b8622(0xf2)};return new Promise((_0x275533,_0x18d619)=>{const _0x55d0ea=_0x1b8622;this['db'][_0x55d0ea(0x93)](_0x165899[_0x55d0ea(0xb9)],(_0x1abf51,_0x54c972)=>{const _0x121f05=_0x55d0ea;if(_0x1abf51)return logDebug(_0x165899[_0x121f05(0xdb)],_0x1abf51),_0x165899[_0x121f05(0xa1)](_0x275533,-0x7ffffff8);_0x165899['YVSyU'](logDebug,_0x165899[_0x121f05(0x8b)],_0x54c972?.[_0x121f05(0xbd)]),_0x165899['UhzMn'](_0x275533,_0x54c972?.[_0x121f05(0xbd)]??-0x7ffffff8);});});}async[_0x400dfd(0x97)](_0xe6c28c,_0x301e16){const _0x37c637={'nmdRm':function(_0x3f4ae6,_0x1b8e25,_0x376445,_0x442729,_0x4e5beb){return _0x3f4ae6(_0x1b8e25,_0x376445,_0x442729,_0x4e5beb);},'YiOTe':function(_0x1c4728,_0xca31e5){return _0x1c4728(_0xca31e5);}},_0x59c80e=this['db']['prepare'](_0xe6c28c);return new Promise((_0x3910aa,_0xb26b8a)=>{const _0x393faf=_0x2ee3,_0x1ff608={'rOxeN':function(_0x584eef,_0x1aa4ae){return _0x37c637['YiOTe'](_0x584eef,_0x1aa4ae);},'gZqef':function(_0x5ea03a,_0x173968){const _0x38e7b5=_0x2ee3;return _0x37c637[_0x38e7b5(0xad)](_0x5ea03a,_0x173968);}};_0x59c80e[_0x393faf(0x93)](..._0x301e16,(_0x23f093,_0x3c6948)=>{const _0x38cfcf=_0x393faf;if(_0x23f093)return _0x37c637['nmdRm'](logError,_0x38cfcf(0xbe),_0x23f093,_0xe6c28c,_0x301e16),_0x3910aa(null);if(!_0x3c6948){_0x3910aa(null);return;}const _0x5da78f=_0x3c6948[_0x38cfcf(0xee)];NTQQMsgApi[_0x38cfcf(0x102)]({'peerUid':_0x3c6948[_0x38cfcf(0xfd)],'chatType':_0x3c6948[_0x38cfcf(0x7f)]},[_0x5da78f])[_0x38cfcf(0x8a)](_0x516a4a=>{const _0x224955=_0x38cfcf,_0x339ce=_0x516a4a[_0x224955(0xf0)][0x0];if(!_0x339ce){_0x1ff608[_0x224955(0xf4)](_0x3910aa,null);return;}_0x339ce['id']=_0x3c6948['shortId'],_0x1ff608[_0x224955(0xac)](_0x3910aa,_0x339ce);})['catch'](_0x312117=>{_0x3910aa(null);});});});}async['getMsgByShortId'](_0x23b83a){const _0x36d28d=_0x400dfd,_0x103691={'vvyaC':_0x36d28d(0xef)};if(this[_0x36d28d(0x82)][_0x36d28d(0xc2)](_0x23b83a))return this[_0x36d28d(0x82)][_0x36d28d(0x93)](_0x23b83a);const _0x295968=_0x103691[_0x36d28d(0xf9)];return this[_0x36d28d(0x97)](_0x295968,[_0x23b83a]);}async[_0x400dfd(0xaa)](_0x12c6fc){const _0x946178=_0x400dfd,_0x39f49d={'qGApq':_0x946178(0xbc)};if(this[_0x946178(0x82)][_0x946178(0xc2)](_0x12c6fc))return this['msgCache'][_0x946178(0x93)](_0x12c6fc);return this[_0x946178(0x97)](_0x39f49d[_0x946178(0xd8)],[_0x12c6fc]);}async[_0x400dfd(0xf6)](_0x2fed87,_0x51c9f9){const _0x2865a0=_0x400dfd,_0x11a9d7={'vrDpG':'SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?'},_0x3b4e04=_0x11a9d7[_0x2865a0(0x7b)];return this[_0x2865a0(0x97)](_0x3b4e04,[_0x2fed87,_0x51c9f9]);}async[_0x400dfd(0xbb)](_0x29a2e1,_0x26f2d4=!![]){const _0x37781d=_0x400dfd,_0x4c2660={'TyuDk':function(_0x448940,_0x488352,_0xcd90cb){return _0x448940(_0x488352,_0xcd90cb);},'jCmUr':'db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','XjuWZ':function(_0x572a4b,_0x2a096d){return _0x572a4b===_0x2a096d;},'APfez':function(_0x44254a,_0x287189,_0x5a01ec){return _0x44254a(_0x287189,_0x5a01ec);},'kxEYB':_0x37781d(0x83),'MenIl':_0x37781d(0xb4)},_0xba4a64=await this['getMsgByLongId'](_0x29a2e1[_0x37781d(0x9c)]);if(_0xba4a64){if(_0x26f2d4)this[_0x37781d(0x81)](_0x29a2e1)['then']();return _0xba4a64['id'];}const _0x380c21=this['db']['prepare'](_0x4c2660[_0x37781d(0x80)]),_0x596c87=++this[_0x37781d(0x9a)];return _0x29a2e1['id']=_0x596c87,logDebug(_0x37781d(0xf5)+_0x29a2e1[_0x37781d(0x9c)]+_0x37781d(0x90)+_0x29a2e1['id']),this[_0x37781d(0x82)][_0x37781d(0x8f)](_0x596c87,_0x29a2e1),this['msgCache']['set'](_0x29a2e1[_0x37781d(0x9c)],_0x29a2e1),_0x380c21[_0x37781d(0xa3)](this['globalMsgShortId'],_0x29a2e1[_0x37781d(0x9c)],_0x29a2e1[_0x37781d(0xb1)][_0x37781d(0xed)](),_0x29a2e1[_0x37781d(0xfd)],_0x29a2e1[_0x37781d(0x7f)],_0x142d41=>{const _0x15f558=_0x37781d;_0x142d41&&(_0x4c2660[_0x15f558(0xe0)](_0x142d41['errno'],0x13)?this[_0x15f558(0xaa)](_0x29a2e1[_0x15f558(0x9c)])['then'](_0x1e8ffb=>{const _0x5b6111=_0x15f558;_0x1e8ffb?(this['msgCache']['set'](_0x596c87,_0x1e8ffb),this[_0x5b6111(0x82)][_0x5b6111(0x8f)](_0x1e8ffb[_0x5b6111(0x9c)],_0x1e8ffb)):_0x4c2660[_0x5b6111(0x86)](logError,_0x4c2660[_0x5b6111(0xdf)],_0x142d41);})[_0x15f558(0x77)](_0x177144=>logError(_0x15f558(0xf8),_0x177144)):_0x4c2660[_0x15f558(0xdc)](logError,_0x4c2660[_0x15f558(0xb0)],_0x142d41));}),_0x596c87;}async['updateMsg'](_0x3e6726){const _0x5d416d=_0x400dfd,_0x5ec124={'WzEad':function(_0x42baca,_0x2e5d92){return _0x42baca(_0x2e5d92);},'SHUoL':'UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?'},_0x5c39bf=this['msgCache'][_0x5d416d(0x93)](_0x3e6726[_0x5d416d(0x9c)]);_0x5c39bf&&Object['assign'](_0x5c39bf,_0x3e6726);_0x5ec124[_0x5d416d(0xfb)](logDebug,'更新消息,\x20shortId:'+_0x3e6726['id']+_0x5d416d(0x78)+_0x3e6726[_0x5d416d(0xb1)]+_0x5d416d(0xba)+_0x3e6726[_0x5d416d(0x9c)]);const _0x838bc4=this['db'][_0x5d416d(0xc9)](_0x5ec124[_0x5d416d(0xab)]);_0x838bc4[_0x5d416d(0xa3)](_0x3e6726['msgSeq'],_0x3e6726[_0x5d416d(0x9c)],_0x240f91=>{_0x240f91&&logError('updateMsg\x20db\x20error',_0x240f91);});}async[_0x400dfd(0xe6)](_0x5880a2){const _0x2c947d=_0x400dfd,_0x47342c={'KOVVl':function(_0xadc38f,_0x254b87,_0x1ec5fb){return _0xadc38f(_0x254b87,_0x1ec5fb);},'jcOwX':function(_0x144b7d,_0x43c0f9){return _0x144b7d(_0x43c0f9);},'NSNSm':function(_0x3844ab,_0x330099){return _0x3844ab(_0x330099);},'YuWvg':_0x2c947d(0x7d)},_0xc5b2e5=this['db'][_0x2c947d(0xc9)](_0x47342c['YuWvg']);return new Promise((_0x3b66b2,_0x5149d6)=>{const _0x489c3f=_0x2c947d,_0x294cab={'AHMwC':function(_0x752f7,_0x465461,_0x2fa57a){const _0x41625d=_0x2ee3;return _0x47342c[_0x41625d(0xa8)](_0x752f7,_0x465461,_0x2fa57a);},'LJZvM':function(_0x7dca43,_0x2e5340){const _0x4ea71b=_0x2ee3;return _0x47342c[_0x4ea71b(0xec)](_0x7dca43,_0x2e5340);},'MPSlQ':function(_0x4977c5,_0x5541d7){const _0x2e4d0e=_0x2ee3;return _0x47342c[_0x2e4d0e(0x9f)](_0x4977c5,_0x5541d7);}};_0xc5b2e5[_0x489c3f(0xa3)](_0x5880a2[_0x489c3f(0xaf)],_0x5880a2[_0x489c3f(0xce)],_0x5880a2[_0x489c3f(0xd6)],_0x5880a2[_0x489c3f(0xd2)],_0x5880a2['uuid'],_0x5880a2[_0x489c3f(0x7c)],JSON[_0x489c3f(0xeb)](_0x5880a2[_0x489c3f(0xca)]),_0x5880a2['elementId'],_0x5880a2[_0x489c3f(0x9c)],function(_0x45aaef){const _0x87d43b=_0x489c3f;_0x45aaef&&(_0x294cab['AHMwC'](logError,_0x87d43b(0x84),_0x45aaef),_0x294cab[_0x87d43b(0xb7)](_0x5149d6,_0x45aaef)),_0x294cab[_0x87d43b(0xff)](_0x3b66b2,null);});});}async['getFileCache'](_0x5e5ed7,_0x5e1b93){const _0x2864e0={'ENjZp':'db\x20could\x20not\x20get\x20file\x20cache','oRxvG':function(_0x21ba51,_0x892687){return _0x21ba51(_0x892687);}},_0x16f5e1=this['db']['prepare'](_0x5e5ed7);return new Promise((_0x932927,_0x7c34b7)=>{const _0x4641d1=_0x2ee3;_0x16f5e1[_0x4641d1(0x93)](..._0x5e1b93,(_0x545537,_0x2f4bae)=>{const _0x4559d4=_0x4641d1;_0x545537&&(logError(_0x2864e0[_0x4559d4(0x7e)],_0x545537),_0x2864e0[_0x4559d4(0xc6)](_0x7c34b7,_0x545537)),_0x2f4bae&&(_0x2f4bae[_0x4559d4(0xca)]=JSON['parse'](_0x2f4bae['element'])),_0x932927(_0x2f4bae);});});}async[_0x400dfd(0xa5)](_0x322359){const _0x1e8d74=_0x400dfd,_0xb03ad3={'qUxrk':_0x1e8d74(0xa7)};return this[_0x1e8d74(0x85)](_0xb03ad3[_0x1e8d74(0x100)],[_0x322359]);}async['getFileCacheByUuid'](_0x1006f3){const _0x12e340=_0x400dfd;return this[_0x12e340(0x85)](_0x12e340(0xe9),[_0x1006f3]);}async['updateFileCache'](_0x40eb8c){const _0x57e813=_0x400dfd,_0xfb0ee1={'IgJEv':function(_0x454bf3,_0x271eb7,_0x3ab284){return _0x454bf3(_0x271eb7,_0x3ab284);},'eTLIf':_0x57e813(0xf1)},_0x37e3eb=this['db'][_0x57e813(0xc9)](_0xfb0ee1['eTLIf']);return new Promise((_0x2a90a5,_0x19beb1)=>{const _0x25e31a=_0x57e813,_0x101f3c={'KRwDi':function(_0xe10d54,_0x27aee7,_0x596317){return _0xfb0ee1['IgJEv'](_0xe10d54,_0x27aee7,_0x596317);},'iCuBI':_0x25e31a(0x88)};_0x37e3eb['run'](_0x40eb8c['path'],_0x40eb8c['url'],_0x40eb8c[_0x25e31a(0xfc)],function(_0x5a44d9){_0x5a44d9&&(_0x101f3c['KRwDi'](logError,_0x101f3c['iCuBI'],_0x5a44d9),_0x19beb1(_0x5a44d9)),_0x2a90a5(null);});});}async['getReceivedTempUinMap'](){const _0x218e3a=_0x400dfd,_0x29fd40={'sltzM':function(_0x4bc89f,_0xe6669d,_0x4a4a71){return _0x4bc89f(_0xe6669d,_0x4a4a71);},'DgRgB':function(_0x2d1397,_0x1784eb){return _0x2d1397(_0x1784eb);},'xKKsR':_0x218e3a(0x91)},_0x3b5f4c=_0x29fd40[_0x218e3a(0xe7)];return new Promise((_0x8ec630,_0x28921b)=>{const _0x1b654c=_0x218e3a;this['db'][_0x1b654c(0xb5)](_0x3b5f4c,(_0x1a6477,_0x4c8cdf)=>{const _0x567982=_0x1b654c;_0x1a6477&&(_0x29fd40[_0x567982(0xb3)](logError,_0x567982(0xa0),_0x1a6477),_0x29fd40[_0x567982(0x94)](_0x28921b,_0x1a6477));const _0x9a2613={};_0x4c8cdf[_0x567982(0x87)](_0x4deabc=>{const _0x4d9fbd=_0x567982;_0x9a2613[_0x4deabc['uin']]=_0x4deabc[_0x4d9fbd(0xd5)];}),_0x8ec630(_0x9a2613);});});}async[_0x400dfd(0x8c)](_0x14c897){const _0xfa760c=_0x400dfd,_0x48af3a={'deOGO':function(_0x278c2b,_0x1002af,_0xf6fd98){return _0x278c2b(_0x1002af,_0xf6fd98);},'hiDtt':function(_0x501db1,_0x30ec24){return _0x501db1(_0x30ec24);},'ZgTpw':_0xfa760c(0xcb)},_0x425b98=_0x48af3a[_0xfa760c(0x103)];return new Promise((_0x29e4d9,_0x33705d)=>{const _0x44697f=_0xfa760c,_0x4ca303={'GkkXR':function(_0x4ef24c,_0x185c20,_0x57cb63){const _0x5de776=_0x2ee3;return _0x48af3a[_0x5de776(0xc5)](_0x4ef24c,_0x185c20,_0x57cb63);},'ygHBD':_0x44697f(0xa0),'XWFNK':function(_0x5d524a,_0xd37af0){return _0x48af3a['hiDtt'](_0x5d524a,_0xd37af0);},'HxVSB':function(_0xd0affb,_0x3916aa){return _0xd0affb(_0x3916aa);}};this['db'][_0x44697f(0x93)](_0x425b98,[_0x14c897],(_0x47267d,_0x45356a)=>{const _0x5f3d6f=_0x44697f;_0x47267d&&(_0x4ca303[_0x5f3d6f(0xe4)](logError,_0x4ca303[_0x5f3d6f(0x9e)],_0x47267d),_0x4ca303[_0x5f3d6f(0xfe)](_0x33705d,_0x47267d)),_0x4ca303['HxVSB'](_0x29e4d9,_0x45356a?.['uid']);});});}async[_0x400dfd(0xa6)](_0x4abae2,_0x46134b){const _0x5c674b=_0x400dfd,_0x5383a9={'PNexS':_0x5c674b(0xc4),'SkiLa':function(_0x33e7a0,_0x38f61e){return _0x33e7a0(_0x38f61e);}},_0x50bdf5=await this[_0x5c674b(0x8c)](_0x4abae2);if(!_0x50bdf5){const _0x251c74=this['db']['prepare']('INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)');return new Promise((_0x5c88c7,_0x571c47)=>{const _0x1fc7e9=_0x5c674b;_0x251c74[_0x1fc7e9(0xa3)](_0x4abae2,_0x46134b,function(_0x38d2aa){const _0x439704=_0x1fc7e9;_0x38d2aa&&(logError(_0x5383a9[_0x439704(0xea)],_0x38d2aa),_0x5383a9[_0x439704(0x95)](_0x571c47,_0x38d2aa)),_0x5383a9[_0x439704(0x95)](_0x5c88c7,null);});});}}}function _0x2ee3(_0x1976ea,_0xc0c479){const _0x260641=_0x2606();return _0x2ee3=function(_0x2ee363,_0xe184fd){_0x2ee363=_0x2ee363-0x77;let _0x3cbbfe=_0x260641[_0x2ee363];return _0x3cbbfe;},_0x2ee3(_0x1976ea,_0xc0c479);}export const dbUtil=new DBUtil();