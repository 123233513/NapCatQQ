const _0x4dff26=_0x1e4d;function _0x1e4d(_0x290d83,_0x1b0505){const _0x368c61=_0x368c();return _0x1e4d=function(_0x1e4dff,_0x1e29be){_0x1e4dff=_0x1e4dff-0x19c;let _0x43a268=_0x368c61[_0x1e4dff];return _0x43a268;},_0x1e4d(_0x290d83,_0x1b0505);}function _0x368c(){const _0x38f04e=['getFileCacheByUuid','Could\x20not\x20connect\x20to\x20database','AUCOt','catch','CjLCv','ADhme','3RtGcAq','elementType','uuid','BxTNi','Database','db\x20could\x20not\x20get\x20file\x20cache','SUNPy','UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?','35slixLd','797762hepVCx','OVnUO','tvHSE','WNaQL','getMsgsByMsgId','ydCvJ','LfBiT','cbEms','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','8OmURqn','wjzvm','forEach','LvQtf','22152lVWsOK','33686KGOyLY','NvSJo','getFileCacheByName','vqkvc','adjIn','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','nYdjq','getUidByTempUin','stMnQ','2493SFmhFm','init','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','get','msgSeq','bvNZB','shortId','EiQpP','kVAOG','UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?','db\x20could\x20not\x20update\x20file\x20cache','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','prepare','KMoeU','Could\x20not\x20create\x20table\x20files','msgTime','HvxHO','HVfGS','hgCRq','BbaBV','db\x20getMsgByLongId\x20error','jHjye','dEjAa','dMADG','path','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','msgList','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','pNfzo','kYXXT','hRkMv','maxId','msgId','wsIkP','1790658gMphNM','清理消息缓存','getMsgByLongId','createTable','set','YPOIL','getReceivedTempUinMap','globalMsgShortId','SELECT\x20*\x20FROM\x20temp_uins','errno','NEqRW','WzcoD',',\x20短id:\x20','element','getCurrentMaxShortId','KkuUo','longId','tgleO','yqPNN','name','INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)','size','QiaOA','KQIQP','xeBvy',',\x20seq:\x20','parse','getMsgByShortId','db\x20could\x20not\x20get\x20temp\x20uin\x20map','mWLOA','run','1165969tVdBkK','Could\x20not\x20get\x20msg','all','YgjOA','updateMsg','getFileCache','OPEN_CREATE','assign','SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?','peerUid','db\x20could\x20not\x20add\x20file','数据库中消息最大短id','then','eQNgw','elementId','chatType','getMsgBySeq','yprSz','PTyIk','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','getMsg','stringify','now','104660jeUHjA','tfYWh','nFZmW','627iuoHCx','stack','url','OKeON','Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','has','msgCache','deEIT','close','INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','ZAHLd','TqOBU','10180dnUVSA'];_0x368c=function(){return _0x38f04e;};return _0x368c();}(function(_0x1856c9,_0x27b570){const _0x787914=_0x1e4d,_0x1370e5=_0x1856c9();while(!![]){try{const _0xd857a6=-parseInt(_0x787914(0x1a7))/0x1+-parseInt(_0x787914(0x228))/0x2*(-parseInt(_0x787914(0x21f))/0x3)+-parseInt(_0x787914(0x209))/0x4*(parseInt(_0x787914(0x227))/0x5)+parseInt(_0x787914(0x1d3))/0x6+parseInt(_0x787914(0x1f2))/0x7*(parseInt(_0x787914(0x1a2))/0x8)+-parseInt(_0x787914(0x1b0))/0x9*(parseInt(_0x787914(0x218))/0xa)+-parseInt(_0x787914(0x20c))/0xb*(parseInt(_0x787914(0x1a6))/0xc);if(_0xd857a6===_0x27b570)break;else _0x1370e5['push'](_0x1370e5['shift']());}catch(_0x45336e){_0x1370e5['push'](_0x1370e5['shift']());}}}(_0x368c,0x3f702));import _0x23abcb from'sqlite3';import{logDebug,logError}from'@/common/utils/log';import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async[_0x4dff26(0x1b1)](_0x214a66){const _0x5150d8={'LvQtf':function(_0x36aaf3,_0x3d127e){return _0x36aaf3(_0x3d127e);},'PTyIk':function(_0x12fcd7){return _0x12fcd7();},'yprSz':function(_0x363caf,_0x506d84){return _0x363caf|_0x506d84;}};if(this['db'])return;return new Promise((_0x5d6ba4,_0x1d35a8)=>{const _0x24cf89=_0x1e4d,_0x57a73a={'NEqRW':_0x24cf89(0x21a),'nYdjq':function(_0x487ec0,_0x4692f8){const _0x3d8d44=_0x24cf89;return _0x5150d8[_0x3d8d44(0x1a5)](_0x487ec0,_0x4692f8);},'keyKx':function(_0xda210f){const _0x492390=_0x24cf89;return _0x5150d8[_0x492390(0x204)](_0xda210f);}};this['db']=new _0x23abcb[(_0x24cf89(0x223))](_0x214a66,_0x5150d8[_0x24cf89(0x203)](_0x23abcb['OPEN_READWRITE'],_0x23abcb[_0x24cf89(0x1f8)]),_0x545e33=>{const _0x3e1be3=_0x24cf89;if(_0x545e33){logError(_0x57a73a[_0x3e1be3(0x1dd)],_0x545e33),_0x57a73a[_0x3e1be3(0x1ad)](_0x1d35a8,_0x545e33);return;}this[_0x3e1be3(0x1d6)](),_0x57a73a['keyKx'](_0x5d6ba4);});});}['createTable'](){const _0x2ad742=_0x4dff26,_0x4d99be={'wjzvm':'Method\x20not\x20implemented.'};throw new Error(_0x4d99be[_0x2ad742(0x1a3)]);}[_0x4dff26(0x214)](){const _0x4dbc61=_0x4dff26;this['db']?.[_0x4dbc61(0x214)]();}}class DBUtil extends DBUtilBase{[_0x4dff26(0x212)]=new Map();['globalMsgShortId']=-0x7ffffff8;constructor(){const _0xd0e084=_0x4dff26,_0x4d8a18={'OVnUO':function(_0x448e4a,_0x35aa54){return _0x448e4a>_0x35aa54;},'ucmXy':function(_0x1629cc,_0x1ec1c1){return _0x1629cc-_0x1ec1c1;},'oJsEw':function(_0x12af1e,_0x15c27e){return _0x12af1e*_0x15c27e;},'hRkMv':function(_0x3ddc4e,_0xc25268){return _0x3ddc4e*_0xc25268;}};super();const _0x395cfb=_0x4d8a18[_0xd0e084(0x1cf)](0x3e8,0x3c)*0xa;setInterval(()=>{const _0x56c640=_0xd0e084,_0x3fd193={'VhIdM':function(_0x4e71a2,_0x5ac688){const _0x19a298=_0x1e4d;return _0x4d8a18[_0x19a298(0x229)](_0x4e71a2,_0x5ac688);},'adjIn':function(_0x35c25c,_0x31f244){return _0x4d8a18['ucmXy'](_0x35c25c,_0x31f244);},'ydCvJ':function(_0x4b8f30,_0x4bce40){return _0x4d8a18['oJsEw'](_0x4b8f30,_0x4bce40);}};logDebug(_0x56c640(0x1d4)),this[_0x56c640(0x212)][_0x56c640(0x1a4)]((_0x111ceb,_0x25fc68)=>{const _0x4dd70f=_0x56c640;_0x3fd193['VhIdM'](_0x3fd193[_0x4dd70f(0x1ab)](Date[_0x4dd70f(0x208)](),_0x3fd193[_0x4dd70f(0x19e)](parseInt(_0x111ceb[_0x4dd70f(0x1bf)]),0x3e8)),_0x395cfb)&&this[_0x4dd70f(0x212)]['delete'](_0x25fc68);});},_0x395cfb);}async[_0x4dff26(0x1b1)](_0x55fed0){const _0x30a240=_0x4dff26;await super[_0x30a240(0x1b1)](_0x55fed0),this[_0x30a240(0x1da)]=await this[_0x30a240(0x1e1)]();}['createTable'](){const _0x22ce96=_0x4dff26,_0x1969b4={'tfYWh':function(_0x1ee538,_0x1703f3,_0x40ae09){return _0x1ee538(_0x1703f3,_0x40ae09);},'ZAHLd':'Could\x20not\x20create\x20table\x20msgs','wsIkP':function(_0x10fd90,_0x599c25,_0x568af5){return _0x10fd90(_0x599c25,_0x568af5);},'fzioK':_0x22ce96(0x1be)},_0x2710a1=_0x22ce96(0x1c9);this['db'][_0x22ce96(0x1f1)](_0x2710a1,function(_0x29b21c){const _0x421910=_0x22ce96;_0x29b21c&&_0x1969b4[_0x421910(0x20a)](logError,_0x1969b4[_0x421910(0x216)],_0x29b21c[_0x421910(0x20d)]);});const _0x522080=_0x22ce96(0x1cc);this['db']['run'](_0x522080,function(_0x1b1e5b){const _0x471f03=_0x22ce96;_0x1b1e5b&&_0x1969b4[_0x471f03(0x1d2)](logError,_0x1969b4['fzioK'],_0x1b1e5b);});const _0xed66d7='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)';this['db']['run'](_0xed66d7,function(_0x41d646){const _0x1fbfab=_0x22ce96;_0x41d646&&_0x1969b4[_0x1fbfab(0x20a)](logError,'Could\x20not\x20create\x20table\x20temp_uins',_0x41d646);});}async['getCurrentMaxShortId'](){const _0x1a7feb=_0x4dff26,_0x66c40e={'tvHSE':function(_0x290680,_0x96902d,_0x15f4d8){return _0x290680(_0x96902d,_0x15f4d8);},'CjLCv':_0x1a7feb(0x210),'yqPNN':function(_0x47228e,_0x19b7f1){return _0x47228e(_0x19b7f1);}};return new Promise((_0x2324b4,_0x358bae)=>{const _0x304df8=_0x1a7feb,_0x37aa7b={'cXvMB':function(_0x5e5583,_0x2d48ea,_0x5bc6fc){const _0x1ee3fc=_0x1e4d;return _0x66c40e[_0x1ee3fc(0x22a)](_0x5e5583,_0x2d48ea,_0x5bc6fc);},'BxTNi':_0x66c40e[_0x304df8(0x21d)],'kVAOG':function(_0x1cf89b,_0x54d053){const _0x534216=_0x304df8;return _0x66c40e[_0x534216(0x1e5)](_0x1cf89b,_0x54d053);},'vqkvc':function(_0x26290a,_0x5ebc0f){const _0x4f8472=_0x304df8;return _0x66c40e[_0x4f8472(0x1e5)](_0x26290a,_0x5ebc0f);}};this['db'][_0x304df8(0x1b3)](_0x304df8(0x1cb),(_0x5127e7,_0x20d8bc)=>{const _0x574534=_0x304df8;if(_0x5127e7)return _0x37aa7b['cXvMB'](logDebug,_0x37aa7b[_0x574534(0x222)],_0x5127e7),_0x37aa7b[_0x574534(0x1b8)](_0x2324b4,-0x7ffffff8);logDebug(_0x574534(0x1fd),_0x20d8bc?.[_0x574534(0x1d0)]),_0x37aa7b[_0x574534(0x1aa)](_0x2324b4,_0x20d8bc?.[_0x574534(0x1d0)]??-0x7ffffff8);});});}async[_0x4dff26(0x206)](_0xff55c9,_0x1fc16e){const _0x5c7c87={'EiQpP':function(_0x15ea4f,_0x2a3900){return _0x15ea4f(_0x2a3900);},'jHjye':function(_0x5c5098,_0xe2fd08){return _0x5c5098(_0xe2fd08);},'lxfzp':function(_0x174413,_0x4155b4,_0x5b0867,_0x5b5952,_0x581e64){return _0x174413(_0x4155b4,_0x5b0867,_0x5b5952,_0x581e64);},'WNaQL':function(_0x2cc921,_0x27000d){return _0x2cc921(_0x27000d);}},_0x4cbc8c=this['db']['prepare'](_0xff55c9);return new Promise((_0x318d74,_0x3cb8df)=>{const _0x234bf8=_0x1e4d;_0x4cbc8c[_0x234bf8(0x1b3)](..._0x1fc16e,(_0x10f4c5,_0x331ad)=>{const _0x575dc5=_0x234bf8,_0x23a84d={'brNkT':function(_0x3569fd,_0x99532b){const _0x2b3e00=_0x1e4d;return _0x5c7c87[_0x2b3e00(0x1b7)](_0x3569fd,_0x99532b);},'ADhme':function(_0x330e75,_0x1733f5){return _0x330e75(_0x1733f5);},'stMnQ':function(_0x1b643b,_0x5aeead){const _0x2df420=_0x1e4d;return _0x5c7c87[_0x2df420(0x1c5)](_0x1b643b,_0x5aeead);}};if(_0x10f4c5)return _0x5c7c87['lxfzp'](logError,_0x575dc5(0x1f3),_0x10f4c5,_0xff55c9,_0x1fc16e),_0x318d74(null);if(!_0x331ad){_0x5c7c87[_0x575dc5(0x19c)](_0x318d74,null);return;}const _0x1f2756=_0x331ad[_0x575dc5(0x1e3)];NTQQMsgApi[_0x575dc5(0x19d)]({'peerUid':_0x331ad[_0x575dc5(0x1fb)],'chatType':_0x331ad[_0x575dc5(0x201)]},[_0x1f2756])[_0x575dc5(0x1fe)](_0x125551=>{const _0x1c929d=_0x575dc5,_0x5c149b=_0x125551[_0x1c929d(0x1ca)][0x0];if(!_0x5c149b){_0x23a84d['brNkT'](_0x318d74,null);return;}_0x5c149b['id']=_0x331ad[_0x1c929d(0x1b6)],_0x23a84d[_0x1c929d(0x21e)](_0x318d74,_0x5c149b);})[_0x575dc5(0x21c)](_0x4c6553=>{const _0x378b9a=_0x575dc5;_0x23a84d[_0x378b9a(0x1af)](_0x318d74,null);});});});}async[_0x4dff26(0x1ee)](_0xe7c8f){const _0x5ae023=_0x4dff26,_0x50b5a2={'WzcoD':_0x5ae023(0x205)};if(this[_0x5ae023(0x212)][_0x5ae023(0x211)](_0xe7c8f))return this[_0x5ae023(0x212)]['get'](_0xe7c8f);const _0x210156=_0x50b5a2[_0x5ae023(0x1de)];return this[_0x5ae023(0x206)](_0x210156,[_0xe7c8f]);}async[_0x4dff26(0x1d5)](_0x450921){const _0x28aef8=_0x4dff26;if(this[_0x28aef8(0x212)][_0x28aef8(0x211)](_0x450921))return this[_0x28aef8(0x212)]['get'](_0x450921);return this[_0x28aef8(0x206)]('SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?',[_0x450921]);}async[_0x4dff26(0x202)](_0x52223b,_0xdd10d9){const _0xbb5aba=_0x4dff26,_0x54728c='SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?';return this[_0xbb5aba(0x206)](_0x54728c,[_0x52223b,_0xdd10d9]);}async['addMsg'](_0x364771,_0x538846=!![]){const _0x158b25=_0x4dff26,_0x2bfa98={'bvNZB':function(_0x4e3ed5,_0x257e92,_0xd9709a){return _0x4e3ed5(_0x257e92,_0xd9709a);},'AuCRp':_0x158b25(0x1a1),'NvSJo':function(_0x5a2deb,_0x22dd8b){return _0x5a2deb===_0x22dd8b;},'lnUts':'db\x20could\x20not\x20add\x20msg','pNfzo':_0x158b25(0x215),'KkuUo':function(_0x424f58,_0x40c923){return _0x424f58(_0x40c923);}},_0x4dca85=await this[_0x158b25(0x1d5)](_0x364771[_0x158b25(0x1d1)]);if(_0x4dca85){if(_0x538846)this[_0x158b25(0x1f6)](_0x364771)['then']();return _0x4dca85['id'];}const _0x2cadc5=this['db'][_0x158b25(0x1bc)](_0x2bfa98[_0x158b25(0x1cd)]),_0x4763e8=++this[_0x158b25(0x1da)];return _0x364771['id']=_0x4763e8,_0x2bfa98[_0x158b25(0x1e2)](logDebug,'记录消息到数据库,\x20消息长id:\x20'+_0x364771['msgId']+_0x158b25(0x1df)+_0x364771['id']),this[_0x158b25(0x212)]['set'](_0x4763e8,_0x364771),this[_0x158b25(0x212)][_0x158b25(0x1d7)](_0x364771[_0x158b25(0x1d1)],_0x364771),_0x2cadc5[_0x158b25(0x1f1)](this['globalMsgShortId'],_0x364771[_0x158b25(0x1d1)],_0x364771['msgSeq']['toString'](),_0x364771['peerUid'],_0x364771[_0x158b25(0x201)],_0x751e64=>{const _0xf1dae2=_0x158b25;_0x751e64&&(_0x2bfa98[_0xf1dae2(0x1a8)](_0x751e64[_0xf1dae2(0x1dc)],0x13)?this[_0xf1dae2(0x1d5)](_0x364771['msgId'])[_0xf1dae2(0x1fe)](_0x4c81e3=>{const _0x30c4e3=_0xf1dae2;_0x4c81e3?(this['msgCache'][_0x30c4e3(0x1d7)](_0x4763e8,_0x4c81e3),this[_0x30c4e3(0x212)][_0x30c4e3(0x1d7)](_0x4c81e3[_0x30c4e3(0x1d1)],_0x4c81e3)):_0x2bfa98[_0x30c4e3(0x1b5)](logError,_0x2bfa98['AuCRp'],_0x751e64);})[_0xf1dae2(0x21c)](_0x3723fa=>logError(_0xf1dae2(0x1c4),_0x3723fa)):_0x2bfa98[_0xf1dae2(0x1b5)](logError,_0x2bfa98['lnUts'],_0x751e64));}),_0x4763e8;}async[_0x4dff26(0x1f6)](_0x5b83e6){const _0x21dc85=_0x4dff26,_0x48b8b6={'iAWCM':function(_0x3fdc6f,_0x2fd49e,_0x1987e0){return _0x3fdc6f(_0x2fd49e,_0x1987e0);},'xeBvy':_0x21dc85(0x1b9)},_0x2b3b86=this['msgCache']['get'](_0x5b83e6[_0x21dc85(0x1d1)]);_0x2b3b86&&Object[_0x21dc85(0x1f9)](_0x2b3b86,_0x5b83e6);logDebug('更新消息,\x20shortId:'+_0x5b83e6['id']+_0x21dc85(0x1ec)+_0x5b83e6[_0x21dc85(0x1b4)]+',\x20msgId:\x20'+_0x5b83e6[_0x21dc85(0x1d1)]);const _0x5dbfaa=this['db'][_0x21dc85(0x1bc)](_0x48b8b6[_0x21dc85(0x1eb)]);_0x5dbfaa[_0x21dc85(0x1f1)](_0x5b83e6[_0x21dc85(0x1b4)],_0x5b83e6[_0x21dc85(0x1d1)],_0x51a73d=>{_0x51a73d&&_0x48b8b6['iAWCM'](logError,'updateMsg\x20db\x20error',_0x51a73d);});}async['addFileCache'](_0x49101d){const _0x31e245=_0x4dff26,_0x5e929c={'mWLOA':function(_0x2c54d7,_0x177305){return _0x2c54d7(_0x177305);}},_0x319ca1=this['db']['prepare'](_0x31e245(0x1bb));return new Promise((_0x3d5770,_0x444eaa)=>{const _0x596338=_0x31e245,_0x451c7c={'vTRkw':_0x596338(0x1fc),'cbEms':function(_0x321633,_0x27bd32){const _0xb6b1c=_0x596338;return _0x5e929c[_0xb6b1c(0x1f0)](_0x321633,_0x27bd32);}};_0x319ca1['run'](_0x49101d[_0x596338(0x1e6)],_0x49101d['path'],_0x49101d['url'],_0x49101d[_0x596338(0x1e8)],_0x49101d[_0x596338(0x221)],_0x49101d[_0x596338(0x220)],JSON[_0x596338(0x207)](_0x49101d[_0x596338(0x1e0)]),_0x49101d[_0x596338(0x200)],_0x49101d['msgId'],function(_0x4b8647){const _0x5b4f74=_0x596338;_0x4b8647&&(logError(_0x451c7c['vTRkw'],_0x4b8647),_0x444eaa(_0x4b8647)),_0x451c7c[_0x5b4f74(0x1a0)](_0x3d5770,null);});});}async[_0x4dff26(0x1f7)](_0x546055,_0x49c1f6){const _0x4fa33c=_0x4dff26,_0x194631={'BbaBV':_0x4fa33c(0x224)},_0x3c35c0=this['db']['prepare'](_0x546055);return new Promise((_0x30d92f,_0x4463b8)=>{const _0x4a9dc8=_0x4fa33c,_0x50033a={'OKeON':_0x194631[_0x4a9dc8(0x1c3)],'YYHHD':function(_0x34f4da,_0x1abb39){return _0x34f4da(_0x1abb39);}};_0x3c35c0[_0x4a9dc8(0x1b3)](..._0x49c1f6,(_0x3f3ea5,_0x6bebc5)=>{const _0x5d9947=_0x4a9dc8;_0x3f3ea5&&(logError(_0x50033a[_0x5d9947(0x20f)],_0x3f3ea5),_0x4463b8(_0x3f3ea5)),_0x6bebc5&&(_0x6bebc5[_0x5d9947(0x1e0)]=JSON[_0x5d9947(0x1ed)](_0x6bebc5[_0x5d9947(0x1e0)])),_0x50033a['YYHHD'](_0x30d92f,_0x6bebc5);});});}async[_0x4dff26(0x1a9)](_0x1336b9){const _0x4b3f75=_0x4dff26;return this[_0x4b3f75(0x1f7)](_0x4b3f75(0x1ac),[_0x1336b9]);}async[_0x4dff26(0x219)](_0x46e9c8){const _0x158c77=_0x4dff26,_0x34e5de={'vykZg':_0x158c77(0x1fa)};return this['getFileCache'](_0x34e5de['vykZg'],[_0x46e9c8]);}async['updateFileCache'](_0x16789b){const _0x1fdb37=_0x4dff26,_0x1405bc={'dMADG':function(_0x5ca78d,_0x5b353b,_0x28044d){return _0x5ca78d(_0x5b353b,_0x28044d);},'HVfGS':_0x1fdb37(0x1ba),'YgjOA':function(_0x2aa457,_0x4e0a66){return _0x2aa457(_0x4e0a66);},'nFZmW':_0x1fdb37(0x226)},_0x5da5f8=this['db']['prepare'](_0x1405bc[_0x1fdb37(0x20b)]);return new Promise((_0xea572f,_0x214f8d)=>{const _0x94df37=_0x1fdb37,_0x517e15={'tgleO':function(_0x5ef1d9,_0x2d0c71,_0x48b805){const _0x2c3042=_0x1e4d;return _0x1405bc[_0x2c3042(0x1c7)](_0x5ef1d9,_0x2d0c71,_0x48b805);},'HvxHO':_0x1405bc[_0x94df37(0x1c1)],'SUNPy':function(_0x5c0b42,_0x15cd7e){const _0x276463=_0x94df37;return _0x1405bc[_0x276463(0x1f5)](_0x5c0b42,_0x15cd7e);}};_0x5da5f8[_0x94df37(0x1f1)](_0x16789b[_0x94df37(0x1c8)],_0x16789b[_0x94df37(0x20e)],_0x16789b['uuid'],function(_0x19f366){const _0x5a48de=_0x94df37;_0x19f366&&(_0x517e15[_0x5a48de(0x1e4)](logError,_0x517e15[_0x5a48de(0x1c0)],_0x19f366),_0x214f8d(_0x19f366)),_0x517e15[_0x5a48de(0x225)](_0xea572f,null);});});}async[_0x4dff26(0x1d9)](){const _0xbc12ed=_0x4dff26,_0x4993a6={'mpZWH':function(_0x3abd69,_0x51e027){return _0x3abd69(_0x51e027);},'eQNgw':_0xbc12ed(0x1db)},_0x5807eb=_0x4993a6[_0xbc12ed(0x1ff)];return new Promise((_0x837203,_0x315803)=>{const _0x4b6054=_0xbc12ed,_0x417c11={'kYXXT':_0x4b6054(0x1ef),'QiaOA':function(_0x244795,_0x444cda){return _0x4993a6['mpZWH'](_0x244795,_0x444cda);}};this['db'][_0x4b6054(0x1f4)](_0x5807eb,(_0x4e9110,_0x15eb91)=>{const _0x5d343e=_0x4b6054;_0x4e9110&&(logError(_0x417c11[_0x5d343e(0x1ce)],_0x4e9110),_0x417c11[_0x5d343e(0x1e9)](_0x315803,_0x4e9110));const _0x32d2f1={};_0x15eb91['forEach'](_0x5cdbea=>{_0x32d2f1[_0x5cdbea['uin']]=_0x5cdbea['uid'];}),_0x417c11[_0x5d343e(0x1e9)](_0x837203,_0x32d2f1);});});}async[_0x4dff26(0x1ae)](_0x504a95){const _0x2bd784=_0x4dff26,_0x1ea741={'KMoeU':function(_0x1553f6,_0x2f1694,_0x2d44f5){return _0x1553f6(_0x2f1694,_0x2d44f5);},'hgCRq':function(_0x1d0ab9,_0x5b4e5a){return _0x1d0ab9(_0x5b4e5a);},'zLAEi':_0x2bd784(0x1b2)},_0x3535aa=_0x1ea741['zLAEi'];return new Promise((_0x446d6e,_0x3990f6)=>{const _0x41fc51={'LfBiT':function(_0x3461c1,_0x2a551e,_0x306bea){const _0x5bf16e=_0x1e4d;return _0x1ea741[_0x5bf16e(0x1bd)](_0x3461c1,_0x2a551e,_0x306bea);},'TqOBU':function(_0x368af0,_0x1847de){const _0xbee734=_0x1e4d;return _0x1ea741[_0xbee734(0x1c2)](_0x368af0,_0x1847de);}};this['db']['get'](_0x3535aa,[_0x504a95],(_0x4a9f4b,_0x178faf)=>{const _0x41c1ca=_0x1e4d;_0x4a9f4b&&(_0x41fc51[_0x41c1ca(0x19f)](logError,'db\x20could\x20not\x20get\x20temp\x20uin\x20map',_0x4a9f4b),_0x41fc51['TqOBU'](_0x3990f6,_0x4a9f4b)),_0x41fc51[_0x41c1ca(0x217)](_0x446d6e,_0x178faf?.['uid']);});});}async['addTempUin'](_0x29ae61,_0x343988){const _0x50c960=_0x4dff26,_0x623cd4={'YPOIL':function(_0x5b8a55,_0x51fd33,_0x13d08e){return _0x5b8a55(_0x51fd33,_0x13d08e);},'dEjAa':'db\x20could\x20not\x20add\x20temp\x20uin','KQIQP':_0x50c960(0x1e7)},_0x254e05=await this[_0x50c960(0x1ae)](_0x29ae61);if(!_0x254e05){const _0x1c180e=this['db'][_0x50c960(0x1bc)](_0x623cd4[_0x50c960(0x1ea)]);return new Promise((_0x313a59,_0x20ee71)=>{const _0x5e9272=_0x50c960,_0x43ed5d={'deEIT':function(_0xf49af3,_0x1ec076,_0x4ffbb0){const _0x64a177=_0x1e4d;return _0x623cd4[_0x64a177(0x1d8)](_0xf49af3,_0x1ec076,_0x4ffbb0);},'AUCOt':_0x623cd4[_0x5e9272(0x1c6)]};_0x1c180e['run'](_0x29ae61,_0x343988,function(_0x303c71){const _0x2b899e=_0x5e9272;_0x303c71&&(_0x43ed5d[_0x2b899e(0x213)](logError,_0x43ed5d[_0x2b899e(0x21b)],_0x303c71),_0x20ee71(_0x303c71)),_0x313a59(null);});});}}}export const dbUtil=new DBUtil();