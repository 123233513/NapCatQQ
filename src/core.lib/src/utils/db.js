const _0x149326=_0x34b4;(function(_0x214faa,_0x1a7cd4){const _0x5043be=_0x34b4,_0x132878=_0x214faa();while(!![]){try{const _0x1a3dfc=parseInt(_0x5043be(0x214))/0x1+-parseInt(_0x5043be(0x20c))/0x2*(-parseInt(_0x5043be(0x1f3))/0x3)+-parseInt(_0x5043be(0x203))/0x4+parseInt(_0x5043be(0x1ec))/0x5+-parseInt(_0x5043be(0x211))/0x6+parseInt(_0x5043be(0x212))/0x7*(parseInt(_0x5043be(0x236))/0x8)+-parseInt(_0x5043be(0x1e6))/0x9*(-parseInt(_0x5043be(0x226))/0xa);if(_0x1a3dfc===_0x1a7cd4)break;else _0x132878['push'](_0x132878['shift']());}catch(_0x43e083){_0x132878['push'](_0x132878['shift']());}}}(_0x5e81,0x3cd59));import _0x13cfdd from'sqlite3';function _0x5e81(){const _0x580dfd=['lSfhx','getFileCacheByUuid','element','dbdau','清理消息缓存','addTempUin','rczVZ','jZQKV','size','uUJvj','ixRxJ','Could\x20not\x20create\x20table\x20temp_uins','luiJp','parse',',\x20seq:\x20','isHME','zATeZ','Method\x20not\x20implemented.','uid','ejdHJ','UIYAp','JYgBu','assign','getUidByTempUin','Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','9hslqxr','wDXdP','db\x20getMsgByLongId\x20error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','raVeM','SELECT\x20*\x20FROM\x20temp_uins','287960XmCvYk','name','byHho','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','peerUid','msgCache','OAjZX','3wkPBpn','msgList','getFileCache','longId','msgId','createTable','AqhNn','getMsgsByMsgId','QyBZs','getMsg','NlHjN','getMsgBySeq','run','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','OPEN_CREATE','db\x20could\x20not\x20get\x20temp\x20uin\x20map','1893260fDjHtU','qyxoo','set','init','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?','catch','getMsgByShortId','BOioG','XYViD','603510JdsyeA','stack','db\x20could\x20not\x20add\x20msg','forEach','oaEbX','1573068ysFOFf','7IpqvqQ','wsNDD','83611BNfmHP','NSgog','vFdKL','wtyTy','OPEN_READWRITE','stringify','bkjZy','ozlUE','prepare','db\x20could\x20not\x20add\x20file','addFileCache','errno',',\x20短id:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','mLxxb','Could\x20not\x20get\x20msg','mdUgs','ccmqs','3855970SjZVqw','getMsgByLongId','gNkRy','then','msgSeq','elementType','数据库中消息最大短id','close','UlEDg','UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?','UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?','记录消息到数据库,\x20消息长id:\x20','db\x20could\x20not\x20add\x20temp\x20uin','updateMsg\x20db\x20error','shortId','duvYo','1248920SeXkZx','UYAFT','SAuWg','delete','globalMsgShortId','zcZfx',',\x20msgId:\x20','Could\x20not\x20create\x20table\x20msgs','elementId','chatType','updateFileCache','getCurrentMaxShortId','qFWiB','Database','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','zgyec','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','uuid','updateMsg','CoAVG','更新消息,\x20shortId:','db\x20could\x20not\x20update\x20file\x20cache','has','zZehA','get','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','maxId','YlmXz','db\x20could\x20not\x20get\x20file\x20cache','SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?','udVly','IurEd','jhYrU'];_0x5e81=function(){return _0x580dfd;};return _0x5e81();}import{logDebug,logError}from'@/common/utils/log';import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async[_0x149326(0x206)](_0x2e27e7){const _0x1c359a={'wtyTy':function(_0x18b17a,_0x65ff55,_0x4df54a){return _0x18b17a(_0x65ff55,_0x4df54a);},'rczVZ':'Could\x20not\x20connect\x20to\x20database','DFSeI':function(_0x5cf539,_0x478ceb){return _0x5cf539(_0x478ceb);},'CoAVG':function(_0x459424){return _0x459424();},'IurEd':function(_0x2f8420,_0xe7b824){return _0x2f8420|_0xe7b824;}};if(this['db'])return;return new Promise((_0x3e74fc,_0x5504b3)=>{const _0x46e84d=_0x34b4,_0x49c53e={'vFdKL':function(_0x3b3e91,_0x323ee1,_0x485444){const _0x2f10b6=_0x34b4;return _0x1c359a[_0x2f10b6(0x217)](_0x3b3e91,_0x323ee1,_0x485444);},'zZehA':_0x1c359a[_0x46e84d(0x1d2)],'jZQKV':function(_0x202aab,_0x18c1e7){return _0x1c359a['DFSeI'](_0x202aab,_0x18c1e7);},'oaEbX':function(_0x155251){const _0xcb822=_0x46e84d;return _0x1c359a[_0xcb822(0x1be)](_0x155251);}};this['db']=new _0x13cfdd[(_0x46e84d(0x1b8))](_0x2e27e7,_0x1c359a[_0x46e84d(0x1ca)](_0x13cfdd[_0x46e84d(0x218)],_0x13cfdd[_0x46e84d(0x201)]),_0x178881=>{const _0xc457be=_0x46e84d;if(_0x178881){_0x49c53e[_0xc457be(0x216)](logError,_0x49c53e[_0xc457be(0x1c2)],_0x178881),_0x49c53e[_0xc457be(0x1d3)](_0x5504b3,_0x178881);return;}this[_0xc457be(0x1f8)](),_0x49c53e[_0xc457be(0x210)](_0x3e74fc);});});}[_0x149326(0x1f8)](){const _0x5b829d=_0x149326,_0x2e17b5={'VtWko':_0x5b829d(0x1dd)};throw new Error(_0x2e17b5['VtWko']);}[_0x149326(0x22d)](){this['db']?.['close']();}}function _0x34b4(_0x515066,_0x64e021){const _0x5e814d=_0x5e81();return _0x34b4=function(_0x34b463,_0x1af5c7){_0x34b463=_0x34b463-0x1ad;let _0xa90e54=_0x5e814d[_0x34b463];return _0xa90e54;},_0x34b4(_0x515066,_0x64e021);}class DBUtil extends DBUtilBase{[_0x149326(0x1f1)]=new Map();[_0x149326(0x1af)]=-0x7ffffff8;constructor(){const _0x52f690=_0x149326,_0x511f0a={'ejdHJ':function(_0x5c7867,_0x52b916){return _0x5c7867>_0x52b916;},'uUJvj':function(_0x1c46c5,_0x320e00){return _0x1c46c5*_0x320e00;},'HOUTX':_0x52f690(0x1d0),'fvTbp':function(_0x11d081,_0x1f5a0a){return _0x11d081*_0x1f5a0a;},'NSgog':function(_0x1510ed,_0xa7d4a5,_0x27b4da){return _0x1510ed(_0xa7d4a5,_0x27b4da);}};super();const _0x3033ad=_0x511f0a['fvTbp'](0x3e8*0x3c,0xa);_0x511f0a[_0x52f690(0x215)](setInterval,()=>{const _0x2a6739=_0x52f690;logDebug(_0x511f0a['HOUTX']),this[_0x2a6739(0x1f1)][_0x2a6739(0x20f)]((_0x51be58,_0x140f29)=>{const _0x364e59=_0x2a6739;_0x511f0a[_0x364e59(0x1df)](Date['now']()-_0x511f0a[_0x364e59(0x1d5)](parseInt(_0x51be58['msgTime']),0x3e8),_0x3033ad)&&this[_0x364e59(0x1f1)][_0x364e59(0x1ae)](_0x140f29);});},_0x3033ad);}async[_0x149326(0x206)](_0xc0cb68){const _0x36a08c=_0x149326;await super[_0x36a08c(0x206)](_0xc0cb68),this[_0x36a08c(0x1af)]=await this[_0x36a08c(0x1b6)]();}[_0x149326(0x1f8)](){const _0x5c2cbb=_0x149326,_0x305087={'duvYo':function(_0x223f5f,_0x199bae,_0x552ab6){return _0x223f5f(_0x199bae,_0x552ab6);},'IaqjB':_0x5c2cbb(0x1b2),'YqvGK':_0x5c2cbb(0x1d7)},_0x2a8076=_0x5c2cbb(0x221);this['db']['run'](_0x2a8076,function(_0x583771){const _0x2dd222=_0x5c2cbb;_0x583771&&_0x305087[_0x2dd222(0x235)](logError,_0x305087['IaqjB'],_0x583771[_0x2dd222(0x20d)]);});const _0x162d12=_0x5c2cbb(0x1e9);this['db'][_0x5c2cbb(0x1ff)](_0x162d12,function(_0x17948b){const _0xeae162=_0x5c2cbb;_0x17948b&&_0x305087[_0xeae162(0x235)](logError,'Could\x20not\x20create\x20table\x20files',_0x17948b);});const _0x3d3c78='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)';this['db'][_0x5c2cbb(0x1ff)](_0x3d3c78,function(_0xc43dbd){const _0x2c9f3b=_0x5c2cbb;_0xc43dbd&&_0x305087[_0x2c9f3b(0x235)](logError,_0x305087['YqvGK'],_0xc43dbd);});}async[_0x149326(0x1b6)](){const _0xaed555=_0x149326,_0x4a1dc2={'isHME':function(_0x5e36fd,_0x3b16b3,_0x14bc84){return _0x5e36fd(_0x3b16b3,_0x14bc84);},'zgyec':_0xaed555(0x1e4),'zcZfx':function(_0x1e6539,_0x45a291){return _0x1e6539(_0x45a291);},'UlEDg':_0xaed555(0x22c),'BOioG':_0xaed555(0x1c4)};return new Promise((_0x4c2c33,_0x3989c6)=>{const _0x4a0631=_0xaed555;this['db']['get'](_0x4a1dc2[_0x4a0631(0x20a)],(_0x4d23e6,_0x47415e)=>{const _0x2e0434=_0x4a0631;if(_0x4d23e6)return _0x4a1dc2[_0x2e0434(0x1db)](logDebug,_0x4a1dc2[_0x2e0434(0x1ba)],_0x4d23e6),_0x4a1dc2[_0x2e0434(0x1b0)](_0x4c2c33,-0x7ffffff8);_0x4a1dc2[_0x2e0434(0x1db)](logDebug,_0x4a1dc2[_0x2e0434(0x22e)],_0x47415e?.['maxId']),_0x4a1dc2[_0x2e0434(0x1b0)](_0x4c2c33,_0x47415e?.[_0x2e0434(0x1c5)]??-0x7ffffff8);});});}async['getMsg'](_0x4972db,_0x4cd793){const _0x19b2fb=_0x149326,_0x3d3352={'SAuWg':function(_0x5ccaa8,_0x44343b){return _0x5ccaa8(_0x44343b);},'UIYAp':_0x19b2fb(0x223),'jhYrU':function(_0x18e387,_0x274dce){return _0x18e387(_0x274dce);},'DrMNM':function(_0x546430,_0x3dafaa){return _0x546430(_0x3dafaa);}},_0xab2bd9=this['db'][_0x19b2fb(0x21c)](_0x4972db);return new Promise((_0x326ca8,_0x1c2c42)=>{const _0x5a2203={'bkjZy':function(_0x13846e,_0x3f0a94){return _0x3d3352['DrMNM'](_0x13846e,_0x3f0a94);}};_0xab2bd9['get'](..._0x4cd793,(_0x8e4ae8,_0x544f56)=>{const _0x7fe5c2=_0x34b4,_0x8c549f={'ccmqs':function(_0x5556e0,_0x1ae685){const _0x4b290c=_0x34b4;return _0x3d3352[_0x4b290c(0x1ad)](_0x5556e0,_0x1ae685);}};if(_0x8e4ae8)return logError(_0x3d3352[_0x7fe5c2(0x1e0)],_0x8e4ae8,_0x4972db,_0x4cd793),_0x3d3352[_0x7fe5c2(0x1cb)](_0x326ca8,null);if(!_0x544f56){_0x3d3352['jhYrU'](_0x326ca8,null);return;}const _0x1d39aa=_0x544f56[_0x7fe5c2(0x1f6)];NTQQMsgApi[_0x7fe5c2(0x1fa)]({'peerUid':_0x544f56[_0x7fe5c2(0x1f0)],'chatType':_0x544f56[_0x7fe5c2(0x1b4)]},[_0x1d39aa])['then'](_0x4c8b3d=>{const _0x461593=_0x7fe5c2,_0xc895f=_0x4c8b3d[_0x461593(0x1f4)][0x0];if(!_0xc895f){_0x326ca8(null);return;}_0xc895f['id']=_0x544f56[_0x461593(0x234)],_0x5a2203[_0x461593(0x21a)](_0x326ca8,_0xc895f);})[_0x7fe5c2(0x208)](_0x2e0e97=>{const _0x46870c=_0x7fe5c2;_0x8c549f[_0x46870c(0x225)](_0x326ca8,null);});});});}async[_0x149326(0x209)](_0xec4669){const _0x3ca5ae=_0x149326,_0x3342f9={'JYgBu':_0x3ca5ae(0x1b9)};if(this[_0x3ca5ae(0x1f1)][_0x3ca5ae(0x1c1)](_0xec4669))return this[_0x3ca5ae(0x1f1)][_0x3ca5ae(0x1c3)](_0xec4669);const _0x573192=_0x3342f9[_0x3ca5ae(0x1e1)];return this[_0x3ca5ae(0x1fc)](_0x573192,[_0xec4669]);}async['getMsgByLongId'](_0xb0bae2){const _0x30a090=_0x149326;if(this[_0x30a090(0x1f1)][_0x30a090(0x1c1)](_0xb0bae2))return this[_0x30a090(0x1f1)][_0x30a090(0x1c3)](_0xb0bae2);return this[_0x30a090(0x1fc)](_0x30a090(0x207),[_0xb0bae2]);}async[_0x149326(0x1fe)](_0x21b87c,_0x5eb866){const _0x4eefd7=_0x149326,_0x497d90={'EmbTk':'SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?'},_0x4e4d94=_0x497d90['EmbTk'];return this[_0x4eefd7(0x1fc)](_0x4e4d94,[_0x21b87c,_0x5eb866]);}async['addMsg'](_0x1558cf,_0x33846d=!![]){const _0x11c53e=_0x149326,_0x369f4a={'Dqrqb':function(_0x1201a1,_0x35b453){return _0x1201a1===_0x35b453;},'luiJp':_0x11c53e(0x20e)},_0x5a1e1c=await this['getMsgByLongId'](_0x1558cf[_0x11c53e(0x1f7)]);if(_0x5a1e1c){if(_0x33846d)this[_0x11c53e(0x1bd)](_0x1558cf)[_0x11c53e(0x229)]();return _0x5a1e1c['id'];}const _0x372d02=this['db'][_0x11c53e(0x21c)]('INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)'),_0x147b03=++this[_0x11c53e(0x1af)];return _0x1558cf['id']=_0x147b03,logDebug(_0x11c53e(0x231)+_0x1558cf[_0x11c53e(0x1f7)]+_0x11c53e(0x220)+_0x1558cf['id']),this['msgCache'][_0x11c53e(0x205)](_0x147b03,_0x1558cf),this[_0x11c53e(0x1f1)]['set'](_0x1558cf['msgId'],_0x1558cf),_0x372d02[_0x11c53e(0x1ff)](this[_0x11c53e(0x1af)],_0x1558cf['msgId'],_0x1558cf[_0x11c53e(0x22a)]['toString'](),_0x1558cf[_0x11c53e(0x1f0)],_0x1558cf[_0x11c53e(0x1b4)],_0x9a5ca6=>{const _0x1a233c=_0x11c53e,_0x28eeb3={'NlHjN':_0x1a233c(0x1e5)};_0x9a5ca6&&(_0x369f4a['Dqrqb'](_0x9a5ca6[_0x1a233c(0x21f)],0x13)?this[_0x1a233c(0x227)](_0x1558cf['msgId'])['then'](_0x157201=>{const _0x1abfdb=_0x1a233c;_0x157201?(this[_0x1abfdb(0x1f1)][_0x1abfdb(0x205)](_0x147b03,_0x157201),this[_0x1abfdb(0x1f1)]['set'](_0x157201[_0x1abfdb(0x1f7)],_0x157201)):logError(_0x28eeb3[_0x1abfdb(0x1fd)],_0x9a5ca6);})[_0x1a233c(0x208)](_0x4f3f36=>logError(_0x1a233c(0x1e8),_0x4f3f36)):logError(_0x369f4a[_0x1a233c(0x1d8)],_0x9a5ca6));}),_0x147b03;}async[_0x149326(0x1bd)](_0x5a59d1){const _0x375b19=_0x149326,_0xe657a4={'IBHrH':function(_0x48511e,_0x2dc9db,_0x386f3e){return _0x48511e(_0x2dc9db,_0x386f3e);},'UYAFT':_0x375b19(0x233)},_0x4e24a9=this['msgCache']['get'](_0x5a59d1[_0x375b19(0x1f7)]);_0x4e24a9&&Object[_0x375b19(0x1e2)](_0x4e24a9,_0x5a59d1);logDebug(_0x375b19(0x1bf)+_0x5a59d1['id']+_0x375b19(0x1da)+_0x5a59d1[_0x375b19(0x22a)]+_0x375b19(0x1b1)+_0x5a59d1[_0x375b19(0x1f7)]);const _0x16ac24=this['db']['prepare'](_0x375b19(0x22f));_0x16ac24['run'](_0x5a59d1[_0x375b19(0x22a)],_0x5a59d1[_0x375b19(0x1f7)],_0x1d10ea=>{const _0x44fd25=_0x375b19;_0x1d10ea&&_0xe657a4['IBHrH'](logError,_0xe657a4[_0x44fd25(0x237)],_0x1d10ea);});}async[_0x149326(0x21e)](_0x3b88cc){const _0x15804d=_0x149326,_0x2aa9b7={'eeHHj':_0x15804d(0x21d),'JfMLM':function(_0x3ef68f,_0x42bcb8){return _0x3ef68f(_0x42bcb8);}},_0x171d88=this['db'][_0x15804d(0x21c)](_0x15804d(0x1ef));return new Promise((_0x4e1bb3,_0x155957)=>{const _0x44abf7=_0x15804d,_0x3e66bd={'AqhNn':_0x2aa9b7['eeHHj'],'mxRWl':function(_0x4aca2d,_0x2dc725){return _0x2aa9b7['JfMLM'](_0x4aca2d,_0x2dc725);}};_0x171d88[_0x44abf7(0x1ff)](_0x3b88cc[_0x44abf7(0x1ed)],_0x3b88cc['path'],_0x3b88cc['url'],_0x3b88cc[_0x44abf7(0x1d4)],_0x3b88cc[_0x44abf7(0x1bc)],_0x3b88cc[_0x44abf7(0x22b)],JSON[_0x44abf7(0x219)](_0x3b88cc[_0x44abf7(0x1ce)]),_0x3b88cc[_0x44abf7(0x1b3)],_0x3b88cc[_0x44abf7(0x1f7)],function(_0x4254ac){const _0x113fbd=_0x44abf7;_0x4254ac&&(logError(_0x3e66bd[_0x113fbd(0x1f9)],_0x4254ac),_0x3e66bd['mxRWl'](_0x155957,_0x4254ac)),_0x4e1bb3(null);});});}async[_0x149326(0x1f5)](_0x1e3b8e,_0x6b4d33){const _0x5c0ba8=_0x149326,_0x260a8b={'wsNDD':function(_0x1af9b7,_0x14580d,_0x1e38de){return _0x1af9b7(_0x14580d,_0x1e38de);},'mLxxb':_0x5c0ba8(0x1c7),'ozlUE':function(_0xa2b9bf,_0x250530){return _0xa2b9bf(_0x250530);}},_0x282407=this['db'][_0x5c0ba8(0x21c)](_0x1e3b8e);return new Promise((_0x2456f8,_0x413ded)=>{const _0x4feef5=_0x5c0ba8,_0x4fbab1={'udVly':function(_0x3bc2ce,_0x26fcbc,_0x4ff740){const _0x50b318=_0x34b4;return _0x260a8b[_0x50b318(0x213)](_0x3bc2ce,_0x26fcbc,_0x4ff740);},'lSfhx':_0x260a8b[_0x4feef5(0x222)],'QyBZs':function(_0x4bfca4,_0x24a8e9){const _0x226e24=_0x4feef5;return _0x260a8b[_0x226e24(0x21b)](_0x4bfca4,_0x24a8e9);}};_0x282407['get'](..._0x6b4d33,(_0x4b6c8a,_0x31c356)=>{const _0x52c861=_0x4feef5;_0x4b6c8a&&(_0x4fbab1[_0x52c861(0x1c9)](logError,_0x4fbab1[_0x52c861(0x1cc)],_0x4b6c8a),_0x4fbab1[_0x52c861(0x1fb)](_0x413ded,_0x4b6c8a)),_0x31c356&&(_0x31c356[_0x52c861(0x1ce)]=JSON[_0x52c861(0x1d9)](_0x31c356['element'])),_0x2456f8(_0x31c356);});});}async['getFileCacheByName'](_0x6fcf0b){const _0x1f3c78=_0x149326,_0x30d58e={'BqIaI':_0x1f3c78(0x1bb)};return this[_0x1f3c78(0x1f5)](_0x30d58e['BqIaI'],[_0x6fcf0b]);}async[_0x149326(0x1cd)](_0x2dd4ea){const _0x40e78d=_0x149326,_0x168721={'OAjZX':_0x40e78d(0x1c8)};return this[_0x40e78d(0x1f5)](_0x168721[_0x40e78d(0x1f2)],[_0x2dd4ea]);}async[_0x149326(0x1b5)](_0x42cf9d){const _0x1852a8=_0x149326,_0x5df0a3={'wDXdP':_0x1852a8(0x1c0),'qFWiB':function(_0xe6a4f7,_0x1d933e){return _0xe6a4f7(_0x1d933e);},'YlmXz':function(_0x3cec45,_0x3c47e6){return _0x3cec45(_0x3c47e6);},'qyxoo':_0x1852a8(0x230)},_0x4b32d9=this['db'][_0x1852a8(0x21c)](_0x5df0a3[_0x1852a8(0x204)]);return new Promise((_0x56873f,_0x337d96)=>{_0x4b32d9['run'](_0x42cf9d['path'],_0x42cf9d['url'],_0x42cf9d['uuid'],function(_0x3b3ec6){const _0x4222b2=_0x34b4;_0x3b3ec6&&(logError(_0x5df0a3[_0x4222b2(0x1e7)],_0x3b3ec6),_0x5df0a3[_0x4222b2(0x1b7)](_0x337d96,_0x3b3ec6)),_0x5df0a3[_0x4222b2(0x1c6)](_0x56873f,null);});});}async['getReceivedTempUinMap'](){const _0x24574e=_0x149326,_0x2bcdce={'raVeM':function(_0x330491,_0x1da96a,_0xe6ba32){return _0x330491(_0x1da96a,_0xe6ba32);},'XYViD':_0x24574e(0x202),'dbdau':_0x24574e(0x1eb)},_0x42feaa=_0x2bcdce[_0x24574e(0x1cf)];return new Promise((_0x2ee55b,_0x1eb0ce)=>{const _0x1cb44a=_0x24574e,_0x5615e0={'wMWsx':function(_0x4f6bfb,_0x417484,_0x15e55d){const _0x355dc8=_0x34b4;return _0x2bcdce[_0x355dc8(0x1ea)](_0x4f6bfb,_0x417484,_0x15e55d);},'czmFI':_0x2bcdce[_0x1cb44a(0x20b)],'zATeZ':function(_0x1f97ee,_0x4e8884){return _0x1f97ee(_0x4e8884);}};this['db']['all'](_0x42feaa,(_0x31c298,_0x30fe65)=>{const _0xe34ab9=_0x1cb44a;_0x31c298&&(_0x5615e0['wMWsx'](logError,_0x5615e0['czmFI'],_0x31c298),_0x5615e0[_0xe34ab9(0x1dc)](_0x1eb0ce,_0x31c298));const _0x40f4ec={};_0x30fe65['forEach'](_0x4b52b7=>{const _0x3a3eaf=_0xe34ab9;_0x40f4ec[_0x4b52b7['uin']]=_0x4b52b7[_0x3a3eaf(0x1de)];}),_0x5615e0[_0xe34ab9(0x1dc)](_0x2ee55b,_0x40f4ec);});});}async[_0x149326(0x1e3)](_0x24bdbb){const _0x3d047b=_0x149326,_0x2e6710={'nIvUB':function(_0xd8dc79,_0x8c7f2c,_0xf848f9){return _0xd8dc79(_0x8c7f2c,_0xf848f9);},'gNkRy':function(_0x5c38ed,_0x1a8d9c){return _0x5c38ed(_0x1a8d9c);}},_0x26fcc6=_0x3d047b(0x200);return new Promise((_0x242788,_0x5e0458)=>{const _0x4a363c=_0x3d047b;this['db'][_0x4a363c(0x1c3)](_0x26fcc6,[_0x24bdbb],(_0x5c1c8a,_0x41516a)=>{const _0x808e6b=_0x4a363c;_0x5c1c8a&&(_0x2e6710['nIvUB'](logError,_0x808e6b(0x202),_0x5c1c8a),_0x5e0458(_0x5c1c8a)),_0x2e6710[_0x808e6b(0x228)](_0x242788,_0x41516a?.[_0x808e6b(0x1de)]);});});}async[_0x149326(0x1d1)](_0x4694c5,_0x5929d2){const _0x53fc24=_0x149326,_0x535cd7={'mdUgs':function(_0x5784a8,_0x3d308f,_0x5b7156){return _0x5784a8(_0x3d308f,_0x5b7156);},'YwHbK':_0x53fc24(0x232),'KngMn':function(_0x471a74,_0x1d004d){return _0x471a74(_0x1d004d);},'byHho':function(_0x2846b0,_0x48a347){return _0x2846b0(_0x48a347);},'ixRxJ':'INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)'},_0x4daef8=await this[_0x53fc24(0x1e3)](_0x4694c5);if(!_0x4daef8){const _0x98f104=this['db'][_0x53fc24(0x21c)](_0x535cd7[_0x53fc24(0x1d6)]);return new Promise((_0x279f23,_0x4cdd2c)=>{_0x98f104['run'](_0x4694c5,_0x5929d2,function(_0x28cf3c){const _0xe981cf=_0x34b4;_0x28cf3c&&(_0x535cd7[_0xe981cf(0x224)](logError,_0x535cd7['YwHbK'],_0x28cf3c),_0x535cd7['KngMn'](_0x4cdd2c,_0x28cf3c)),_0x535cd7[_0xe981cf(0x1ee)](_0x279f23,null);});});}}}export const dbUtil=new DBUtil();