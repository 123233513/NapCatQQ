const _0xfb6eb3=_0x324b;function _0x4c77(){const _0x336864=['close','NGPkH','JUFJF','db\x20could\x20not\x20update\x20file\x20cache','BjAcL','toString','qLakw','maxId','nZjbL','UTRYo','updateMsg\x20db\x20error','LtPlG','db\x20getMsgByLongId\x20error','addTempUin','更新消息,\x20shortId:','msgList','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','uuid','getMsgByLongId','has','Database','Could\x20not\x20create\x20table\x20msgs','mvJMX','getMsg','getUidByTempUin','uaOtc','HcHhI','db\x20could\x20not\x20add\x20temp\x20uin','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','olgtQ','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?','ejKNr','rycKB','stack','poWPl','lGMWQ','then','path','ZdjrE','uxyld','REEWj','getMsgBySeq','174216chFuEj','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','getFileCacheByName','数据库中消息最大短id','INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','1642310YkPaFf','uid','stringify','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','fUSgF','oYxMB','Qszwi','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','gvZWj','KKeco','forEach','getFileCache','KGEIH','UoHdo','sXLAE','tAOBg','191469DKLyGJ','addMsg','updateFileCache','OPrrW','elementType','ewCDM','SELECT\x20*\x20FROM\x20temp_uins','getFileCacheByUuid','prepare','chatType','RVQZb','XbZro','createTable','1539384iToodc','SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?','MoLqe','zrdIM','lYiwo','updateMsg','LQglk','srtFe','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','CLqVj','msgId','TCPkS','db\x20could\x20not\x20get\x20temp\x20uin\x20map','1311642vEItDp','Could\x20not\x20connect\x20to\x20database','set','msgCache','tUqlB','getMsgsByMsgId','JZnFB','globalMsgShortId','GWaMI','oQWht','getReceivedTempUinMap','dyHWV','catch','juhqV','msgTime','KxnMO','swPuT','peerUid','75176FqOuzD','cGvWs','errno','getCurrentMaxShortId','element','KjQdd','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','addFileCache','elementId','get','Could\x20not\x20create\x20table\x20temp_uins','12deDJzH','run','all','gwuND','name','db\x20could\x20not\x20get\x20file\x20cache','UhMnQ','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','Yfquj','eXyIR',',\x20msgId:\x20','DqGHT','Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','ecYPo','XMyWa','msgSeq','init','BoKXD','shortId','nfqpD','parse','SwXlx','XdrXk',',\x20短id:\x20','INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)','mFOwd','hUwJz','1705277NnzdSo','qBzeE'];_0x4c77=function(){return _0x336864;};return _0x4c77();}(function(_0xe26476,_0x1412ee){const _0x39061b=_0x324b,_0x54f17e=_0xe26476();while(!![]){try{const _0x1cf635=parseInt(_0x39061b(0x17e))/0x1+parseInt(_0x39061b(0x1bf))/0x2+-parseInt(_0x39061b(0x193))/0x3*(parseInt(_0x39061b(0x1ca))/0x4)+parseInt(_0x39061b(0x183))/0x5+-parseInt(_0x39061b(0x1ad))/0x6+parseInt(_0x39061b(0x1e5))/0x7+-parseInt(_0x39061b(0x1a0))/0x8;if(_0x1cf635===_0x1412ee)break;else _0x54f17e['push'](_0x54f17e['shift']());}catch(_0x5bab58){_0x54f17e['push'](_0x54f17e['shift']());}}}(_0x4c77,0x2c482));import _0x501cbf from'sqlite3';import{logDebug,logError}from'@/common/utils/log';import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async[_0xfb6eb3(0x1da)](_0x29e53b){const _0x5dea05=_0xfb6eb3,_0x4df3b5={'uaOtc':function(_0xd848e9,_0x77dd8d,_0x3bed45){return _0xd848e9(_0x77dd8d,_0x3bed45);},'MoLqe':_0x5dea05(0x1ae),'XdrXk':function(_0x8062b2,_0x1cab90){return _0x8062b2(_0x1cab90);},'KxnMO':function(_0x325be5,_0x5be77e){return _0x325be5|_0x5be77e;}};if(this['db'])return;return new Promise((_0x7e97a2,_0x3183e4)=>{const _0x4c66ff=_0x5dea05,_0x38c774={'fbkyB':function(_0x1651f8,_0x49777f,_0xcff395){const _0x5d27c3=_0x324b;return _0x4df3b5[_0x5d27c3(0x200)](_0x1651f8,_0x49777f,_0xcff395);},'hUwJz':_0x4df3b5[_0x4c66ff(0x1a2)],'RVQZb':function(_0x43afbd,_0x5926b9){const _0x2aa192=_0x4c66ff;return _0x4df3b5[_0x2aa192(0x1e0)](_0x43afbd,_0x5926b9);},'sXLAE':function(_0x47f40b){return _0x47f40b();}};this['db']=new _0x501cbf[(_0x4c66ff(0x1fb))](_0x29e53b,_0x4df3b5[_0x4c66ff(0x1bc)](_0x501cbf['OPEN_READWRITE'],_0x501cbf['OPEN_CREATE']),_0x379a5b=>{const _0x5f5b1c=_0x4c66ff;if(_0x379a5b){_0x38c774['fbkyB'](logError,_0x38c774[_0x5f5b1c(0x1e4)],_0x379a5b),_0x38c774[_0x5f5b1c(0x19d)](_0x3183e4,_0x379a5b);return;}this[_0x5f5b1c(0x19f)](),_0x38c774[_0x5f5b1c(0x191)](_0x7e97a2);});});}[_0xfb6eb3(0x19f)](){const _0x56a880=_0xfb6eb3,_0x155041={'nZjbL':'Method\x20not\x20implemented.'};throw new Error(_0x155041[_0x56a880(0x1ef)]);}[_0xfb6eb3(0x1e7)](){const _0x2e4f79=_0xfb6eb3;this['db']?.[_0x2e4f79(0x1e7)]();}}class DBUtil extends DBUtilBase{[_0xfb6eb3(0x1b0)]=new Map();[_0xfb6eb3(0x1b4)]=-0x7ffffff8;constructor(){const _0x26247b=_0xfb6eb3,_0x83fa29={'ecYPo':function(_0x5a0227,_0x4b4749){return _0x5a0227>_0x4b4749;},'KKeco':function(_0x14f971,_0x3def39){return _0x14f971-_0x3def39;},'klHqv':'清理消息缓存','qLakw':function(_0xcd36a7,_0x188d58){return _0xcd36a7*_0x188d58;},'GWaMI':function(_0x496357,_0x3fb9f1){return _0x496357*_0x3fb9f1;},'ejKNr':function(_0x3b803c,_0x4abd13,_0x3d1bad){return _0x3b803c(_0x4abd13,_0x3d1bad);}};super();const _0x538c96=_0x83fa29[_0x26247b(0x1ed)](_0x83fa29[_0x26247b(0x1b5)](0x3e8,0x3c),0xa);_0x83fa29[_0x26247b(0x206)](setInterval,()=>{const _0x226f1c=_0x26247b;logDebug(_0x83fa29['klHqv']),this['msgCache'][_0x226f1c(0x18d)]((_0x4b97ab,_0xffa58e)=>{const _0x491746=_0x226f1c;_0x83fa29[_0x491746(0x1d7)](_0x83fa29[_0x491746(0x18c)](Date['now'](),parseInt(_0x4b97ab[_0x491746(0x1bb)])*0x3e8),_0x538c96)&&this['msgCache']['delete'](_0xffa58e);});},_0x538c96);}async[_0xfb6eb3(0x1da)](_0x468c17){const _0x596bd9=_0xfb6eb3;await super[_0x596bd9(0x1da)](_0x468c17),this['globalMsgShortId']=await this[_0x596bd9(0x1c2)]();}[_0xfb6eb3(0x19f)](){const _0x12b1ff=_0xfb6eb3,_0x4c0f58={'mFOwd':_0x12b1ff(0x1fc),'qBzeE':function(_0xa20849,_0xb68f9b,_0x5e4c14){return _0xa20849(_0xb68f9b,_0x5e4c14);},'tAOBg':'Could\x20not\x20create\x20table\x20files','juhqV':function(_0x3fae92,_0x35724a,_0x19cfd9){return _0x3fae92(_0x35724a,_0x19cfd9);},'ZdjrE':_0x12b1ff(0x1c9)},_0x37be0f='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)';this['db']['run'](_0x37be0f,function(_0x1a6162){const _0x48a619=_0x12b1ff;_0x1a6162&&logError(_0x4c0f58[_0x48a619(0x1e3)],_0x1a6162[_0x48a619(0x208)]);});const _0x53ca2c=_0x12b1ff(0x203);this['db']['run'](_0x53ca2c,function(_0x53d773){const _0x5355fa=_0x12b1ff;_0x53d773&&_0x4c0f58[_0x5355fa(0x1e6)](logError,_0x4c0f58[_0x5355fa(0x192)],_0x53d773);});const _0x249e16=_0x12b1ff(0x1f7);this['db'][_0x12b1ff(0x1cb)](_0x249e16,function(_0x5c777b){const _0x1740b9=_0x12b1ff;_0x5c777b&&_0x4c0f58[_0x1740b9(0x1ba)](logError,_0x4c0f58[_0x1740b9(0x20d)],_0x5c777b);});}async[_0xfb6eb3(0x1c2)](){const _0x599543=_0xfb6eb3,_0xc1d9a2={'CLqVj':_0x599543(0x181),'lGMWQ':_0x599543(0x1c5)};return new Promise((_0x924241,_0xf8ffd2)=>{const _0x433480=_0x599543,_0x4767f8={'oQWht':function(_0x2d4db0,_0x1dbe4e){return _0x2d4db0(_0x1dbe4e);},'nfqpD':_0xc1d9a2[_0x433480(0x1a9)]};this['db'][_0x433480(0x1c8)](_0xc1d9a2[_0x433480(0x20a)],(_0x49efad,_0x55d19d)=>{const _0x552399=_0x433480;if(_0x49efad)return logDebug(_0x552399(0x1d6),_0x49efad),_0x4767f8['oQWht'](_0x924241,-0x7ffffff8);logDebug(_0x4767f8[_0x552399(0x1dd)],_0x55d19d?.['maxId']),_0x4767f8[_0x552399(0x1b6)](_0x924241,_0x55d19d?.[_0x552399(0x1ee)]??-0x7ffffff8);});});}async[_0xfb6eb3(0x1fe)](_0x419caf,_0x1d341e){const _0x1aae8b={'UoHdo':function(_0xd8d52c,_0x3bd047){return _0xd8d52c(_0x3bd047);},'ZUCSL':function(_0x3c95df,_0x2c59bd){return _0x3c95df(_0x2c59bd);},'gwuND':'Could\x20not\x20get\x20msg'},_0x4ecfac=this['db']['prepare'](_0x419caf);return new Promise((_0x5c1697,_0x2f6f6d)=>{const _0x3d3824=_0x324b,_0x152da9={'HcHhI':function(_0x3d1568,_0x4b25f7){const _0xfa31a8=_0x324b;return _0x1aae8b[_0xfa31a8(0x190)](_0x3d1568,_0x4b25f7);},'REEWj':function(_0x5d404e,_0x10660e){return _0x1aae8b['ZUCSL'](_0x5d404e,_0x10660e);},'poWPl':_0x1aae8b[_0x3d3824(0x1cd)]};_0x4ecfac[_0x3d3824(0x1c8)](..._0x1d341e,(_0x365f92,_0x2fa78d)=>{const _0x4acb31=_0x3d3824,_0x59172b={'XMyWa':function(_0x35fb89,_0x1a2dce){const _0x9d5e8f=_0x324b;return _0x152da9[_0x9d5e8f(0x17c)](_0x35fb89,_0x1a2dce);},'OPrrW':function(_0x1778ef,_0x30f367){return _0x1778ef(_0x30f367);}};if(_0x365f92)return logError(_0x152da9[_0x4acb31(0x209)],_0x365f92,_0x419caf,_0x1d341e),_0x152da9[_0x4acb31(0x17c)](_0x5c1697,null);if(!_0x2fa78d){_0x5c1697(null);return;}const _0x51b500=_0x2fa78d['longId'];NTQQMsgApi[_0x4acb31(0x1b2)]({'peerUid':_0x2fa78d[_0x4acb31(0x1be)],'chatType':_0x2fa78d[_0x4acb31(0x19c)]},[_0x51b500])[_0x4acb31(0x20b)](_0x5dd77f=>{const _0x1791f1=_0x4acb31,_0x4e64e8=_0x5dd77f[_0x1791f1(0x1f6)][0x0];if(!_0x4e64e8){_0x59172b[_0x1791f1(0x1d8)](_0x5c1697,null);return;}_0x4e64e8['id']=_0x2fa78d[_0x1791f1(0x1dc)],_0x59172b[_0x1791f1(0x196)](_0x5c1697,_0x4e64e8);})['catch'](_0x596754=>{const _0x2899f8=_0x4acb31;_0x152da9[_0x2899f8(0x201)](_0x5c1697,null);});});});}async['getMsgByShortId'](_0x3de23e){const _0x166f62=_0xfb6eb3,_0x448f06={'srtFe':_0x166f62(0x186)};if(this[_0x166f62(0x1b0)]['has'](_0x3de23e))return this[_0x166f62(0x1b0)][_0x166f62(0x1c8)](_0x3de23e);const _0x20259a=_0x448f06[_0x166f62(0x1a7)];return this[_0x166f62(0x1fe)](_0x20259a,[_0x3de23e]);}async['getMsgByLongId'](_0x4a4ddc){const _0x2a8217=_0xfb6eb3,_0x3cb299={'BoKXD':'SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?'};if(this[_0x2a8217(0x1b0)][_0x2a8217(0x1fa)](_0x4a4ddc))return this[_0x2a8217(0x1b0)][_0x2a8217(0x1c8)](_0x4a4ddc);return this[_0x2a8217(0x1fe)](_0x3cb299[_0x2a8217(0x1db)],[_0x4a4ddc]);}async[_0xfb6eb3(0x17d)](_0x1ca9c9,_0x4ed4f8){const _0xaeb017=_0xfb6eb3,_0x409503={'LmYND':_0xaeb017(0x205)},_0x1e04f3=_0x409503['LmYND'];return this[_0xaeb017(0x1fe)](_0x1e04f3,[_0x1ca9c9,_0x4ed4f8]);}async[_0xfb6eb3(0x194)](_0x4bdcf0,_0x3fcf32=!![]){const _0x3dfb99=_0xfb6eb3,_0x2c7fd7={'uxyld':function(_0x22bb04,_0x3886f5,_0x2a4f59){return _0x22bb04(_0x3886f5,_0x2a4f59);},'DowfW':_0x3dfb99(0x17f),'eXyIR':function(_0x48647a,_0x161f61){return _0x48647a===_0x161f61;},'LtPlG':'db\x20could\x20not\x20add\x20msg','dyHWV':_0x3dfb99(0x182)},_0x4d5bef=await this['getMsgByLongId'](_0x4bdcf0[_0x3dfb99(0x1aa)]);if(_0x4d5bef){if(_0x3fcf32)this[_0x3dfb99(0x1a5)](_0x4bdcf0)['then']();return _0x4d5bef['id'];}const _0x1a4e0f=this['db']['prepare'](_0x2c7fd7[_0x3dfb99(0x1b8)]),_0x2088d3=++this['globalMsgShortId'];return _0x4bdcf0['id']=_0x2088d3,logDebug('记录消息到数据库,\x20消息长id:\x20'+_0x4bdcf0[_0x3dfb99(0x1aa)]+_0x3dfb99(0x1e1)+_0x4bdcf0['id']),this[_0x3dfb99(0x1b0)][_0x3dfb99(0x1af)](_0x2088d3,_0x4bdcf0),this[_0x3dfb99(0x1b0)]['set'](_0x4bdcf0[_0x3dfb99(0x1aa)],_0x4bdcf0),_0x1a4e0f[_0x3dfb99(0x1cb)](this[_0x3dfb99(0x1b4)],_0x4bdcf0[_0x3dfb99(0x1aa)],_0x4bdcf0[_0x3dfb99(0x1d9)][_0x3dfb99(0x1ec)](),_0x4bdcf0[_0x3dfb99(0x1be)],_0x4bdcf0[_0x3dfb99(0x19c)],_0x17ff66=>{const _0x492b00=_0x3dfb99,_0x47a874={'cikUr':function(_0x251fe7,_0x5d4c1c,_0x55fc1a){const _0x71b50e=_0x324b;return _0x2c7fd7[_0x71b50e(0x20e)](_0x251fe7,_0x5d4c1c,_0x55fc1a);},'ewCDM':_0x2c7fd7['DowfW']};_0x17ff66&&(_0x2c7fd7[_0x492b00(0x1d3)](_0x17ff66[_0x492b00(0x1c1)],0x13)?this[_0x492b00(0x1f9)](_0x4bdcf0[_0x492b00(0x1aa)])[_0x492b00(0x20b)](_0x109538=>{const _0x1a07ee=_0x492b00;_0x109538?(this[_0x1a07ee(0x1b0)]['set'](_0x2088d3,_0x109538),this[_0x1a07ee(0x1b0)]['set'](_0x109538['msgId'],_0x109538)):_0x47a874['cikUr'](logError,_0x47a874[_0x1a07ee(0x198)],_0x17ff66);})[_0x492b00(0x1b9)](_0x2e0c72=>logError(_0x492b00(0x1f3),_0x2e0c72)):logError(_0x2c7fd7[_0x492b00(0x1f2)],_0x17ff66));}),_0x2088d3;}async[_0xfb6eb3(0x1a5)](_0x591a8d){const _0x3f21cc=_0xfb6eb3,_0x2a4b72={'DqGHT':function(_0x4ce47b,_0x515361,_0x7d03fe){return _0x4ce47b(_0x515361,_0x7d03fe);},'LQglk':_0x3f21cc(0x1f1),'JZnFB':function(_0x2c9d7e,_0x3da821){return _0x2c9d7e(_0x3da821);},'JUFJF':'UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?'},_0x219453=this[_0x3f21cc(0x1b0)]['get'](_0x591a8d['msgId']);_0x219453&&Object['assign'](_0x219453,_0x591a8d);_0x2a4b72[_0x3f21cc(0x1b3)](logDebug,_0x3f21cc(0x1f5)+_0x591a8d['id']+',\x20seq:\x20'+_0x591a8d[_0x3f21cc(0x1d9)]+_0x3f21cc(0x1d4)+_0x591a8d[_0x3f21cc(0x1aa)]);const _0x5ab095=this['db'][_0x3f21cc(0x19b)](_0x2a4b72[_0x3f21cc(0x1e9)]);_0x5ab095[_0x3f21cc(0x1cb)](_0x591a8d[_0x3f21cc(0x1d9)],_0x591a8d[_0x3f21cc(0x1aa)],_0x35e983=>{const _0x1812eb=_0x3f21cc;_0x35e983&&_0x2a4b72[_0x1812eb(0x1d5)](logError,_0x2a4b72[_0x1812eb(0x1a6)],_0x35e983);});}async[_0xfb6eb3(0x1c6)](_0x3f52db){const _0x17ced6=_0xfb6eb3,_0x47979c={'ZToFP':function(_0x14fdd9,_0x152da5,_0x1d67d1){return _0x14fdd9(_0x152da5,_0x1d67d1);},'tUqlB':'db\x20could\x20not\x20add\x20file','Yfquj':function(_0x3e7615,_0x34a0e5){return _0x3e7615(_0x34a0e5);}},_0x2922e8=this['db'][_0x17ced6(0x19b)](_0x17ced6(0x1a8));return new Promise((_0x1fa173,_0xfadf8)=>{const _0x132219=_0x17ced6,_0x3a27fd={'TCPkS':function(_0x53116c,_0x284cad,_0x7b0de0){return _0x47979c['ZToFP'](_0x53116c,_0x284cad,_0x7b0de0);},'BjAcL':_0x47979c[_0x132219(0x1b1)],'swPuT':function(_0xf12baa,_0x106d27){const _0x4dff78=_0x132219;return _0x47979c[_0x4dff78(0x1d2)](_0xf12baa,_0x106d27);}};_0x2922e8[_0x132219(0x1cb)](_0x3f52db[_0x132219(0x1ce)],_0x3f52db['path'],_0x3f52db['url'],_0x3f52db['size'],_0x3f52db[_0x132219(0x1f8)],_0x3f52db[_0x132219(0x197)],JSON[_0x132219(0x185)](_0x3f52db[_0x132219(0x1c3)]),_0x3f52db[_0x132219(0x1c7)],_0x3f52db[_0x132219(0x1aa)],function(_0x50b221){const _0x1e4b52=_0x132219;_0x50b221&&(_0x3a27fd[_0x1e4b52(0x1ab)](logError,_0x3a27fd[_0x1e4b52(0x1eb)],_0x50b221),_0x3a27fd['swPuT'](_0xfadf8,_0x50b221)),_0x3a27fd[_0x1e4b52(0x1bd)](_0x1fa173,null);});});}async[_0xfb6eb3(0x18e)](_0x56b1fa,_0x2918b5){const _0x38d9f7=_0xfb6eb3,_0x14ea45={'SwXlx':_0x38d9f7(0x1cf),'oYxMB':function(_0x169356,_0x57048d){return _0x169356(_0x57048d);}},_0x482e0b=this['db']['prepare'](_0x56b1fa);return new Promise((_0x329a7b,_0x2baa73)=>{const _0x175092=_0x38d9f7;_0x482e0b[_0x175092(0x1c8)](..._0x2918b5,(_0xb96a4f,_0x5674b8)=>{const _0x155967=_0x175092;_0xb96a4f&&(logError(_0x14ea45[_0x155967(0x1df)],_0xb96a4f),_0x14ea45['oYxMB'](_0x2baa73,_0xb96a4f)),_0x5674b8&&(_0x5674b8[_0x155967(0x1c3)]=JSON[_0x155967(0x1de)](_0x5674b8[_0x155967(0x1c3)])),_0x14ea45[_0x155967(0x188)](_0x329a7b,_0x5674b8);});});}async[_0xfb6eb3(0x180)](_0x22dbf1){const _0x4dadd9=_0xfb6eb3,_0xd30668={'XbZro':_0x4dadd9(0x18a)};return this[_0x4dadd9(0x18e)](_0xd30668[_0x4dadd9(0x19e)],[_0x22dbf1]);}async[_0xfb6eb3(0x19a)](_0x4e2751){const _0x53a2be=_0xfb6eb3;return this[_0x53a2be(0x18e)](_0x53a2be(0x1a1),[_0x4e2751]);}async[_0xfb6eb3(0x195)](_0xb8e1be){const _0x2ca3d9=_0xfb6eb3,_0x3c0734={'tPIed':function(_0x185ab4,_0x15d164,_0x251e1b){return _0x185ab4(_0x15d164,_0x251e1b);},'zrdIM':_0x2ca3d9(0x1ea),'lYiwo':function(_0x55b279,_0x26a850){return _0x55b279(_0x26a850);},'NGPkH':'UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?'},_0x2c45d9=this['db'][_0x2ca3d9(0x19b)](_0x3c0734[_0x2ca3d9(0x1e8)]);return new Promise((_0x1d568c,_0x3be3c2)=>{const _0x86643a=_0x2ca3d9;_0x2c45d9[_0x86643a(0x1cb)](_0xb8e1be[_0x86643a(0x20c)],_0xb8e1be['url'],_0xb8e1be[_0x86643a(0x1f8)],function(_0x528ed8){const _0x2c5872=_0x86643a;_0x528ed8&&(_0x3c0734['tPIed'](logError,_0x3c0734[_0x2c5872(0x1a3)],_0x528ed8),_0x3c0734['lYiwo'](_0x3be3c2,_0x528ed8)),_0x3c0734[_0x2c5872(0x1a4)](_0x1d568c,null);});});}async[_0xfb6eb3(0x1b7)](){const _0x372ca9=_0xfb6eb3,_0x22e2cd={'Qszwi':_0x372ca9(0x1ac),'cGvWs':function(_0x5d11f9,_0x464658){return _0x5d11f9(_0x464658);},'fUSgF':_0x372ca9(0x199)},_0x1e40a3=_0x22e2cd[_0x372ca9(0x187)];return new Promise((_0x907fd6,_0x2b86e9)=>{const _0x126c12=_0x372ca9;this['db'][_0x126c12(0x1cc)](_0x1e40a3,(_0x401309,_0x59e341)=>{const _0x5dc077=_0x126c12;_0x401309&&(logError(_0x22e2cd[_0x5dc077(0x189)],_0x401309),_0x22e2cd['cGvWs'](_0x2b86e9,_0x401309));const _0x4540b3={};_0x59e341['forEach'](_0x2e87e5=>{const _0x56ff95=_0x5dc077;_0x4540b3[_0x2e87e5['uin']]=_0x2e87e5[_0x56ff95(0x184)];}),_0x22e2cd[_0x5dc077(0x1c0)](_0x907fd6,_0x4540b3);});});}async[_0xfb6eb3(0x1ff)](_0x35087f){const _0x1d4947=_0xfb6eb3,_0x189c18={'olgtQ':function(_0x5aa1bb,_0x38b04b,_0x185d1b){return _0x5aa1bb(_0x38b04b,_0x185d1b);},'KGEIH':'db\x20could\x20not\x20get\x20temp\x20uin\x20map','gvZWj':function(_0x2dfa5f,_0x563823){return _0x2dfa5f(_0x563823);},'mvJMX':_0x1d4947(0x1d1)},_0x3d2452=_0x189c18[_0x1d4947(0x1fd)];return new Promise((_0x3d5984,_0x290be8)=>{const _0x2629f0=_0x1d4947;this['db'][_0x2629f0(0x1c8)](_0x3d2452,[_0x35087f],(_0x2a3dca,_0x1f1ce5)=>{const _0x3af483=_0x2629f0;_0x2a3dca&&(_0x189c18[_0x3af483(0x204)](logError,_0x189c18[_0x3af483(0x18f)],_0x2a3dca),_0x189c18[_0x3af483(0x18b)](_0x290be8,_0x2a3dca)),_0x3d5984(_0x1f1ce5?.[_0x3af483(0x184)]);});});}async[_0xfb6eb3(0x1f4)](_0x28453c,_0xb4e916){const _0x5ba53e=_0xfb6eb3,_0x5b62cc={'rycKB':function(_0x367dc9,_0x310534){return _0x367dc9(_0x310534);},'UhMnQ':function(_0x4c01fd,_0xa160e8){return _0x4c01fd(_0xa160e8);}},_0x6451a0=await this[_0x5ba53e(0x1ff)](_0x28453c);if(!_0x6451a0){const _0x136e4b=this['db'][_0x5ba53e(0x19b)](_0x5ba53e(0x1e2));return new Promise((_0x2ffe21,_0x81944d)=>{const _0x52d402=_0x5ba53e,_0x65b3c8={'UTRYo':function(_0x2d4b0c,_0x6b23e6,_0x5cd237){return _0x2d4b0c(_0x6b23e6,_0x5cd237);},'DCcxb':function(_0x4df429,_0x40e96c){const _0x2a8525=_0x324b;return _0x5b62cc[_0x2a8525(0x207)](_0x4df429,_0x40e96c);},'KjQdd':function(_0x36803a,_0xec5b69){const _0x1658b1=_0x324b;return _0x5b62cc[_0x1658b1(0x1d0)](_0x36803a,_0xec5b69);}};_0x136e4b[_0x52d402(0x1cb)](_0x28453c,_0xb4e916,function(_0x1da85e){const _0x39e265=_0x52d402;_0x1da85e&&(_0x65b3c8[_0x39e265(0x1f0)](logError,_0x39e265(0x202),_0x1da85e),_0x65b3c8['DCcxb'](_0x81944d,_0x1da85e)),_0x65b3c8[_0x39e265(0x1c4)](_0x2ffe21,null);});});}}}function _0x324b(_0x40c7ca,_0x2d9ae6){const _0x4c7760=_0x4c77();return _0x324b=function(_0x324b1b,_0x31f0fc){_0x324b1b=_0x324b1b-0x17c;let _0x163a71=_0x4c7760[_0x324b1b];return _0x163a71;},_0x324b(_0x40c7ca,_0x2d9ae6);}export const dbUtil=new DBUtil();