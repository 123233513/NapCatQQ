const _0x598d57=_0x2e09;(function(_0x3c4976,_0xedfd14){const _0x5afb59=_0x2e09,_0x434fc7=_0x3c4976();while(!![]){try{const _0xce4357=parseInt(_0x5afb59(0x243))/0x1*(-parseInt(_0x5afb59(0x21e))/0x2)+parseInt(_0x5afb59(0x211))/0x3+-parseInt(_0x5afb59(0x251))/0x4+-parseInt(_0x5afb59(0x25b))/0x5*(parseInt(_0x5afb59(0x239))/0x6)+-parseInt(_0x5afb59(0x25e))/0x7*(parseInt(_0x5afb59(0x214))/0x8)+parseInt(_0x5afb59(0x26b))/0x9+parseInt(_0x5afb59(0x227))/0xa*(parseInt(_0x5afb59(0x1f8))/0xb);if(_0xce4357===_0xedfd14)break;else _0x434fc7['push'](_0x434fc7['shift']());}catch(_0x4cf77d){_0x434fc7['push'](_0x434fc7['shift']());}}}(_0x4018,0x1b39f));import _0x12df7c from'sqlite3';import{logDebug,logError}from'@/common/utils/log';function _0x2e09(_0x472dc1,_0x56d36f){const _0x401868=_0x4018();return _0x2e09=function(_0x2e0961,_0x2a8cc4){_0x2e0961=_0x2e0961-0x1e4;let _0x2df0fd=_0x401868[_0x2e0961];return _0x2df0fd;},_0x2e09(_0x472dc1,_0x56d36f);}function _0x4018(){const _0x1986fe=['db\x20could\x20not\x20add\x20msg','db\x20could\x20not\x20get\x20temp\x20uin\x20map','get','assign','93387AHBhvp','db\x20getMsgByLongId\x20error','set','37672jmszQM','记录消息到数据库,\x20消息长id:\x20','LJgyd','Database','LGKlF','db\x20could\x20not\x20add\x20temp\x20uin','msgId','Could\x20not\x20connect\x20to\x20database','ItovY','YagYp','194sLdEnl','stack','has','msgList','PDrpe','pWZEp','path','addFileCache','Xfoir','10DZgycY','name','dViWO','toString','updateFileCache','msgCache','rAlrV','fuWpo','hiDOH','yOPJu','KzReG','Could\x20not\x20create\x20table\x20files','getFileCacheByUuid','UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?','TJYmr','清理消息缓存','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?','DljFj','198qVUOrX','TmDcj','JQGra','db\x20could\x20not\x20get\x20file\x20cache','msgSeq','XSnvL','RfOAc','maxId','urrnc','zTDdP','2qlWPtR','vlOWI','QLKFN','forEach','getMsgByShortId','vMvtE','now','Could\x20not\x20get\x20msg','elementType','EgXzM','Could\x20not\x20create\x20table\x20temp_uins','mplre','lASuh','shortId','135516nvyigr','addMsg','ytRHL','uuid','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','AVxpI','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','OPEN_CREATE','SMUyj','UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?','9710egtqVn','EysaA','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?','77LfFfTo','CBCRW','AYiVe','SELECT\x20*\x20FROM\x20temp_uins','getMsgByLongId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','db\x20could\x20not\x20add\x20file','SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?','getCurrentMaxShortId','更新消息,\x20shortId:','KJooC','Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','updateMsg','624033AilKtd','BYHFv','edVzo','getFileCache','close','globalMsgShortId','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','jBBBr','addTempUin','PBnWD','createTable','uin','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','RqYoo','cDyGp','element','OPEN_READWRITE','getMsg','elementId','JbgXX','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','getMsgBySeq','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','url','vNuor','KZTee','catch','Rhydq','delete','stringify','cyIrZ','db\x20could\x20not\x20update\x20file\x20cache','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','1771121FuCiRf','AZodF','YYVbJ','MlrNZ','INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','updateMsg\x20db\x20error','run','getMsgsByMsgId','parse','chatType','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?',',\x20短id:\x20','getFileCacheByName','ZBinh','peerUid','uid','prepare','then','init','GumrH',',\x20seq:\x20'];_0x4018=function(){return _0x1986fe;};return _0x4018();}import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async['init'](_0x218ada){const _0x2bab6a=_0x2e09,_0x2402e1={'TOniV':function(_0x55b7d6,_0x2a8868,_0x58806c){return _0x55b7d6(_0x2a8868,_0x58806c);},'ytRHL':_0x2bab6a(0x21b)};if(this['db'])return;return new Promise((_0x418dad,_0x6b0c83)=>{const _0x4ef8c4=_0x2bab6a,_0x35bdd4={'cDyGp':function(_0x4d9543,_0x1cdb0f,_0x2b255a){return _0x2402e1['TOniV'](_0x4d9543,_0x1cdb0f,_0x2b255a);},'JbgXX':_0x2402e1[_0x4ef8c4(0x253)],'BYHFv':function(_0x26d0bc){return _0x26d0bc();}};this['db']=new _0x12df7c[(_0x4ef8c4(0x217))](_0x218ada,_0x12df7c[_0x4ef8c4(0x1e7)]|_0x12df7c[_0x4ef8c4(0x258)],_0x3b075c=>{const _0x143301=_0x4ef8c4;if(_0x3b075c){_0x35bdd4[_0x143301(0x1e5)](logError,_0x35bdd4[_0x143301(0x1ea)],_0x3b075c),_0x6b0c83(_0x3b075c);return;}this[_0x143301(0x275)](),_0x35bdd4[_0x143301(0x26c)](_0x418dad);});});}[_0x598d57(0x275)](){throw new Error('Method\x20not\x20implemented.');}[_0x598d57(0x26f)](){const _0x1061da=_0x598d57;this['db']?.[_0x1061da(0x26f)]();}}class DBUtil extends DBUtilBase{['msgCache']=new Map();[_0x598d57(0x270)]=-0x7ffffff8;constructor(){const _0x3b3458=_0x598d57,_0xb53d05={'QLKFN':function(_0x2b8873,_0x3e9e4c){return _0x2b8873*_0x3e9e4c;},'qqrpD':function(_0x49a813,_0x2b31b6){return _0x49a813(_0x2b31b6);},'MvnXB':_0x3b3458(0x236),'LJgyd':function(_0x23895a,_0x4bee03,_0x1d15b9){return _0x23895a(_0x4bee03,_0x1d15b9);}};super();const _0x491cd6=_0xb53d05[_0x3b3458(0x245)](0x3e8*0x3c,0xa);_0xb53d05[_0x3b3458(0x216)](setInterval,()=>{const _0x40c450=_0x3b3458,_0x5b28b3={'eZfcS':function(_0x94c6a1,_0x370c54){return _0x94c6a1>_0x370c54;},'KJooC':function(_0x9a8682,_0x172afe){const _0x4df20b=_0x2e09;return _0xb53d05[_0x4df20b(0x245)](_0x9a8682,_0x172afe);}};_0xb53d05['qqrpD'](logDebug,_0xb53d05['MvnXB']),this[_0x40c450(0x22c)][_0x40c450(0x246)]((_0x561722,_0x22aa03)=>{const _0x16ae56=_0x40c450;_0x5b28b3['eZfcS'](Date[_0x16ae56(0x249)]()-_0x5b28b3[_0x16ae56(0x268)](parseInt(_0x561722['msgTime']),0x3e8),_0x491cd6)&&this['msgCache'][_0x16ae56(0x1f3)](_0x22aa03);});},_0x491cd6);}async[_0x598d57(0x20a)](_0x1fe490){const _0x4f2482=_0x598d57;await super[_0x4f2482(0x20a)](_0x1fe490),this[_0x4f2482(0x270)]=await this[_0x4f2482(0x266)]();}['createTable'](){const _0x2cf407=_0x598d57,_0x214422={'LGKlF':function(_0x5566a7,_0x695c85,_0x28fcfb){return _0x5566a7(_0x695c85,_0x28fcfb);},'mplre':function(_0x1fa8d9,_0x2e3e25,_0x21d79a){return _0x1fa8d9(_0x2e3e25,_0x21d79a);},'AYiVe':_0x2cf407(0x232),'fuWpo':_0x2cf407(0x24d)},_0x3a593c=_0x2cf407(0x257);this['db'][_0x2cf407(0x1fe)](_0x3a593c,function(_0xcea844){const _0x1c08c0=_0x2cf407;_0xcea844&&_0x214422[_0x1c08c0(0x218)](logError,'Could\x20not\x20create\x20table\x20msgs',_0xcea844[_0x1c08c0(0x21f)]);});const _0x3cb1ce=_0x2cf407(0x263);this['db'][_0x2cf407(0x1fe)](_0x3cb1ce,function(_0x5cef74){const _0x36c32d=_0x2cf407;_0x5cef74&&_0x214422['mplre'](logError,_0x214422[_0x36c32d(0x260)],_0x5cef74);});const _0xfd902b=_0x2cf407(0x1f7);this['db'][_0x2cf407(0x1fe)](_0xfd902b,function(_0x5c18df){const _0x11d4f0=_0x2cf407;_0x5c18df&&_0x214422[_0x11d4f0(0x24e)](logError,_0x214422[_0x11d4f0(0x22e)],_0x5c18df);});}async[_0x598d57(0x266)](){const _0x17bddb=_0x598d57,_0x942d08={'Rhydq':function(_0x52aa7d,_0x5d1561,_0xa7a0bc){return _0x52aa7d(_0x5d1561,_0xa7a0bc);},'JiWbS':_0x17bddb(0x269),'Xfoir':'数据库中消息最大短id','DljFj':function(_0x5bad40,_0x5f3abe){return _0x5bad40(_0x5f3abe);},'XZIMO':_0x17bddb(0x255)};return new Promise((_0x5f0b91,_0x5a13aa)=>{this['db']['get'](_0x942d08['XZIMO'],(_0xf1e111,_0x2a52e6)=>{const _0xacfab=_0x2e09;if(_0xf1e111)return _0x942d08[_0xacfab(0x1f2)](logDebug,_0x942d08['JiWbS'],_0xf1e111),_0x5f0b91(-0x7ffffff8);logDebug(_0x942d08[_0xacfab(0x226)],_0x2a52e6?.[_0xacfab(0x240)]),_0x942d08[_0xacfab(0x238)](_0x5f0b91,_0x2a52e6?.['maxId']??-0x7ffffff8);});});}async[_0x598d57(0x1e8)](_0x3686a2,_0x299737){const _0x33788b=_0x598d57,_0x266d06={'cyIrZ':function(_0x1baea4,_0xd58a75){return _0x1baea4(_0xd58a75);},'dViWO':function(_0x15537d,_0x11218d,_0xc81d92,_0x726db5,_0x3c283f){return _0x15537d(_0x11218d,_0xc81d92,_0x726db5,_0x3c283f);},'qZJvX':_0x33788b(0x24a)},_0x59d90e=this['db'][_0x33788b(0x208)](_0x3686a2);return new Promise((_0x2f2e9b,_0x36917c)=>{const _0x24c5e8=_0x33788b,_0x381115={'TJYmr':function(_0x17ebd7,_0x597a76){const _0x450b14=_0x2e09;return _0x266d06[_0x450b14(0x1f5)](_0x17ebd7,_0x597a76);},'KzReG':function(_0x47f9fd,_0x5bdfcb,_0x1982b9,_0x2b2a4f,_0xd81bf2){const _0x2fb94a=_0x2e09;return _0x266d06[_0x2fb94a(0x229)](_0x47f9fd,_0x5bdfcb,_0x1982b9,_0x2b2a4f,_0xd81bf2);},'RfOAc':_0x266d06['qZJvX'],'vlOWI':function(_0x4f927e,_0x5f2f74){return _0x266d06['cyIrZ'](_0x4f927e,_0x5f2f74);}};_0x59d90e[_0x24c5e8(0x20f)](..._0x299737,(_0x5a2f7f,_0x55c0f6)=>{const _0x2ef2fd=_0x24c5e8,_0x1c1d73={'YagYp':function(_0x3245f5,_0x270cd4){const _0x15904d=_0x2e09;return _0x381115[_0x15904d(0x235)](_0x3245f5,_0x270cd4);}};if(_0x5a2f7f)return _0x381115[_0x2ef2fd(0x231)](logError,_0x381115[_0x2ef2fd(0x23f)],_0x5a2f7f,_0x3686a2,_0x299737),_0x381115[_0x2ef2fd(0x244)](_0x2f2e9b,null);if(!_0x55c0f6){_0x381115['vlOWI'](_0x2f2e9b,null);return;}const _0x348dbe=_0x55c0f6['longId'];NTQQMsgApi[_0x2ef2fd(0x1ff)]({'peerUid':_0x55c0f6[_0x2ef2fd(0x206)],'chatType':_0x55c0f6[_0x2ef2fd(0x201)]},[_0x348dbe])[_0x2ef2fd(0x209)](_0x4a95e4=>{const _0x3aeb63=_0x2ef2fd,_0x255bd0=_0x4a95e4[_0x3aeb63(0x221)][0x0];if(!_0x255bd0){_0x381115[_0x3aeb63(0x235)](_0x2f2e9b,null);return;}_0x255bd0['id']=_0x55c0f6[_0x3aeb63(0x250)],_0x381115['TJYmr'](_0x2f2e9b,_0x255bd0);})[_0x2ef2fd(0x1f1)](_0xaea230=>{const _0x27767d=_0x2ef2fd;_0x1c1d73[_0x27767d(0x21d)](_0x2f2e9b,null);});});});}async[_0x598d57(0x247)](_0x1ce525){const _0x3d0281=_0x598d57,_0x19df22={'urrnc':_0x3d0281(0x1eb)};if(this[_0x3d0281(0x22c)][_0x3d0281(0x220)](_0x1ce525))return this[_0x3d0281(0x22c)]['get'](_0x1ce525);const _0x401e2=_0x19df22[_0x3d0281(0x241)];return this['getMsg'](_0x401e2,[_0x1ce525]);}async[_0x598d57(0x262)](_0x5a0aff){const _0x4e8c87=_0x598d57,_0x53e016={'hiDOH':_0x4e8c87(0x25d)};if(this['msgCache']['has'](_0x5a0aff))return this[_0x4e8c87(0x22c)]['get'](_0x5a0aff);return this[_0x4e8c87(0x1e8)](_0x53e016[_0x4e8c87(0x22f)],[_0x5a0aff]);}async[_0x598d57(0x1ec)](_0x1d7650,_0x9a42d2){const _0x25901e=_0x598d57,_0x4889dc={'XSnvL':_0x25901e(0x237)},_0x5c16fc=_0x4889dc[_0x25901e(0x23e)];return this[_0x25901e(0x1e8)](_0x5c16fc,[_0x1d7650,_0x9a42d2]);}async[_0x598d57(0x252)](_0x5c6d34,_0xce38e=!![]){const _0x589b8d=_0x598d57,_0x28d483={'MlrNZ':function(_0x3179f1,_0x11afce,_0xe3903f){return _0x3179f1(_0x11afce,_0xe3903f);},'rNGVb':function(_0x465de9,_0x595cee){return _0x465de9===_0x595cee;},'AZodF':_0x589b8d(0x1fc),'jBBBr':function(_0x643d59,_0x56bb36){return _0x643d59(_0x56bb36);}},_0x55f755=await this[_0x589b8d(0x262)](_0x5c6d34[_0x589b8d(0x21a)]);if(_0x55f755){if(_0xce38e)this[_0x589b8d(0x26a)](_0x5c6d34)[_0x589b8d(0x209)]();return _0x55f755['id'];}const _0xc6d832=this['db']['prepare'](_0x28d483[_0x589b8d(0x1f9)]),_0x1305d0=++this[_0x589b8d(0x270)];return _0x5c6d34['id']=_0x1305d0,_0x28d483[_0x589b8d(0x272)](logDebug,_0x589b8d(0x215)+_0x5c6d34[_0x589b8d(0x21a)]+_0x589b8d(0x203)+_0x5c6d34['id']),this[_0x589b8d(0x22c)][_0x589b8d(0x213)](_0x1305d0,_0x5c6d34),this[_0x589b8d(0x22c)]['set'](_0x5c6d34[_0x589b8d(0x21a)],_0x5c6d34),_0xc6d832[_0x589b8d(0x1fe)](this['globalMsgShortId'],_0x5c6d34[_0x589b8d(0x21a)],_0x5c6d34[_0x589b8d(0x23d)][_0x589b8d(0x22a)](),_0x5c6d34['peerUid'],_0x5c6d34[_0x589b8d(0x201)],_0x1bd8e4=>{const _0x5ad69d=_0x589b8d;_0x1bd8e4&&(_0x28d483['rNGVb'](_0x1bd8e4['errno'],0x13)?this[_0x5ad69d(0x262)](_0x5c6d34[_0x5ad69d(0x21a)])['then'](_0x46aadb=>{const _0x3f8178=_0x5ad69d;_0x46aadb?(this['msgCache']['set'](_0x1305d0,_0x46aadb),this[_0x3f8178(0x22c)][_0x3f8178(0x213)](_0x46aadb['msgId'],_0x46aadb)):_0x28d483[_0x3f8178(0x1fb)](logError,_0x3f8178(0x271),_0x1bd8e4);})[_0x5ad69d(0x1f1)](_0x30e829=>logError(_0x5ad69d(0x212),_0x30e829)):logError(_0x5ad69d(0x20d),_0x1bd8e4));}),_0x1305d0;}async[_0x598d57(0x26a)](_0x40ea32){const _0x5a2cd9=_0x598d57,_0x52dd91={'pWZEp':function(_0x5a3454,_0x2da02c,_0xe76b95){return _0x5a3454(_0x2da02c,_0xe76b95);},'LDQWL':function(_0x29f852,_0x1f1f34){return _0x29f852(_0x1f1f34);},'rAlrV':_0x5a2cd9(0x25a)},_0x1e6d9d=this['msgCache'][_0x5a2cd9(0x20f)](_0x40ea32[_0x5a2cd9(0x21a)]);_0x1e6d9d&&Object[_0x5a2cd9(0x210)](_0x1e6d9d,_0x40ea32);_0x52dd91['LDQWL'](logDebug,_0x5a2cd9(0x267)+_0x40ea32['id']+_0x5a2cd9(0x20c)+_0x40ea32['msgSeq']+',\x20msgId:\x20'+_0x40ea32[_0x5a2cd9(0x21a)]);const _0x4b6925=this['db'][_0x5a2cd9(0x208)](_0x52dd91[_0x5a2cd9(0x22d)]);_0x4b6925[_0x5a2cd9(0x1fe)](_0x40ea32[_0x5a2cd9(0x23d)],_0x40ea32['msgId'],_0x1e85bd=>{const _0x54a849=_0x5a2cd9;_0x1e85bd&&_0x52dd91[_0x54a849(0x223)](logError,_0x54a849(0x1fd),_0x1e85bd);});}async[_0x598d57(0x225)](_0x3a5344){const _0x1592b9=_0x598d57,_0x2e83a6={'KmUlD':_0x1592b9(0x264),'RqYoo':function(_0x2c51bf,_0x5ce213){return _0x2c51bf(_0x5ce213);},'YSXQL':function(_0x51498c,_0x52d5ac){return _0x51498c(_0x52d5ac);},'lASuh':_0x1592b9(0x1ed)},_0x192a47=this['db']['prepare'](_0x2e83a6[_0x1592b9(0x24f)]);return new Promise((_0x3b9476,_0x4c0b52)=>{const _0x123ebb=_0x1592b9;_0x192a47[_0x123ebb(0x1fe)](_0x3a5344[_0x123ebb(0x228)],_0x3a5344['path'],_0x3a5344[_0x123ebb(0x1ee)],_0x3a5344['size'],_0x3a5344[_0x123ebb(0x254)],_0x3a5344[_0x123ebb(0x24b)],JSON[_0x123ebb(0x1f4)](_0x3a5344[_0x123ebb(0x1e6)]),_0x3a5344[_0x123ebb(0x1e9)],_0x3a5344[_0x123ebb(0x21a)],function(_0x262277){const _0x47d8cb=_0x123ebb;_0x262277&&(logError(_0x2e83a6['KmUlD'],_0x262277),_0x2e83a6[_0x47d8cb(0x1e4)](_0x4c0b52,_0x262277)),_0x2e83a6['YSXQL'](_0x3b9476,null);});});}async[_0x598d57(0x26e)](_0x3a71f0,_0x452d10){const _0xe3b7c2=_0x598d57,_0x36e94d={'zTDdP':function(_0x526b38,_0x54738a,_0x22f2de){return _0x526b38(_0x54738a,_0x22f2de);},'PDrpe':function(_0x9ccf97,_0x49d08b){return _0x9ccf97(_0x49d08b);},'edVzo':function(_0x285aff,_0x90264e){return _0x285aff(_0x90264e);}},_0x32ff64=this['db'][_0xe3b7c2(0x208)](_0x3a71f0);return new Promise((_0x305b01,_0x58d751)=>{const _0x15c070=_0xe3b7c2;_0x32ff64[_0x15c070(0x20f)](..._0x452d10,(_0x644349,_0x3ce660)=>{const _0x149536=_0x15c070;_0x644349&&(_0x36e94d[_0x149536(0x242)](logError,_0x149536(0x23c),_0x644349),_0x36e94d[_0x149536(0x222)](_0x58d751,_0x644349)),_0x3ce660&&(_0x3ce660['element']=JSON[_0x149536(0x200)](_0x3ce660[_0x149536(0x1e6)])),_0x36e94d[_0x149536(0x26d)](_0x305b01,_0x3ce660);});});}async[_0x598d57(0x204)](_0x431ea4){const _0x534e99=_0x598d57;return this[_0x534e99(0x26e)](_0x534e99(0x277),[_0x431ea4]);}async[_0x598d57(0x233)](_0x1fa8b5){const _0x22bc98=_0x598d57,_0x21158b={'pTuCc':_0x22bc98(0x265)};return this[_0x22bc98(0x26e)](_0x21158b['pTuCc'],[_0x1fa8b5]);}async[_0x598d57(0x22b)](_0x6fbb85){const _0x316f0e=_0x598d57,_0x3e530b={'YYVbJ':function(_0x39d38c,_0x421a5f,_0x12bfd9){return _0x39d38c(_0x421a5f,_0x12bfd9);},'SMUyj':function(_0x5b6dc3,_0x4a71c7){return _0x5b6dc3(_0x4a71c7);},'vMvtE':_0x316f0e(0x234)},_0x5a80ab=this['db'][_0x316f0e(0x208)](_0x3e530b[_0x316f0e(0x248)]);return new Promise((_0x7b5a58,_0x2818c2)=>{const _0x5324d5=_0x316f0e,_0x293303={'PBnWD':function(_0x31ad84,_0x61cd9e,_0xc4f8a7){const _0x3c8b0f=_0x2e09;return _0x3e530b[_0x3c8b0f(0x1fa)](_0x31ad84,_0x61cd9e,_0xc4f8a7);},'ItovY':function(_0x2bb47c,_0x1d4ac4){return _0x3e530b['SMUyj'](_0x2bb47c,_0x1d4ac4);},'CBCRW':function(_0x1428c0,_0x546601){const _0x5cf46d=_0x2e09;return _0x3e530b[_0x5cf46d(0x259)](_0x1428c0,_0x546601);}};_0x5a80ab[_0x5324d5(0x1fe)](_0x6fbb85[_0x5324d5(0x224)],_0x6fbb85[_0x5324d5(0x1ee)],_0x6fbb85[_0x5324d5(0x254)],function(_0x3f0573){const _0x32fbbe=_0x5324d5;_0x3f0573&&(_0x293303[_0x32fbbe(0x274)](logError,_0x32fbbe(0x1f6),_0x3f0573),_0x293303[_0x32fbbe(0x21c)](_0x2818c2,_0x3f0573)),_0x293303[_0x32fbbe(0x25f)](_0x7b5a58,null);});});}async['getReceivedTempUinMap'](){const _0x503462=_0x598d57,_0x1d8cf5={'lHQGV':function(_0x3d0b3c,_0x40b532,_0x3e266f){return _0x3d0b3c(_0x40b532,_0x3e266f);},'TmDcj':'db\x20could\x20not\x20get\x20temp\x20uin\x20map','AVxpI':_0x503462(0x261)},_0x35daeb=_0x1d8cf5[_0x503462(0x256)];return new Promise((_0x2b8c94,_0x17d709)=>{const _0x2ccd0a=_0x503462,_0x1130d4={'KZTee':function(_0x2362da,_0x4d6b49,_0x36db0f){return _0x1d8cf5['lHQGV'](_0x2362da,_0x4d6b49,_0x36db0f);},'GumrH':_0x1d8cf5[_0x2ccd0a(0x23a)],'EgXzM':function(_0x302ae1,_0x19ca63){return _0x302ae1(_0x19ca63);}};this['db']['all'](_0x35daeb,(_0x52ded3,_0x1ef0df)=>{const _0x171886=_0x2ccd0a;_0x52ded3&&(_0x1130d4[_0x171886(0x1f0)](logError,_0x1130d4[_0x171886(0x20b)],_0x52ded3),_0x1130d4[_0x171886(0x24c)](_0x17d709,_0x52ded3));const _0xacab5a={};_0x1ef0df[_0x171886(0x246)](_0x59a898=>{const _0x14e34c=_0x171886;_0xacab5a[_0x59a898[_0x14e34c(0x276)]]=_0x59a898[_0x14e34c(0x207)];}),_0x2b8c94(_0xacab5a);});});}async['getUidByTempUin'](_0x51c5bc){const _0x51626a=_0x598d57,_0x34104b={'JQGra':function(_0x4be5d2,_0x217167,_0x1dcde2){return _0x4be5d2(_0x217167,_0x1dcde2);},'EysaA':_0x51626a(0x20e),'ZBinh':function(_0x7333fe,_0x31334e){return _0x7333fe(_0x31334e);},'vNuor':_0x51626a(0x202)},_0x583f0c=_0x34104b[_0x51626a(0x1ef)];return new Promise((_0x1012d9,_0x5713f1)=>{this['db']['get'](_0x583f0c,[_0x51c5bc],(_0x25cd82,_0x167e98)=>{const _0x3a1341=_0x2e09;_0x25cd82&&(_0x34104b[_0x3a1341(0x23b)](logError,_0x34104b[_0x3a1341(0x25c)],_0x25cd82),_0x34104b[_0x3a1341(0x205)](_0x5713f1,_0x25cd82)),_0x34104b[_0x3a1341(0x205)](_0x1012d9,_0x167e98?.[_0x3a1341(0x207)]);});});}async[_0x598d57(0x273)](_0x3b92bb,_0x53863a){const _0x200862={'HpOUg':function(_0x3d45e9,_0x25688d,_0x439c3b){return _0x3d45e9(_0x25688d,_0x439c3b);}},_0xfc901c=await this['getUidByTempUin'](_0x3b92bb);if(!_0xfc901c){const _0x56f770=this['db']['prepare']('INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)');return new Promise((_0x3eb9b4,_0x515367)=>{const _0x58a8e0=_0x2e09,_0x11803c={'yOPJu':function(_0x48aaf9,_0x1cd8bd,_0x87eadc){return _0x200862['HpOUg'](_0x48aaf9,_0x1cd8bd,_0x87eadc);}};_0x56f770[_0x58a8e0(0x1fe)](_0x3b92bb,_0x53863a,function(_0x2e9b32){const _0x430849=_0x58a8e0;_0x2e9b32&&(_0x11803c[_0x430849(0x230)](logError,_0x430849(0x219),_0x2e9b32),_0x515367(_0x2e9b32)),_0x3eb9b4(null);});});}}}export const dbUtil=new DBUtil();