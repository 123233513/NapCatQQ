function _0x1940(){const _0x259b56=['1287816EXpDWM','getMsgBySeq','getFileCache','uid','msgCache','longId','sewGi','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','umEzl','addFileCache','jbcoo','errno','ONezX','UYNCc','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','Zbaqa','UQMIC','now','get','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?','plhFx','Could\x20not\x20create\x20table\x20temp_uins','FWPDS','elementId','ArBoY','Could\x20not\x20connect\x20to\x20database',',\x20seq:\x20','GMEqf','KgyJE','525879kTHVoy',',\x20msgId:\x20','globalMsgShortId','tybYf','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','FRTKI','db\x20could\x20not\x20get\x20temp\x20uin\x20map','path','element','createTable','db\x20could\x20not\x20add\x20file','getCurrentMaxShortId','NBoyp','更新消息,\x20shortId:','53809BhjCTi','TsJfW','Nmndu','url','aOMpU','AmYsH','记录消息到数据库,\x20消息长id:\x20','msgId','getMsgsByMsgId','513405qUYVos','清理消息缓存','init','HUubb','epNbg','LdoIR','MwdHb','2TxvKep','name','aTCPl','860192hEhoQD','has','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?','HjfGd','elementType','chatType','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','getMsg','forEach','updateMsg\x20db\x20error','ghJTV','db\x20could\x20not\x20add\x20msg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','then','cbnPI','IEPLD','70YSpauN','catch','db\x20getMsgByLongId\x20error','getMsgByShortId','getFileCacheByUuid','lRzXY','Could\x20not\x20create\x20table\x20files','close','run','getReceivedTempUinMap','oNdca','215709NshPEH','stringify','SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?','aYMWU','xDiUl','zTfSN','set','BBqGm','all','getFileCacheByName','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','uin','prepare','758090tjEJeD','msgSeq','addMsg','zrVCl','hFLrr','vIGYf','wSZJK','uRIoz','delete','150kjvfjY','SgRjj','db\x20could\x20not\x20update\x20file\x20cache','RivYT','maxId','JnFCX','size','数据库中消息最大短id','getMsgByLongId','NhVQv','PpxfV',',\x20短id:\x20','Database','toString','znaWH','Could\x20not\x20create\x20table\x20msgs','NYelT','Method\x20not\x20implemented.'];_0x1940=function(){return _0x259b56;};return _0x1940();}const _0x44c136=_0x16e5;(function(_0x170ef5,_0x3d704b){const _0x4a2a53=_0x16e5,_0x231b4e=_0x170ef5();while(!![]){try{const _0x1a4858=parseInt(_0x4a2a53(0xf8))/0x1+parseInt(_0x4a2a53(0xda))/0x2*(-parseInt(_0x4a2a53(0xbc))/0x3)+parseInt(_0x4a2a53(0xdd))/0x4+-parseInt(_0x4a2a53(0x105))/0x5+-parseInt(_0x4a2a53(0x10e))/0x6*(parseInt(_0x4a2a53(0xca))/0x7)+-parseInt(_0x4a2a53(0x9f))/0x8+-parseInt(_0x4a2a53(0xd3))/0x9*(-parseInt(_0x4a2a53(0xed))/0xa);if(_0x1a4858===_0x3d704b)break;else _0x231b4e['push'](_0x231b4e['shift']());}catch(_0x31965e){_0x231b4e['push'](_0x231b4e['shift']());}}}(_0x1940,0x249f9));import _0x54c40d from'sqlite3';function _0x16e5(_0x199735,_0x37cc32){const _0x1940b6=_0x1940();return _0x16e5=function(_0x16e55c,_0x4bd6e7){_0x16e55c=_0x16e55c-0x8e;let _0x37cc88=_0x1940b6[_0x16e55c];return _0x37cc88;},_0x16e5(_0x199735,_0x37cc32);}import{logDebug,logError}from'@/common/utils/log';import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async[_0x44c136(0xd5)](_0x11c056){const _0x4428d2=_0x44c136,_0x3fffcc={'JnFCX':function(_0x8ee2c5,_0x46d3f6,_0xbbde44){return _0x8ee2c5(_0x46d3f6,_0xbbde44);},'rSiXO':_0x4428d2(0xb8),'noTNd':function(_0xcf784a){return _0xcf784a();},'epNbg':function(_0x29b3dc,_0x29e417){return _0x29b3dc|_0x29e417;}};if(this['db'])return;return new Promise((_0x22ec0d,_0x4e51de)=>{const _0x3eb7a5=_0x4428d2,_0x285c2f={'cfltY':function(_0x562002,_0x47fef3,_0x3f5e3d){const _0x1c78e8=_0x16e5;return _0x3fffcc[_0x1c78e8(0x92)](_0x562002,_0x47fef3,_0x3f5e3d);},'LdoIR':_0x3fffcc['rSiXO'],'UYNCc':function(_0x5c67b5){return _0x3fffcc['noTNd'](_0x5c67b5);}};this['db']=new _0x54c40d[(_0x3eb7a5(0x99))](_0x11c056,_0x3fffcc[_0x3eb7a5(0xd7)](_0x54c40d['OPEN_READWRITE'],_0x54c40d['OPEN_CREATE']),_0x349ca4=>{const _0x31d8c9=_0x3eb7a5;if(_0x349ca4){_0x285c2f['cfltY'](logError,_0x285c2f[_0x31d8c9(0xd8)],_0x349ca4),_0x4e51de(_0x349ca4);return;}this[_0x31d8c9(0xc5)](),_0x285c2f[_0x31d8c9(0xac)](_0x22ec0d);});});}[_0x44c136(0xc5)](){const _0x21f699=_0x44c136;throw new Error(_0x21f699(0x9e));}[_0x44c136(0xf4)](){const _0x32eecd=_0x44c136;this['db']?.[_0x32eecd(0xf4)]();}}class DBUtil extends DBUtilBase{['msgCache']=new Map();[_0x44c136(0xbe)]=-0x7ffffff8;constructor(){const _0x2c4d76=_0x44c136,_0x347aad={'oNdca':function(_0x3a8948,_0xe92e36){return _0x3a8948>_0xe92e36;},'rhWqS':function(_0x4aa72e,_0x4926b9){return _0x4aa72e-_0x4926b9;},'TsJfW':function(_0x5a3e28,_0x39f68d){return _0x5a3e28(_0x39f68d);},'IEPLD':function(_0x433a34,_0x1f3265){return _0x433a34*_0x1f3265;},'xDiUl':function(_0x192ed7,_0x3af3bf){return _0x192ed7*_0x3af3bf;},'BBqGm':function(_0x3a3d7e,_0x22cc72,_0x145f96){return _0x3a3d7e(_0x22cc72,_0x145f96);}};super();const _0x1442f3=_0x347aad[_0x2c4d76(0xec)](_0x347aad[_0x2c4d76(0xfc)](0x3e8,0x3c),0xa);_0x347aad[_0x2c4d76(0xff)](setInterval,()=>{const _0x1e8b03=_0x2c4d76;_0x347aad[_0x1e8b03(0xcb)](logDebug,_0x1e8b03(0xd4)),this[_0x1e8b03(0xa3)][_0x1e8b03(0xe5)]((_0x301819,_0x6fdb0b)=>{const _0x2c3301=_0x1e8b03;_0x347aad[_0x2c3301(0xf7)](_0x347aad['rhWqS'](Date[_0x2c3301(0xb0)](),_0x347aad[_0x2c3301(0xcb)](parseInt,_0x301819['msgTime'])*0x3e8),_0x1442f3)&&this[_0x2c3301(0xa3)][_0x2c3301(0x10d)](_0x6fdb0b);});},_0x1442f3);}async[_0x44c136(0xd5)](_0x561468){await super['init'](_0x561468),this['globalMsgShortId']=await this['getCurrentMaxShortId']();}['createTable'](){const _0x1e4eb9=_0x44c136,_0x29ad4c={'wSZJK':function(_0x2ad59a,_0x5b63ce,_0x3cd6bc){return _0x2ad59a(_0x5b63ce,_0x3cd6bc);},'aOMpU':_0x1e4eb9(0xf3),'cbnPI':function(_0x2b532b,_0x250ef6,_0x34caf6){return _0x2b532b(_0x250ef6,_0x34caf6);},'HjfGd':_0x1e4eb9(0xb4)},_0x271b76=_0x1e4eb9(0xe3);this['db']['run'](_0x271b76,function(_0xabe3d){const _0x442afb=_0x1e4eb9;_0xabe3d&&logError(_0x442afb(0x9c),_0xabe3d['stack']);});const _0x2610b3=_0x1e4eb9(0xa6);this['db'][_0x1e4eb9(0xf5)](_0x2610b3,function(_0x1d3381){const _0x17e62b=_0x1e4eb9;_0x1d3381&&_0x29ad4c[_0x17e62b(0x10b)](logError,_0x29ad4c[_0x17e62b(0xce)],_0x1d3381);});const _0x2764c0=_0x1e4eb9(0xe9);this['db']['run'](_0x2764c0,function(_0x350770){const _0x3e8379=_0x1e4eb9;_0x350770&&_0x29ad4c[_0x3e8379(0xeb)](logError,_0x29ad4c[_0x3e8379(0xe0)],_0x350770);});}async[_0x44c136(0xc7)](){const _0x299cb7=_0x44c136,_0x16600d={'tybYf':_0x299cb7(0x94)};return new Promise((_0x1104ec,_0xbc6bff)=>{const _0x40595a=_0x299cb7,_0x2036ee={'sewGi':'Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','jbcoo':function(_0x561ed4,_0x2e1b87){return _0x561ed4(_0x2e1b87);},'bTegi':_0x16600d[_0x40595a(0xbf)]};this['db']['get'](_0x40595a(0xad),(_0x2e9e0c,_0x383a11)=>{const _0x5d135d=_0x40595a;if(_0x2e9e0c)return logDebug(_0x2036ee[_0x5d135d(0xa5)],_0x2e9e0c),_0x2036ee[_0x5d135d(0xa9)](_0x1104ec,-0x7ffffff8);logDebug(_0x2036ee['bTegi'],_0x383a11?.[_0x5d135d(0x91)]),_0x2036ee[_0x5d135d(0xa9)](_0x1104ec,_0x383a11?.[_0x5d135d(0x91)]??-0x7ffffff8);});});}async['getMsg'](_0x1fa4e8,_0x14b408){const _0xe4b407=_0x44c136,_0x3fcf30={'KsNNe':function(_0x1d7990,_0x18ec19,_0x4d304a,_0x305394,_0x71987b){return _0x1d7990(_0x18ec19,_0x4d304a,_0x305394,_0x71987b);},'ghJTV':function(_0x1feefb,_0x2ac1ed){return _0x1feefb(_0x2ac1ed);},'rhVXq':function(_0x5068d0,_0x1220fb){return _0x5068d0(_0x1220fb);}},_0x43eb99=this['db'][_0xe4b407(0x104)](_0x1fa4e8);return new Promise((_0x1933b4,_0x4c7aca)=>{const _0x31305c=_0xe4b407;_0x43eb99[_0x31305c(0xb1)](..._0x14b408,(_0x49546b,_0x3565a6)=>{const _0x119bc0=_0x31305c,_0x23c309={'SgRjj':function(_0x5680b9,_0x95e1e8){return _0x5680b9(_0x95e1e8);}};if(_0x49546b)return _0x3fcf30['KsNNe'](logError,'Could\x20not\x20get\x20msg',_0x49546b,_0x1fa4e8,_0x14b408),_0x3fcf30[_0x119bc0(0xe7)](_0x1933b4,null);if(!_0x3565a6){_0x3fcf30['rhVXq'](_0x1933b4,null);return;}const _0x3ff7f6=_0x3565a6[_0x119bc0(0xa4)];NTQQMsgApi[_0x119bc0(0xd2)]({'peerUid':_0x3565a6['peerUid'],'chatType':_0x3565a6[_0x119bc0(0xe2)]},[_0x3ff7f6])[_0x119bc0(0xea)](_0x1d13c6=>{const _0x1bfd81=_0x119bc0,_0x48757d=_0x1d13c6['msgList'][0x0];if(!_0x48757d){_0x1933b4(null);return;}_0x48757d['id']=_0x3565a6['shortId'],_0x23c309[_0x1bfd81(0x8e)](_0x1933b4,_0x48757d);})['catch'](_0xbaba76=>{_0x1933b4(null);});});});}async[_0x44c136(0xf0)](_0x2063bc){const _0x141e14=_0x44c136,_0x4d7291={'lRzXY':'SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?'};if(this['msgCache'][_0x141e14(0xde)](_0x2063bc))return this[_0x141e14(0xa3)]['get'](_0x2063bc);const _0x34696a=_0x4d7291[_0x141e14(0xf2)];return this['getMsg'](_0x34696a,[_0x2063bc]);}async[_0x44c136(0x95)](_0x28aff5){const _0x13cf40=_0x44c136,_0x4ac3d9={'KgyJE':_0x13cf40(0xb2)};if(this['msgCache'][_0x13cf40(0xde)](_0x28aff5))return this[_0x13cf40(0xa3)][_0x13cf40(0xb1)](_0x28aff5);return this[_0x13cf40(0xe4)](_0x4ac3d9[_0x13cf40(0xbb)],[_0x28aff5]);}async[_0x44c136(0xa0)](_0x137687,_0x146282){const _0x323b11=_0x44c136,_0x59f756={'XAgtp':_0x323b11(0xdf)},_0x38b26f=_0x59f756['XAgtp'];return this[_0x323b11(0xe4)](_0x38b26f,[_0x137687,_0x146282]);}async[_0x44c136(0x107)](_0x51b9eb,_0x4d2fc6=!![]){const _0x57652d=_0x44c136,_0x38d9b8={'Nmndu':_0x57652d(0xc0),'aYMWU':function(_0x5cf40f,_0x24448b){return _0x5cf40f===_0x24448b;},'vjXfp':function(_0x508fff,_0x3b01b0,_0x41c2eb){return _0x508fff(_0x3b01b0,_0x41c2eb);},'NYelT':_0x57652d(0xe8),'MwdHb':'INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)'},_0x30562c=await this[_0x57652d(0x95)](_0x51b9eb[_0x57652d(0xd1)]);if(_0x30562c){if(_0x4d2fc6)this['updateMsg'](_0x51b9eb)[_0x57652d(0xea)]();return _0x30562c['id'];}const _0xf836d9=this['db'][_0x57652d(0x104)](_0x38d9b8[_0x57652d(0xd9)]),_0xb0a3fd=++this[_0x57652d(0xbe)];return _0x51b9eb['id']=_0xb0a3fd,logDebug(_0x57652d(0xd0)+_0x51b9eb['msgId']+_0x57652d(0x98)+_0x51b9eb['id']),this['msgCache'][_0x57652d(0xfe)](_0xb0a3fd,_0x51b9eb),this[_0x57652d(0xa3)][_0x57652d(0xfe)](_0x51b9eb[_0x57652d(0xd1)],_0x51b9eb),_0xf836d9[_0x57652d(0xf5)](this[_0x57652d(0xbe)],_0x51b9eb[_0x57652d(0xd1)],_0x51b9eb[_0x57652d(0x106)][_0x57652d(0x9a)](),_0x51b9eb['peerUid'],_0x51b9eb[_0x57652d(0xe2)],_0xe09bfb=>{const _0x3ee1d9=_0x57652d,_0x50afc3={'MyEDP':_0x38d9b8[_0x3ee1d9(0xcc)]};_0xe09bfb&&(_0x38d9b8[_0x3ee1d9(0xfb)](_0xe09bfb[_0x3ee1d9(0xaa)],0x13)?this[_0x3ee1d9(0x95)](_0x51b9eb[_0x3ee1d9(0xd1)])[_0x3ee1d9(0xea)](_0x247718=>{const _0x1a40d1=_0x3ee1d9;_0x247718?(this[_0x1a40d1(0xa3)][_0x1a40d1(0xfe)](_0xb0a3fd,_0x247718),this[_0x1a40d1(0xa3)][_0x1a40d1(0xfe)](_0x247718[_0x1a40d1(0xd1)],_0x247718)):logError(_0x50afc3['MyEDP'],_0xe09bfb);})[_0x3ee1d9(0xee)](_0x10efa4=>logError(_0x3ee1d9(0xef),_0x10efa4)):_0x38d9b8['vjXfp'](logError,_0x38d9b8[_0x3ee1d9(0x9d)],_0xe09bfb));}),_0xb0a3fd;}async['updateMsg'](_0x3deb68){const _0x396a6c=_0x44c136,_0x2b522f={'FRTKI':function(_0x4529bd,_0x55462d,_0x1f24f5){return _0x4529bd(_0x55462d,_0x1f24f5);},'vIGYf':_0x396a6c(0xe6),'ONezX':function(_0x4e1948,_0x21ef02){return _0x4e1948(_0x21ef02);},'aTCPl':'UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?'},_0x22aa37=this['msgCache'][_0x396a6c(0xb1)](_0x3deb68[_0x396a6c(0xd1)]);_0x22aa37&&Object['assign'](_0x22aa37,_0x3deb68);_0x2b522f[_0x396a6c(0xab)](logDebug,_0x396a6c(0xc9)+_0x3deb68['id']+_0x396a6c(0xb9)+_0x3deb68['msgSeq']+_0x396a6c(0xbd)+_0x3deb68[_0x396a6c(0xd1)]);const _0x2f444d=this['db']['prepare'](_0x2b522f[_0x396a6c(0xdc)]);_0x2f444d[_0x396a6c(0xf5)](_0x3deb68[_0x396a6c(0x106)],_0x3deb68[_0x396a6c(0xd1)],_0x5323b4=>{const _0x40e35c=_0x396a6c;_0x5323b4&&_0x2b522f[_0x40e35c(0xc1)](logError,_0x2b522f[_0x40e35c(0x10a)],_0x5323b4);});}async[_0x44c136(0xa8)](_0x122bec){const _0x29ce4a=_0x44c136,_0x43a9d2={'plhFx':function(_0x393168,_0x1807da,_0x18ed8d){return _0x393168(_0x1807da,_0x18ed8d);},'umEzl':_0x29ce4a(0xc6),'AmYsH':'INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)'},_0x5517c7=this['db'][_0x29ce4a(0x104)](_0x43a9d2[_0x29ce4a(0xcf)]);return new Promise((_0x3d0c40,_0x40fbc3)=>{const _0x5ad5ed=_0x29ce4a;_0x5517c7[_0x5ad5ed(0xf5)](_0x122bec[_0x5ad5ed(0xdb)],_0x122bec[_0x5ad5ed(0xc3)],_0x122bec[_0x5ad5ed(0xcd)],_0x122bec[_0x5ad5ed(0x93)],_0x122bec['uuid'],_0x122bec[_0x5ad5ed(0xe1)],JSON[_0x5ad5ed(0xf9)](_0x122bec[_0x5ad5ed(0xc4)]),_0x122bec[_0x5ad5ed(0xb6)],_0x122bec[_0x5ad5ed(0xd1)],function(_0x347fb3){const _0x13573f=_0x5ad5ed;_0x347fb3&&(_0x43a9d2[_0x13573f(0xb3)](logError,_0x43a9d2[_0x13573f(0xa7)],_0x347fb3),_0x40fbc3(_0x347fb3)),_0x3d0c40(null);});});}async['getFileCache'](_0x2d7a53,_0x1ac490){const _0x11322b=_0x44c136,_0x6be81d={'GMEqf':function(_0x508844,_0x11a913){return _0x508844(_0x11a913);}},_0x501433=this['db'][_0x11322b(0x104)](_0x2d7a53);return new Promise((_0x3d4000,_0x51ddbc)=>{const _0x416022=_0x11322b,_0x4214db={'zTfSN':function(_0x25fcc1,_0xdfb48){const _0xc62f7=_0x16e5;return _0x6be81d[_0xc62f7(0xba)](_0x25fcc1,_0xdfb48);}};_0x501433[_0x416022(0xb1)](..._0x1ac490,(_0x38888c,_0x519b4f)=>{const _0x2eedb2=_0x416022;_0x38888c&&(logError('db\x20could\x20not\x20get\x20file\x20cache',_0x38888c),_0x51ddbc(_0x38888c)),_0x519b4f&&(_0x519b4f['element']=JSON['parse'](_0x519b4f[_0x2eedb2(0xc4)])),_0x4214db[_0x2eedb2(0xfd)](_0x3d4000,_0x519b4f);});});}async[_0x44c136(0x101)](_0x1abb4a){const _0x16a1a3=_0x44c136;return this['getFileCache'](_0x16a1a3(0x102),[_0x1abb4a]);}async[_0x44c136(0xf1)](_0x560df3){const _0x5e7f68=_0x44c136,_0x48abc2={'FWPDS':_0x5e7f68(0xfa)};return this[_0x5e7f68(0xa1)](_0x48abc2[_0x5e7f68(0xb5)],[_0x560df3]);}async['updateFileCache'](_0xa45e8f){const _0x1946ac=_0x44c136,_0x3b39aa={'UEzQf':function(_0x106cce,_0x1f8bb4,_0xa07c59){return _0x106cce(_0x1f8bb4,_0xa07c59);},'ZwCGf':_0x1946ac(0x8f),'AYyNH':function(_0x265ea6,_0x2f9145){return _0x265ea6(_0x2f9145);},'Zbaqa':'UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?'},_0xbd3c28=this['db'][_0x1946ac(0x104)](_0x3b39aa[_0x1946ac(0xae)]);return new Promise((_0x3220c,_0x5c13a7)=>{const _0x2707e2=_0x1946ac;_0xbd3c28[_0x2707e2(0xf5)](_0xa45e8f['path'],_0xa45e8f[_0x2707e2(0xcd)],_0xa45e8f['uuid'],function(_0x3f67c1){_0x3f67c1&&(_0x3b39aa['UEzQf'](logError,_0x3b39aa['ZwCGf'],_0x3f67c1),_0x5c13a7(_0x3f67c1)),_0x3b39aa['AYyNH'](_0x3220c,null);});});}async[_0x44c136(0xf6)](){const _0x1ba4ad=_0x44c136,_0x4b3ed9={'NhVQv':function(_0x2b189d,_0x3b198d,_0x44967e){return _0x2b189d(_0x3b198d,_0x44967e);},'TuhtT':_0x1ba4ad(0xc2),'PpxfV':'SELECT\x20*\x20FROM\x20temp_uins'},_0x402125=_0x4b3ed9[_0x1ba4ad(0x97)];return new Promise((_0xa19c25,_0x25b066)=>{const _0x41b46f=_0x1ba4ad,_0x469e85={'uRIoz':function(_0x4139e1,_0xc80ae,_0x53429e){const _0x41103e=_0x16e5;return _0x4b3ed9[_0x41103e(0x96)](_0x4139e1,_0xc80ae,_0x53429e);},'hFLrr':_0x4b3ed9['TuhtT']};this['db'][_0x41b46f(0x100)](_0x402125,(_0x52fc55,_0x13dc42)=>{const _0x168bd2=_0x41b46f;_0x52fc55&&(_0x469e85[_0x168bd2(0x10c)](logError,_0x469e85[_0x168bd2(0x109)],_0x52fc55),_0x25b066(_0x52fc55));const _0x507763={};_0x13dc42['forEach'](_0x37c91b=>{const _0xa90366=_0x168bd2;_0x507763[_0x37c91b[_0xa90366(0x103)]]=_0x37c91b[_0xa90366(0xa2)];}),_0xa19c25(_0x507763);});});}async['getUidByTempUin'](_0x2ba219){const _0x348474=_0x44c136,_0x4bfb7e={'ArBoY':'db\x20could\x20not\x20get\x20temp\x20uin\x20map','wXXFy':function(_0x89a58e,_0x55f548){return _0x89a58e(_0x55f548);},'NBoyp':'SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?'},_0x3e4bd0=_0x4bfb7e[_0x348474(0xc8)];return new Promise((_0x30f482,_0x3390d6)=>{const _0x3fb61e=_0x348474,_0xde7251={'HUubb':_0x4bfb7e[_0x3fb61e(0xb7)],'RivYT':function(_0x40bdbf,_0x42029b){return _0x4bfb7e['wXXFy'](_0x40bdbf,_0x42029b);}};this['db']['get'](_0x3e4bd0,[_0x2ba219],(_0x212a9a,_0xed4c70)=>{const _0x4c41f1=_0x3fb61e;_0x212a9a&&(logError(_0xde7251[_0x4c41f1(0xd6)],_0x212a9a),_0xde7251[_0x4c41f1(0x90)](_0x3390d6,_0x212a9a)),_0xde7251[_0x4c41f1(0x90)](_0x30f482,_0xed4c70?.[_0x4c41f1(0xa2)]);});});}async['addTempUin'](_0x517e2e,_0x527a40){const _0x29d27e=_0x44c136,_0x597566={'zrVCl':function(_0x516728,_0x422b78,_0x2006e9){return _0x516728(_0x422b78,_0x2006e9);},'znaWH':'db\x20could\x20not\x20add\x20temp\x20uin','UQMIC':function(_0x3ee95c,_0x50403){return _0x3ee95c(_0x50403);},'myBQs':'INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)'},_0x9ca045=await this['getUidByTempUin'](_0x517e2e);if(!_0x9ca045){const _0x50c4c0=this['db'][_0x29d27e(0x104)](_0x597566['myBQs']);return new Promise((_0x29baa6,_0x16d104)=>{const _0x2f5004=_0x29d27e;_0x50c4c0[_0x2f5004(0xf5)](_0x517e2e,_0x527a40,function(_0x184ed7){const _0x50389c=_0x2f5004;_0x184ed7&&(_0x597566[_0x50389c(0x108)](logError,_0x597566[_0x50389c(0x9b)],_0x184ed7),_0x16d104(_0x184ed7)),_0x597566[_0x50389c(0xaf)](_0x29baa6,null);});});}}}export const dbUtil=new DBUtil();