const _0x785993=_0x331c;(function(_0x2fe34e,_0x1f4d0a){const _0x2ac9f7=_0x331c,_0xe8751f=_0x2fe34e();while(!![]){try{const _0x1f287a=-parseInt(_0x2ac9f7(0x208))/0x1+-parseInt(_0x2ac9f7(0x1f6))/0x2*(-parseInt(_0x2ac9f7(0x1d1))/0x3)+parseInt(_0x2ac9f7(0x1ef))/0x4+-parseInt(_0x2ac9f7(0x20c))/0x5*(-parseInt(_0x2ac9f7(0x1fd))/0x6)+-parseInt(_0x2ac9f7(0x229))/0x7*(parseInt(_0x2ac9f7(0x1d9))/0x8)+parseInt(_0x2ac9f7(0x240))/0x9*(-parseInt(_0x2ac9f7(0x1d2))/0xa)+-parseInt(_0x2ac9f7(0x1c6))/0xb*(-parseInt(_0x2ac9f7(0x22f))/0xc);if(_0x1f287a===_0x1f4d0a)break;else _0xe8751f['push'](_0xe8751f['shift']());}catch(_0x5f3356){_0xe8751f['push'](_0xe8751f['shift']());}}}(_0x5a21,0x8f979));import _0x5d1275 from'sqlite3';import{logDebug,logError}from'@/common/utils/log';import{NTQQMsgApi}from'@/core';function _0x331c(_0x4ec9b9,_0x4093fe){const _0x5a21db=_0x5a21();return _0x331c=function(_0x331cb5,_0x3e9b36){_0x331cb5=_0x331cb5-0x1b8;let _0x389523=_0x5a21db[_0x331cb5];return _0x389523;},_0x331c(_0x4ec9b9,_0x4093fe);}function _0x5a21(){const _0x3f99a2=['gubDl','uin','netyh','UCKXE','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','6TdNpnu','dbqcK','getReceivedTempUinMap','Could\x20not\x20connect\x20to\x20database','tMEgR','SELECT\x20*\x20FROM\x20temp_uins','elementId','globalMsgShortId','Could\x20not\x20create\x20table\x20files','init','kVchD','1154033EITzFf','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?','rWmTs','1360090tcSkqj','Iesee','getMsg','stack','XMwDZ','EcTjw','lLSPG','delete','Mwvdo','数据库中消息最大短id','db\x20could\x20not\x20add\x20msg','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','getFileCache','assign','addMsg','MtCJb','INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)','OzAQa','uid','TUvwk','PfDnu','db\x20could\x20not\x20get\x20temp\x20uin\x20map','iXMzo','ZOcmZ','EGlUk','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','nvCRy','getFileCacheByName','SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?','330757lrBurH','XapDc',',\x20seq:\x20','set','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?','parse','3324lKzZzT','catch','taObR','nvGZA','run','Method\x20not\x20implemented.','Could\x20not\x20create\x20table\x20temp_uins','mmbSR','记录消息到数据库,\x20消息长id:\x20','Hnqay','irnKv','forEach','name','ZlwhG','getMsgByShortId','addTempUin','gzten','92889kiylsa','getFileCacheByUuid','peerUid','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','createTable','EHohP','eicOB','keqnT','elementType','vxHDu','uzWvx','MXFGT','Could\x20not\x20get\x20msg','url','getUidByTempUin','49137pxJXHk','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','db\x20getMsgByLongId\x20error','maxId','msgSeq','vcvqf','UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?','LdCjH','chatType','msgCache','JHHlh','4248oNekej','10uCqmlU','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','VTvZW','updateMsg','ltrHZ','knYiJ','getMsgBySeq','88RDhCPc','UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?','element','prepare','asoyy','INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','then','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','aoDEx','Deqrf','GnKTm','close',',\x20msgId:\x20','path','rnaSp','shHNw',',\x20短id:\x20','OPEN_READWRITE','db\x20could\x20not\x20update\x20file\x20cache','toString','清理消息缓存','uWgsw','1964076DyTGcP','Could\x20not\x20create\x20table\x20msgs','getCurrentMaxShortId','db\x20could\x20not\x20add\x20file','WluIK','getMsgByLongId','get','384QhlOYT','msgId'];_0x5a21=function(){return _0x3f99a2;};return _0x5a21();}class DBUtilBase{['db'];async[_0x785993(0x206)](_0x4da0fb){const _0x5e354b={'asoyy':function(_0xae2d32,_0x2473f3,_0x171b83){return _0xae2d32(_0x2473f3,_0x171b83);},'keqnT':function(_0x3903a8){return _0x3903a8();},'RCyrp':function(_0x790f06,_0x1b45b5){return _0x790f06|_0x1b45b5;}};if(this['db'])return;return new Promise((_0x3ffc71,_0x31a1ae)=>{const _0x308c0e=_0x331c;this['db']=new _0x5d1275['Database'](_0x4da0fb,_0x5e354b['RCyrp'](_0x5d1275[_0x308c0e(0x1ea)],_0x5d1275['OPEN_CREATE']),_0x55c533=>{const _0x66f46a=_0x308c0e;if(_0x55c533){_0x5e354b[_0x66f46a(0x1dd)](logError,_0x66f46a(0x200),_0x55c533),_0x31a1ae(_0x55c533);return;}this[_0x66f46a(0x1bb)](),_0x5e354b[_0x66f46a(0x1be)](_0x3ffc71);});});}[_0x785993(0x1bb)](){const _0x8ed4e9=_0x785993,_0x1d1579={'WgfPG':_0x8ed4e9(0x234)};throw new Error(_0x1d1579['WgfPG']);}[_0x785993(0x1e4)](){this['db']?.['close']();}}class DBUtil extends DBUtilBase{[_0x785993(0x1cf)]=new Map();[_0x785993(0x204)]=-0x7ffffff8;constructor(){const _0x5076ac=_0x785993,_0x52d779={'MWfgx':function(_0xa487f6,_0x36484b){return _0xa487f6>_0x36484b;},'nvCRy':function(_0x4a2688,_0x17e288){return _0x4a2688-_0x17e288;},'gzten':function(_0x17950d,_0xc203be){return _0x17950d(_0xc203be);},'Iesee':function(_0x554f0e,_0x11a0ad){return _0x554f0e(_0x11a0ad);},'eicOB':_0x5076ac(0x1ed),'kVchD':function(_0x45ae3e,_0x2f7242){return _0x45ae3e*_0x2f7242;},'lLSPG':function(_0x4c63be,_0x52bb43,_0x19f664){return _0x4c63be(_0x52bb43,_0x19f664);}};super();const _0x5839a3=_0x52d779[_0x5076ac(0x207)](_0x52d779[_0x5076ac(0x207)](0x3e8,0x3c),0xa);_0x52d779[_0x5076ac(0x212)](setInterval,()=>{const _0x505b91=_0x5076ac;_0x52d779[_0x505b91(0x20d)](logDebug,_0x52d779[_0x505b91(0x1bd)]),this['msgCache'][_0x505b91(0x23a)]((_0x195895,_0x4a58a3)=>{const _0x5bcab4=_0x505b91;_0x52d779['MWfgx'](_0x52d779[_0x5bcab4(0x226)](Date['now'](),_0x52d779[_0x5bcab4(0x23f)](parseInt,_0x195895['msgTime'])*0x3e8),_0x5839a3)&&this[_0x5bcab4(0x1cf)][_0x5bcab4(0x213)](_0x4a58a3);});},_0x5839a3);}async[_0x785993(0x206)](_0x588cd2){const _0x12cd9d=_0x785993;await super[_0x12cd9d(0x206)](_0x588cd2),this[_0x12cd9d(0x204)]=await this[_0x12cd9d(0x1f1)]();}[_0x785993(0x1bb)](){const _0x378909=_0x785993,_0x78a94c={'ZOcmZ':function(_0x33c49d,_0x175cbf,_0x3c20c9){return _0x33c49d(_0x175cbf,_0x3c20c9);},'MtCJb':function(_0x678970,_0x1a68d0,_0x68ec5d){return _0x678970(_0x1a68d0,_0x68ec5d);},'Kufog':_0x378909(0x205),'lADQk':_0x378909(0x235)},_0x372674=_0x378909(0x1ba);this['db']['run'](_0x372674,function(_0x1291f9){const _0x5778b9=_0x378909;_0x1291f9&&_0x78a94c[_0x5778b9(0x223)](logError,_0x5778b9(0x1f0),_0x1291f9[_0x5778b9(0x20f)]);});const _0x51eb14=_0x378909(0x1d3);this['db'][_0x378909(0x233)](_0x51eb14,function(_0x394bcc){const _0x1ba22a=_0x378909;_0x394bcc&&_0x78a94c[_0x1ba22a(0x21b)](logError,_0x78a94c['Kufog'],_0x394bcc);});const _0x2e5254='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)';this['db']['run'](_0x2e5254,function(_0x500753){const _0xf928c4=_0x378909;_0x500753&&_0x78a94c[_0xf928c4(0x223)](logError,_0x78a94c['lADQk'],_0x500753);});}async['getCurrentMaxShortId'](){const _0x3a56c6=_0x785993,_0x1e20a2={'uWgsw':function(_0x589bb1,_0x3406cc,_0x2401f6){return _0x589bb1(_0x3406cc,_0x2401f6);},'gubDl':function(_0x481db3,_0x52260d){return _0x481db3(_0x52260d);},'TUvwk':_0x3a56c6(0x1e0)};return new Promise((_0x57f989,_0x5602c0)=>{const _0x22dc33=_0x3a56c6,_0x1f1ec5={'EcTjw':function(_0x5bd7d5,_0x2e0937,_0x7f1a42){return _0x1e20a2['uWgsw'](_0x5bd7d5,_0x2e0937,_0x7f1a42);},'oogWz':function(_0x7c85de,_0x2d2934,_0x1f3bde){const _0x5596c9=_0x331c;return _0x1e20a2[_0x5596c9(0x1ee)](_0x7c85de,_0x2d2934,_0x1f3bde);},'EHohP':function(_0x470410,_0x58481e){const _0x58e4ea=_0x331c;return _0x1e20a2[_0x58e4ea(0x1f8)](_0x470410,_0x58481e);}};this['db'][_0x22dc33(0x1f5)](_0x1e20a2[_0x22dc33(0x21f)],(_0x1c5ddc,_0x5caf34)=>{const _0x5d1d67=_0x22dc33;if(_0x1c5ddc)return _0x1f1ec5[_0x5d1d67(0x211)](logDebug,'Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640',_0x1c5ddc),_0x57f989(-0x7ffffff8);_0x1f1ec5['oogWz'](logDebug,_0x5d1d67(0x215),_0x5caf34?.[_0x5d1d67(0x1c9)]),_0x1f1ec5[_0x5d1d67(0x1bc)](_0x57f989,_0x5caf34?.['maxId']??-0x7ffffff8);});});}async[_0x785993(0x20e)](_0x2340da,_0x232578){const _0xf8f465=_0x785993,_0x167d0c={'rWmTs':function(_0x264991,_0x5064fd,_0x1eacff,_0x5ef100,_0x536edf){return _0x264991(_0x5064fd,_0x1eacff,_0x5ef100,_0x536edf);},'nvGZA':function(_0x39a176,_0x48ce57){return _0x39a176(_0x48ce57);},'vxHDu':function(_0x523a84,_0xa3ae5){return _0x523a84(_0xa3ae5);}},_0x4c075f=this['db'][_0xf8f465(0x1dc)](_0x2340da);return new Promise((_0xf167fb,_0x5ef892)=>{const _0x1acc29=_0xf8f465,_0x495941={'XapDc':function(_0x2aee12,_0x357b69){return _0x167d0c['vxHDu'](_0x2aee12,_0x357b69);}};_0x4c075f[_0x1acc29(0x1f5)](..._0x232578,(_0x1c4925,_0x13b454)=>{const _0x4a6d99=_0x1acc29;if(_0x1c4925)return _0x167d0c[_0x4a6d99(0x20b)](logError,_0x4a6d99(0x1c3),_0x1c4925,_0x2340da,_0x232578),_0x167d0c[_0x4a6d99(0x232)](_0xf167fb,null);if(!_0x13b454){_0x167d0c[_0x4a6d99(0x1c0)](_0xf167fb,null);return;}const _0x32ee05=_0x13b454['longId'];NTQQMsgApi['getMsgsByMsgId']({'peerUid':_0x13b454[_0x4a6d99(0x1b9)],'chatType':_0x13b454[_0x4a6d99(0x1ce)]},[_0x32ee05])['then'](_0x249e00=>{const _0x572b51=_0x4a6d99,_0x209c10=_0x249e00['msgList'][0x0];if(!_0x209c10){_0x495941[_0x572b51(0x22a)](_0xf167fb,null);return;}_0x209c10['id']=_0x13b454['shortId'],_0x495941['XapDc'](_0xf167fb,_0x209c10);})[_0x4a6d99(0x230)](_0x3b1089=>{const _0x4a64b6=_0x4a6d99;_0x495941[_0x4a64b6(0x22a)](_0xf167fb,null);});});});}async[_0x785993(0x23d)](_0x5bf435){const _0xa4db8f=_0x785993,_0x20cfc1={'Deqrf':_0xa4db8f(0x225)};if(this[_0xa4db8f(0x1cf)]['has'](_0x5bf435))return this[_0xa4db8f(0x1cf)][_0xa4db8f(0x1f5)](_0x5bf435);const _0x1cbae2=_0x20cfc1[_0xa4db8f(0x1e2)];return this[_0xa4db8f(0x20e)](_0x1cbae2,[_0x5bf435]);}async[_0x785993(0x1f4)](_0x2c5fd4){const _0x457fed=_0x785993;if(this[_0x457fed(0x1cf)]['has'](_0x2c5fd4))return this['msgCache'][_0x457fed(0x1f5)](_0x2c5fd4);return this[_0x457fed(0x20e)](_0x457fed(0x22d),[_0x2c5fd4]);}async[_0x785993(0x1d8)](_0x4f75cd,_0x4ada13){const _0x10bd79=_0x785993,_0x493dac={'GnKTm':_0x10bd79(0x20a)},_0x3dfee5=_0x493dac[_0x10bd79(0x1e3)];return this[_0x10bd79(0x20e)](_0x3dfee5,[_0x4f75cd,_0x4ada13]);}async[_0x785993(0x21a)](_0x555aa0,_0x4fafa1=!![]){const _0x5f2d94=_0x785993,_0x3d85b9={'ltrHZ':function(_0x1cf937,_0x44618c,_0x3d879a){return _0x1cf937(_0x44618c,_0x3d879a);},'UCKXE':_0x5f2d94(0x1c7),'Hnqay':function(_0x5daebb,_0x463941){return _0x5daebb===_0x463941;},'Mwvdo':_0x5f2d94(0x216),'ZlwhG':_0x5f2d94(0x1de),'rnaSp':function(_0x12389c,_0x193fa3){return _0x12389c(_0x193fa3);}},_0xf48aea=await this[_0x5f2d94(0x1f4)](_0x555aa0[_0x5f2d94(0x1f7)]);if(_0xf48aea){if(_0x4fafa1)this[_0x5f2d94(0x1d5)](_0x555aa0)[_0x5f2d94(0x1df)]();return _0xf48aea['id'];}const _0x37480a=this['db'][_0x5f2d94(0x1dc)](_0x3d85b9[_0x5f2d94(0x23c)]),_0x2acfe3=++this[_0x5f2d94(0x204)];return _0x555aa0['id']=_0x2acfe3,_0x3d85b9[_0x5f2d94(0x1e7)](logDebug,_0x5f2d94(0x237)+_0x555aa0['msgId']+_0x5f2d94(0x1e9)+_0x555aa0['id']),this[_0x5f2d94(0x1cf)][_0x5f2d94(0x22c)](_0x2acfe3,_0x555aa0),this[_0x5f2d94(0x1cf)][_0x5f2d94(0x22c)](_0x555aa0[_0x5f2d94(0x1f7)],_0x555aa0),_0x37480a['run'](this['globalMsgShortId'],_0x555aa0['msgId'],_0x555aa0['msgSeq'][_0x5f2d94(0x1ec)](),_0x555aa0[_0x5f2d94(0x1b9)],_0x555aa0[_0x5f2d94(0x1ce)],_0x5ac185=>{const _0x41668c=_0x5f2d94,_0xd002dd={'VTvZW':function(_0x4cb581,_0x4031e8,_0x11f2db){const _0x2b7979=_0x331c;return _0x3d85b9[_0x2b7979(0x1d6)](_0x4cb581,_0x4031e8,_0x11f2db);},'htqTN':_0x3d85b9[_0x41668c(0x1fb)]};_0x5ac185&&(_0x3d85b9[_0x41668c(0x238)](_0x5ac185['errno'],0x13)?this[_0x41668c(0x1f4)](_0x555aa0['msgId'])[_0x41668c(0x1df)](_0x35a327=>{const _0x4648bf=_0x41668c;_0x35a327?(this[_0x4648bf(0x1cf)][_0x4648bf(0x22c)](_0x2acfe3,_0x35a327),this[_0x4648bf(0x1cf)][_0x4648bf(0x22c)](_0x35a327[_0x4648bf(0x1f7)],_0x35a327)):_0xd002dd[_0x4648bf(0x1d4)](logError,_0xd002dd['htqTN'],_0x5ac185);})[_0x41668c(0x230)](_0x39e257=>logError(_0x41668c(0x1c8),_0x39e257)):logError(_0x3d85b9[_0x41668c(0x214)],_0x5ac185));}),_0x2acfe3;}async[_0x785993(0x1d5)](_0x290dda){const _0x15efc2=_0x785993,_0x1dc2ef={'vcvqf':function(_0x480dd6,_0xf02779,_0x4ebff5){return _0x480dd6(_0xf02779,_0x4ebff5);},'tMEgR':'updateMsg\x20db\x20error','BeuVQ':_0x15efc2(0x1da)},_0x5553ff=this[_0x15efc2(0x1cf)][_0x15efc2(0x1f5)](_0x290dda[_0x15efc2(0x1f7)]);_0x5553ff&&Object[_0x15efc2(0x219)](_0x5553ff,_0x290dda);logDebug('更新消息,\x20shortId:'+_0x290dda['id']+_0x15efc2(0x22b)+_0x290dda['msgSeq']+_0x15efc2(0x1e5)+_0x290dda[_0x15efc2(0x1f7)]);const _0x318fc1=this['db']['prepare'](_0x1dc2ef['BeuVQ']);_0x318fc1[_0x15efc2(0x233)](_0x290dda[_0x15efc2(0x1ca)],_0x290dda['msgId'],_0x36e3d1=>{const _0x3946ff=_0x15efc2;_0x36e3d1&&_0x1dc2ef[_0x3946ff(0x1cb)](logError,_0x1dc2ef[_0x3946ff(0x201)],_0x36e3d1);});}async['addFileCache'](_0x143c96){const _0x152d0d=_0x785993,_0x19a2e6={'bmmAs':function(_0x300a72,_0x562a3c){return _0x300a72(_0x562a3c);}},_0x5ccea3=this['db']['prepare'](_0x152d0d(0x1fc));return new Promise((_0x25ba46,_0x3e5feb)=>{const _0x1014a4=_0x152d0d,_0x41705a={'xcaOv':_0x1014a4(0x1f2),'MXFGT':function(_0x59d922,_0x195c42){return _0x19a2e6['bmmAs'](_0x59d922,_0x195c42);}};_0x5ccea3[_0x1014a4(0x233)](_0x143c96[_0x1014a4(0x23b)],_0x143c96[_0x1014a4(0x1e6)],_0x143c96[_0x1014a4(0x1c4)],_0x143c96['size'],_0x143c96['uuid'],_0x143c96[_0x1014a4(0x1bf)],JSON['stringify'](_0x143c96[_0x1014a4(0x1db)]),_0x143c96[_0x1014a4(0x203)],_0x143c96[_0x1014a4(0x1f7)],function(_0x1bc894){const _0x404dce=_0x1014a4;_0x1bc894&&(logError(_0x41705a['xcaOv'],_0x1bc894),_0x41705a[_0x404dce(0x1c2)](_0x3e5feb,_0x1bc894)),_0x41705a[_0x404dce(0x1c2)](_0x25ba46,null);});});}async[_0x785993(0x218)](_0x492e69,_0x4c4a4b){const _0x3e71ce=_0x785993,_0x40c4ac={'taObR':function(_0x4a19bd,_0x453d42,_0x27abe4){return _0x4a19bd(_0x453d42,_0x27abe4);},'hElBm':'db\x20could\x20not\x20get\x20file\x20cache','uzWvx':function(_0xe3dabe,_0xe4c0c5){return _0xe3dabe(_0xe4c0c5);}},_0xda69d8=this['db'][_0x3e71ce(0x1dc)](_0x492e69);return new Promise((_0x59e573,_0x2dc2d8)=>{const _0x5b10f0=_0x3e71ce;_0xda69d8[_0x5b10f0(0x1f5)](..._0x4c4a4b,(_0x10e975,_0x241d38)=>{const _0x1b1637=_0x5b10f0;_0x10e975&&(_0x40c4ac[_0x1b1637(0x231)](logError,_0x40c4ac['hElBm'],_0x10e975),_0x40c4ac[_0x1b1637(0x1c1)](_0x2dc2d8,_0x10e975)),_0x241d38&&(_0x241d38['element']=JSON[_0x1b1637(0x22e)](_0x241d38[_0x1b1637(0x1db)])),_0x40c4ac[_0x1b1637(0x1c1)](_0x59e573,_0x241d38);});});}async[_0x785993(0x227)](_0x30f1f8){const _0x196f6d=_0x785993;return this[_0x196f6d(0x218)](_0x196f6d(0x209),[_0x30f1f8]);}async[_0x785993(0x1b8)](_0x594d14){const _0x296979=_0x785993,_0x54d5b0={'irnKv':_0x296979(0x228)};return this[_0x296979(0x218)](_0x54d5b0[_0x296979(0x239)],[_0x594d14]);}async['updateFileCache'](_0x2d4bab){const _0xa005f9=_0x785993,_0x1757f4={'XMwDZ':function(_0x240a4a,_0x509714,_0xf95101){return _0x240a4a(_0x509714,_0xf95101);},'OzAQa':_0xa005f9(0x1eb),'mmbSR':function(_0x56a52d,_0x1e0e5b){return _0x56a52d(_0x1e0e5b);},'xoSdY':_0xa005f9(0x1cc)},_0x2cc5bc=this['db']['prepare'](_0x1757f4['xoSdY']);return new Promise((_0x6d164,_0x5b1f97)=>{const _0x3ad8f7=_0xa005f9,_0x300a7b={'OgOjv':function(_0x2e26fc,_0x152813,_0x495c9b){const _0x571b9d=_0x331c;return _0x1757f4[_0x571b9d(0x210)](_0x2e26fc,_0x152813,_0x495c9b);},'EGlUk':_0x1757f4[_0x3ad8f7(0x21d)],'iXMzo':function(_0x44f299,_0x416bf1){const _0x196f20=_0x3ad8f7;return _0x1757f4[_0x196f20(0x236)](_0x44f299,_0x416bf1);}};_0x2cc5bc[_0x3ad8f7(0x233)](_0x2d4bab['path'],_0x2d4bab[_0x3ad8f7(0x1c4)],_0x2d4bab['uuid'],function(_0x150571){const _0x31f8fa=_0x3ad8f7;_0x150571&&(_0x300a7b['OgOjv'](logError,_0x300a7b[_0x31f8fa(0x224)],_0x150571),_0x5b1f97(_0x150571)),_0x300a7b[_0x31f8fa(0x222)](_0x6d164,null);});});}async[_0x785993(0x1ff)](){const _0x58ef14=_0x785993,_0x3ca658={'KJMXE':function(_0x3d9da8,_0x358613,_0x5b8bf7){return _0x3d9da8(_0x358613,_0x5b8bf7);},'netyh':function(_0x15dfce,_0x3fc13c){return _0x15dfce(_0x3fc13c);},'eruCn':_0x58ef14(0x202)},_0x41f80b=_0x3ca658['eruCn'];return new Promise((_0x38d931,_0xc7c8ad)=>{const _0x3113e1=_0x58ef14,_0x261de0={'shHNw':function(_0x1f7410,_0x2c27a7,_0x316b9d){return _0x3ca658['KJMXE'](_0x1f7410,_0x2c27a7,_0x316b9d);},'vjWEi':_0x3113e1(0x221),'LdCjH':function(_0x28dd60,_0x56d6ae){const _0x2a320a=_0x3113e1;return _0x3ca658[_0x2a320a(0x1fa)](_0x28dd60,_0x56d6ae);},'pilhs':function(_0x2508d2,_0x5daabf){const _0x4e26e4=_0x3113e1;return _0x3ca658[_0x4e26e4(0x1fa)](_0x2508d2,_0x5daabf);}};this['db']['all'](_0x41f80b,(_0x39751c,_0xefd215)=>{const _0x44b6a8=_0x3113e1;_0x39751c&&(_0x261de0[_0x44b6a8(0x1e8)](logError,_0x261de0['vjWEi'],_0x39751c),_0x261de0[_0x44b6a8(0x1cd)](_0xc7c8ad,_0x39751c));const _0x13df29={};_0xefd215[_0x44b6a8(0x23a)](_0xdf2e4c=>{const _0x213c9c=_0x44b6a8;_0x13df29[_0xdf2e4c[_0x213c9c(0x1f9)]]=_0xdf2e4c[_0x213c9c(0x21e)];}),_0x261de0['pilhs'](_0x38d931,_0x13df29);});});}async[_0x785993(0x1c5)](_0x179e91){const _0x548512=_0x785993,_0x6b06d7={'aoDEx':_0x548512(0x221),'QsxKw':function(_0x105516,_0x5d7e23){return _0x105516(_0x5d7e23);},'pqLeu':_0x548512(0x217)},_0x188e3c=_0x6b06d7['pqLeu'];return new Promise((_0x45d3ab,_0x12bc63)=>{const _0x4c4dfd=_0x548512,_0x2e66cb={'knYiJ':function(_0x830221,_0x4d78fc,_0x5ceb1a){return _0x830221(_0x4d78fc,_0x5ceb1a);},'IjWAP':_0x6b06d7[_0x4c4dfd(0x1e1)],'WluIK':function(_0x6d8bde,_0x2a7ad6){return _0x6d8bde(_0x2a7ad6);},'PfDnu':function(_0x509b7d,_0x386fff){return _0x6b06d7['QsxKw'](_0x509b7d,_0x386fff);}};this['db'][_0x4c4dfd(0x1f5)](_0x188e3c,[_0x179e91],(_0x554422,_0x1b2549)=>{const _0x5227ce=_0x4c4dfd;_0x554422&&(_0x2e66cb[_0x5227ce(0x1d7)](logError,_0x2e66cb['IjWAP'],_0x554422),_0x2e66cb[_0x5227ce(0x1f3)](_0x12bc63,_0x554422)),_0x2e66cb[_0x5227ce(0x220)](_0x45d3ab,_0x1b2549?.['uid']);});});}async[_0x785993(0x23e)](_0x5644fb,_0x21dcaa){const _0x5b4867=_0x785993,_0x1d9135={'JHHlh':function(_0x303d94,_0x42dbba,_0x3490f1){return _0x303d94(_0x42dbba,_0x3490f1);},'oZfnN':'db\x20could\x20not\x20add\x20temp\x20uin','dbqcK':function(_0x218e22,_0x4f41e9){return _0x218e22(_0x4f41e9);},'yNHCM':_0x5b4867(0x21c)},_0x344e2e=await this[_0x5b4867(0x1c5)](_0x5644fb);if(!_0x344e2e){const _0x30b6a3=this['db']['prepare'](_0x1d9135['yNHCM']);return new Promise((_0x1476a7,_0x21666d)=>{_0x30b6a3['run'](_0x5644fb,_0x21dcaa,function(_0x2f9742){const _0xbadad9=_0x331c;_0x2f9742&&(_0x1d9135[_0xbadad9(0x1d0)](logError,_0x1d9135['oZfnN'],_0x2f9742),_0x1d9135[_0xbadad9(0x1fe)](_0x21666d,_0x2f9742)),_0x1d9135[_0xbadad9(0x1fe)](_0x1476a7,null);});});}}}export const dbUtil=new DBUtil();