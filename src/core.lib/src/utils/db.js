const _0x5e4ac5=_0x3516;(function(_0x407331,_0x17fbc3){const _0x49c3a1=_0x3516,_0x5bde79=_0x407331();while(!![]){try{const _0xa28834=parseInt(_0x49c3a1(0x135))/0x1*(-parseInt(_0x49c3a1(0x143))/0x2)+-parseInt(_0x49c3a1(0x12c))/0x3*(parseInt(_0x49c3a1(0x152))/0x4)+-parseInt(_0x49c3a1(0x12e))/0x5*(-parseInt(_0x49c3a1(0x13c))/0x6)+-parseInt(_0x49c3a1(0xdf))/0x7*(-parseInt(_0x49c3a1(0x12a))/0x8)+-parseInt(_0x49c3a1(0x12b))/0x9+-parseInt(_0x49c3a1(0x107))/0xa+parseInt(_0x49c3a1(0x169))/0xb;if(_0xa28834===_0x17fbc3)break;else _0x5bde79['push'](_0x5bde79['shift']());}catch(_0x46b8c7){_0x5bde79['push'](_0x5bde79['shift']());}}}(_0xda4d,0xafacc));import _0x30fa76 from'sqlite3';import{logDebug,logError}from'@/common/utils/log';import{NTQQMsgApi}from'@/core';function _0xda4d(){const _0x2400d6=['CPHKo','QnqlZ','db\x20could\x20not\x20add\x20temp\x20uin','494968iFpodj','INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','ddRsP','VSfBs','SdNrk','now','path','kojax','set','getMsgByLongId',',\x20短id:\x20','shortId','syzaK','zTvTC','EiJIT','run','pJnNX','forEach','updateMsg\x20db\x20error','chatType','GQXSg','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','url','37124461vAPQgQ','db\x20could\x20not\x20get\x20temp\x20uin\x20map','msgCache','addMsg','huWZs','bEVft','TyCPR','7DHaXuQ','msgTime','maxId','OPEN_READWRITE','PnZsr','UxbzU','gbjbC','getFileCache','Method\x20not\x20implemented.','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?','globalMsgShortId','iTbKq','element','OULBm','rHUNj','stringify','KRXNW','OPEN_CREATE','prepare','yaHsL','pezUe','updateFileCache','UTSSf','size','xtiDJ','get','init','lgbov','addFileCache','rDaKu','close','vRXUx','getMsgBySeq','rItIF','Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','elementId','getReceivedTempUinMap','pEklj','updateMsg','msgId','8343080TMryIO','db\x20could\x20not\x20get\x20file\x20cache','gryLn','Khwsc','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','msgList','aOsFu','rrNoX','raNYO','Database','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','记录消息到数据库,\x20消息长id:\x20','uuid','bNHNH','catch','Could\x20not\x20create\x20table\x20temp_uins','KdSFM','then','gOmZb','Jdste','rlwwd','uin','peerUid','YhzpJ','FkfRH','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','NHWtI','delete','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','hTXlb','FPonX','longId','getMsgsByMsgId','uid','bBDhd','364768wPQFHU','10221813YIgoQl','9LEqpvQ','stack','4520uTwthR','UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?','数据库中消息最大短id','CkYVp','getCurrentMaxShortId','db\x20could\x20not\x20update\x20file\x20cache','getFileCacheByName','130310SSabAJ','db\x20getMsgByLongId\x20error','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','nexIQ','xXbTY','CTrfK','2802DLkHCY','JrOGA','createTable','msgSeq','清理消息缓存','gNrKc','elementType','12Dycyjq','DBJih','fBOJp','JRIuG','all','getMsg','Could\x20not\x20get\x20msg',',\x20msgId:\x20','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','getMsgByShortId','getUidByTempUin','INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)'];_0xda4d=function(){return _0x2400d6;};return _0xda4d();}function _0x3516(_0x3a389e,_0x326ac9){const _0xda4d66=_0xda4d();return _0x3516=function(_0x35162f,_0x36bbb1){_0x35162f=_0x35162f-0xdb;let _0xcc29c=_0xda4d66[_0x35162f];return _0xcc29c;},_0x3516(_0x3a389e,_0x326ac9);}class DBUtilBase{['db'];async['init'](_0x1fc952){const _0x4b1ced={'UTSSf':function(_0x4f15de,_0x472c54,_0x4ae53b){return _0x4f15de(_0x472c54,_0x4ae53b);},'rxdQO':'Could\x20not\x20connect\x20to\x20database','pEklj':function(_0x184e9c,_0x2f76cc){return _0x184e9c|_0x2f76cc;}};if(this['db'])return;return new Promise((_0x13bf72,_0x4d0c47)=>{const _0x336ba8=_0x3516,_0x5b12d9={'yaHsL':function(_0x12ba0d,_0x4db150,_0x2fc8a6){const _0x678a2c=_0x3516;return _0x4b1ced[_0x678a2c(0xf5)](_0x12ba0d,_0x4db150,_0x2fc8a6);},'rlwwd':_0x4b1ced['rxdQO']};this['db']=new _0x30fa76[(_0x336ba8(0x110))](_0x1fc952,_0x4b1ced[_0x336ba8(0x104)](_0x30fa76[_0x336ba8(0xe2)],_0x30fa76[_0x336ba8(0xf0)]),_0xca213e=>{const _0x57ade2=_0x336ba8;if(_0xca213e){_0x5b12d9[_0x57ade2(0xf2)](logError,_0x5b12d9[_0x57ade2(0x11b)],_0xca213e),_0x4d0c47(_0xca213e);return;}this[_0x57ade2(0x13e)](),_0x13bf72();});});}['createTable'](){const _0x58f1db=_0x3516;throw new Error(_0x58f1db(0xe7));}['close'](){const _0x18857b=_0x3516;this['db']?.[_0x18857b(0xfd)]();}}class DBUtil extends DBUtilBase{[_0x5e4ac5(0x16b)]=new Map();[_0x5e4ac5(0xe9)]=-0x7ffffff8;constructor(){const _0x43fb60=_0x5e4ac5,_0x33820d={'PnZsr':function(_0xb91991,_0x281eaf){return _0xb91991-_0x281eaf;},'KdSFM':function(_0x3272f3,_0x2906f0){return _0x3272f3(_0x2906f0);},'rHUNj':_0x43fb60(0x140),'VSfBs':function(_0x393e96,_0x16b28c){return _0x393e96*_0x16b28c;}};super();const _0x146c47=_0x33820d[_0x43fb60(0x155)](_0x33820d[_0x43fb60(0x155)](0x3e8,0x3c),0xa);setInterval(()=>{const _0x3019ea=_0x43fb60,_0x4ddbed={'UxbzU':function(_0x4a6672,_0x2ef861){return _0x4a6672>_0x2ef861;},'rDaKu':function(_0x172ddf,_0xf5194c){const _0x2bb6a3=_0x3516;return _0x33820d[_0x2bb6a3(0xe3)](_0x172ddf,_0xf5194c);},'AynFA':function(_0x2693db,_0x2b7c05){return _0x2693db(_0x2b7c05);}};_0x33820d[_0x3019ea(0x117)](logDebug,_0x33820d[_0x3019ea(0xed)]),this[_0x3019ea(0x16b)][_0x3019ea(0x163)]((_0x3c2cb1,_0x4b0dd4)=>{const _0x15ea39=_0x3019ea;_0x4ddbed[_0x15ea39(0xe4)](_0x4ddbed[_0x15ea39(0xfc)](Date[_0x15ea39(0x157)](),_0x4ddbed['AynFA'](parseInt,_0x3c2cb1[_0x15ea39(0xe0)])*0x3e8),_0x146c47)&&this[_0x15ea39(0x16b)][_0x15ea39(0x122)](_0x4b0dd4);});},_0x146c47);}async[_0x5e4ac5(0xf9)](_0x419c2b){const _0x494035=_0x5e4ac5;await super[_0x494035(0xf9)](_0x419c2b),this[_0x494035(0xe9)]=await this['getCurrentMaxShortId']();}[_0x5e4ac5(0x13e)](){const _0x230acc=_0x5e4ac5,_0x55c013={'YhzpJ':function(_0x805b08,_0x158149,_0x482201){return _0x805b08(_0x158149,_0x482201);},'hTXlb':'Could\x20not\x20create\x20table\x20msgs','CfDdb':'Could\x20not\x20create\x20table\x20files','OULBm':_0x230acc(0x116)},_0x506f56=_0x230acc(0x138);this['db'][_0x230acc(0x161)](_0x506f56,function(_0x34f027){const _0x1bb504=_0x230acc;_0x34f027&&_0x55c013[_0x1bb504(0x11e)](logError,_0x55c013[_0x1bb504(0x124)],_0x34f027[_0x1bb504(0x12d)]);});const _0x122994=_0x230acc(0x123);this['db'][_0x230acc(0x161)](_0x122994,function(_0x536f1d){_0x536f1d&&_0x55c013['YhzpJ'](logError,_0x55c013['CfDdb'],_0x536f1d);});const _0x4d5f81='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)';this['db'][_0x230acc(0x161)](_0x4d5f81,function(_0x2db7fe){const _0x175e0d=_0x230acc;_0x2db7fe&&logError(_0x55c013[_0x175e0d(0xec)],_0x2db7fe);});}async[_0x5e4ac5(0x132)](){const _0x3a8d87=_0x5e4ac5,_0x4357a8={'raNYO':_0x3a8d87(0x101),'SdNrk':function(_0x8c7da5,_0x2d6319){return _0x8c7da5(_0x2d6319);},'hcKkz':_0x3a8d87(0x130),'nexIQ':_0x3a8d87(0x120)};return new Promise((_0x49d3f9,_0x51dcc2)=>{const _0x28d502=_0x3a8d87,_0x3fe6a8={'BrdQc':function(_0x170e6f,_0x3d273c,_0x18d7d9){return _0x170e6f(_0x3d273c,_0x18d7d9);},'mjuoN':_0x4357a8[_0x28d502(0x10f)],'gbjbC':function(_0x45bf80,_0x5e1149){const _0xd18bca=_0x28d502;return _0x4357a8[_0xd18bca(0x156)](_0x45bf80,_0x5e1149);},'sOwRb':_0x4357a8['hcKkz']};this['db'][_0x28d502(0xf8)](_0x4357a8[_0x28d502(0x139)],(_0x3cd303,_0x5b46c3)=>{const _0x5a0c94=_0x28d502;if(_0x3cd303)return _0x3fe6a8['BrdQc'](logDebug,_0x3fe6a8['mjuoN'],_0x3cd303),_0x3fe6a8[_0x5a0c94(0xe5)](_0x49d3f9,-0x7ffffff8);_0x3fe6a8['BrdQc'](logDebug,_0x3fe6a8['sOwRb'],_0x5b46c3?.[_0x5a0c94(0xe1)]),_0x49d3f9(_0x5b46c3?.['maxId']??-0x7ffffff8);});});}async[_0x5e4ac5(0x148)](_0x39da6e,_0xff9307){const _0x4aa9a2=_0x5e4ac5,_0x3fd8b3={'gryLn':function(_0xe831f2,_0x220a29){return _0xe831f2(_0x220a29);},'rItIF':function(_0x44608c,_0x5ae9a0,_0x2b223f,_0x16e049,_0x223258){return _0x44608c(_0x5ae9a0,_0x2b223f,_0x16e049,_0x223258);}},_0x46958e=this['db'][_0x4aa9a2(0xf1)](_0x39da6e);return new Promise((_0x1b0883,_0x3a29e1)=>{const _0xda609=_0x4aa9a2,_0x39cf3b={'KRXNW':function(_0x56d649,_0x3e539f){const _0x4b0fa2=_0x3516;return _0x3fd8b3[_0x4b0fa2(0x109)](_0x56d649,_0x3e539f);},'GQXSg':function(_0x1aac70,_0x114516){return _0x3fd8b3['gryLn'](_0x1aac70,_0x114516);},'bEVft':function(_0x5b2f13,_0x2655d7){const _0x34dfac=_0x3516;return _0x3fd8b3[_0x34dfac(0x109)](_0x5b2f13,_0x2655d7);},'dseSs':function(_0x1f5f0c,_0xd2b552,_0x313e04,_0xc0d106,_0x338298){const _0x31a0a1=_0x3516;return _0x3fd8b3[_0x31a0a1(0x100)](_0x1f5f0c,_0xd2b552,_0x313e04,_0xc0d106,_0x338298);}};_0x46958e[_0xda609(0xf8)](..._0xff9307,(_0x397f15,_0x2057c2)=>{const _0x4823aa=_0xda609;if(_0x397f15)return _0x39cf3b['dseSs'](logError,_0x4823aa(0x149),_0x397f15,_0x39da6e,_0xff9307),_0x1b0883(null);if(!_0x2057c2){_0x39cf3b['KRXNW'](_0x1b0883,null);return;}const _0x5abe9c=_0x2057c2[_0x4823aa(0x126)];NTQQMsgApi[_0x4823aa(0x127)]({'peerUid':_0x2057c2[_0x4823aa(0x11d)],'chatType':_0x2057c2[_0x4823aa(0x165)]},[_0x5abe9c])[_0x4823aa(0x118)](_0x4dba2e=>{const _0x22faf3=_0x4823aa,_0x5820f2=_0x4dba2e[_0x22faf3(0x10c)][0x0];if(!_0x5820f2){_0x39cf3b[_0x22faf3(0xef)](_0x1b0883,null);return;}_0x5820f2['id']=_0x2057c2[_0x22faf3(0x15d)],_0x39cf3b[_0x22faf3(0x166)](_0x1b0883,_0x5820f2);})[_0x4823aa(0x115)](_0x4edc0c=>{const _0x21a35d=_0x4823aa;_0x39cf3b[_0x21a35d(0xdd)](_0x1b0883,null);});});});}async[_0x5e4ac5(0x14c)](_0x1ddbef){const _0x5a9095=_0x5e4ac5,_0x571eb1={'aOsFu':_0x5a9095(0x10b)};if(this[_0x5a9095(0x16b)]['has'](_0x1ddbef))return this[_0x5a9095(0x16b)][_0x5a9095(0xf8)](_0x1ddbef);const _0x30bfe2=_0x571eb1[_0x5a9095(0x10d)];return this['getMsg'](_0x30bfe2,[_0x1ddbef]);}async[_0x5e4ac5(0x15b)](_0x5cf0db){const _0x5257d3=_0x5e4ac5,_0x4dc505={'gOmZb':_0x5257d3(0xe8)};if(this[_0x5257d3(0x16b)]['has'](_0x5cf0db))return this['msgCache'][_0x5257d3(0xf8)](_0x5cf0db);return this['getMsg'](_0x4dc505[_0x5257d3(0x119)],[_0x5cf0db]);}async[_0x5e4ac5(0xff)](_0x2ae22c,_0x51768a){const _0x420965=_0x5e4ac5,_0x5a887e=_0x420965(0x137);return this[_0x420965(0x148)](_0x5a887e,[_0x2ae22c,_0x51768a]);}async[_0x5e4ac5(0xdb)](_0x5c2263,_0xd3a735=!![]){const _0x6199df=_0x5e4ac5,_0x2c5161={'ZIuvN':function(_0x1f6610,_0x127882,_0x40c7a9){return _0x1f6610(_0x127882,_0x40c7a9);},'CkYVp':function(_0x1afa6e,_0x1ce3e6,_0x2f05cb){return _0x1afa6e(_0x1ce3e6,_0x2f05cb);},'FPonX':'db\x20could\x20not\x20add\x20msg'},_0x224246=await this[_0x6199df(0x15b)](_0x5c2263['msgId']);if(_0x224246){if(_0xd3a735)this[_0x6199df(0x105)](_0x5c2263)[_0x6199df(0x118)]();return _0x224246['id'];}const _0x2adef3=this['db']['prepare'](_0x6199df(0x153)),_0xd00853=++this['globalMsgShortId'];return _0x5c2263['id']=_0xd00853,logDebug(_0x6199df(0x112)+_0x5c2263[_0x6199df(0x106)]+_0x6199df(0x15c)+_0x5c2263['id']),this[_0x6199df(0x16b)][_0x6199df(0x15a)](_0xd00853,_0x5c2263),this['msgCache']['set'](_0x5c2263['msgId'],_0x5c2263),_0x2adef3[_0x6199df(0x161)](this[_0x6199df(0xe9)],_0x5c2263[_0x6199df(0x106)],_0x5c2263[_0x6199df(0x13f)]['toString'](),_0x5c2263['peerUid'],_0x5c2263['chatType'],_0x40a8ca=>{const _0x110c30=_0x6199df,_0x274dff={'XkMou':function(_0x559dc4,_0x2ac038,_0x30059b){return _0x2c5161['ZIuvN'](_0x559dc4,_0x2ac038,_0x30059b);},'iFxPp':_0x110c30(0x167)};_0x40a8ca&&(_0x40a8ca['errno']===0x13?this[_0x110c30(0x15b)](_0x5c2263['msgId'])['then'](_0x27d25a=>{const _0x4b4efb=_0x110c30;_0x27d25a?(this[_0x4b4efb(0x16b)][_0x4b4efb(0x15a)](_0xd00853,_0x27d25a),this[_0x4b4efb(0x16b)][_0x4b4efb(0x15a)](_0x27d25a[_0x4b4efb(0x106)],_0x27d25a)):_0x274dff['XkMou'](logError,_0x274dff['iFxPp'],_0x40a8ca);})[_0x110c30(0x115)](_0x525460=>logError(_0x110c30(0x136),_0x525460)):_0x2c5161[_0x110c30(0x131)](logError,_0x2c5161[_0x110c30(0x125)],_0x40a8ca));}),_0xd00853;}async[_0x5e4ac5(0x105)](_0x1aae24){const _0x1f64ef=_0x5e4ac5,_0x21de3b={'MhyEN':function(_0x62c340,_0x47ffe2,_0x3b00fe){return _0x62c340(_0x47ffe2,_0x3b00fe);},'PDsMo':_0x1f64ef(0x164),'RANPL':function(_0x3655e7,_0x123a7b){return _0x3655e7(_0x123a7b);},'ddRsP':'UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?'},_0x1ca9b1=this[_0x1f64ef(0x16b)]['get'](_0x1aae24[_0x1f64ef(0x106)]);_0x1ca9b1&&Object['assign'](_0x1ca9b1,_0x1aae24);_0x21de3b['RANPL'](logDebug,'更新消息,\x20shortId:'+_0x1aae24['id']+',\x20seq:\x20'+_0x1aae24[_0x1f64ef(0x13f)]+_0x1f64ef(0x14a)+_0x1aae24[_0x1f64ef(0x106)]);const _0x10b589=this['db']['prepare'](_0x21de3b[_0x1f64ef(0x154)]);_0x10b589['run'](_0x1aae24['msgSeq'],_0x1aae24[_0x1f64ef(0x106)],_0x19cbbc=>{_0x19cbbc&&_0x21de3b['MhyEN'](logError,_0x21de3b['PDsMo'],_0x19cbbc);});}async[_0x5e4ac5(0xfb)](_0x4ec409){const _0x589072=_0x5e4ac5,_0x272fed={'CTrfK':'INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)'},_0x4e0131=this['db']['prepare'](_0x272fed[_0x589072(0x13b)]);return new Promise((_0xfa35c2,_0x3bf88c)=>{const _0x1c0962=_0x589072,_0xeb2fba={'pezUe':'db\x20could\x20not\x20add\x20file'};_0x4e0131[_0x1c0962(0x161)](_0x4ec409['name'],_0x4ec409[_0x1c0962(0x158)],_0x4ec409[_0x1c0962(0x168)],_0x4ec409[_0x1c0962(0xf6)],_0x4ec409[_0x1c0962(0x113)],_0x4ec409[_0x1c0962(0x142)],JSON[_0x1c0962(0xee)](_0x4ec409[_0x1c0962(0xeb)]),_0x4ec409[_0x1c0962(0x102)],_0x4ec409[_0x1c0962(0x106)],function(_0x1f7264){const _0x775bc0=_0x1c0962;_0x1f7264&&(logError(_0xeb2fba[_0x775bc0(0xf3)],_0x1f7264),_0x3bf88c(_0x1f7264)),_0xfa35c2(null);});});}async[_0x5e4ac5(0xe6)](_0x2dde03,_0x270535){const _0x416392=_0x5e4ac5,_0xad20a6={'zTvTC':function(_0x8082f2,_0x1560b5,_0x35552b){return _0x8082f2(_0x1560b5,_0x35552b);},'EiJIT':_0x416392(0x108),'myhvq':function(_0x6e76ef,_0x37d65c){return _0x6e76ef(_0x37d65c);}},_0x584e6d=this['db'][_0x416392(0xf1)](_0x2dde03);return new Promise((_0x5ea7b6,_0x558c8c)=>{const _0x421d5b=_0x416392,_0x12414c={'JRIuG':function(_0x1ed0c9,_0xe607a2,_0x4bc0ca){const _0x40029e=_0x3516;return _0xad20a6[_0x40029e(0x15f)](_0x1ed0c9,_0xe607a2,_0x4bc0ca);},'gNrKc':_0xad20a6[_0x421d5b(0x160)],'CPHKo':function(_0x41a69d,_0x4f34b4){return _0xad20a6['myhvq'](_0x41a69d,_0x4f34b4);}};_0x584e6d[_0x421d5b(0xf8)](..._0x270535,(_0x52aad8,_0x1a0d60)=>{const _0x1d554e=_0x421d5b;_0x52aad8&&(_0x12414c[_0x1d554e(0x146)](logError,_0x12414c[_0x1d554e(0x141)],_0x52aad8),_0x558c8c(_0x52aad8)),_0x1a0d60&&(_0x1a0d60[_0x1d554e(0xeb)]=JSON['parse'](_0x1a0d60[_0x1d554e(0xeb)])),_0x12414c[_0x1d554e(0x14f)](_0x5ea7b6,_0x1a0d60);});});}async[_0x5e4ac5(0x134)](_0x36976f){const _0x444576=_0x5e4ac5,_0x22d23a={'kojax':_0x444576(0x14b)};return this[_0x444576(0xe6)](_0x22d23a[_0x444576(0x159)],[_0x36976f]);}async['getFileCacheByUuid'](_0x2ee42a){const _0x4b4bd9=_0x5e4ac5,_0x245773={'Khwsc':'SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?'};return this[_0x4b4bd9(0xe6)](_0x245773[_0x4b4bd9(0x10a)],[_0x2ee42a]);}async[_0x5e4ac5(0xf4)](_0x2299c3){const _0x182208=_0x5e4ac5,_0xa3ddb1={'DBJih':function(_0x5e548b,_0x2eb31d){return _0x5e548b(_0x2eb31d);},'bNHNH':_0x182208(0x12f)},_0x2bf25c=this['db'][_0x182208(0xf1)](_0xa3ddb1[_0x182208(0x114)]);return new Promise((_0x435b01,_0x546e2f)=>{const _0x390fe4=_0x182208,_0x15ea54={'FkfRH':_0x390fe4(0x133),'iTbKq':function(_0x5d8751,_0x166f0c){const _0x31e046=_0x390fe4;return _0xa3ddb1[_0x31e046(0x144)](_0x5d8751,_0x166f0c);}};_0x2bf25c['run'](_0x2299c3[_0x390fe4(0x158)],_0x2299c3[_0x390fe4(0x168)],_0x2299c3[_0x390fe4(0x113)],function(_0xb60be3){const _0x4207b7=_0x390fe4;_0xb60be3&&(logError(_0x15ea54[_0x4207b7(0x11f)],_0xb60be3),_0x15ea54[_0x4207b7(0xea)](_0x546e2f,_0xb60be3)),_0x15ea54[_0x4207b7(0xea)](_0x435b01,null);});});}async[_0x5e4ac5(0x103)](){const _0x9d5db9=_0x5e4ac5,_0x2ecece={'sVmUj':function(_0x2e78a6,_0xbca45a,_0x16d68b){return _0x2e78a6(_0xbca45a,_0x16d68b);},'JrOGA':_0x9d5db9(0x16a),'xXbTY':function(_0x27ac19,_0x2e80a9){return _0x27ac19(_0x2e80a9);}},_0x28017d='SELECT\x20*\x20FROM\x20temp_uins';return new Promise((_0x4be4cf,_0x1b345e)=>{const _0x18b159=_0x9d5db9,_0x16e537={'Jdste':function(_0x45ce25,_0x2f92d0,_0x46c685){return _0x2ecece['sVmUj'](_0x45ce25,_0x2f92d0,_0x46c685);},'TyCPR':_0x2ecece[_0x18b159(0x13d)],'huWZs':function(_0x2f5ea1,_0x34adb2){const _0xb7fc04=_0x18b159;return _0x2ecece[_0xb7fc04(0x13a)](_0x2f5ea1,_0x34adb2);}};this['db'][_0x18b159(0x147)](_0x28017d,(_0x472cf9,_0x3faf60)=>{const _0xeaab1c=_0x18b159;_0x472cf9&&(_0x16e537[_0xeaab1c(0x11a)](logError,_0x16e537[_0xeaab1c(0xde)],_0x472cf9),_0x16e537['huWZs'](_0x1b345e,_0x472cf9));const _0x50f1f9={};_0x3faf60[_0xeaab1c(0x163)](_0x31f571=>{const _0x18e1c3=_0xeaab1c;_0x50f1f9[_0x31f571[_0x18e1c3(0x11c)]]=_0x31f571['uid'];}),_0x16e537[_0xeaab1c(0xdc)](_0x4be4cf,_0x50f1f9);});});}async[_0x5e4ac5(0x14d)](_0x582690){const _0x2834ea=_0x5e4ac5,_0x31796e={'NHWtI':function(_0x3b4e4c,_0x4d4e93,_0xc53c22){return _0x3b4e4c(_0x4d4e93,_0xc53c22);},'lgbov':'db\x20could\x20not\x20get\x20temp\x20uin\x20map','pJnNX':function(_0x1e6467,_0x44d145){return _0x1e6467(_0x44d145);},'YenLb':_0x2834ea(0x111)},_0xe02632=_0x31796e['YenLb'];return new Promise((_0x46b963,_0x118c18)=>{const _0x1613ff=_0x2834ea;this['db'][_0x1613ff(0xf8)](_0xe02632,[_0x582690],(_0x390b96,_0x59872a)=>{const _0x44bf4c=_0x1613ff;_0x390b96&&(_0x31796e[_0x44bf4c(0x121)](logError,_0x31796e[_0x44bf4c(0xfa)],_0x390b96),_0x31796e[_0x44bf4c(0x162)](_0x118c18,_0x390b96)),_0x31796e[_0x44bf4c(0x162)](_0x46b963,_0x59872a?.[_0x44bf4c(0x128)]);});});}async['addTempUin'](_0xd999ea,_0xcb7e55){const _0x1d20d5=_0x5e4ac5,_0x35d00f={'QnqlZ':function(_0x532c68,_0x35487d,_0x34e0f6){return _0x532c68(_0x35487d,_0x34e0f6);},'vRXUx':_0x1d20d5(0x151),'rrNoX':function(_0x4ac4fb,_0x1f5ac5){return _0x4ac4fb(_0x1f5ac5);},'syzaK':_0x1d20d5(0x14e)},_0x30bab9=await this[_0x1d20d5(0x14d)](_0xd999ea);if(!_0x30bab9){const _0x2694ae=this['db']['prepare'](_0x35d00f[_0x1d20d5(0x15e)]);return new Promise((_0x51bff2,_0x5a8cc0)=>{const _0x3a02a6=_0x1d20d5,_0x1377b5={'xtiDJ':function(_0x54115d,_0x2e0154,_0x45be2a){const _0x5a8bec=_0x3516;return _0x35d00f[_0x5a8bec(0x150)](_0x54115d,_0x2e0154,_0x45be2a);},'fBOJp':_0x35d00f[_0x3a02a6(0xfe)],'bBDhd':function(_0x49ee24,_0x1f4b22){const _0x38a72d=_0x3a02a6;return _0x35d00f[_0x38a72d(0x10e)](_0x49ee24,_0x1f4b22);}};_0x2694ae['run'](_0xd999ea,_0xcb7e55,function(_0x11c1d0){const _0x732aed=_0x3a02a6;_0x11c1d0&&(_0x1377b5[_0x732aed(0xf7)](logError,_0x1377b5[_0x732aed(0x145)],_0x11c1d0),_0x1377b5[_0x732aed(0x129)](_0x5a8cc0,_0x11c1d0)),_0x1377b5[_0x732aed(0x129)](_0x51bff2,null);});});}}}export const dbUtil=new DBUtil();