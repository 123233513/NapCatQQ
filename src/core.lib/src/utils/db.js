const _0x25f920=_0x411a;(function(_0x2def3f,_0x4b41e6){const _0x508973=_0x411a,_0x131644=_0x2def3f();while(!![]){try{const _0x15e039=-parseInt(_0x508973(0x181))/0x1+parseInt(_0x508973(0x1c5))/0x2+-parseInt(_0x508973(0x179))/0x3*(-parseInt(_0x508973(0x1ae))/0x4)+parseInt(_0x508973(0x145))/0x5+-parseInt(_0x508973(0x1d2))/0x6*(-parseInt(_0x508973(0x169))/0x7)+-parseInt(_0x508973(0x14f))/0x8*(parseInt(_0x508973(0x141))/0x9)+parseInt(_0x508973(0x154))/0xa*(-parseInt(_0x508973(0x194))/0xb);if(_0x15e039===_0x4b41e6)break;else _0x131644['push'](_0x131644['shift']());}catch(_0x95a4c7){_0x131644['push'](_0x131644['shift']());}}}(_0x5534,0x70a9f));import _0x4bd893 from'sqlite3';function _0x5534(){const _0x5ab3d6=['DKqqv','810611fjhyVs','globalMsgShortId','catch','Could\x20not\x20connect\x20to\x20database','getFileCache','addMsg','vjAva','SpcUk','YrGrN','uid','elementType','updateMsg\x20db\x20error','eMaLA','uin','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','msgCache','close','mkIEZ',',\x20seq:\x20','3465WhiMTy','iFkwi','SfeaO','db\x20could\x20not\x20get\x20file\x20cache','msgList','getMsgBySeq','path','GDhuc','addFileCache','shortId','UauZP','createTable','getReceivedTempUinMap','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','getFileCacheByUuid','BntrG','parse','ELqfu','Could\x20not\x20get\x20msg','LWGsS','has','FaeSd','Could\x20not\x20create\x20table\x20msgs','AMhAl','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?',',\x20msgId:\x20','2576mgxVyq','UDtQc','nOxFR','longId','url','lKDyr','run','FUmkZ','rVlxw','then','trhXP','db\x20could\x20not\x20add\x20temp\x20uin','getCurrentMaxShortId','ZVtJj','errno','清理消息缓存','irXaH','stringify','eyjeT','name','getFileCacheByName','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?','INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)','1426626ltEIlr','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','tSnFw','ExUQY','sZBbP','prepare','sivpl','VQGYH','记录消息到数据库,\x20消息长id:\x20','bIsur','HLzlw','OPEN_READWRITE','set','6NnokNn','9bvxbbv','msgSeq','FwlhA','init','886545IlwNBa','db\x20could\x20not\x20add\x20file','getUidByTempUin','mHZkA','uuid','HfMor','数据库中消息最大短id','Database','delete','uEkiC','1164864VcgZNJ','MNFmC','更新消息,\x20shortId:','element','SELECT\x20*\x20FROM\x20temp_uins','13170RWmoRD','getMsgByLongId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs','qDxTl','db\x20getMsgByLongId\x20error','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','maxId','UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?','Could\x20not\x20create\x20table\x20files','msgId','jpCJG','nZIIq','getMsgsByMsgId','all','getMsg','updateFileCache','CdAZE','assign','CXpud','db\x20could\x20not\x20get\x20temp\x20uin\x20map','4411589QAuJIT','INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','rRXtI','kOjNt','UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?','db\x20could\x20not\x20add\x20msg','apltY','brSmy','aEmre','updateMsg','get','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','peerUid','stack','chatType','1452gsKGag','elementId','OPEN_CREATE','BDnSx','EAAIG','jeHDk','lvOao'];_0x5534=function(){return _0x5ab3d6;};return _0x5534();}import{logDebug,logError}from'@/common/utils/log';import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async[_0x25f920(0x144)](_0x36e9bf){const _0x4a3099={'DKqqv':function(_0x5f2abe,_0x577c6a){return _0x5f2abe(_0x577c6a);},'FaeSd':function(_0x45d511){return _0x45d511();},'aEmre':function(_0x1f9449,_0x59aa28){return _0x1f9449|_0x59aa28;}};if(this['db'])return;return new Promise((_0x4bc0a7,_0x46b314)=>{const _0xc5e7eb=_0x411a,_0x3ddf8d={'GDhuc':function(_0x46ac89,_0x27b83a){const _0x49c1b3=_0x411a;return _0x4a3099[_0x49c1b3(0x180)](_0x46ac89,_0x27b83a);},'QqSeq':function(_0x4109ee){const _0x36e510=_0x411a;return _0x4a3099[_0x36e510(0x1a9)](_0x4109ee);}};this['db']=new _0x4bd893[(_0xc5e7eb(0x14c))](_0x36e9bf,_0x4a3099[_0xc5e7eb(0x172)](_0x4bd893[_0xc5e7eb(0x1d0)],_0x4bd893[_0xc5e7eb(0x17b)]),_0x3e61fa=>{const _0x36a4bf=_0xc5e7eb;if(_0x3e61fa){logError(_0x36a4bf(0x184),_0x3e61fa),_0x3ddf8d[_0x36a4bf(0x19b)](_0x46b314,_0x3e61fa);return;}this[_0x36a4bf(0x19f)](),_0x3ddf8d['QqSeq'](_0x4bc0a7);});});}[_0x25f920(0x19f)](){throw new Error('Method\x20not\x20implemented.');}[_0x25f920(0x191)](){const _0x1fb896=_0x25f920;this['db']?.[_0x1fb896(0x191)]();}}class DBUtil extends DBUtilBase{[_0x25f920(0x190)]=new Map();[_0x25f920(0x182)]=-0x7ffffff8;constructor(){const _0x338dca=_0x25f920,_0x41d04c={'ExUQY':function(_0x18af55,_0x5be065){return _0x18af55>_0x5be065;},'EAAIG':function(_0x4d5431,_0x3ebfc4){return _0x4d5431-_0x3ebfc4;},'eMaLA':function(_0xc8d338,_0x590799){return _0xc8d338(_0x590799);},'BDnSx':function(_0xb1fb77,_0xfbd7c9){return _0xb1fb77(_0xfbd7c9);},'uEkiC':function(_0x202102,_0x4fb136){return _0x202102*_0x4fb136;},'AMhAl':function(_0x1991d8,_0x13421d,_0x100bcb){return _0x1991d8(_0x13421d,_0x100bcb);}};super();const _0x4631e8=_0x41d04c[_0x338dca(0x14e)](_0x41d04c[_0x338dca(0x14e)](0x3e8,0x3c),0xa);_0x41d04c[_0x338dca(0x1ab)](setInterval,()=>{const _0x1328fc=_0x338dca;_0x41d04c[_0x1328fc(0x17c)](logDebug,_0x1328fc(0x1bd)),this[_0x1328fc(0x190)]['forEach']((_0x4d9a91,_0x56b567)=>{const _0x2dab54=_0x1328fc;_0x41d04c[_0x2dab54(0x1c8)](_0x41d04c[_0x2dab54(0x17d)](Date['now'](),_0x41d04c[_0x2dab54(0x18d)](parseInt,_0x4d9a91['msgTime'])*0x3e8),_0x4631e8)&&this['msgCache'][_0x2dab54(0x14d)](_0x56b567);});},_0x4631e8);}async[_0x25f920(0x144)](_0xe4f8ec){const _0x5a3ff2=_0x25f920;await super['init'](_0xe4f8ec),this[_0x5a3ff2(0x182)]=await this[_0x5a3ff2(0x1ba)]();}['createTable'](){const _0x2af276=_0x25f920,_0x1b745b={'nOxFR':function(_0x48310b,_0x9fa823,_0x127c13){return _0x48310b(_0x9fa823,_0x127c13);},'iFkwi':_0x2af276(0x15d),'brSmy':function(_0x1de900,_0x3172c9,_0x5958a3){return _0x1de900(_0x3172c9,_0x5958a3);},'apltY':'Could\x20not\x20create\x20table\x20temp_uins'},_0x1051b1=_0x2af276(0x175);this['db'][_0x2af276(0x1b4)](_0x1051b1,function(_0x46c51e){const _0x44d260=_0x2af276;_0x46c51e&&_0x1b745b[_0x44d260(0x1b0)](logError,_0x44d260(0x1aa),_0x46c51e[_0x44d260(0x177)]);});const _0xe14b81=_0x2af276(0x156);this['db']['run'](_0xe14b81,function(_0x4ad55c){const _0x34e914=_0x2af276;_0x4ad55c&&logError(_0x1b745b[_0x34e914(0x195)],_0x4ad55c);});const _0x403d10=_0x2af276(0x16b);this['db']['run'](_0x403d10,function(_0x45eb08){const _0x5ba664=_0x2af276;_0x45eb08&&_0x1b745b[_0x5ba664(0x171)](logError,_0x1b745b[_0x5ba664(0x170)],_0x45eb08);});}async[_0x25f920(0x1ba)](){const _0x405178=_0x25f920,_0x5ac4d8={'pXyqk':_0x405178(0x14b)};return new Promise((_0x5394f8,_0x35718a)=>{const _0x33bf4f=_0x405178,_0x411ccf={'rRXtI':_0x5ac4d8['pXyqk'],'mkIEZ':function(_0x770445,_0x5975b0){return _0x770445(_0x5975b0);}};this['db']['get'](_0x33bf4f(0x157),(_0xb5fe56,_0x5e776d)=>{const _0x5e147e=_0x33bf4f;if(_0xb5fe56)return logDebug('Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640',_0xb5fe56),_0x5394f8(-0x7ffffff8);logDebug(_0x411ccf[_0x5e147e(0x16c)],_0x5e776d?.[_0x5e147e(0x15b)]),_0x411ccf[_0x5e147e(0x192)](_0x5394f8,_0x5e776d?.[_0x5e147e(0x15b)]??-0x7ffffff8);});});}async[_0x25f920(0x163)](_0xef0da2,_0x52ec51){const _0x13896c=_0x25f920,_0x1b1b23={'jpCJG':function(_0x8558e8,_0xa8f40a){return _0x8558e8(_0xa8f40a);},'jqNaP':_0x13896c(0x1a6),'dzGWp':function(_0x105270,_0x1021a1){return _0x105270(_0x1021a1);},'mHZkA':function(_0x195267,_0x4f6b9c){return _0x195267(_0x4f6b9c);}},_0x2a4f89=this['db'][_0x13896c(0x1ca)](_0xef0da2);return new Promise((_0x15bb79,_0x5d0e97)=>{const _0x34655e=_0x13896c,_0xf939e2={'BntrG':function(_0x179862,_0x513f88){return _0x179862(_0x513f88);}};_0x2a4f89[_0x34655e(0x174)](..._0x52ec51,(_0x4378a0,_0x1b28e9)=>{const _0x5d39f5=_0x34655e,_0x2a8980={'xDSnc':function(_0x3f6d53,_0x109be9){const _0x517156=_0x411a;return _0x1b1b23[_0x517156(0x15f)](_0x3f6d53,_0x109be9);}};if(_0x4378a0)return logError(_0x1b1b23['jqNaP'],_0x4378a0,_0xef0da2,_0x52ec51),_0x1b1b23['dzGWp'](_0x15bb79,null);if(!_0x1b28e9){_0x1b1b23[_0x5d39f5(0x148)](_0x15bb79,null);return;}const _0x313ba6=_0x1b28e9[_0x5d39f5(0x1b1)];NTQQMsgApi[_0x5d39f5(0x161)]({'peerUid':_0x1b28e9[_0x5d39f5(0x176)],'chatType':_0x1b28e9[_0x5d39f5(0x178)]},[_0x313ba6])[_0x5d39f5(0x1b7)](_0x3a5a26=>{const _0x5801ba=_0x5d39f5,_0x159932=_0x3a5a26[_0x5801ba(0x198)][0x0];if(!_0x159932){_0xf939e2[_0x5801ba(0x1a3)](_0x15bb79,null);return;}_0x159932['id']=_0x1b28e9[_0x5801ba(0x19d)],_0x15bb79(_0x159932);})[_0x5d39f5(0x183)](_0x5d2a8f=>{_0x2a8980['xDSnc'](_0x15bb79,null);});});});}async['getMsgByShortId'](_0x2263a0){const _0x459131=_0x25f920,_0x3f1f50={'rVlxw':_0x459131(0x1ac)};if(this[_0x459131(0x190)]['has'](_0x2263a0))return this['msgCache'][_0x459131(0x174)](_0x2263a0);const _0x2687ec=_0x3f1f50[_0x459131(0x1b6)];return this[_0x459131(0x163)](_0x2687ec,[_0x2263a0]);}async[_0x25f920(0x155)](_0x1abafa){const _0x5953cf=_0x25f920,_0x34cf3b={'ByErx':_0x5953cf(0x1c3)};if(this['msgCache'][_0x5953cf(0x1a8)](_0x1abafa))return this[_0x5953cf(0x190)]['get'](_0x1abafa);return this[_0x5953cf(0x163)](_0x34cf3b['ByErx'],[_0x1abafa]);}async[_0x25f920(0x199)](_0x17f27e,_0x2e84d3){const _0x5294de=_0x25f920,_0x69cfa1={'riqQz':'SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?'},_0x106767=_0x69cfa1['riqQz'];return this[_0x5294de(0x163)](_0x106767,[_0x17f27e,_0x2e84d3]);}async[_0x25f920(0x186)](_0x48a37f,_0x7fa660=!![]){const _0x5d8e90=_0x25f920,_0x435b3a={'vjAva':function(_0x15de1f,_0x1aa4fb,_0x2dcadf){return _0x15de1f(_0x1aa4fb,_0x2dcadf);},'LWGsS':_0x5d8e90(0x1a1),'RuvJW':function(_0x5e6cac,_0x14109f){return _0x5e6cac===_0x14109f;},'irXaH':function(_0x5906ed,_0x1bc8d4,_0x11d128){return _0x5906ed(_0x1bc8d4,_0x11d128);},'FUmkZ':_0x5d8e90(0x16f),'PcUyz':function(_0x1c35d4,_0x1ba1d6){return _0x1c35d4(_0x1ba1d6);}},_0x4c593e=await this[_0x5d8e90(0x155)](_0x48a37f['msgId']);if(_0x4c593e){if(_0x7fa660)this['updateMsg'](_0x48a37f)['then']();return _0x4c593e['id'];}const _0xef4f50=this['db']['prepare'](_0x5d8e90(0x1c4)),_0x25aacb=++this[_0x5d8e90(0x182)];return _0x48a37f['id']=_0x25aacb,_0x435b3a['PcUyz'](logDebug,_0x5d8e90(0x1cd)+_0x48a37f['msgId']+',\x20短id:\x20'+_0x48a37f['id']),this[_0x5d8e90(0x190)][_0x5d8e90(0x1d1)](_0x25aacb,_0x48a37f),this[_0x5d8e90(0x190)][_0x5d8e90(0x1d1)](_0x48a37f['msgId'],_0x48a37f),_0xef4f50[_0x5d8e90(0x1b4)](this[_0x5d8e90(0x182)],_0x48a37f[_0x5d8e90(0x15e)],_0x48a37f[_0x5d8e90(0x142)]['toString'](),_0x48a37f[_0x5d8e90(0x176)],_0x48a37f[_0x5d8e90(0x178)],_0x41a4dd=>{const _0x5707b3=_0x5d8e90,_0x2bc18e={'XwtDY':function(_0x58f93f,_0x508bfe,_0xb22b45){const _0x5c6b6d=_0x411a;return _0x435b3a[_0x5c6b6d(0x187)](_0x58f93f,_0x508bfe,_0xb22b45);},'CXpud':_0x435b3a[_0x5707b3(0x1a7)]};_0x41a4dd&&(_0x435b3a['RuvJW'](_0x41a4dd[_0x5707b3(0x1bc)],0x13)?this[_0x5707b3(0x155)](_0x48a37f['msgId'])[_0x5707b3(0x1b7)](_0x12ef47=>{const _0x1ac892=_0x5707b3;_0x12ef47?(this[_0x1ac892(0x190)]['set'](_0x25aacb,_0x12ef47),this[_0x1ac892(0x190)][_0x1ac892(0x1d1)](_0x12ef47['msgId'],_0x12ef47)):_0x2bc18e['XwtDY'](logError,_0x2bc18e[_0x1ac892(0x167)],_0x41a4dd);})['catch'](_0xb260ed=>logError(_0x5707b3(0x159),_0xb260ed)):_0x435b3a[_0x5707b3(0x1be)](logError,_0x435b3a[_0x5707b3(0x1b5)],_0x41a4dd));}),_0x25aacb;}async[_0x25f920(0x173)](_0x2bdede){const _0x4ebaa2=_0x25f920,_0x34a169={'SoFBH':function(_0x129cae,_0x4626b1,_0xb5e72c){return _0x129cae(_0x4626b1,_0xb5e72c);},'uYqsJ':_0x4ebaa2(0x18c),'lKDyr':function(_0x2779eb,_0x5b4e2d){return _0x2779eb(_0x5b4e2d);},'lvOao':_0x4ebaa2(0x16e)},_0x255d0a=this[_0x4ebaa2(0x190)][_0x4ebaa2(0x174)](_0x2bdede[_0x4ebaa2(0x15e)]);_0x255d0a&&Object[_0x4ebaa2(0x166)](_0x255d0a,_0x2bdede);_0x34a169[_0x4ebaa2(0x1b3)](logDebug,_0x4ebaa2(0x151)+_0x2bdede['id']+_0x4ebaa2(0x193)+_0x2bdede['msgSeq']+_0x4ebaa2(0x1ad)+_0x2bdede[_0x4ebaa2(0x15e)]);const _0x590341=this['db']['prepare'](_0x34a169[_0x4ebaa2(0x17f)]);_0x590341['run'](_0x2bdede[_0x4ebaa2(0x142)],_0x2bdede['msgId'],_0x347f62=>{_0x347f62&&_0x34a169['SoFBH'](logError,_0x34a169['uYqsJ'],_0x347f62);});}async[_0x25f920(0x19c)](_0x46b149){const _0xf01812=_0x25f920,_0x24afd2={'sivpl':function(_0x1b1856,_0x5c1560,_0x143f8d){return _0x1b1856(_0x5c1560,_0x143f8d);},'SfeaO':_0xf01812(0x146),'CLONk':_0xf01812(0x1c6)},_0x25e733=this['db'][_0xf01812(0x1ca)](_0x24afd2['CLONk']);return new Promise((_0x22ee17,_0x455938)=>{const _0x31bf05=_0xf01812,_0x505382={'FwlhA':function(_0x404533,_0x3799d2,_0x1ab1dd){const _0x1afb8e=_0x411a;return _0x24afd2[_0x1afb8e(0x1cb)](_0x404533,_0x3799d2,_0x1ab1dd);},'sZBbP':_0x24afd2[_0x31bf05(0x196)],'nZIIq':function(_0xcad13e,_0x432312){return _0xcad13e(_0x432312);}};_0x25e733[_0x31bf05(0x1b4)](_0x46b149[_0x31bf05(0x1c1)],_0x46b149[_0x31bf05(0x19a)],_0x46b149['url'],_0x46b149['size'],_0x46b149[_0x31bf05(0x149)],_0x46b149[_0x31bf05(0x18b)],JSON[_0x31bf05(0x1bf)](_0x46b149['element']),_0x46b149[_0x31bf05(0x17a)],_0x46b149['msgId'],function(_0x2628d2){const _0x3b822e=_0x31bf05;_0x2628d2&&(_0x505382[_0x3b822e(0x143)](logError,_0x505382[_0x3b822e(0x1c9)],_0x2628d2),_0x505382[_0x3b822e(0x160)](_0x455938,_0x2628d2)),_0x22ee17(null);});});}async[_0x25f920(0x185)](_0x22aa8d,_0x6f1d7a){const _0x1d84a3=_0x25f920,_0x11007d={'kOjNt':_0x1d84a3(0x197),'trhXP':function(_0x3bc7e7,_0x108e21){return _0x3bc7e7(_0x108e21);}},_0x4305cd=this['db'][_0x1d84a3(0x1ca)](_0x22aa8d);return new Promise((_0x10db99,_0xc25b2c)=>{const _0x4f66a9=_0x1d84a3,_0x4aef48={'UauZP':_0x11007d[_0x4f66a9(0x16d)],'MNFmC':function(_0x2c8b1c,_0x58be67){const _0x1d4e1b=_0x4f66a9;return _0x11007d[_0x1d4e1b(0x1b8)](_0x2c8b1c,_0x58be67);}};_0x4305cd[_0x4f66a9(0x174)](..._0x6f1d7a,(_0x101c91,_0x491067)=>{const _0x5613b8=_0x4f66a9;_0x101c91&&(logError(_0x4aef48[_0x5613b8(0x19e)],_0x101c91),_0xc25b2c(_0x101c91)),_0x491067&&(_0x491067[_0x5613b8(0x152)]=JSON[_0x5613b8(0x1a4)](_0x491067[_0x5613b8(0x152)])),_0x4aef48[_0x5613b8(0x150)](_0x10db99,_0x491067);});});}async[_0x25f920(0x1c2)](_0x457752){const _0x30939d=_0x25f920,_0xa61b24={'SCFZN':_0x30939d(0x18f)};return this['getFileCache'](_0xa61b24['SCFZN'],[_0x457752]);}async[_0x25f920(0x1a2)](_0x11e8ff){const _0x845873=_0x25f920,_0x360ecc={'VQGYH':'SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?'};return this[_0x845873(0x185)](_0x360ecc[_0x845873(0x1cc)],[_0x11e8ff]);}async[_0x25f920(0x164)](_0x558636){const _0xa77c71=_0x25f920,_0x4c3661={'UDtQc':function(_0x1c013c,_0x5a1759,_0x3955e8){return _0x1c013c(_0x5a1759,_0x3955e8);},'lkqhm':'db\x20could\x20not\x20update\x20file\x20cache'},_0x1bd7ec=this['db']['prepare'](_0xa77c71(0x15c));return new Promise((_0x46a5ef,_0x4ccd1f)=>{const _0x8cd736=_0xa77c71;_0x1bd7ec['run'](_0x558636[_0x8cd736(0x19a)],_0x558636[_0x8cd736(0x1b2)],_0x558636[_0x8cd736(0x149)],function(_0x4e395c){const _0x583f50=_0x8cd736;_0x4e395c&&(_0x4c3661[_0x583f50(0x1af)](logError,_0x4c3661['lkqhm'],_0x4e395c),_0x4ccd1f(_0x4e395c)),_0x46a5ef(null);});});}async[_0x25f920(0x1a0)](){const _0x3cd971=_0x25f920,_0x6b5b08={'SpcUk':function(_0x262f18,_0x4fc4b1,_0x278912){return _0x262f18(_0x4fc4b1,_0x278912);},'CdAZE':function(_0x75cbf7,_0x58539c){return _0x75cbf7(_0x58539c);},'ZVtJj':_0x3cd971(0x153)},_0x110013=_0x6b5b08[_0x3cd971(0x1bb)];return new Promise((_0x2669d4,_0x4cd09a)=>{const _0x27bb63=_0x3cd971,_0x3f1600={'YrGrN':function(_0x11a13b,_0x56528f,_0x4f1d9a){const _0x58d84e=_0x411a;return _0x6b5b08[_0x58d84e(0x188)](_0x11a13b,_0x56528f,_0x4f1d9a);},'qDxTl':'db\x20could\x20not\x20get\x20temp\x20uin\x20map','ELqfu':function(_0x49c49c,_0xabef77){const _0x902eda=_0x411a;return _0x6b5b08[_0x902eda(0x165)](_0x49c49c,_0xabef77);},'NBBQh':function(_0xe1d7c1,_0x2dfc74){return _0xe1d7c1(_0x2dfc74);}};this['db'][_0x27bb63(0x162)](_0x110013,(_0x4078be,_0x2880ad)=>{const _0x10bba6=_0x27bb63;_0x4078be&&(_0x3f1600[_0x10bba6(0x189)](logError,_0x3f1600[_0x10bba6(0x158)],_0x4078be),_0x3f1600[_0x10bba6(0x1a5)](_0x4cd09a,_0x4078be));const _0x3c453a={};_0x2880ad['forEach'](_0x44228c=>{const _0x2ff2ff=_0x10bba6;_0x3c453a[_0x44228c[_0x2ff2ff(0x18e)]]=_0x44228c[_0x2ff2ff(0x18a)];}),_0x3f1600['NBBQh'](_0x2669d4,_0x3c453a);});});}async['getUidByTempUin'](_0x141c82){const _0x4460f8=_0x25f920,_0x74225c={'bIsur':function(_0x48377,_0x43cc0c,_0x4f7a7d){return _0x48377(_0x43cc0c,_0x4f7a7d);},'eyjeT':_0x4460f8(0x168),'VbeXV':function(_0xf22fbf,_0xfe5be6){return _0xf22fbf(_0xfe5be6);},'HfMor':function(_0x5ef436,_0xc8ebad){return _0x5ef436(_0xc8ebad);},'HLzlw':_0x4460f8(0x15a)},_0x856a9c=_0x74225c[_0x4460f8(0x1cf)];return new Promise((_0x4b58be,_0xdc623a)=>{const _0x338a5c=_0x4460f8;this['db'][_0x338a5c(0x174)](_0x856a9c,[_0x141c82],(_0x2af138,_0x7a1ac0)=>{const _0x1863a8=_0x338a5c;_0x2af138&&(_0x74225c[_0x1863a8(0x1ce)](logError,_0x74225c[_0x1863a8(0x1c0)],_0x2af138),_0x74225c['VbeXV'](_0xdc623a,_0x2af138)),_0x74225c[_0x1863a8(0x14a)](_0x4b58be,_0x7a1ac0?.[_0x1863a8(0x18a)]);});});}async['addTempUin'](_0x2eb705,_0x59eb42){const _0x423dc5=_0x25f920,_0x4e286f={'jeHDk':function(_0x535402,_0x4870cf){return _0x535402(_0x4870cf);},'tSnFw':_0x423dc5(0x16a)},_0x4aa585=await this[_0x423dc5(0x147)](_0x2eb705);if(!_0x4aa585){const _0x38c5db=this['db'][_0x423dc5(0x1ca)](_0x4e286f[_0x423dc5(0x1c7)]);return new Promise((_0x41a173,_0x1ab3e6)=>{const _0x2f8329=_0x423dc5;_0x38c5db[_0x2f8329(0x1b4)](_0x2eb705,_0x59eb42,function(_0x68f67){const _0x5ef79b=_0x2f8329;_0x68f67&&(logError(_0x5ef79b(0x1b9),_0x68f67),_0x4e286f[_0x5ef79b(0x17e)](_0x1ab3e6,_0x68f67)),_0x4e286f[_0x5ef79b(0x17e)](_0x41a173,null);});});}}}function _0x411a(_0x167b80,_0x505d54){const _0x55345e=_0x5534();return _0x411a=function(_0x411ab0,_0x40dc1e){_0x411ab0=_0x411ab0-0x141;let _0x160c44=_0x55345e[_0x411ab0];return _0x160c44;},_0x411a(_0x167b80,_0x505d54);}export const dbUtil=new DBUtil();