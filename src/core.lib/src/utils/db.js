const _0xdecec8=_0x23ef;(function(_0x4a1821,_0x93a97a){const _0x45557e=_0x23ef,_0x228169=_0x4a1821();while(!![]){try{const _0x37ea27=-parseInt(_0x45557e(0x1d2))/0x1+-parseInt(_0x45557e(0x1de))/0x2+parseInt(_0x45557e(0x193))/0x3+parseInt(_0x45557e(0x17d))/0x4*(-parseInt(_0x45557e(0x186))/0x5)+-parseInt(_0x45557e(0x1da))/0x6+parseInt(_0x45557e(0x1e9))/0x7+parseInt(_0x45557e(0x1aa))/0x8*(parseInt(_0x45557e(0x1c2))/0x9);if(_0x37ea27===_0x93a97a)break;else _0x228169['push'](_0x228169['shift']());}catch(_0x5508d6){_0x228169['push'](_0x228169['shift']());}}}(_0x1726,0x5d05c));import _0x4e0a05 from'sqlite3';import{logDebug,logError}from'@/common/utils/log';function _0x23ef(_0x1441b8,_0x17ed0a){const _0x17263c=_0x1726();return _0x23ef=function(_0x23eff5,_0x4bde32){_0x23eff5=_0x23eff5-0x15e;let _0x3eb578=_0x17263c[_0x23eff5];return _0x3eb578;},_0x23ef(_0x1441b8,_0x17ed0a);}function _0x1726(){const _0x436452=['uid','Could\x20not\x20create\x20table\x20files','updateMsg','catch','now','getUidByTempUin','updateFileCache','SELECT\x20*\x20FROM\x20temp_uins\x20WHERE\x20uin\x20=\x20?','pSiZG','chatType','cJJRx','db\x20getMsgByLongId\x20error','Mybel','then','fRHga','661808PiRISv','getMsgByLongId','all','更新消息,\x20shortId:','getMsgBySeq','ztaLS','tpGRk','清理消息缓存','4224912zkviXH','fpEcc','IlsIQ','QgIaW','568012cCoGbC','Could\x20not\x20create\x20table\x20msgs','url','globalMsgShortId','msgId','addFileCache','数据库中消息最大短id','hKgSW','IkDMJ','stack','jFmfr','2112124AUjgQK','EQKbg',',\x20seq:\x20','elementId','prepare','run','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20shortId\x20=\x20?','parse','getCurrentMaxShortId','smGEN','yrgCW','JhYKE','getMsgByShortId','SCJGp','iQOoz','UPDATE\x20files\x20SET\x20path\x20=\x20?,\x20url\x20=\x20?\x20WHERE\x20uuid\x20=\x20?','FNZsS','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20msgs\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20shortId\x20INTEGER\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20longId\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20seq\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20peerUid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatType\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','fwQke','kltzc','EYDZh','pxVVE','name','db\x20could\x20not\x20add\x20msg','UjhdP','init','niYPi','uin','SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20peerUid\x20=\x20?\x20AND\x20seq\x20=\x20?','TStqu','path','set','YraVW','WWmIP','1275788CohNcN','getFileCacheByUuid','updateMsg\x20db\x20error','get','size','close','Could\x20not\x20get\x20max\x20short\x20id,\x20Use\x20default\x20-2147483640','errno','element','10MyrqDe','UckPx','KaDSi','Database','NRxiQ','shortId','YZHCQ','createTable','RqfIq','INSERT\x20INTO\x20files\x20(name,\x20path,\x20url,\x20size,\x20uuid,\x20elementType\x20,element,\x20elementId,\x20msgId)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','db\x20could\x20not\x20get\x20file\x20cache','HgumD','feAmz','128514SHOjOH','psaPi','aoqBe','NqUis','FludF','Xxwdu','getMsg','db\x20could\x20not\x20get\x20msg\x20by\x20long\x20id','pGKCl','db\x20could\x20not\x20update\x20file\x20cache','zGtlE','SELECT\x20*\x20FROM\x20files\x20WHERE\x20name\x20=\x20?','LXwvf','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20temp_uins\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uin\x20TEXT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)','UPDATE\x20msgs\x20SET\x20seq=?\x20WHERE\x20longId=?','INSERT\x20INTO\x20temp_uins\x20(uin,\x20uid)\x20VALUES\x20(?,\x20?)','peerUid','EowtX','njVHY','SELECT\x20*\x20FROM\x20temp_uins','VAuof','uVUkm','uuid','9297240lkjJBs','getFileCacheByName','msgSeq','wZNCz','Could\x20not\x20connect\x20to\x20database','Could\x20not\x20get\x20msg','CnbNZ','记录消息到数据库,\x20消息长id:\x20','OPEN_CREATE','maxId',',\x20短id:\x20','forEach','Msrqr','ueCYD','db\x20could\x20not\x20get\x20temp\x20uin\x20map','getFileCache','addMsg','rxJpV','fztpz','xCOMQ',',\x20msgId:\x20','msgCache','longId','assign','18tfATkh'];_0x1726=function(){return _0x436452;};return _0x1726();}import{NTQQMsgApi}from'@/core';class DBUtilBase{['db'];async['init'](_0x46499e){const _0x439807=_0x23ef,_0x57cad5={'niYPi':function(_0x4d9dfe,_0xc824b,_0x4abc89){return _0x4d9dfe(_0xc824b,_0x4abc89);},'psaPi':_0x439807(0x1ae),'IlsIQ':function(_0xf14f21){return _0xf14f21();},'FNZsS':function(_0x52e02e,_0x1b3526){return _0x52e02e|_0x1b3526;}};if(this['db'])return;return new Promise((_0x44a50c,_0x3b5588)=>{const _0x3a691d=_0x439807,_0x4af0fb={'Msrqr':function(_0x1952cd,_0x4f256c,_0x7f3959){const _0x379599=_0x23ef;return _0x57cad5[_0x379599(0x175)](_0x1952cd,_0x4f256c,_0x7f3959);},'uVUkm':_0x57cad5[_0x3a691d(0x194)],'UvlVM':function(_0xcba8d9){const _0x2c9946=_0x3a691d;return _0x57cad5[_0x2c9946(0x1dc)](_0xcba8d9);}};this['db']=new _0x4e0a05[(_0x3a691d(0x189))](_0x46499e,_0x57cad5[_0x3a691d(0x16b)](_0x4e0a05['OPEN_READWRITE'],_0x4e0a05[_0x3a691d(0x1b2)]),_0x5c7ec9=>{const _0x21072c=_0x3a691d;if(_0x5c7ec9){_0x4af0fb[_0x21072c(0x1b6)](logError,_0x4af0fb[_0x21072c(0x1a8)],_0x5c7ec9),_0x3b5588(_0x5c7ec9);return;}this[_0x21072c(0x18d)](),_0x4af0fb['UvlVM'](_0x44a50c);});});}[_0xdecec8(0x18d)](){throw new Error('Method\x20not\x20implemented.');}['close'](){const _0x3d326a=_0xdecec8;this['db']?.[_0x3d326a(0x182)]();}}class DBUtil extends DBUtilBase{[_0xdecec8(0x1bf)]=new Map();[_0xdecec8(0x1e1)]=-0x7ffffff8;constructor(){const _0x55ac7d=_0xdecec8,_0x276141={'jFmfr':function(_0x12cc3e,_0x383785){return _0x12cc3e-_0x383785;},'TxhWa':function(_0x311203,_0x44d40d){return _0x311203(_0x44d40d);},'YraVW':function(_0x1b47ed,_0x1d2a12){return _0x1b47ed(_0x1d2a12);},'fztpz':function(_0x48258b,_0x38c4b1){return _0x48258b*_0x38c4b1;},'zGtlE':function(_0x3951c8,_0x287f2e){return _0x3951c8*_0x287f2e;}};super();const _0x5cc969=_0x276141[_0x55ac7d(0x1bc)](_0x276141[_0x55ac7d(0x19d)](0x3e8,0x3c),0xa);setInterval(()=>{const _0x5ebfc9=_0x55ac7d,_0x22fd24={'UckPx':function(_0x5b594d,_0x4375e4){return _0x5b594d>_0x4375e4;},'NKZwq':function(_0x43d508,_0x1afcac){const _0x212fbc=_0x23ef;return _0x276141[_0x212fbc(0x1e8)](_0x43d508,_0x1afcac);},'kltzc':function(_0x1308af,_0x38f30d){return _0x1308af*_0x38f30d;},'UPpJw':function(_0x17bb05,_0x28ec41){return _0x276141['TxhWa'](_0x17bb05,_0x28ec41);}};_0x276141[_0x5ebfc9(0x17b)](logDebug,_0x5ebfc9(0x1d9)),this[_0x5ebfc9(0x1bf)][_0x5ebfc9(0x1b5)]((_0x3bf5c6,_0x580891)=>{const _0x432ad7=_0x5ebfc9;_0x22fd24[_0x432ad7(0x187)](_0x22fd24['NKZwq'](Date[_0x432ad7(0x1c7)](),_0x22fd24[_0x432ad7(0x16e)](_0x22fd24['UPpJw'](parseInt,_0x3bf5c6['msgTime']),0x3e8)),_0x5cc969)&&this['msgCache']['delete'](_0x580891);});},_0x5cc969);}async[_0xdecec8(0x174)](_0x26cd14){const _0x559fe3=_0xdecec8;await super[_0x559fe3(0x174)](_0x26cd14),this[_0x559fe3(0x1e1)]=await this[_0x559fe3(0x163)]();}[_0xdecec8(0x18d)](){const _0x54fde6=_0xdecec8,_0x2fda87={'ztaLS':function(_0x1d8647,_0x54848e,_0x23c58b){return _0x1d8647(_0x54848e,_0x23c58b);},'NqUis':_0x54fde6(0x1df),'ueCYD':function(_0x170b74,_0x56f813,_0x27022c){return _0x170b74(_0x56f813,_0x27022c);},'MrwIV':'Could\x20not\x20create\x20table\x20temp_uins'},_0x112dea=_0x54fde6(0x16c);this['db'][_0x54fde6(0x160)](_0x112dea,function(_0x58fb1a){const _0x4de8a1=_0x54fde6;_0x58fb1a&&_0x2fda87[_0x4de8a1(0x1d7)](logError,_0x2fda87[_0x4de8a1(0x196)],_0x58fb1a[_0x4de8a1(0x1e7)]);});const _0x5563ce='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20files\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20size\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementType\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20element\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20elementId\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20msgId\x20TEXT\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)';this['db'][_0x54fde6(0x160)](_0x5563ce,function(_0x395bf5){const _0x5dfded=_0x54fde6;_0x395bf5&&_0x2fda87[_0x5dfded(0x1d7)](logError,_0x5dfded(0x1c4),_0x395bf5);});const _0xfff37f=_0x54fde6(0x1a0);this['db'][_0x54fde6(0x160)](_0xfff37f,function(_0x284789){const _0x530662=_0x54fde6;_0x284789&&_0x2fda87[_0x530662(0x1b7)](logError,_0x2fda87['MrwIV'],_0x284789);});}async[_0xdecec8(0x163)](){const _0x284aa4=_0xdecec8,_0x334c74={'VAuof':_0x284aa4(0x183),'KdhmT':function(_0x27624f,_0x455b1c){return _0x27624f(_0x455b1c);},'hKgSW':function(_0xa4fc99,_0x11f548){return _0xa4fc99(_0x11f548);},'iQOoz':'SELECT\x20MAX(shortId)\x20as\x20maxId\x20FROM\x20msgs'};return new Promise((_0xe0b5b1,_0x598da4)=>{const _0x6b3135=_0x284aa4,_0x49f7d7={'tpGRk':_0x334c74[_0x6b3135(0x1a7)],'pGKCl':function(_0x50828c,_0x5b6350){return _0x334c74['KdhmT'](_0x50828c,_0x5b6350);},'Xxwdu':_0x6b3135(0x1e4),'EQKbg':function(_0x41930b,_0x5e9655){const _0x410e1a=_0x6b3135;return _0x334c74[_0x410e1a(0x1e5)](_0x41930b,_0x5e9655);}};this['db'][_0x6b3135(0x180)](_0x334c74[_0x6b3135(0x169)],(_0x4bd1b0,_0x15ba04)=>{const _0x5bcc52=_0x6b3135;if(_0x4bd1b0)return logDebug(_0x49f7d7[_0x5bcc52(0x1d8)],_0x4bd1b0),_0x49f7d7[_0x5bcc52(0x19b)](_0xe0b5b1,-0x7ffffff8);logDebug(_0x49f7d7[_0x5bcc52(0x198)],_0x15ba04?.[_0x5bcc52(0x1b3)]),_0x49f7d7[_0x5bcc52(0x1ea)](_0xe0b5b1,_0x15ba04?.[_0x5bcc52(0x1b3)]??-0x7ffffff8);});});}async['getMsg'](_0x16cc4d,_0x52da30){const _0x14c460=_0xdecec8,_0x45b735={'LXwvf':function(_0x13d72e,_0x4a1176){return _0x13d72e(_0x4a1176);},'SMTXG':function(_0x208dcd,_0xee78c3){return _0x208dcd(_0xee78c3);},'HgumD':_0x14c460(0x1af)},_0x132649=this['db'][_0x14c460(0x15f)](_0x16cc4d);return new Promise((_0x207e80,_0x5b991d)=>{const _0x2abc24=_0x14c460;_0x132649[_0x2abc24(0x180)](..._0x52da30,(_0x59cc8,_0x4b5c94)=>{const _0x3f147f=_0x2abc24,_0x2ba4a2={'KaDSi':function(_0x45fd4a,_0x287425){const _0x570aad=_0x23ef;return _0x45b735[_0x570aad(0x19f)](_0x45fd4a,_0x287425);},'KWWaR':function(_0x3db6cb,_0x67a2f9){return _0x45b735['SMTXG'](_0x3db6cb,_0x67a2f9);}};if(_0x59cc8)return logError(_0x45b735[_0x3f147f(0x191)],_0x59cc8,_0x16cc4d,_0x52da30),_0x45b735['SMTXG'](_0x207e80,null);if(!_0x4b5c94){_0x45b735['SMTXG'](_0x207e80,null);return;}const _0x2a2613=_0x4b5c94[_0x3f147f(0x1c0)];NTQQMsgApi['getMsgsByMsgId']({'peerUid':_0x4b5c94[_0x3f147f(0x1a3)],'chatType':_0x4b5c94[_0x3f147f(0x1cc)]},[_0x2a2613])[_0x3f147f(0x1d0)](_0x37f583=>{const _0x710464=_0x3f147f,_0x17d514=_0x37f583['msgList'][0x0];if(!_0x17d514){_0x2ba4a2[_0x710464(0x188)](_0x207e80,null);return;}_0x17d514['id']=_0x4b5c94[_0x710464(0x18b)],_0x2ba4a2['KWWaR'](_0x207e80,_0x17d514);})[_0x3f147f(0x1c6)](_0x1bfcdb=>{_0x2ba4a2['KWWaR'](_0x207e80,null);});});});}async[_0xdecec8(0x167)](_0x57b295){const _0x48d258=_0xdecec8;if(this[_0x48d258(0x1bf)]['has'](_0x57b295))return this['msgCache'][_0x48d258(0x180)](_0x57b295);const _0x312a3f=_0x48d258(0x161);return this[_0x48d258(0x199)](_0x312a3f,[_0x57b295]);}async['getMsgByLongId'](_0x2e219d){const _0x59844e=_0xdecec8,_0x3ae950={'YZHCQ':'SELECT\x20*\x20FROM\x20msgs\x20WHERE\x20longId\x20=\x20?'};if(this[_0x59844e(0x1bf)]['has'](_0x2e219d))return this[_0x59844e(0x1bf)][_0x59844e(0x180)](_0x2e219d);return this[_0x59844e(0x199)](_0x3ae950[_0x59844e(0x18c)],[_0x2e219d]);}async[_0xdecec8(0x1d6)](_0x25315e,_0x386e75){const _0x19f312=_0xdecec8,_0x367155={'IkDMJ':_0x19f312(0x177)},_0x2d522e=_0x367155[_0x19f312(0x1e6)];return this[_0x19f312(0x199)](_0x2d522e,[_0x25315e,_0x386e75]);}async[_0xdecec8(0x1ba)](_0x14f1ad,_0x33da62=!![]){const _0x1109ea=_0xdecec8,_0x4fc231={'pxVVE':function(_0x5b8768,_0x150f04,_0x3e9daa){return _0x5b8768(_0x150f04,_0x3e9daa);},'wZNCz':_0x1109ea(0x19a),'EYDZh':function(_0x4f6d3a,_0x5ce560){return _0x4f6d3a===_0x5ce560;},'wBovy':_0x1109ea(0x172),'KKfaR':function(_0x29610a,_0x526050){return _0x29610a(_0x526050);}},_0x283995=await this[_0x1109ea(0x1d3)](_0x14f1ad[_0x1109ea(0x1e2)]);if(_0x283995){if(_0x33da62)this[_0x1109ea(0x1c5)](_0x14f1ad)[_0x1109ea(0x1d0)]();return _0x283995['id'];}const _0x4a5fb2=this['db']['prepare']('INSERT\x20INTO\x20msgs\x20(shortId,\x20longId,\x20seq,\x20peerUid,\x20chatType)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)'),_0x59de5a=++this['globalMsgShortId'];return _0x14f1ad['id']=_0x59de5a,_0x4fc231['KKfaR'](logDebug,_0x1109ea(0x1b1)+_0x14f1ad['msgId']+_0x1109ea(0x1b4)+_0x14f1ad['id']),this['msgCache'][_0x1109ea(0x17a)](_0x59de5a,_0x14f1ad),this[_0x1109ea(0x1bf)]['set'](_0x14f1ad[_0x1109ea(0x1e2)],_0x14f1ad),_0x4a5fb2[_0x1109ea(0x160)](this[_0x1109ea(0x1e1)],_0x14f1ad['msgId'],_0x14f1ad[_0x1109ea(0x1ac)]['toString'](),_0x14f1ad['peerUid'],_0x14f1ad[_0x1109ea(0x1cc)],_0x142bf5=>{const _0x59ef55=_0x1109ea,_0x5ea9b7={'feAmz':function(_0x2e8861,_0x189d6a,_0x74efdf){const _0x4e9b48=_0x23ef;return _0x4fc231[_0x4e9b48(0x170)](_0x2e8861,_0x189d6a,_0x74efdf);},'fwQke':_0x4fc231[_0x59ef55(0x1ad)]};_0x142bf5&&(_0x4fc231[_0x59ef55(0x16f)](_0x142bf5[_0x59ef55(0x184)],0x13)?this['getMsgByLongId'](_0x14f1ad[_0x59ef55(0x1e2)])[_0x59ef55(0x1d0)](_0x2e9fda=>{const _0x17b6c5=_0x59ef55;_0x2e9fda?(this[_0x17b6c5(0x1bf)][_0x17b6c5(0x17a)](_0x59de5a,_0x2e9fda),this[_0x17b6c5(0x1bf)][_0x17b6c5(0x17a)](_0x2e9fda[_0x17b6c5(0x1e2)],_0x2e9fda)):_0x5ea9b7[_0x17b6c5(0x192)](logError,_0x5ea9b7[_0x17b6c5(0x16d)],_0x142bf5);})[_0x59ef55(0x1c6)](_0x316b03=>logError(_0x59ef55(0x1ce),_0x316b03)):_0x4fc231[_0x59ef55(0x170)](logError,_0x4fc231['wBovy'],_0x142bf5));}),_0x59de5a;}async[_0xdecec8(0x1c5)](_0x37d7a9){const _0x9e6922=_0xdecec8,_0x48ef7a={'NRxiQ':function(_0x5be973,_0x3c9f10,_0x8f90cb){return _0x5be973(_0x3c9f10,_0x8f90cb);},'LQSId':_0x9e6922(0x17f),'pSiZG':function(_0x4b6cd1,_0x11653d){return _0x4b6cd1(_0x11653d);},'EowtX':_0x9e6922(0x1a1)},_0x579f94=this['msgCache']['get'](_0x37d7a9['msgId']);_0x579f94&&Object[_0x9e6922(0x1c1)](_0x579f94,_0x37d7a9);_0x48ef7a[_0x9e6922(0x1cb)](logDebug,_0x9e6922(0x1d5)+_0x37d7a9['id']+_0x9e6922(0x1eb)+_0x37d7a9[_0x9e6922(0x1ac)]+_0x9e6922(0x1be)+_0x37d7a9[_0x9e6922(0x1e2)]);const _0x398709=this['db'][_0x9e6922(0x15f)](_0x48ef7a[_0x9e6922(0x1a4)]);_0x398709['run'](_0x37d7a9[_0x9e6922(0x1ac)],_0x37d7a9[_0x9e6922(0x1e2)],_0x529434=>{const _0xa9671c=_0x9e6922;_0x529434&&_0x48ef7a[_0xa9671c(0x18a)](logError,_0x48ef7a['LQSId'],_0x529434);});}async[_0xdecec8(0x1e3)](_0x48eef5){const _0x23c389=_0xdecec8,_0x3350ec={'egMLE':function(_0x258243,_0x47f68f,_0x5640ac){return _0x258243(_0x47f68f,_0x5640ac);},'aoqBe':'db\x20could\x20not\x20add\x20file','Mybel':function(_0x3ce137,_0x19fc53){return _0x3ce137(_0x19fc53);},'LcbfR':function(_0x310f35,_0x163801){return _0x310f35(_0x163801);}},_0x652f71=this['db'][_0x23c389(0x15f)](_0x23c389(0x18f));return new Promise((_0x72bfd7,_0xa7e5da)=>{const _0x2420e6=_0x23c389;_0x652f71[_0x2420e6(0x160)](_0x48eef5[_0x2420e6(0x171)],_0x48eef5[_0x2420e6(0x179)],_0x48eef5[_0x2420e6(0x1e0)],_0x48eef5[_0x2420e6(0x181)],_0x48eef5[_0x2420e6(0x1a9)],_0x48eef5['elementType'],JSON['stringify'](_0x48eef5[_0x2420e6(0x185)]),_0x48eef5[_0x2420e6(0x15e)],_0x48eef5[_0x2420e6(0x1e2)],function(_0x158c2c){const _0x50f0d6=_0x2420e6;_0x158c2c&&(_0x3350ec['egMLE'](logError,_0x3350ec[_0x50f0d6(0x195)],_0x158c2c),_0x3350ec[_0x50f0d6(0x1cf)](_0xa7e5da,_0x158c2c)),_0x3350ec['LcbfR'](_0x72bfd7,null);});});}async[_0xdecec8(0x1b9)](_0x3d3c38,_0x52412a){const _0x424ed0=_0xdecec8,_0x4ca806={'ReYrE':function(_0x2c4129,_0x2dc6ef,_0x52c2f5){return _0x2c4129(_0x2dc6ef,_0x52c2f5);},'cJJRx':_0x424ed0(0x190),'tfnGn':function(_0x5e3bbf,_0x2a7c88){return _0x5e3bbf(_0x2a7c88);},'yrgCW':function(_0x1961b5,_0x4e50ed){return _0x1961b5(_0x4e50ed);}},_0x5bcf4c=this['db'][_0x424ed0(0x15f)](_0x3d3c38);return new Promise((_0x2e937b,_0x305bb2)=>{const _0x221187=_0x424ed0;_0x5bcf4c[_0x221187(0x180)](..._0x52412a,(_0x226411,_0x1352af)=>{const _0x144354=_0x221187;_0x226411&&(_0x4ca806['ReYrE'](logError,_0x4ca806[_0x144354(0x1cd)],_0x226411),_0x4ca806['tfnGn'](_0x305bb2,_0x226411)),_0x1352af&&(_0x1352af[_0x144354(0x185)]=JSON[_0x144354(0x162)](_0x1352af['element'])),_0x4ca806[_0x144354(0x165)](_0x2e937b,_0x1352af);});});}async[_0xdecec8(0x1ab)](_0x23d960){const _0x1f8063=_0xdecec8,_0x4079e4={'xCOMQ':_0x1f8063(0x19e)};return this[_0x1f8063(0x1b9)](_0x4079e4[_0x1f8063(0x1bd)],[_0x23d960]);}async[_0xdecec8(0x17e)](_0x172fba){return this['getFileCache']('SELECT\x20*\x20FROM\x20files\x20WHERE\x20uuid\x20=\x20?',[_0x172fba]);}async[_0xdecec8(0x1c9)](_0xeda6e8){const _0x1646a7=_0xdecec8,_0x344615={'BzijA':_0x1646a7(0x19c),'rxJpV':function(_0x244c07,_0x3db4ac){return _0x244c07(_0x3db4ac);},'njVHY':_0x1646a7(0x16a)},_0x42e96d=this['db'][_0x1646a7(0x15f)](_0x344615[_0x1646a7(0x1a5)]);return new Promise((_0x3a3fc3,_0x583266)=>{const _0x9ff952=_0x1646a7;_0x42e96d[_0x9ff952(0x160)](_0xeda6e8[_0x9ff952(0x179)],_0xeda6e8[_0x9ff952(0x1e0)],_0xeda6e8['uuid'],function(_0x4884f4){const _0x3e3fb8=_0x9ff952;_0x4884f4&&(logError(_0x344615['BzijA'],_0x4884f4),_0x344615[_0x3e3fb8(0x1bb)](_0x583266,_0x4884f4)),_0x344615[_0x3e3fb8(0x1bb)](_0x3a3fc3,null);});});}async['getReceivedTempUinMap'](){const _0x2219ca=_0xdecec8,_0xf7e79e={'JhYKE':_0x2219ca(0x1b8),'RqfIq':function(_0x43988c,_0xf673ed){return _0x43988c(_0xf673ed);},'WWmIP':function(_0xf35106,_0x2f288c){return _0xf35106(_0x2f288c);},'fpEcc':_0x2219ca(0x1a6)},_0x1d9154=_0xf7e79e[_0x2219ca(0x1db)];return new Promise((_0x3ba69c,_0x5429de)=>{const _0x5df6ee=_0x2219ca;this['db'][_0x5df6ee(0x1d4)](_0x1d9154,(_0xefb1d1,_0x47e3ea)=>{const _0x60a2cb=_0x5df6ee;_0xefb1d1&&(logError(_0xf7e79e[_0x60a2cb(0x166)],_0xefb1d1),_0xf7e79e[_0x60a2cb(0x18e)](_0x5429de,_0xefb1d1));const _0x487324={};_0x47e3ea[_0x60a2cb(0x1b5)](_0x21ac59=>{const _0x274d06=_0x60a2cb;_0x487324[_0x21ac59[_0x274d06(0x176)]]=_0x21ac59[_0x274d06(0x1c3)];}),_0xf7e79e[_0x60a2cb(0x17c)](_0x3ba69c,_0x487324);});});}async[_0xdecec8(0x1c8)](_0x5af326){const _0x51d734=_0xdecec8,_0x3bc05e={'TStqu':function(_0x2130e6,_0x24fc6a,_0x60aeaf){return _0x2130e6(_0x24fc6a,_0x60aeaf);},'QgIaW':_0x51d734(0x1b8),'CnbNZ':function(_0x4dfa59,_0x1c906a){return _0x4dfa59(_0x1c906a);},'SCJGp':_0x51d734(0x1ca)},_0x43f523=_0x3bc05e[_0x51d734(0x168)];return new Promise((_0x598ced,_0x21795b)=>{this['db']['get'](_0x43f523,[_0x5af326],(_0x23a98f,_0x5d0e69)=>{const _0xb77fe6=_0x23ef;_0x23a98f&&(_0x3bc05e[_0xb77fe6(0x178)](logError,_0x3bc05e[_0xb77fe6(0x1dd)],_0x23a98f),_0x3bc05e[_0xb77fe6(0x1b0)](_0x21795b,_0x23a98f)),_0x598ced(_0x5d0e69?.[_0xb77fe6(0x1c3)]);});});}async['addTempUin'](_0x360b96,_0x4405a5){const _0x17bbc1=_0xdecec8,_0x4a4cc5={'UjhdP':'db\x20could\x20not\x20add\x20temp\x20uin','smGEN':function(_0x48dcb3,_0x435ddf){return _0x48dcb3(_0x435ddf);},'fRHga':_0x17bbc1(0x1a2)},_0xf4131e=await this[_0x17bbc1(0x1c8)](_0x360b96);if(!_0xf4131e){const _0x5e06b8=this['db']['prepare'](_0x4a4cc5[_0x17bbc1(0x1d1)]);return new Promise((_0x1924eb,_0x56ca6e)=>{const _0x1c7d3b=_0x17bbc1,_0x556a7b={'BaXPH':_0x4a4cc5[_0x1c7d3b(0x173)],'FludF':function(_0x403c0f,_0x393a5e){const _0x411d50=_0x1c7d3b;return _0x4a4cc5[_0x411d50(0x164)](_0x403c0f,_0x393a5e);}};_0x5e06b8['run'](_0x360b96,_0x4405a5,function(_0xf376cf){const _0x2f3011=_0x1c7d3b;_0xf376cf&&(logError(_0x556a7b['BaXPH'],_0xf376cf),_0x556a7b[_0x2f3011(0x197)](_0x56ca6e,_0xf376cf)),_0x556a7b[_0x2f3011(0x197)](_0x1924eb,null);});});}}}export const dbUtil=new DBUtil();