var _0x577b4e=_0x141b;function _0x46d7(){var _0x1ffdaf=['onMsgInfoListUpdate','55284jDbXah','1465830lACHOH','addMsg','LFvFZ','catch','6307nhiHOJ','NodeIKernelMsgListener','1048aHDJFO','15590ujUhQm','then','addMsgListener','listener','MessageService\x20already\x20initialized!','kernelService','init','3864933ANTYem','160dzajSJ','updateMsg','recallTime','101918mHSbej','487641Pcwnjv','map','getMsgByLongId','addKernelMsgListener'];_0x46d7=function(){return _0x1ffdaf;};return _0x46d7();}function _0x141b(_0x2b1922,_0x32ad1b){var _0x46d765=_0x46d7();return _0x141b=function(_0x141ba8,_0x1cb1d6){_0x141ba8=_0x141ba8-0x164;var _0x2985a2=_0x46d765[_0x141ba8];return _0x2985a2;},_0x141b(_0x2b1922,_0x32ad1b);}(function(_0x3204f5,_0xe348be){var _0x427473=_0x141b,_0x800710=_0x3204f5();while(!![]){try{var _0x161bd2=-parseInt(_0x427473(0x170))/0x1+-parseInt(_0x427473(0x16a))/0x2+-parseInt(_0x427473(0x16b))/0x3+-parseInt(_0x427473(0x167))/0x4*(parseInt(_0x427473(0x178))/0x5)+parseInt(_0x427473(0x171))/0x6+-parseInt(_0x427473(0x175))/0x7*(parseInt(_0x427473(0x177))/0x8)+parseInt(_0x427473(0x166))/0x9;if(_0x161bd2===_0xe348be)break;else _0x800710['push'](_0x800710['shift']());}catch(_0x67d0f9){_0x800710['push'](_0x800710['shift']());}}}(_0x46d7,0x27999));import{Wrapper as _0x2ea011}from'../qqnt';import{MsgListener}from'../qqnt/listeners';import{dbUtil}from'@/common/utils/db';export class NapCatCoreServiceMessage{[_0x577b4e(0x164)]=null;[_0x577b4e(0x17b)];constructor(){var _0xb74c2e=_0x577b4e,_0x435b9c={'LFvFZ':function(_0x48aba4,_0x2c764a){return _0x48aba4===_0x2c764a;}};this[_0xb74c2e(0x17b)]=new MsgListener(),this[_0xb74c2e(0x17b)][_0xb74c2e(0x16f)]=_0x22c926=>{var _0x1982b4=_0xb74c2e;_0x22c926[_0x1982b4(0x16c)](_0x9aa8da=>{var _0x441e16=_0x1982b4;_0x435b9c[_0x441e16(0x173)](_0x9aa8da[_0x441e16(0x169)],'0')?dbUtil[_0x441e16(0x172)](_0x9aa8da)['then']()[_0x441e16(0x174)]():dbUtil[_0x441e16(0x16d)](_0x9aa8da['msgId'])[_0x441e16(0x179)](_0x534eef=>{var _0x1d630a=_0x441e16;_0x534eef&&(_0x534eef[_0x1d630a(0x169)]=_0x9aa8da[_0x1d630a(0x169)],dbUtil[_0x1d630a(0x168)](_0x534eef)[_0x1d630a(0x179)]());});});};}[_0x577b4e(0x165)](_0x264dcc){var _0x517672=_0x577b4e,_0x54d979={'rxmyQ':function(_0x49f5a7,_0x1ca819){return _0x49f5a7!==_0x1ca819;}};if(_0x54d979['rxmyQ'](this[_0x517672(0x164)],null))throw new Error(_0x517672(0x17c));this[_0x517672(0x164)]=_0x264dcc,this[_0x517672(0x164)][_0x517672(0x16e)](new _0x2ea011[(_0x517672(0x176))](this[_0x517672(0x17b)]));}[_0x577b4e(0x17a)](_0x137954){var _0x2f1680=_0x577b4e;return this[_0x2f1680(0x164)]?.['addKernelMsgListener'](new _0x2ea011[(_0x2f1680(0x176))](_0x137954));}}