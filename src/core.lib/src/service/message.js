function _0x9047(){var _0x399ede=['766828eGzKxF','MessageService\x20already\x20initialized!','2512812SgSMPl','2004934dliUCE','6762110PoKhrt','msgId','3413739DAimwr','24wLcVai','3xLfKvf','addKernelMsgListener','9eDhMta','recallTime','YxiYy','kernelService','addMsg','DyriN','12iowjtN','catch','5574816hbzeXG','11gaJliD','onMsgInfoListUpdate','listener','NodeIKernelMsgListener','1870795SBjJcL','init'];_0x9047=function(){return _0x399ede;};return _0x9047();}var _0xe58c3b=_0x3c70;function _0x3c70(_0x18871b,_0x1be00b){var _0x904787=_0x9047();return _0x3c70=function(_0x3c70e3,_0x3a21ff){_0x3c70e3=_0x3c70e3-0xaa;var _0x40f85d=_0x904787[_0x3c70e3];return _0x40f85d;},_0x3c70(_0x18871b,_0x1be00b);}(function(_0x655b89,_0x1e0340){var _0x37666e=_0x3c70,_0x5490e0=_0x655b89();while(!![]){try{var _0x2b0e0a=parseInt(_0x37666e(0xb2))/0x1+parseInt(_0x37666e(0xb5))/0x2*(-parseInt(_0x37666e(0xba))/0x3)+-parseInt(_0x37666e(0xc2))/0x4*(parseInt(_0x37666e(0xb0))/0x5)+parseInt(_0x37666e(0xb4))/0x6+parseInt(_0x37666e(0xb8))/0x7*(parseInt(_0x37666e(0xb9))/0x8)+parseInt(_0x37666e(0xbc))/0x9*(parseInt(_0x37666e(0xb6))/0xa)+parseInt(_0x37666e(0xac))/0xb*(-parseInt(_0x37666e(0xab))/0xc);if(_0x2b0e0a===_0x1e0340)break;else _0x5490e0['push'](_0x5490e0['shift']());}catch(_0x18fe28){_0x5490e0['push'](_0x5490e0['shift']());}}}(_0x9047,0xb3880));import{Wrapper as _0x4cae93}from'../qqnt';import{MsgListener}from'../qqnt/listeners';import{dbUtil}from'@/common/utils/db';export class NapCatCoreServiceMessage{[_0xe58c3b(0xbf)]=null;[_0xe58c3b(0xae)];constructor(){var _0x9de117=_0xe58c3b,_0x45383c={'YxiYy':function(_0x2ed938,_0x250815){return _0x2ed938===_0x250815;}};this[_0x9de117(0xae)]=new MsgListener(),this[_0x9de117(0xae)][_0x9de117(0xad)]=_0x7e5061=>{_0x7e5061['map'](_0x1c0175=>{var _0x745192=_0x3c70;_0x45383c[_0x745192(0xbe)](_0x1c0175[_0x745192(0xbd)],'0')?dbUtil[_0x745192(0xc0)](_0x1c0175)['then']()[_0x745192(0xaa)]():dbUtil['getMsgByLongId'](_0x1c0175[_0x745192(0xb7)])['then'](_0x5c983f=>{var _0x34f473=_0x745192;_0x5c983f&&(_0x5c983f[_0x34f473(0xbd)]=_0x1c0175[_0x34f473(0xbd)],dbUtil['updateMsg'](_0x5c983f)['then']());});});};}[_0xe58c3b(0xb1)](_0x3ee9bb){var _0x5274ee=_0xe58c3b,_0x44b9bb={'DyriN':_0x5274ee(0xb3)};if(this[_0x5274ee(0xbf)]!==null)throw new Error(_0x44b9bb[_0x5274ee(0xc1)]);this[_0x5274ee(0xbf)]=_0x3ee9bb,this[_0x5274ee(0xbf)]['addKernelMsgListener'](new _0x4cae93[(_0x5274ee(0xaf))](this[_0x5274ee(0xae)]));}['addMsgListener'](_0x2298ab){var _0x307202=_0xe58c3b;return this[_0x307202(0xbf)]?.[_0x307202(0xbb)](new _0x4cae93[(_0x307202(0xaf))](_0x2298ab));}}