var _0x4b1a9f=_0x4a83;function _0x350a(){var _0x477b1c=['listener','MessageService\x20already\x20initialized!','msgId','catch','209860JRocFF','addMsg','NodeIKernelMsgListener','kernelService','1610915paRRgK','getMsgByLongId','309290dGcFHh','2093958qppgrU','1018179IJTFGr','637441LodAHY','then','72CKKOIx','addKernelMsgListener','recallTime','map','394056JTHAlT','onMsgInfoListUpdate','PKHFF'];_0x350a=function(){return _0x477b1c;};return _0x350a();}function _0x4a83(_0x76aabf,_0x4f5869){var _0x350a0a=_0x350a();return _0x4a83=function(_0x4a83da,_0x1c1b2c){_0x4a83da=_0x4a83da-0x1d1;var _0x41d8ab=_0x350a0a[_0x4a83da];return _0x41d8ab;},_0x4a83(_0x76aabf,_0x4f5869);}(function(_0x324314,_0x2f62d4){var _0xe9a213=_0x4a83,_0x73f2c1=_0x324314();while(!![]){try{var _0x38bab4=-parseInt(_0xe9a213(0x1da))/0x1+parseInt(_0xe9a213(0x1d4))/0x2+-parseInt(_0xe9a213(0x1dc))/0x3+-parseInt(_0xe9a213(0x1e3))/0x4+-parseInt(_0xe9a213(0x1d8))/0x5+parseInt(_0xe9a213(0x1db))/0x6+parseInt(_0xe9a213(0x1dd))/0x7*(parseInt(_0xe9a213(0x1df))/0x8);if(_0x38bab4===_0x2f62d4)break;else _0x73f2c1['push'](_0x73f2c1['shift']());}catch(_0x3959b8){_0x73f2c1['push'](_0x73f2c1['shift']());}}}(_0x350a,0x31d4e));import{Wrapper as _0x1d15ae}from'../qqnt';import{MsgListener}from'../qqnt/listeners';import{dbUtil}from'@/common/utils/db';export class NapCatCoreServiceMessage{[_0x4b1a9f(0x1d7)]=null;[_0x4b1a9f(0x1e6)];constructor(){var _0x211a25=_0x4b1a9f,_0x28f7b5={'qnjLW':function(_0x53936d,_0x518d20){return _0x53936d===_0x518d20;}};this[_0x211a25(0x1e6)]=new MsgListener(),this[_0x211a25(0x1e6)][_0x211a25(0x1e4)]=_0x58b7f7=>{var _0x40441d=_0x211a25,_0x1c3d99={'gASlk':function(_0x44b279,_0x3d2ba3){return _0x28f7b5['qnjLW'](_0x44b279,_0x3d2ba3);}};_0x58b7f7[_0x40441d(0x1e2)](_0x2caf55=>{var _0x218fd3=_0x40441d;_0x1c3d99['gASlk'](_0x2caf55['recallTime'],'0')?dbUtil[_0x218fd3(0x1d5)](_0x2caf55)[_0x218fd3(0x1de)]()[_0x218fd3(0x1d3)]():dbUtil[_0x218fd3(0x1d9)](_0x2caf55[_0x218fd3(0x1d2)])[_0x218fd3(0x1de)](_0x2c5688=>{var _0x14002b=_0x218fd3;_0x2c5688&&(_0x2c5688[_0x14002b(0x1e1)]=_0x2caf55[_0x14002b(0x1e1)],dbUtil['updateMsg'](_0x2c5688)[_0x14002b(0x1de)]());});});};}['init'](_0x1c6849){var _0x2d227f=_0x4b1a9f,_0x5a327e={'uGyMG':function(_0x933a45,_0xbe6956){return _0x933a45!==_0xbe6956;},'PKHFF':_0x2d227f(0x1d1)};if(_0x5a327e['uGyMG'](this[_0x2d227f(0x1d7)],null))throw new Error(_0x5a327e[_0x2d227f(0x1e5)]);this[_0x2d227f(0x1d7)]=_0x1c6849,this[_0x2d227f(0x1d7)]['addKernelMsgListener'](new _0x1d15ae[(_0x2d227f(0x1d6))](this[_0x2d227f(0x1e6)]));}['addMsgListener'](_0x125226){var _0x42e09f=_0x4b1a9f;return this[_0x42e09f(0x1d7)]?.[_0x42e09f(0x1e0)](new _0x1d15ae[(_0x42e09f(0x1d6))](_0x125226));}}