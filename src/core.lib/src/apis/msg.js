function _0x26dd(){const _0x4f911f=['setMsgRead','4249mEmTOD','forEach','parse','1570662kffOKF','Hzddi','MynMM','uCSjC','5416912esbmEQ','addListener','PzzOA','vJLBg','toString','sendStatus','NLPEe','fetchRecentContact','chatType','getMsgService','activateChat','senderUid','map','omIpF','89229nAEMzj','IGiLV','setMsgEmojiLikes','PUlKS','VLUjE','arkElement','sxVsl','length','catch','EJtAN','urhzj','find','5322170xbLtfe','delete','forwardMsg','then','multiForwardMsgWithComment','getMultiMsg','RDgDK','498rYWvoy','msgId','sendMsg','uFAmm','app','getMsgsByMsgId','onMsgInfoListUpdate','bytesData','lZNYu','45qBvuTC','activateChatAndGetHistory','com.tencent.multimsg','103416GTuBkd','2qTxDlW','nick','onLoginSuccess','multiForwardMsg','jwKKO','peerUid','166667jfrolH','转发消息超时','getMsgsIncludeSelf','elements','JSNdQ','setEmojiLike','发送超时','session','DNAQl'];_0x26dd=function(){return _0x4f911f;};return _0x26dd();}const _0x3ee043=_0x2c6e;(function(_0x1a89ba,_0x169444){const _0x640582=_0x2c6e,_0x846b9e=_0x1a89ba();while(!![]){try{const _0x432ea0=-parseInt(_0x640582(0x18f))/0x1*(-parseInt(_0x640582(0x189))/0x2)+parseInt(_0x640582(0x1ae))/0x3+-parseInt(_0x640582(0x188))/0x4*(-parseInt(_0x640582(0x185))/0x5)+parseInt(_0x640582(0x17c))/0x6*(-parseInt(_0x640582(0x199))/0x7)+parseInt(_0x640582(0x1a0))/0x8+-parseInt(_0x640582(0x19c))/0x9+-parseInt(_0x640582(0x1ba))/0xa;if(_0x432ea0===_0x169444)break;else _0x846b9e['push'](_0x846b9e['shift']());}catch(_0x4737f2){_0x846b9e['push'](_0x846b9e['shift']());}}}(_0x26dd,0x553a6));function _0x2c6e(_0x376b49,_0x1576a3){const _0x26dd80=_0x26dd();return _0x2c6e=function(_0x2c6e43,_0x1b5118){_0x2c6e43=_0x2c6e43-0x17b;let _0x186a30=_0x26dd80[_0x2c6e43];return _0x186a30;},_0x2c6e(_0x376b49,_0x1576a3);}import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onAddSendMsg']=_0x453832=>{const _0x5130be=_0x2c6e,_0x26308b={'uFAmm':function(_0x1fde8e,_0x37adf8){return _0x1fde8e(_0x37adf8);},'PUlKS':function(_0xf1ba69,_0x25eb70){return _0xf1ba69 instanceof _0x25eb70;}};for(const [_0x225d52,_0x43d2ad]of sentMsgTasks){_0x26308b[_0x5130be(0x17f)](_0x43d2ad,_0x453832),sentMsgTasks[_0x5130be(0x1bb)](_0x225d52);}if(sendMessagePool[_0x453832[_0x5130be(0x18e)]]){const _0x4be398=sendMessagePool[_0x453832[_0x5130be(0x18e)]]?.(_0x453832);_0x26308b[_0x5130be(0x1b1)](_0x4be398,Promise)&&_0x4be398[_0x5130be(0x1bd)]()[_0x5130be(0x1b6)](logError);}},msgListener[_0x3ee043(0x182)]=_0x28693d=>{const _0x4e031c=_0x3ee043,_0x49b2cd={'sxVsl':function(_0x45e0b8,_0x2e035f){return _0x45e0b8(_0x2e035f);},'uCSjC':function(_0x44ab2a,_0x22d7a7){return _0x44ab2a instanceof _0x22d7a7;}};_0x28693d[_0x4e031c(0x19a)](_0x4ac4c5=>{new Promise((_0x1dfe0c,_0x1fe2d7)=>{const _0x55453e=_0x2c6e;for(const _0x4145d0 in sendSuccessCBMap){const _0x4f33df=sendSuccessCBMap[_0x4145d0],_0x5e07db=_0x49b2cd[_0x55453e(0x1b4)](_0x4f33df,_0x4ac4c5),_0xfee67a=_0x2f8b75=>{_0x2f8b75&&delete sendSuccessCBMap[_0x4145d0];};_0x49b2cd[_0x55453e(0x19f)](_0x5e07db,Promise)?_0x5e07db['then'](_0xfee67a):_0xfee67a(_0x5e07db);}})['then']()['catch'](log);});},setTimeout(()=>{const _0x3fd2e0=_0x3ee043;napCatCore[_0x3fd2e0(0x18b)](()=>{const _0x2f1e57=_0x3fd2e0;napCatCore[_0x2f1e57(0x1a1)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x3ee043(0x194)](_0x1a17e4,_0x121246,_0x4413e2,_0x37cb64=!![]){const _0x2b83c5=_0x3ee043,_0x37f22b={'urhzj':function(_0xcb825e,_0x201722){return _0xcb825e>_0x201722;}};return _0x4413e2=_0x4413e2[_0x2b83c5(0x1a4)](),napCatCore['session'][_0x2b83c5(0x1a9)]()[_0x2b83c5(0x1b0)](_0x1a17e4,_0x121246,_0x4413e2,_0x37f22b[_0x2b83c5(0x1b8)](_0x4413e2[_0x2b83c5(0x1b5)],0x3)?'2':'1',_0x37cb64);}static async[_0x3ee043(0x1bf)](_0x4c7c97,_0x536511,_0x5a3945){const _0x428bdb=_0x3ee043;return napCatCore[_0x428bdb(0x196)][_0x428bdb(0x1a9)]()[_0x428bdb(0x1bf)](_0x4c7c97,_0x536511,_0x5a3945);}static async['getMsgsByMsgId'](_0x4262e4,_0x59c50d){const _0x3bebf4=_0x3ee043;return await napCatCore[_0x3bebf4(0x196)][_0x3bebf4(0x1a9)]()[_0x3bebf4(0x181)](_0x4262e4,_0x59c50d);}static async['getMsgsBySeqAndCount'](_0x129be3,_0x522811,_0x335f88,_0x6df49e,_0x4789c7){const _0x12ca7a=_0x3ee043;return await napCatCore[_0x12ca7a(0x196)][_0x12ca7a(0x1a9)]()['getMsgsBySeqAndCount'](_0x129be3,_0x522811,_0x335f88,_0x6df49e,_0x4789c7);}static async[_0x3ee043(0x1aa)](_0x3b2111){}static async[_0x3ee043(0x186)](_0x586128){}static async[_0x3ee043(0x198)](_0x587d08){const _0x58fdfc=_0x3ee043;return napCatCore[_0x58fdfc(0x196)]['getMsgService']()['setMsgRead'](_0x587d08);}static async['getMsgHistory'](_0x12957d,_0x284946,_0x1a21fc){const _0x43c26b=_0x3ee043;return napCatCore[_0x43c26b(0x196)]['getMsgService']()[_0x43c26b(0x191)](_0x12957d,_0x284946,_0x1a21fc,!![]);}static async[_0x3ee043(0x1a7)](){}static async['recallMsg'](_0x12db74,_0x2f437d){const _0x216c66=_0x3ee043;await napCatCore[_0x216c66(0x196)][_0x216c66(0x1a9)]()['recallMsg']({'chatType':_0x12db74[_0x216c66(0x1a8)],'peerUid':_0x12db74['peerUid']},_0x2f437d);}static async['sendMsg'](_0x154d14,_0x5a7e01,_0xe0b988=!![],_0xf363d9=0x2710){const _0x266fe0=_0x3ee043,_0xcd2b80={'omIpF':function(_0x2f8f5e,_0x19e2ab){return _0x2f8f5e>_0x19e2ab;},'Hzddi':function(_0x235586,_0x471f74){return _0x235586(_0x471f74);},'NLPEe':_0x266fe0(0x195),'sSGhd':function(_0x5e20cc,_0x501936){return _0x5e20cc===_0x501936;},'bpSxJ':function(_0x23ace2,_0x26c818){return _0x23ace2===_0x26c818;},'RDgDK':function(_0xcc66b3,_0xfb4dea,_0x470a17){return _0xcc66b3(_0xfb4dea,_0x470a17);}},_0x158e12=_0x154d14['peerUid'];let _0x1e63df=0x0;const _0x14fd2f=async()=>{const _0x2049a7=_0x266fe0;if(_0xcd2b80[_0x2049a7(0x1ad)](_0x1e63df,_0xf363d9))throw _0x2049a7(0x195);const _0x162b8f=sendMessagePool[_0x154d14[_0x2049a7(0x18e)]];if(_0x162b8f)return await _0xcd2b80['Hzddi'](sleep,0x1f4),_0x1e63df+=0x1f4,await _0x14fd2f();else return;};return await _0x14fd2f(),new Promise((_0x3e0469,_0x4f43cc)=>{const _0x412907=_0x266fe0,_0x3aafd3={'DNAQl':function(_0x2f9db9,_0x43b272){return _0xcd2b80['sSGhd'](_0x2f9db9,_0x43b272);},'MynMM':function(_0x447a2e,_0x4bbac8){return _0xcd2b80['bpSxJ'](_0x447a2e,_0x4bbac8);},'VLUjE':function(_0x3339b1,_0x4c2f0e){const _0xe62033=_0x2c6e;return _0xcd2b80[_0xe62033(0x19d)](_0x3339b1,_0x4c2f0e);}};let _0x2be27f=![],_0x234fdc=null;const _0x4ad827=randomUUID();sendSuccessCBMap[_0x4ad827]=_0x2861b6=>{const _0xb0b507=_0x2c6e;if(_0x3aafd3[_0xb0b507(0x197)](_0x2861b6[_0xb0b507(0x17d)],_0x234fdc?.[_0xb0b507(0x17d)])){if(_0x3aafd3[_0xb0b507(0x19e)](_0x2861b6[_0xb0b507(0x1a5)],0x2))return delete sendSuccessCBMap[_0x4ad827],_0x2be27f=!![],_0x3aafd3[_0xb0b507(0x1b2)](_0x3e0469,_0x2861b6),!![];return![];}return![];},sendMessagePool[_0x158e12]=async _0x3684a1=>{delete sendMessagePool[_0x158e12],_0x234fdc=_0x3684a1;},_0xcd2b80[_0x412907(0x17b)](setTimeout,()=>{const _0x39e9a9=_0x412907;if(_0x2be27f)return;delete sendMessagePool[_0x158e12],delete sendSuccessCBMap[_0x4ad827],_0x4f43cc(_0xcd2b80[_0x39e9a9(0x1a6)]);},_0xf363d9);const _0x459a5d=napCatCore[_0x412907(0x196)][_0x412907(0x1a9)]()[_0x412907(0x17e)]('0',_0x154d14,_0x5a7e01,new Map());});}static async[_0x3ee043(0x1bc)](_0x32c847,_0x410d53,_0x4f3743){const _0x4e5e4c=_0x3ee043;return napCatCore['session'][_0x4e5e4c(0x1a9)]()[_0x4e5e4c(0x1bc)](_0x4f3743,_0x32c847,[_0x410d53],new Map());}static async[_0x3ee043(0x18c)](_0x4fbe52,_0x58a977,_0x123170){const _0x158b9f=_0x3ee043,_0x4ca01e={'JSNdQ':function(_0x378103,_0x2a613e){return _0x378103(_0x2a613e);},'IGiLV':_0x158b9f(0x190),'vJLBg':function(_0x578fb2,_0x581172){return _0x578fb2!=_0x581172;},'EJtAN':_0x158b9f(0x187),'vntyU':function(_0x48194f){return _0x48194f();},'BwAur':function(_0x3bb6e4,_0x16c40e,_0x43ef2b){return _0x3bb6e4(_0x16c40e,_0x43ef2b);}},_0xc0fa0c=_0x123170[_0x158b9f(0x1ac)](_0x37cb77=>{const _0xd82cb3=_0x158b9f;return{'msgId':_0x37cb77,'senderShowName':selfInfo[_0xd82cb3(0x18a)]};});return new Promise((_0x25e62f,_0x9cd27d)=>{const _0x4803f7=_0x158b9f,_0x3cbf23={'kWmDg':function(_0x37ea3b,_0x57a70e){const _0x395c8d=_0x2c6e;return _0x4ca01e[_0x395c8d(0x1a3)](_0x37ea3b,_0x57a70e);},'PzzOA':_0x4ca01e[_0x4803f7(0x1b7)],'lZNYu':function(_0x32623e,_0xb04b91){return _0x32623e==_0xb04b91;},'jwKKO':function(_0x4a63aa,_0x812daf){const _0x18dea7=_0x4803f7;return _0x4ca01e[_0x18dea7(0x193)](_0x4a63aa,_0x812daf);}};let _0x323f18=![];const _0x372848=_0x1fa589=>{const _0x45572d=_0x4803f7,_0x2fa7f2=_0x1fa589[_0x45572d(0x192)][_0x45572d(0x1b9)](_0x25a0c2=>_0x25a0c2[_0x45572d(0x1b3)]);if(!_0x2fa7f2)return;const _0x2fed6c=JSON[_0x45572d(0x19b)](_0x2fa7f2[_0x45572d(0x1b3)][_0x45572d(0x183)]);if(_0x3cbf23['kWmDg'](_0x2fed6c[_0x45572d(0x180)],_0x3cbf23[_0x45572d(0x1a2)]))return;_0x3cbf23[_0x45572d(0x184)](_0x1fa589[_0x45572d(0x18e)],_0x58a977[_0x45572d(0x18e)])&&_0x1fa589[_0x45572d(0x1ab)]==selfInfo['uid']&&(_0x323f18=!![],_0x3cbf23[_0x45572d(0x18d)](_0x25e62f,_0x1fa589));};sentMsgTasks['set'](_0x4ca01e['vntyU'](randomUUID),_0x372848),_0x4ca01e['BwAur'](setTimeout,()=>{const _0x4c32e3=_0x4803f7;!_0x323f18&&_0x4ca01e[_0x4c32e3(0x193)](_0x9cd27d,_0x4ca01e[_0x4c32e3(0x1af)]);},0x1388),napCatCore[_0x4803f7(0x196)]['getMsgService']()[_0x4803f7(0x1be)](_0xc0fa0c,_0x4fbe52,_0x58a977,[],new Map());});}}