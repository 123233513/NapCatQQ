const _0x366280=_0x1dd2;function _0x1dd2(_0xbb0ed5,_0x467a23){const _0xbc7118=_0xbc71();return _0x1dd2=function(_0x1dd2af,_0x271d9a){_0x1dd2af=_0x1dd2af-0xd2;let _0x7d8eea=_0xbc7118[_0x1dd2af];return _0x7d8eea;},_0x1dd2(_0xbb0ed5,_0x467a23);}(function(_0x556019,_0x553f4d){const _0x2e820e=_0x1dd2,_0x1185b5=_0x556019();while(!![]){try{const _0x526602=parseInt(_0x2e820e(0xee))/0x1*(-parseInt(_0x2e820e(0xf1))/0x2)+-parseInt(_0x2e820e(0x111))/0x3*(parseInt(_0x2e820e(0xdd))/0x4)+parseInt(_0x2e820e(0x109))/0x5*(parseInt(_0x2e820e(0x104))/0x6)+-parseInt(_0x2e820e(0xe6))/0x7*(-parseInt(_0x2e820e(0xd5))/0x8)+-parseInt(_0x2e820e(0xe1))/0x9*(-parseInt(_0x2e820e(0xe0))/0xa)+-parseInt(_0x2e820e(0xe9))/0xb*(parseInt(_0x2e820e(0xf0))/0xc)+-parseInt(_0x2e820e(0xe8))/0xd;if(_0x526602===_0x553f4d)break;else _0x1185b5['push'](_0x1185b5['shift']());}catch(_0xb1c7e){_0x1185b5['push'](_0x1185b5['shift']());}}}(_0xbc71,0x77426));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},msgListener=new MsgListener();msgListener[_0x366280(0xfd)]=_0x160c4f=>{const _0x39ffa7=_0x366280;if(sendMessagePool[_0x160c4f['peerUid']]){const _0xc43ee2=sendMessagePool[_0x160c4f[_0x39ffa7(0x112)]]?.(_0x160c4f);_0xc43ee2 instanceof Promise&&_0xc43ee2[_0x39ffa7(0x107)]()[_0x39ffa7(0xed)](logError);}},msgListener[_0x366280(0xde)]=_0x434ae3=>{const _0x23c2d6=_0x366280,_0x4dbedb={'QJFAe':function(_0x34a3ec,_0x39b74e){return _0x34a3ec instanceof _0x39b74e;}};_0x434ae3[_0x23c2d6(0xea)](_0xd13742=>{const _0x1f4de6=_0x23c2d6,_0x22a0c9={'loJSC':function(_0x524871,_0x1b2757){const _0x4c1acf=_0x1dd2;return _0x4dbedb[_0x4c1acf(0x105)](_0x524871,_0x1b2757);}};new Promise((_0xae2e0b,_0x51d16b)=>{const _0x4c444d=_0x1dd2;for(const _0x4b176e in sendSuccessCBMap){const _0xf9fd36=sendSuccessCBMap[_0x4b176e],_0x45598f=_0xf9fd36(_0xd13742),_0x4d88d6=_0x33bca2=>{_0x33bca2&&delete sendSuccessCBMap[_0x4b176e];};_0x22a0c9[_0x4c444d(0x102)](_0x45598f,Promise)?_0x45598f['then'](_0x4d88d6):_0x4d88d6(_0x45598f);}})[_0x1f4de6(0x107)]()[_0x1f4de6(0xed)](log);});},setTimeout(()=>{const _0x45e782=_0x366280;napCatCore[_0x45e782(0xdf)](()=>{napCatCore['addListener'](msgListener);});},0x64);function _0xbc71(){const _0x44b1db=['setMsgEmojiLikes','map','getMsgHistory','88uRfVdM','fciHy','bytesData','转发消息超时','session','SRPwa','app','HPdkc','2079724KrKiGS','onMsgInfoListUpdate','onLoginSuccess','407770CGxcDo','207VfLapw','WPyVH','ljvRe','nYciy','fetchRecentContact','482027meEBgi','duFkp','7280819xbbTdP','1506703aHXTFa','forEach','OTaoN','addListener','catch','448566lGjMwu','elements','48gViwzJ','2Ntteep','getMultiMsg','pAZYY','arkElement','recallMsg','wqKcw','com.tencent.multimsg','发送超时','setMsgRead','cvHGu','KGyxl','msgId','onAddSendMsg','removeKernelMsgListener','activateChat','nick','TiKfZ','loJSC','find','745368jTVLnP','QJFAe','length','then','kOHvc','35dGmUYS','tFvGp','getMsgsIncludeSelf','senderUid','getMsgService','parse','mfyxe','forwardMsg','3gYKFlZ','peerUid','sendMsg','multiForwardMsg','multiForwardMsgWithComment','IAeDJ','kpLHA'];_0xbc71=function(){return _0x44b1db;};return _0xbc71();}export class NTQQMsgApi{static async['setEmojiLike'](_0x3f0a1c,_0x2139ec,_0x3a3290,_0x3571e6=!![]){const _0x190e39=_0x366280,_0x168410={'HPdkc':function(_0x37e0e9,_0x4ab1f4){return _0x37e0e9>_0x4ab1f4;}};return napCatCore['session'][_0x190e39(0x10d)]()[_0x190e39(0xd2)](_0x3f0a1c,_0x2139ec,_0x3a3290,_0x168410[_0x190e39(0xdc)](_0x3a3290[_0x190e39(0x106)],0x3)?'2':'1',_0x3571e6);}static async[_0x366280(0xf2)](_0x239cc6,_0x5c96d9,_0x1aef2e){const _0x3cb653=_0x366280;return napCatCore['session'][_0x3cb653(0x10d)]()['getMultiMsg'](_0x239cc6,_0x5c96d9,_0x1aef2e);}static async[_0x366280(0xff)](_0x14bbc7){}static async['activateChatAndGetHistory'](_0x18e145){}static async['setMsgRead'](_0x462806){const _0x255054=_0x366280;return napCatCore['session'][_0x255054(0x10d)]()[_0x255054(0xf9)](_0x462806['chatType'],_0x462806['peerUid'],_0x462806['guildId']);}static async[_0x366280(0xd4)](_0x1c2de6,_0x3147dd,_0x2604ee){const _0xdaf72=_0x366280;return napCatCore[_0xdaf72(0xd9)][_0xdaf72(0x10d)]()[_0xdaf72(0x10b)](_0x1c2de6,_0x3147dd,_0x2604ee,!![]);}static async[_0x366280(0xe5)](){}static async[_0x366280(0xf5)](_0x415368,_0x46bf0b){const _0x34965a=_0x366280;await napCatCore[_0x34965a(0xd9)][_0x34965a(0x10d)]()[_0x34965a(0xf5)]({'chatType':_0x415368['chatType'],'peerUid':_0x415368[_0x34965a(0x112)]},_0x46bf0b);}static async[_0x366280(0x113)](_0x1c1077,_0x42c692,_0x4162bc=!![],_0x19b680=0x2710){const _0x43c6c6=_0x366280,_0x1ad85f={'kOHvc':function(_0x30f98e,_0x2cdbfa){return _0x30f98e>_0x2cdbfa;},'OTaoN':function(_0x29af42,_0x925e49){return _0x29af42(_0x925e49);},'nYciy':function(_0x3f9982){return _0x3f9982();},'ljvRe':function(_0x3f2587){return _0x3f2587();},'wqKcw':function(_0x330ff7,_0x4e4e87,_0x3726c1){return _0x330ff7(_0x4e4e87,_0x3726c1);}},_0x158f61=_0x1c1077[_0x43c6c6(0x112)];let _0x36b713=0x0;const _0x8cf6c8=async()=>{const _0x13579d=_0x43c6c6;if(_0x1ad85f[_0x13579d(0x108)](_0x36b713,_0x19b680))throw _0x13579d(0xf8);const _0x556377=sendMessagePool[_0x1c1077[_0x13579d(0x112)]];if(_0x556377)return await _0x1ad85f[_0x13579d(0xeb)](sleep,0x1f4),_0x36b713+=0x1f4,await _0x1ad85f[_0x13579d(0xe4)](_0x8cf6c8);else return;};return await _0x8cf6c8(),new Promise((_0x4c6b50,_0x499583)=>{const _0x965fbd=_0x43c6c6,_0x5232eb={'fciHy':function(_0x374845,_0x36b484){return _0x374845===_0x36b484;},'IAeDJ':function(_0x257312,_0x290d05){const _0x20fba4=_0x1dd2;return _0x1ad85f[_0x20fba4(0xeb)](_0x257312,_0x290d05);}};let _0x32dd04=![],_0xac9554=null;const _0x92ecd9=_0x1ad85f[_0x965fbd(0xe3)](randomUUID);sendSuccessCBMap[_0x92ecd9]=_0xdaf9c5=>{const _0x45781f=_0x965fbd;if(_0xdaf9c5['msgId']===_0xac9554?.[_0x45781f(0xfc)]){if(_0x5232eb[_0x45781f(0xd6)](_0xdaf9c5['sendStatus'],0x2))return delete sendSuccessCBMap[_0x92ecd9],_0x32dd04=!![],_0x4c6b50(_0xdaf9c5),!![];return![];}return![];},sendMessagePool[_0x158f61]=async _0x6f1ee9=>{delete sendMessagePool[_0x158f61],_0xac9554=_0x6f1ee9;},_0x1ad85f[_0x965fbd(0xf6)](setTimeout,()=>{const _0xef2009=_0x965fbd;if(_0x32dd04)return;delete sendMessagePool[_0x158f61],delete sendSuccessCBMap[_0x92ecd9],_0x5232eb[_0xef2009(0x116)](_0x499583,'发送超时');},_0x19b680);const _0x3dd744=napCatCore[_0x965fbd(0xd9)][_0x965fbd(0x10d)]()[_0x965fbd(0x113)]('0',_0x1c1077,_0x42c692,new Map());});}static async[_0x366280(0x110)](_0x1cdde5,_0x224ded,_0x2e3adf){}static async[_0x366280(0x114)](_0x51c19e,_0x30deb9,_0x125f13){const _0x24dfc8=_0x366280,_0x48b1c7={'kpLHA':function(_0x78913b,_0x21428a){return _0x78913b(_0x21428a);},'mfyxe':_0x24dfc8(0xd8),'SRPwa':_0x24dfc8(0xf7),'pAZYY':function(_0x5e96fa,_0x36c4e0){return _0x5e96fa==_0x36c4e0;},'WPyVH':function(_0x269d38,_0x105210){return _0x269d38(_0x105210);},'tFvGp':function(_0x51e334,_0x1b0400,_0x3557c1){return _0x51e334(_0x1b0400,_0x3557c1);}},_0x29cc71=_0x125f13[_0x24dfc8(0xd3)](_0x22a2d1=>{const _0x3883f9=_0x24dfc8;return{'msgId':_0x22a2d1,'senderShowName':selfInfo[_0x3883f9(0x100)]};});return new Promise((_0x298d5f,_0x3066d8)=>{const _0x4a494f=_0x24dfc8,_0x31e7dd={'duFkp':_0x48b1c7[_0x4a494f(0xda)],'KGyxl':function(_0x3dea52,_0x342d38){const _0x3dfdc0=_0x4a494f;return _0x48b1c7[_0x3dfdc0(0xf3)](_0x3dea52,_0x342d38);},'TiKfZ':function(_0x3c45a6,_0x382fa1){const _0x269cad=_0x4a494f;return _0x48b1c7[_0x269cad(0xf3)](_0x3c45a6,_0x382fa1);},'cvHGu':function(_0x482551,_0x1f2d8f){const _0xa04d10=_0x4a494f;return _0x48b1c7[_0xa04d10(0xe2)](_0x482551,_0x1f2d8f);}};let _0xcb7bd0=![];const _0x3c30b2=new MsgListener(),_0x1afa8f=_0x549115=>{const _0x12af0d=_0x4a494f,_0x3280d2=_0x549115[_0x12af0d(0xef)][_0x12af0d(0x103)](_0x2acecd=>_0x2acecd[_0x12af0d(0xf4)]);if(!_0x3280d2)return;const _0x50fb2e=JSON[_0x12af0d(0x10e)](_0x3280d2[_0x12af0d(0xf4)][_0x12af0d(0xd7)]);if(_0x50fb2e[_0x12af0d(0xdb)]!=_0x31e7dd[_0x12af0d(0xe7)])return;_0x31e7dd[_0x12af0d(0xfb)](_0x549115['peerUid'],_0x30deb9['peerUid'])&&_0x31e7dd[_0x12af0d(0x101)](_0x549115[_0x12af0d(0x10c)],selfInfo['uid'])&&(_0xcb7bd0=!![],napCatCore[_0x12af0d(0xd9)][_0x12af0d(0x10d)]()[_0x12af0d(0xfe)](_0x578f17),_0x31e7dd[_0x12af0d(0xfa)](_0x298d5f,_0x549115));};_0x3c30b2['onAddSendMsg']=_0x1afa8f;const _0x578f17=napCatCore[_0x4a494f(0xec)](_0x3c30b2);_0x48b1c7[_0x4a494f(0x10a)](setTimeout,()=>{const _0x350bd6=_0x4a494f;!_0xcb7bd0&&(napCatCore[_0x350bd6(0xd9)]['getMsgService']()[_0x350bd6(0xfe)](_0x578f17),_0x48b1c7[_0x350bd6(0x117)](_0x3066d8,_0x48b1c7[_0x350bd6(0x10f)]));},0x1388),napCatCore['session'][_0x4a494f(0x10d)]()[_0x4a494f(0x115)](_0x29cc71,_0x51c19e,_0x30deb9,[],new Map());});}}