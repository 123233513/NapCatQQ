function _0x6c33(){const _0x2d2eea=['3780QJuMtZ','guildId','arkElement','786EDxXrz','map','XMDhE','length','259218OGlfVc','forwardMsg','QpGHp','6eJrEwq','uNndt','senderUid','getMultiMsg','setMsgEmojiLikes','addListener','com.tencent.multimsg','getMsgHistory','MVPEU','then','recallMsg','296kFlahJ','onAddSendMsg','onMsgInfoListUpdate','fetchRecentContact','894289xQVFbS','4mDnmkT','Lagks','100tNQzLp','nuJea','getMsgsByMsgId','setEmojiLike','setMsgRead','parse','activateChat','forEach','nick','143BVooab','302958BzyLbg','getMsgsBySeqAndCount','catch','session','sendMsg','发送超时','1733880NaVEHu','msgId','peerUid','mCGZX','3943002KPuyDv','getMsgsIncludeSelf','getMsgService','519420ffFMTE','multiForwardMsg'];_0x6c33=function(){return _0x2d2eea;};return _0x6c33();}const _0xac5061=_0x1607;(function(_0x378694,_0x535203){const _0x290ef5=_0x1607,_0x3f54c1=_0x378694();while(!![]){try{const _0x2833d5=parseInt(_0x290ef5(0x11c))/0x1*(-parseInt(_0x290ef5(0x135))/0x2)+-parseInt(_0x290ef5(0x122))/0x3*(parseInt(_0x290ef5(0x110))/0x4)+-parseInt(_0x290ef5(0x12b))/0x5*(-parseInt(_0x290ef5(0x12e))/0x6)+parseInt(_0x290ef5(0x126))/0x7+parseInt(_0x290ef5(0x10b))/0x8*(parseInt(_0x290ef5(0x132))/0x9)+-parseInt(_0x290ef5(0x112))/0xa*(-parseInt(_0x290ef5(0x10f))/0xb)+-parseInt(_0x290ef5(0x129))/0xc*(parseInt(_0x290ef5(0x11b))/0xd);if(_0x2833d5===_0x535203)break;else _0x3f54c1['push'](_0x3f54c1['shift']());}catch(_0x33e610){_0x3f54c1['push'](_0x3f54c1['shift']());}}}(_0x6c33,0x8d1e1));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x1607(_0x4e811a,_0x2ca3f9){const _0x6c33dd=_0x6c33();return _0x1607=function(_0x16072c,_0x22e5fb){_0x16072c=_0x16072c-0x108;let _0x2cdb91=_0x6c33dd[_0x16072c];return _0x2cdb91;},_0x1607(_0x4e811a,_0x2ca3f9);}import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},msgListener=new MsgListener();msgListener['onAddSendMsg']=_0xf0d2d3=>{const _0x50996c=_0x1607;if(sendMessagePool[_0xf0d2d3[_0x50996c(0x124)]]){const _0x169de7=sendMessagePool[_0xf0d2d3[_0x50996c(0x124)]]?.(_0xf0d2d3);_0x169de7 instanceof Promise&&_0x169de7[_0x50996c(0x109)]()['catch'](logError);}},msgListener[_0xac5061(0x10d)]=_0x5b84d4=>{const _0x726440=_0xac5061,_0x294fed={'MVPEU':function(_0x5a774e,_0x42bf3a){return _0x5a774e(_0x42bf3a);},'GEFzX':function(_0x5ccd8c,_0x361d2d){return _0x5ccd8c instanceof _0x361d2d;},'uNndt':function(_0x1e828d,_0x4a8788){return _0x1e828d(_0x4a8788);}};_0x5b84d4[_0x726440(0x119)](_0x48a7da=>{const _0x25ce99=_0x726440;new Promise((_0x17b09e,_0x2e1123)=>{const _0x2627ee=_0x1607;for(const _0x21702f in sendSuccessCBMap){const _0x45ed1b=sendSuccessCBMap[_0x21702f],_0x58f287=_0x294fed[_0x2627ee(0x108)](_0x45ed1b,_0x48a7da),_0x34d0f=_0x581ee9=>{_0x581ee9&&delete sendSuccessCBMap[_0x21702f];};_0x294fed['GEFzX'](_0x58f287,Promise)?_0x58f287[_0x2627ee(0x109)](_0x34d0f):_0x294fed[_0x2627ee(0x136)](_0x34d0f,_0x58f287);}})[_0x25ce99(0x109)]()[_0x25ce99(0x11e)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async[_0xac5061(0x115)](_0x18417c,_0x300078,_0x275ecb,_0x312131=!![]){const _0x651f74=_0xac5061,_0xcc8e64={'aMbbQ':function(_0x4256a1,_0x24be4d){return _0x4256a1>_0x24be4d;}};return napCatCore[_0x651f74(0x11f)]['getMsgService']()[_0x651f74(0x139)](_0x18417c,_0x300078,_0x275ecb,_0xcc8e64['aMbbQ'](_0x275ecb[_0x651f74(0x131)],0x3)?'2':'1',_0x312131);}static async['getMultiMsg'](_0xf267f2,_0x208fb9,_0x4fbf7e){const _0x3e4892=_0xac5061;return napCatCore[_0x3e4892(0x11f)][_0x3e4892(0x128)]()[_0x3e4892(0x138)](_0xf267f2,_0x208fb9,_0x4fbf7e);}static async[_0xac5061(0x114)](_0x2587ae,_0x38df74){const _0x367133=_0xac5061;return await napCatCore[_0x367133(0x11f)][_0x367133(0x128)]()[_0x367133(0x114)](_0x2587ae,_0x38df74);}static async[_0xac5061(0x11d)](_0xcde042,_0x29ad7c,_0x5a2590,_0x26fb17,_0x1e1db0){const _0x16f954=_0xac5061;return await napCatCore[_0x16f954(0x11f)][_0x16f954(0x128)]()[_0x16f954(0x11d)](_0xcde042,_0x29ad7c,_0x5a2590,_0x26fb17,_0x1e1db0);}static async[_0xac5061(0x118)](_0x2293b7){}static async['activateChatAndGetHistory'](_0x39c8d5){}static async[_0xac5061(0x116)](_0x15c4fb){const _0x460a90=_0xac5061;return napCatCore[_0x460a90(0x11f)][_0x460a90(0x128)]()[_0x460a90(0x116)](_0x15c4fb['chatType'],_0x15c4fb[_0x460a90(0x124)],_0x15c4fb[_0x460a90(0x12c)]);}static async[_0xac5061(0x13c)](_0x29aaa0,_0x58cc42,_0x170599){const _0x169966=_0xac5061;return napCatCore[_0x169966(0x11f)]['getMsgService']()[_0x169966(0x127)](_0x29aaa0,_0x58cc42,_0x170599,!![]);}static async[_0xac5061(0x10e)](){}static async['recallMsg'](_0x2125f0,_0x1954cb){const _0x4bb3c2=_0xac5061;await napCatCore[_0x4bb3c2(0x11f)]['getMsgService']()[_0x4bb3c2(0x10a)]({'chatType':_0x2125f0['chatType'],'peerUid':_0x2125f0[_0x4bb3c2(0x124)]},_0x1954cb);}static async['sendMsg'](_0x5eafd6,_0x1c3c93,_0x5b227c=!![],_0x46f752=0x2710){const _0x301ca=_0xac5061,_0x4eada5={'dLXgc':function(_0xf28582,_0x42a0e4){return _0xf28582>_0x42a0e4;},'CLccK':_0x301ca(0x121),'mCGZX':function(_0x337c9a,_0x5f0aac){return _0x337c9a(_0x5f0aac);},'nuJea':function(_0x1ad9ee){return _0x1ad9ee();},'xQCqW':function(_0x47eca9,_0xc688b7){return _0x47eca9===_0xc688b7;},'JkqQZ':function(_0x9b2059){return _0x9b2059();},'NAEiy':function(_0x15fa4b,_0x5cbb1d,_0x1b0a5f){return _0x15fa4b(_0x5cbb1d,_0x1b0a5f);}},_0x34a5f9=_0x5eafd6[_0x301ca(0x124)];let _0x5830a9=0x0;const _0xe44bd=async()=>{const _0x117755=_0x301ca;if(_0x4eada5['dLXgc'](_0x5830a9,_0x46f752))throw _0x4eada5['CLccK'];const _0x32be67=sendMessagePool[_0x5eafd6['peerUid']];if(_0x32be67)return await _0x4eada5['mCGZX'](sleep,0x1f4),_0x5830a9+=0x1f4,await _0x4eada5[_0x117755(0x113)](_0xe44bd);else return;};return await _0xe44bd(),new Promise((_0x36aff0,_0x2b2b24)=>{const _0x4896ec=_0x301ca;let _0x5e00aa=![],_0x17009c=null;const _0x37693c=_0x4eada5['JkqQZ'](randomUUID);sendSuccessCBMap[_0x37693c]=_0x29f09a=>{const _0x197ab2=_0x1607;if(_0x4eada5['xQCqW'](_0x29f09a[_0x197ab2(0x123)],_0x17009c?.['msgId'])){if(_0x29f09a['sendStatus']===0x2)return delete sendSuccessCBMap[_0x37693c],_0x5e00aa=!![],_0x4eada5[_0x197ab2(0x125)](_0x36aff0,_0x29f09a),!![];return![];}return![];},sendMessagePool[_0x34a5f9]=async _0x7d96aa=>{delete sendMessagePool[_0x34a5f9],_0x17009c=_0x7d96aa;},_0x4eada5['NAEiy'](setTimeout,()=>{const _0x355537=_0x1607;if(_0x5e00aa)return;delete sendMessagePool[_0x34a5f9],delete sendSuccessCBMap[_0x37693c],_0x2b2b24(_0x355537(0x121));},_0x46f752);const _0x4f76b4=napCatCore[_0x4896ec(0x11f)][_0x4896ec(0x128)]()[_0x4896ec(0x120)]('0',_0x5eafd6,_0x1c3c93,new Map());});}static async[_0xac5061(0x133)](_0x370faf,_0x92defc,_0x5e73a5){}static async[_0xac5061(0x12a)](_0x206db7,_0x20b7ab,_0x1bead8){const _0x18f030=_0xac5061,_0x341ac2={'XMDhE':function(_0x305af4,_0x4a0244){return _0x305af4!=_0x4a0244;},'QpGHp':function(_0x1b8c09,_0x30d37f){return _0x1b8c09==_0x30d37f;},'Lagks':function(_0x1bba24,_0x1b0a88){return _0x1bba24==_0x1b0a88;}},_0x1f437a=_0x1bead8[_0x18f030(0x12f)](_0x447859=>{const _0x11639a=_0x18f030;return{'msgId':_0x447859,'senderShowName':selfInfo[_0x11639a(0x11a)]};});return new Promise((_0x26e2d8,_0xc7569f)=>{const _0x19fc29=_0x18f030;let _0x5015d4=![];const _0x220b96=new MsgListener(),_0x68b229=_0x362b0f=>{const _0x482892=_0x1607,_0xbe821e=_0x362b0f['elements']['find'](_0x1c506b=>_0x1c506b[_0x482892(0x12d)]);if(!_0xbe821e)return;const _0x3d19e5=JSON[_0x482892(0x117)](_0xbe821e[_0x482892(0x12d)]['bytesData']);if(_0x341ac2[_0x482892(0x130)](_0x3d19e5['app'],_0x482892(0x13b)))return;_0x341ac2[_0x482892(0x134)](_0x362b0f[_0x482892(0x124)],_0x20b7ab[_0x482892(0x124)])&&_0x341ac2[_0x482892(0x111)](_0x362b0f[_0x482892(0x137)],selfInfo['uid'])&&(_0x5015d4=!![],napCatCore['session']['getMsgService']()['removeKernelMsgListener'](_0x590710),_0x26e2d8(_0x362b0f));};_0x220b96[_0x19fc29(0x10c)]=_0x68b229;const _0x590710=napCatCore[_0x19fc29(0x13a)](_0x220b96);setTimeout(()=>{const _0x2b53c8=_0x19fc29;!_0x5015d4&&(napCatCore[_0x2b53c8(0x11f)][_0x2b53c8(0x128)]()['removeKernelMsgListener'](_0x590710),_0xc7569f('转发消息超时'));},0x1388),napCatCore[_0x19fc29(0x11f)][_0x19fc29(0x128)]()['multiForwardMsgWithComment'](_0x1f437a,_0x206db7,_0x20b7ab,[],new Map());});}}