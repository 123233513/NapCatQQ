function _0x10a1(_0x2cd9df,_0x4256c7){const _0x5d64f6=_0x5d64();return _0x10a1=function(_0x10a118,_0x3e92b2){_0x10a118=_0x10a118-0x1d2;let _0x12e71c=_0x5d64f6[_0x10a118];return _0x12e71c;},_0x10a1(_0x2cd9df,_0x4256c7);}const _0xbcb85d=_0x10a1;(function(_0x3b144d,_0x130ad7){const _0x242f03=_0x10a1,_0xdb6453=_0x3b144d();while(!![]){try{const _0x3edaef=parseInt(_0x242f03(0x1d2))/0x1+parseInt(_0x242f03(0x202))/0x2*(-parseInt(_0x242f03(0x209))/0x3)+parseInt(_0x242f03(0x1f7))/0x4+-parseInt(_0x242f03(0x1dd))/0x5+parseInt(_0x242f03(0x1db))/0x6+-parseInt(_0x242f03(0x1e8))/0x7+-parseInt(_0x242f03(0x1ee))/0x8*(parseInt(_0x242f03(0x1fc))/0x9);if(_0x3edaef===_0x130ad7)break;else _0xdb6453['push'](_0xdb6453['shift']());}catch(_0x43414e){_0xdb6453['push'](_0xdb6453['shift']());}}}(_0x5d64,0xa2084));import{selfInfo}from'@/common/data';import{log}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},msgListener=new MsgListener();msgListener[_0xbcb85d(0x208)]=_0x54f639=>{const _0x1e2afc=_0xbcb85d,_0x1009e8={'zNRRo':function(_0x2e251e,_0x480908){return _0x2e251e instanceof _0x480908;}};if(sendMessagePool[_0x54f639[_0x1e2afc(0x204)]]){const _0x115db2=sendMessagePool[_0x54f639[_0x1e2afc(0x204)]]?.(_0x54f639);_0x1009e8['zNRRo'](_0x115db2,Promise)&&_0x115db2['then']()[_0x1e2afc(0x1f8)](log);}},msgListener[_0xbcb85d(0x205)]=_0x26f386=>{const _0x3704c9=_0xbcb85d,_0xef54f2={'zIjgl':function(_0x24927a,_0x1d9a50){return _0x24927a(_0x1d9a50);},'uJIEs':function(_0x45cdd1,_0x2bcd01){return _0x45cdd1 instanceof _0x2bcd01;}};_0x26f386[_0x3704c9(0x1fd)](_0x21e1cf=>{const _0x460367=_0x3704c9,_0x1d45e6={'ocyRW':function(_0x5ce155,_0x53b14f){const _0x3fac9a=_0x10a1;return _0xef54f2[_0x3fac9a(0x1da)](_0x5ce155,_0x53b14f);},'OCyQF':function(_0x109645,_0x53afa0){const _0x3a5a04=_0x10a1;return _0xef54f2[_0x3a5a04(0x1fe)](_0x109645,_0x53afa0);},'MUNHb':function(_0x2c9c04,_0xae20b4){const _0x276a7c=_0x10a1;return _0xef54f2[_0x276a7c(0x1da)](_0x2c9c04,_0xae20b4);}};new Promise((_0x4be272,_0x15c36d)=>{const _0xc06f38=_0x10a1;for(const _0x305296 in sendSuccessCBMap){const _0x6b910e=sendSuccessCBMap[_0x305296],_0x3ac743=_0x1d45e6[_0xc06f38(0x1e0)](_0x6b910e,_0x21e1cf),_0x669571=_0x2aeafa=>{_0x2aeafa&&delete sendSuccessCBMap[_0x305296];};_0x1d45e6[_0xc06f38(0x1e3)](_0x3ac743,Promise)?_0x3ac743['then'](_0x669571):_0x1d45e6[_0xc06f38(0x1d7)](_0x669571,_0x3ac743);}})[_0x460367(0x1f8)]()[_0x460367(0x1f3)](log);});},setTimeout(()=>{const _0x5f00e4=_0xbcb85d;napCatCore[_0x5f00e4(0x206)](()=>{napCatCore['addListener'](msgListener);});},0x64);function _0x5d64(){const _0xb3f667=['bytesData','elements','520322BaBDcu','removeKernelMsgListener','peerUid','onMsgInfoListUpdate','onLoginSuccess','EKpZn','onAddSendMsg','3mRNzjR','JLipN','479038EKxGdj','kVIPp','getMultiMsg','tCKom','guildId','MUNHb','ykiHQ','com.tencent.multimsg','zIjgl','593334ZSfpVN','setMsgRead','626280egOtyY','msgId','sendStatus','ocyRW','iUzsq','getMsgService','OCyQF','chatType','multiForwardMsgWithComment','activateChat','multiForwardMsg','1782914MPEIqC','iqKkO','lJpKF','nick','session','parse','10616EqyTVL','daLDc','转发消息超时','uid','find','catch','recallMsg','sendMsg','arkElement','5185944uIwhOu','then','kmAwV','byFJX','map','3870IoYtWZ','forEach','uJIEs','getMsgHistory'];_0x5d64=function(){return _0xb3f667;};return _0x5d64();}export class NTQQMsgApi{static async[_0xbcb85d(0x1d4)](_0x1bea55,_0x532918,_0x46e3e1){const _0x1b2505=_0xbcb85d;return napCatCore[_0x1b2505(0x1ec)][_0x1b2505(0x1e2)]()['getMultiMsg'](_0x1bea55,_0x532918,_0x46e3e1);}static async[_0xbcb85d(0x1e6)](_0x47689e){}static async['activateChatAndGetHistory'](_0x37838c){}static async[_0xbcb85d(0x1dc)](_0x2140b6){const _0x46807f=_0xbcb85d;return napCatCore[_0x46807f(0x1ec)][_0x46807f(0x1e2)]()['setMsgRead'](_0x2140b6[_0x46807f(0x1e4)],_0x2140b6['peerUid'],_0x2140b6[_0x46807f(0x1d6)]);}static async[_0xbcb85d(0x1ff)](_0xcec216,_0x5020e4,_0x3f05ce){const _0x4d941d=_0xbcb85d;return napCatCore['session'][_0x4d941d(0x1e2)]()['getMsgsIncludeSelf'](_0xcec216,_0x5020e4,_0x3f05ce,!![]);}static async['fetchRecentContact'](){}static async[_0xbcb85d(0x1f4)](_0x2c68bf,_0xc8a709){const _0x293285=_0xbcb85d;await napCatCore['session'][_0x293285(0x1e2)]()[_0x293285(0x1f4)]({'chatType':_0x2c68bf[_0x293285(0x1e4)],'peerUid':_0x2c68bf[_0x293285(0x204)]},_0xc8a709);}static async['sendMsg'](_0x543d8f,_0x28eb27,_0x5c235d=!![],_0x393007=0x2710){const _0x1bb7d4={'byFJX':'发送超时','kVIPp':function(_0x3a1abe,_0x4e2425){return _0x3a1abe(_0x4e2425);},'EKpZn':function(_0x3b58d6){return _0x3b58d6();},'kmAwV':function(_0x55ea94,_0x46798f){return _0x55ea94===_0x46798f;},'rTYFR':function(_0x177e74,_0x175047,_0x31cea7){return _0x177e74(_0x175047,_0x31cea7);}},_0x1a17c6=_0x543d8f['peerUid'];let _0x1eb878=0x0;const _0x279138=async()=>{const _0x30405f=_0x10a1;if(_0x1eb878>_0x393007)throw _0x1bb7d4['byFJX'];const _0x5455bc=sendMessagePool[_0x543d8f['peerUid']];if(_0x5455bc)return await _0x1bb7d4[_0x30405f(0x1d3)](sleep,0x1f4),_0x1eb878+=0x1f4,await _0x1bb7d4[_0x30405f(0x207)](_0x279138);else return;};return await _0x279138(),new Promise((_0x2531eb,_0xa21a8d)=>{const _0x13efe4=_0x10a1,_0x48f230={'RiSNM':function(_0x2e034b,_0x2d10e9){const _0x36e51b=_0x10a1;return _0x1bb7d4[_0x36e51b(0x1d3)](_0x2e034b,_0x2d10e9);},'aOAzd':_0x1bb7d4[_0x13efe4(0x1fa)]};let _0x1e2abf=![],_0x4e3b30=null;const _0x3e464c=randomUUID();sendSuccessCBMap[_0x3e464c]=_0x815fdc=>{const _0x3d0002=_0x13efe4;if(_0x1bb7d4[_0x3d0002(0x1f9)](_0x815fdc[_0x3d0002(0x1de)],_0x4e3b30?.[_0x3d0002(0x1de)])){if(_0x1bb7d4[_0x3d0002(0x1f9)](_0x815fdc[_0x3d0002(0x1df)],0x2))return delete sendSuccessCBMap[_0x3e464c],_0x1e2abf=!![],_0x2531eb(_0x815fdc),!![];return![];}return![];},sendMessagePool[_0x1a17c6]=async _0x5f1ea5=>{delete sendMessagePool[_0x1a17c6],_0x4e3b30=_0x5f1ea5;},_0x1bb7d4['rTYFR'](setTimeout,()=>{if(_0x1e2abf)return;delete sendMessagePool[_0x1a17c6],delete sendSuccessCBMap[_0x3e464c],_0x48f230['RiSNM'](_0xa21a8d,_0x48f230['aOAzd']);},_0x393007);const _0x16783c=napCatCore[_0x13efe4(0x1ec)]['getMsgService']()[_0x13efe4(0x1f5)]('0',_0x543d8f,_0x28eb27,new Map());});}static async['forwardMsg'](_0x56621c,_0xf11219,_0xd09fcf){}static async[_0xbcb85d(0x1e7)](_0x4f3923,_0x5d8410,_0x1b16a3){const _0x2f1063=_0xbcb85d,_0x3c56ad={'oLaQr':function(_0x44d537,_0xf27fbb){return _0x44d537(_0xf27fbb);},'CKdYb':_0x2f1063(0x1f0),'ykiHQ':function(_0x3bdd69,_0x456465){return _0x3bdd69==_0x456465;},'lJpKF':function(_0x34e9ce,_0x853eb0){return _0x34e9ce==_0x853eb0;},'iqKkO':function(_0x353585,_0x10e1ea,_0x4553a5){return _0x353585(_0x10e1ea,_0x4553a5);}},_0x488f37=_0x1b16a3[_0x2f1063(0x1fb)](_0x20f1ba=>{const _0x3fcd0a=_0x2f1063;return{'msgId':_0x20f1ba,'senderShowName':selfInfo[_0x3fcd0a(0x1eb)]};});return new Promise((_0x20a13f,_0x2675d5)=>{const _0x1f2466=_0x2f1063,_0x5ac60c={'iUzsq':_0x1f2466(0x1d9),'tCKom':function(_0x511f37,_0x4fa1a7){const _0x126620=_0x1f2466;return _0x3c56ad[_0x126620(0x1d8)](_0x511f37,_0x4fa1a7);},'daLDc':function(_0x23c067,_0x3925a9){const _0x4e3619=_0x1f2466;return _0x3c56ad[_0x4e3619(0x1ea)](_0x23c067,_0x3925a9);},'JLipN':function(_0x435077,_0x1c2f37){return _0x435077(_0x1c2f37);}};let _0xc64ca7=![];const _0x431d89=new MsgListener(),_0x12d493=_0x5ad576=>{const _0x5afd1e=_0x1f2466,_0x2b44db=_0x5ad576[_0x5afd1e(0x201)][_0x5afd1e(0x1f2)](_0x5ea527=>_0x5ea527[_0x5afd1e(0x1f6)]);if(!_0x2b44db)return;const _0x4e5697=JSON[_0x5afd1e(0x1ed)](_0x2b44db[_0x5afd1e(0x1f6)][_0x5afd1e(0x200)]);if(_0x4e5697['app']!=_0x5ac60c[_0x5afd1e(0x1e1)])return;_0x5ac60c[_0x5afd1e(0x1d5)](_0x5ad576[_0x5afd1e(0x204)],_0x5d8410[_0x5afd1e(0x204)])&&_0x5ac60c[_0x5afd1e(0x1ef)](_0x5ad576['senderUid'],selfInfo[_0x5afd1e(0x1f1)])&&(_0xc64ca7=!![],napCatCore[_0x5afd1e(0x1ec)]['getMsgService']()['removeKernelMsgListener'](_0x30934c),_0x5ac60c[_0x5afd1e(0x20a)](_0x20a13f,_0x5ad576));};_0x431d89[_0x1f2466(0x208)]=_0x12d493;const _0x30934c=napCatCore['addListener'](_0x431d89);_0x3c56ad[_0x1f2466(0x1e9)](setTimeout,()=>{const _0x5de52f=_0x1f2466;!_0xc64ca7&&(napCatCore[_0x5de52f(0x1ec)][_0x5de52f(0x1e2)]()[_0x5de52f(0x203)](_0x30934c),_0x3c56ad['oLaQr'](_0x2675d5,_0x3c56ad['CKdYb']));},0x1388),napCatCore[_0x1f2466(0x1ec)][_0x1f2466(0x1e2)]()[_0x1f2466(0x1e5)](_0x488f37,_0x4f3923,_0x5d8410,[],new Map());});}}