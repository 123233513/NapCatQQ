const _0xb2e103=_0x5b07;function _0x1cc1(){const _0x5d70d1=['item','bytesData','GmvPO','sendStatus','activateChatAndGetHistory','1965YUYXVg','4692441qOGHZz','WtGyn','forEach','mudwe','parse','vhxLI','set','发送超时','39743cdreJg','RsbDA','8521404uaqMkG','expWk','elements','getRichMediaService','hsdax','TmaPC','map','fetchRecentContact','msgId','senderUid','WnyzC','recallMsg','获取群文件列表超时','4030922HxhPOG','arkElement','sgwrA','activateChat','getMsgsIncludeSelf','addListener','then','8524UuXSiJ','IDWPP','ADGIM','uid','hwbep','tolbc','pxefS','2320EwsWdI','转发消息超时','IUNPE','tGGLs','zPXLQ','358yEpDJg','delete','session','onMsgInfoListUpdate','YSCIt','ySRRo','DfXxI','getMsgsByMsgId','sendMsg','multiForwardMsgWithComment','setEmojiLike','catch','getMsgHistory','chatType','peerUid','app','qyldk','120YYQARq','onAddSendMsg','getMsgService','KaEnH','getMultiMsg','getMsgsBySeqAndCount','getGroupFileList','3372srNcYE','com.tencent.multimsg','setMsgRead','17991mDpGaM','length'];_0x1cc1=function(){return _0x5d70d1;};return _0x1cc1();}(function(_0x2d1390,_0x552278){const _0x2fcc62=_0x5b07,_0x1009ac=_0x2d1390();while(!![]){try{const _0x200219=-parseInt(_0x2fcc62(0x168))/0x1*(parseInt(_0x2fcc62(0x127))/0x2)+parseInt(_0x2fcc62(0x14a))/0x3+-parseInt(_0x2fcc62(0x13f))/0x4*(parseInt(_0x2fcc62(0x149))/0x5)+parseInt(_0x2fcc62(0x154))/0x6+parseInt(_0x2fcc62(0x161))/0x7+parseInt(_0x2fcc62(0x138))/0x8*(-parseInt(_0x2fcc62(0x142))/0x9)+parseInt(_0x2fcc62(0x16f))/0xa*(-parseInt(_0x2fcc62(0x152))/0xb);if(_0x200219===_0x552278)break;else _0x1009ac['push'](_0x1009ac['shift']());}catch(_0x57149e){_0x1009ac['push'](_0x1009ac['shift']());}}}(_0x1cc1,0xcbd73));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';function _0x5b07(_0x10f03f,_0xb7876f){const _0x1cc1b8=_0x1cc1();return _0x5b07=function(_0x5b07b4,_0x5cb419){_0x5b07b4=_0x5b07b4-0x126;let _0x40d6f8=_0x1cc1b8[_0x5b07b4];return _0x40d6f8;},_0x5b07(_0x10f03f,_0xb7876f);}import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onGroupFileInfoUpdate']=_0x535064=>{const _0x4b0269=_0x5b07,_0x65952c={'IDWPP':function(_0x4b0c66,_0x47bf18){return _0x4b0c66(_0x47bf18);}};for(const [_0x435c73,_0x5edb0e]of GroupFileInfoUpdateTasks){_0x65952c[_0x4b0269(0x169)](_0x5edb0e,_0x535064),GroupFileInfoUpdateTasks[_0x4b0269(0x128)](_0x435c73);}},msgListener[_0xb2e103(0x139)]=_0x3a1f4a=>{const _0x18b48d=_0xb2e103,_0x4ed930={'mudwe':function(_0x5f1b97,_0x3068ae){return _0x5f1b97(_0x3068ae);}};for(const [_0x138891,_0x2e8971]of sentMsgTasks){_0x4ed930[_0x18b48d(0x14d)](_0x2e8971,_0x3a1f4a),sentMsgTasks[_0x18b48d(0x128)](_0x138891);}if(sendMessagePool[_0x3a1f4a[_0x18b48d(0x135)]]){const _0x1ede1e=sendMessagePool[_0x3a1f4a['peerUid']]?.(_0x3a1f4a);_0x1ede1e instanceof Promise&&_0x1ede1e['then']()[_0x18b48d(0x132)](logError);}},msgListener[_0xb2e103(0x12a)]=_0x482e72=>{const _0x5bb3ad=_0xb2e103,_0x5bbfcc={'TmaPC':function(_0x48b051,_0x39d0d1){return _0x48b051(_0x39d0d1);},'qyldk':function(_0xaa7c64,_0x17fab8){return _0xaa7c64 instanceof _0x17fab8;},'Naqcx':function(_0x21e6ea,_0x3d128a){return _0x21e6ea(_0x3d128a);}};_0x482e72[_0x5bb3ad(0x14c)](_0x549fca=>{const _0x2d10d3=_0x5bb3ad;new Promise((_0x5bf77f,_0x54a2b6)=>{const _0x1b3e9e=_0x5b07;for(const _0x4eb579 in sendSuccessCBMap){const _0x191925=sendSuccessCBMap[_0x4eb579],_0x5b2a52=_0x5bbfcc[_0x1b3e9e(0x159)](_0x191925,_0x549fca),_0x2412e5=_0x1b0154=>{_0x1b0154&&delete sendSuccessCBMap[_0x4eb579];};_0x5bbfcc[_0x1b3e9e(0x137)](_0x5b2a52,Promise)?_0x5b2a52[_0x1b3e9e(0x167)](_0x2412e5):_0x5bbfcc['Naqcx'](_0x2412e5,_0x5b2a52);}})[_0x2d10d3(0x167)]()[_0x2d10d3(0x132)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x147e3e=_0x5b07;napCatCore[_0x147e3e(0x166)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0xb2e103(0x131)](_0x2a7e85,_0x466268,_0x53e2b0,_0x1c04a9=!![]){const _0x4f9a70=_0xb2e103,_0x2d81ed={'KaEnH':function(_0x1c9e25,_0x4d275f){return _0x1c9e25>_0x4d275f;}};return _0x53e2b0=_0x53e2b0['toString'](),napCatCore['session'][_0x4f9a70(0x13a)]()['setMsgEmojiLikes'](_0x2a7e85,_0x466268,_0x53e2b0,_0x2d81ed[_0x4f9a70(0x13b)](_0x53e2b0[_0x4f9a70(0x143)],0x3)?'2':'1',_0x1c04a9);}static async['getMultiMsg'](_0x56b020,_0x216579,_0x29ba15){const _0x34279e=_0xb2e103;return napCatCore[_0x34279e(0x129)]['getMsgService']()[_0x34279e(0x13c)](_0x56b020,_0x216579,_0x29ba15);}static async['getMsgsByMsgId'](_0x59ef7a,_0x231e30){const _0x5687d9=_0xb2e103;return await napCatCore[_0x5687d9(0x129)][_0x5687d9(0x13a)]()[_0x5687d9(0x12e)](_0x59ef7a,_0x231e30);}static async[_0xb2e103(0x13d)](_0x538f16,_0x568002,_0x3a0c2e,_0xd6ed4e,_0x12b59d){const _0x3571f5=_0xb2e103;return await napCatCore[_0x3571f5(0x129)]['getMsgService']()[_0x3571f5(0x13d)](_0x538f16,_0x568002,_0x3a0c2e,_0xd6ed4e,_0x12b59d);}static async[_0xb2e103(0x164)](_0x2fb8a7){}static async[_0xb2e103(0x148)](_0x185485){}static async[_0xb2e103(0x141)](_0x447bf3){const _0x1eb3d4=_0xb2e103;return napCatCore['session'][_0x1eb3d4(0x13a)]()[_0x1eb3d4(0x141)](_0x447bf3);}static async['getGroupFileList'](_0x13b4e7,_0x4bfd99){const _0x471b62=_0xb2e103,_0x1193d1={'vhxLI':function(_0x57d157,_0x375e88){return _0x57d157(_0x375e88);},'dmifA':_0x471b62(0x160),'WnyzC':function(_0x45f0a8,_0x55615d){return _0x45f0a8(_0x55615d);},'IUNPE':function(_0x9822a0,_0x3ea94a,_0x42f2c1){return _0x9822a0(_0x3ea94a,_0x42f2c1);},'tGGLs':function(_0x545897){return _0x545897();}};return new Promise(async(_0x24564c,_0x3242b9)=>{const _0x2a112f=_0x471b62;let _0x5544a5=![];_0x1193d1[_0x2a112f(0x171)](setTimeout,()=>{const _0x2bb69f=_0x2a112f;!_0x5544a5&&_0x1193d1[_0x2bb69f(0x14f)](_0x3242b9,_0x1193d1['dmifA']);},0x1388);const _0x29ba23=_0x41a4aa=>{const _0x38806c=_0x2a112f;_0x5544a5=!![],_0x1193d1[_0x38806c(0x15e)](_0x24564c,_0x41a4aa[_0x38806c(0x144)]);};GroupFileInfoUpdateTasks[_0x2a112f(0x150)](_0x1193d1[_0x2a112f(0x172)](randomUUID),_0x29ba23),await napCatCore['session'][_0x2a112f(0x157)]()[_0x2a112f(0x13e)](_0x13b4e7,_0x4bfd99);});}static async[_0xb2e103(0x133)](_0x128715,_0x2c7a66,_0x244aba){const _0x61f87f=_0xb2e103;return napCatCore['session'][_0x61f87f(0x13a)]()[_0x61f87f(0x165)](_0x128715,_0x2c7a66,_0x244aba,!![]);}static async[_0xb2e103(0x15b)](){}static async[_0xb2e103(0x15f)](_0x2a441f,_0x56ab77){const _0x39de62=_0xb2e103;await napCatCore[_0x39de62(0x129)][_0x39de62(0x13a)]()[_0x39de62(0x15f)]({'chatType':_0x2a441f[_0x39de62(0x134)],'peerUid':_0x2a441f[_0x39de62(0x135)]},_0x56ab77);}static async[_0xb2e103(0x12f)](_0x2ecd3f,_0x5f355d,_0x3e3935=!![],_0x1947e7=0x2710){const _0x3267ba=_0xb2e103,_0x41daad={'OSRrF':_0x3267ba(0x151),'xFNuo':function(_0x43d774,_0x1dd583){return _0x43d774(_0x1dd583);},'PfZLw':function(_0x2215fe,_0x3aa879){return _0x2215fe===_0x3aa879;},'tolbc':function(_0x2f39da,_0x3030d8){return _0x2f39da(_0x3030d8);},'GmvPO':function(_0x101db0,_0x5b01e3){return _0x101db0(_0x5b01e3);},'hwbep':function(_0x4dbe3a){return _0x4dbe3a();}},_0x15bd5a=_0x2ecd3f[_0x3267ba(0x135)];let _0x41370c=0x0;const _0x499bb1=async()=>{if(_0x41370c>_0x1947e7)throw _0x41daad['OSRrF'];const _0x4e04df=sendMessagePool[_0x2ecd3f['peerUid']];if(_0x4e04df)return await _0x41daad['xFNuo'](sleep,0x1f4),_0x41370c+=0x1f4,await _0x499bb1();else return;};return await _0x41daad[_0x3267ba(0x16c)](_0x499bb1),new Promise((_0x4226f2,_0x52ec31)=>{const _0x2eaf3a=_0x3267ba,_0x12d0f1={'ySRRo':function(_0x22c7e1,_0x436afd){return _0x41daad['PfZLw'](_0x22c7e1,_0x436afd);},'ADGIM':function(_0x3e7d66,_0x2e9050){const _0x3cafe9=_0x5b07;return _0x41daad[_0x3cafe9(0x16d)](_0x3e7d66,_0x2e9050);},'dDKxg':function(_0x55be93,_0x524260){const _0x39ccc4=_0x5b07;return _0x41daad[_0x39ccc4(0x146)](_0x55be93,_0x524260);},'RsbDA':_0x41daad['OSRrF']};let _0x25146b=![],_0x19b7eb=null;const _0x1285d7=randomUUID();sendSuccessCBMap[_0x1285d7]=_0x3e9fff=>{const _0xef9ab3=_0x5b07;if(_0x12d0f1[_0xef9ab3(0x12c)](_0x3e9fff[_0xef9ab3(0x15c)],_0x19b7eb?.[_0xef9ab3(0x15c)])){if(_0x12d0f1[_0xef9ab3(0x12c)](_0x3e9fff[_0xef9ab3(0x147)],0x2))return delete sendSuccessCBMap[_0x1285d7],_0x25146b=!![],_0x12d0f1[_0xef9ab3(0x16a)](_0x4226f2,_0x3e9fff),!![];return![];}return![];},sendMessagePool[_0x15bd5a]=async _0x4f880f=>{delete sendMessagePool[_0x15bd5a],_0x19b7eb=_0x4f880f;},setTimeout(()=>{const _0x7474e8=_0x5b07;if(_0x25146b)return;delete sendMessagePool[_0x15bd5a],delete sendSuccessCBMap[_0x1285d7],_0x12d0f1['dDKxg'](_0x52ec31,_0x12d0f1[_0x7474e8(0x153)]);},_0x1947e7);const _0xe791de=napCatCore[_0x2eaf3a(0x129)][_0x2eaf3a(0x13a)]()[_0x2eaf3a(0x12f)]('0',_0x2ecd3f,_0x5f355d,new Map());});}static async['forwardMsg'](_0xd14f4c,_0x4d5148,_0x347981){const _0x57946a=_0xb2e103;return napCatCore[_0x57946a(0x129)][_0x57946a(0x13a)]()['forwardMsg'](_0x347981,_0xd14f4c,[_0x4d5148],new Map());}static async['multiForwardMsg'](_0x398043,_0x1b0ac8,_0x1852e9){const _0x5a7f85=_0xb2e103,_0x33004={'DfXxI':function(_0x5e6106,_0x3dc305){return _0x5e6106!=_0x3dc305;},'hsdax':_0x5a7f85(0x140),'WtGyn':function(_0x3dfd3a,_0x4d1a80){return _0x3dfd3a==_0x4d1a80;},'sgwrA':function(_0x365ad7,_0x53adc9){return _0x365ad7(_0x53adc9);},'expWk':_0x5a7f85(0x170),'pxefS':function(_0x400d45){return _0x400d45();},'ZrejR':function(_0x3cc0c3,_0x5ca746,_0xc04b33){return _0x3cc0c3(_0x5ca746,_0xc04b33);}},_0x1bfd4d=_0x1852e9[_0x5a7f85(0x15a)](_0x19f878=>{return{'msgId':_0x19f878,'senderShowName':selfInfo['nick']};});return new Promise((_0x3c908b,_0x24c542)=>{const _0x24ab99=_0x5a7f85,_0x33107a={'zPXLQ':function(_0x581043,_0x30d80b){return _0x33004['sgwrA'](_0x581043,_0x30d80b);},'YSCIt':_0x33004[_0x24ab99(0x155)]};let _0x5b2a15=![];const _0x585097=_0x771977=>{const _0x3f58ca=_0x24ab99,_0x3d7e0e=_0x771977[_0x3f58ca(0x156)]['find'](_0x1c61c2=>_0x1c61c2[_0x3f58ca(0x162)]);if(!_0x3d7e0e)return;const _0x2e5d38=JSON[_0x3f58ca(0x14e)](_0x3d7e0e[_0x3f58ca(0x162)][_0x3f58ca(0x145)]);if(_0x33004[_0x3f58ca(0x12d)](_0x2e5d38[_0x3f58ca(0x136)],_0x33004[_0x3f58ca(0x158)]))return;_0x771977[_0x3f58ca(0x135)]==_0x1b0ac8[_0x3f58ca(0x135)]&&_0x33004[_0x3f58ca(0x14b)](_0x771977[_0x3f58ca(0x15d)],selfInfo[_0x3f58ca(0x16b)])&&(_0x5b2a15=!![],_0x33004[_0x3f58ca(0x163)](_0x3c908b,_0x771977));};sentMsgTasks[_0x24ab99(0x150)](_0x33004[_0x24ab99(0x16e)](randomUUID),_0x585097),_0x33004['ZrejR'](setTimeout,()=>{const _0x3c4075=_0x24ab99;!_0x5b2a15&&_0x33107a[_0x3c4075(0x126)](_0x24c542,_0x33107a[_0x3c4075(0x12b)]);},0x1388),napCatCore[_0x24ab99(0x129)][_0x24ab99(0x13a)]()[_0x24ab99(0x130)](_0x1bfd4d,_0x398043,_0x1b0ac8,[],new Map());});}}