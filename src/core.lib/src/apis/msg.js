const _0x904de2=_0x266b;(function(_0x5b6560,_0x43486b){const _0x29ebb3=_0x266b,_0x264a29=_0x5b6560();while(!![]){try{const _0x53d40b=parseInt(_0x29ebb3(0x1b3))/0x1+-parseInt(_0x29ebb3(0x1cd))/0x2+parseInt(_0x29ebb3(0x1da))/0x3+-parseInt(_0x29ebb3(0x1bf))/0x4*(-parseInt(_0x29ebb3(0x1bc))/0x5)+parseInt(_0x29ebb3(0x1d5))/0x6*(-parseInt(_0x29ebb3(0x1b7))/0x7)+parseInt(_0x29ebb3(0x1c9))/0x8*(parseInt(_0x29ebb3(0x1b1))/0x9)+-parseInt(_0x29ebb3(0x1d6))/0xa;if(_0x53d40b===_0x43486b)break;else _0x264a29['push'](_0x264a29['shift']());}catch(_0x33b07f){_0x264a29['push'](_0x264a29['shift']());}}}(_0x4b8a,0x5417c));import{selfInfo}from'@/core/data';function _0x266b(_0x2647ca,_0x3d9371){const _0x4b8a11=_0x4b8a();return _0x266b=function(_0x266b74,_0x35afac){_0x266b74=_0x266b74-0x19a;let _0x5dd983=_0x4b8a11[_0x266b74];return _0x5dd983;},_0x266b(_0x2647ca,_0x3d9371);}import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x4b8a(){const _0x167473=['forwardMsg','onGroupFileInfoUpdate','146776VWZmAh','VORuw','sendStatus','hrtAf','getMsgsIncludeSelf','762585iXnfDj','recallMsg','ULjXl','8dvstJX','uid','com.tencent.multimsg','CwecE','addListener','getGroupFileList','naCJr','catch','chatType','toString','3847656zIzySn','peerUid','aLPqS','getMsgService','967934ZvmSxv','TDKEq','length','item','multiForwardMsg','sendMsg','KsFod','arkElement','12xaeOkI','10823920SkZCDP','onAddSendMsg','then','delete','1517889ykSSOZ','ZhzoO','siFSF','gWjHj','activateChatAndGetHistory','setEmojiLike','dDCIZ','set','getMsgHistory','senderUid','获取群文件列表超时','kSULh','getMultiMsg','msgId','发送超时','GJidt','转发消息超时','bytesData','lOkxL','nick','JnFFV','map','izJtl','getMsgsBySeqAndCount','setMsgEmojiLikes','find','getMsgsByMsgId','forEach','kkjsC','session','setMsgRead','elements','FBTeq','onMsgInfoListUpdate','9VREshr','YLrMQ','660785ocUhpW','JDtDC'];_0x4b8a=function(){return _0x167473;};return _0x4b8a();}const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x904de2(0x1b6)]=_0x374332=>{const _0x65e035=_0x904de2,_0x3c447f={'CwecE':function(_0x54c10e,_0x45b625){return _0x54c10e(_0x45b625);}};for(const [_0x2f5abb,_0x47872b]of GroupFileInfoUpdateTasks){_0x3c447f[_0x65e035(0x1c2)](_0x47872b,_0x374332),GroupFileInfoUpdateTasks[_0x65e035(0x1d9)](_0x2f5abb);}},msgListener[_0x904de2(0x1d7)]=_0x1eed1d=>{const _0x584a6d=_0x904de2,_0x2a38e0={'GgoIm':function(_0x4752e3,_0x16090e){return _0x4752e3(_0x16090e);},'kSULh':function(_0x745ef8,_0x37febc){return _0x745ef8 instanceof _0x37febc;}};for(const [_0x2235a9,_0x1e043a]of sentMsgTasks){_0x2a38e0['GgoIm'](_0x1e043a,_0x1eed1d),sentMsgTasks[_0x584a6d(0x1d9)](_0x2235a9);}if(sendMessagePool[_0x1eed1d[_0x584a6d(0x1ca)]]){const _0x570b41=sendMessagePool[_0x1eed1d[_0x584a6d(0x1ca)]]?.(_0x1eed1d);_0x2a38e0[_0x584a6d(0x19a)](_0x570b41,Promise)&&_0x570b41[_0x584a6d(0x1d8)]()[_0x584a6d(0x1c6)](logError);}},msgListener[_0x904de2(0x1b0)]=_0x19f6fc=>{const _0x30ef21=_0x904de2,_0x4dff27={'naCJr':function(_0x27be07,_0x502ce7){return _0x27be07 instanceof _0x502ce7;},'FBTeq':function(_0x3fb7ab,_0x367a33){return _0x3fb7ab(_0x367a33);}};_0x19f6fc[_0x30ef21(0x1aa)](_0x371f27=>{const _0xa765e=_0x30ef21;new Promise((_0x445fc4,_0x1c1692)=>{const _0x3c5e55=_0x266b;for(const _0x432cd8 in sendSuccessCBMap){const _0x1d812d=sendSuccessCBMap[_0x432cd8],_0x40b406=_0x1d812d(_0x371f27),_0xdcb721=_0x3f6781=>{_0x3f6781&&delete sendSuccessCBMap[_0x432cd8];};_0x4dff27[_0x3c5e55(0x1c5)](_0x40b406,Promise)?_0x40b406[_0x3c5e55(0x1d8)](_0xdcb721):_0x4dff27[_0x3c5e55(0x1af)](_0xdcb721,_0x40b406);}})[_0xa765e(0x1d8)]()[_0xa765e(0x1c6)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x38eb80=_0x266b;napCatCore[_0x38eb80(0x1c3)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x904de2(0x1df)](_0x3dc4a9,_0x526d97,_0x4e96ab,_0x4eec25=!![]){const _0x16354b=_0x904de2,_0xab2c3a={'JDtDC':function(_0x3b755d,_0x5d16f8){return _0x3b755d>_0x5d16f8;}};return _0x4e96ab=_0x4e96ab[_0x16354b(0x1c8)](),napCatCore[_0x16354b(0x1ac)][_0x16354b(0x1cc)]()[_0x16354b(0x1a7)](_0x3dc4a9,_0x526d97,_0x4e96ab,_0xab2c3a[_0x16354b(0x1b4)](_0x4e96ab[_0x16354b(0x1cf)],0x3)?'2':'1',_0x4eec25);}static async[_0x904de2(0x19b)](_0x20bc7f,_0x3a5ba7,_0x450f45){const _0x1c77cb=_0x904de2;return napCatCore[_0x1c77cb(0x1ac)]['getMsgService']()[_0x1c77cb(0x19b)](_0x20bc7f,_0x3a5ba7,_0x450f45);}static async[_0x904de2(0x1a9)](_0x45a095,_0x432043){const _0xd7d38a=_0x904de2;return await napCatCore[_0xd7d38a(0x1ac)][_0xd7d38a(0x1cc)]()[_0xd7d38a(0x1a9)](_0x45a095,_0x432043);}static async[_0x904de2(0x1a6)](_0x2d62c6,_0x18619a,_0x2af844,_0x3dd4c0,_0x1d717a){const _0x4df933=_0x904de2;return await napCatCore[_0x4df933(0x1ac)]['getMsgService']()[_0x4df933(0x1a6)](_0x2d62c6,_0x18619a,_0x2af844,_0x3dd4c0,_0x1d717a);}static async['activateChat'](_0x3d9146){}static async[_0x904de2(0x1de)](_0x5156b7){}static async[_0x904de2(0x1ad)](_0x2dd594){const _0x34cfd7=_0x904de2;return napCatCore[_0x34cfd7(0x1ac)]['getMsgService']()[_0x34cfd7(0x1ad)](_0x2dd594);}static async[_0x904de2(0x1c4)](_0x588ddc,_0x5ed4fb){const _0x4d7c34=_0x904de2,_0x1b386e={'BTmbc':function(_0x2ce345,_0x348a89){return _0x2ce345(_0x348a89);},'kkjsC':_0x4d7c34(0x1e4),'KsFod':function(_0x441e7d,_0x567a90){return _0x441e7d(_0x567a90);},'GJidt':function(_0x50809){return _0x50809();}};return new Promise(async(_0x11d45b,_0x9ca292)=>{const _0x2bda4d=_0x4d7c34;let _0x19e7f8=![];setTimeout(()=>{const _0x4f0243=_0x266b;!_0x19e7f8&&_0x1b386e['BTmbc'](_0x9ca292,_0x1b386e[_0x4f0243(0x1ab)]);},0x1388);const _0x16d8cd=_0x4713ca=>{const _0x17e5af=_0x266b;_0x19e7f8=!![],_0x1b386e[_0x17e5af(0x1d3)](_0x11d45b,_0x4713ca[_0x17e5af(0x1d0)]);};GroupFileInfoUpdateTasks[_0x2bda4d(0x1e1)](_0x1b386e[_0x2bda4d(0x19e)](randomUUID),_0x16d8cd),await napCatCore[_0x2bda4d(0x1ac)]['getRichMediaService']()[_0x2bda4d(0x1c4)](_0x588ddc,_0x5ed4fb);});}static async[_0x904de2(0x1e2)](_0x4cf360,_0x9093e4,_0x146aef){const _0x2462fb=_0x904de2;return napCatCore[_0x2462fb(0x1ac)][_0x2462fb(0x1cc)]()[_0x2462fb(0x1bb)](_0x4cf360,_0x9093e4,_0x146aef,!![]);}static async['fetchRecentContact'](){}static async[_0x904de2(0x1bd)](_0x45b3f5,_0x408949){const _0x3726bb=_0x904de2;await napCatCore[_0x3726bb(0x1ac)]['getMsgService']()[_0x3726bb(0x1bd)]({'chatType':_0x45b3f5[_0x3726bb(0x1c7)],'peerUid':_0x45b3f5['peerUid']},_0x408949);}static async[_0x904de2(0x1d2)](_0x4ade0b,_0x41dc81,_0x24c2cc=!![],_0x15cf76=0x2710){const _0x3a8502=_0x904de2,_0x2d2c09={'gWjHj':_0x3a8502(0x19d),'VORuw':function(_0x27e9b6,_0x354df0){return _0x27e9b6(_0x354df0);},'hrtAf':function(_0x27f8db){return _0x27f8db();},'JnFFV':function(_0x39db4f,_0x1174ea){return _0x39db4f(_0x1174ea);},'izJtl':function(_0x2d2065,_0x157527,_0x30cf5e){return _0x2d2065(_0x157527,_0x30cf5e);}},_0x35ead9=_0x4ade0b[_0x3a8502(0x1ca)];let _0x102a7c=0x0;const _0x5ba3ec=async()=>{const _0x5df7a9=_0x3a8502;if(_0x102a7c>_0x15cf76)throw _0x2d2c09[_0x5df7a9(0x1dd)];const _0x5d8e24=sendMessagePool[_0x4ade0b[_0x5df7a9(0x1ca)]];if(_0x5d8e24)return await _0x2d2c09[_0x5df7a9(0x1b8)](sleep,0x1f4),_0x102a7c+=0x1f4,await _0x2d2c09[_0x5df7a9(0x1ba)](_0x5ba3ec);else return;};return await _0x5ba3ec(),new Promise((_0x4dea62,_0xbd3db3)=>{const _0x155839=_0x3a8502,_0x59cf30={'fJOzD':function(_0x37aeb6,_0xa67978){const _0x47a840=_0x266b;return _0x2d2c09[_0x47a840(0x1a3)](_0x37aeb6,_0xa67978);},'TDKEq':_0x2d2c09[_0x155839(0x1dd)]};let _0x33c750=![],_0x2dd766=null;const _0x2bb5b0=_0x2d2c09[_0x155839(0x1ba)](randomUUID);sendSuccessCBMap[_0x2bb5b0]=_0x458631=>{const _0xf4ead5=_0x155839;if(_0x458631[_0xf4ead5(0x19c)]===_0x2dd766?.[_0xf4ead5(0x19c)]){if(_0x458631[_0xf4ead5(0x1b9)]===0x2)return delete sendSuccessCBMap[_0x2bb5b0],_0x33c750=!![],_0x59cf30['fJOzD'](_0x4dea62,_0x458631),!![];return![];}return![];},sendMessagePool[_0x35ead9]=async _0x204724=>{delete sendMessagePool[_0x35ead9],_0x2dd766=_0x204724;},_0x2d2c09[_0x155839(0x1a5)](setTimeout,()=>{const _0xdfb8bc=_0x155839;if(_0x33c750)return;delete sendMessagePool[_0x35ead9],delete sendSuccessCBMap[_0x2bb5b0],_0xbd3db3(_0x59cf30[_0xdfb8bc(0x1ce)]);},_0x15cf76);const _0x2a9f3f=napCatCore[_0x155839(0x1ac)][_0x155839(0x1cc)]()['sendMsg']('0',_0x4ade0b,_0x41dc81,new Map());});}static async[_0x904de2(0x1b5)](_0x25cd06,_0x1bd172,_0x7c2d7a){const _0x347ac7=_0x904de2;return napCatCore[_0x347ac7(0x1ac)][_0x347ac7(0x1cc)]()[_0x347ac7(0x1b5)](_0x7c2d7a,_0x25cd06,[_0x1bd172],new Map());}static async[_0x904de2(0x1d1)](_0x13885e,_0x2ff246,_0x105072){const _0x1b12c8=_0x904de2,_0x57d884={'lOkxL':function(_0x38e747,_0x502200){return _0x38e747!=_0x502200;},'ZhzoO':_0x1b12c8(0x1c1),'aLPqS':function(_0x41e5cf,_0x234bae){return _0x41e5cf==_0x234bae;},'ULjXl':function(_0x140ecc,_0x573cc9){return _0x140ecc(_0x573cc9);},'KxJaR':function(_0x4ac994,_0x5d92be){return _0x4ac994(_0x5d92be);},'siFSF':_0x1b12c8(0x19f),'MuMmx':function(_0x3cb02e){return _0x3cb02e();}},_0x2c399d=_0x105072[_0x1b12c8(0x1a4)](_0x27f700=>{const _0x276bcc=_0x1b12c8;return{'msgId':_0x27f700,'senderShowName':selfInfo[_0x276bcc(0x1a2)]};});return new Promise((_0x59f8ca,_0x310d09)=>{const _0x3cf800=_0x1b12c8,_0x3b67b7={'dDCIZ':function(_0x2633f4,_0xd7bd54){return _0x57d884['KxJaR'](_0x2633f4,_0xd7bd54);},'YLrMQ':_0x57d884[_0x3cf800(0x1dc)]};let _0xc864e9=![];const _0x176af1=_0x12639f=>{const _0x282eb4=_0x3cf800,_0x3292f3=_0x12639f[_0x282eb4(0x1ae)][_0x282eb4(0x1a8)](_0x54d329=>_0x54d329[_0x282eb4(0x1d4)]);if(!_0x3292f3)return;const _0x45235d=JSON['parse'](_0x3292f3['arkElement'][_0x282eb4(0x1a0)]);if(_0x57d884[_0x282eb4(0x1a1)](_0x45235d['app'],_0x57d884[_0x282eb4(0x1db)]))return;_0x57d884[_0x282eb4(0x1cb)](_0x12639f[_0x282eb4(0x1ca)],_0x2ff246[_0x282eb4(0x1ca)])&&_0x12639f[_0x282eb4(0x1e3)]==selfInfo[_0x282eb4(0x1c0)]&&(_0xc864e9=!![],_0x57d884[_0x282eb4(0x1be)](_0x59f8ca,_0x12639f));};sentMsgTasks[_0x3cf800(0x1e1)](_0x57d884['MuMmx'](randomUUID),_0x176af1),setTimeout(()=>{const _0x537395=_0x3cf800;!_0xc864e9&&_0x3b67b7[_0x537395(0x1e0)](_0x310d09,_0x3b67b7[_0x537395(0x1b2)]);},0x1388),napCatCore[_0x3cf800(0x1ac)][_0x3cf800(0x1cc)]()['multiForwardMsgWithComment'](_0x2c399d,_0x13885e,_0x2ff246,[],new Map());});}}