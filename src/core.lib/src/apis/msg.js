const _0x48d236=_0x2e0f;function _0x2e0f(_0x241dc5,_0x1a326c){const _0x943275=_0x9432();return _0x2e0f=function(_0x2e0f92,_0x5a01c1){_0x2e0f92=_0x2e0f92-0x14d;let _0x11129d=_0x943275[_0x2e0f92];return _0x11129d;},_0x2e0f(_0x241dc5,_0x1a326c);}(function(_0x1d6e0a,_0x18adc8){const _0x2242dc=_0x2e0f,_0x261c5f=_0x1d6e0a();while(!![]){try{const _0x4bb907=-parseInt(_0x2242dc(0x161))/0x1*(parseInt(_0x2242dc(0x16c))/0x2)+parseInt(_0x2242dc(0x174))/0x3+parseInt(_0x2242dc(0x171))/0x4*(parseInt(_0x2242dc(0x15c))/0x5)+parseInt(_0x2242dc(0x16b))/0x6*(parseInt(_0x2242dc(0x17d))/0x7)+parseInt(_0x2242dc(0x152))/0x8+parseInt(_0x2242dc(0x181))/0x9+-parseInt(_0x2242dc(0x165))/0xa;if(_0x4bb907===_0x18adc8)break;else _0x261c5f['push'](_0x261c5f['shift']());}catch(_0x4cc4a0){_0x261c5f['push'](_0x261c5f['shift']());}}}(_0x9432,0xd9678));function _0x9432(){const _0x692cdd=['onAddSendMsg','multiForwardMsgWithComment','addListener','com.tencent.multimsg','GYcow','getMsgHistory','find','WBUfw','TEdnz','KrdrB','setMsgRead','getMultiMsg','sendMsg','4906096TOmyhP','foBHP','nick','juUuv','setEmojiLike','yPrMQ','getMsgsByMsgId','dEtAJ','VxbbD','parse','590UQokaw','arkElement','zGxzY','msgId','session','52859Fekhzi','onLoginSuccess','nQHoG','elements','28350460rTJamY','NNzni','uid','getMsgService','set','forwardMsg','9055710BtmoSQ','24lJzGfB','sendStatus','getMsgsBySeqAndCount','catch','peerUid','25796CecsJy','then','WJtXb','1612848wnKGWQ','lQpZZ','LnQsQ','recallMsg','KcCxh','setMsgEmojiLikes','tNqhy','chatType','onMsgInfoListUpdate','7AnDPMb','activateChatAndGetHistory','fetchRecentContact','forEach','8448273dzjEUr'];_0x9432=function(){return _0x692cdd;};return _0x9432();}import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x48d236(0x182)]=_0x1861a2=>{const _0x44fbe1=_0x48d236,_0x4df7b8={'lQpZZ':function(_0x4a656c,_0x2050ca){return _0x4a656c(_0x2050ca);},'WPdju':function(_0x4a0e73,_0x1a9c64){return _0x4a0e73 instanceof _0x1a9c64;}};for(const [_0x44d69f,_0x5e8456]of sentMsgTasks){_0x4df7b8[_0x44fbe1(0x175)](_0x5e8456,_0x1861a2),sentMsgTasks['delete'](_0x44d69f);}if(sendMessagePool[_0x1861a2[_0x44fbe1(0x170)]]){const _0x41cf3c=sendMessagePool[_0x1861a2[_0x44fbe1(0x170)]]?.(_0x1861a2);_0x4df7b8['WPdju'](_0x41cf3c,Promise)&&_0x41cf3c[_0x44fbe1(0x172)]()[_0x44fbe1(0x16f)](logError);}},msgListener[_0x48d236(0x17c)]=_0x12b44f=>{const _0x259da8=_0x48d236,_0x3fa3c5={'mVBHl':function(_0x4456d6,_0x2081f7){return _0x4456d6(_0x2081f7);},'KlmUi':function(_0x205f8a,_0x5ab890){return _0x205f8a instanceof _0x5ab890;},'ihJNl':function(_0x256393,_0x512fbd){return _0x256393(_0x512fbd);}};_0x12b44f[_0x259da8(0x180)](_0x2d7084=>{const _0x244683=_0x259da8;new Promise((_0x402a7d,_0x29d3b2)=>{const _0x351d2a=_0x2e0f;for(const _0x3a0b0f in sendSuccessCBMap){const _0x5b30a7=sendSuccessCBMap[_0x3a0b0f],_0x319007=_0x3fa3c5['mVBHl'](_0x5b30a7,_0x2d7084),_0x44f70b=_0x5b11f5=>{_0x5b11f5&&delete sendSuccessCBMap[_0x3a0b0f];};_0x3fa3c5['KlmUi'](_0x319007,Promise)?_0x319007[_0x351d2a(0x172)](_0x44f70b):_0x3fa3c5['ihJNl'](_0x44f70b,_0x319007);}})[_0x244683(0x172)]()[_0x244683(0x16f)](log);});},setTimeout(()=>{const _0x301b7c=_0x48d236;napCatCore[_0x301b7c(0x162)](()=>{const _0xeafadd=_0x301b7c;napCatCore[_0xeafadd(0x184)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x48d236(0x156)](_0xb76078,_0x5bb283,_0x3d2f49,_0x27e3a4=!![]){const _0x18142a=_0x48d236,_0x323124={'GYcow':function(_0x246af2,_0x236f96){return _0x246af2>_0x236f96;}};return _0x3d2f49=_0x3d2f49['toString'](),napCatCore[_0x18142a(0x160)][_0x18142a(0x168)]()[_0x18142a(0x179)](_0xb76078,_0x5bb283,_0x3d2f49,_0x323124[_0x18142a(0x186)](_0x3d2f49['length'],0x3)?'2':'1',_0x27e3a4);}static async[_0x48d236(0x150)](_0x9a6b2e,_0x3ead61,_0x298689){const _0x57cc34=_0x48d236;return napCatCore[_0x57cc34(0x160)][_0x57cc34(0x168)]()[_0x57cc34(0x150)](_0x9a6b2e,_0x3ead61,_0x298689);}static async[_0x48d236(0x158)](_0x30889a,_0x551a9f){const _0x44d0f3=_0x48d236;return await napCatCore[_0x44d0f3(0x160)][_0x44d0f3(0x168)]()[_0x44d0f3(0x158)](_0x30889a,_0x551a9f);}static async['getMsgsBySeqAndCount'](_0x3137a8,_0x57ea7b,_0x2a6548,_0x40ae54,_0xf20ba7){const _0x58d9bc=_0x48d236;return await napCatCore[_0x58d9bc(0x160)][_0x58d9bc(0x168)]()[_0x58d9bc(0x16e)](_0x3137a8,_0x57ea7b,_0x2a6548,_0x40ae54,_0xf20ba7);}static async['activateChat'](_0x4cb441){}static async[_0x48d236(0x17e)](_0x1e11e4){}static async[_0x48d236(0x14f)](_0x3fd534){const _0x15c1c5=_0x48d236;return napCatCore['session'][_0x15c1c5(0x168)]()[_0x15c1c5(0x14f)](_0x3fd534);}static async[_0x48d236(0x187)](_0x20d235,_0x571046,_0x1c182a){const _0x245238=_0x48d236;return napCatCore[_0x245238(0x160)][_0x245238(0x168)]()['getMsgsIncludeSelf'](_0x20d235,_0x571046,_0x1c182a,!![]);}static async[_0x48d236(0x17f)](){}static async[_0x48d236(0x177)](_0x2fc273,_0x30b2c4){const _0x1a05ca=_0x48d236;await napCatCore[_0x1a05ca(0x160)][_0x1a05ca(0x168)]()[_0x1a05ca(0x177)]({'chatType':_0x2fc273[_0x1a05ca(0x17b)],'peerUid':_0x2fc273['peerUid']},_0x30b2c4);}static async[_0x48d236(0x151)](_0x49ef6a,_0x410c4b,_0x145f85=!![],_0x1ee35d=0x2710){const _0x3a62e7=_0x48d236,_0x4b4f67={'KmInG':function(_0x310e7f,_0x45dda9){return _0x310e7f>_0x45dda9;},'LnQsQ':'发送超时','tNqhy':function(_0x169e79,_0x45ce77){return _0x169e79(_0x45ce77);},'WBUfw':function(_0x5217e4){return _0x5217e4();},'zGxzY':function(_0x40ddd1,_0x58b6ad){return _0x40ddd1(_0x58b6ad);},'VxbbD':function(_0x3ef856,_0x18ac58){return _0x3ef856===_0x18ac58;},'KrdrB':function(_0x51729a,_0x18c097){return _0x51729a(_0x18c097);},'nvjEm':function(_0x2440b8,_0x21a42c,_0x1c2c16){return _0x2440b8(_0x21a42c,_0x1c2c16);},'WJtXb':function(_0x2340fd){return _0x2340fd();}},_0x5e55d4=_0x49ef6a[_0x3a62e7(0x170)];let _0x45bb46=0x0;const _0x526649=async()=>{const _0x453c73=_0x3a62e7;if(_0x4b4f67['KmInG'](_0x45bb46,_0x1ee35d))throw _0x4b4f67[_0x453c73(0x176)];const _0x4eabcc=sendMessagePool[_0x49ef6a[_0x453c73(0x170)]];if(_0x4eabcc)return await _0x4b4f67[_0x453c73(0x17a)](sleep,0x1f4),_0x45bb46+=0x1f4,await _0x4b4f67[_0x453c73(0x189)](_0x526649);else return;};return await _0x4b4f67[_0x3a62e7(0x173)](_0x526649),new Promise((_0x577e66,_0x4c9710)=>{const _0x5da374=_0x3a62e7,_0x5a22a1={'juUuv':function(_0x45650b,_0x2b9e8d){const _0x4b61b5=_0x2e0f;return _0x4b4f67[_0x4b61b5(0x15a)](_0x45650b,_0x2b9e8d);},'KcCxh':function(_0x1553fe,_0x3e1ec6){return _0x4b4f67['VxbbD'](_0x1553fe,_0x3e1ec6);},'yPrMQ':function(_0x4cc44c,_0x31c44b){const _0x5c726e=_0x2e0f;return _0x4b4f67[_0x5c726e(0x14e)](_0x4cc44c,_0x31c44b);}};let _0x4eed14=![],_0x4f6e6e=null;const _0x271efd=randomUUID();sendSuccessCBMap[_0x271efd]=_0x316da2=>{const _0x27eac9=_0x2e0f;if(_0x5a22a1[_0x27eac9(0x155)](_0x316da2[_0x27eac9(0x15f)],_0x4f6e6e?.['msgId'])){if(_0x5a22a1[_0x27eac9(0x178)](_0x316da2[_0x27eac9(0x16d)],0x2))return delete sendSuccessCBMap[_0x271efd],_0x4eed14=!![],_0x5a22a1[_0x27eac9(0x157)](_0x577e66,_0x316da2),!![];return![];}return![];},sendMessagePool[_0x5e55d4]=async _0x43e38b=>{delete sendMessagePool[_0x5e55d4],_0x4f6e6e=_0x43e38b;},_0x4b4f67['nvjEm'](setTimeout,()=>{const _0x4549fe=_0x2e0f;if(_0x4eed14)return;delete sendMessagePool[_0x5e55d4],delete sendSuccessCBMap[_0x271efd],_0x4b4f67[_0x4549fe(0x15e)](_0x4c9710,_0x4b4f67['LnQsQ']);},_0x1ee35d);const _0x38a4a1=napCatCore[_0x5da374(0x160)][_0x5da374(0x168)]()['sendMsg']('0',_0x49ef6a,_0x410c4b,new Map());});}static async[_0x48d236(0x16a)](_0x2b4e77,_0x12a906,_0x57ab71){const _0x4389aa=_0x48d236;return napCatCore['session'][_0x4389aa(0x168)]()[_0x4389aa(0x16a)](_0x57ab71,_0x2b4e77,[_0x12a906],new Map());}static async['multiForwardMsg'](_0x5dc56b,_0x129abe,_0x22f44b){const _0x522367={'zQony':function(_0x2edc47,_0x5180b8){return _0x2edc47!=_0x5180b8;},'foBHP':function(_0x27aebd,_0x47791e){return _0x27aebd==_0x47791e;},'TEdnz':function(_0x39f70b,_0x4fd3d7){return _0x39f70b(_0x4fd3d7);},'NNzni':'转发消息超时','dEtAJ':function(_0x396267){return _0x396267();},'nQHoG':function(_0x5c598a,_0x459ea4,_0xff5520){return _0x5c598a(_0x459ea4,_0xff5520);}},_0xfe14a9=_0x22f44b['map'](_0x35711d=>{const _0x2dc157=_0x2e0f;return{'msgId':_0x35711d,'senderShowName':selfInfo[_0x2dc157(0x154)]};});return new Promise((_0x2bf64f,_0x34a3d5)=>{const _0x263585=_0x2e0f;let _0x161176=![];const _0x576e39=_0xbd0bfe=>{const _0x4cfb8f=_0x2e0f,_0x585bd0=_0xbd0bfe[_0x4cfb8f(0x164)][_0x4cfb8f(0x188)](_0x569067=>_0x569067[_0x4cfb8f(0x15d)]);if(!_0x585bd0)return;const _0xf573bf=JSON[_0x4cfb8f(0x15b)](_0x585bd0[_0x4cfb8f(0x15d)]['bytesData']);if(_0x522367['zQony'](_0xf573bf['app'],_0x4cfb8f(0x185)))return;_0x522367[_0x4cfb8f(0x153)](_0xbd0bfe[_0x4cfb8f(0x170)],_0x129abe[_0x4cfb8f(0x170)])&&_0xbd0bfe['senderUid']==selfInfo[_0x4cfb8f(0x167)]&&(_0x161176=!![],_0x522367[_0x4cfb8f(0x14d)](_0x2bf64f,_0xbd0bfe));};sentMsgTasks[_0x263585(0x169)](_0x522367[_0x263585(0x159)](randomUUID),_0x576e39),_0x522367[_0x263585(0x163)](setTimeout,()=>{const _0x22bdca=_0x263585;!_0x161176&&_0x522367[_0x22bdca(0x14d)](_0x34a3d5,_0x522367[_0x22bdca(0x166)]);},0x1388),napCatCore[_0x263585(0x160)][_0x263585(0x168)]()[_0x263585(0x183)](_0xfe14a9,_0x5dc56b,_0x129abe,[],new Map());});}}