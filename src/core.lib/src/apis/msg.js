const _0x37bea7=_0x5702;(function(_0x33ac15,_0x3a12f5){const _0x55f1d6=_0x5702,_0x5400da=_0x33ac15();while(!![]){try{const _0x3d52e8=-parseInt(_0x55f1d6(0x149))/0x1*(parseInt(_0x55f1d6(0x137))/0x2)+-parseInt(_0x55f1d6(0x128))/0x3+-parseInt(_0x55f1d6(0x124))/0x4*(parseInt(_0x55f1d6(0x13c))/0x5)+-parseInt(_0x55f1d6(0x154))/0x6+-parseInt(_0x55f1d6(0x14f))/0x7+parseInt(_0x55f1d6(0x14e))/0x8*(-parseInt(_0x55f1d6(0x12c))/0x9)+-parseInt(_0x55f1d6(0x138))/0xa*(-parseInt(_0x55f1d6(0x12b))/0xb);if(_0x3d52e8===_0x3a12f5)break;else _0x5400da['push'](_0x5400da['shift']());}catch(_0x5acfa6){_0x5400da['push'](_0x5400da['shift']());}}}(_0x142a,0x71fb0));function _0x142a(){const _0x3ca95a=['19774yBrFOy','721450elpsZC','getMsgsBySeqAndCount','app','RXgEi','130Jgpeqe','onMsgInfoListUpdate','com.tencent.multimsg','getMultiMsg','length','map','vkvss','peerUid','multiForwardMsgWithComment','fetchRecentContact','TJGYV','recallMsg','parse','41YhJivP','sONiv','getMsgService','then','senderUid','8HMFwwW','2068934ofhOBS','nick','delete','bytesData','qbZSJ','3880812oeVRch','cTtMz','OSPBz','set','session','mMAHL','onLoginSuccess','nraax','tfKCU','OtwKg','activateChat','getMsgsIncludeSelf','find','catch','msgId','addListener','uid','12316fIfHIz','AtuHy','发送超时','sendMsg','142149aZETFG','szxMe','guildId','385lxIIoB','5247387SjQfZq','elements','chatType','getMsgsByMsgId','sendStatus','vxJQt','jbvrS','setMsgRead','edNLT','onAddSendMsg','getMsgHistory'];_0x142a=function(){return _0x3ca95a;};return _0x142a();}import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x37bea7(0x135)]=_0x23dab8=>{const _0xfb4074=_0x37bea7,_0x54280f={'UVyGB':function(_0x52f6a9,_0xba9710){return _0x52f6a9(_0xba9710);},'OSPBz':function(_0x5dfcb1,_0x49f5b0){return _0x5dfcb1 instanceof _0x49f5b0;}};for(const [_0x1917b6,_0x55db9b]of sentMsgTasks){_0x54280f['UVyGB'](_0x55db9b,_0x23dab8),sentMsgTasks[_0xfb4074(0x151)](_0x1917b6);}if(sendMessagePool[_0x23dab8[_0xfb4074(0x143)]]){const _0x30f8eb=sendMessagePool[_0x23dab8[_0xfb4074(0x143)]]?.(_0x23dab8);_0x54280f[_0xfb4074(0x156)](_0x30f8eb,Promise)&&_0x30f8eb[_0xfb4074(0x14c)]()[_0xfb4074(0x120)](logError);}},msgListener[_0x37bea7(0x13d)]=_0x12291b=>{const _0x10d337={'jbvrS':function(_0x579d85,_0x268a25){return _0x579d85 instanceof _0x268a25;}};_0x12291b['forEach'](_0x2924ba=>{const _0x27a042={'edNLT':function(_0x53afcf,_0x25696b){return _0x53afcf(_0x25696b);},'kPggl':function(_0x363293,_0x2ac91a){const _0x19ef96=_0x5702;return _0x10d337[_0x19ef96(0x132)](_0x363293,_0x2ac91a);}};new Promise((_0x5790a9,_0x56ad9c)=>{const _0x770409=_0x5702;for(const _0xd9695c in sendSuccessCBMap){const _0x1f55cb=sendSuccessCBMap[_0xd9695c],_0x20d5a2=_0x27a042['edNLT'](_0x1f55cb,_0x2924ba),_0x3c4095=_0x333760=>{_0x333760&&delete sendSuccessCBMap[_0xd9695c];};_0x27a042['kPggl'](_0x20d5a2,Promise)?_0x20d5a2['then'](_0x3c4095):_0x27a042[_0x770409(0x134)](_0x3c4095,_0x20d5a2);}})['then']()['catch'](log);});},setTimeout(()=>{const _0x444328=_0x37bea7;napCatCore[_0x444328(0x119)](()=>{const _0x7d2b00=_0x444328;napCatCore[_0x7d2b00(0x122)](msgListener);});},0x64);function _0x5702(_0xb88da5,_0x2bf19f){const _0x142af8=_0x142a();return _0x5702=function(_0x57021a,_0x24e07f){_0x57021a=_0x57021a-0x118;let _0x25ebfd=_0x142af8[_0x57021a];return _0x25ebfd;},_0x5702(_0xb88da5,_0x2bf19f);}export class NTQQMsgApi{static async['setEmojiLike'](_0x4f2dac,_0x4de3c9,_0x16fe2e,_0x1e5ab7=!![]){const _0x12c641=_0x37bea7,_0x5dce2d={'qbZSJ':function(_0x23c3ce,_0x29c3bb){return _0x23c3ce>_0x29c3bb;}};return napCatCore[_0x12c641(0x158)]['getMsgService']()['setMsgEmojiLikes'](_0x4f2dac,_0x4de3c9,_0x16fe2e,_0x5dce2d[_0x12c641(0x153)](_0x16fe2e[_0x12c641(0x140)],0x3)?'2':'1',_0x1e5ab7);}static async[_0x37bea7(0x13f)](_0x449579,_0x39c7f3,_0x57fcdd){const _0x34fb71=_0x37bea7;return napCatCore[_0x34fb71(0x158)][_0x34fb71(0x14b)]()[_0x34fb71(0x13f)](_0x449579,_0x39c7f3,_0x57fcdd);}static async['getMsgsByMsgId'](_0x59ed68,_0x483430){const _0xf428b3=_0x37bea7;return await napCatCore[_0xf428b3(0x158)][_0xf428b3(0x14b)]()[_0xf428b3(0x12f)](_0x59ed68,_0x483430);}static async[_0x37bea7(0x139)](_0x22c97b,_0x34d225,_0x11569,_0x360a11,_0xacdc4d){const _0x4a6fd9=_0x37bea7;return await napCatCore['session']['getMsgService']()[_0x4a6fd9(0x139)](_0x22c97b,_0x34d225,_0x11569,_0x360a11,_0xacdc4d);}static async[_0x37bea7(0x11d)](_0x538964){}static async['activateChatAndGetHistory'](_0x1f961e){}static async[_0x37bea7(0x133)](_0x1d33e9){const _0x34ebcd=_0x37bea7;return napCatCore[_0x34ebcd(0x158)]['getMsgService']()[_0x34ebcd(0x133)](_0x1d33e9[_0x34ebcd(0x12e)],_0x1d33e9[_0x34ebcd(0x143)],_0x1d33e9[_0x34ebcd(0x12a)]);}static async[_0x37bea7(0x136)](_0x4804eb,_0x47765b,_0x3076a3){const _0x15a02e=_0x37bea7;return napCatCore['session'][_0x15a02e(0x14b)]()[_0x15a02e(0x11e)](_0x4804eb,_0x47765b,_0x3076a3,!![]);}static async[_0x37bea7(0x145)](){}static async[_0x37bea7(0x147)](_0x49207b,_0x491585){const _0x5cf218=_0x37bea7;await napCatCore[_0x5cf218(0x158)][_0x5cf218(0x14b)]()['recallMsg']({'chatType':_0x49207b[_0x5cf218(0x12e)],'peerUid':_0x49207b[_0x5cf218(0x143)]},_0x491585);}static async[_0x37bea7(0x127)](_0x10fc4c,_0x376d8f,_0x3f1e5c=!![],_0xf11b28=0x2710){const _0x1659cb=_0x37bea7,_0x1f5146={'vxJQt':function(_0x192091,_0xb224e){return _0x192091>_0xb224e;},'sONiv':_0x1659cb(0x126),'vkvss':function(_0x593ce8,_0x4da300){return _0x593ce8(_0x4da300);},'mMAHL':function(_0x834a5d,_0x354bba){return _0x834a5d===_0x354bba;},'szxMe':function(_0x2b9d66,_0x2c339a){return _0x2b9d66(_0x2c339a);},'tfKCU':function(_0xbeaf8b){return _0xbeaf8b();},'LiCUT':function(_0x5e9834,_0x5978a0,_0x1296fd){return _0x5e9834(_0x5978a0,_0x1296fd);},'RXgEi':function(_0x18c21e){return _0x18c21e();}},_0x193155=_0x10fc4c['peerUid'];let _0x484181=0x0;const _0x8e593d=async()=>{const _0x1aa56f=_0x1659cb;if(_0x1f5146[_0x1aa56f(0x131)](_0x484181,_0xf11b28))throw _0x1f5146[_0x1aa56f(0x14a)];const _0x40924d=sendMessagePool[_0x10fc4c['peerUid']];if(_0x40924d)return await _0x1f5146['vkvss'](sleep,0x1f4),_0x484181+=0x1f4,await _0x8e593d();else return;};return await _0x1f5146[_0x1659cb(0x13b)](_0x8e593d),new Promise((_0x2c3c9f,_0x28e0ec)=>{const _0x509aea=_0x1659cb;let _0x4da80b=![],_0x2f0b76=null;const _0x544cb4=_0x1f5146[_0x509aea(0x11b)](randomUUID);sendSuccessCBMap[_0x544cb4]=_0x5d5b0c=>{const _0x5e2149=_0x509aea;if(_0x1f5146[_0x5e2149(0x118)](_0x5d5b0c[_0x5e2149(0x121)],_0x2f0b76?.[_0x5e2149(0x121)])){if(_0x1f5146[_0x5e2149(0x118)](_0x5d5b0c[_0x5e2149(0x130)],0x2))return delete sendSuccessCBMap[_0x544cb4],_0x4da80b=!![],_0x1f5146[_0x5e2149(0x129)](_0x2c3c9f,_0x5d5b0c),!![];return![];}return![];},sendMessagePool[_0x193155]=async _0x2c0401=>{delete sendMessagePool[_0x193155],_0x2f0b76=_0x2c0401;},_0x1f5146['LiCUT'](setTimeout,()=>{const _0x4a48f7=_0x509aea;if(_0x4da80b)return;delete sendMessagePool[_0x193155],delete sendSuccessCBMap[_0x544cb4],_0x1f5146[_0x4a48f7(0x142)](_0x28e0ec,_0x1f5146[_0x4a48f7(0x14a)]);},_0xf11b28);const _0x43c02e=napCatCore['session'][_0x509aea(0x14b)]()[_0x509aea(0x127)]('0',_0x10fc4c,_0x376d8f,new Map());});}static async['forwardMsg'](_0x4bee1e,_0x2d5302,_0x3990d3){}static async['multiForwardMsg'](_0x461171,_0x10615a,_0x33f1ad){const _0x5968df=_0x37bea7,_0x283231={'AtuHy':function(_0x4ac101,_0x2df05f){return _0x4ac101!=_0x2df05f;},'cTtMz':_0x5968df(0x13e),'nraax':'转发消息超时','OtwKg':function(_0x2dcc16){return _0x2dcc16();}},_0xc697ac=_0x33f1ad[_0x5968df(0x141)](_0x1d8a3c=>{const _0x268e1b=_0x5968df;return{'msgId':_0x1d8a3c,'senderShowName':selfInfo[_0x268e1b(0x150)]};});return new Promise((_0x26f09c,_0x7590ab)=>{const _0x2d3f68=_0x5968df,_0x5053a6={'TJGYV':_0x283231[_0x2d3f68(0x11a)]};let _0x1576d6=![];const _0x59eff1=_0x41c704=>{const _0x39263c=_0x2d3f68,_0x319bbc=_0x41c704[_0x39263c(0x12d)][_0x39263c(0x11f)](_0x50c150=>_0x50c150['arkElement']);if(!_0x319bbc)return;const _0x2d98ce=JSON[_0x39263c(0x148)](_0x319bbc['arkElement'][_0x39263c(0x152)]);if(_0x283231[_0x39263c(0x125)](_0x2d98ce[_0x39263c(0x13a)],_0x283231[_0x39263c(0x155)]))return;_0x41c704[_0x39263c(0x143)]==_0x10615a[_0x39263c(0x143)]&&_0x41c704[_0x39263c(0x14d)]==selfInfo[_0x39263c(0x123)]&&(_0x1576d6=!![],_0x26f09c(_0x41c704));};sentMsgTasks[_0x2d3f68(0x157)](_0x283231[_0x2d3f68(0x11c)](randomUUID),_0x59eff1),setTimeout(()=>{const _0x52b299=_0x2d3f68;!_0x1576d6&&_0x7590ab(_0x5053a6[_0x52b299(0x146)]);},0x1388),napCatCore[_0x2d3f68(0x158)]['getMsgService']()[_0x2d3f68(0x144)](_0xc697ac,_0x461171,_0x10615a,[],new Map());});}}