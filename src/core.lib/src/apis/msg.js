function _0x1e86(_0x410a96,_0x3564eb){const _0x47b397=_0x47b3();return _0x1e86=function(_0x1e8664,_0xe5abb9){_0x1e8664=_0x1e8664-0x138;let _0x119600=_0x47b397[_0x1e8664];return _0x119600;},_0x1e86(_0x410a96,_0x3564eb);}const _0x22b153=_0x1e86;(function(_0x16a936,_0x13f225){const _0x4c4910=_0x1e86,_0x39d0c5=_0x16a936();while(!![]){try{const _0x208787=parseInt(_0x4c4910(0x157))/0x1+-parseInt(_0x4c4910(0x173))/0x2+parseInt(_0x4c4910(0x162))/0x3+-parseInt(_0x4c4910(0x13f))/0x4+parseInt(_0x4c4910(0x15a))/0x5*(-parseInt(_0x4c4910(0x171))/0x6)+parseInt(_0x4c4910(0x152))/0x7+parseInt(_0x4c4910(0x174))/0x8*(parseInt(_0x4c4910(0x156))/0x9);if(_0x208787===_0x13f225)break;else _0x39d0c5['push'](_0x39d0c5['shift']());}catch(_0x1cef9a){_0x39d0c5['push'](_0x39d0c5['shift']());}}}(_0x47b3,0xba471));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x47b3(){const _0x3bb437=['rNoXE','multiForwardMsgWithComment','6633bObSgF','1237241UOSmHQ','set','IFtZi','5fJbQdk','senderUid','hoJAe','RluZB','session','bytesData','peerUid','LVJAt','4326837EGKUav','XFcfP','setMsgRead','iFfaT','swjwl','getMsgsByMsgId','Vegzb','转发消息超时','nick','parse','获取群文件列表超时','jkOXv','addListener','getRichMediaService','forEach','1265886UNqIhj','arkElement','2970780REzYcB','7904pRdhDr','msgId','gNIzb','getMsgService','com.tencent.multimsg','onGroupFileInfoUpdate','sendMsg','sendStatus','kROni','LwCpH','activateChatAndGetHistory','getGroupFileList','elements','map','app','qwAFR','forwardMsg','find','then','delete','4403296zcLxgJ','cIExX','setEmojiLike','FhMWP','OqwLW','multiForwardMsg','getMsgsIncludeSelf','fetchRecentContact','getMsgHistory','toString','KsYVg','onLoginSuccess','getMultiMsg','onMsgInfoListUpdate','recallMsg','bEZNa','catch','uid','getMsgsBySeqAndCount','1067584fFiCGk','activateChat'];_0x47b3=function(){return _0x3bb437;};return _0x47b3();}import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x22b153(0x179)]=_0x485c0a=>{const _0x2b17d7=_0x22b153,_0x2c1afd={'hoJAe':function(_0x58e43f,_0xa4ab8){return _0x58e43f(_0xa4ab8);}};for(const [_0x2e5ff8,_0xe79880]of GroupFileInfoUpdateTasks){_0x2c1afd[_0x2b17d7(0x15c)](_0xe79880,_0x485c0a),GroupFileInfoUpdateTasks[_0x2b17d7(0x13e)](_0x2e5ff8);}},msgListener['onAddSendMsg']=_0x29644d=>{const _0x581798=_0x22b153,_0x49d175={'rNoXE':function(_0x300eac,_0x31887b){return _0x300eac(_0x31887b);},'FhMWP':function(_0x448815,_0x2c00ac){return _0x448815 instanceof _0x2c00ac;}};for(const [_0x44a31f,_0x14ccca]of sentMsgTasks){_0x49d175[_0x581798(0x154)](_0x14ccca,_0x29644d),sentMsgTasks[_0x581798(0x13e)](_0x44a31f);}if(sendMessagePool[_0x29644d[_0x581798(0x160)]]){const _0x2b77e8=sendMessagePool[_0x29644d[_0x581798(0x160)]]?.(_0x29644d);_0x49d175[_0x581798(0x142)](_0x2b77e8,Promise)&&_0x2b77e8['then']()[_0x581798(0x14f)](logError);}},msgListener[_0x22b153(0x14c)]=_0x5401f4=>{const _0x130952=_0x22b153,_0x17201f={'qwAFR':function(_0x4d0e60,_0x568e68){return _0x4d0e60(_0x568e68);}};_0x5401f4[_0x130952(0x170)](_0x321f78=>{const _0x123ae4=_0x130952,_0x4330a9={'OqwLW':function(_0x40a04a,_0xf831dd){const _0x23efce=_0x1e86;return _0x17201f[_0x23efce(0x13a)](_0x40a04a,_0xf831dd);},'LVJAt':function(_0x21f32f,_0x40127c){return _0x21f32f(_0x40127c);}};new Promise((_0x1e8ecc,_0x521a97)=>{const _0x2aa431=_0x1e86;for(const _0x916571 in sendSuccessCBMap){const _0x56ce38=sendSuccessCBMap[_0x916571],_0x118993=_0x4330a9[_0x2aa431(0x143)](_0x56ce38,_0x321f78),_0x3e1a95=_0x174828=>{_0x174828&&delete sendSuccessCBMap[_0x916571];};_0x118993 instanceof Promise?_0x118993[_0x2aa431(0x13d)](_0x3e1a95):_0x4330a9[_0x2aa431(0x161)](_0x3e1a95,_0x118993);}})[_0x123ae4(0x13d)]()[_0x123ae4(0x14f)](log);});},setTimeout(()=>{const _0x2164dc=_0x22b153;napCatCore[_0x2164dc(0x14a)](()=>{const _0x11c336=_0x2164dc;napCatCore[_0x11c336(0x16e)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x22b153(0x141)](_0x4b1960,_0x35f8c6,_0x1b35d6,_0x2a452d=!![]){const _0x3f5028=_0x22b153;return _0x1b35d6=_0x1b35d6[_0x3f5028(0x148)](),napCatCore[_0x3f5028(0x15e)][_0x3f5028(0x177)]()['setMsgEmojiLikes'](_0x4b1960,_0x35f8c6,_0x1b35d6,_0x1b35d6['length']>0x3?'2':'1',_0x2a452d);}static async[_0x22b153(0x14b)](_0x51f2a8,_0x59d430,_0x32e22a){const _0xf38d23=_0x22b153;return napCatCore[_0xf38d23(0x15e)][_0xf38d23(0x177)]()['getMultiMsg'](_0x51f2a8,_0x59d430,_0x32e22a);}static async['getMsgsByMsgId'](_0x265b3a,_0xe444de){const _0x63d75f=_0x22b153;return await napCatCore[_0x63d75f(0x15e)][_0x63d75f(0x177)]()[_0x63d75f(0x167)](_0x265b3a,_0xe444de);}static async[_0x22b153(0x151)](_0x553b51,_0x46f98b,_0x292f70,_0x2c97b1,_0x25693c){const _0x1cd1d7=_0x22b153;return await napCatCore[_0x1cd1d7(0x15e)][_0x1cd1d7(0x177)]()[_0x1cd1d7(0x151)](_0x553b51,_0x46f98b,_0x292f70,_0x2c97b1,_0x25693c);}static async[_0x22b153(0x153)](_0x8b3435){}static async[_0x22b153(0x17e)](_0x18856f){}static async[_0x22b153(0x164)](_0x221c1a){const _0xf6cfc4=_0x22b153;return napCatCore[_0xf6cfc4(0x15e)][_0xf6cfc4(0x177)]()[_0xf6cfc4(0x164)](_0x221c1a);}static async[_0x22b153(0x17f)](_0x16506d,_0x1e346e){const _0x5c0f15=_0x22b153,_0x1cb633={'Vegzb':function(_0x4fcb60,_0x3d1925){return _0x4fcb60(_0x3d1925);},'iFfaT':_0x5c0f15(0x16c),'aYIdh':function(_0x3ba354,_0x1cee80,_0x55cf2b){return _0x3ba354(_0x1cee80,_0x55cf2b);}};return new Promise(async(_0x45b071,_0x26b396)=>{const _0x5ccaf3=_0x5c0f15,_0x1e7a3d={'kROni':function(_0x32d436,_0x3a0a6f){const _0x1db462=_0x1e86;return _0x1cb633[_0x1db462(0x168)](_0x32d436,_0x3a0a6f);}};let _0x11928a=![];_0x1cb633['aYIdh'](setTimeout,()=>{const _0x14fb91=_0x1e86;!_0x11928a&&_0x1cb633[_0x14fb91(0x168)](_0x26b396,_0x1cb633[_0x14fb91(0x165)]);},0x1388);const _0x1ace28=_0x25ef4b=>{const _0x5818bb=_0x1e86;_0x11928a=!![],_0x1e7a3d[_0x5818bb(0x17c)](_0x45b071,_0x25ef4b['item']);};GroupFileInfoUpdateTasks[_0x5ccaf3(0x158)](randomUUID(),_0x1ace28),await napCatCore[_0x5ccaf3(0x15e)][_0x5ccaf3(0x16f)]()[_0x5ccaf3(0x17f)](_0x16506d,_0x1e346e);});}static async[_0x22b153(0x147)](_0xaf3482,_0x37acfa,_0x1b7c7d){const _0x254c01=_0x22b153;return napCatCore[_0x254c01(0x15e)][_0x254c01(0x177)]()[_0x254c01(0x145)](_0xaf3482,_0x37acfa,_0x1b7c7d,!![]);}static async[_0x22b153(0x146)](){}static async[_0x22b153(0x14d)](_0x1d7590,_0x2e2802){const _0x4179ac=_0x22b153;await napCatCore[_0x4179ac(0x15e)][_0x4179ac(0x177)]()[_0x4179ac(0x14d)]({'chatType':_0x1d7590['chatType'],'peerUid':_0x1d7590[_0x4179ac(0x160)]},_0x2e2802);}static async[_0x22b153(0x17a)](_0x2925a1,_0x315125,_0x93b60=!![],_0x493de5=0x2710){const _0x113fa2=_0x22b153,_0x218229={'cIExX':function(_0x14a2e9,_0x160efb){return _0x14a2e9>_0x160efb;},'gNIzb':'发送超时','uPLTT':function(_0x3bac15,_0x30ca31){return _0x3bac15(_0x30ca31);},'LwCpH':function(_0x45e7d3,_0x27e523){return _0x45e7d3(_0x27e523);},'TVClj':function(_0x2e40c8){return _0x2e40c8();},'GysaC':function(_0x3d0d92,_0x1f79b1,_0x3118b4){return _0x3d0d92(_0x1f79b1,_0x3118b4);}},_0x200897=_0x2925a1[_0x113fa2(0x160)];let _0x384cbd=0x0;const _0x497671=async()=>{const _0x121e2d=_0x113fa2;if(_0x218229[_0x121e2d(0x140)](_0x384cbd,_0x493de5))throw _0x218229[_0x121e2d(0x176)];const _0x200d59=sendMessagePool[_0x2925a1['peerUid']];if(_0x200d59)return await _0x218229['uPLTT'](sleep,0x1f4),_0x384cbd+=0x1f4,await _0x497671();else return;};return await _0x497671(),new Promise((_0x19e3cf,_0x1fe055)=>{const _0x282037=_0x113fa2,_0x5432e3={'IFtZi':function(_0x51efea,_0x2af213){const _0x19b77f=_0x1e86;return _0x218229[_0x19b77f(0x17d)](_0x51efea,_0x2af213);},'LMvze':_0x218229[_0x282037(0x176)]};let _0x1affd7=![],_0x284323=null;const _0x4db963=_0x218229['TVClj'](randomUUID);sendSuccessCBMap[_0x4db963]=_0x229523=>{const _0x4f799d=_0x282037;if(_0x229523['msgId']===_0x284323?.[_0x4f799d(0x175)]){if(_0x229523[_0x4f799d(0x17b)]===0x2)return delete sendSuccessCBMap[_0x4db963],_0x1affd7=!![],_0x5432e3[_0x4f799d(0x159)](_0x19e3cf,_0x229523),!![];return![];}return![];},sendMessagePool[_0x200897]=async _0x4b4b73=>{delete sendMessagePool[_0x200897],_0x284323=_0x4b4b73;},_0x218229['GysaC'](setTimeout,()=>{const _0x3a040b=_0x282037;if(_0x1affd7)return;delete sendMessagePool[_0x200897],delete sendSuccessCBMap[_0x4db963],_0x5432e3[_0x3a040b(0x159)](_0x1fe055,_0x5432e3['LMvze']);},_0x493de5);const _0x47f934=napCatCore[_0x282037(0x15e)][_0x282037(0x177)]()[_0x282037(0x17a)]('0',_0x2925a1,_0x315125,new Map());});}static async[_0x22b153(0x13b)](_0x1d08c4,_0x469a73,_0x11ac6b){const _0x915c51=_0x22b153;return napCatCore['session'][_0x915c51(0x177)]()[_0x915c51(0x13b)](_0x11ac6b,_0x1d08c4,[_0x469a73],new Map());}static async[_0x22b153(0x144)](_0x37ee3c,_0x4c08b2,_0x15aab1){const _0x4975aa=_0x22b153,_0x1d816c={'KsYVg':function(_0x2d4629,_0x1ecfb5){return _0x2d4629(_0x1ecfb5);},'RluZB':_0x4975aa(0x169),'XFcfP':function(_0x2b47c5,_0x47ca8b){return _0x2b47c5==_0x47ca8b;},'jkOXv':function(_0xf081d7,_0x176adb,_0x50c175){return _0xf081d7(_0x176adb,_0x50c175);}},_0x22db6a=_0x15aab1[_0x4975aa(0x138)](_0x55a2cd=>{const _0x59742f=_0x4975aa;return{'msgId':_0x55a2cd,'senderShowName':selfInfo[_0x59742f(0x16a)]};});return new Promise((_0x3c4c6c,_0x579591)=>{const _0x3d2851=_0x4975aa,_0x466f1a={'nbvkO':_0x3d2851(0x178),'swjwl':function(_0x222df4,_0x5a9ff6){const _0x4d7050=_0x3d2851;return _0x1d816c[_0x4d7050(0x163)](_0x222df4,_0x5a9ff6);},'bEZNa':function(_0x7e8e17,_0x448a4a){return _0x1d816c['KsYVg'](_0x7e8e17,_0x448a4a);}};let _0x5aa8ec=![];const _0x2a7a52=_0x1c4161=>{const _0x2c37f9=_0x3d2851,_0x46a6c4=_0x1c4161[_0x2c37f9(0x180)][_0x2c37f9(0x13c)](_0x1be448=>_0x1be448['arkElement']);if(!_0x46a6c4)return;const _0x468f80=JSON[_0x2c37f9(0x16b)](_0x46a6c4[_0x2c37f9(0x172)][_0x2c37f9(0x15f)]);if(_0x468f80[_0x2c37f9(0x139)]!=_0x466f1a['nbvkO'])return;_0x466f1a[_0x2c37f9(0x166)](_0x1c4161['peerUid'],_0x4c08b2[_0x2c37f9(0x160)])&&_0x1c4161[_0x2c37f9(0x15b)]==selfInfo[_0x2c37f9(0x150)]&&(_0x5aa8ec=!![],_0x466f1a[_0x2c37f9(0x14e)](_0x3c4c6c,_0x1c4161));};sentMsgTasks[_0x3d2851(0x158)](randomUUID(),_0x2a7a52),_0x1d816c[_0x3d2851(0x16d)](setTimeout,()=>{const _0x4ffa09=_0x3d2851;!_0x5aa8ec&&_0x1d816c[_0x4ffa09(0x149)](_0x579591,_0x1d816c[_0x4ffa09(0x15d)]);},0x1388),napCatCore[_0x3d2851(0x15e)]['getMsgService']()[_0x3d2851(0x155)](_0x22db6a,_0x37ee3c,_0x4c08b2,[],new Map());});}}