const _0x30cb41=_0x59ff;(function(_0x3022f9,_0x6e30d5){const _0x4872af=_0x59ff,_0x8bfb80=_0x3022f9();while(!![]){try{const _0x230b1e=-parseInt(_0x4872af(0x1f4))/0x1*(parseInt(_0x4872af(0x1f0))/0x2)+parseInt(_0x4872af(0x1e2))/0x3*(-parseInt(_0x4872af(0x1d8))/0x4)+parseInt(_0x4872af(0x1c5))/0x5*(parseInt(_0x4872af(0x1e9))/0x6)+parseInt(_0x4872af(0x1c8))/0x7+-parseInt(_0x4872af(0x1dc))/0x8+parseInt(_0x4872af(0x1be))/0x9+parseInt(_0x4872af(0x1cd))/0xa;if(_0x230b1e===_0x6e30d5)break;else _0x8bfb80['push'](_0x8bfb80['shift']());}catch(_0x9292c0){_0x8bfb80['push'](_0x8bfb80['shift']());}}}(_0x49e5,0xcce29));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';function _0x49e5(){const _0x112701=['nick','setMsgRead','lLXJJ','pICDg','1725600bOabtL','bytesData','onAddSendMsg','LdMLI','WShNY','length','arkElement','session','WWTwo','WLNcB','set','960VwkZKD','lrcgB','sendMsg','dnXpv','3098024lBhnaf','recallMsg','toString','catch','tscsN','sendStatus','12447wwoysa','AnSHz','setMsgEmojiLikes','RLfsk','peerUid','find','TOPUb','2263416nPlugK','getMsgsByMsgId','转发消息超时','forEach','multiForwardMsgWithComment','activateChatAndGetHistory','TkKkp','2BMZFBt','HXQML','getMsgHistory','com.tencent.multimsg','1483967inVqKF','发送超时','kCqxA','parse','gyxGc','RUIWS','getMsgService','senderUid','wUGzy','then','xAlSN','msgId','vXURw','15007995fUOXIM','app','delete','getMsgsIncludeSelf','addListener','setEmojiLike','elements','5ZbQWxV','forwardMsg','getMultiMsg','10421866BVnUKB'];_0x49e5=function(){return _0x112701;};return _0x49e5();}import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x59ff(_0x25e658,_0x2dcbc0){const _0x49e5a5=_0x49e5();return _0x59ff=function(_0x59ffc4,_0x10b02a){_0x59ffc4=_0x59ffc4-0x1be;let _0x3f6170=_0x49e5a5[_0x59ffc4];return _0x3f6170;},_0x59ff(_0x25e658,_0x2dcbc0);}const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x30cb41(0x1cf)]=_0x4e8021=>{const _0x88b457=_0x30cb41,_0x5adbb4={'wUGzy':function(_0x5df2fb,_0x45c29f){return _0x5df2fb(_0x45c29f);},'gyxGc':function(_0x2645d1,_0x1328c6){return _0x2645d1 instanceof _0x1328c6;}};for(const [_0x389684,_0x321bf2]of sentMsgTasks){_0x5adbb4[_0x88b457(0x1fc)](_0x321bf2,_0x4e8021),sentMsgTasks[_0x88b457(0x1c0)](_0x389684);}if(sendMessagePool[_0x4e8021[_0x88b457(0x1e6)]]){const _0x226c64=sendMessagePool[_0x4e8021[_0x88b457(0x1e6)]]?.(_0x4e8021);_0x5adbb4[_0x88b457(0x1f8)](_0x226c64,Promise)&&_0x226c64[_0x88b457(0x1fd)]()[_0x88b457(0x1df)](logError);}},msgListener['onMsgInfoListUpdate']=_0x45e400=>{const _0x928700=_0x30cb41,_0x8bd207={'lrcgB':function(_0x4d2624,_0xc7b2e9){return _0x4d2624(_0xc7b2e9);},'RLfsk':function(_0x237c25,_0x19b561){return _0x237c25 instanceof _0x19b561;}};_0x45e400[_0x928700(0x1ec)](_0x39a2d5=>{const _0x1ceccf=_0x928700;new Promise((_0x3e5d2f,_0x3605f4)=>{const _0x7c327f=_0x59ff;for(const _0x500282 in sendSuccessCBMap){const _0x5de747=sendSuccessCBMap[_0x500282],_0x10c9ee=_0x8bd207[_0x7c327f(0x1d9)](_0x5de747,_0x39a2d5),_0xe013ba=_0x46dbf8=>{_0x46dbf8&&delete sendSuccessCBMap[_0x500282];};_0x8bd207[_0x7c327f(0x1e5)](_0x10c9ee,Promise)?_0x10c9ee['then'](_0xe013ba):_0x8bd207[_0x7c327f(0x1d9)](_0xe013ba,_0x10c9ee);}})[_0x1ceccf(0x1fd)]()[_0x1ceccf(0x1df)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x368ad5=_0x59ff;napCatCore[_0x368ad5(0x1c2)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x30cb41(0x1c3)](_0x3016ed,_0x367773,_0x1bb3f1,_0x568cca=!![]){const _0x1e0f89=_0x30cb41,_0x1be4bd={'TOPUb':function(_0x54f6fb,_0x241022){return _0x54f6fb>_0x241022;}};return _0x1bb3f1=_0x1bb3f1[_0x1e0f89(0x1de)](),napCatCore[_0x1e0f89(0x1d4)]['getMsgService']()[_0x1e0f89(0x1e4)](_0x3016ed,_0x367773,_0x1bb3f1,_0x1be4bd[_0x1e0f89(0x1e8)](_0x1bb3f1[_0x1e0f89(0x1d2)],0x3)?'2':'1',_0x568cca);}static async[_0x30cb41(0x1c7)](_0x3c875a,_0x193641,_0x2de747){const _0x3e688e=_0x30cb41;return napCatCore[_0x3e688e(0x1d4)][_0x3e688e(0x1fa)]()['getMultiMsg'](_0x3c875a,_0x193641,_0x2de747);}static async[_0x30cb41(0x1ea)](_0x2ab4a3,_0x3c721d){const _0x206e15=_0x30cb41;return await napCatCore[_0x206e15(0x1d4)][_0x206e15(0x1fa)]()[_0x206e15(0x1ea)](_0x2ab4a3,_0x3c721d);}static async['getMsgsBySeqAndCount'](_0x5695a0,_0x19fba2,_0x156418,_0x253fe7,_0x27f940){const _0x2d0511=_0x30cb41;return await napCatCore[_0x2d0511(0x1d4)][_0x2d0511(0x1fa)]()['getMsgsBySeqAndCount'](_0x5695a0,_0x19fba2,_0x156418,_0x253fe7,_0x27f940);}static async['activateChat'](_0x490621){}static async[_0x30cb41(0x1ee)](_0x361168){}static async['setMsgRead'](_0x2ba140){const _0x39bd30=_0x30cb41;return napCatCore[_0x39bd30(0x1d4)][_0x39bd30(0x1fa)]()[_0x39bd30(0x1ca)](_0x2ba140);}static async[_0x30cb41(0x1f2)](_0x448644,_0x1a8d16,_0x116395){const _0x2543e5=_0x30cb41;return napCatCore[_0x2543e5(0x1d4)][_0x2543e5(0x1fa)]()[_0x2543e5(0x1c1)](_0x448644,_0x1a8d16,_0x116395,!![]);}static async['fetchRecentContact'](){}static async[_0x30cb41(0x1dd)](_0x3fd539,_0x39534e){const _0x5e5be4=_0x30cb41;await napCatCore[_0x5e5be4(0x1d4)][_0x5e5be4(0x1fa)]()['recallMsg']({'chatType':_0x3fd539['chatType'],'peerUid':_0x3fd539[_0x5e5be4(0x1e6)]},_0x39534e);}static async[_0x30cb41(0x1da)](_0x11686f,_0x147bb1,_0x153f3e=!![],_0x373398=0x2710){const _0x3de477=_0x30cb41,_0x46e509={'AnSHz':function(_0x5a3d26,_0x306970){return _0x5a3d26>_0x306970;},'lLXJJ':_0x3de477(0x1f5),'tscsN':function(_0x4a47b7,_0xc77708){return _0x4a47b7(_0xc77708);},'vXURw':function(_0x417b84){return _0x417b84();},'qiMLU':function(_0x36cc7f,_0x433f25){return _0x36cc7f===_0x433f25;},'LdMLI':function(_0x3dda34,_0x123311){return _0x3dda34(_0x123311);},'kCqxA':function(_0x18b551,_0x40b0e4,_0xdfb80a){return _0x18b551(_0x40b0e4,_0xdfb80a);},'WShNY':function(_0x16b471){return _0x16b471();}},_0x1d8e36=_0x11686f['peerUid'];let _0x4c8d28=0x0;const _0x1593e6=async()=>{const _0x6a85b4=_0x3de477;if(_0x46e509[_0x6a85b4(0x1e3)](_0x4c8d28,_0x373398))throw _0x46e509[_0x6a85b4(0x1cb)];const _0x2137cc=sendMessagePool[_0x11686f[_0x6a85b4(0x1e6)]];if(_0x2137cc)return await _0x46e509[_0x6a85b4(0x1e0)](sleep,0x1f4),_0x4c8d28+=0x1f4,await _0x46e509[_0x6a85b4(0x200)](_0x1593e6);else return;};return await _0x46e509[_0x3de477(0x1d1)](_0x1593e6),new Promise((_0x37dd63,_0x2b09fc)=>{const _0x2305f7=_0x3de477,_0x39de79={'xAlSN':function(_0x3b7714,_0x1aaa7f){return _0x46e509['qiMLU'](_0x3b7714,_0x1aaa7f);},'WWTwo':function(_0x371af0,_0x244a40){const _0x29c9cc=_0x59ff;return _0x46e509[_0x29c9cc(0x1d0)](_0x371af0,_0x244a40);},'TkKkp':_0x46e509['lLXJJ']};let _0x29ad27=![],_0x42d7a3=null;const _0x39b1ec=_0x46e509[_0x2305f7(0x200)](randomUUID);sendSuccessCBMap[_0x39b1ec]=_0xdd6c=>{const _0x547af1=_0x2305f7;if(_0x39de79[_0x547af1(0x1fe)](_0xdd6c[_0x547af1(0x1ff)],_0x42d7a3?.[_0x547af1(0x1ff)])){if(_0xdd6c[_0x547af1(0x1e1)]===0x2)return delete sendSuccessCBMap[_0x39b1ec],_0x29ad27=!![],_0x37dd63(_0xdd6c),!![];return![];}return![];},sendMessagePool[_0x1d8e36]=async _0x4f28f8=>{delete sendMessagePool[_0x1d8e36],_0x42d7a3=_0x4f28f8;},_0x46e509[_0x2305f7(0x1f6)](setTimeout,()=>{const _0x36f468=_0x2305f7;if(_0x29ad27)return;delete sendMessagePool[_0x1d8e36],delete sendSuccessCBMap[_0x39b1ec],_0x39de79[_0x36f468(0x1d5)](_0x2b09fc,_0x39de79[_0x36f468(0x1ef)]);},_0x373398);const _0xc55aca=napCatCore['session'][_0x2305f7(0x1fa)]()['sendMsg']('0',_0x11686f,_0x147bb1,new Map());});}static async[_0x30cb41(0x1c6)](_0xa13fef,_0x4cecb9,_0x14aa3a){const _0x535803=_0x30cb41;return napCatCore['session'][_0x535803(0x1fa)]()[_0x535803(0x1c6)](_0x14aa3a,_0xa13fef,[_0x4cecb9],new Map());}static async['multiForwardMsg'](_0x1d4452,_0x839b2e,_0x5487ef){const _0x18a76b=_0x30cb41,_0x1dee4b={'pICDg':function(_0x36eaca,_0x5915bf){return _0x36eaca==_0x5915bf;},'RUIWS':_0x18a76b(0x1eb),'dnXpv':function(_0x50de1e){return _0x50de1e();},'tGhDq':function(_0x4d5e37,_0x32578c,_0x31c3ee){return _0x4d5e37(_0x32578c,_0x31c3ee);}},_0x38c094=_0x5487ef['map'](_0x1e33bf=>{const _0xedab60=_0x18a76b;return{'msgId':_0x1e33bf,'senderShowName':selfInfo[_0xedab60(0x1c9)]};});return new Promise((_0x15cd33,_0x18f261)=>{const _0x49bdc7=_0x18a76b,_0x4f0769={'WLNcB':function(_0x45bd0a,_0x2fdf32){return _0x45bd0a(_0x2fdf32);},'HXQML':_0x1dee4b[_0x49bdc7(0x1f9)]};let _0x5d7a8d=![];const _0x4eae96=_0x5e9915=>{const _0x439786=_0x49bdc7,_0xfbb0ed=_0x5e9915[_0x439786(0x1c4)][_0x439786(0x1e7)](_0x2e0539=>_0x2e0539[_0x439786(0x1d3)]);if(!_0xfbb0ed)return;const _0x597d36=JSON[_0x439786(0x1f7)](_0xfbb0ed[_0x439786(0x1d3)][_0x439786(0x1ce)]);if(_0x597d36[_0x439786(0x1bf)]!=_0x439786(0x1f3))return;_0x1dee4b[_0x439786(0x1cc)](_0x5e9915[_0x439786(0x1e6)],_0x839b2e[_0x439786(0x1e6)])&&_0x1dee4b['pICDg'](_0x5e9915[_0x439786(0x1fb)],selfInfo['uid'])&&(_0x5d7a8d=!![],_0x15cd33(_0x5e9915));};sentMsgTasks[_0x49bdc7(0x1d7)](_0x1dee4b[_0x49bdc7(0x1db)](randomUUID),_0x4eae96),_0x1dee4b['tGhDq'](setTimeout,()=>{const _0x50b971=_0x49bdc7;!_0x5d7a8d&&_0x4f0769[_0x50b971(0x1d6)](_0x18f261,_0x4f0769[_0x50b971(0x1f1)]);},0x1388),napCatCore['session']['getMsgService']()[_0x49bdc7(0x1ed)](_0x38c094,_0x1d4452,_0x839b2e,[],new Map());});}}