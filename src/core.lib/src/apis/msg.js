const _0x205654=_0x3939;(function(_0x38923b,_0x271d33){const _0x114ea2=_0x3939,_0x4ed2d3=_0x38923b();while(!![]){try{const _0xd8b96b=parseInt(_0x114ea2(0xbe))/0x1+-parseInt(_0x114ea2(0xa7))/0x2*(-parseInt(_0x114ea2(0x89))/0x3)+parseInt(_0x114ea2(0xc0))/0x4+-parseInt(_0x114ea2(0x99))/0x5*(parseInt(_0x114ea2(0x9f))/0x6)+parseInt(_0x114ea2(0xc2))/0x7*(parseInt(_0x114ea2(0xae))/0x8)+-parseInt(_0x114ea2(0x7f))/0x9*(-parseInt(_0x114ea2(0x80))/0xa)+-parseInt(_0x114ea2(0x90))/0xb*(parseInt(_0x114ea2(0xbb))/0xc);if(_0xd8b96b===_0x271d33)break;else _0x4ed2d3['push'](_0x4ed2d3['shift']());}catch(_0xe7d9c4){_0x4ed2d3['push'](_0x4ed2d3['shift']());}}}(_0x2803,0x8a113));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x205654(0x93)]=_0x318f09=>{const _0x1632b7=_0x205654,_0x43843e={'YhBgN':function(_0x48827e,_0x5afe28){return _0x48827e instanceof _0x5afe28;}};for(const [_0x280f37,_0x213d04]of sentMsgTasks){_0x213d04(_0x318f09),sentMsgTasks[_0x1632b7(0xb2)](_0x280f37);}if(sendMessagePool[_0x318f09[_0x1632b7(0x82)]]){const _0x549e89=sendMessagePool[_0x318f09[_0x1632b7(0x82)]]?.(_0x318f09);_0x43843e[_0x1632b7(0x86)](_0x549e89,Promise)&&_0x549e89[_0x1632b7(0xa8)]()[_0x1632b7(0xa6)](logError);}},msgListener[_0x205654(0xad)]=_0x81556d=>{const _0x452e9f=_0x205654,_0x39966e={'sbHNy':function(_0x19ca79,_0x737b02){return _0x19ca79(_0x737b02);},'ovqqb':function(_0xf14f45,_0x3b72f0){return _0xf14f45(_0x3b72f0);}};_0x81556d[_0x452e9f(0x83)](_0x2c028d=>{const _0x5d977c=_0x452e9f;new Promise((_0xf7eef3,_0x524e3d)=>{const _0x4e4025=_0x3939;for(const _0xbc94e7 in sendSuccessCBMap){const _0x58fbc0=sendSuccessCBMap[_0xbc94e7],_0x29d9f0=_0x39966e[_0x4e4025(0x9d)](_0x58fbc0,_0x2c028d),_0x38d115=_0x12384b=>{_0x12384b&&delete sendSuccessCBMap[_0xbc94e7];};_0x29d9f0 instanceof Promise?_0x29d9f0[_0x4e4025(0xa8)](_0x38d115):_0x39966e[_0x4e4025(0xa0)](_0x38d115,_0x29d9f0);}})[_0x5d977c(0xa8)]()[_0x5d977c(0xa6)](log);});},setTimeout(()=>{const _0x549cdb=_0x205654;napCatCore[_0x549cdb(0x9b)](()=>{const _0x1d8bb2=_0x549cdb;napCatCore[_0x1d8bb2(0xa2)](msgListener);});},0x64);function _0x2803(){const _0x2914e6=['getMsgHistory','nick','getMsgService','activateChatAndGetHistory','1645960qRJEmU','toString','onLoginSuccess','yDDKz','sbHNy','com.tencent.multimsg','6PptqNc','ovqqb','chatType','addListener','setMsgRead','发送超时','parse','catch','114xlBbbC','then','jZjwL','setEmojiLike','getMultiMsg','gCZOp','onMsgInfoListUpdate','24AlCpdH','forwardMsg','sendMsg','kaLlj','delete','multiForwardMsgWithComment','guildId','iJYWT','arkElement','find','multiForwardMsg','nivSt','IDwwv','36696KsbVZD','msgId','ZuLdT','12380iYhUqc','SGmjU','4230268kcrIpU','getMsgsByMsgId','476189UnDOKD','recallMsg','set','elements','gpZFi','126RdwJea','193790EVsKlG','map','peerUid','forEach','FwoVD','VngNu','YhBgN','PtKVb','sendStatus','35769tTOdxL','getMsgsIncludeSelf','转发消息超时','iVbjH','activateChat','hbLYH','getMsgsBySeqAndCount','4785VERPsa','length','setMsgEmojiLikes','onAddSendMsg','session'];_0x2803=function(){return _0x2914e6;};return _0x2803();}function _0x3939(_0x1c1461,_0x51020c){const _0x28034f=_0x2803();return _0x3939=function(_0x393913,_0x1c9210){_0x393913=_0x393913-0x7c;let _0x2a2e11=_0x28034f[_0x393913];return _0x2a2e11;},_0x3939(_0x1c1461,_0x51020c);}export class NTQQMsgApi{static async[_0x205654(0xaa)](_0x434351,_0x253963,_0x3841fc,_0x497562=!![]){const _0x590918=_0x205654,_0x1ef198={'VngNu':function(_0x13a272,_0x497639){return _0x13a272>_0x497639;}};return _0x3841fc=_0x3841fc[_0x590918(0x9a)](),napCatCore['session'][_0x590918(0x97)]()[_0x590918(0x92)](_0x434351,_0x253963,_0x3841fc,_0x1ef198[_0x590918(0x85)](_0x3841fc[_0x590918(0x91)],0x3)?'2':'1',_0x497562);}static async[_0x205654(0xab)](_0x36f1d2,_0x19e6e5,_0x150af1){const _0x1b8348=_0x205654;return napCatCore[_0x1b8348(0x94)]['getMsgService']()[_0x1b8348(0xab)](_0x36f1d2,_0x19e6e5,_0x150af1);}static async[_0x205654(0xc1)](_0x606eea,_0x35c2b4){const _0x2ac80f=_0x205654;return await napCatCore[_0x2ac80f(0x94)][_0x2ac80f(0x97)]()[_0x2ac80f(0xc1)](_0x606eea,_0x35c2b4);}static async[_0x205654(0x8f)](_0x3449a5,_0x2f3960,_0x3ae1e9,_0x168721,_0xb146ca){const _0x3460d5=_0x205654;return await napCatCore[_0x3460d5(0x94)]['getMsgService']()[_0x3460d5(0x8f)](_0x3449a5,_0x2f3960,_0x3ae1e9,_0x168721,_0xb146ca);}static async[_0x205654(0x8d)](_0x3800e9){}static async[_0x205654(0x98)](_0x5ecb8c){}static async[_0x205654(0xa3)](_0x343b53){const _0x122539=_0x205654;return napCatCore['session'][_0x122539(0x97)]()['setMsgRead'](_0x343b53[_0x122539(0xa1)],_0x343b53['peerUid'],_0x343b53[_0x122539(0xb4)]);}static async[_0x205654(0x95)](_0x3eb89c,_0x5b8847,_0x52c5d1){const _0x1a3594=_0x205654;return napCatCore[_0x1a3594(0x94)]['getMsgService']()[_0x1a3594(0x8a)](_0x3eb89c,_0x5b8847,_0x52c5d1,!![]);}static async['fetchRecentContact'](){}static async[_0x205654(0xc3)](_0xb6f2b,_0x330996){const _0x1c2be0=_0x205654;await napCatCore[_0x1c2be0(0x94)][_0x1c2be0(0x97)]()[_0x1c2be0(0xc3)]({'chatType':_0xb6f2b[_0x1c2be0(0xa1)],'peerUid':_0xb6f2b[_0x1c2be0(0x82)]},_0x330996);}static async['sendMsg'](_0x390703,_0x45af1b,_0x442c0c=!![],_0x418808=0x2710){const _0x1981d6=_0x205654,_0xf3c5dd={'kaLlj':function(_0xbc71b9,_0x4e3ef0){return _0xbc71b9>_0x4e3ef0;},'ZuLdT':_0x1981d6(0xa4),'gpZFi':function(_0x13c2b7,_0x26ea00){return _0x13c2b7(_0x26ea00);},'OSOdU':function(_0x1bc831){return _0x1bc831();},'yDDKz':function(_0x169a1a,_0x10ad1d,_0x164ff1){return _0x169a1a(_0x10ad1d,_0x164ff1);},'SGmjU':function(_0x4ca065){return _0x4ca065();}},_0xb79b96=_0x390703[_0x1981d6(0x82)];let _0x535d82=0x0;const _0x18ed08=async()=>{const _0x1a7ef1=_0x1981d6;if(_0xf3c5dd[_0x1a7ef1(0xb1)](_0x535d82,_0x418808))throw _0xf3c5dd['ZuLdT'];const _0x272643=sendMessagePool[_0x390703[_0x1a7ef1(0x82)]];if(_0x272643)return await _0xf3c5dd[_0x1a7ef1(0x7e)](sleep,0x1f4),_0x535d82+=0x1f4,await _0x18ed08();else return;};return await _0xf3c5dd[_0x1981d6(0xbf)](_0x18ed08),new Promise((_0x168041,_0x66ede2)=>{const _0x33dcee=_0x1981d6,_0x581062={'nivSt':function(_0x3553ab,_0x3092c1){return _0x3553ab===_0x3092c1;},'iJYWT':function(_0x4d9976,_0x47100f){return _0x4d9976(_0x47100f);},'IDwwv':_0xf3c5dd[_0x33dcee(0xbd)]};let _0x32c099=![],_0x548824=null;const _0x2fb7e2=_0xf3c5dd['OSOdU'](randomUUID);sendSuccessCBMap[_0x2fb7e2]=_0x3f9ae3=>{const _0x45ad16=_0x33dcee;if(_0x581062[_0x45ad16(0xb9)](_0x3f9ae3[_0x45ad16(0xbc)],_0x548824?.[_0x45ad16(0xbc)])){if(_0x581062[_0x45ad16(0xb9)](_0x3f9ae3[_0x45ad16(0x88)],0x2))return delete sendSuccessCBMap[_0x2fb7e2],_0x32c099=!![],_0x581062[_0x45ad16(0xb5)](_0x168041,_0x3f9ae3),!![];return![];}return![];},sendMessagePool[_0xb79b96]=async _0x3b0b53=>{delete sendMessagePool[_0xb79b96],_0x548824=_0x3b0b53;},_0xf3c5dd[_0x33dcee(0x9c)](setTimeout,()=>{const _0x4cc036=_0x33dcee;if(_0x32c099)return;delete sendMessagePool[_0xb79b96],delete sendSuccessCBMap[_0x2fb7e2],_0x581062[_0x4cc036(0xb5)](_0x66ede2,_0x581062[_0x4cc036(0xba)]);},_0x418808);const _0x9d6cf0=napCatCore[_0x33dcee(0x94)][_0x33dcee(0x97)]()[_0x33dcee(0xb0)]('0',_0x390703,_0x45af1b,new Map());});}static async[_0x205654(0xaf)](_0x2a9810,_0x1d2488,_0x102fdc){const _0x4fccb4=_0x205654;return napCatCore[_0x4fccb4(0x94)][_0x4fccb4(0x97)]()[_0x4fccb4(0xaf)](_0x102fdc,_0x2a9810,[_0x1d2488],new Map());}static async[_0x205654(0xb8)](_0x2b68a2,_0xadeef4,_0x5f1a52){const _0x31d1f4=_0x205654,_0x281124={'gCZOp':function(_0x4e9208,_0x369804){return _0x4e9208!=_0x369804;},'iVbjH':function(_0x120fa1,_0x14a3f9){return _0x120fa1==_0x14a3f9;},'FEoxM':function(_0xc0ffb6,_0x196644){return _0xc0ffb6==_0x196644;},'PtKVb':function(_0x1c9e75,_0x5bd46f){return _0x1c9e75(_0x5bd46f);},'FwoVD':function(_0x2d51be){return _0x2d51be();},'jZjwL':function(_0x55eb54,_0x3a6e76,_0x40d3fe){return _0x55eb54(_0x3a6e76,_0x40d3fe);}},_0xfc33aa=_0x5f1a52[_0x31d1f4(0x81)](_0x50605d=>{const _0x54f95e=_0x31d1f4;return{'msgId':_0x50605d,'senderShowName':selfInfo[_0x54f95e(0x96)]};});return new Promise((_0x58180b,_0x13927f)=>{const _0x5510ac=_0x31d1f4,_0x31494d={'hbLYH':function(_0x173d28,_0x4bc03e){const _0x4cd21d=_0x3939;return _0x281124[_0x4cd21d(0x87)](_0x173d28,_0x4bc03e);},'PJpsb':_0x5510ac(0x8b)};let _0x176c8b=![];const _0x1e1a6b=_0x4d1bc4=>{const _0x30cdef=_0x5510ac,_0x19ede1=_0x4d1bc4[_0x30cdef(0x7d)][_0x30cdef(0xb7)](_0x3ab326=>_0x3ab326[_0x30cdef(0xb6)]);if(!_0x19ede1)return;const _0x568dca=JSON[_0x30cdef(0xa5)](_0x19ede1[_0x30cdef(0xb6)]['bytesData']);if(_0x281124[_0x30cdef(0xac)](_0x568dca['app'],_0x30cdef(0x9e)))return;_0x281124[_0x30cdef(0x8c)](_0x4d1bc4[_0x30cdef(0x82)],_0xadeef4[_0x30cdef(0x82)])&&_0x281124['FEoxM'](_0x4d1bc4['senderUid'],selfInfo['uid'])&&(_0x176c8b=!![],_0x281124[_0x30cdef(0x87)](_0x58180b,_0x4d1bc4));};sentMsgTasks[_0x5510ac(0x7c)](_0x281124[_0x5510ac(0x84)](randomUUID),_0x1e1a6b),_0x281124[_0x5510ac(0xa9)](setTimeout,()=>{const _0x27f15c=_0x5510ac;!_0x176c8b&&_0x31494d[_0x27f15c(0x8e)](_0x13927f,_0x31494d['PJpsb']);},0x1388),napCatCore[_0x5510ac(0x94)]['getMsgService']()[_0x5510ac(0xb3)](_0xfc33aa,_0x2b68a2,_0xadeef4,[],new Map());});}}