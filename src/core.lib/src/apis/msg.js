const _0x88cb9b=_0x1082;(function(_0x3b354b,_0x1a278e){const _0x183937=_0x1082,_0x172988=_0x3b354b();while(!![]){try{const _0x5221a1=-parseInt(_0x183937(0x11e))/0x1*(parseInt(_0x183937(0xe6))/0x2)+-parseInt(_0x183937(0xe7))/0x3+parseInt(_0x183937(0xf2))/0x4+parseInt(_0x183937(0x10c))/0x5*(parseInt(_0x183937(0xfc))/0x6)+-parseInt(_0x183937(0x12a))/0x7+-parseInt(_0x183937(0x107))/0x8*(-parseInt(_0x183937(0x10f))/0x9)+parseInt(_0x183937(0x101))/0xa*(-parseInt(_0x183937(0xf6))/0xb);if(_0x5221a1===_0x1a278e)break;else _0x172988['push'](_0x172988['shift']());}catch(_0x34abf2){_0x172988['push'](_0x172988['shift']());}}}(_0x23e8,0xd89c5));function _0x23e8(){const _0x3e26f1=['activateChatAndGetHistory','862770qHYqFk','setEmojiLike','FKYnI','getMultiMsg','session','10AoFcVd','KCFta','getMsgHistory','setMsgRead','forwardMsg','sendMsg','8XIPgER','length','Ladtc','activateChat','recallMsg','60NRFNsR','then','multiForwardMsg','2767815pXMNBJ','AejbK','uid','set','getMsgsBySeqAndCount','arkElement','app','afFNW','IxBEW','onLoginSuccess','发送超时','map','msgxR','setMsgEmojiLikes','catch','23441ZuQWKe','elements','获取群文件列表超时','getGroupFileList','转发消息超时','ijxWu','getRichMediaService','LQGUT','addListener','oBwDp','toString','lcGTr','3882305cWdUIK','onAddSendMsg','msgId','150Jewdkr','64887XAgcLA','getMsgsByMsgId','find','delete','xbEbb','onGroupFileInfoUpdate','LCeLN','multiForwardMsgWithComment','xetwe','peerUid','ReGIW','6475568qldXPV','uFvSD','senderUid','parse','4734521KQfHoS','com.tencent.multimsg','sendStatus','getMsgsIncludeSelf','getMsgService'];_0x23e8=function(){return _0x3e26f1;};return _0x23e8();}import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';function _0x1082(_0x37b29b,_0x18d416){const _0x23e850=_0x23e8();return _0x1082=function(_0x108292,_0x32a692){_0x108292=_0x108292-0xe4;let _0x3ef506=_0x23e850[_0x108292];return _0x3ef506;},_0x1082(_0x37b29b,_0x18d416);}import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x88cb9b(0xec)]=_0x197c58=>{const _0x3958f0=_0x88cb9b;for(const [_0x2850a2,_0x1b6751]of GroupFileInfoUpdateTasks){_0x1b6751(_0x197c58),GroupFileInfoUpdateTasks[_0x3958f0(0xea)](_0x2850a2);}},msgListener[_0x88cb9b(0xe4)]=_0x55c8b8=>{const _0xedfe40=_0x88cb9b,_0x3bf8d9={'KxXxL':function(_0x226246,_0x32a185){return _0x226246(_0x32a185);},'NDtiz':function(_0x551961,_0x232d73){return _0x551961 instanceof _0x232d73;}};for(const [_0x223e32,_0x4b7d79]of sentMsgTasks){_0x3bf8d9['KxXxL'](_0x4b7d79,_0x55c8b8),sentMsgTasks[_0xedfe40(0xea)](_0x223e32);}if(sendMessagePool[_0x55c8b8['peerUid']]){const _0x410bba=sendMessagePool[_0x55c8b8['peerUid']]?.(_0x55c8b8);_0x3bf8d9['NDtiz'](_0x410bba,Promise)&&_0x410bba[_0xedfe40(0x10d)]()['catch'](logError);}},msgListener['onMsgInfoListUpdate']=_0x55a7ed=>{const _0x3928d3={'IxBEW':function(_0xc25105,_0x1b1de8){return _0xc25105(_0x1b1de8);},'Ladtc':function(_0xd0c8ee,_0x2dcdf5){return _0xd0c8ee instanceof _0x2dcdf5;},'LCeLN':function(_0x1b56d4,_0x576959){return _0x1b56d4(_0x576959);}};_0x55a7ed['forEach'](_0x2fbfc8=>{const _0x50e74d=_0x1082;new Promise((_0x4603dd,_0x372ded)=>{const _0x47f0c9=_0x1082;for(const _0x542ca9 in sendSuccessCBMap){const _0x11a8fd=sendSuccessCBMap[_0x542ca9],_0x53ad80=_0x3928d3[_0x47f0c9(0x117)](_0x11a8fd,_0x2fbfc8),_0x148590=_0x582c68=>{_0x582c68&&delete sendSuccessCBMap[_0x542ca9];};_0x3928d3[_0x47f0c9(0x109)](_0x53ad80,Promise)?_0x53ad80[_0x47f0c9(0x10d)](_0x148590):_0x3928d3[_0x47f0c9(0xed)](_0x148590,_0x53ad80);}})[_0x50e74d(0x10d)]()[_0x50e74d(0x11d)](log);});},setTimeout(()=>{const _0x23b5df=_0x88cb9b;napCatCore[_0x23b5df(0x118)](()=>{const _0x4d93cf=_0x23b5df;napCatCore[_0x4d93cf(0x126)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x88cb9b(0xfd)](_0x340934,_0x14b51b,_0x53810d,_0x2b491f=!![]){const _0x1c353=_0x88cb9b;return _0x53810d=_0x53810d[_0x1c353(0x128)](),napCatCore[_0x1c353(0x100)]['getMsgService']()[_0x1c353(0x11c)](_0x340934,_0x14b51b,_0x53810d,_0x53810d[_0x1c353(0x108)]>0x3?'2':'1',_0x2b491f);}static async[_0x88cb9b(0xff)](_0x19a019,_0xa1c37e,_0x82d3f6){const _0x2cb9af=_0x88cb9b;return napCatCore[_0x2cb9af(0x100)]['getMsgService']()[_0x2cb9af(0xff)](_0x19a019,_0xa1c37e,_0x82d3f6);}static async[_0x88cb9b(0xe8)](_0x302d64,_0x3f2ce2){const _0x5e58e5=_0x88cb9b;return await napCatCore[_0x5e58e5(0x100)]['getMsgService']()[_0x5e58e5(0xe8)](_0x302d64,_0x3f2ce2);}static async[_0x88cb9b(0x113)](_0x3845fb,_0x50f485,_0x244a2a,_0x704daa,_0x268d6a){const _0x2de6b4=_0x88cb9b;return await napCatCore['session'][_0x2de6b4(0xfa)]()[_0x2de6b4(0x113)](_0x3845fb,_0x50f485,_0x244a2a,_0x704daa,_0x268d6a);}static async[_0x88cb9b(0x10a)](_0xac8571){}static async[_0x88cb9b(0xfb)](_0x4d8f02){}static async[_0x88cb9b(0x104)](_0x476d51){const _0x3dc143=_0x88cb9b;return napCatCore[_0x3dc143(0x100)]['getMsgService']()[_0x3dc143(0x104)](_0x476d51);}static async['getGroupFileList'](_0x3d23a7,_0x4402e7){const _0x23ba22=_0x88cb9b,_0x66060f={'KWvqW':function(_0x560a31,_0x381398){return _0x560a31(_0x381398);},'FKYnI':_0x23ba22(0x120)};return new Promise(async(_0x3e21e4,_0x2ad765)=>{const _0x3a4cd1=_0x23ba22;let _0x3c3c86=![];setTimeout(()=>{const _0x4c3cfe=_0x1082;!_0x3c3c86&&_0x66060f['KWvqW'](_0x2ad765,_0x66060f[_0x4c3cfe(0xfe)]);},0x1388);const _0x132364=_0x5607b5=>{_0x3c3c86=!![],_0x3e21e4(_0x5607b5['item']);};GroupFileInfoUpdateTasks['set'](randomUUID(),_0x132364),await napCatCore[_0x3a4cd1(0x100)][_0x3a4cd1(0x124)]()[_0x3a4cd1(0x121)](_0x3d23a7,_0x4402e7);});}static async[_0x88cb9b(0x103)](_0x32f52f,_0x326da0,_0x19f52a){const _0x5b20d6=_0x88cb9b;return napCatCore[_0x5b20d6(0x100)][_0x5b20d6(0xfa)]()[_0x5b20d6(0xf9)](_0x32f52f,_0x326da0,_0x19f52a,!![]);}static async['fetchRecentContact'](){}static async['recallMsg'](_0x75a7da,_0x5b489c){const _0x2f090a=_0x88cb9b;await napCatCore[_0x2f090a(0x100)]['getMsgService']()[_0x2f090a(0x10b)]({'chatType':_0x75a7da['chatType'],'peerUid':_0x75a7da['peerUid']},_0x5b489c);}static async[_0x88cb9b(0x106)](_0x29376f,_0x323972,_0x523d5b=!![],_0xade997=0x2710){const _0x43ee5d=_0x88cb9b,_0x11969b={'ipAhy':function(_0x40fd4d,_0x2279b1){return _0x40fd4d>_0x2279b1;},'oBwDp':_0x43ee5d(0x119),'uFvSD':function(_0x5372f6,_0x2450af){return _0x5372f6(_0x2450af);},'lcGTr':function(_0x48b4e4){return _0x48b4e4();},'rlfKJ':function(_0x36d258,_0x2ce83b){return _0x36d258===_0x2ce83b;},'msgxR':function(_0x4c7b61,_0x1b4aaf){return _0x4c7b61(_0x1b4aaf);},'KCFta':function(_0x4f32b0,_0x3fb4a0,_0x576f15){return _0x4f32b0(_0x3fb4a0,_0x576f15);},'afFNW':function(_0x856b1b){return _0x856b1b();}},_0x53aab7=_0x29376f[_0x43ee5d(0xf0)];let _0x12ec09=0x0;const _0xdc446f=async()=>{const _0x50a0b5=_0x43ee5d;if(_0x11969b['ipAhy'](_0x12ec09,_0xade997))throw _0x11969b[_0x50a0b5(0x127)];const _0x5edeca=sendMessagePool[_0x29376f['peerUid']];if(_0x5edeca)return await _0x11969b[_0x50a0b5(0xf3)](sleep,0x1f4),_0x12ec09+=0x1f4,await _0x11969b[_0x50a0b5(0x129)](_0xdc446f);else return;};return await _0x11969b[_0x43ee5d(0x116)](_0xdc446f),new Promise((_0x4dac5c,_0x48e038)=>{const _0x537a29=_0x43ee5d,_0x3ab4b2={'LQGUT':function(_0x3b567a,_0x4dba36){const _0x236025=_0x1082;return _0x11969b[_0x236025(0x11b)](_0x3b567a,_0x4dba36);},'DwJfo':_0x537a29(0x119)};let _0x416e5e=![],_0x13246c=null;const _0x503518=randomUUID();sendSuccessCBMap[_0x503518]=_0x404fb3=>{const _0x33f16=_0x537a29;if(_0x404fb3[_0x33f16(0xe5)]===_0x13246c?.[_0x33f16(0xe5)]){if(_0x11969b['rlfKJ'](_0x404fb3[_0x33f16(0xf8)],0x2))return delete sendSuccessCBMap[_0x503518],_0x416e5e=!![],_0x11969b[_0x33f16(0x11b)](_0x4dac5c,_0x404fb3),!![];return![];}return![];},sendMessagePool[_0x53aab7]=async _0x4f4c5e=>{delete sendMessagePool[_0x53aab7],_0x13246c=_0x4f4c5e;},_0x11969b[_0x537a29(0x102)](setTimeout,()=>{const _0x151658=_0x537a29;if(_0x416e5e)return;delete sendMessagePool[_0x53aab7],delete sendSuccessCBMap[_0x503518],_0x3ab4b2[_0x151658(0x125)](_0x48e038,_0x3ab4b2['DwJfo']);},_0xade997);const _0x17ee23=napCatCore['session'][_0x537a29(0xfa)]()['sendMsg']('0',_0x29376f,_0x323972,new Map());});}static async[_0x88cb9b(0x105)](_0x44b8b8,_0x293a87,_0x759f3d){const _0x5f0502=_0x88cb9b;return napCatCore[_0x5f0502(0x100)][_0x5f0502(0xfa)]()[_0x5f0502(0x105)](_0x759f3d,_0x44b8b8,[_0x293a87],new Map());}static async[_0x88cb9b(0x10e)](_0xe15824,_0x27a426,_0x156e5e){const _0xedf91c=_0x88cb9b,_0x3aca60={'ijxWu':_0xedf91c(0xf7),'xbEbb':function(_0x27e984,_0x2bfac5){return _0x27e984==_0x2bfac5;},'ReGIW':function(_0x33e1e4,_0x5836de){return _0x33e1e4(_0x5836de);},'VmKUG':_0xedf91c(0x122),'DkVoU':function(_0x520d38,_0x5817db,_0x21be8f){return _0x520d38(_0x5817db,_0x21be8f);}},_0x3019ff=_0x156e5e[_0xedf91c(0x11a)](_0x18150d=>{return{'msgId':_0x18150d,'senderShowName':selfInfo['nick']};});return new Promise((_0x16fa84,_0x24b44c)=>{const _0x8183ea=_0xedf91c,_0x52af1e={'OptGu':_0x3aca60[_0x8183ea(0x123)],'jTzEE':function(_0x47fac0,_0x4578d9){const _0x832b3a=_0x8183ea;return _0x3aca60[_0x832b3a(0xeb)](_0x47fac0,_0x4578d9);},'AejbK':function(_0x237477,_0x1c5627){const _0x5dbd39=_0x8183ea;return _0x3aca60[_0x5dbd39(0xf1)](_0x237477,_0x1c5627);},'xetwe':_0x3aca60['VmKUG']};let _0x4098d9=![];const _0x27cbec=_0x5db5d7=>{const _0x55d83=_0x8183ea,_0x36aa9e=_0x5db5d7[_0x55d83(0x11f)][_0x55d83(0xe9)](_0x1c97f5=>_0x1c97f5[_0x55d83(0x114)]);if(!_0x36aa9e)return;const _0x51b89f=JSON[_0x55d83(0xf5)](_0x36aa9e[_0x55d83(0x114)]['bytesData']);if(_0x51b89f[_0x55d83(0x115)]!=_0x52af1e['OptGu'])return;_0x52af1e['jTzEE'](_0x5db5d7[_0x55d83(0xf0)],_0x27a426[_0x55d83(0xf0)])&&_0x5db5d7[_0x55d83(0xf4)]==selfInfo[_0x55d83(0x111)]&&(_0x4098d9=!![],_0x52af1e[_0x55d83(0x110)](_0x16fa84,_0x5db5d7));};sentMsgTasks[_0x8183ea(0x112)](randomUUID(),_0x27cbec),_0x3aca60['DkVoU'](setTimeout,()=>{const _0x500ca9=_0x8183ea;!_0x4098d9&&_0x52af1e[_0x500ca9(0x110)](_0x24b44c,_0x52af1e[_0x500ca9(0xef)]);},0x1388),napCatCore[_0x8183ea(0x100)]['getMsgService']()[_0x8183ea(0xee)](_0x3019ff,_0xe15824,_0x27a426,[],new Map());});}}