const _0x5709a6=_0x2db6;(function(_0xa69563,_0x11fc02){const _0x12dd02=_0x2db6,_0xff48df=_0xa69563();while(!![]){try{const _0x153472=parseInt(_0x12dd02(0xc8))/0x1+-parseInt(_0x12dd02(0xe7))/0x2*(-parseInt(_0x12dd02(0xbe))/0x3)+parseInt(_0x12dd02(0xde))/0x4*(parseInt(_0x12dd02(0xd0))/0x5)+parseInt(_0x12dd02(0xe4))/0x6+-parseInt(_0x12dd02(0x103))/0x7*(-parseInt(_0x12dd02(0xcd))/0x8)+-parseInt(_0x12dd02(0xe9))/0x9*(parseInt(_0x12dd02(0x109))/0xa)+-parseInt(_0x12dd02(0xd4))/0xb*(parseInt(_0x12dd02(0xe8))/0xc);if(_0x153472===_0x11fc02)break;else _0xff48df['push'](_0xff48df['shift']());}catch(_0x208539){_0xff48df['push'](_0xff48df['shift']());}}}(_0x951f,0xe4575));function _0x2db6(_0x517b78,_0x2c8ee9){const _0x951f96=_0x951f();return _0x2db6=function(_0x2db6e7,_0x8f41f8){_0x2db6e7=_0x2db6e7-0xbb;let _0x989d51=_0x951f96[_0x2db6e7];return _0x989d51;},_0x2db6(_0x517b78,_0x2c8ee9);}import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x951f(){const _0x226cd2=['find','then','fNNGJ','setMsgRead','getMsgService','Xolov','dscvO','addListener','getMultiMsg','nlqJx','发送超时','13307bwJRlF','map','chatType','set','vBfWV','setEmojiLike','16118530BncZbO','forEach','getGroupFileList','VUUvI','1044093KfzuQQ','activateChat','uid','getMsgsBySeqAndCount','nick','getRichMediaService','activateChatAndGetHistory','elements','parse','peerUid','1030848VwxHCC','forwardMsg','GJmAv','joudG','AJxhS','3512kfINrK','sendStatus','onAddSendMsg','355rdRKmg','item','KAGco','msgId','77joJWgI','recallMsg','onGroupFileInfoUpdate','iUIOa','app','onMsgInfoListUpdate','arkElement','catch','bytesData','BOdnx','58148EKJviQ','session','getMsgHistory','sendMsg','fetchRecentContact','vzWGr','9201858wRoeyI','SLBty','multiForwardMsg','4jUoJDb','4422996qpiEOF','9MhQcnS','RXPYW','RBnnn','转发消息超时','toString','delete','baend','gFUlA','senderUid','length','cyNpP','eiCGN','getMsgsByMsgId','BAsWK','getMsgsIncludeSelf'];_0x951f=function(){return _0x226cd2;};return _0x951f();}import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x5709a6(0xd6)]=_0x582ed3=>{const _0x37d21f=_0x5709a6;for(const [_0x383890,_0x4912dd]of GroupFileInfoUpdateTasks){_0x4912dd(_0x582ed3),GroupFileInfoUpdateTasks[_0x37d21f(0xee)](_0x383890);}},msgListener[_0x5709a6(0xcf)]=_0x3bc2eb=>{const _0x57ff38=_0x5709a6,_0x15eae8={'gFUlA':function(_0x44f258,_0x3eb607){return _0x44f258(_0x3eb607);}};for(const [_0x507db6,_0x437de3]of sentMsgTasks){_0x15eae8[_0x57ff38(0xf0)](_0x437de3,_0x3bc2eb),sentMsgTasks[_0x57ff38(0xee)](_0x507db6);}if(sendMessagePool[_0x3bc2eb[_0x57ff38(0xc7)]]){const _0x145fe7=sendMessagePool[_0x3bc2eb[_0x57ff38(0xc7)]]?.(_0x3bc2eb);_0x145fe7 instanceof Promise&&_0x145fe7[_0x57ff38(0xf9)]()[_0x57ff38(0xdb)](logError);}},msgListener[_0x5709a6(0xd9)]=_0x2cb7d6=>{const _0x811aca=_0x5709a6,_0x283a77={'GJmAv':function(_0x4a8318,_0x39f10e){return _0x4a8318 instanceof _0x39f10e;}};_0x2cb7d6[_0x811aca(0xbb)](_0x569989=>{const _0x32b183=_0x811aca,_0xe77e9a={'RBnnn':function(_0x1490da,_0x4365f2){return _0x1490da(_0x4365f2);},'baend':function(_0x2abe95,_0x43b55a){const _0x4e75f8=_0x2db6;return _0x283a77[_0x4e75f8(0xca)](_0x2abe95,_0x43b55a);}};new Promise((_0x5208ae,_0x506bc7)=>{const _0x1874e6=_0x2db6;for(const _0x20acb4 in sendSuccessCBMap){const _0x3e8690=sendSuccessCBMap[_0x20acb4],_0x11f5cf=_0xe77e9a[_0x1874e6(0xeb)](_0x3e8690,_0x569989),_0x4c9ed7=_0x181f4d=>{_0x181f4d&&delete sendSuccessCBMap[_0x20acb4];};_0xe77e9a[_0x1874e6(0xef)](_0x11f5cf,Promise)?_0x11f5cf[_0x1874e6(0xf9)](_0x4c9ed7):_0xe77e9a[_0x1874e6(0xeb)](_0x4c9ed7,_0x11f5cf);}})[_0x32b183(0xf9)]()[_0x32b183(0xdb)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x3c3e48=_0x2db6;napCatCore[_0x3c3e48(0xff)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x5709a6(0x108)](_0x50001b,_0x539c0f,_0x47230d,_0x3ca025=!![]){const _0x4dd762=_0x5709a6,_0x56305b={'AJxhS':function(_0x1c418d,_0x4bb59a){return _0x1c418d>_0x4bb59a;}};return _0x47230d=_0x47230d[_0x4dd762(0xed)](),napCatCore[_0x4dd762(0xdf)]['getMsgService']()['setMsgEmojiLikes'](_0x50001b,_0x539c0f,_0x47230d,_0x56305b[_0x4dd762(0xcc)](_0x47230d[_0x4dd762(0xf2)],0x3)?'2':'1',_0x3ca025);}static async[_0x5709a6(0x100)](_0x35b109,_0x59c85a,_0x578969){const _0x394c0e=_0x5709a6;return napCatCore[_0x394c0e(0xdf)]['getMsgService']()['getMultiMsg'](_0x35b109,_0x59c85a,_0x578969);}static async[_0x5709a6(0xf5)](_0xd2c555,_0x5352d0){const _0x5a7fcd=_0x5709a6;return await napCatCore['session']['getMsgService']()[_0x5a7fcd(0xf5)](_0xd2c555,_0x5352d0);}static async[_0x5709a6(0xc1)](_0x47ebf3,_0x37b556,_0x59e506,_0x53a89a,_0x3b90ef){const _0xb42a0d=_0x5709a6;return await napCatCore[_0xb42a0d(0xdf)][_0xb42a0d(0xfc)]()[_0xb42a0d(0xc1)](_0x47ebf3,_0x37b556,_0x59e506,_0x53a89a,_0x3b90ef);}static async[_0x5709a6(0xbf)](_0x519c8b){}static async[_0x5709a6(0xc4)](_0x529a2c){}static async[_0x5709a6(0xfb)](_0x59cb19){const _0x531dd5=_0x5709a6;return napCatCore[_0x531dd5(0xdf)][_0x531dd5(0xfc)]()[_0x531dd5(0xfb)](_0x59cb19);}static async[_0x5709a6(0xbc)](_0x16b0fc,_0x2b50f7){const _0x169dfa={'KAGco':function(_0x2acce7,_0x211f62){return _0x2acce7(_0x211f62);},'XZxro':function(_0x4b0a09,_0x487126,_0x2931cd){return _0x4b0a09(_0x487126,_0x2931cd);},'dscvO':function(_0x5a83eb){return _0x5a83eb();}};return new Promise(async(_0x455f16,_0x468c46)=>{const _0x2ff29c=_0x2db6,_0x51f2d8={'vzWGr':function(_0x2174f9,_0x3a45ca){return _0x2174f9(_0x3a45ca);}};let _0x2aa317=![];_0x169dfa['XZxro'](setTimeout,()=>{const _0x4e2424=_0x2db6;!_0x2aa317&&_0x51f2d8[_0x4e2424(0xe3)](_0x468c46,'获取群文件列表超时');},0x1388);const _0x543016=_0x2adf2e=>{const _0x904b4=_0x2db6;_0x2aa317=!![],_0x169dfa[_0x904b4(0xd2)](_0x455f16,_0x2adf2e[_0x904b4(0xd1)]);};GroupFileInfoUpdateTasks['set'](_0x169dfa[_0x2ff29c(0xfe)](randomUUID),_0x543016),await napCatCore[_0x2ff29c(0xdf)][_0x2ff29c(0xc3)]()['getGroupFileList'](_0x16b0fc,_0x2b50f7);});}static async[_0x5709a6(0xe0)](_0x243f1b,_0x4cda3e,_0x1bced2){const _0x588713=_0x5709a6;return napCatCore['session'][_0x588713(0xfc)]()[_0x588713(0xf7)](_0x243f1b,_0x4cda3e,_0x1bced2,!![]);}static async[_0x5709a6(0xe2)](){}static async[_0x5709a6(0xd5)](_0xfcd15,_0x36469d){const _0x1879cf=_0x5709a6;await napCatCore[_0x1879cf(0xdf)]['getMsgService']()[_0x1879cf(0xd5)]({'chatType':_0xfcd15[_0x1879cf(0x105)],'peerUid':_0xfcd15[_0x1879cf(0xc7)]},_0x36469d);}static async[_0x5709a6(0xe1)](_0x55d399,_0x595a9c,_0x293160=!![],_0x4f9b19=0x2710){const _0x4eb4ad=_0x5709a6,_0x4433b4={'yBSld':function(_0x459339,_0x56986c){return _0x459339>_0x56986c;},'Xolov':function(_0x3dc363,_0x1e8baa){return _0x3dc363(_0x1e8baa);},'wjFMB':function(_0x1980e9){return _0x1980e9();},'iUIOa':_0x4eb4ad(0x102),'joudG':function(_0x54afd7,_0x3fbc81){return _0x54afd7===_0x3fbc81;},'nlqJx':function(_0x3f84a2,_0xfadb7e,_0x17bbb7){return _0x3f84a2(_0xfadb7e,_0x17bbb7);}},_0x27e4f8=_0x55d399[_0x4eb4ad(0xc7)];let _0x579426=0x0;const _0xae6038=async()=>{const _0x13e419=_0x4eb4ad;if(_0x4433b4['yBSld'](_0x579426,_0x4f9b19))throw _0x13e419(0x102);const _0x4235b2=sendMessagePool[_0x55d399['peerUid']];if(_0x4235b2)return await _0x4433b4[_0x13e419(0xfd)](sleep,0x1f4),_0x579426+=0x1f4,await _0x4433b4['wjFMB'](_0xae6038);else return;};return await _0xae6038(),new Promise((_0x2ec9f8,_0x1886c9)=>{const _0x20c1f1=_0x4eb4ad,_0x10cf4c={'cyNpP':function(_0x405839,_0x520228){const _0x327df8=_0x2db6;return _0x4433b4[_0x327df8(0xcb)](_0x405839,_0x520228);},'SLBty':function(_0x272c82,_0x3ae2e1){return _0x4433b4['Xolov'](_0x272c82,_0x3ae2e1);}};let _0x50351a=![],_0x3cbafb=null;const _0x322234=randomUUID();sendSuccessCBMap[_0x322234]=_0x5c1a2c=>{const _0x342706=_0x2db6;if(_0x10cf4c[_0x342706(0xf3)](_0x5c1a2c[_0x342706(0xd3)],_0x3cbafb?.[_0x342706(0xd3)])){if(_0x10cf4c['cyNpP'](_0x5c1a2c[_0x342706(0xce)],0x2))return delete sendSuccessCBMap[_0x322234],_0x50351a=!![],_0x10cf4c[_0x342706(0xe5)](_0x2ec9f8,_0x5c1a2c),!![];return![];}return![];},sendMessagePool[_0x27e4f8]=async _0x327538=>{delete sendMessagePool[_0x27e4f8],_0x3cbafb=_0x327538;},_0x4433b4[_0x20c1f1(0x101)](setTimeout,()=>{const _0x520d77=_0x20c1f1;if(_0x50351a)return;delete sendMessagePool[_0x27e4f8],delete sendSuccessCBMap[_0x322234],_0x1886c9(_0x4433b4[_0x520d77(0xd7)]);},_0x4f9b19);const _0x1c0b05=napCatCore[_0x20c1f1(0xdf)][_0x20c1f1(0xfc)]()[_0x20c1f1(0xe1)]('0',_0x55d399,_0x595a9c,new Map());});}static async['forwardMsg'](_0x5aa4fc,_0x286ae1,_0x2ae62e){const _0xfdf44c=_0x5709a6;return napCatCore['session'][_0xfdf44c(0xfc)]()[_0xfdf44c(0xc9)](_0x2ae62e,_0x5aa4fc,[_0x286ae1],new Map());}static async[_0x5709a6(0xe6)](_0x17d1e8,_0x1a7a1b,_0x49994d){const _0x27a7b2=_0x5709a6,_0x290f88={'RXPYW':function(_0x2a4599,_0xc28fb2){return _0x2a4599!=_0xc28fb2;},'fNNGJ':function(_0xcc128a,_0x434452){return _0xcc128a==_0x434452;},'BAsWK':function(_0x5eacaa,_0x3b8fe9){return _0x5eacaa==_0x3b8fe9;},'vBfWV':function(_0x1503a8,_0xd1a985){return _0x1503a8(_0xd1a985);},'VUUvI':function(_0x2cf980,_0x414e3e){return _0x2cf980(_0x414e3e);},'BOdnx':_0x27a7b2(0xec),'eiCGN':function(_0x519d5f){return _0x519d5f();}},_0x30ff0f=_0x49994d[_0x27a7b2(0x104)](_0x178910=>{const _0x3b5e7e=_0x27a7b2;return{'msgId':_0x178910,'senderShowName':selfInfo[_0x3b5e7e(0xc2)]};});return new Promise((_0x4855ca,_0xcdf400)=>{const _0xcc7af5=_0x27a7b2;let _0x4914fa=![];const _0x421c02=_0x57421a=>{const _0x47366a=_0x2db6,_0x524fed=_0x57421a[_0x47366a(0xc5)][_0x47366a(0xf8)](_0x14c914=>_0x14c914[_0x47366a(0xda)]);if(!_0x524fed)return;const _0x2014ec=JSON[_0x47366a(0xc6)](_0x524fed[_0x47366a(0xda)][_0x47366a(0xdc)]);if(_0x290f88[_0x47366a(0xea)](_0x2014ec[_0x47366a(0xd8)],'com.tencent.multimsg'))return;_0x290f88[_0x47366a(0xfa)](_0x57421a['peerUid'],_0x1a7a1b[_0x47366a(0xc7)])&&_0x290f88[_0x47366a(0xf6)](_0x57421a[_0x47366a(0xf1)],selfInfo[_0x47366a(0xc0)])&&(_0x4914fa=!![],_0x290f88[_0x47366a(0x107)](_0x4855ca,_0x57421a));};sentMsgTasks[_0xcc7af5(0x106)](_0x290f88[_0xcc7af5(0xf4)](randomUUID),_0x421c02),setTimeout(()=>{const _0x5a790a=_0xcc7af5;!_0x4914fa&&_0x290f88[_0x5a790a(0xbd)](_0xcdf400,_0x290f88[_0x5a790a(0xdd)]);},0x1388),napCatCore[_0xcc7af5(0xdf)][_0xcc7af5(0xfc)]()['multiForwardMsgWithComment'](_0x30ff0f,_0x17d1e8,_0x1a7a1b,[],new Map());});}}