const _0xc3eefe=_0x14d4;function _0x14d4(_0x2360c3,_0x1a90a8){const _0x3dc33f=_0x3dc3();return _0x14d4=function(_0x14d431,_0x44860e){_0x14d431=_0x14d431-0xdd;let _0x3c3342=_0x3dc33f[_0x14d431];return _0x3c3342;},_0x14d4(_0x2360c3,_0x1a90a8);}(function(_0x19179a,_0x35c0a6){const _0xb6f129=_0x14d4,_0x2f7f59=_0x19179a();while(!![]){try{const _0x79def9=parseInt(_0xb6f129(0xe2))/0x1+-parseInt(_0xb6f129(0xfd))/0x2+-parseInt(_0xb6f129(0xea))/0x3*(parseInt(_0xb6f129(0xe8))/0x4)+-parseInt(_0xb6f129(0xff))/0x5+parseInt(_0xb6f129(0x111))/0x6*(parseInt(_0xb6f129(0x10f))/0x7)+parseInt(_0xb6f129(0x115))/0x8+parseInt(_0xb6f129(0xf5))/0x9;if(_0x79def9===_0x35c0a6)break;else _0x2f7f59['push'](_0x2f7f59['shift']());}catch(_0x55dc63){_0x2f7f59['push'](_0x2f7f59['shift']());}}}(_0x3dc3,0x34668));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x3dc3(){const _0x4367cc=['item','getMsgService','uid','uuwof','arkElement','toString','2328516GLOEYx','XvAnc','YVwww','length','session','recallMsg','hqFGj','addListener','137292CgiKiE','getRichMediaService','2126545AmHnaw','mtjic','activateChatAndGetHistory','igIaj','peerUid','getMsgsBySeqAndCount','msgId','发送超时','set','getMultiMsg','BjMRG','forEach','EOpaJ','getGroupFileList','TqdVk','forwardMsg','14UheTrs','ABfdI','714732GdVsqV','nick','onLoginSuccess','onAddSendMsg','1909552mXabQi','setMsgEmojiLikes','eYCdh','ZrgKH','multiForwardMsgWithComment','then','转发消息超时','onGroupFileInfoUpdate','DfeFH','WJzam','map','oLhNH','WUbpp','app','UgiOi','获取群文件列表超时','IffLT','msdJM','setMsgRead','getMsgsByMsgId','onMsgInfoListUpdate','eFsSX','156692TtVqMw','parse','fetchRecentContact','sendStatus','getMsgsIncludeSelf','KJLBI','4868fFOpVO','delete','453JZNEpp','TZGFo','multiForwardMsg','catch','iJGEe'];_0x3dc3=function(){return _0x4367cc;};return _0x3dc3();}import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0xc3eefe(0x11c)]=_0x173904=>{const _0x2a750a=_0xc3eefe;for(const [_0x42f6e2,_0x296bbb]of GroupFileInfoUpdateTasks){_0x296bbb(_0x173904),GroupFileInfoUpdateTasks[_0x2a750a(0xe9)](_0x42f6e2);}},msgListener[_0xc3eefe(0x114)]=_0x537b3c=>{const _0x8a73f7=_0xc3eefe,_0xe607d0={'JqohN':function(_0x1859c1,_0xe6c42b){return _0x1859c1(_0xe6c42b);},'eYCdh':function(_0x19eff5,_0x216acd){return _0x19eff5 instanceof _0x216acd;}};for(const [_0x288592,_0x179bbd]of sentMsgTasks){_0xe607d0['JqohN'](_0x179bbd,_0x537b3c),sentMsgTasks['delete'](_0x288592);}if(sendMessagePool[_0x537b3c['peerUid']]){const _0x4b3a34=sendMessagePool[_0x537b3c[_0x8a73f7(0x103)]]?.(_0x537b3c);_0xe607d0[_0x8a73f7(0x117)](_0x4b3a34,Promise)&&_0x4b3a34[_0x8a73f7(0x11a)]()[_0x8a73f7(0xed)](logError);}},msgListener[_0xc3eefe(0xe0)]=_0x1d2c0e=>{const _0x33f24e=_0xc3eefe,_0x1b54c8={'TZGFo':function(_0x6ccb86,_0x322546){return _0x6ccb86(_0x322546);}};_0x1d2c0e[_0x33f24e(0x10a)](_0x1d8e3f=>{const _0x3ce9cd=_0x33f24e;new Promise((_0x2d49d7,_0x455e50)=>{const _0x23f3fb=_0x14d4;for(const _0x31b351 in sendSuccessCBMap){const _0x292162=sendSuccessCBMap[_0x31b351],_0x33036e=_0x292162(_0x1d8e3f),_0x5c2026=_0x52a36a=>{_0x52a36a&&delete sendSuccessCBMap[_0x31b351];};_0x33036e instanceof Promise?_0x33036e[_0x23f3fb(0x11a)](_0x5c2026):_0x1b54c8[_0x23f3fb(0xeb)](_0x5c2026,_0x33036e);}})['then']()[_0x3ce9cd(0xed)](log);});},setTimeout(()=>{const _0x215825=_0xc3eefe;napCatCore[_0x215825(0x113)](()=>{const _0x2acfa1=_0x215825;napCatCore[_0x2acfa1(0xfc)](msgListener);});},0x64);export class NTQQMsgApi{static async['setEmojiLike'](_0x219aac,_0x1d3625,_0x3b6619,_0x367f79=!![]){const _0x2cf91a=_0xc3eefe;return _0x3b6619=_0x3b6619[_0x2cf91a(0xf4)](),napCatCore['session'][_0x2cf91a(0xf0)]()[_0x2cf91a(0x116)](_0x219aac,_0x1d3625,_0x3b6619,_0x3b6619[_0x2cf91a(0xf8)]>0x3?'2':'1',_0x367f79);}static async['getMultiMsg'](_0x2fbaab,_0x4fe29a,_0x595c93){const _0x4308ce=_0xc3eefe;return napCatCore[_0x4308ce(0xf9)]['getMsgService']()[_0x4308ce(0x108)](_0x2fbaab,_0x4fe29a,_0x595c93);}static async[_0xc3eefe(0xdf)](_0x562b01,_0x5e5c53){const _0x6b945b=_0xc3eefe;return await napCatCore[_0x6b945b(0xf9)]['getMsgService']()[_0x6b945b(0xdf)](_0x562b01,_0x5e5c53);}static async[_0xc3eefe(0x104)](_0x2c8250,_0x3ac101,_0x1dd2f6,_0x176bfd,_0x2f6c84){const _0x5b9f09=_0xc3eefe;return await napCatCore[_0x5b9f09(0xf9)][_0x5b9f09(0xf0)]()[_0x5b9f09(0x104)](_0x2c8250,_0x3ac101,_0x1dd2f6,_0x176bfd,_0x2f6c84);}static async['activateChat'](_0x1957ba){}static async[_0xc3eefe(0x101)](_0x4c0eed){}static async[_0xc3eefe(0xde)](_0x452fc4){const _0x19e87f=_0xc3eefe;return napCatCore[_0x19e87f(0xf9)][_0x19e87f(0xf0)]()[_0x19e87f(0xde)](_0x452fc4);}static async[_0xc3eefe(0x10c)](_0x3b576d,_0x217eb8){const _0x1c80a3=_0xc3eefe,_0x213570={'WUbpp':function(_0x4516f7,_0x283528){return _0x4516f7(_0x283528);},'IwqzR':_0x1c80a3(0x124),'qMUJR':function(_0x456420,_0x345e3d){return _0x456420(_0x345e3d);},'mtjic':function(_0x1646aa,_0x27c93a,_0x224b58){return _0x1646aa(_0x27c93a,_0x224b58);},'oLhNH':function(_0x2c2116){return _0x2c2116();}};return new Promise(async(_0x4db179,_0x2ced10)=>{const _0x46fff7=_0x1c80a3,_0x46c1a9={'JZSJT':function(_0x314064,_0x2f474c){const _0x187a26=_0x14d4;return _0x213570[_0x187a26(0x121)](_0x314064,_0x2f474c);},'eFsSX':_0x213570['IwqzR'],'WJzam':function(_0x2bc45e,_0x1c17e3){return _0x213570['qMUJR'](_0x2bc45e,_0x1c17e3);}};let _0x4dc4c5=![];_0x213570[_0x46fff7(0x100)](setTimeout,()=>{const _0x5d2f4f=_0x46fff7;!_0x4dc4c5&&_0x46c1a9['JZSJT'](_0x2ced10,_0x46c1a9[_0x5d2f4f(0xe1)]);},0x1388);const _0x2b35a8=_0x369d12=>{const _0x260a23=_0x46fff7;_0x4dc4c5=!![],_0x46c1a9[_0x260a23(0x11e)](_0x4db179,_0x369d12[_0x260a23(0xef)]);};GroupFileInfoUpdateTasks[_0x46fff7(0x107)](_0x213570[_0x46fff7(0x120)](randomUUID),_0x2b35a8),await napCatCore[_0x46fff7(0xf9)][_0x46fff7(0xfe)]()[_0x46fff7(0x10c)](_0x3b576d,_0x217eb8);});}static async['getMsgHistory'](_0x19728c,_0x45f041,_0x233653){const _0x1fb6da=_0xc3eefe;return napCatCore['session'][_0x1fb6da(0xf0)]()[_0x1fb6da(0xe6)](_0x19728c,_0x45f041,_0x233653,!![]);}static async[_0xc3eefe(0xe4)](){}static async[_0xc3eefe(0xfa)](_0x359dca,_0x21f5d9){const _0x1b95bd=_0xc3eefe;await napCatCore['session'][_0x1b95bd(0xf0)]()[_0x1b95bd(0xfa)]({'chatType':_0x359dca['chatType'],'peerUid':_0x359dca[_0x1b95bd(0x103)]},_0x21f5d9);}static async['sendMsg'](_0x5078a8,_0x5df708,_0x40cb5b=!![],_0x54ef60=0x2710){const _0xfc06ad=_0xc3eefe,_0x41d2ca={'BFxfy':function(_0xbacc7f,_0x2c2031){return _0xbacc7f>_0x2c2031;},'igIaj':_0xfc06ad(0x106),'BjMRG':function(_0x554f38,_0x25582d){return _0x554f38(_0x25582d);},'hqFGj':function(_0x3f8b54){return _0x3f8b54();},'ZrgKH':function(_0x514794,_0x3d991d){return _0x514794===_0x3d991d;},'iJGEe':function(_0x2f5eb6,_0x2dfaa7,_0x5a5f48){return _0x2f5eb6(_0x2dfaa7,_0x5a5f48);}},_0x52481b=_0x5078a8[_0xfc06ad(0x103)];let _0x1e9f0b=0x0;const _0x18f246=async()=>{const _0x57f925=_0xfc06ad;if(_0x41d2ca['BFxfy'](_0x1e9f0b,_0x54ef60))throw _0x41d2ca[_0x57f925(0x102)];const _0x4cd88b=sendMessagePool[_0x5078a8[_0x57f925(0x103)]];if(_0x4cd88b)return await _0x41d2ca['BjMRG'](sleep,0x1f4),_0x1e9f0b+=0x1f4,await _0x41d2ca[_0x57f925(0xfb)](_0x18f246);else return;};return await _0x41d2ca['hqFGj'](_0x18f246),new Promise((_0x51962c,_0x46c20a)=>{const _0x14eceb=_0xfc06ad,_0x500a2f={'XvAnc':function(_0x1819cd,_0x6f39c4){const _0xa18212=_0x14d4;return _0x41d2ca[_0xa18212(0x118)](_0x1819cd,_0x6f39c4);},'UgiOi':function(_0x35ce0a,_0x194ede){return _0x35ce0a(_0x194ede);}};let _0x33fcb4=![],_0x150b3d=null;const _0x4ff615=_0x41d2ca[_0x14eceb(0xfb)](randomUUID);sendSuccessCBMap[_0x4ff615]=_0x232828=>{const _0x1360bc=_0x14eceb;if(_0x500a2f[_0x1360bc(0xf6)](_0x232828[_0x1360bc(0x105)],_0x150b3d?.[_0x1360bc(0x105)])){if(_0x500a2f[_0x1360bc(0xf6)](_0x232828[_0x1360bc(0xe5)],0x2))return delete sendSuccessCBMap[_0x4ff615],_0x33fcb4=!![],_0x500a2f[_0x1360bc(0x123)](_0x51962c,_0x232828),!![];return![];}return![];},sendMessagePool[_0x52481b]=async _0x203689=>{delete sendMessagePool[_0x52481b],_0x150b3d=_0x203689;},_0x41d2ca[_0x14eceb(0xee)](setTimeout,()=>{const _0x26fbf5=_0x14eceb;if(_0x33fcb4)return;delete sendMessagePool[_0x52481b],delete sendSuccessCBMap[_0x4ff615],_0x41d2ca[_0x26fbf5(0x109)](_0x46c20a,_0x26fbf5(0x106));},_0x54ef60);const _0x2dcf6e=napCatCore[_0x14eceb(0xf9)][_0x14eceb(0xf0)]()['sendMsg']('0',_0x5078a8,_0x5df708,new Map());});}static async[_0xc3eefe(0x10e)](_0x3eb0e2,_0x5b8943,_0x5c4198){const _0x6bff6=_0xc3eefe;return napCatCore['session'][_0x6bff6(0xf0)]()[_0x6bff6(0x10e)](_0x5c4198,_0x3eb0e2,[_0x5b8943],new Map());}static async[_0xc3eefe(0xec)](_0x3a943b,_0x3e9635,_0x47429c){const _0x58e061=_0xc3eefe,_0x2abc96={'YVwww':function(_0x70b1b7,_0x17f913){return _0x70b1b7!=_0x17f913;},'TqdVk':'com.tencent.multimsg','DfeFH':function(_0x37f817,_0x34af0a){return _0x37f817==_0x34af0a;},'IffLT':function(_0x11cdc1,_0x224b8e){return _0x11cdc1(_0x224b8e);},'USzOM':_0x58e061(0x11b),'EOpaJ':function(_0x1d601c){return _0x1d601c();},'uuwof':function(_0x1cf9f6,_0x89bd92,_0x34397a){return _0x1cf9f6(_0x89bd92,_0x34397a);}},_0x524d8b=_0x47429c[_0x58e061(0x11f)](_0x3f42ee=>{const _0x5efd32=_0x58e061;return{'msgId':_0x3f42ee,'senderShowName':selfInfo[_0x5efd32(0x112)]};});return new Promise((_0x3ca129,_0x4202f3)=>{const _0x1508ab=_0x58e061,_0x38ddef={'aDNWX':function(_0x370016,_0x3caefa){const _0x5d3339=_0x14d4;return _0x2abc96[_0x5d3339(0xf7)](_0x370016,_0x3caefa);},'ndqYs':_0x2abc96[_0x1508ab(0x10d)],'msdJM':function(_0x16977c,_0x2c82f3){const _0x4832a0=_0x1508ab;return _0x2abc96[_0x4832a0(0x11d)](_0x16977c,_0x2c82f3);},'ABfdI':function(_0x2ac73a,_0x468ecb){const _0x2154c4=_0x1508ab;return _0x2abc96[_0x2154c4(0x125)](_0x2ac73a,_0x468ecb);},'KJLBI':_0x2abc96['USzOM']};let _0x16ef41=![];const _0x4c192f=_0x254844=>{const _0x57e43b=_0x1508ab,_0x278d55=_0x254844['elements']['find'](_0x59df1c=>_0x59df1c[_0x57e43b(0xf3)]);if(!_0x278d55)return;const _0x44cbf6=JSON[_0x57e43b(0xe3)](_0x278d55['arkElement']['bytesData']);if(_0x38ddef['aDNWX'](_0x44cbf6[_0x57e43b(0x122)],_0x38ddef['ndqYs']))return;_0x38ddef[_0x57e43b(0xdd)](_0x254844[_0x57e43b(0x103)],_0x3e9635[_0x57e43b(0x103)])&&_0x254844['senderUid']==selfInfo[_0x57e43b(0xf1)]&&(_0x16ef41=!![],_0x38ddef['ABfdI'](_0x3ca129,_0x254844));};sentMsgTasks[_0x1508ab(0x107)](_0x2abc96[_0x1508ab(0x10b)](randomUUID),_0x4c192f),_0x2abc96[_0x1508ab(0xf2)](setTimeout,()=>{const _0x2ede83=_0x1508ab;!_0x16ef41&&_0x38ddef[_0x2ede83(0x110)](_0x4202f3,_0x38ddef[_0x2ede83(0xe7)]);},0x1388),napCatCore[_0x1508ab(0xf9)][_0x1508ab(0xf0)]()[_0x1508ab(0x119)](_0x524d8b,_0x3a943b,_0x3e9635,[],new Map());});}}