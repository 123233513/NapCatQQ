const _0xa5566e=_0x2c31;(function(_0x48487b,_0x1ebd34){const _0xf5929e=_0x2c31,_0x14a2b7=_0x48487b();while(!![]){try{const _0x168507=-parseInt(_0xf5929e(0x11e))/0x1+-parseInt(_0xf5929e(0x11a))/0x2*(-parseInt(_0xf5929e(0x118))/0x3)+parseInt(_0xf5929e(0x119))/0x4*(parseInt(_0xf5929e(0x151))/0x5)+parseInt(_0xf5929e(0x138))/0x6+-parseInt(_0xf5929e(0x152))/0x7*(parseInt(_0xf5929e(0x144))/0x8)+-parseInt(_0xf5929e(0x15a))/0x9+-parseInt(_0xf5929e(0x11f))/0xa*(-parseInt(_0xf5929e(0x116))/0xb);if(_0x168507===_0x1ebd34)break;else _0x14a2b7['push'](_0x14a2b7['shift']());}catch(_0x1af08d){_0x14a2b7['push'](_0x14a2b7['shift']());}}}(_0x2f8c,0xcd0b2));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';function _0x2f8c(){const _0x2d2b10=['2HfTrSv','senderUid','uid','catch','1091058MVQKfV','2180EIxbXt','SzrzD','recallMsg','onMsgInfoListUpdate','setMsgEmojiLikes','fetchRecentContact','kELne','SpHZa','arkElement','parse','LKNnT','VosTp','then','sendMsg','发送超时','lZiQB','nick','activateChatAndGetHistory','forwardMsg','edysW','set','getMsgsIncludeSelf','yFBRC','bPBsw','getMsgService','7972644AVtTtj','getMsgsByMsgId','FtiiX','SzRUz','RUqsF','item','session','setMsgRead','find','XaBhl','onLoginSuccess','onAddSendMsg','40ygsfKq','转发消息超时','getGroupFileList','peerUid','onGroupFileInfoUpdate','CbfYs','elements','jpOXm','WWQXl','tWGbD','getMultiMsg','msgId','nTQJd','2917435PKxCuZ','1791517wFWFNN','YyoHh','com.tencent.multimsg','length','delete','toString','otWTV','addListener','3903453JZfoUA','setEmojiLike','getMsgsBySeqAndCount','RLMhE','multiForwardMsgWithComment','sendStatus','85052dximfg','forEach','139353myybXe','4twYzQS'];_0x2f8c=function(){return _0x2d2b10;};return _0x2f8c();}import{randomUUID}from'crypto';function _0x2c31(_0x4b04b2,_0x26f063){const _0x2f8c01=_0x2f8c();return _0x2c31=function(_0x2c310a,_0x3b946e){_0x2c310a=_0x2c310a-0x115;let _0x28bf25=_0x2f8c01[_0x2c310a];return _0x28bf25;},_0x2c31(_0x4b04b2,_0x26f063);}const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0xa5566e(0x148)]=_0x42fdf2=>{const _0x2b0f07={'TlLdm':function(_0xc07ccf,_0x9bcca7){return _0xc07ccf(_0x9bcca7);}};for(const [_0x28af08,_0x1cc8c6]of GroupFileInfoUpdateTasks){_0x2b0f07['TlLdm'](_0x1cc8c6,_0x42fdf2),GroupFileInfoUpdateTasks['delete'](_0x28af08);}},msgListener[_0xa5566e(0x143)]=_0x220059=>{const _0xd89ee6=_0xa5566e,_0x326a91={'lZiQB':function(_0x1e39c1,_0x59f1de){return _0x1e39c1(_0x59f1de);},'SpHZa':function(_0x366f38,_0x29bd6a){return _0x366f38 instanceof _0x29bd6a;}};for(const [_0x53858f,_0x147355]of sentMsgTasks){_0x326a91[_0xd89ee6(0x12e)](_0x147355,_0x220059),sentMsgTasks[_0xd89ee6(0x156)](_0x53858f);}if(sendMessagePool[_0x220059[_0xd89ee6(0x147)]]){const _0x923c7e=sendMessagePool[_0x220059[_0xd89ee6(0x147)]]?.(_0x220059);_0x326a91[_0xd89ee6(0x126)](_0x923c7e,Promise)&&_0x923c7e[_0xd89ee6(0x12b)]()[_0xd89ee6(0x11d)](logError);}},msgListener[_0xa5566e(0x122)]=_0xd67313=>{const _0x567c5e=_0xa5566e,_0x46f5b1={'YyoHh':function(_0x40849d,_0x213b30){return _0x40849d instanceof _0x213b30;}};_0xd67313[_0x567c5e(0x117)](_0x3ef707=>{const _0x5a1e69=_0x567c5e,_0x5303bd={'fDryZ':function(_0x58e66b,_0x75fe2b){return _0x58e66b(_0x75fe2b);},'VosTp':function(_0xa85732,_0x1c9eae){const _0x2627d0=_0x2c31;return _0x46f5b1[_0x2627d0(0x153)](_0xa85732,_0x1c9eae);}};new Promise((_0x55ffd0,_0x13ccfa)=>{const _0x5db503=_0x2c31;for(const _0x4a89b8 in sendSuccessCBMap){const _0x435c10=sendSuccessCBMap[_0x4a89b8],_0x367434=_0x5303bd['fDryZ'](_0x435c10,_0x3ef707),_0x2b9a54=_0x2f1c8a=>{_0x2f1c8a&&delete sendSuccessCBMap[_0x4a89b8];};_0x5303bd[_0x5db503(0x12a)](_0x367434,Promise)?_0x367434[_0x5db503(0x12b)](_0x2b9a54):_0x2b9a54(_0x367434);}})[_0x5a1e69(0x12b)]()[_0x5a1e69(0x11d)](log);});},setTimeout(()=>{const _0x3d9eec=_0xa5566e;napCatCore[_0x3d9eec(0x142)](()=>{const _0x1fda60=_0x3d9eec;napCatCore[_0x1fda60(0x159)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0xa5566e(0x15b)](_0x3a4013,_0x2ea49c,_0xdb323,_0x27441f=!![]){const _0x792580=_0xa5566e,_0x362184={'SzrzD':function(_0x233ef5,_0x8892de){return _0x233ef5>_0x8892de;}};return _0xdb323=_0xdb323[_0x792580(0x157)](),napCatCore['session'][_0x792580(0x137)]()[_0x792580(0x123)](_0x3a4013,_0x2ea49c,_0xdb323,_0x362184[_0x792580(0x120)](_0xdb323[_0x792580(0x155)],0x3)?'2':'1',_0x27441f);}static async[_0xa5566e(0x14e)](_0x534e95,_0x1112f4,_0x247d31){const _0x2f8540=_0xa5566e;return napCatCore[_0x2f8540(0x13e)][_0x2f8540(0x137)]()[_0x2f8540(0x14e)](_0x534e95,_0x1112f4,_0x247d31);}static async[_0xa5566e(0x139)](_0x405910,_0x18efef){const _0xfdb831=_0xa5566e;return await napCatCore['session'][_0xfdb831(0x137)]()['getMsgsByMsgId'](_0x405910,_0x18efef);}static async['getMsgsBySeqAndCount'](_0x932fbf,_0x5cd5d3,_0x404578,_0x3e959d,_0x149b23){const _0x1cb096=_0xa5566e;return await napCatCore[_0x1cb096(0x13e)][_0x1cb096(0x137)]()[_0x1cb096(0x15c)](_0x932fbf,_0x5cd5d3,_0x404578,_0x3e959d,_0x149b23);}static async['activateChat'](_0x1531bd){}static async[_0xa5566e(0x130)](_0x1ae517){}static async[_0xa5566e(0x13f)](_0x379964){const _0x3eb1e0=_0xa5566e;return napCatCore[_0x3eb1e0(0x13e)]['getMsgService']()[_0x3eb1e0(0x13f)](_0x379964);}static async['getGroupFileList'](_0x4c5b13,_0x327940){const _0x244912={'FVqAj':function(_0x55039e,_0x224a52,_0x51b010){return _0x55039e(_0x224a52,_0x51b010);}};return new Promise(async(_0x5df704,_0x443fa6)=>{const _0x5394e4=_0x2c31,_0x3c5afb={'kFjOi':function(_0x3451e8,_0x356e6e){return _0x3451e8(_0x356e6e);},'SzRUz':'获取群文件列表超时'};let _0x13e765=![];_0x244912['FVqAj'](setTimeout,()=>{const _0x3c803f=_0x2c31;!_0x13e765&&_0x3c5afb['kFjOi'](_0x443fa6,_0x3c5afb[_0x3c803f(0x13b)]);},0x1388);const _0x3060b5=_0x57d2e7=>{const _0x210207=_0x2c31;_0x13e765=!![],_0x5df704(_0x57d2e7[_0x210207(0x13d)]);};GroupFileInfoUpdateTasks[_0x5394e4(0x133)](randomUUID(),_0x3060b5),await napCatCore[_0x5394e4(0x13e)]['getRichMediaService']()[_0x5394e4(0x146)](_0x4c5b13,_0x327940);});}static async['getMsgHistory'](_0x154486,_0x17018a,_0x55d8cc){const _0x27afc6=_0xa5566e;return napCatCore[_0x27afc6(0x13e)]['getMsgService']()[_0x27afc6(0x134)](_0x154486,_0x17018a,_0x55d8cc,!![]);}static async[_0xa5566e(0x124)](){}static async['recallMsg'](_0x4a191a,_0x2e7428){const _0x57478c=_0xa5566e;await napCatCore[_0x57478c(0x13e)][_0x57478c(0x137)]()[_0x57478c(0x121)]({'chatType':_0x4a191a['chatType'],'peerUid':_0x4a191a[_0x57478c(0x147)]},_0x2e7428);}static async[_0xa5566e(0x12c)](_0x15d8e2,_0x45319c,_0x45aec5=!![],_0x16e627=0x2710){const _0x411d33=_0xa5566e,_0x1236a2={'jpOXm':function(_0x3a7936,_0x108afd){return _0x3a7936>_0x108afd;},'CbfYs':function(_0x1a67c2,_0x41aaae){return _0x1a67c2(_0x41aaae);},'FtiiX':function(_0x3adb05){return _0x3adb05();},'bPBsw':function(_0x182241,_0x23db78){return _0x182241===_0x23db78;},'yFBRC':'发送超时'},_0x76787=_0x15d8e2[_0x411d33(0x147)];let _0x27ed44=0x0;const _0x50d1ab=async()=>{const _0x11fcb0=_0x411d33;if(_0x1236a2[_0x11fcb0(0x14b)](_0x27ed44,_0x16e627))throw _0x11fcb0(0x12d);const _0xd6cfd5=sendMessagePool[_0x15d8e2[_0x11fcb0(0x147)]];if(_0xd6cfd5)return await _0x1236a2[_0x11fcb0(0x149)](sleep,0x1f4),_0x27ed44+=0x1f4,await _0x1236a2['FtiiX'](_0x50d1ab);else return;};return await _0x1236a2[_0x411d33(0x13a)](_0x50d1ab),new Promise((_0x5ebedc,_0x5713da)=>{const _0x5227b5=_0x411d33,_0x43d428={'hcAYU':function(_0x36c62c,_0x5b866d){const _0x2f1ec3=_0x2c31;return _0x1236a2[_0x2f1ec3(0x136)](_0x36c62c,_0x5b866d);},'RLMhE':function(_0x49dffb,_0x3ad099){const _0x1739d1=_0x2c31;return _0x1236a2[_0x1739d1(0x149)](_0x49dffb,_0x3ad099);},'vxvNT':_0x1236a2[_0x5227b5(0x135)]};let _0x5a562b=![],_0x51ec4a=null;const _0x4c2353=randomUUID();sendSuccessCBMap[_0x4c2353]=_0x11cc1b=>{const _0x14815b=_0x5227b5;if(_0x43d428['hcAYU'](_0x11cc1b[_0x14815b(0x14f)],_0x51ec4a?.[_0x14815b(0x14f)])){if(_0x11cc1b[_0x14815b(0x115)]===0x2)return delete sendSuccessCBMap[_0x4c2353],_0x5a562b=!![],_0x5ebedc(_0x11cc1b),!![];return![];}return![];},sendMessagePool[_0x76787]=async _0x18505d=>{delete sendMessagePool[_0x76787],_0x51ec4a=_0x18505d;},setTimeout(()=>{const _0x27c5f4=_0x5227b5;if(_0x5a562b)return;delete sendMessagePool[_0x76787],delete sendSuccessCBMap[_0x4c2353],_0x43d428[_0x27c5f4(0x15d)](_0x5713da,_0x43d428['vxvNT']);},_0x16e627);const _0x15dee1=napCatCore[_0x5227b5(0x13e)][_0x5227b5(0x137)]()['sendMsg']('0',_0x15d8e2,_0x45319c,new Map());});}static async[_0xa5566e(0x131)](_0x119a95,_0x3611c8,_0x36a2d8){const _0x56dd3e=_0xa5566e;return napCatCore[_0x56dd3e(0x13e)][_0x56dd3e(0x137)]()[_0x56dd3e(0x131)](_0x36a2d8,_0x119a95,[_0x3611c8],new Map());}static async['multiForwardMsg'](_0x2d62e2,_0x5b2e21,_0x30d98d){const _0xbc11a8=_0xa5566e,_0x9d4ad5={'WWQXl':function(_0x5dbb08,_0x29c765){return _0x5dbb08(_0x29c765);},'nTQJd':function(_0x25142c,_0x30b4d2){return _0x25142c!=_0x30b4d2;},'kELne':_0xbc11a8(0x154),'MpfOd':function(_0x390a3a,_0x37f481){return _0x390a3a(_0x37f481);},'XaBhl':function(_0x49fda5,_0x32aff3,_0x472c06){return _0x49fda5(_0x32aff3,_0x472c06);}},_0x1a2c05=_0x30d98d['map'](_0x2589bc=>{const _0x1f5e9c=_0xbc11a8;return{'msgId':_0x2589bc,'senderShowName':selfInfo[_0x1f5e9c(0x12f)]};});return new Promise((_0x38bfcd,_0x5578ff)=>{const _0x383202=_0xbc11a8,_0x2c0c35={'RUqsF':function(_0x527405,_0x408c01){const _0x4eff47=_0x2c31;return _0x9d4ad5[_0x4eff47(0x150)](_0x527405,_0x408c01);},'LKNnT':_0x9d4ad5[_0x383202(0x125)],'tWGbD':function(_0x2f14ec,_0x3c62ae){return _0x2f14ec==_0x3c62ae;},'edysW':function(_0x67f7fd,_0xfbf240){return _0x67f7fd==_0xfbf240;},'otWTV':function(_0x5755d3,_0xef5ab7){return _0x9d4ad5['MpfOd'](_0x5755d3,_0xef5ab7);}};let _0x216f17=![];const _0x346303=_0x47cf3d=>{const _0x5cbffd=_0x383202,_0x2ff50b=_0x47cf3d[_0x5cbffd(0x14a)][_0x5cbffd(0x140)](_0x32b09d=>_0x32b09d['arkElement']);if(!_0x2ff50b)return;const _0x394a17=JSON[_0x5cbffd(0x128)](_0x2ff50b[_0x5cbffd(0x127)]['bytesData']);if(_0x2c0c35[_0x5cbffd(0x13c)](_0x394a17['app'],_0x2c0c35[_0x5cbffd(0x129)]))return;_0x2c0c35[_0x5cbffd(0x14d)](_0x47cf3d['peerUid'],_0x5b2e21['peerUid'])&&_0x2c0c35[_0x5cbffd(0x132)](_0x47cf3d[_0x5cbffd(0x11b)],selfInfo[_0x5cbffd(0x11c)])&&(_0x216f17=!![],_0x2c0c35[_0x5cbffd(0x158)](_0x38bfcd,_0x47cf3d));};sentMsgTasks[_0x383202(0x133)](randomUUID(),_0x346303),_0x9d4ad5[_0x383202(0x141)](setTimeout,()=>{const _0x2cd3ce=_0x383202;!_0x216f17&&_0x9d4ad5[_0x2cd3ce(0x14c)](_0x5578ff,_0x2cd3ce(0x145));},0x1388),napCatCore[_0x383202(0x13e)]['getMsgService']()[_0x383202(0x15e)](_0x1a2c05,_0x2d62e2,_0x5b2e21,[],new Map());});}}