const _0x48d412=_0x14da;(function(_0x44b294,_0x52ccc9){const _0x37b644=_0x14da,_0xd409f9=_0x44b294();while(!![]){try{const _0xf985a7=parseInt(_0x37b644(0x1d4))/0x1*(-parseInt(_0x37b644(0x1c6))/0x2)+-parseInt(_0x37b644(0x1d9))/0x3+parseInt(_0x37b644(0x1d2))/0x4*(parseInt(_0x37b644(0x1c9))/0x5)+parseInt(_0x37b644(0x1be))/0x6*(parseInt(_0x37b644(0x1c5))/0x7)+parseInt(_0x37b644(0x1c8))/0x8*(parseInt(_0x37b644(0x1b7))/0x9)+-parseInt(_0x37b644(0x1b6))/0xa*(parseInt(_0x37b644(0x1e1))/0xb)+-parseInt(_0x37b644(0x1e3))/0xc*(parseInt(_0x37b644(0x1f1))/0xd);if(_0xf985a7===_0x52ccc9)break;else _0xd409f9['push'](_0xd409f9['shift']());}catch(_0xd3fd17){_0xd409f9['push'](_0xd409f9['shift']());}}}(_0x22c0,0xa5599));function _0x14da(_0xa1556d,_0x3c539d){const _0x22c09b=_0x22c0();return _0x14da=function(_0x14daaa,_0x5c33d9){_0x14daaa=_0x14daaa-0x1b1;let _0x45e25e=_0x22c09b[_0x14daaa];return _0x45e25e;},_0x14da(_0xa1556d,_0x3c539d);}import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';function _0x22c0(){const _0x2978be=['fetchRecentContact','length','getMsgHistory','iWhjY','bytesData','94731vfmVGf','转发消息超时','senderUid','setEmojiLike','activateChat','getMsgsIncludeSelf','rUrSm','190ZdcbWH','6759QYxUEF','peerUid','发送超时','map','getMsgService','AeJcG','TFDuD','60ESXJkZ','ChieU','opkhY','iTKiQ','setMsgRead','addListener','chatType','319837EFZRZY','6dMDMEX','WdxQe','10232ygSxkg','66075DyXVot','getMultiMsg','msgId','find','catch','session','onMsgInfoListUpdate','arkElement','parse','200PUGlzp','forwardMsg','36716mrSZot','then','forEach','YhuUD','onLoginSuccess','2194608QPsteX','sendStatus','qDdMx','sendMsg','onAddSendMsg','multiForwardMsg','multiForwardMsgWithComment','bQUia','41107MjOlQj','UpAgA','804KqxkrK','set','uid','delete','rziFY','setMsgEmojiLikes','elements','getMsgsByMsgId','getMsgsBySeqAndCount'];_0x22c0=function(){return _0x2978be;};return _0x22c0();}import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x48d412(0x1dd)]=_0x4389f3=>{const _0x2f2f87=_0x48d412,_0x4ea5d3={'iWhjY':function(_0x26cb43,_0x5f2d8f){return _0x26cb43(_0x5f2d8f);},'rziFY':function(_0x32ce53,_0x18187e){return _0x32ce53 instanceof _0x18187e;}};for(const [_0x27e20d,_0x46caae]of sentMsgTasks){_0x4ea5d3[_0x2f2f87(0x1ef)](_0x46caae,_0x4389f3),sentMsgTasks[_0x2f2f87(0x1e6)](_0x27e20d);}if(sendMessagePool[_0x4389f3[_0x2f2f87(0x1b8)]]){const _0x1df0b1=sendMessagePool[_0x4389f3['peerUid']]?.(_0x4389f3);_0x4ea5d3[_0x2f2f87(0x1e7)](_0x1df0b1,Promise)&&_0x1df0b1[_0x2f2f87(0x1d5)]()['catch'](logError);}},msgListener[_0x48d412(0x1cf)]=_0x53a094=>{const _0x2a22e7=_0x48d412,_0x61076b={'YhuUD':function(_0x353f3f,_0x3b4471){return _0x353f3f(_0x3b4471);}};_0x53a094[_0x2a22e7(0x1d6)](_0x43457f=>{const _0x17d5ca=_0x2a22e7,_0x21d433={'rUrSm':function(_0x253102,_0x1cba8d){const _0x2f18e0=_0x14da;return _0x61076b[_0x2f18e0(0x1d7)](_0x253102,_0x1cba8d);}};new Promise((_0x3070d2,_0x572b6b)=>{const _0xddeaef=_0x14da;for(const _0x30f754 in sendSuccessCBMap){const _0xdca1b5=sendSuccessCBMap[_0x30f754],_0x40159f=_0x21d433[_0xddeaef(0x1b5)](_0xdca1b5,_0x43457f),_0x106ce9=_0x1c119c=>{_0x1c119c&&delete sendSuccessCBMap[_0x30f754];};_0x40159f instanceof Promise?_0x40159f[_0xddeaef(0x1d5)](_0x106ce9):_0x106ce9(_0x40159f);}})[_0x17d5ca(0x1d5)]()[_0x17d5ca(0x1cd)](log);});},setTimeout(()=>{const _0x3d9cee=_0x48d412;napCatCore[_0x3d9cee(0x1d8)](()=>{const _0x1d1bf7=_0x3d9cee;napCatCore[_0x1d1bf7(0x1c3)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x48d412(0x1b2)](_0x24f35b,_0x46e2dc,_0xa9f5a2,_0x51c995=!![]){const _0x52a433=_0x48d412;return napCatCore[_0x52a433(0x1ce)][_0x52a433(0x1bb)]()[_0x52a433(0x1e8)](_0x24f35b,_0x46e2dc,_0xa9f5a2,_0xa9f5a2[_0x52a433(0x1ed)]>0x3?'2':'1',_0x51c995);}static async[_0x48d412(0x1ca)](_0x3830a3,_0x240d23,_0xb57837){const _0x21637d=_0x48d412;return napCatCore['session'][_0x21637d(0x1bb)]()[_0x21637d(0x1ca)](_0x3830a3,_0x240d23,_0xb57837);}static async[_0x48d412(0x1ea)](_0x2871cb,_0x398a28){const _0x1c963d=_0x48d412;return await napCatCore[_0x1c963d(0x1ce)]['getMsgService']()[_0x1c963d(0x1ea)](_0x2871cb,_0x398a28);}static async[_0x48d412(0x1eb)](_0x192d4e,_0x13a81f,_0x484e41,_0x207169,_0x4999b3){const _0x14cc46=_0x48d412;return await napCatCore[_0x14cc46(0x1ce)][_0x14cc46(0x1bb)]()[_0x14cc46(0x1eb)](_0x192d4e,_0x13a81f,_0x484e41,_0x207169,_0x4999b3);}static async[_0x48d412(0x1b3)](_0x2ced4e){}static async['activateChatAndGetHistory'](_0x150099){}static async[_0x48d412(0x1c2)](_0x5db7e7){const _0xf23243=_0x48d412;return napCatCore['session']['getMsgService']()['setMsgRead'](_0x5db7e7['chatType'],_0x5db7e7[_0xf23243(0x1b8)],_0x5db7e7['guildId']);}static async[_0x48d412(0x1ee)](_0xebebb0,_0x44aa97,_0x624e00){const _0x20d5d6=_0x48d412;return napCatCore[_0x20d5d6(0x1ce)]['getMsgService']()[_0x20d5d6(0x1b4)](_0xebebb0,_0x44aa97,_0x624e00,!![]);}static async[_0x48d412(0x1ec)](){}static async['recallMsg'](_0x5df4e3,_0xe8f1fe){const _0x1f73fe=_0x48d412;await napCatCore[_0x1f73fe(0x1ce)][_0x1f73fe(0x1bb)]()['recallMsg']({'chatType':_0x5df4e3[_0x1f73fe(0x1c4)],'peerUid':_0x5df4e3[_0x1f73fe(0x1b8)]},_0xe8f1fe);}static async[_0x48d412(0x1dc)](_0x134b3a,_0x164035,_0x2c4d80=!![],_0x19d0ff=0x2710){const _0x40ecc6=_0x48d412,_0x2e7272={'ChieU':function(_0x225bd4,_0x32d176){return _0x225bd4>_0x32d176;},'opkhY':_0x40ecc6(0x1b9),'bQUia':function(_0x486e44,_0x56281c){return _0x486e44(_0x56281c);},'fIGyv':function(_0x13bd04,_0x5655dd){return _0x13bd04===_0x5655dd;},'iTKiQ':function(_0x40a7a7){return _0x40a7a7();},'TFDuD':function(_0x540f2f,_0x26c649,_0x2ed191){return _0x540f2f(_0x26c649,_0x2ed191);},'qDdMx':function(_0x42214b){return _0x42214b();}},_0x6c72d5=_0x134b3a[_0x40ecc6(0x1b8)];let _0x2aab4e=0x0;const _0x11fef0=async()=>{const _0x4f471c=_0x40ecc6;if(_0x2e7272[_0x4f471c(0x1bf)](_0x2aab4e,_0x19d0ff))throw _0x2e7272['opkhY'];const _0x3faf64=sendMessagePool[_0x134b3a[_0x4f471c(0x1b8)]];if(_0x3faf64)return await _0x2e7272[_0x4f471c(0x1e0)](sleep,0x1f4),_0x2aab4e+=0x1f4,await _0x11fef0();else return;};return await _0x2e7272[_0x40ecc6(0x1db)](_0x11fef0),new Promise((_0x1eb267,_0x16de7b)=>{const _0x12d090=_0x40ecc6,_0xdedf58={'AeJcG':function(_0x1de5c4,_0x45ac19){const _0x17bdcf=_0x14da;return _0x2e7272[_0x17bdcf(0x1e0)](_0x1de5c4,_0x45ac19);},'ZaSQU':_0x2e7272[_0x12d090(0x1c0)]};let _0x222c1d=![],_0x766724=null;const _0x3d83da=_0x2e7272[_0x12d090(0x1c1)](randomUUID);sendSuccessCBMap[_0x3d83da]=_0x1aea57=>{const _0x5f1559=_0x12d090;if(_0x2e7272['fIGyv'](_0x1aea57['msgId'],_0x766724?.[_0x5f1559(0x1cb)])){if(_0x1aea57[_0x5f1559(0x1da)]===0x2)return delete sendSuccessCBMap[_0x3d83da],_0x222c1d=!![],_0x2e7272[_0x5f1559(0x1e0)](_0x1eb267,_0x1aea57),!![];return![];}return![];},sendMessagePool[_0x6c72d5]=async _0x95538d=>{delete sendMessagePool[_0x6c72d5],_0x766724=_0x95538d;},_0x2e7272[_0x12d090(0x1bd)](setTimeout,()=>{const _0x420149=_0x12d090;if(_0x222c1d)return;delete sendMessagePool[_0x6c72d5],delete sendSuccessCBMap[_0x3d83da],_0xdedf58[_0x420149(0x1bc)](_0x16de7b,_0xdedf58['ZaSQU']);},_0x19d0ff);const _0x6d6320=napCatCore['session'][_0x12d090(0x1bb)]()[_0x12d090(0x1dc)]('0',_0x134b3a,_0x164035,new Map());});}static async[_0x48d412(0x1d3)](_0xc7ef68,_0x2be0be,_0x497180){}static async[_0x48d412(0x1de)](_0x15bbb9,_0x1cfd14,_0x47178e){const _0x53c7f5=_0x48d412,_0x474146={'WdxQe':function(_0x1bed25,_0x1619bb){return _0x1bed25(_0x1619bb);},'ygEPC':function(_0xd77703,_0x2edb12){return _0xd77703==_0x2edb12;}},_0x1be793=_0x47178e[_0x53c7f5(0x1ba)](_0x29ce4c=>{return{'msgId':_0x29ce4c,'senderShowName':selfInfo['nick']};});return new Promise((_0x2def05,_0x47504f)=>{const _0x50d77a=_0x53c7f5,_0x8913dc={'UpAgA':function(_0x293161,_0x545c4c){return _0x293161!=_0x545c4c;},'NtXVW':function(_0x38cebd,_0x66483){return _0x474146['ygEPC'](_0x38cebd,_0x66483);},'UFBFZ':function(_0x31ecdd,_0x3d1417){const _0x35de19=_0x14da;return _0x474146[_0x35de19(0x1c7)](_0x31ecdd,_0x3d1417);}};let _0x27dcaa=![];const _0x2877e6=_0x2758bc=>{const _0x4e1349=_0x14da,_0x3b3eed=_0x2758bc[_0x4e1349(0x1e9)][_0x4e1349(0x1cc)](_0x1f02a7=>_0x1f02a7['arkElement']);if(!_0x3b3eed)return;const _0x568610=JSON[_0x4e1349(0x1d1)](_0x3b3eed[_0x4e1349(0x1d0)][_0x4e1349(0x1f0)]);if(_0x8913dc[_0x4e1349(0x1e2)](_0x568610['app'],'com.tencent.multimsg'))return;_0x2758bc['peerUid']==_0x1cfd14[_0x4e1349(0x1b8)]&&_0x8913dc['NtXVW'](_0x2758bc[_0x4e1349(0x1b1)],selfInfo[_0x4e1349(0x1e5)])&&(_0x27dcaa=!![],_0x8913dc['UFBFZ'](_0x2def05,_0x2758bc));};sentMsgTasks[_0x50d77a(0x1e4)](randomUUID(),_0x2877e6),setTimeout(()=>{const _0x27622f=_0x50d77a;!_0x27dcaa&&_0x474146[_0x27622f(0x1c7)](_0x47504f,_0x27622f(0x1f2));},0x1388),napCatCore[_0x50d77a(0x1ce)][_0x50d77a(0x1bb)]()[_0x50d77a(0x1df)](_0x1be793,_0x15bbb9,_0x1cfd14,[],new Map());});}}