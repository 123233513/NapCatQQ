const _0x5218aa=_0x1930;(function(_0x752c1c,_0x29b3a3){const _0x3b6870=_0x1930,_0x5e0a87=_0x752c1c();while(!![]){try{const _0x34612d=-parseInt(_0x3b6870(0xd8))/0x1*(-parseInt(_0x3b6870(0xb7))/0x2)+-parseInt(_0x3b6870(0xb5))/0x3*(-parseInt(_0x3b6870(0xc8))/0x4)+-parseInt(_0x3b6870(0xe3))/0x5*(parseInt(_0x3b6870(0xd1))/0x6)+parseInt(_0x3b6870(0xbb))/0x7*(-parseInt(_0x3b6870(0xbf))/0x8)+parseInt(_0x3b6870(0xdb))/0x9+-parseInt(_0x3b6870(0xc6))/0xa+-parseInt(_0x3b6870(0xdd))/0xb;if(_0x34612d===_0x29b3a3)break;else _0x5e0a87['push'](_0x5e0a87['shift']());}catch(_0x5a2cd7){_0x5e0a87['push'](_0x5e0a87['shift']());}}}(_0x54d7,0xd6eb3));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();function _0x1930(_0x7f7bf0,_0x49bf5d){const _0x54d77d=_0x54d7();return _0x1930=function(_0x19303f,_0x29a47a){_0x19303f=_0x19303f-0x9f;let _0x5c87df=_0x54d77d[_0x19303f];return _0x5c87df;},_0x1930(_0x7f7bf0,_0x49bf5d);}msgListener[_0x5218aa(0xa6)]=_0x274874=>{const _0x47c0a3=_0x5218aa,_0x2c3762={'MuCtJ':function(_0x37ed15,_0x429030){return _0x37ed15(_0x429030);}};for(const [_0x2d2b8b,_0x1ce0c6]of sentMsgTasks){_0x2c3762['MuCtJ'](_0x1ce0c6,_0x274874),sentMsgTasks[_0x47c0a3(0xcc)](_0x2d2b8b);}if(sendMessagePool[_0x274874['peerUid']]){const _0x3c40a2=sendMessagePool[_0x274874[_0x47c0a3(0xa0)]]?.(_0x274874);_0x3c40a2 instanceof Promise&&_0x3c40a2['then']()[_0x47c0a3(0xaa)](logError);}},msgListener['onMsgInfoListUpdate']=_0x8447d0=>{const _0x1084b2={'VTgNC':function(_0x522db6,_0x505eed){return _0x522db6(_0x505eed);},'UyQAU':function(_0x52a014,_0x1da1e2){return _0x52a014 instanceof _0x1da1e2;}};_0x8447d0['forEach'](_0x3de0d9=>{const _0x99d8d1=_0x1930,_0x49a802={'aJXiV':function(_0x38db7e,_0x12a799){const _0x465a69=_0x1930;return _0x1084b2[_0x465a69(0xb0)](_0x38db7e,_0x12a799);},'AawZF':function(_0x4ea28d,_0x10a5ac){const _0x5e9a61=_0x1930;return _0x1084b2[_0x5e9a61(0xb2)](_0x4ea28d,_0x10a5ac);},'UwgdF':function(_0xf75b6e,_0x197a71){return _0xf75b6e(_0x197a71);}};new Promise((_0x54b8e8,_0x475d67)=>{const _0x294d3b=_0x1930;for(const _0x488eaa in sendSuccessCBMap){const _0x2b1bf4=sendSuccessCBMap[_0x488eaa],_0x4a5ac0=_0x49a802[_0x294d3b(0xd3)](_0x2b1bf4,_0x3de0d9),_0x3b0c79=_0x56ee83=>{_0x56ee83&&delete sendSuccessCBMap[_0x488eaa];};_0x49a802[_0x294d3b(0xd5)](_0x4a5ac0,Promise)?_0x4a5ac0[_0x294d3b(0xca)](_0x3b0c79):_0x49a802[_0x294d3b(0xcd)](_0x3b0c79,_0x4a5ac0);}})[_0x99d8d1(0xca)]()[_0x99d8d1(0xaa)](log);});},setTimeout(()=>{const _0x348347=_0x5218aa;napCatCore[_0x348347(0xb4)](()=>{const _0x4eae68=_0x348347;napCatCore[_0x4eae68(0xcf)](msgListener);});},0x64);function _0x54d7(){const _0x32ff3e=['getMsgsIncludeSelf','delete','UwgdF','map','addListener','elements','108qpktAA','forwardMsg','aJXiV','session','AawZF','com.tencent.multimsg','multiForwardMsgWithComment','950xZafyr','转发消息超时','getMsgsBySeqAndCount','9868032nCxWQg','YYCnT','2552418toduwl','uid','UqbVe','HTlnc','zBmqm','getMultiMsg','466145cceNxR','senderUid','peerUid','msgId','length','sendMsg','SACSe','parse','onAddSendMsg','getMsgsByMsgId','recallMsg','ATVzr','catch','toString','hWnZW','bEZPG','setMsgEmojiLikes','bytesData','VTgNC','syQsz','UyQAU','activateChat','onLoginSuccess','48KDVIsQ','getMsgHistory','2138yaVhCD','fetchRecentContact','nick','uYzjW','2562uirqwE','XPcuu','TuWsj','wCRhA','12024EZFvRV','app','setEmojiLike','setMsgRead','set','getMsgService','find','1850170grGoEM','rqvxV','353396HqFUTb','arkElement','then'];_0x54d7=function(){return _0x32ff3e;};return _0x54d7();}export class NTQQMsgApi{static async[_0x5218aa(0xc1)](_0x4a0637,_0x126894,_0x3ed108,_0x19451d=!![]){const _0x60d0b6=_0x5218aa,_0x1249ce={'wCRhA':function(_0x43296e,_0x54c97c){return _0x43296e>_0x54c97c;}};return _0x3ed108=_0x3ed108[_0x60d0b6(0xab)](),napCatCore['session'][_0x60d0b6(0xc4)]()[_0x60d0b6(0xae)](_0x4a0637,_0x126894,_0x3ed108,_0x1249ce[_0x60d0b6(0xbe)](_0x3ed108[_0x60d0b6(0xa2)],0x3)?'2':'1',_0x19451d);}static async['getMultiMsg'](_0xecc383,_0x2f9bbc,_0x484d4c){const _0xb54a6e=_0x5218aa;return napCatCore[_0xb54a6e(0xd4)][_0xb54a6e(0xc4)]()[_0xb54a6e(0xe2)](_0xecc383,_0x2f9bbc,_0x484d4c);}static async['getMsgsByMsgId'](_0x50a376,_0x384474){const _0x38fed1=_0x5218aa;return await napCatCore[_0x38fed1(0xd4)][_0x38fed1(0xc4)]()[_0x38fed1(0xa7)](_0x50a376,_0x384474);}static async[_0x5218aa(0xda)](_0x2387c7,_0x510045,_0x42c970,_0x58d507,_0x5e854c){const _0x1661b2=_0x5218aa;return await napCatCore['session']['getMsgService']()[_0x1661b2(0xda)](_0x2387c7,_0x510045,_0x42c970,_0x58d507,_0x5e854c);}static async[_0x5218aa(0xb3)](_0x4d51c3){}static async['activateChatAndGetHistory'](_0x43c702){}static async['setMsgRead'](_0x146e12){const _0x113160=_0x5218aa;return napCatCore[_0x113160(0xd4)][_0x113160(0xc4)]()[_0x113160(0xc2)](_0x146e12);}static async[_0x5218aa(0xb6)](_0x347096,_0x42263f,_0x4490f3){const _0x480a7f=_0x5218aa;return napCatCore['session'][_0x480a7f(0xc4)]()[_0x480a7f(0xcb)](_0x347096,_0x42263f,_0x4490f3,!![]);}static async[_0x5218aa(0xb8)](){}static async[_0x5218aa(0xa8)](_0x2701ae,_0x5bc60a){const _0x2bc529=_0x5218aa;await napCatCore['session'][_0x2bc529(0xc4)]()[_0x2bc529(0xa8)]({'chatType':_0x2701ae['chatType'],'peerUid':_0x2701ae[_0x2bc529(0xa0)]},_0x5bc60a);}static async[_0x5218aa(0xa3)](_0x4bde6a,_0x2d75e8,_0x3abc61=!![],_0x2a5aad=0x2710){const _0x2297f4=_0x5218aa,_0x2b6bdc={'XPcuu':'发送超时','bEZPG':function(_0x4cb061,_0x2a4288){return _0x4cb061(_0x2a4288);},'HTlnc':function(_0x2f831e){return _0x2f831e();},'TuWsj':function(_0x2edcb3,_0xe3f3ad){return _0x2edcb3===_0xe3f3ad;},'syQsz':function(_0x1d5354,_0x3711f0){return _0x1d5354===_0x3711f0;},'ALSqv':function(_0x47cc68,_0xb7cea3){return _0x47cc68(_0xb7cea3);},'SACSe':function(_0x3ae000,_0xe7d275,_0x19e44c){return _0x3ae000(_0xe7d275,_0x19e44c);},'hWnZW':function(_0x3a116e){return _0x3a116e();}},_0x58f5d7=_0x4bde6a[_0x2297f4(0xa0)];let _0x27088c=0x0;const _0x13ee6c=async()=>{const _0x449b36=_0x2297f4;if(_0x27088c>_0x2a5aad)throw _0x2b6bdc[_0x449b36(0xbc)];const _0x568391=sendMessagePool[_0x4bde6a['peerUid']];if(_0x568391)return await _0x2b6bdc[_0x449b36(0xad)](sleep,0x1f4),_0x27088c+=0x1f4,await _0x2b6bdc[_0x449b36(0xe0)](_0x13ee6c);else return;};return await _0x2b6bdc[_0x2297f4(0xac)](_0x13ee6c),new Promise((_0x391e53,_0x31a5ba)=>{const _0x996d42=_0x2297f4,_0x797d78={'uYzjW':function(_0x4277ed,_0x326652){return _0x2b6bdc['ALSqv'](_0x4277ed,_0x326652);},'YYCnT':_0x2b6bdc['XPcuu']};let _0x362b23=![],_0x4479fe=null;const _0x51add4=_0x2b6bdc[_0x996d42(0xe0)](randomUUID);sendSuccessCBMap[_0x51add4]=_0x1ba9dd=>{const _0x11c3d6=_0x996d42;if(_0x2b6bdc[_0x11c3d6(0xbd)](_0x1ba9dd['msgId'],_0x4479fe?.[_0x11c3d6(0xa1)])){if(_0x2b6bdc[_0x11c3d6(0xb1)](_0x1ba9dd['sendStatus'],0x2))return delete sendSuccessCBMap[_0x51add4],_0x362b23=!![],_0x391e53(_0x1ba9dd),!![];return![];}return![];},sendMessagePool[_0x58f5d7]=async _0x46a0e1=>{delete sendMessagePool[_0x58f5d7],_0x4479fe=_0x46a0e1;},_0x2b6bdc[_0x996d42(0xa4)](setTimeout,()=>{const _0x7c40f7=_0x996d42;if(_0x362b23)return;delete sendMessagePool[_0x58f5d7],delete sendSuccessCBMap[_0x51add4],_0x797d78[_0x7c40f7(0xba)](_0x31a5ba,_0x797d78[_0x7c40f7(0xdc)]);},_0x2a5aad);const _0x19848b=napCatCore[_0x996d42(0xd4)]['getMsgService']()[_0x996d42(0xa3)]('0',_0x4bde6a,_0x2d75e8,new Map());});}static async['forwardMsg'](_0x4b405c,_0x2a5a77,_0x362699){const _0x3cdb14=_0x5218aa;return napCatCore['session'][_0x3cdb14(0xc4)]()[_0x3cdb14(0xd2)](_0x362699,_0x4b405c,[_0x2a5a77],new Map());}static async['multiForwardMsg'](_0x3d0db3,_0x26c2a2,_0x3c32dc){const _0x403b80=_0x5218aa,_0x2d3747={'cNrjj':function(_0x112a84,_0x445d1f){return _0x112a84!=_0x445d1f;},'blAgk':_0x403b80(0xd6),'zBmqm':function(_0x5e2195,_0x3b6028){return _0x5e2195==_0x3b6028;},'sLKon':function(_0x2ac080,_0x3f9f62){return _0x2ac080(_0x3f9f62);},'UqbVe':function(_0x10c22f,_0x56eeac){return _0x10c22f(_0x56eeac);},'rqvxV':function(_0x2b5c36){return _0x2b5c36();}},_0x1870a1=_0x3c32dc[_0x403b80(0xce)](_0x37a5c5=>{const _0x1a78f1=_0x403b80;return{'msgId':_0x37a5c5,'senderShowName':selfInfo[_0x1a78f1(0xb9)]};});return new Promise((_0x81c88f,_0x4a91c2)=>{const _0x5be150=_0x403b80,_0x5529e5={'ATVzr':function(_0x4b0a94,_0x28ab60){const _0x10b6e9=_0x1930;return _0x2d3747[_0x10b6e9(0xdf)](_0x4b0a94,_0x28ab60);}};let _0x20a0db=![];const _0x545490=_0x13ae68=>{const _0x25853d=_0x1930,_0x5d3577=_0x13ae68[_0x25853d(0xd0)][_0x25853d(0xc5)](_0xe499ed=>_0xe499ed['arkElement']);if(!_0x5d3577)return;const _0x11f2c6=JSON[_0x25853d(0xa5)](_0x5d3577[_0x25853d(0xc9)][_0x25853d(0xaf)]);if(_0x2d3747['cNrjj'](_0x11f2c6[_0x25853d(0xc0)],_0x2d3747['blAgk']))return;_0x13ae68['peerUid']==_0x26c2a2['peerUid']&&_0x2d3747[_0x25853d(0xe1)](_0x13ae68[_0x25853d(0x9f)],selfInfo[_0x25853d(0xde)])&&(_0x20a0db=!![],_0x2d3747['sLKon'](_0x81c88f,_0x13ae68));};sentMsgTasks[_0x5be150(0xc3)](_0x2d3747[_0x5be150(0xc7)](randomUUID),_0x545490),setTimeout(()=>{const _0x1ca2ab=_0x5be150;!_0x20a0db&&_0x5529e5[_0x1ca2ab(0xa9)](_0x4a91c2,_0x1ca2ab(0xd9));},0x1388),napCatCore[_0x5be150(0xd4)]['getMsgService']()[_0x5be150(0xd7)](_0x1870a1,_0x3d0db3,_0x26c2a2,[],new Map());});}}