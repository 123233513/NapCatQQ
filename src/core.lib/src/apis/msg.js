const _0x1aee28=_0x39e2;(function(_0x31bb02,_0x1e1858){const _0x8cada5=_0x39e2,_0x203a69=_0x31bb02();while(!![]){try{const _0x4ddae9=parseInt(_0x8cada5(0x188))/0x1+parseInt(_0x8cada5(0x156))/0x2+parseInt(_0x8cada5(0x15b))/0x3+parseInt(_0x8cada5(0x18f))/0x4*(parseInt(_0x8cada5(0x16c))/0x5)+-parseInt(_0x8cada5(0x15e))/0x6*(-parseInt(_0x8cada5(0x172))/0x7)+-parseInt(_0x8cada5(0x17a))/0x8+-parseInt(_0x8cada5(0x179))/0x9*(parseInt(_0x8cada5(0x158))/0xa);if(_0x4ddae9===_0x1e1858)break;else _0x203a69['push'](_0x203a69['shift']());}catch(_0x5e38ab){_0x203a69['push'](_0x203a69['shift']());}}}(_0x3851,0x4d53b));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';function _0x39e2(_0x278f5a,_0x2c91e6){const _0x3851e8=_0x3851();return _0x39e2=function(_0x39e213,_0x2f28f9){_0x39e213=_0x39e213-0x154;let _0x22b600=_0x3851e8[_0x39e213];return _0x22b600;},_0x39e2(_0x278f5a,_0x2c91e6);}import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';function _0x3851(){const _0x28ee1b=['sendStatus','getMsgsByMsgId','getMsgsIncludeSelf','session','com.tencent.multimsg','16461ZhYjGL','2159904jECDbB','sendMsg','peerUid','onMsgInfoListUpdate','activateChat','chatType','parse','getMsgService','setMsgRead','length','转发消息超时','setMsgEmojiLikes','delete','onAddSendMsg','153378RTGyih','multiForwardMsgWithComment','recallMsg','QmwpO','bytesData','wzwTJ','mkxvM','12usNsJz','arkElement','set','elements','activateChatAndGetHistory','1208916aeNfqF','msgId','3620LYCWsF','senderUid','forEach','96021hOGFNW','发送超时','LMqvj','1416wHNHGK','addListener','qJNGl','getMsgsBySeqAndCount','toString','RuIhE','onLoginSuccess','fetchRecentContact','uid','lWGWZ','kXtXG','forwardMsg','then','LKOub','654430ApYSGH','swaWS','ASLtb','bUXbC','hcabX','nick','1967OzdmcD','multiForwardMsg'];_0x3851=function(){return _0x28ee1b;};return _0x3851();}import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x1aee28(0x187)]=_0x104976=>{const _0x31f338=_0x1aee28,_0x28a48f={'bUXbC':function(_0x48394d,_0x2e866a){return _0x48394d(_0x2e866a);}};for(const [_0x5b16dc,_0x217a79]of sentMsgTasks){_0x28a48f[_0x31f338(0x16f)](_0x217a79,_0x104976),sentMsgTasks[_0x31f338(0x186)](_0x5b16dc);}if(sendMessagePool[_0x104976[_0x31f338(0x17c)]]){const _0x336806=sendMessagePool[_0x104976[_0x31f338(0x17c)]]?.(_0x104976);_0x336806 instanceof Promise&&_0x336806['then']()['catch'](logError);}},msgListener[_0x1aee28(0x17d)]=_0x3b7b87=>{const _0x5f0bf7=_0x1aee28,_0x3e33f8={'wzwTJ':function(_0x2eea60,_0x1d3fad){return _0x2eea60 instanceof _0x1d3fad;},'XRfyy':function(_0x4950c9,_0x1e2faf){return _0x4950c9(_0x1e2faf);}};_0x3b7b87[_0x5f0bf7(0x15a)](_0x398c7f=>{const _0x59b25a=_0x5f0bf7;new Promise((_0x2aa7ce,_0x27dbd9)=>{const _0x45510d=_0x39e2;for(const _0x5a8758 in sendSuccessCBMap){const _0x7af85f=sendSuccessCBMap[_0x5a8758],_0x5e3f18=_0x7af85f(_0x398c7f),_0x48b365=_0x134eb3=>{_0x134eb3&&delete sendSuccessCBMap[_0x5a8758];};_0x3e33f8[_0x45510d(0x18d)](_0x5e3f18,Promise)?_0x5e3f18[_0x45510d(0x16a)](_0x48b365):_0x3e33f8['XRfyy'](_0x48b365,_0x5e3f18);}})[_0x59b25a(0x16a)]()['catch'](log);});},setTimeout(()=>{const _0xdf2fcb=_0x1aee28;napCatCore[_0xdf2fcb(0x164)](()=>{const _0xeab113=_0xdf2fcb;napCatCore[_0xeab113(0x15f)](msgListener);});},0x64);export class NTQQMsgApi{static async['setEmojiLike'](_0x1ca4cc,_0x1fdf4d,_0x36f615,_0x401888=!![]){const _0x2286a7=_0x1aee28;return _0x36f615=_0x36f615[_0x2286a7(0x162)](),napCatCore[_0x2286a7(0x177)][_0x2286a7(0x181)]()[_0x2286a7(0x185)](_0x1ca4cc,_0x1fdf4d,_0x36f615,_0x36f615[_0x2286a7(0x183)]>0x3?'2':'1',_0x401888);}static async['getMultiMsg'](_0x4c7fb9,_0x22f054,_0x1717b5){const _0x50909a=_0x1aee28;return napCatCore[_0x50909a(0x177)][_0x50909a(0x181)]()['getMultiMsg'](_0x4c7fb9,_0x22f054,_0x1717b5);}static async[_0x1aee28(0x175)](_0x23238b,_0x55636a){const _0x31e594=_0x1aee28;return await napCatCore[_0x31e594(0x177)]['getMsgService']()['getMsgsByMsgId'](_0x23238b,_0x55636a);}static async[_0x1aee28(0x161)](_0x258f2e,_0x3c5181,_0x5c5c4e,_0x3bc4c8,_0x1c2dc4){const _0x1089ad=_0x1aee28;return await napCatCore[_0x1089ad(0x177)][_0x1089ad(0x181)]()[_0x1089ad(0x161)](_0x258f2e,_0x3c5181,_0x5c5c4e,_0x3bc4c8,_0x1c2dc4);}static async[_0x1aee28(0x17e)](_0x45a2d8){}static async[_0x1aee28(0x155)](_0x4b04eb){}static async[_0x1aee28(0x182)](_0x3e06a8){const _0x2a138e=_0x1aee28;return napCatCore['session'][_0x2a138e(0x181)]()[_0x2a138e(0x182)](_0x3e06a8);}static async['getMsgHistory'](_0x104cde,_0x2bbcff,_0x49cb9d){const _0x5caa17=_0x1aee28;return napCatCore[_0x5caa17(0x177)]['getMsgService']()[_0x5caa17(0x176)](_0x104cde,_0x2bbcff,_0x49cb9d,!![]);}static async[_0x1aee28(0x165)](){}static async['recallMsg'](_0x3f4243,_0x49f056){const _0x392359=_0x1aee28;await napCatCore[_0x392359(0x177)][_0x392359(0x181)]()[_0x392359(0x18a)]({'chatType':_0x3f4243[_0x392359(0x17f)],'peerUid':_0x3f4243[_0x392359(0x17c)]},_0x49f056);}static async[_0x1aee28(0x17b)](_0x120256,_0x375e86,_0x2362b3=!![],_0x5bb03e=0x2710){const _0xd21176=_0x1aee28,_0x33e749={'LMqvj':function(_0x502a10,_0x3b27b2){return _0x502a10>_0x3b27b2;},'hcabX':function(_0x40ff2d){return _0x40ff2d();},'QmwpO':function(_0x398a35,_0x4ee1cb){return _0x398a35(_0x4ee1cb);},'YhLWJ':_0xd21176(0x15c),'hOhbf':function(_0x3e9f10,_0xa7d526,_0x4005c5){return _0x3e9f10(_0xa7d526,_0x4005c5);}},_0x2c9635=_0x120256[_0xd21176(0x17c)];let _0x36d6c5=0x0;const _0x46914b=async()=>{const _0x946393=_0xd21176;if(_0x33e749[_0x946393(0x15d)](_0x36d6c5,_0x5bb03e))throw _0x946393(0x15c);const _0x1360e8=sendMessagePool[_0x120256[_0x946393(0x17c)]];if(_0x1360e8)return await sleep(0x1f4),_0x36d6c5+=0x1f4,await _0x33e749[_0x946393(0x170)](_0x46914b);else return;};return await _0x33e749['hcabX'](_0x46914b),new Promise((_0x72e9d7,_0x68fe3)=>{const _0x207bb8=_0xd21176,_0x202769={'gYPNN':function(_0x391a91,_0x5809f8){return _0x391a91===_0x5809f8;},'LKOub':function(_0x28961c,_0x54ce67){const _0x151076=_0x39e2;return _0x33e749[_0x151076(0x18b)](_0x28961c,_0x54ce67);},'mkxvM':function(_0x266f09,_0x4b152a){return _0x266f09(_0x4b152a);},'swaWS':_0x33e749['YhLWJ']};let _0x2db53c=![],_0xafe78c=null;const _0x5e1572=_0x33e749[_0x207bb8(0x170)](randomUUID);sendSuccessCBMap[_0x5e1572]=_0xd6cd6f=>{const _0x2c5bf0=_0x207bb8;if(_0xd6cd6f[_0x2c5bf0(0x157)]===_0xafe78c?.[_0x2c5bf0(0x157)]){if(_0x202769['gYPNN'](_0xd6cd6f[_0x2c5bf0(0x174)],0x2))return delete sendSuccessCBMap[_0x5e1572],_0x2db53c=!![],_0x202769[_0x2c5bf0(0x16b)](_0x72e9d7,_0xd6cd6f),!![];return![];}return![];},sendMessagePool[_0x2c9635]=async _0x418b56=>{delete sendMessagePool[_0x2c9635],_0xafe78c=_0x418b56;},_0x33e749['hOhbf'](setTimeout,()=>{const _0xf6b29f=_0x207bb8;if(_0x2db53c)return;delete sendMessagePool[_0x2c9635],delete sendSuccessCBMap[_0x5e1572],_0x202769[_0xf6b29f(0x18e)](_0x68fe3,_0x202769[_0xf6b29f(0x16d)]);},_0x5bb03e);const _0x68d6aa=napCatCore['session']['getMsgService']()[_0x207bb8(0x17b)]('0',_0x120256,_0x375e86,new Map());});}static async['forwardMsg'](_0x23d62e,_0x1dbf4a,_0x2a2911){const _0x3e0022=_0x1aee28;return napCatCore[_0x3e0022(0x177)]['getMsgService']()[_0x3e0022(0x169)](_0x2a2911,_0x23d62e,[_0x1dbf4a],new Map());}static async[_0x1aee28(0x173)](_0x55ca41,_0x566446,_0x2c4420){const _0x55bbf6={'qJNGl':function(_0x26ccf1,_0x88d428){return _0x26ccf1==_0x88d428;},'lWGWZ':function(_0x220284,_0x1fa8bd){return _0x220284(_0x1fa8bd);},'kXtXG':function(_0x47de62,_0x30029f){return _0x47de62(_0x30029f);},'RuIhE':function(_0x4dc28e){return _0x4dc28e();}},_0x5c2a83=_0x2c4420['map'](_0x2d64c0=>{const _0x55628f=_0x39e2;return{'msgId':_0x2d64c0,'senderShowName':selfInfo[_0x55628f(0x171)]};});return new Promise((_0x1d1dde,_0x54ab2d)=>{const _0x1962f7=_0x39e2,_0x1b72b8={'ASLtb':function(_0x3c161b,_0x46202e){const _0x31aabf=_0x39e2;return _0x55bbf6[_0x31aabf(0x168)](_0x3c161b,_0x46202e);}};let _0x23c577=![];const _0x44cc27=_0x2ae18a=>{const _0x309009=_0x39e2,_0x2292be=_0x2ae18a[_0x309009(0x154)]['find'](_0x29f3ad=>_0x29f3ad[_0x309009(0x190)]);if(!_0x2292be)return;const _0x3a450d=JSON[_0x309009(0x180)](_0x2292be[_0x309009(0x190)][_0x309009(0x18c)]);if(_0x3a450d['app']!=_0x309009(0x178))return;_0x55bbf6[_0x309009(0x160)](_0x2ae18a[_0x309009(0x17c)],_0x566446[_0x309009(0x17c)])&&_0x2ae18a[_0x309009(0x159)]==selfInfo[_0x309009(0x166)]&&(_0x23c577=!![],_0x55bbf6[_0x309009(0x167)](_0x1d1dde,_0x2ae18a));};sentMsgTasks[_0x1962f7(0x191)](_0x55bbf6[_0x1962f7(0x163)](randomUUID),_0x44cc27),setTimeout(()=>{const _0x4b1a20=_0x1962f7;!_0x23c577&&_0x1b72b8[_0x4b1a20(0x16e)](_0x54ab2d,_0x4b1a20(0x184));},0x1388),napCatCore['session'][_0x1962f7(0x181)]()[_0x1962f7(0x189)](_0x5c2a83,_0x55ca41,_0x566446,[],new Map());});}}