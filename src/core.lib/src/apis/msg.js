const _0x15cab1=_0x58d6;(function(_0x3c2d82,_0x5ebf50){const _0x5bfa66=_0x58d6,_0x344877=_0x3c2d82();while(!![]){try{const _0x2cb2b6=-parseInt(_0x5bfa66(0x228))/0x1+-parseInt(_0x5bfa66(0x225))/0x2*(-parseInt(_0x5bfa66(0x227))/0x3)+-parseInt(_0x5bfa66(0x20d))/0x4*(-parseInt(_0x5bfa66(0x226))/0x5)+-parseInt(_0x5bfa66(0x1ed))/0x6+-parseInt(_0x5bfa66(0x208))/0x7+-parseInt(_0x5bfa66(0x1fc))/0x8+parseInt(_0x5bfa66(0x1f1))/0x9;if(_0x2cb2b6===_0x5ebf50)break;else _0x344877['push'](_0x344877['shift']());}catch(_0x133ad8){_0x344877['push'](_0x344877['shift']());}}}(_0x197a,0x6f6b9));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x15cab1(0x22a)]=_0x1b18b5=>{const _0x4e24e4=_0x15cab1;for(const [_0x5618c4,_0x5bfa41]of GroupFileInfoUpdateTasks){_0x5bfa41(_0x1b18b5),GroupFileInfoUpdateTasks[_0x4e24e4(0x1f9)](_0x5618c4);}},msgListener[_0x15cab1(0x21f)]=_0x31ba8c=>{const _0x5ad046=_0x15cab1,_0x27abeb={'OLkUH':function(_0x1b9d22,_0x7db89b){return _0x1b9d22(_0x7db89b);},'kjMxv':function(_0x5d1ffe,_0x27f166){return _0x5d1ffe instanceof _0x27f166;}};for(const [_0x257a68,_0x575d03]of sentMsgTasks){_0x27abeb['OLkUH'](_0x575d03,_0x31ba8c),sentMsgTasks[_0x5ad046(0x1f9)](_0x257a68);}if(sendMessagePool[_0x31ba8c[_0x5ad046(0x22b)]]){const _0x51becb=sendMessagePool[_0x31ba8c[_0x5ad046(0x22b)]]?.(_0x31ba8c);_0x27abeb['kjMxv'](_0x51becb,Promise)&&_0x51becb['then']()[_0x5ad046(0x20f)](logError);}},msgListener[_0x15cab1(0x22e)]=_0x1db113=>{const _0x403bf0=_0x15cab1,_0x284710={'UXwuP':function(_0x1bf9b5,_0x1c3e6c){return _0x1bf9b5(_0x1c3e6c);},'hxJtd':function(_0x3b3a2b,_0x419a83){return _0x3b3a2b(_0x419a83);}};_0x1db113[_0x403bf0(0x209)](_0x555d21=>{const _0x51e3d2=_0x403bf0;new Promise((_0x29636d,_0x4b7498)=>{const _0x5b7f7b=_0x58d6;for(const _0x533e5f in sendSuccessCBMap){const _0x13a7ac=sendSuccessCBMap[_0x533e5f],_0x426678=_0x284710[_0x5b7f7b(0x1f7)](_0x13a7ac,_0x555d21),_0x5dd812=_0x14ebb8=>{_0x14ebb8&&delete sendSuccessCBMap[_0x533e5f];};_0x426678 instanceof Promise?_0x426678[_0x5b7f7b(0x1f0)](_0x5dd812):_0x284710[_0x5b7f7b(0x212)](_0x5dd812,_0x426678);}})['then']()[_0x51e3d2(0x20f)](log);});},setTimeout(()=>{const _0x479407=_0x15cab1;napCatCore[_0x479407(0x1fd)](()=>{const _0x393879=_0x479407;napCatCore[_0x393879(0x1eb)](msgListener);});},0x64);function _0x58d6(_0x154e8f,_0x346750){const _0x197a50=_0x197a();return _0x58d6=function(_0x58d61c,_0x5cb1e9){_0x58d61c=_0x58d61c-0x1eb;let _0x64b0=_0x197a50[_0x58d61c];return _0x64b0;},_0x58d6(_0x154e8f,_0x346750);}export class NTQQMsgApi{static async[_0x15cab1(0x22f)](_0x48bd56,_0x5e08b4,_0x5c0c98,_0x3d02a1=!![]){const _0x4dffc9=_0x15cab1,_0x4719e1={'YAPGF':function(_0x1c6285,_0x3f0855){return _0x1c6285>_0x3f0855;}};return _0x5c0c98=_0x5c0c98['toString'](),napCatCore['session'][_0x4dffc9(0x207)]()[_0x4dffc9(0x1f3)](_0x48bd56,_0x5e08b4,_0x5c0c98,_0x4719e1['YAPGF'](_0x5c0c98[_0x4dffc9(0x1fa)],0x3)?'2':'1',_0x3d02a1);}static async[_0x15cab1(0x201)](_0x3adc03,_0x4780f4,_0x971bde){const _0x250c1f=_0x15cab1;return napCatCore['session'][_0x250c1f(0x207)]()[_0x250c1f(0x201)](_0x3adc03,_0x4780f4,_0x971bde);}static async[_0x15cab1(0x1f5)](_0x4e316e,_0x4d0369){const _0xcec66=_0x15cab1;return await napCatCore[_0xcec66(0x20c)][_0xcec66(0x207)]()[_0xcec66(0x1f5)](_0x4e316e,_0x4d0369);}static async['getMsgsBySeqAndCount'](_0x36533d,_0x1fe42b,_0x509620,_0x1d21ee,_0x16d2eb){const _0x593c31=_0x15cab1;return await napCatCore[_0x593c31(0x20c)][_0x593c31(0x207)]()[_0x593c31(0x218)](_0x36533d,_0x1fe42b,_0x509620,_0x1d21ee,_0x16d2eb);}static async[_0x15cab1(0x20e)](_0x3cab7f){}static async[_0x15cab1(0x224)](_0x5c9e0a){}static async[_0x15cab1(0x222)](_0xd5db5){const _0x300df4=_0x15cab1;return napCatCore['session'][_0x300df4(0x207)]()[_0x300df4(0x222)](_0xd5db5);}static async[_0x15cab1(0x1f6)](_0x1a55ff,_0x160b12){const _0x361597={'tFQVT':function(_0x5d2436,_0x5c2c71){return _0x5d2436(_0x5c2c71);},'FzrpD':'获取群文件列表超时','aaNAh':function(_0xccf56a,_0x33c118){return _0xccf56a(_0x33c118);},'NGvXf':function(_0xb01369,_0x4f3c4c,_0xaf9ed7){return _0xb01369(_0x4f3c4c,_0xaf9ed7);},'AcAhH':function(_0x4f90d1){return _0x4f90d1();}};return new Promise(async(_0x284e7c,_0x4ad866)=>{const _0x3050fd=_0x58d6;let _0x32ecfb=![];_0x361597[_0x3050fd(0x214)](setTimeout,()=>{const _0x401b4f=_0x3050fd;!_0x32ecfb&&_0x361597[_0x401b4f(0x1ec)](_0x4ad866,_0x361597['FzrpD']);},0x1388);const _0x367b92=_0x39b1a2=>{const _0x5f07e5=_0x3050fd;_0x32ecfb=!![],_0x361597[_0x5f07e5(0x217)](_0x284e7c,_0x39b1a2[_0x5f07e5(0x229)]);};GroupFileInfoUpdateTasks[_0x3050fd(0x1ff)](_0x361597[_0x3050fd(0x22c)](randomUUID),_0x367b92),await napCatCore['session'][_0x3050fd(0x203)]()[_0x3050fd(0x1f6)](_0x1a55ff,_0x160b12);});}static async[_0x15cab1(0x210)](_0x202736,_0x55e2a5,_0x30667d){const _0x306512=_0x15cab1;return napCatCore[_0x306512(0x20c)][_0x306512(0x207)]()[_0x306512(0x211)](_0x202736,_0x55e2a5,_0x30667d,!![]);}static async['fetchRecentContact'](){}static async['recallMsg'](_0x5cc12c,_0x47a93b){const _0x3ca279=_0x15cab1;await napCatCore[_0x3ca279(0x20c)]['getMsgService']()['recallMsg']({'chatType':_0x5cc12c[_0x3ca279(0x21e)],'peerUid':_0x5cc12c['peerUid']},_0x47a93b);}static async[_0x15cab1(0x232)](_0x34c4bf,_0x105970,_0x56d2e2=!![],_0x55d830=0x2710){const _0x47f707=_0x15cab1,_0x269db6={'drSJf':'发送超时','QSPaD':function(_0x29249b,_0x2f27d7){return _0x29249b(_0x2f27d7);},'dchQF':function(_0x2afb8a){return _0x2afb8a();},'zcxtA':function(_0x285ff1,_0x2f090b){return _0x285ff1===_0x2f090b;},'jtUmW':function(_0x4acfe){return _0x4acfe();},'NJBjF':function(_0x3ea2ff,_0x4ce401,_0x5a98a8){return _0x3ea2ff(_0x4ce401,_0x5a98a8);}},_0x1669f2=_0x34c4bf[_0x47f707(0x22b)];let _0x5f2c8e=0x0;const _0xdf73b=async()=>{const _0x57a695=_0x47f707;if(_0x5f2c8e>_0x55d830)throw _0x269db6[_0x57a695(0x21a)];const _0x2c78fa=sendMessagePool[_0x34c4bf[_0x57a695(0x22b)]];if(_0x2c78fa)return await _0x269db6['QSPaD'](sleep,0x1f4),_0x5f2c8e+=0x1f4,await _0x269db6[_0x57a695(0x220)](_0xdf73b);else return;};return await _0x269db6[_0x47f707(0x220)](_0xdf73b),new Promise((_0x18eded,_0x4c2b39)=>{const _0x4d9551=_0x47f707;let _0x5056ad=![],_0x36eac9=null;const _0x1a063b=_0x269db6[_0x4d9551(0x219)](randomUUID);sendSuccessCBMap[_0x1a063b]=_0x37d2cc=>{const _0x244e8d=_0x4d9551;if(_0x37d2cc[_0x244e8d(0x20b)]===_0x36eac9?.[_0x244e8d(0x20b)]){if(_0x269db6[_0x244e8d(0x205)](_0x37d2cc['sendStatus'],0x2))return delete sendSuccessCBMap[_0x1a063b],_0x5056ad=!![],_0x269db6[_0x244e8d(0x206)](_0x18eded,_0x37d2cc),!![];return![];}return![];},sendMessagePool[_0x1669f2]=async _0x348a03=>{delete sendMessagePool[_0x1669f2],_0x36eac9=_0x348a03;},_0x269db6[_0x4d9551(0x202)](setTimeout,()=>{const _0x2d83f8=_0x4d9551;if(_0x5056ad)return;delete sendMessagePool[_0x1669f2],delete sendSuccessCBMap[_0x1a063b],_0x269db6[_0x2d83f8(0x206)](_0x4c2b39,'发送超时');},_0x55d830);const _0x2e1e6d=napCatCore['session'][_0x4d9551(0x207)]()[_0x4d9551(0x232)]('0',_0x34c4bf,_0x105970,new Map());});}static async[_0x15cab1(0x22d)](_0x2adb3a,_0x1cac20,_0x1ccc05){const _0x2afbcb=_0x15cab1;return napCatCore[_0x2afbcb(0x20c)][_0x2afbcb(0x207)]()[_0x2afbcb(0x22d)](_0x1ccc05,_0x2adb3a,[_0x1cac20],new Map());}static async[_0x15cab1(0x1ef)](_0x28ef98,_0x216954,_0x1322c3){const _0x38b16d=_0x15cab1,_0x4ecad7={'KOwLP':'com.tencent.multimsg','LKRAb':function(_0x196249,_0x275bbb){return _0x196249==_0x275bbb;},'VabYi':function(_0x29c972,_0x438017){return _0x29c972==_0x438017;},'MMbbQ':function(_0x54650b,_0x5541a6){return _0x54650b(_0x5541a6);},'hnqLz':_0x38b16d(0x1f2)},_0x1e4c77=_0x1322c3[_0x38b16d(0x1f4)](_0x1d076e=>{const _0x317b59=_0x38b16d;return{'msgId':_0x1d076e,'senderShowName':selfInfo[_0x317b59(0x230)]};});return new Promise((_0x2da6cd,_0x1dcd17)=>{const _0x15d0b=_0x38b16d,_0x39043c={'lnybS':function(_0xa1fefe,_0x4a4617){return _0xa1fefe!=_0x4a4617;},'eClyv':_0x4ecad7[_0x15d0b(0x1fb)],'WSKko':function(_0x420748,_0x19b2d0){const _0x16f308=_0x15d0b;return _0x4ecad7[_0x16f308(0x1f8)](_0x420748,_0x19b2d0);},'ZhEGO':function(_0x11d624,_0xfb3ea5){return _0x4ecad7['VabYi'](_0x11d624,_0xfb3ea5);},'ZdCfV':function(_0x26e82d,_0x313104){const _0xf81153=_0x15d0b;return _0x4ecad7[_0xf81153(0x204)](_0x26e82d,_0x313104);},'CIqPO':_0x4ecad7[_0x15d0b(0x216)]};let _0x24bdac=![];const _0x468be8=_0x47c63d=>{const _0x4ba3ed=_0x15d0b,_0x38179b=_0x47c63d[_0x4ba3ed(0x21d)][_0x4ba3ed(0x21b)](_0x5dd6f2=>_0x5dd6f2[_0x4ba3ed(0x233)]);if(!_0x38179b)return;const _0x41ddee=JSON[_0x4ba3ed(0x21c)](_0x38179b[_0x4ba3ed(0x233)][_0x4ba3ed(0x213)]);if(_0x39043c[_0x4ba3ed(0x1ee)](_0x41ddee['app'],_0x39043c[_0x4ba3ed(0x215)]))return;_0x39043c[_0x4ba3ed(0x231)](_0x47c63d[_0x4ba3ed(0x22b)],_0x216954[_0x4ba3ed(0x22b)])&&_0x39043c[_0x4ba3ed(0x20a)](_0x47c63d[_0x4ba3ed(0x1fe)],selfInfo[_0x4ba3ed(0x200)])&&(_0x24bdac=!![],_0x2da6cd(_0x47c63d));};sentMsgTasks[_0x15d0b(0x1ff)](randomUUID(),_0x468be8),setTimeout(()=>{const _0x2ad737=_0x15d0b;!_0x24bdac&&_0x39043c[_0x2ad737(0x221)](_0x1dcd17,_0x39043c[_0x2ad737(0x223)]);},0x1388),napCatCore['session'][_0x15d0b(0x207)]()['multiForwardMsgWithComment'](_0x1e4c77,_0x28ef98,_0x216954,[],new Map());});}}function _0x197a(){const _0x2bda50=['jtUmW','drSJf','find','parse','elements','chatType','onAddSendMsg','dchQF','ZdCfV','setMsgRead','CIqPO','activateChatAndGetHistory','8018ehVUbp','8150muyubV','327xFUoQk','598718nzSLCC','item','onGroupFileInfoUpdate','peerUid','AcAhH','forwardMsg','onMsgInfoListUpdate','setEmojiLike','nick','WSKko','sendMsg','arkElement','addListener','tFQVT','2452536rxVfxn','lnybS','multiForwardMsg','then','13862997phPJKe','转发消息超时','setMsgEmojiLikes','map','getMsgsByMsgId','getGroupFileList','UXwuP','LKRAb','delete','length','KOwLP','847008cRSQVo','onLoginSuccess','senderUid','set','uid','getMultiMsg','NJBjF','getRichMediaService','MMbbQ','zcxtA','QSPaD','getMsgService','3012849KELVEt','forEach','ZhEGO','msgId','session','56lRpjWR','activateChat','catch','getMsgHistory','getMsgsIncludeSelf','hxJtd','bytesData','NGvXf','eClyv','hnqLz','aaNAh','getMsgsBySeqAndCount'];_0x197a=function(){return _0x2bda50;};return _0x197a();}