const _0x414d3c=_0x2cfc;function _0x5a2d(){const _0xc4534b=['466216AoVtur','ZBktu','peerUid','map','getMsgsByMsgId','then','30657DOLBwe','bjVAH','getMsgsIncludeSelf','getMsgsBySeqAndCount','arkElement','28xgzBnX','com.tencent.multimsg','activateChat','parse','set','toString','sendMsg','setEmojiLike','OOuut','11181XyqGqx','sendStatus','499131SQIQRi','vMHDW','pOrdq','JuchC','forwardMsg','bwcgx','chatType','kcZGH','ChyNY','multiForwardMsg','988659JAofMd','FVxzY','1170wKnDPQ','setMsgEmojiLikes','addListener','onMsgInfoListUpdate','catch','nick','onAddSendMsg','find','boLZp','转发消息超时','417516WnjPTp','senderUid','forEach','zYPHR','6MROegi','guildId','recallMsg','69797ZSgTkx','FGkyA','发送超时','session','elements','getMultiMsg','YpYjl','length','5QiGPvY','onLoginSuccess','setMsgRead','getMsgService'];_0x5a2d=function(){return _0xc4534b;};return _0x5a2d();}(function(_0x3f5eee,_0x8d773a){const _0xf3b93e=_0x2cfc,_0x33a1a3=_0x3f5eee();while(!![]){try{const _0x353c26=-parseInt(_0xf3b93e(0x119))/0x1*(parseInt(_0xf3b93e(0x110))/0x2)+parseInt(_0xf3b93e(0x125))/0x3+parseInt(_0xf3b93e(0x131))/0x4*(-parseInt(_0xf3b93e(0x140))/0x5)+-parseInt(_0xf3b93e(0x135))/0x6*(parseInt(_0xf3b93e(0x138))/0x7)+-parseInt(_0xf3b93e(0x144))/0x8+parseInt(_0xf3b93e(0x11b))/0x9+-parseInt(_0xf3b93e(0x127))/0xa*(-parseInt(_0xf3b93e(0x10b))/0xb);if(_0x353c26===_0x8d773a)break;else _0x33a1a3['push'](_0x33a1a3['shift']());}catch(_0x47fb40){_0x33a1a3['push'](_0x33a1a3['shift']());}}}(_0x5a2d,0x5d3ea));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x2cfc(_0x239eb7,_0x56e040){const _0x5a2dbd=_0x5a2d();return _0x2cfc=function(_0x2cfc58,_0x217baa){_0x2cfc58=_0x2cfc58-0x10a;let _0x4a57ba=_0x5a2dbd[_0x2cfc58];return _0x4a57ba;},_0x2cfc(_0x239eb7,_0x56e040);}import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x414d3c(0x12d)]=_0x38e869=>{const _0x3c5a20=_0x414d3c,_0x4ae9f6={'zYPHR':function(_0x2f84cc,_0x2ba8a0){return _0x2f84cc(_0x2ba8a0);},'bwcgx':function(_0x581299,_0x29169d){return _0x581299 instanceof _0x29169d;}};for(const [_0x2d98d2,_0x489b68]of sentMsgTasks){_0x4ae9f6[_0x3c5a20(0x134)](_0x489b68,_0x38e869),sentMsgTasks['delete'](_0x2d98d2);}if(sendMessagePool[_0x38e869[_0x3c5a20(0x146)]]){const _0x1db6e7=sendMessagePool[_0x38e869[_0x3c5a20(0x146)]]?.(_0x38e869);_0x4ae9f6[_0x3c5a20(0x120)](_0x1db6e7,Promise)&&_0x1db6e7[_0x3c5a20(0x10a)]()[_0x3c5a20(0x12b)](logError);}},msgListener[_0x414d3c(0x12a)]=_0x13f287=>{const _0x307db7=_0x414d3c,_0x4b763c={'FGkyA':function(_0xad7ea5,_0x47e78e){return _0xad7ea5(_0x47e78e);}};_0x13f287[_0x307db7(0x133)](_0x57fbda=>{const _0x30a6f8=_0x307db7,_0x29d905={'bjVAH':function(_0x30d23b,_0x3a81f1){const _0x23c434=_0x2cfc;return _0x4b763c[_0x23c434(0x139)](_0x30d23b,_0x3a81f1);},'ChyNY':function(_0x2419c3,_0x2972fe){const _0x597899=_0x2cfc;return _0x4b763c[_0x597899(0x139)](_0x2419c3,_0x2972fe);}};new Promise((_0x531b77,_0x1055ca)=>{const _0x216cff=_0x2cfc;for(const _0x51362c in sendSuccessCBMap){const _0x408061=sendSuccessCBMap[_0x51362c],_0x1152d6=_0x29d905[_0x216cff(0x10c)](_0x408061,_0x57fbda),_0x55bf42=_0xdd69a=>{_0xdd69a&&delete sendSuccessCBMap[_0x51362c];};_0x1152d6 instanceof Promise?_0x1152d6[_0x216cff(0x10a)](_0x55bf42):_0x29d905[_0x216cff(0x123)](_0x55bf42,_0x1152d6);}})['then']()[_0x30a6f8(0x12b)](log);});},setTimeout(()=>{const _0x5bac6c=_0x414d3c;napCatCore[_0x5bac6c(0x141)](()=>{const _0x14e2f7=_0x5bac6c;napCatCore[_0x14e2f7(0x129)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x414d3c(0x117)](_0x26691d,_0x449dbb,_0x5b0429,_0x2efa22=!![]){const _0x532b2a=_0x414d3c,_0x3cad10={'vMHDW':function(_0x2c7f3a,_0x1600f0){return _0x2c7f3a>_0x1600f0;}};return _0x5b0429=_0x5b0429[_0x532b2a(0x115)](),napCatCore['session'][_0x532b2a(0x143)]()[_0x532b2a(0x128)](_0x26691d,_0x449dbb,_0x5b0429,_0x3cad10[_0x532b2a(0x11c)](_0x5b0429[_0x532b2a(0x13f)],0x3)?'2':'1',_0x2efa22);}static async[_0x414d3c(0x13d)](_0x85b34e,_0x521204,_0x312adc){const _0x4a7186=_0x414d3c;return napCatCore[_0x4a7186(0x13b)][_0x4a7186(0x143)]()['getMultiMsg'](_0x85b34e,_0x521204,_0x312adc);}static async[_0x414d3c(0x148)](_0x48a0c6,_0x5ea101){const _0x3bd958=_0x414d3c;return await napCatCore[_0x3bd958(0x13b)]['getMsgService']()[_0x3bd958(0x148)](_0x48a0c6,_0x5ea101);}static async[_0x414d3c(0x10e)](_0x104c7,_0x2ed430,_0x1cea28,_0x2ce65a,_0x13b369){const _0x2fee2b=_0x414d3c;return await napCatCore[_0x2fee2b(0x13b)][_0x2fee2b(0x143)]()['getMsgsBySeqAndCount'](_0x104c7,_0x2ed430,_0x1cea28,_0x2ce65a,_0x13b369);}static async[_0x414d3c(0x112)](_0x2c8541){}static async['activateChatAndGetHistory'](_0x31fb3f){}static async[_0x414d3c(0x142)](_0x151f63){const _0x38e078=_0x414d3c;return napCatCore['session']['getMsgService']()[_0x38e078(0x142)](_0x151f63[_0x38e078(0x121)],_0x151f63[_0x38e078(0x146)],_0x151f63[_0x38e078(0x136)]);}static async['getMsgHistory'](_0x5d7855,_0xaacfdc,_0x1c7063){const _0x5d96da=_0x414d3c;return napCatCore[_0x5d96da(0x13b)][_0x5d96da(0x143)]()[_0x5d96da(0x10d)](_0x5d7855,_0xaacfdc,_0x1c7063,!![]);}static async['fetchRecentContact'](){}static async[_0x414d3c(0x137)](_0x277624,_0x4e4c7b){const _0x508451=_0x414d3c;await napCatCore[_0x508451(0x13b)][_0x508451(0x143)]()['recallMsg']({'chatType':_0x277624[_0x508451(0x121)],'peerUid':_0x277624[_0x508451(0x146)]},_0x4e4c7b);}static async[_0x414d3c(0x116)](_0x4d818a,_0x374591,_0x22cac7=!![],_0x4b049c=0x2710){const _0x16dd95=_0x414d3c,_0x57724a={'YpYjl':function(_0x2fc296,_0x36f882){return _0x2fc296>_0x36f882;},'Fuskz':function(_0x2cae92,_0x53974c){return _0x2cae92(_0x53974c);},'OOuut':function(_0x38ed5b){return _0x38ed5b();},'boLZp':function(_0x5587c5,_0x506a51,_0x3f6c3d){return _0x5587c5(_0x506a51,_0x3f6c3d);},'xeSCf':function(_0x540a1){return _0x540a1();}},_0x5dc317=_0x4d818a[_0x16dd95(0x146)];let _0x428307=0x0;const _0x2c0ab=async()=>{const _0x465080=_0x16dd95;if(_0x57724a[_0x465080(0x13e)](_0x428307,_0x4b049c))throw _0x465080(0x13a);const _0x24dba2=sendMessagePool[_0x4d818a[_0x465080(0x146)]];if(_0x24dba2)return await _0x57724a['Fuskz'](sleep,0x1f4),_0x428307+=0x1f4,await _0x57724a['OOuut'](_0x2c0ab);else return;};return await _0x57724a['xeSCf'](_0x2c0ab),new Promise((_0x4e8a2b,_0x2660e1)=>{const _0x1ef2a7=_0x16dd95,_0x230158={'kcZGH':'发送超时'};let _0x3edf25=![],_0x4e249e=null;const _0x189495=_0x57724a[_0x1ef2a7(0x118)](randomUUID);sendSuccessCBMap[_0x189495]=_0x298eb4=>{const _0x293b54=_0x1ef2a7;if(_0x298eb4['msgId']===_0x4e249e?.['msgId']){if(_0x298eb4[_0x293b54(0x11a)]===0x2)return delete sendSuccessCBMap[_0x189495],_0x3edf25=!![],_0x4e8a2b(_0x298eb4),!![];return![];}return![];},sendMessagePool[_0x5dc317]=async _0x285a64=>{delete sendMessagePool[_0x5dc317],_0x4e249e=_0x285a64;},_0x57724a[_0x1ef2a7(0x12f)](setTimeout,()=>{const _0x2419eb=_0x1ef2a7;if(_0x3edf25)return;delete sendMessagePool[_0x5dc317],delete sendSuccessCBMap[_0x189495],_0x2660e1(_0x230158[_0x2419eb(0x122)]);},_0x4b049c);const _0x27991e=napCatCore[_0x1ef2a7(0x13b)][_0x1ef2a7(0x143)]()[_0x1ef2a7(0x116)]('0',_0x4d818a,_0x374591,new Map());});}static async[_0x414d3c(0x11f)](_0x1cfc5a,_0x328d4e,_0x16bf76){const _0x4dc678=_0x414d3c;return napCatCore[_0x4dc678(0x13b)]['getMsgService']()[_0x4dc678(0x11f)](_0x16bf76,_0x1cfc5a,[_0x328d4e],new Map());}static async[_0x414d3c(0x124)](_0x294464,_0x4fa026,_0x4600d4){const _0x27f8a9=_0x414d3c,_0x2f7524={'viiDM':function(_0xc09cd7,_0x12b994){return _0xc09cd7(_0x12b994);},'JuchC':function(_0x3fafc6,_0x5cac83){return _0x3fafc6!=_0x5cac83;},'QRtZX':_0x27f8a9(0x111),'pOrdq':function(_0x553789,_0x2dc40a){return _0x553789==_0x2dc40a;}},_0x463996=_0x4600d4[_0x27f8a9(0x147)](_0x52f80d=>{const _0x4751fb=_0x27f8a9;return{'msgId':_0x52f80d,'senderShowName':selfInfo[_0x4751fb(0x12c)]};});return new Promise((_0x531233,_0x1b490d)=>{const _0x38eea5=_0x27f8a9,_0x4571e6={'jmeNy':function(_0x352dee,_0xcc528a){const _0x4bf559=_0x2cfc;return _0x2f7524[_0x4bf559(0x11e)](_0x352dee,_0xcc528a);},'ZBktu':_0x2f7524['QRtZX'],'FVxzY':function(_0x6c8269,_0xc457dd){const _0x23e91c=_0x2cfc;return _0x2f7524[_0x23e91c(0x11d)](_0x6c8269,_0xc457dd);}};let _0x4e7c9b=![];const _0x318abe=_0x4bb370=>{const _0x2cdae2=_0x2cfc,_0x2055fd=_0x4bb370[_0x2cdae2(0x13c)][_0x2cdae2(0x12e)](_0x170be4=>_0x170be4[_0x2cdae2(0x10f)]);if(!_0x2055fd)return;const _0x328257=JSON[_0x2cdae2(0x113)](_0x2055fd[_0x2cdae2(0x10f)]['bytesData']);if(_0x4571e6['jmeNy'](_0x328257['app'],_0x4571e6[_0x2cdae2(0x145)]))return;_0x4571e6[_0x2cdae2(0x126)](_0x4bb370[_0x2cdae2(0x146)],_0x4fa026['peerUid'])&&_0x4571e6[_0x2cdae2(0x126)](_0x4bb370[_0x2cdae2(0x132)],selfInfo['uid'])&&(_0x4e7c9b=!![],_0x531233(_0x4bb370));};sentMsgTasks[_0x38eea5(0x114)](randomUUID(),_0x318abe),setTimeout(()=>{const _0x201c0a=_0x38eea5;!_0x4e7c9b&&_0x2f7524['viiDM'](_0x1b490d,_0x201c0a(0x130));},0x1388),napCatCore[_0x38eea5(0x13b)][_0x38eea5(0x143)]()['multiForwardMsgWithComment'](_0x463996,_0x294464,_0x4fa026,[],new Map());});}}