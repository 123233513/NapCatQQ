const _0x28bbd3=_0x212d;(function(_0x483132,_0x99c5ac){const _0x1a8e83=_0x212d,_0x3b0568=_0x483132();while(!![]){try{const _0xc49d33=-parseInt(_0x1a8e83(0xdb))/0x1+parseInt(_0x1a8e83(0xd1))/0x2*(parseInt(_0x1a8e83(0xb0))/0x3)+-parseInt(_0x1a8e83(0xbd))/0x4+-parseInt(_0x1a8e83(0xb5))/0x5+parseInt(_0x1a8e83(0xd4))/0x6+parseInt(_0x1a8e83(0xda))/0x7*(parseInt(_0x1a8e83(0xc8))/0x8)+parseInt(_0x1a8e83(0xbe))/0x9;if(_0xc49d33===_0x99c5ac)break;else _0x3b0568['push'](_0x3b0568['shift']());}catch(_0x5a68a5){_0x3b0568['push'](_0x3b0568['shift']());}}}(_0x149f,0x1a931));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';function _0x212d(_0x9764f,_0x3aca11){const _0x149f10=_0x149f();return _0x212d=function(_0x212d91,_0x166d17){_0x212d91=_0x212d91-0xae;let _0x48be7a=_0x149f10[_0x212d91];return _0x48be7a;},_0x212d(_0x9764f,_0x3aca11);}function _0x149f(){const _0x2eac9e=['8hXSciI','catch','recallMsg','arkElement','session','JbUeC','nick','getMultiMsg','then','734tHsbkF','setEmojiLike','nQFyZ','752436aDdmsi','peerUid','multiForwardMsgWithComment','onMsgInfoListUpdate','haQGX','aYIoK','1199065WdLLnt','214775IkNzMI','app','XZCke','forwardMsg','getMsgsBySeqAndCount','multiForwardMsg','chatType','length','parse','CaHva','TMLTb','activateChat','uid','sendStatus','发送超时','PBSUe','fetchRecentContact','sendMsg','onLoginSuccess','setMsgRead','delete','set','com.tencent.multimsg','forEach','getMsgHistory','senderUid','1644VYRnZj','PDmNQ','msgId','getMsgService','mCOdg','809020ndwKYf','getMsgsIncludeSelf','dkMay','wOxys','WeBCG','guildId','FQITl','TMvFz','752120dgxpVT','1580769GxwGCS','EiTAd','elements','vrXOe','kVdQa','gXfpP','senzP','sRblR','setMsgEmojiLikes','meVjU'];_0x149f=function(){return _0x2eac9e;};return _0x149f();}import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onAddSendMsg']=_0xb0c4fd=>{const _0x33630f=_0x212d,_0x397aa9={'nQFyZ':function(_0xc7b1ae,_0x24b0bd){return _0xc7b1ae(_0x24b0bd);}};for(const [_0x14f442,_0x470fd3]of sentMsgTasks){_0x397aa9[_0x33630f(0xd3)](_0x470fd3,_0xb0c4fd),sentMsgTasks[_0x33630f(0xef)](_0x14f442);}if(sendMessagePool[_0xb0c4fd[_0x33630f(0xd5)]]){const _0x2173b5=sendMessagePool[_0xb0c4fd['peerUid']]?.(_0xb0c4fd);_0x2173b5 instanceof Promise&&_0x2173b5[_0x33630f(0xd0)]()['catch'](logError);}},msgListener[_0x28bbd3(0xd7)]=_0x159df2=>{const _0x2ea3c3=_0x28bbd3,_0x474a59={'TMLTb':function(_0x3c6115,_0x81db06){return _0x3c6115(_0x81db06);},'XZCke':function(_0x43e68b,_0x372686){return _0x43e68b instanceof _0x372686;}};_0x159df2[_0x2ea3c3(0xf2)](_0x24fc70=>{const _0x431a0d=_0x2ea3c3;new Promise((_0x155f02,_0x3ba7cd)=>{const _0x3ea821=_0x212d;for(const _0x4737b4 in sendSuccessCBMap){const _0x420bcc=sendSuccessCBMap[_0x4737b4],_0xefc5c9=_0x474a59[_0x3ea821(0xe5)](_0x420bcc,_0x24fc70),_0x5c77a7=_0x4249fe=>{_0x4249fe&&delete sendSuccessCBMap[_0x4737b4];};_0x474a59[_0x3ea821(0xdd)](_0xefc5c9,Promise)?_0xefc5c9[_0x3ea821(0xd0)](_0x5c77a7):_0x474a59[_0x3ea821(0xe5)](_0x5c77a7,_0xefc5c9);}})[_0x431a0d(0xd0)]()[_0x431a0d(0xc9)](log);});},setTimeout(()=>{const _0x390ac5=_0x28bbd3;napCatCore[_0x390ac5(0xed)](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x28bbd3(0xd2)](_0xf4e6fd,_0x1ede77,_0x424312,_0x25560a=!![]){const _0x1ee015=_0x28bbd3,_0x5a0a9b={'vrXOe':function(_0x383e4c,_0x468ea1){return _0x383e4c>_0x468ea1;}};return napCatCore[_0x1ee015(0xcc)][_0x1ee015(0xb3)]()[_0x1ee015(0xc6)](_0xf4e6fd,_0x1ede77,_0x424312,_0x5a0a9b[_0x1ee015(0xc1)](_0x424312[_0x1ee015(0xe2)],0x3)?'2':'1',_0x25560a);}static async[_0x28bbd3(0xcf)](_0x3c75aa,_0x219822,_0x2063f1){const _0x5adeac=_0x28bbd3;return napCatCore['session'][_0x5adeac(0xb3)]()[_0x5adeac(0xcf)](_0x3c75aa,_0x219822,_0x2063f1);}static async['getMsgsByMsgId'](_0x23a0d2,_0x6e9756){const _0xc2fb67=_0x28bbd3;return await napCatCore[_0xc2fb67(0xcc)]['getMsgService']()['getMsgsByMsgId'](_0x23a0d2,_0x6e9756);}static async[_0x28bbd3(0xdf)](_0xade1d7,_0x14f896,_0x55556b,_0x1d635b,_0xd63fc7){const _0x21a7d8=_0x28bbd3;return await napCatCore[_0x21a7d8(0xcc)][_0x21a7d8(0xb3)]()[_0x21a7d8(0xdf)](_0xade1d7,_0x14f896,_0x55556b,_0x1d635b,_0xd63fc7);}static async[_0x28bbd3(0xe6)](_0x250918){}static async['activateChatAndGetHistory'](_0x54b249){}static async[_0x28bbd3(0xee)](_0x3517ec){const _0x3ed889=_0x28bbd3;return napCatCore[_0x3ed889(0xcc)][_0x3ed889(0xb3)]()[_0x3ed889(0xee)](_0x3517ec[_0x3ed889(0xe1)],_0x3517ec[_0x3ed889(0xd5)],_0x3517ec[_0x3ed889(0xba)]);}static async[_0x28bbd3(0xae)](_0x3f556d,_0x3b8020,_0x10aebf){const _0xe3a7c=_0x28bbd3;return napCatCore[_0xe3a7c(0xcc)][_0xe3a7c(0xb3)]()[_0xe3a7c(0xb6)](_0x3f556d,_0x3b8020,_0x10aebf,!![]);}static async[_0x28bbd3(0xeb)](){}static async['recallMsg'](_0x182257,_0x390f0f){const _0x1a0669=_0x28bbd3;await napCatCore[_0x1a0669(0xcc)][_0x1a0669(0xb3)]()[_0x1a0669(0xca)]({'chatType':_0x182257[_0x1a0669(0xe1)],'peerUid':_0x182257[_0x1a0669(0xd5)]},_0x390f0f);}static async[_0x28bbd3(0xec)](_0x28f7af,_0x40ee00,_0x494d4c=!![],_0x3f663e=0x2710){const _0x12b364=_0x28bbd3,_0x260caa={'dkMay':function(_0x438a3c,_0xe1f60){return _0x438a3c>_0xe1f60;},'PDmNQ':function(_0x5ccf97){return _0x5ccf97();},'TMvFz':function(_0x5ea9af,_0x154416){return _0x5ea9af(_0x154416);},'JbUeC':'发送超时','ncuOr':function(_0x1c4cad,_0x1b3f85){return _0x1c4cad===_0x1b3f85;},'gXfpP':function(_0x486d8a,_0x4c6a61){return _0x486d8a===_0x4c6a61;},'meVjU':function(_0x50d0ca,_0x12d073){return _0x50d0ca(_0x12d073);},'sRblR':function(_0x12d6e3){return _0x12d6e3();},'SmJwb':function(_0x39483b,_0xeae124,_0x32986d){return _0x39483b(_0xeae124,_0x32986d);},'wOxys':function(_0x2fcba5){return _0x2fcba5();}},_0x4260ce=_0x28f7af['peerUid'];let _0xe658f1=0x0;const _0x212a40=async()=>{const _0x597424=_0x212d;if(_0x260caa[_0x597424(0xb7)](_0xe658f1,_0x3f663e))throw _0x597424(0xe9);const _0x31e873=sendMessagePool[_0x28f7af['peerUid']];if(_0x31e873)return await sleep(0x1f4),_0xe658f1+=0x1f4,await _0x260caa[_0x597424(0xb1)](_0x212a40);else return;};return await _0x260caa[_0x12b364(0xb8)](_0x212a40),new Promise((_0x3e6297,_0x5a96e8)=>{const _0x15ee37=_0x12b364,_0x19f292={'aYIoK':function(_0x2316e6,_0x2c876a){return _0x260caa['ncuOr'](_0x2316e6,_0x2c876a);},'kVdQa':function(_0xc04a8,_0x9cee2b){const _0x54d2d4=_0x212d;return _0x260caa[_0x54d2d4(0xc3)](_0xc04a8,_0x9cee2b);},'FQITl':function(_0x247c8d,_0x4f8047){const _0x5df39c=_0x212d;return _0x260caa[_0x5df39c(0xc7)](_0x247c8d,_0x4f8047);}};let _0x3d7ee4=![],_0x3a5dc1=null;const _0x2f00b4=_0x260caa[_0x15ee37(0xc5)](randomUUID);sendSuccessCBMap[_0x2f00b4]=_0x4fc860=>{const _0x7529d=_0x15ee37;if(_0x19f292[_0x7529d(0xd9)](_0x4fc860[_0x7529d(0xb2)],_0x3a5dc1?.['msgId'])){if(_0x19f292[_0x7529d(0xc2)](_0x4fc860[_0x7529d(0xe8)],0x2))return delete sendSuccessCBMap[_0x2f00b4],_0x3d7ee4=!![],_0x19f292[_0x7529d(0xbb)](_0x3e6297,_0x4fc860),!![];return![];}return![];},sendMessagePool[_0x4260ce]=async _0x4bf5b9=>{delete sendMessagePool[_0x4260ce],_0x3a5dc1=_0x4bf5b9;},_0x260caa['SmJwb'](setTimeout,()=>{const _0x5d4dfe=_0x15ee37;if(_0x3d7ee4)return;delete sendMessagePool[_0x4260ce],delete sendSuccessCBMap[_0x2f00b4],_0x260caa[_0x5d4dfe(0xbc)](_0x5a96e8,_0x260caa[_0x5d4dfe(0xcd)]);},_0x3f663e);const _0x3bb9fc=napCatCore[_0x15ee37(0xcc)]['getMsgService']()[_0x15ee37(0xec)]('0',_0x28f7af,_0x40ee00,new Map());});}static async[_0x28bbd3(0xde)](_0x2dded1,_0x4ace70,_0x696520){const _0x4dc2ae=_0x28bbd3;return napCatCore[_0x4dc2ae(0xcc)][_0x4dc2ae(0xb3)]()['forwardMsg'](_0x696520,_0x2dded1,[_0x4ace70],new Map());}static async[_0x28bbd3(0xe0)](_0x4b3f63,_0x533ee3,_0x516583){const _0x592d82=_0x28bbd3,_0x1aac72={'EiTAd':function(_0x46f0e5,_0x1a8056){return _0x46f0e5!=_0x1a8056;},'haQGX':_0x592d82(0xf1),'senzP':function(_0x1a2407,_0x56c6c7){return _0x1a2407(_0x56c6c7);},'mCOdg':'转发消息超时','CaHva':function(_0x5d7d73){return _0x5d7d73();}},_0x121736=_0x516583['map'](_0x9277ee=>{const _0x13d79b=_0x592d82;return{'msgId':_0x9277ee,'senderShowName':selfInfo[_0x13d79b(0xce)]};});return new Promise((_0x472269,_0x5e140c)=>{const _0x5ce307=_0x592d82,_0x5b9a51={'PBSUe':function(_0x46bdce,_0x54788a){const _0x17dbcb=_0x212d;return _0x1aac72[_0x17dbcb(0xc4)](_0x46bdce,_0x54788a);},'WeBCG':_0x1aac72[_0x5ce307(0xb4)]};let _0x354b16=![];const _0x369e2b=_0x45484f=>{const _0x25dc88=_0x5ce307,_0x2cb687=_0x45484f[_0x25dc88(0xc0)]['find'](_0x10ee35=>_0x10ee35[_0x25dc88(0xcb)]);if(!_0x2cb687)return;const _0x4a1242=JSON[_0x25dc88(0xe3)](_0x2cb687[_0x25dc88(0xcb)]['bytesData']);if(_0x1aac72[_0x25dc88(0xbf)](_0x4a1242[_0x25dc88(0xdc)],_0x1aac72[_0x25dc88(0xd8)]))return;_0x45484f[_0x25dc88(0xd5)]==_0x533ee3[_0x25dc88(0xd5)]&&_0x45484f[_0x25dc88(0xaf)]==selfInfo[_0x25dc88(0xe7)]&&(_0x354b16=!![],_0x1aac72['senzP'](_0x472269,_0x45484f));};sentMsgTasks[_0x5ce307(0xf0)](_0x1aac72[_0x5ce307(0xe4)](randomUUID),_0x369e2b),setTimeout(()=>{const _0x88e77=_0x5ce307;!_0x354b16&&_0x5b9a51[_0x88e77(0xea)](_0x5e140c,_0x5b9a51[_0x88e77(0xb9)]);},0x1388),napCatCore[_0x5ce307(0xcc)][_0x5ce307(0xb3)]()[_0x5ce307(0xd6)](_0x121736,_0x4b3f63,_0x533ee3,[],new Map());});}}