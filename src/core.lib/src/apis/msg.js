const _0xa061d7=_0x478f;(function(_0x47f18c,_0x414414){const _0x4105ad=_0x478f,_0x2cdc82=_0x47f18c();while(!![]){try{const _0x3fd651=-parseInt(_0x4105ad(0x1f1))/0x1*(-parseInt(_0x4105ad(0x205))/0x2)+parseInt(_0x4105ad(0x1f6))/0x3+parseInt(_0x4105ad(0x1ec))/0x4*(parseInt(_0x4105ad(0x203))/0x5)+-parseInt(_0x4105ad(0x1d6))/0x6+parseInt(_0x4105ad(0x1cb))/0x7*(parseInt(_0x4105ad(0x1da))/0x8)+-parseInt(_0x4105ad(0x1d2))/0x9+-parseInt(_0x4105ad(0x1ea))/0xa*(-parseInt(_0x4105ad(0x1e8))/0xb);if(_0x3fd651===_0x414414)break;else _0x2cdc82['push'](_0x2cdc82['shift']());}catch(_0x4da117){_0x2cdc82['push'](_0x2cdc82['shift']());}}}(_0x4acf,0xa27bb));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';function _0x478f(_0xd30ac9,_0x25590d){const _0x4acf9b=_0x4acf();return _0x478f=function(_0x478fb9,_0x49c40e){_0x478fb9=_0x478fb9-0x1ca;let _0x1d56af=_0x4acf9b[_0x478fb9];return _0x1d56af;},_0x478f(_0xd30ac9,_0x25590d);}function _0x4acf(){const _0x39fed4=['catch','11884365FoJAGu','item','lbPHG','uid','4728372tkdTBE','nick','nmytA','Zueyg','8JaSboX','LwMZp','sendStatus','gERBs','发送超时','activateChat','bWKzO','setMsgEmojiLikes','YIfev','sendMsg','msgId','then','BcVWw','gmIPX','1892iIvbJD','NviGh','82510vUuait','recallMsg','867556uRTgNS','zKwRR','addListener','senderUid','MwObd','1wXbXvL','ovLqq','getMsgHistory','setEmojiLike','CLQsk','2296554grlwgB','WIkmJ','set','peerUid','EhJmZ','multiForwardMsgWithComment','hCXme','delete','length','setMsgRead','getMsgsBySeqAndCount','mewIh','bytesData','5MDPBas','RwGQj','234898HqicTo','getMsgService','iwMMz','nfcCp','Mbmrz','onAddSendMsg','session','elements','find','tbLif','forEach','转发消息超时','PQNOJ','app','multiForwardMsg','qnLaT','1785350mbgJBr','arkElement','getMsgsByMsgId','getGroupFileList','onLoginSuccess','forwardMsg'];_0x4acf=function(){return _0x39fed4;};return _0x4acf();}import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onGroupFileInfoUpdate']=_0xc98c69=>{const _0xfcada6=_0x478f,_0x30b821={'Zueyg':function(_0x3ae395,_0x3fe14e){return _0x3ae395(_0x3fe14e);}};for(const [_0x43a3c1,_0x44af44]of GroupFileInfoUpdateTasks){_0x30b821[_0xfcada6(0x1d9)](_0x44af44,_0xc98c69),GroupFileInfoUpdateTasks[_0xfcada6(0x1fd)](_0x43a3c1);}},msgListener[_0xa061d7(0x20a)]=_0x52753a=>{const _0x35e126=_0xa061d7,_0x34cbea={'CLQsk':function(_0x3e8234,_0x1a39b3){return _0x3e8234(_0x1a39b3);},'mewIh':function(_0x3c3276,_0x3b0695){return _0x3c3276 instanceof _0x3b0695;}};for(const [_0x33bc21,_0x4327dc]of sentMsgTasks){_0x34cbea[_0x35e126(0x1f5)](_0x4327dc,_0x52753a),sentMsgTasks[_0x35e126(0x1fd)](_0x33bc21);}if(sendMessagePool[_0x52753a['peerUid']]){const _0x258b4c=sendMessagePool[_0x52753a[_0x35e126(0x1f9)]]?.(_0x52753a);_0x34cbea[_0x35e126(0x201)](_0x258b4c,Promise)&&_0x258b4c['then']()[_0x35e126(0x1d1)](logError);}},msgListener['onMsgInfoListUpdate']=_0x2e7f29=>{const _0x4531d4=_0xa061d7,_0x3276f1={'zKwRR':function(_0x576509,_0x59a2a2){return _0x576509(_0x59a2a2);},'Mbmrz':function(_0x25c9ec,_0x584820){return _0x25c9ec instanceof _0x584820;}};_0x2e7f29[_0x4531d4(0x20f)](_0xa44e7c=>{const _0x59f076=_0x4531d4;new Promise((_0x47ae90,_0x3e4a11)=>{const _0x224cd3=_0x478f;for(const _0x1a5de9 in sendSuccessCBMap){const _0x3dd363=sendSuccessCBMap[_0x1a5de9],_0x301e1e=_0x3276f1[_0x224cd3(0x1ed)](_0x3dd363,_0xa44e7c),_0x456da4=_0x2edbcc=>{_0x2edbcc&&delete sendSuccessCBMap[_0x1a5de9];};_0x3276f1[_0x224cd3(0x209)](_0x301e1e,Promise)?_0x301e1e[_0x224cd3(0x1e5)](_0x456da4):_0x456da4(_0x301e1e);}})[_0x59f076(0x1e5)]()['catch'](log);});},setTimeout(()=>{const _0x4bf1a6=_0xa061d7;napCatCore[_0x4bf1a6(0x1cf)](()=>{const _0x5c16f9=_0x4bf1a6;napCatCore[_0x5c16f9(0x1ee)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0xa061d7(0x1f4)](_0x66b53b,_0x228442,_0x541b34,_0x66ba4d=!![]){const _0x579766=_0xa061d7,_0x4a4bbe={'gmIPX':function(_0x3ef7b2,_0x149673){return _0x3ef7b2>_0x149673;}};return _0x541b34=_0x541b34['toString'](),napCatCore['session']['getMsgService']()[_0x579766(0x1e1)](_0x66b53b,_0x228442,_0x541b34,_0x4a4bbe[_0x579766(0x1e7)](_0x541b34[_0x579766(0x1fe)],0x3)?'2':'1',_0x66ba4d);}static async['getMultiMsg'](_0x1a6764,_0x2ed006,_0x19170e){const _0x3f6dc7=_0xa061d7;return napCatCore['session'][_0x3f6dc7(0x206)]()['getMultiMsg'](_0x1a6764,_0x2ed006,_0x19170e);}static async[_0xa061d7(0x1cd)](_0x41e866,_0x74ec4){const _0x4ab830=_0xa061d7;return await napCatCore[_0x4ab830(0x20b)][_0x4ab830(0x206)]()[_0x4ab830(0x1cd)](_0x41e866,_0x74ec4);}static async[_0xa061d7(0x200)](_0x4a8964,_0x268fa2,_0xf6b3fe,_0xb7947f,_0x421469){const _0x25ca31=_0xa061d7;return await napCatCore['session'][_0x25ca31(0x206)]()[_0x25ca31(0x200)](_0x4a8964,_0x268fa2,_0xf6b3fe,_0xb7947f,_0x421469);}static async[_0xa061d7(0x1df)](_0x2d1e28){}static async['activateChatAndGetHistory'](_0x42ef5a){}static async[_0xa061d7(0x1ff)](_0x4c597d){const _0x58e0ab=_0xa061d7;return napCatCore['session']['getMsgService']()[_0x58e0ab(0x1ff)](_0x4c597d);}static async[_0xa061d7(0x1ce)](_0x3b73b5,_0xaeeedd){const _0x53330c={'bWKzO':function(_0x2d75ce,_0x2007bb){return _0x2d75ce(_0x2007bb);},'nfcCp':'获取群文件列表超时','lbPHG':function(_0x1b8648,_0x1a516d){return _0x1b8648(_0x1a516d);},'WIkmJ':function(_0x2b676d,_0x268d8a,_0x3732aa){return _0x2b676d(_0x268d8a,_0x3732aa);}};return new Promise(async(_0x4cfe4a,_0x1e0095)=>{const _0x4e4c71=_0x478f;let _0x5571e8=![];_0x53330c[_0x4e4c71(0x1f7)](setTimeout,()=>{const _0x1695ff=_0x4e4c71;!_0x5571e8&&_0x53330c[_0x1695ff(0x1e0)](_0x1e0095,_0x53330c[_0x1695ff(0x208)]);},0x1388);const _0x2e5baf=_0x1bea2a=>{const _0x278ea8=_0x4e4c71;_0x5571e8=!![],_0x53330c[_0x278ea8(0x1d4)](_0x4cfe4a,_0x1bea2a[_0x278ea8(0x1d3)]);};GroupFileInfoUpdateTasks[_0x4e4c71(0x1f8)](randomUUID(),_0x2e5baf),await napCatCore[_0x4e4c71(0x20b)]['getRichMediaService']()[_0x4e4c71(0x1ce)](_0x3b73b5,_0xaeeedd);});}static async[_0xa061d7(0x1f3)](_0x1d3c5b,_0x23511e,_0x2b5089){const _0x3455b4=_0xa061d7;return napCatCore[_0x3455b4(0x20b)][_0x3455b4(0x206)]()['getMsgsIncludeSelf'](_0x1d3c5b,_0x23511e,_0x2b5089,!![]);}static async['fetchRecentContact'](){}static async[_0xa061d7(0x1eb)](_0x33db6b,_0x4711d0){const _0x521019=_0xa061d7;await napCatCore[_0x521019(0x20b)][_0x521019(0x206)]()[_0x521019(0x1eb)]({'chatType':_0x33db6b['chatType'],'peerUid':_0x33db6b[_0x521019(0x1f9)]},_0x4711d0);}static async['sendMsg'](_0x5ef16e,_0x184765,_0x2dad8e=!![],_0x56ae5b=0x2710){const _0x119332=_0xa061d7,_0x7fad3={'gppos':_0x119332(0x1de),'cKiJB':function(_0x23102c,_0x567ea5){return _0x23102c(_0x567ea5);},'RwGQj':function(_0xcc1f2b){return _0xcc1f2b();},'qnLaT':function(_0x3353d8,_0x517d11){return _0x3353d8===_0x517d11;},'YIfev':function(_0xb9dfeb,_0x5b24c9){return _0xb9dfeb(_0x5b24c9);},'PQNOJ':function(_0x407628,_0x1147fc,_0x596f69){return _0x407628(_0x1147fc,_0x596f69);}},_0x477c7a=_0x5ef16e[_0x119332(0x1f9)];let _0x464c6d=0x0;const _0x4b2323=async()=>{const _0x139189=_0x119332;if(_0x464c6d>_0x56ae5b)throw _0x7fad3['gppos'];const _0x1789f0=sendMessagePool[_0x5ef16e[_0x139189(0x1f9)]];if(_0x1789f0)return await _0x7fad3['cKiJB'](sleep,0x1f4),_0x464c6d+=0x1f4,await _0x7fad3[_0x139189(0x204)](_0x4b2323);else return;};return await _0x7fad3[_0x119332(0x204)](_0x4b2323),new Promise((_0x34228f,_0xc343d)=>{const _0x17d3bb=_0x119332;let _0x3f25b3=![],_0x4a4a2e=null;const _0x2aec35=randomUUID();sendSuccessCBMap[_0x2aec35]=_0x4a9b30=>{const _0x1fe401=_0x478f;if(_0x7fad3[_0x1fe401(0x1ca)](_0x4a9b30[_0x1fe401(0x1e4)],_0x4a4a2e?.['msgId'])){if(_0x7fad3[_0x1fe401(0x1ca)](_0x4a9b30[_0x1fe401(0x1dc)],0x2))return delete sendSuccessCBMap[_0x2aec35],_0x3f25b3=!![],_0x7fad3['YIfev'](_0x34228f,_0x4a9b30),!![];return![];}return![];},sendMessagePool[_0x477c7a]=async _0x207923=>{delete sendMessagePool[_0x477c7a],_0x4a4a2e=_0x207923;},_0x7fad3[_0x17d3bb(0x211)](setTimeout,()=>{const _0x5a8004=_0x17d3bb;if(_0x3f25b3)return;delete sendMessagePool[_0x477c7a],delete sendSuccessCBMap[_0x2aec35],_0x7fad3[_0x5a8004(0x1e2)](_0xc343d,_0x7fad3['gppos']);},_0x56ae5b);const _0x98e60f=napCatCore[_0x17d3bb(0x20b)][_0x17d3bb(0x206)]()[_0x17d3bb(0x1e3)]('0',_0x5ef16e,_0x184765,new Map());});}static async['forwardMsg'](_0x36ba30,_0x45c4ca,_0x3b0b5b){const _0x4d443a=_0xa061d7;return napCatCore['session'][_0x4d443a(0x206)]()[_0x4d443a(0x1d0)](_0x3b0b5b,_0x36ba30,[_0x45c4ca],new Map());}static async[_0xa061d7(0x213)](_0x2b1c0b,_0x9eaf84,_0x5f2ecf){const _0xeed1fd=_0xa061d7,_0xa5c2e4={'EhJmZ':function(_0x96dd32,_0x46ad61){return _0x96dd32!=_0x46ad61;},'hCXme':'com.tencent.multimsg','gERBs':function(_0x564784,_0x4c4f7a){return _0x564784==_0x4c4f7a;},'LwMZp':function(_0xe90faf,_0x34dd06){return _0xe90faf==_0x34dd06;},'BcVWw':function(_0x3be661,_0x448bb){return _0x3be661(_0x448bb);},'NviGh':function(_0x3a6855,_0x4e845d){return _0x3a6855(_0x4e845d);},'ovLqq':_0xeed1fd(0x210),'nmytA':function(_0x258fb9){return _0x258fb9();},'MwObd':function(_0x3e8cbb,_0x138855,_0x188e6f){return _0x3e8cbb(_0x138855,_0x188e6f);}},_0x4ef8f7=_0x5f2ecf['map'](_0x217b8e=>{const _0x32c319=_0xeed1fd;return{'msgId':_0x217b8e,'senderShowName':selfInfo[_0x32c319(0x1d7)]};});return new Promise((_0x57ff65,_0x136465)=>{const _0x59118c=_0xeed1fd,_0x4c9750={'iwMMz':function(_0x5d2eb2,_0x2acbc8){const _0x1c1536=_0x478f;return _0xa5c2e4[_0x1c1536(0x1e9)](_0x5d2eb2,_0x2acbc8);},'tbLif':_0xa5c2e4[_0x59118c(0x1f2)]};let _0x3a5c93=![];const _0x2c12cd=_0xf833fc=>{const _0x5bd866=_0x59118c,_0x277023=_0xf833fc[_0x5bd866(0x20c)][_0x5bd866(0x20d)](_0x35c6b2=>_0x35c6b2[_0x5bd866(0x1cc)]);if(!_0x277023)return;const _0x5b094a=JSON['parse'](_0x277023['arkElement'][_0x5bd866(0x202)]);if(_0xa5c2e4[_0x5bd866(0x1fa)](_0x5b094a[_0x5bd866(0x212)],_0xa5c2e4[_0x5bd866(0x1fc)]))return;_0xa5c2e4[_0x5bd866(0x1dd)](_0xf833fc[_0x5bd866(0x1f9)],_0x9eaf84[_0x5bd866(0x1f9)])&&_0xa5c2e4[_0x5bd866(0x1db)](_0xf833fc[_0x5bd866(0x1ef)],selfInfo[_0x5bd866(0x1d5)])&&(_0x3a5c93=!![],_0xa5c2e4[_0x5bd866(0x1e6)](_0x57ff65,_0xf833fc));};sentMsgTasks[_0x59118c(0x1f8)](_0xa5c2e4[_0x59118c(0x1d8)](randomUUID),_0x2c12cd),_0xa5c2e4[_0x59118c(0x1f0)](setTimeout,()=>{const _0x44cffd=_0x59118c;!_0x3a5c93&&_0x4c9750[_0x44cffd(0x207)](_0x136465,_0x4c9750[_0x44cffd(0x20e)]);},0x1388),napCatCore[_0x59118c(0x20b)][_0x59118c(0x206)]()[_0x59118c(0x1fb)](_0x4ef8f7,_0x2b1c0b,_0x9eaf84,[],new Map());});}}