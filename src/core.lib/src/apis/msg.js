const _0xd58e9f=_0x56cb;(function(_0x42dd63,_0x136564){const _0x54f6e1=_0x56cb,_0x11bb5f=_0x42dd63();while(!![]){try{const _0x17c8ac=-parseInt(_0x54f6e1(0x1e7))/0x1*(parseInt(_0x54f6e1(0x217))/0x2)+parseInt(_0x54f6e1(0x21e))/0x3*(parseInt(_0x54f6e1(0x206))/0x4)+-parseInt(_0x54f6e1(0x1eb))/0x5+-parseInt(_0x54f6e1(0x210))/0x6*(parseInt(_0x54f6e1(0x213))/0x7)+parseInt(_0x54f6e1(0x207))/0x8*(parseInt(_0x54f6e1(0x1e4))/0x9)+-parseInt(_0x54f6e1(0x20a))/0xa+parseInt(_0x54f6e1(0x1f6))/0xb;if(_0x17c8ac===_0x136564)break;else _0x11bb5f['push'](_0x11bb5f['shift']());}catch(_0x36f9a4){_0x11bb5f['push'](_0x11bb5f['shift']());}}}(_0x14db,0xa7fbd));import{selfInfo}from'@/core/data';function _0x56cb(_0x3b71ea,_0x227ea7){const _0x14dbf6=_0x14db();return _0x56cb=function(_0x56cbb2,_0x4067ed){_0x56cbb2=_0x56cbb2-0x1e4;let _0x1c7aa1=_0x14dbf6[_0x56cbb2];return _0x1c7aa1;},_0x56cb(_0x3b71ea,_0x227ea7);}import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x14db(){const _0x3be266=['app','2EFkeCi','getMsgService','map','set','getMsgsByMsgId','getMsgsBySeqAndCount','msgId','621009EOsCAe','SUVZL','setMsgRead','cFujH','onLoginSuccess','bytesData','CjRZz','getRichMediaService','forwardMsg','9zjnJQl','uRkTC','bZOgL','662557qRTwAF','转发消息超时','wSFJt','peerUid','4634885sgplzv','setEmojiLike','nick','MHdJW','JFQUJ','item','NWcpy','sendMsg','catch','activateChatAndGetHistory','iFjLs','17791807IRpSxl','sendStatus','forEach','setMsgEmojiLikes','multiForwardMsgWithComment','session','rUNvu','tiJHl','发送超时','arkElement','toString','recallMsg','getGroupFileList','chatType','parse','delete','20FIRPPI','7209704QXxUlX','zNuhL','length','3579870ndiAjW','com.tencent.multimsg','senderUid','then','uid','multiForwardMsg','5508498nRGneL','hkgmW','getMultiMsg','7YdGAzP','find','AOpLP'];_0x14db=function(){return _0x3be266;};return _0x14db();}import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onGroupFileInfoUpdate']=_0x335385=>{const _0x173fb2=_0x56cb;for(const [_0x444e70,_0x4f1426]of GroupFileInfoUpdateTasks){_0x4f1426(_0x335385),GroupFileInfoUpdateTasks[_0x173fb2(0x205)](_0x444e70);}},msgListener['onAddSendMsg']=_0x55e990=>{const _0x4c6a8b=_0x56cb,_0x21a7bd={'hTIRv':function(_0x2a5e6a,_0x3331a2){return _0x2a5e6a instanceof _0x3331a2;}};for(const [_0x23e82f,_0x3e0fbf]of sentMsgTasks){_0x3e0fbf(_0x55e990),sentMsgTasks[_0x4c6a8b(0x205)](_0x23e82f);}if(sendMessagePool[_0x55e990[_0x4c6a8b(0x1ea)]]){const _0x440a9f=sendMessagePool[_0x55e990[_0x4c6a8b(0x1ea)]]?.(_0x55e990);_0x21a7bd['hTIRv'](_0x440a9f,Promise)&&_0x440a9f[_0x4c6a8b(0x20d)]()[_0x4c6a8b(0x1f3)](logError);}},msgListener['onMsgInfoListUpdate']=_0x166c99=>{const _0x20b672=_0x56cb,_0x289689={'bZOgL':function(_0x104ee6,_0x594bec){return _0x104ee6(_0x594bec);}};_0x166c99[_0x20b672(0x1f8)](_0x1b81cb=>{const _0x34da94=_0x20b672,_0x1974a2={'wSFJt':function(_0x16799c,_0x428916){const _0x453634=_0x56cb;return _0x289689[_0x453634(0x1e6)](_0x16799c,_0x428916);}};new Promise((_0x3d46b9,_0x384ec4)=>{const _0x17ee96=_0x56cb;for(const _0xda943f in sendSuccessCBMap){const _0x274cff=sendSuccessCBMap[_0xda943f],_0x5a6be7=_0x1974a2[_0x17ee96(0x1e9)](_0x274cff,_0x1b81cb),_0x5b68e7=_0x112514=>{_0x112514&&delete sendSuccessCBMap[_0xda943f];};_0x5a6be7 instanceof Promise?_0x5a6be7['then'](_0x5b68e7):_0x1974a2[_0x17ee96(0x1e9)](_0x5b68e7,_0x5a6be7);}})[_0x34da94(0x20d)]()[_0x34da94(0x1f3)](log);});},setTimeout(()=>{const _0x2c6f6b=_0x56cb;napCatCore[_0x2c6f6b(0x222)](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async[_0xd58e9f(0x1ec)](_0x20beb3,_0x2eeba9,_0x2c6ac1,_0x3848f1=!![]){const _0x184700=_0xd58e9f,_0x33331f={'jVVXy':function(_0x42af0f,_0x3fe8a0){return _0x42af0f>_0x3fe8a0;}};return _0x2c6ac1=_0x2c6ac1[_0x184700(0x200)](),napCatCore[_0x184700(0x1fb)][_0x184700(0x218)]()[_0x184700(0x1f9)](_0x20beb3,_0x2eeba9,_0x2c6ac1,_0x33331f['jVVXy'](_0x2c6ac1[_0x184700(0x209)],0x3)?'2':'1',_0x3848f1);}static async[_0xd58e9f(0x212)](_0xa6194d,_0x2ddbb3,_0x3a43e7){const _0x45236c=_0xd58e9f;return napCatCore['session'][_0x45236c(0x218)]()[_0x45236c(0x212)](_0xa6194d,_0x2ddbb3,_0x3a43e7);}static async[_0xd58e9f(0x21b)](_0x212ee8,_0x2bd6c9){const _0x245888=_0xd58e9f;return await napCatCore[_0x245888(0x1fb)][_0x245888(0x218)]()[_0x245888(0x21b)](_0x212ee8,_0x2bd6c9);}static async[_0xd58e9f(0x21c)](_0x5c5ee6,_0x1eefb6,_0x474b0a,_0x9f747,_0x5bde6e){const _0x39c437=_0xd58e9f;return await napCatCore[_0x39c437(0x1fb)][_0x39c437(0x218)]()['getMsgsBySeqAndCount'](_0x5c5ee6,_0x1eefb6,_0x474b0a,_0x9f747,_0x5bde6e);}static async['activateChat'](_0x5c045a){}static async[_0xd58e9f(0x1f4)](_0x1a376d){}static async[_0xd58e9f(0x220)](_0x4b841b){const _0x58def2=_0xd58e9f;return napCatCore['session'][_0x58def2(0x218)]()['setMsgRead'](_0x4b841b);}static async[_0xd58e9f(0x202)](_0x38627f,_0x49402d){const _0x1305c0={'tiJHl':function(_0x459163,_0x1d76a2){return _0x459163(_0x1d76a2);},'pcXdB':function(_0xe2d62f){return _0xe2d62f();}};return new Promise(async(_0x4daf69,_0x8702c8)=>{const _0x27fb28=_0x56cb,_0xc64c7f={'iFjLs':function(_0x4fae40,_0x42789b){return _0x4fae40(_0x42789b);}};let _0x6a5412=![];setTimeout(()=>{const _0x317f66=_0x56cb;!_0x6a5412&&_0x1305c0[_0x317f66(0x1fd)](_0x8702c8,'获取群文件列表超时');},0x1388);const _0x2c4eb8=_0x204fa3=>{const _0x38450a=_0x56cb;_0x6a5412=!![],_0xc64c7f[_0x38450a(0x1f5)](_0x4daf69,_0x204fa3[_0x38450a(0x1f0)]);};GroupFileInfoUpdateTasks[_0x27fb28(0x21a)](_0x1305c0['pcXdB'](randomUUID),_0x2c4eb8),await napCatCore[_0x27fb28(0x1fb)][_0x27fb28(0x225)]()['getGroupFileList'](_0x38627f,_0x49402d);});}static async['getMsgHistory'](_0x4df171,_0x5377c9,_0x5d072b){const _0x8470db=_0xd58e9f;return napCatCore['session'][_0x8470db(0x218)]()['getMsgsIncludeSelf'](_0x4df171,_0x5377c9,_0x5d072b,!![]);}static async['fetchRecentContact'](){}static async[_0xd58e9f(0x201)](_0x390ce0,_0x25b45){const _0x1d428a=_0xd58e9f;await napCatCore[_0x1d428a(0x1fb)][_0x1d428a(0x218)]()[_0x1d428a(0x201)]({'chatType':_0x390ce0[_0x1d428a(0x203)],'peerUid':_0x390ce0[_0x1d428a(0x1ea)]},_0x25b45);}static async[_0xd58e9f(0x1f2)](_0x35793d,_0x55b297,_0x30f483=!![],_0x3a62da=0x2710){const _0x4c4c2a=_0xd58e9f,_0x515cc4={'hkgmW':function(_0x52c75f,_0x271ad3){return _0x52c75f>_0x271ad3;},'AOpLP':_0x4c4c2a(0x1fe),'jbTLr':function(_0x20fed8,_0x3dbbd5){return _0x20fed8(_0x3dbbd5);},'CjRZz':function(_0x1a5ac9){return _0x1a5ac9();},'lHOnO':function(_0x1ab332,_0x114475){return _0x1ab332===_0x114475;},'rUNvu':function(_0x4c85ed,_0x4e06c5){return _0x4c85ed===_0x4e06c5;},'oCZhr':function(_0x1dcb2e){return _0x1dcb2e();}},_0x645678=_0x35793d['peerUid'];let _0x2e6af6=0x0;const _0x539662=async()=>{const _0x19765d=_0x4c4c2a;if(_0x515cc4[_0x19765d(0x211)](_0x2e6af6,_0x3a62da))throw _0x515cc4[_0x19765d(0x215)];const _0x23b179=sendMessagePool[_0x35793d[_0x19765d(0x1ea)]];if(_0x23b179)return await _0x515cc4['jbTLr'](sleep,0x1f4),_0x2e6af6+=0x1f4,await _0x515cc4[_0x19765d(0x224)](_0x539662);else return;};return await _0x539662(),new Promise((_0xbeb577,_0x58c354)=>{const _0x2ae6c7=_0x4c4c2a;let _0xfb9f69=![],_0xea145f=null;const _0x2c6929=_0x515cc4['oCZhr'](randomUUID);sendSuccessCBMap[_0x2c6929]=_0x52c157=>{const _0x2e64c3=_0x56cb;if(_0x515cc4['lHOnO'](_0x52c157[_0x2e64c3(0x21d)],_0xea145f?.['msgId'])){if(_0x515cc4[_0x2e64c3(0x1fc)](_0x52c157[_0x2e64c3(0x1f7)],0x2))return delete sendSuccessCBMap[_0x2c6929],_0xfb9f69=!![],_0xbeb577(_0x52c157),!![];return![];}return![];},sendMessagePool[_0x645678]=async _0x51b898=>{delete sendMessagePool[_0x645678],_0xea145f=_0x51b898;},setTimeout(()=>{const _0x5dc121=_0x56cb;if(_0xfb9f69)return;delete sendMessagePool[_0x645678],delete sendSuccessCBMap[_0x2c6929],_0x58c354(_0x515cc4[_0x5dc121(0x215)]);},_0x3a62da);const _0x551980=napCatCore[_0x2ae6c7(0x1fb)][_0x2ae6c7(0x218)]()[_0x2ae6c7(0x1f2)]('0',_0x35793d,_0x55b297,new Map());});}static async[_0xd58e9f(0x226)](_0x3e4dc6,_0x35b15a,_0x48777c){const _0x3b5cfa=_0xd58e9f;return napCatCore[_0x3b5cfa(0x1fb)]['getMsgService']()['forwardMsg'](_0x48777c,_0x3e4dc6,[_0x35b15a],new Map());}static async[_0xd58e9f(0x20f)](_0x4f4938,_0x2f90bc,_0x1eb8e0){const _0x375a35=_0xd58e9f,_0x168213={'MHdJW':function(_0x3d6176,_0x1ab865){return _0x3d6176!=_0x1ab865;},'cFujH':function(_0x302623,_0x1081ed){return _0x302623==_0x1081ed;},'zNuhL':function(_0x4e9ddf,_0x4bd3a9){return _0x4e9ddf(_0x4bd3a9);}},_0xe1d91a=_0x1eb8e0[_0x375a35(0x219)](_0x19b9d9=>{const _0x4bab4f=_0x375a35;return{'msgId':_0x19b9d9,'senderShowName':selfInfo[_0x4bab4f(0x1ed)]};});return new Promise((_0xe7ca02,_0x5c90bb)=>{const _0x44ca52=_0x375a35,_0x5358ff={'NWcpy':function(_0x2d909a,_0x5ee08b){const _0x2c4b7e=_0x56cb;return _0x168213[_0x2c4b7e(0x1ee)](_0x2d909a,_0x5ee08b);},'LZgui':_0x44ca52(0x20b),'JFQUJ':function(_0x57d866,_0x11623a){const _0x4f2599=_0x44ca52;return _0x168213[_0x4f2599(0x221)](_0x57d866,_0x11623a);},'uRkTC':function(_0x55d335,_0x4d4910){return _0x55d335==_0x4d4910;},'SUVZL':function(_0x859d0b,_0xfbeccf){const _0x118b52=_0x44ca52;return _0x168213[_0x118b52(0x208)](_0x859d0b,_0xfbeccf);},'hIgFT':function(_0x5a371d,_0xb07f9e){return _0x168213['zNuhL'](_0x5a371d,_0xb07f9e);}};let _0x3432b6=![];const _0x562142=_0x36e435=>{const _0x1e48c1=_0x44ca52,_0x45b2da=_0x36e435['elements'][_0x1e48c1(0x214)](_0x404fc0=>_0x404fc0[_0x1e48c1(0x1ff)]);if(!_0x45b2da)return;const _0x1dddd5=JSON[_0x1e48c1(0x204)](_0x45b2da['arkElement'][_0x1e48c1(0x223)]);if(_0x5358ff[_0x1e48c1(0x1f1)](_0x1dddd5[_0x1e48c1(0x216)],_0x5358ff['LZgui']))return;_0x5358ff[_0x1e48c1(0x1ef)](_0x36e435['peerUid'],_0x2f90bc['peerUid'])&&_0x5358ff[_0x1e48c1(0x1e5)](_0x36e435[_0x1e48c1(0x20c)],selfInfo[_0x1e48c1(0x20e)])&&(_0x3432b6=!![],_0x5358ff[_0x1e48c1(0x21f)](_0xe7ca02,_0x36e435));};sentMsgTasks['set'](randomUUID(),_0x562142),setTimeout(()=>{const _0x2b801d=_0x44ca52;!_0x3432b6&&_0x5358ff['hIgFT'](_0x5c90bb,_0x2b801d(0x1e8));},0x1388),napCatCore['session']['getMsgService']()[_0x44ca52(0x1fa)](_0xe1d91a,_0x4f4938,_0x2f90bc,[],new Map());});}}