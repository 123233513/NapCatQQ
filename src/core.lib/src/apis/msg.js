const _0x19c570=_0x32d6;function _0x32d6(_0x5ed253,_0x10628f){const _0x359a35=_0x359a();return _0x32d6=function(_0x32d6ee,_0x276799){_0x32d6ee=_0x32d6ee-0x1b1;let _0x335683=_0x359a35[_0x32d6ee];return _0x335683;},_0x32d6(_0x5ed253,_0x10628f);}(function(_0x1e8974,_0x550deb){const _0x42e3f5=_0x32d6,_0x1e3d00=_0x1e8974();while(!![]){try{const _0x36371e=-parseInt(_0x42e3f5(0x1c8))/0x1*(-parseInt(_0x42e3f5(0x1b8))/0x2)+-parseInt(_0x42e3f5(0x1ea))/0x3+-parseInt(_0x42e3f5(0x1d2))/0x4+-parseInt(_0x42e3f5(0x1db))/0x5+parseInt(_0x42e3f5(0x1bd))/0x6+parseInt(_0x42e3f5(0x1bf))/0x7+-parseInt(_0x42e3f5(0x1c3))/0x8*(-parseInt(_0x42e3f5(0x1c6))/0x9);if(_0x36371e===_0x550deb)break;else _0x1e3d00['push'](_0x1e3d00['shift']());}catch(_0x280d1e){_0x1e3d00['push'](_0x1e3d00['shift']());}}}(_0x359a,0xa6282));function _0x359a(){const _0x36bcb2=['onAddSendMsg','toString','setMsgRead','getMultiMsg','getMsgsByMsgId','getMsgsBySeqAndCount','onLoginSuccess','find','6338HXEnlN','catch','fnBhD','ZtOaQ','set','2194386vBmYte','pqNpa','5056065NfUkWU','SdKmd','elements','peerUid','120hnPDfl','onMsgInfoListUpdate','parse','467622Jaebdu','sendMsg','331XzIPNs','multiForwardMsg','activateChatAndGetHistory','IYNCz','WPpMB','then','FBROM','delete','rvFmG','getMsgHistory','1531304qiWVMT','uid','recallMsg','WmJlH','转发消息超时','forEach','map','addListener','hAYKU','5257055knNnao','MvJZH','SABlZ','session','OhUOr','forwardMsg','发送超时','com.tencent.multimsg','chatType','LcTac','HCQoD','ERpyj','vtuBm','msgId','bytesData','2404560dNxqWD','getMsgService'];_0x359a=function(){return _0x36bcb2;};return _0x359a();}import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x19c570(0x1ec)]=_0x34f07b=>{const _0x227665=_0x19c570,_0x2a5588={'IYNCz':function(_0x1663a4,_0x2b317e){return _0x1663a4(_0x2b317e);}};for(const [_0xc5799a,_0x1b2ece]of sentMsgTasks){_0x2a5588[_0x227665(0x1cb)](_0x1b2ece,_0x34f07b),sentMsgTasks[_0x227665(0x1cf)](_0xc5799a);}if(sendMessagePool[_0x34f07b[_0x227665(0x1c2)]]){const _0x2ae09c=sendMessagePool[_0x34f07b[_0x227665(0x1c2)]]?.(_0x34f07b);_0x2ae09c instanceof Promise&&_0x2ae09c['then']()[_0x227665(0x1b9)](logError);}},msgListener[_0x19c570(0x1c4)]=_0x48575b=>{const _0xd18a17=_0x19c570,_0x39a089={'FBROM':function(_0x384a98,_0x29f31f){return _0x384a98(_0x29f31f);}};_0x48575b[_0xd18a17(0x1d7)](_0x134cda=>{const _0x355ed5=_0xd18a17;new Promise((_0x110af8,_0x59e1f)=>{const _0x1eaf8c=_0x32d6;for(const _0x15038c in sendSuccessCBMap){const _0x16027a=sendSuccessCBMap[_0x15038c],_0x5ad138=_0x39a089[_0x1eaf8c(0x1ce)](_0x16027a,_0x134cda),_0x300b34=_0x28adbc=>{_0x28adbc&&delete sendSuccessCBMap[_0x15038c];};_0x5ad138 instanceof Promise?_0x5ad138['then'](_0x300b34):_0x39a089[_0x1eaf8c(0x1ce)](_0x300b34,_0x5ad138);}})[_0x355ed5(0x1cd)]()['catch'](log);});},setTimeout(()=>{const _0x2c175d=_0x19c570;napCatCore[_0x2c175d(0x1b6)](()=>{const _0x3fa1d0=_0x2c175d;napCatCore[_0x3fa1d0(0x1d9)](msgListener);});},0x64);export class NTQQMsgApi{static async['setEmojiLike'](_0x29e0b3,_0x1b4f12,_0x1ce59c,_0x25ac0f=!![]){const _0x40f4ba=_0x19c570,_0x56d434={'rvFmG':function(_0x240f4e,_0x45b7ed){return _0x240f4e>_0x45b7ed;}};return _0x1ce59c=_0x1ce59c[_0x40f4ba(0x1b1)](),napCatCore['session'][_0x40f4ba(0x1eb)]()['setMsgEmojiLikes'](_0x29e0b3,_0x1b4f12,_0x1ce59c,_0x56d434[_0x40f4ba(0x1d0)](_0x1ce59c['length'],0x3)?'2':'1',_0x25ac0f);}static async[_0x19c570(0x1b3)](_0x56081f,_0x43bcd0,_0x1abe11){const _0x33ff38=_0x19c570;return napCatCore[_0x33ff38(0x1de)][_0x33ff38(0x1eb)]()[_0x33ff38(0x1b3)](_0x56081f,_0x43bcd0,_0x1abe11);}static async[_0x19c570(0x1b4)](_0x30d32f,_0x75fd67){const _0x1620b2=_0x19c570;return await napCatCore[_0x1620b2(0x1de)][_0x1620b2(0x1eb)]()[_0x1620b2(0x1b4)](_0x30d32f,_0x75fd67);}static async[_0x19c570(0x1b5)](_0x205cf9,_0x142fbf,_0x30801e,_0x3b18f0,_0x12240c){const _0x226533=_0x19c570;return await napCatCore[_0x226533(0x1de)][_0x226533(0x1eb)]()[_0x226533(0x1b5)](_0x205cf9,_0x142fbf,_0x30801e,_0x3b18f0,_0x12240c);}static async['activateChat'](_0x78682f){}static async[_0x19c570(0x1ca)](_0x1a4916){}static async['setMsgRead'](_0x1de425){const _0x2fad72=_0x19c570;return napCatCore[_0x2fad72(0x1de)][_0x2fad72(0x1eb)]()[_0x2fad72(0x1b2)](_0x1de425);}static async[_0x19c570(0x1d1)](_0x130e0e,_0x3dab72,_0x4bd239){const _0x5b0784=_0x19c570;return napCatCore[_0x5b0784(0x1de)][_0x5b0784(0x1eb)]()['getMsgsIncludeSelf'](_0x130e0e,_0x3dab72,_0x4bd239,!![]);}static async['fetchRecentContact'](){}static async[_0x19c570(0x1d4)](_0x2f0cf0,_0x264258){const _0x261006=_0x19c570;await napCatCore[_0x261006(0x1de)]['getMsgService']()[_0x261006(0x1d4)]({'chatType':_0x2f0cf0[_0x261006(0x1e3)],'peerUid':_0x2f0cf0[_0x261006(0x1c2)]},_0x264258);}static async[_0x19c570(0x1c7)](_0x452e65,_0x59401d,_0xeb9648=!![],_0x3ec22d=0x2710){const _0x3924df=_0x19c570,_0x4fb228={'WmJlH':function(_0x30d5aa,_0x2b65b8){return _0x30d5aa>_0x2b65b8;},'SABlZ':_0x3924df(0x1e1),'ZtOaQ':function(_0x593b97,_0x78781c){return _0x593b97(_0x78781c);},'khFav':function(_0x15bafb,_0x1bb322){return _0x15bafb===_0x1bb322;},'hAYKU':function(_0x505674,_0x4711c7,_0x35bb8f){return _0x505674(_0x4711c7,_0x35bb8f);},'pqNpa':function(_0x2a5a53){return _0x2a5a53();}},_0x28c42e=_0x452e65['peerUid'];let _0x3af41d=0x0;const _0x21e31f=async()=>{const _0x341c7e=_0x3924df;if(_0x4fb228[_0x341c7e(0x1d5)](_0x3af41d,_0x3ec22d))throw _0x4fb228[_0x341c7e(0x1dd)];const _0x45ee12=sendMessagePool[_0x452e65['peerUid']];if(_0x45ee12)return await _0x4fb228[_0x341c7e(0x1bb)](sleep,0x1f4),_0x3af41d+=0x1f4,await _0x21e31f();else return;};return await _0x4fb228[_0x3924df(0x1be)](_0x21e31f),new Promise((_0x3020d7,_0x531afd)=>{const _0x1eea8d=_0x3924df,_0x4ce6c1={'MvJZH':function(_0xe66231,_0x112b8a){return _0x4fb228['khFav'](_0xe66231,_0x112b8a);},'HDuBp':function(_0x853d4e,_0x1b18e7){const _0x51fa48=_0x32d6;return _0x4fb228[_0x51fa48(0x1bb)](_0x853d4e,_0x1b18e7);}};let _0x1b7281=![],_0x2b6c24=null;const _0x2c09b9=randomUUID();sendSuccessCBMap[_0x2c09b9]=_0x3b46c3=>{const _0x34c2c1=_0x32d6;if(_0x4ce6c1[_0x34c2c1(0x1dc)](_0x3b46c3['msgId'],_0x2b6c24?.[_0x34c2c1(0x1e8)])){if(_0x3b46c3['sendStatus']===0x2)return delete sendSuccessCBMap[_0x2c09b9],_0x1b7281=!![],_0x4ce6c1['HDuBp'](_0x3020d7,_0x3b46c3),!![];return![];}return![];},sendMessagePool[_0x28c42e]=async _0x59b2b8=>{delete sendMessagePool[_0x28c42e],_0x2b6c24=_0x59b2b8;},_0x4fb228[_0x1eea8d(0x1da)](setTimeout,()=>{const _0xaebf39=_0x1eea8d;if(_0x1b7281)return;delete sendMessagePool[_0x28c42e],delete sendSuccessCBMap[_0x2c09b9],_0x4fb228[_0xaebf39(0x1bb)](_0x531afd,_0x4fb228[_0xaebf39(0x1dd)]);},_0x3ec22d);const _0x36e48c=napCatCore[_0x1eea8d(0x1de)][_0x1eea8d(0x1eb)]()[_0x1eea8d(0x1c7)]('0',_0x452e65,_0x59401d,new Map());});}static async[_0x19c570(0x1e0)](_0x167a64,_0x1d3b24,_0x488cbd){const _0x57f6db=_0x19c570;return napCatCore[_0x57f6db(0x1de)][_0x57f6db(0x1eb)]()[_0x57f6db(0x1e0)](_0x488cbd,_0x167a64,[_0x1d3b24],new Map());}static async[_0x19c570(0x1c9)](_0x13b624,_0xc282e0,_0x47e78b){const _0x5eb840=_0x19c570,_0x47e65e={'fnBhD':_0x5eb840(0x1e2),'rAeWJ':function(_0x16d950,_0x44c4b2){return _0x16d950==_0x44c4b2;},'SdKmd':function(_0x17382f,_0x48ae37){return _0x17382f(_0x48ae37);},'OhUOr':_0x5eb840(0x1d6),'dWZxE':function(_0x44b886){return _0x44b886();},'LcTac':function(_0x4972c,_0x5db3cb,_0x48c847){return _0x4972c(_0x5db3cb,_0x48c847);}},_0x3ae977=_0x47e78b[_0x5eb840(0x1d8)](_0x445ebc=>{return{'msgId':_0x445ebc,'senderShowName':selfInfo['nick']};});return new Promise((_0x11df14,_0x5c2f69)=>{const _0x16ff23=_0x5eb840,_0x5a23d7={'HCQoD':_0x47e65e[_0x16ff23(0x1ba)],'WPpMB':function(_0x4dcc8b,_0x412324){return _0x47e65e['rAeWJ'](_0x4dcc8b,_0x412324);},'ERpyj':function(_0x7123e7,_0x2b4f70){const _0x56b87d=_0x16ff23;return _0x47e65e[_0x56b87d(0x1c0)](_0x7123e7,_0x2b4f70);},'vtuBm':_0x47e65e[_0x16ff23(0x1df)]};let _0x392ab4=![];const _0x207ad6=_0x34e873=>{const _0x3bbeac=_0x16ff23,_0x174263=_0x34e873[_0x3bbeac(0x1c1)][_0x3bbeac(0x1b7)](_0x42284d=>_0x42284d['arkElement']);if(!_0x174263)return;const _0x4d1a75=JSON[_0x3bbeac(0x1c5)](_0x174263['arkElement'][_0x3bbeac(0x1e9)]);if(_0x4d1a75['app']!=_0x5a23d7[_0x3bbeac(0x1e5)])return;_0x5a23d7[_0x3bbeac(0x1cc)](_0x34e873[_0x3bbeac(0x1c2)],_0xc282e0[_0x3bbeac(0x1c2)])&&_0x34e873['senderUid']==selfInfo[_0x3bbeac(0x1d3)]&&(_0x392ab4=!![],_0x5a23d7[_0x3bbeac(0x1e6)](_0x11df14,_0x34e873));};sentMsgTasks[_0x16ff23(0x1bc)](_0x47e65e['dWZxE'](randomUUID),_0x207ad6),_0x47e65e[_0x16ff23(0x1e4)](setTimeout,()=>{const _0xdcbe84=_0x16ff23;!_0x392ab4&&_0x5c2f69(_0x5a23d7[_0xdcbe84(0x1e7)]);},0x1388),napCatCore[_0x16ff23(0x1de)]['getMsgService']()['multiForwardMsgWithComment'](_0x3ae977,_0x13b624,_0xc282e0,[],new Map());});}}