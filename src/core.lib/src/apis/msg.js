const _0x59901a=_0x26d5;function _0x26d5(_0xb01e65,_0x2490c7){const _0x5404e1=_0x5404();return _0x26d5=function(_0x26d56e,_0x480798){_0x26d56e=_0x26d56e-0x192;let _0x519ded=_0x5404e1[_0x26d56e];return _0x519ded;},_0x26d5(_0xb01e65,_0x2490c7);}(function(_0x827ccd,_0x2b1503){const _0x145e15=_0x26d5,_0x3c03f6=_0x827ccd();while(!![]){try{const _0x486f38=parseInt(_0x145e15(0x1a5))/0x1*(parseInt(_0x145e15(0x1ac))/0x2)+-parseInt(_0x145e15(0x1af))/0x3+parseInt(_0x145e15(0x198))/0x4+parseInt(_0x145e15(0x1c1))/0x5+parseInt(_0x145e15(0x1b3))/0x6+parseInt(_0x145e15(0x1a1))/0x7+parseInt(_0x145e15(0x1bf))/0x8*(-parseInt(_0x145e15(0x1ad))/0x9);if(_0x486f38===_0x2b1503)break;else _0x3c03f6['push'](_0x3c03f6['shift']());}catch(_0x40d48a){_0x3c03f6['push'](_0x3c03f6['shift']());}}}(_0x5404,0x3724f));import{selfInfo}from'@/core/data';function _0x5404(){const _0xfd9fde=['YRnPi','771370vUfaXy','recallMsg','sendStatus','fkcLX','forEach','onAddSendMsg','delete','item','chatType','getMultiMsg','onLoginSuccess','then','getMsgHistory','VtdHB','YQgrq','senderUid','sendMsg','getMsgsBySeqAndCount','toString','map','LFSMM','session','OgWJU','uid','getGroupFileList','WZqDx','LVJig','setEmojiLike','parse','hBOLs','jxkTK','forwardMsg','PeeYP','1023512MGtjRN','com.tencent.multimsg','LJoVD','getMsgsByMsgId','ZRiGW','qxMCG','multiForwardMsgWithComment','zBvRD','activateChat','256410RktDiC','getRichMediaService','转发消息超时','onMsgInfoListUpdate','41043JFubMx','axHwu','getMsgService','set','setMsgRead','nick','addListener','6hMxTMd','126UrgWLf','app','812118RuIHKV','find','peerUid','ICmJl','2447328gTjTHF','yfNRs','activateChatAndGetHistory','multiForwardMsg','catch','fetchRecentContact','sDdWj','elements','msgId','Yrgve','ZzoVL','Tovmo','274984LfFmNA'];_0x5404=function(){return _0xfd9fde;};return _0x5404();}import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onGroupFileInfoUpdate']=_0x29d03e=>{const _0x43b321=_0x26d5,_0x2a9ea1={'OgWJU':function(_0x5dc375,_0x3fa78b){return _0x5dc375(_0x3fa78b);}};for(const [_0x43cc2b,_0x3cb064]of GroupFileInfoUpdateTasks){_0x2a9ea1[_0x43b321(0x1d7)](_0x3cb064,_0x29d03e),GroupFileInfoUpdateTasks[_0x43b321(0x1c7)](_0x43cc2b);}},msgListener[_0x59901a(0x1c6)]=_0x3f5663=>{const _0x27d205=_0x59901a,_0x5c8e23={'fkcLX':function(_0x3687e4,_0x4a9510){return _0x3687e4(_0x4a9510);},'YQgrq':function(_0x2a3f78,_0x59734b){return _0x2a3f78 instanceof _0x59734b;}};for(const [_0x8e0c4d,_0x33b40b]of sentMsgTasks){_0x5c8e23[_0x27d205(0x1c4)](_0x33b40b,_0x3f5663),sentMsgTasks[_0x27d205(0x1c7)](_0x8e0c4d);}if(sendMessagePool[_0x3f5663[_0x27d205(0x1b1)]]){const _0x70a85d=sendMessagePool[_0x3f5663[_0x27d205(0x1b1)]]?.(_0x3f5663);_0x5c8e23[_0x27d205(0x1cf)](_0x70a85d,Promise)&&_0x70a85d[_0x27d205(0x1cc)]()[_0x27d205(0x1b7)](logError);}},msgListener[_0x59901a(0x1a4)]=_0x376ff9=>{const _0xc5bbf7=_0x59901a,_0x2ed22a={'qxMCG':function(_0x463d5f,_0x343cc9){return _0x463d5f(_0x343cc9);},'LBOeI':function(_0x12fcd3,_0x4342cf){return _0x12fcd3 instanceof _0x4342cf;}};_0x376ff9[_0xc5bbf7(0x1c5)](_0x10e26c=>{const _0x51766f=_0xc5bbf7;new Promise((_0x52568a,_0x46c0a8)=>{const _0x5c0b5d=_0x26d5;for(const _0xb49c67 in sendSuccessCBMap){const _0xc0f1a0=sendSuccessCBMap[_0xb49c67],_0x2429d8=_0x2ed22a[_0x5c0b5d(0x19d)](_0xc0f1a0,_0x10e26c),_0x938006=_0x23f2db=>{_0x23f2db&&delete sendSuccessCBMap[_0xb49c67];};_0x2ed22a['LBOeI'](_0x2429d8,Promise)?_0x2429d8[_0x5c0b5d(0x1cc)](_0x938006):_0x2ed22a['qxMCG'](_0x938006,_0x2429d8);}})[_0x51766f(0x1cc)]()[_0x51766f(0x1b7)](log);});},setTimeout(()=>{const _0x40852c=_0x59901a;napCatCore[_0x40852c(0x1cb)](()=>{const _0x29abee=_0x40852c;napCatCore[_0x29abee(0x1ab)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x59901a(0x192)](_0x16637b,_0x6b0536,_0x1cf36b,_0x46159a=!![]){const _0xb502ac=_0x59901a,_0x161467={'zBvRD':function(_0x3bc57a,_0x5246f4){return _0x3bc57a>_0x5246f4;}};return _0x1cf36b=_0x1cf36b[_0xb502ac(0x1d3)](),napCatCore['session'][_0xb502ac(0x1a7)]()['setMsgEmojiLikes'](_0x16637b,_0x6b0536,_0x1cf36b,_0x161467[_0xb502ac(0x19f)](_0x1cf36b['length'],0x3)?'2':'1',_0x46159a);}static async[_0x59901a(0x1ca)](_0x3f9448,_0x174e16,_0x42b1f9){const _0xf66621=_0x59901a;return napCatCore[_0xf66621(0x1d6)][_0xf66621(0x1a7)]()['getMultiMsg'](_0x3f9448,_0x174e16,_0x42b1f9);}static async[_0x59901a(0x19b)](_0x59c744,_0x5424ba){const _0x5efffb=_0x59901a;return await napCatCore['session'][_0x5efffb(0x1a7)]()['getMsgsByMsgId'](_0x59c744,_0x5424ba);}static async[_0x59901a(0x1d2)](_0x1584cd,_0x33e9d1,_0x266335,_0x4edcb3,_0x87564f){const _0x3f7b2a=_0x59901a;return await napCatCore[_0x3f7b2a(0x1d6)]['getMsgService']()[_0x3f7b2a(0x1d2)](_0x1584cd,_0x33e9d1,_0x266335,_0x4edcb3,_0x87564f);}static async[_0x59901a(0x1a0)](_0x24bbfd){}static async[_0x59901a(0x1b5)](_0x3c6265){}static async[_0x59901a(0x1a9)](_0x34e201){const _0x333319=_0x59901a;return napCatCore[_0x333319(0x1d6)][_0x333319(0x1a7)]()[_0x333319(0x1a9)](_0x34e201);}static async[_0x59901a(0x1d9)](_0x50c095,_0x47be0b){const _0x5291bf={'VEdOY':'获取群文件列表超时','ZzoVL':function(_0x272e9b,_0x20f969){return _0x272e9b(_0x20f969);},'PeeYP':function(_0x5ec076){return _0x5ec076();}};return new Promise(async(_0x47d8e4,_0x3fd13d)=>{const _0x522c62=_0x26d5;let _0x45a01d=![];setTimeout(()=>{!_0x45a01d&&_0x3fd13d(_0x5291bf['VEdOY']);},0x1388);const _0x5b0970=_0x37eb7b=>{const _0x3e9f44=_0x26d5;_0x45a01d=!![],_0x5291bf[_0x3e9f44(0x1bd)](_0x47d8e4,_0x37eb7b[_0x3e9f44(0x1c8)]);};GroupFileInfoUpdateTasks['set'](_0x5291bf[_0x522c62(0x197)](randomUUID),_0x5b0970),await napCatCore[_0x522c62(0x1d6)][_0x522c62(0x1a2)]()['getGroupFileList'](_0x50c095,_0x47be0b);});}static async[_0x59901a(0x1cd)](_0x4942e5,_0x16e7a3,_0x2c3487){const _0x4719a0=_0x59901a;return napCatCore[_0x4719a0(0x1d6)][_0x4719a0(0x1a7)]()['getMsgsIncludeSelf'](_0x4942e5,_0x16e7a3,_0x2c3487,!![]);}static async[_0x59901a(0x1b8)](){}static async['recallMsg'](_0x38d730,_0x3fa09a){const _0xc43864=_0x59901a;await napCatCore[_0xc43864(0x1d6)][_0xc43864(0x1a7)]()[_0xc43864(0x1c2)]({'chatType':_0x38d730[_0xc43864(0x1c9)],'peerUid':_0x38d730[_0xc43864(0x1b1)]},_0x3fa09a);}static async[_0x59901a(0x1d1)](_0x5e9bbd,_0x3be981,_0x2f9d90=!![],_0x353f4e=0x2710){const _0x6710c=_0x59901a,_0x5e17eb={'ZRiGW':'发送超时','UmUSJ':function(_0x737fdf,_0x30d899){return _0x737fdf(_0x30d899);},'LFSMM':function(_0x33633e,_0x380ac2){return _0x33633e(_0x380ac2);},'YRnPi':function(_0x434809,_0x20cc23){return _0x434809===_0x20cc23;},'LVJig':function(_0x544ca4,_0x1a9a04){return _0x544ca4(_0x1a9a04);},'jxkTK':function(_0x4019b0){return _0x4019b0();},'axHwu':function(_0x5adabd,_0x2133a0,_0x2c404a){return _0x5adabd(_0x2133a0,_0x2c404a);},'VtdHB':function(_0x5f2e50){return _0x5f2e50();}},_0x2df515=_0x5e9bbd[_0x6710c(0x1b1)];let _0x212d94=0x0;const _0x2f4215=async()=>{const _0x4aab58=_0x6710c;if(_0x212d94>_0x353f4e)throw _0x5e17eb[_0x4aab58(0x19c)];const _0x5b7f7b=sendMessagePool[_0x5e9bbd[_0x4aab58(0x1b1)]];if(_0x5b7f7b)return await _0x5e17eb['UmUSJ'](sleep,0x1f4),_0x212d94+=0x1f4,await _0x2f4215();else return;};return await _0x5e17eb[_0x6710c(0x1ce)](_0x2f4215),new Promise((_0x5e64bb,_0x596043)=>{const _0x2bab5d=_0x6710c,_0x307200={'NeXau':function(_0x223c80,_0xe2af0c){return _0x5e17eb['YRnPi'](_0x223c80,_0xe2af0c);},'bCVxe':function(_0x2ca8a8,_0x105e34){const _0x1dc064=_0x26d5;return _0x5e17eb[_0x1dc064(0x1c0)](_0x2ca8a8,_0x105e34);},'WZqDx':function(_0x4e04a0,_0x41057f){const _0x53a67d=_0x26d5;return _0x5e17eb[_0x53a67d(0x1db)](_0x4e04a0,_0x41057f);}};let _0x371f65=![],_0x1d000e=null;const _0x349f85=_0x5e17eb[_0x2bab5d(0x195)](randomUUID);sendSuccessCBMap[_0x349f85]=_0x536f3b=>{const _0x39fccf=_0x2bab5d;if(_0x307200['NeXau'](_0x536f3b[_0x39fccf(0x1bb)],_0x1d000e?.['msgId'])){if(_0x307200['bCVxe'](_0x536f3b[_0x39fccf(0x1c3)],0x2))return delete sendSuccessCBMap[_0x349f85],_0x371f65=!![],_0x307200[_0x39fccf(0x1da)](_0x5e64bb,_0x536f3b),!![];return![];}return![];},sendMessagePool[_0x2df515]=async _0x2da937=>{delete sendMessagePool[_0x2df515],_0x1d000e=_0x2da937;},_0x5e17eb[_0x2bab5d(0x1a6)](setTimeout,()=>{const _0x52e17f=_0x2bab5d;if(_0x371f65)return;delete sendMessagePool[_0x2df515],delete sendSuccessCBMap[_0x349f85],_0x5e17eb[_0x52e17f(0x1d5)](_0x596043,_0x5e17eb[_0x52e17f(0x19c)]);},_0x353f4e);const _0x4fb7d7=napCatCore[_0x2bab5d(0x1d6)][_0x2bab5d(0x1a7)]()[_0x2bab5d(0x1d1)]('0',_0x5e9bbd,_0x3be981,new Map());});}static async[_0x59901a(0x196)](_0x11d828,_0x329566,_0x1fd7b5){const _0x4f9ed7=_0x59901a;return napCatCore[_0x4f9ed7(0x1d6)][_0x4f9ed7(0x1a7)]()[_0x4f9ed7(0x196)](_0x1fd7b5,_0x11d828,[_0x329566],new Map());}static async[_0x59901a(0x1b6)](_0x35813a,_0x3ba0b6,_0x396bc9){const _0x4ba72c=_0x59901a,_0x4b1ea1={'mOgKX':_0x4ba72c(0x1a3),'Hrphs':function(_0x1777e9,_0x49b667){return _0x1777e9!=_0x49b667;},'sDdWj':_0x4ba72c(0x199),'LJoVD':function(_0x489335,_0x5a04ab){return _0x489335==_0x5a04ab;},'Tovmo':function(_0x92c7bf){return _0x92c7bf();},'ICmJl':function(_0x4cfba7,_0x5587b2,_0x408f24){return _0x4cfba7(_0x5587b2,_0x408f24);}},_0x9a1949=_0x396bc9[_0x4ba72c(0x1d4)](_0x30823c=>{const _0x441819=_0x4ba72c;return{'msgId':_0x30823c,'senderShowName':selfInfo[_0x441819(0x1aa)]};});return new Promise((_0x5782b4,_0x2e2336)=>{const _0x117eb3=_0x4ba72c,_0x52230d={'hBOLs':function(_0x173a91,_0xce3ee5){return _0x4b1ea1['Hrphs'](_0x173a91,_0xce3ee5);},'yfNRs':_0x4b1ea1[_0x117eb3(0x1b9)],'FRZBX':function(_0x37ac6e,_0x23450c){const _0x44d43c=_0x117eb3;return _0x4b1ea1[_0x44d43c(0x19a)](_0x37ac6e,_0x23450c);},'Yrgve':function(_0x5afd97,_0x65c850){return _0x5afd97==_0x65c850;}};let _0x9f01d5=![];const _0x4851b1=_0x20e8cb=>{const _0x9b0a95=_0x117eb3,_0x50da6a=_0x20e8cb[_0x9b0a95(0x1ba)][_0x9b0a95(0x1b0)](_0x35de49=>_0x35de49['arkElement']);if(!_0x50da6a)return;const _0xd6dd1c=JSON[_0x9b0a95(0x193)](_0x50da6a['arkElement']['bytesData']);if(_0x52230d[_0x9b0a95(0x194)](_0xd6dd1c[_0x9b0a95(0x1ae)],_0x52230d[_0x9b0a95(0x1b4)]))return;_0x52230d['FRZBX'](_0x20e8cb[_0x9b0a95(0x1b1)],_0x3ba0b6[_0x9b0a95(0x1b1)])&&_0x52230d[_0x9b0a95(0x1bc)](_0x20e8cb[_0x9b0a95(0x1d0)],selfInfo[_0x9b0a95(0x1d8)])&&(_0x9f01d5=!![],_0x5782b4(_0x20e8cb));};sentMsgTasks[_0x117eb3(0x1a8)](_0x4b1ea1[_0x117eb3(0x1be)](randomUUID),_0x4851b1),_0x4b1ea1[_0x117eb3(0x1b2)](setTimeout,()=>{!_0x9f01d5&&_0x2e2336(_0x4b1ea1['mOgKX']);},0x1388),napCatCore[_0x117eb3(0x1d6)][_0x117eb3(0x1a7)]()[_0x117eb3(0x19e)](_0x9a1949,_0x35813a,_0x3ba0b6,[],new Map());});}}