const _0x563b88=_0x1499;(function(_0x4f2e03,_0xaa2185){const _0xe4572a=_0x1499,_0x4e88ee=_0x4f2e03();while(!![]){try{const _0xae1518=parseInt(_0xe4572a(0xa6))/0x1*(parseInt(_0xe4572a(0x8f))/0x2)+-parseInt(_0xe4572a(0x8b))/0x3*(parseInt(_0xe4572a(0xba))/0x4)+-parseInt(_0xe4572a(0xb7))/0x5+parseInt(_0xe4572a(0x81))/0x6*(parseInt(_0xe4572a(0x77))/0x7)+-parseInt(_0xe4572a(0xb6))/0x8*(parseInt(_0xe4572a(0x82))/0x9)+-parseInt(_0xe4572a(0x84))/0xa*(-parseInt(_0xe4572a(0xb2))/0xb)+parseInt(_0xe4572a(0x87))/0xc;if(_0xae1518===_0xaa2185)break;else _0x4e88ee['push'](_0x4e88ee['shift']());}catch(_0xc13304){_0x4e88ee['push'](_0x4e88ee['shift']());}}}(_0x35e3,0x22ab1));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x563b88(0x98)]=_0x3dd195=>{const _0x557df3=_0x563b88;for(const [_0x1bb3b8,_0x589832]of GroupFileInfoUpdateTasks){_0x589832(_0x3dd195),GroupFileInfoUpdateTasks[_0x557df3(0x7d)](_0x1bb3b8);}},msgListener[_0x563b88(0xb4)]=_0x15f452=>{const _0x1ad4ac=_0x563b88,_0x2983bf={'iQVjf':function(_0x4ae214,_0x187267){return _0x4ae214 instanceof _0x187267;}};for(const [_0x5debfd,_0x57b8c2]of sentMsgTasks){_0x57b8c2(_0x15f452),sentMsgTasks['delete'](_0x5debfd);}if(sendMessagePool[_0x15f452['peerUid']]){const _0x4edbdb=sendMessagePool[_0x15f452['peerUid']]?.(_0x15f452);_0x2983bf['iQVjf'](_0x4edbdb,Promise)&&_0x4edbdb[_0x1ad4ac(0x79)]()[_0x1ad4ac(0xbb)](logError);}},msgListener[_0x563b88(0xb0)]=_0x1b6cc6=>{const _0x42682d=_0x563b88,_0x38bd47={'mjhgs':function(_0x455ecc,_0x448246){return _0x455ecc(_0x448246);},'KclWI':function(_0x571b5e,_0x2b1f9b){return _0x571b5e instanceof _0x2b1f9b;},'DqigP':function(_0x1e1e08,_0x48fae0){return _0x1e1e08(_0x48fae0);}};_0x1b6cc6[_0x42682d(0x93)](_0x32ffd4=>{const _0xe3b8ce=_0x42682d;new Promise((_0x1bd062,_0x9f06da)=>{const _0x5a360c=_0x1499;for(const _0x2f7dd1 in sendSuccessCBMap){const _0x5d2ff8=sendSuccessCBMap[_0x2f7dd1],_0x125cb6=_0x38bd47[_0x5a360c(0x80)](_0x5d2ff8,_0x32ffd4),_0x218ba6=_0x261a86=>{_0x261a86&&delete sendSuccessCBMap[_0x2f7dd1];};_0x38bd47['KclWI'](_0x125cb6,Promise)?_0x125cb6[_0x5a360c(0x79)](_0x218ba6):_0x38bd47[_0x5a360c(0x89)](_0x218ba6,_0x125cb6);}})[_0xe3b8ce(0x79)]()[_0xe3b8ce(0xbb)](log);});},setTimeout(()=>{const _0x2f3616=_0x563b88;napCatCore[_0x2f3616(0x86)](()=>{const _0x254103=_0x2f3616;napCatCore[_0x254103(0x96)](msgListener);});},0x64);function _0x1499(_0x40bd7f,_0x5c6e93){const _0x35e3dd=_0x35e3();return _0x1499=function(_0x1499d0,_0x13a74b){_0x1499d0=_0x1499d0-0x74;let _0x10f31c=_0x35e3dd[_0x1499d0];return _0x10f31c;},_0x1499(_0x40bd7f,_0x5c6e93);}export class NTQQMsgApi{static async['setEmojiLike'](_0x1b8f80,_0x5a922f,_0x456079,_0x1f627f=!![]){const _0x5a4fb3=_0x563b88;return _0x456079=_0x456079[_0x5a4fb3(0xa2)](),napCatCore[_0x5a4fb3(0xae)][_0x5a4fb3(0xb8)]()[_0x5a4fb3(0x8d)](_0x1b8f80,_0x5a922f,_0x456079,_0x456079[_0x5a4fb3(0x9e)]>0x3?'2':'1',_0x1f627f);}static async[_0x563b88(0x74)](_0x31ea55,_0x4ef473,_0x1abf5c){const _0x13ba98=_0x563b88;return napCatCore[_0x13ba98(0xae)]['getMsgService']()[_0x13ba98(0x74)](_0x31ea55,_0x4ef473,_0x1abf5c);}static async[_0x563b88(0xa0)](_0x2abcb1,_0x1331c0){const _0x428187=_0x563b88;return await napCatCore[_0x428187(0xae)][_0x428187(0xb8)]()['getMsgsByMsgId'](_0x2abcb1,_0x1331c0);}static async[_0x563b88(0xb1)](_0x3ab0e0,_0x462b71,_0x139bf3,_0x42fcd8,_0x4df1c3){const _0x379ce3=_0x563b88;return await napCatCore[_0x379ce3(0xae)]['getMsgService']()[_0x379ce3(0xb1)](_0x3ab0e0,_0x462b71,_0x139bf3,_0x42fcd8,_0x4df1c3);}static async[_0x563b88(0x9f)](_0x1cd212){}static async[_0x563b88(0x7f)](_0x3e2188){}static async['setMsgRead'](_0x622b28){const _0x39df0d=_0x563b88;return napCatCore[_0x39df0d(0xae)][_0x39df0d(0xb8)]()['setMsgRead'](_0x622b28);}static async[_0x563b88(0x9b)](_0x30b0bb,_0x180d63){const _0x422adb={'YAZul':function(_0x43f6cb,_0x1a52de){return _0x43f6cb(_0x1a52de);},'rlgts':function(_0x31dc77,_0x24cae3){return _0x31dc77(_0x24cae3);},'NRaIU':function(_0x2a4c5a){return _0x2a4c5a();}};return new Promise(async(_0x251359,_0x3f53ba)=>{const _0x3558b1=_0x1499,_0x59cd60={'fXmAG':function(_0x4de543,_0x10e875){const _0x4d9dd2=_0x1499;return _0x422adb[_0x4d9dd2(0xb5)](_0x4de543,_0x10e875);}};let _0x21ad73=![];setTimeout(()=>{const _0x1868f4=_0x1499;!_0x21ad73&&_0x59cd60[_0x1868f4(0x7c)](_0x3f53ba,_0x1868f4(0x99));},0x1388);const _0x336741=_0x14ba71=>{_0x21ad73=!![],_0x422adb['YAZul'](_0x251359,_0x14ba71['item']);};GroupFileInfoUpdateTasks[_0x3558b1(0xac)](_0x422adb[_0x3558b1(0x91)](randomUUID),_0x336741),await napCatCore[_0x3558b1(0xae)]['getRichMediaService']()['getGroupFileList'](_0x30b0bb,_0x180d63);});}static async[_0x563b88(0x78)](_0x1a4604,_0x378593,_0x1f1cae){const _0x5b458a=_0x563b88;return napCatCore[_0x5b458a(0xae)][_0x5b458a(0xb8)]()['getMsgsIncludeSelf'](_0x1a4604,_0x378593,_0x1f1cae,!![]);}static async['fetchRecentContact'](){}static async[_0x563b88(0xa3)](_0x2719d1,_0x4a01ab){const _0xbd70cc=_0x563b88;await napCatCore[_0xbd70cc(0xae)][_0xbd70cc(0xb8)]()[_0xbd70cc(0xa3)]({'chatType':_0x2719d1[_0xbd70cc(0xa4)],'peerUid':_0x2719d1[_0xbd70cc(0xab)]},_0x4a01ab);}static async[_0x563b88(0x9a)](_0x86036b,_0x6989fe,_0x4d05f1=!![],_0x3a27fb=0x2710){const _0x28d384=_0x563b88,_0x3b3692={'kwXpn':function(_0xd9c03b,_0xa893f1){return _0xd9c03b>_0xa893f1;},'IvsCv':_0x28d384(0x97),'nkIJu':function(_0x14bb63,_0x3f57b4){return _0x14bb63(_0x3f57b4);},'MzqQo':function(_0x4cf2bb){return _0x4cf2bb();},'hQtHh':function(_0x8310a4,_0x4b4725){return _0x8310a4(_0x4b4725);},'SBpnX':function(_0x44eded,_0xe95619,_0x275f6c){return _0x44eded(_0xe95619,_0x275f6c);}},_0x31a73d=_0x86036b[_0x28d384(0xab)];let _0x59044c=0x0;const _0x1b5147=async()=>{const _0x45e6f2=_0x28d384;if(_0x3b3692[_0x45e6f2(0xad)](_0x59044c,_0x3a27fb))throw _0x3b3692[_0x45e6f2(0x8a)];const _0x30441e=sendMessagePool[_0x86036b[_0x45e6f2(0xab)]];if(_0x30441e)return await _0x3b3692[_0x45e6f2(0xa7)](sleep,0x1f4),_0x59044c+=0x1f4,await _0x3b3692['MzqQo'](_0x1b5147);else return;};return await _0x1b5147(),new Promise((_0x3a097,_0x322fce)=>{const _0x599637=_0x28d384;let _0x2c54c0=![],_0x2e202a=null;const _0x509f14=randomUUID();sendSuccessCBMap[_0x509f14]=_0x52d613=>{const _0x347281=_0x1499;if(_0x52d613[_0x347281(0x92)]===_0x2e202a?.[_0x347281(0x92)]){if(_0x52d613[_0x347281(0xb9)]===0x2)return delete sendSuccessCBMap[_0x509f14],_0x2c54c0=!![],_0x3b3692[_0x347281(0xaf)](_0x3a097,_0x52d613),!![];return![];}return![];},sendMessagePool[_0x31a73d]=async _0x30e7e1=>{delete sendMessagePool[_0x31a73d],_0x2e202a=_0x30e7e1;},_0x3b3692[_0x599637(0x95)](setTimeout,()=>{const _0x49a107=_0x599637;if(_0x2c54c0)return;delete sendMessagePool[_0x31a73d],delete sendSuccessCBMap[_0x509f14],_0x322fce(_0x3b3692[_0x49a107(0x8a)]);},_0x3a27fb);const _0x2ea07e=napCatCore[_0x599637(0xae)][_0x599637(0xb8)]()['sendMsg']('0',_0x86036b,_0x6989fe,new Map());});}static async[_0x563b88(0xa8)](_0x480090,_0xc22649,_0x156c31){const _0x4fd660=_0x563b88;return napCatCore[_0x4fd660(0xae)][_0x4fd660(0xb8)]()[_0x4fd660(0xa8)](_0x156c31,_0x480090,[_0xc22649],new Map());}static async[_0x563b88(0x85)](_0x46e862,_0x5f0967,_0x13a369){const _0x3d886e=_0x563b88,_0x28de32={'GmsJQ':function(_0x218884,_0x905442){return _0x218884!=_0x905442;},'hAzfZ':function(_0x285bca,_0x20082f){return _0x285bca==_0x20082f;},'NpFJe':function(_0x4322f5,_0x3d2454){return _0x4322f5(_0x3d2454);},'tvAXL':_0x3d886e(0xaa),'zFraW':function(_0x12e6a9){return _0x12e6a9();},'WATzv':function(_0x5c79be,_0x452f97,_0x21774c){return _0x5c79be(_0x452f97,_0x21774c);}},_0x155f8c=_0x13a369['map'](_0xead9d6=>{return{'msgId':_0xead9d6,'senderShowName':selfInfo['nick']};});return new Promise((_0xc34ef2,_0x354c2c)=>{const _0x4e22d1=_0x3d886e,_0x416a16={'xMMBp':function(_0x5589bc,_0x5ea3d1){const _0x459f25=_0x1499;return _0x28de32[_0x459f25(0xb3)](_0x5589bc,_0x5ea3d1);},'ODfug':_0x4e22d1(0xbc),'DeBSv':function(_0x40a98f,_0x7e14ba){const _0x4324ad=_0x4e22d1;return _0x28de32[_0x4324ad(0x9c)](_0x40a98f,_0x7e14ba);},'JhgVo':function(_0x119fcc,_0x5a3c67){const _0x56b1e2=_0x4e22d1;return _0x28de32[_0x56b1e2(0x8e)](_0x119fcc,_0x5a3c67);},'OyqkL':_0x28de32['tvAXL']};let _0x2b0077=![];const _0x469433=_0x54b856=>{const _0x351dd5=_0x4e22d1,_0xbc5ea9=_0x54b856[_0x351dd5(0x94)][_0x351dd5(0x75)](_0x16edf7=>_0x16edf7[_0x351dd5(0x76)]);if(!_0xbc5ea9)return;const _0xf19bfd=JSON[_0x351dd5(0x8c)](_0xbc5ea9[_0x351dd5(0x76)][_0x351dd5(0xa5)]);if(_0x416a16[_0x351dd5(0x88)](_0xf19bfd[_0x351dd5(0x7e)],_0x416a16[_0x351dd5(0xa1)]))return;_0x416a16[_0x351dd5(0x90)](_0x54b856[_0x351dd5(0xab)],_0x5f0967[_0x351dd5(0xab)])&&_0x54b856[_0x351dd5(0x7b)]==selfInfo[_0x351dd5(0x7a)]&&(_0x2b0077=!![],_0x416a16['JhgVo'](_0xc34ef2,_0x54b856));};sentMsgTasks['set'](_0x28de32['zFraW'](randomUUID),_0x469433),_0x28de32[_0x4e22d1(0x9d)](setTimeout,()=>{const _0x28298e=_0x4e22d1;!_0x2b0077&&_0x354c2c(_0x416a16[_0x28298e(0x83)]);},0x1388),napCatCore[_0x4e22d1(0xae)]['getMsgService']()[_0x4e22d1(0xa9)](_0x155f8c,_0x46e862,_0x5f0967,[],new Map());});}}function _0x35e3(){const _0x4f2c01=['bytesData','5128hkLZsL','nkIJu','forwardMsg','multiForwardMsgWithComment','转发消息超时','peerUid','set','kwXpn','session','hQtHh','onMsgInfoListUpdate','getMsgsBySeqAndCount','33QGrXyQ','GmsJQ','onAddSendMsg','rlgts','186920kItjKr','1006715wiTQwi','getMsgService','sendStatus','632GHygiM','catch','com.tencent.multimsg','getMultiMsg','find','arkElement','911813oXhHMz','getMsgHistory','then','uid','senderUid','fXmAG','delete','app','activateChatAndGetHistory','mjhgs','6CbVzqS','27VUBhWU','OyqkL','896990knjAnX','multiForwardMsg','onLoginSuccess','1477692tBTMYU','xMMBp','DqigP','IvsCv','4797YzjsAl','parse','setMsgEmojiLikes','NpFJe','56cvQGXi','DeBSv','NRaIU','msgId','forEach','elements','SBpnX','addListener','发送超时','onGroupFileInfoUpdate','获取群文件列表超时','sendMsg','getGroupFileList','hAzfZ','WATzv','length','activateChat','getMsgsByMsgId','ODfug','toString','recallMsg','chatType'];_0x35e3=function(){return _0x4f2c01;};return _0x35e3();}