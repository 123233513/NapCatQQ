function _0x301f(){const _0x27addb=['49bmXhjo','9xCBJOP','arkElement','Jvesn','then','activateChatAndGetHistory','66909mzGgYP','84839sQEUfe','Qjpyk','1608284jUmTCZ','getMsgsBySeqAndCount','oRxRv','multiForwardMsgWithComment','activateChat','onLoginSuccess','bytesData','XSQCC','7177730SkuDSX','hhNNr','getMultiMsg','map','getMsgsIncludeSelf','dVoIM','onMsgInfoListUpdate','delete','转发消息超时','eMLeO','session','881056FAlQvI','bylMR','tkgEj','getMsgsByMsgId','10ttoQQd','setMsgRead','UzOri','sendMsg','find','ZFjhw','cJCVr','177726atGWtN','multiForwardMsg','nick','onGroupFileInfoUpdate','WPYfP','qVpBb','chatType','toString','dgayJ','1756165dgQRjp','发送超时','msgId','peerUid','xhaxu','set','item','getMsgService','forEach','cogQg','setEmojiLike','VzieP','setMsgEmojiLikes','getGroupFileList','ejIaV','REJVJ','forwardMsg','catch','recallMsg'];_0x301f=function(){return _0x27addb;};return _0x301f();}const _0x1efd8e=_0x5759;function _0x5759(_0x347d02,_0x56a437){const _0x301fea=_0x301f();return _0x5759=function(_0x575901,_0x53ef7b){_0x575901=_0x575901-0xd9;let _0x34e487=_0x301fea[_0x575901];return _0x34e487;},_0x5759(_0x347d02,_0x56a437);}(function(_0xcbf1e1,_0x2a986e){const _0x5503a5=_0x5759,_0x12b305=_0xcbf1e1();while(!![]){try{const _0x16b63d=-parseInt(_0x5503a5(0xe0))/0x1*(-parseInt(_0x5503a5(0xf9))/0x2)+-parseInt(_0x5503a5(0xdf))/0x3+-parseInt(_0x5503a5(0xe2))/0x4+-parseInt(_0x5503a5(0x109))/0x5+parseInt(_0x5503a5(0x100))/0x6*(-parseInt(_0x5503a5(0xd9))/0x7)+parseInt(_0x5503a5(0xf5))/0x8+-parseInt(_0x5503a5(0xda))/0x9*(-parseInt(_0x5503a5(0xea))/0xa);if(_0x16b63d===_0x2a986e)break;else _0x12b305['push'](_0x12b305['shift']());}catch(_0x108e2b){_0x12b305['push'](_0x12b305['shift']());}}}(_0x301f,0x41b5a));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x1efd8e(0x103)]=_0x24954c=>{const _0x491278=_0x1efd8e,_0x1bde53={'iYOGW':function(_0x35e0e5,_0xf747ea){return _0x35e0e5(_0xf747ea);}};for(const [_0x1825cd,_0x2dee65]of GroupFileInfoUpdateTasks){_0x1bde53['iYOGW'](_0x2dee65,_0x24954c),GroupFileInfoUpdateTasks[_0x491278(0xf1)](_0x1825cd);}},msgListener['onAddSendMsg']=_0x526c93=>{const _0xac65b3=_0x1efd8e,_0x40d90b={'REJVJ':function(_0x47309f,_0x3d3228){return _0x47309f(_0x3d3228);},'vHLwa':function(_0x4c5232,_0x4c69cf){return _0x4c5232 instanceof _0x4c69cf;}};for(const [_0x101425,_0x4b029d]of sentMsgTasks){_0x40d90b[_0xac65b3(0x118)](_0x4b029d,_0x526c93),sentMsgTasks[_0xac65b3(0xf1)](_0x101425);}if(sendMessagePool[_0x526c93[_0xac65b3(0x10c)]]){const _0x1dd476=sendMessagePool[_0x526c93[_0xac65b3(0x10c)]]?.(_0x526c93);_0x40d90b['vHLwa'](_0x1dd476,Promise)&&_0x1dd476[_0xac65b3(0xdd)]()[_0xac65b3(0x11a)](logError);}},msgListener[_0x1efd8e(0xf0)]=_0x596adf=>{const _0x48413b=_0x1efd8e,_0x31c662={'KiRGl':function(_0x3ac0f2,_0x3f2b64){return _0x3ac0f2(_0x3f2b64);}};_0x596adf[_0x48413b(0x111)](_0x1d20b0=>{const _0x475269=_0x48413b;new Promise((_0x3db1dc,_0x4489e6)=>{const _0x474042=_0x5759;for(const _0x17e63b in sendSuccessCBMap){const _0x488671=sendSuccessCBMap[_0x17e63b],_0x12f8c2=_0x31c662['KiRGl'](_0x488671,_0x1d20b0),_0x567c0e=_0x154f4e=>{_0x154f4e&&delete sendSuccessCBMap[_0x17e63b];};_0x12f8c2 instanceof Promise?_0x12f8c2[_0x474042(0xdd)](_0x567c0e):_0x31c662['KiRGl'](_0x567c0e,_0x12f8c2);}})[_0x475269(0xdd)]()['catch'](log);});},setTimeout(()=>{const _0x2c1e11=_0x1efd8e;napCatCore[_0x2c1e11(0xe7)](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x1efd8e(0x113)](_0xbcdcac,_0x502e87,_0xdd5f75,_0x14ae19=!![]){const _0x1009de=_0x1efd8e,_0x2ff541={'tOmbQ':function(_0x5a7425,_0x404bac){return _0x5a7425>_0x404bac;}};return _0xdd5f75=_0xdd5f75[_0x1009de(0x107)](),napCatCore[_0x1009de(0xf4)][_0x1009de(0x110)]()[_0x1009de(0x115)](_0xbcdcac,_0x502e87,_0xdd5f75,_0x2ff541['tOmbQ'](_0xdd5f75['length'],0x3)?'2':'1',_0x14ae19);}static async[_0x1efd8e(0xec)](_0x5a807c,_0x109cb5,_0x12e25a){const _0x42cf6b=_0x1efd8e;return napCatCore[_0x42cf6b(0xf4)][_0x42cf6b(0x110)]()['getMultiMsg'](_0x5a807c,_0x109cb5,_0x12e25a);}static async[_0x1efd8e(0xf8)](_0x25e254,_0x444c97){const _0x61cbda=_0x1efd8e;return await napCatCore[_0x61cbda(0xf4)]['getMsgService']()['getMsgsByMsgId'](_0x25e254,_0x444c97);}static async['getMsgsBySeqAndCount'](_0x502abd,_0x4186d4,_0x415a60,_0xa01768,_0x5b5e7c){const _0x2f5f12=_0x1efd8e;return await napCatCore[_0x2f5f12(0xf4)][_0x2f5f12(0x110)]()[_0x2f5f12(0xe3)](_0x502abd,_0x4186d4,_0x415a60,_0xa01768,_0x5b5e7c);}static async[_0x1efd8e(0xe6)](_0x12944c){}static async[_0x1efd8e(0xde)](_0x215c4d){}static async[_0x1efd8e(0xfa)](_0x4ad6a9){const _0x55e896=_0x1efd8e;return napCatCore[_0x55e896(0xf4)][_0x55e896(0x110)]()[_0x55e896(0xfa)](_0x4ad6a9);}static async[_0x1efd8e(0x116)](_0x3874e1,_0x409c3d){const _0x7082ed={'Jvesn':'获取群文件列表超时','XSQCC':function(_0xc1507d,_0x560c4c,_0x16d257){return _0xc1507d(_0x560c4c,_0x16d257);}};return new Promise(async(_0x1843c5,_0x528924)=>{const _0x2db4a6=_0x5759,_0x140dc7={'dgayJ':_0x7082ed[_0x2db4a6(0xdc)]};let _0x41ebbc=![];_0x7082ed[_0x2db4a6(0xe9)](setTimeout,()=>{const _0x3a68e5=_0x2db4a6;!_0x41ebbc&&_0x528924(_0x140dc7[_0x3a68e5(0x108)]);},0x1388);const _0x9d667=_0x232078=>{const _0xf2c549=_0x2db4a6;_0x41ebbc=!![],_0x1843c5(_0x232078[_0xf2c549(0x10f)]);};GroupFileInfoUpdateTasks[_0x2db4a6(0x10e)](randomUUID(),_0x9d667),await napCatCore[_0x2db4a6(0xf4)]['getRichMediaService']()[_0x2db4a6(0x116)](_0x3874e1,_0x409c3d);});}static async['getMsgHistory'](_0xb13860,_0x1c98e6,_0x2d449b){const _0x1b9841=_0x1efd8e;return napCatCore[_0x1b9841(0xf4)][_0x1b9841(0x110)]()[_0x1b9841(0xee)](_0xb13860,_0x1c98e6,_0x2d449b,!![]);}static async['fetchRecentContact'](){}static async[_0x1efd8e(0x11b)](_0x1079da,_0x575048){const _0x5b7a57=_0x1efd8e;await napCatCore[_0x5b7a57(0xf4)]['getMsgService']()['recallMsg']({'chatType':_0x1079da[_0x5b7a57(0x106)],'peerUid':_0x1079da['peerUid']},_0x575048);}static async[_0x1efd8e(0xfc)](_0x4a3bd8,_0x40a4c6,_0x357ad8=!![],_0x2e91a9=0x2710){const _0x5d4269=_0x1efd8e,_0x102315={'WPYfP':function(_0x575b1b,_0x262e31){return _0x575b1b>_0x262e31;},'hhNNr':_0x5d4269(0x10a),'xhaxu':function(_0x1cab0a){return _0x1cab0a();},'tkgEj':function(_0xe14d8c,_0x4ff138,_0x1b6b1f){return _0xe14d8c(_0x4ff138,_0x1b6b1f);},'ZFjhw':function(_0x4af5d5){return _0x4af5d5();}},_0x5a32e4=_0x4a3bd8[_0x5d4269(0x10c)];let _0x5141c5=0x0;const _0x51088c=async()=>{const _0x4054d1=_0x5d4269;if(_0x102315[_0x4054d1(0x104)](_0x5141c5,_0x2e91a9))throw _0x102315[_0x4054d1(0xeb)];const _0x221e95=sendMessagePool[_0x4a3bd8[_0x4054d1(0x10c)]];if(_0x221e95)return await sleep(0x1f4),_0x5141c5+=0x1f4,await _0x51088c();else return;};return await _0x102315[_0x5d4269(0xfe)](_0x51088c),new Promise((_0x25224a,_0x4bd4c9)=>{const _0x4fb2e8=_0x5d4269,_0x11a3cb={'qVpBb':function(_0x19bf0c,_0x34a444){return _0x19bf0c(_0x34a444);}};let _0x3eda7f=![],_0x15e179=null;const _0x1019af=_0x102315[_0x4fb2e8(0x10d)](randomUUID);sendSuccessCBMap[_0x1019af]=_0x3e0044=>{const _0x282113=_0x4fb2e8;if(_0x3e0044[_0x282113(0x10b)]===_0x15e179?.[_0x282113(0x10b)]){if(_0x3e0044['sendStatus']===0x2)return delete sendSuccessCBMap[_0x1019af],_0x3eda7f=!![],_0x11a3cb['qVpBb'](_0x25224a,_0x3e0044),!![];return![];}return![];},sendMessagePool[_0x5a32e4]=async _0x3aa644=>{delete sendMessagePool[_0x5a32e4],_0x15e179=_0x3aa644;},_0x102315[_0x4fb2e8(0xf7)](setTimeout,()=>{const _0x37c2d4=_0x4fb2e8;if(_0x3eda7f)return;delete sendMessagePool[_0x5a32e4],delete sendSuccessCBMap[_0x1019af],_0x11a3cb[_0x37c2d4(0x105)](_0x4bd4c9,'发送超时');},_0x2e91a9);const _0xd3d5ee=napCatCore[_0x4fb2e8(0xf4)]['getMsgService']()[_0x4fb2e8(0xfc)]('0',_0x4a3bd8,_0x40a4c6,new Map());});}static async['forwardMsg'](_0x59ca08,_0x5bd764,_0x2b06a9){const _0x1cb0e4=_0x1efd8e;return napCatCore[_0x1cb0e4(0xf4)][_0x1cb0e4(0x110)]()[_0x1cb0e4(0x119)](_0x2b06a9,_0x59ca08,[_0x5bd764],new Map());}static async[_0x1efd8e(0x101)](_0x5b1eba,_0x41925f,_0x98fd84){const _0x55ebaa=_0x1efd8e,_0x5440e1={'UzOri':function(_0x263bee,_0x463754){return _0x263bee(_0x463754);},'htoti':function(_0x16dfa1,_0x144900){return _0x16dfa1!=_0x144900;},'dVoIM':'com.tencent.multimsg','cogQg':function(_0x118b5e,_0x483b1d){return _0x118b5e==_0x483b1d;},'ejIaV':function(_0x8fefa,_0x3a6a63){return _0x8fefa==_0x3a6a63;},'VzieP':function(_0x204d03,_0x3efe46){return _0x204d03(_0x3efe46);},'eMLeO':function(_0x1ad044){return _0x1ad044();}},_0x411f3f=_0x98fd84[_0x55ebaa(0xed)](_0x138dfc=>{const _0xd8d6e1=_0x55ebaa;return{'msgId':_0x138dfc,'senderShowName':selfInfo[_0xd8d6e1(0x102)]};});return new Promise((_0x151df0,_0x7034d7)=>{const _0x25d734=_0x55ebaa,_0x1b5a9d={'cJCVr':function(_0x4c69e9,_0xc9a4fd){return _0x5440e1['htoti'](_0x4c69e9,_0xc9a4fd);},'Qjpyk':_0x5440e1[_0x25d734(0xef)],'bylMR':function(_0x299834,_0x31b4aa){const _0x219f41=_0x25d734;return _0x5440e1[_0x219f41(0x112)](_0x299834,_0x31b4aa);},'oRxRv':function(_0x3eb4df,_0x5d7b21){const _0x4292f3=_0x25d734;return _0x5440e1[_0x4292f3(0x117)](_0x3eb4df,_0x5d7b21);},'vcFhl':function(_0x54b5c0,_0x44386c){const _0x200a49=_0x25d734;return _0x5440e1[_0x200a49(0x114)](_0x54b5c0,_0x44386c);}};let _0x220d54=![];const _0x4606a6=_0x23efe2=>{const _0x30cacc=_0x25d734,_0x10586c=_0x23efe2['elements'][_0x30cacc(0xfd)](_0x2ce77d=>_0x2ce77d[_0x30cacc(0xdb)]);if(!_0x10586c)return;const _0x41f4a5=JSON['parse'](_0x10586c[_0x30cacc(0xdb)][_0x30cacc(0xe8)]);if(_0x1b5a9d[_0x30cacc(0xff)](_0x41f4a5['app'],_0x1b5a9d[_0x30cacc(0xe1)]))return;_0x1b5a9d[_0x30cacc(0xf6)](_0x23efe2['peerUid'],_0x41925f[_0x30cacc(0x10c)])&&_0x1b5a9d[_0x30cacc(0xe4)](_0x23efe2['senderUid'],selfInfo['uid'])&&(_0x220d54=!![],_0x1b5a9d['vcFhl'](_0x151df0,_0x23efe2));};sentMsgTasks[_0x25d734(0x10e)](_0x5440e1[_0x25d734(0xf3)](randomUUID),_0x4606a6),setTimeout(()=>{const _0x3fd20c=_0x25d734;!_0x220d54&&_0x5440e1[_0x3fd20c(0xfb)](_0x7034d7,_0x3fd20c(0xf2));},0x1388),napCatCore[_0x25d734(0xf4)][_0x25d734(0x110)]()[_0x25d734(0xe5)](_0x411f3f,_0x5b1eba,_0x41925f,[],new Map());});}}