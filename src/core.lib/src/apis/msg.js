const _0x164336=_0x67ec;(function(_0x5ac9cb,_0x3b382b){const _0x288adf=_0x67ec,_0xc44baf=_0x5ac9cb();while(!![]){try{const _0x361d9c=parseInt(_0x288adf(0x219))/0x1*(-parseInt(_0x288adf(0x1f6))/0x2)+-parseInt(_0x288adf(0x1eb))/0x3*(-parseInt(_0x288adf(0x1e6))/0x4)+-parseInt(_0x288adf(0x1fa))/0x5*(-parseInt(_0x288adf(0x20c))/0x6)+-parseInt(_0x288adf(0x1f9))/0x7+-parseInt(_0x288adf(0x1e9))/0x8+-parseInt(_0x288adf(0x21a))/0x9+parseInt(_0x288adf(0x209))/0xa*(parseInt(_0x288adf(0x1ff))/0xb);if(_0x361d9c===_0x3b382b)break;else _0xc44baf['push'](_0xc44baf['shift']());}catch(_0x1d5ed7){_0xc44baf['push'](_0xc44baf['shift']());}}}(_0x1b23,0x94482));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x67ec(_0x178041,_0x251638){const _0x1b236b=_0x1b23();return _0x67ec=function(_0x67ec15,_0x5b898d){_0x67ec15=_0x67ec15-0x1df;let _0x4e9fd7=_0x1b236b[_0x67ec15];return _0x4e9fd7;},_0x67ec(_0x178041,_0x251638);}import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x1b23(){const _0x5b9724=['HgVJy','PdqPB','getMsgsIncludeSelf','2372556ijojGs','YQdda','onLoginSuccess','3767256EOLzFM','oKqDk','3YbutUo','npBwd','jyHrf','parse','Jgdiz','uXASE','uid','arkElement','senderUid','catch','HOcrh','32218aLPUiv','peerUid','转发消息超时','3690260FthqNx','1356755EbRrcU','lQbMD','msgId','onAddSendMsg','tQbDo','1614602sUDIrO','multiForwardMsg','nick','session','forwardMsg','delete','sendMsg','Oddev','HTnMB','发送超时','170menesW','XSfzz','then','6iqmVIA','set','com.tencent.multimsg','chatType','getMsgsByMsgId','elements','onMsgInfoListUpdate','setMsgEmojiLikes','SViOC','activateChatAndGetHistory','sendStatus','qxBWV','getMultiMsg','59QAFWNT','7235136iXGONz','map','find','getMsgService','getMsgsBySeqAndCount','multiForwardMsgWithComment','recallMsg','forEach','fetchRecentContact','setEmojiLike','qGDGA','setMsgRead'];_0x1b23=function(){return _0x5b9724;};return _0x1b23();}const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x164336(0x1fd)]=_0x333c31=>{const _0x5411d1=_0x164336,_0x5b36bd={'HgVJy':function(_0x2b3b0e,_0x90b4b8){return _0x2b3b0e instanceof _0x90b4b8;}};for(const [_0x4bbbc4,_0x25eaf5]of sentMsgTasks){_0x25eaf5(_0x333c31),sentMsgTasks[_0x5411d1(0x204)](_0x4bbbc4);}if(sendMessagePool[_0x333c31['peerUid']]){const _0x41ba05=sendMessagePool[_0x333c31[_0x5411d1(0x1f7)]]?.(_0x333c31);_0x5b36bd[_0x5411d1(0x1e3)](_0x41ba05,Promise)&&_0x41ba05[_0x5411d1(0x20b)]()[_0x5411d1(0x1f4)](logError);}},msgListener[_0x164336(0x212)]=_0x4a335a=>{const _0x313ebe=_0x164336,_0x2af9c0={'TpeyD':function(_0x2a48d3,_0x4d1ff7){return _0x2a48d3(_0x4d1ff7);},'tQbDo':function(_0x121c85,_0x3b1804){return _0x121c85 instanceof _0x3b1804;}};_0x4a335a[_0x313ebe(0x221)](_0x4d11ce=>{const _0x4cd891=_0x313ebe,_0x2fcfd4={'jyHrf':function(_0x5774cc,_0x32f66d){return _0x2af9c0['TpeyD'](_0x5774cc,_0x32f66d);},'Oddev':function(_0x6af6d2,_0x4adabd){const _0x2d1900=_0x67ec;return _0x2af9c0[_0x2d1900(0x1fe)](_0x6af6d2,_0x4adabd);}};new Promise((_0x7c928f,_0x4ea86f)=>{const _0x31ffc0=_0x67ec;for(const _0x178a9d in sendSuccessCBMap){const _0x5a298d=sendSuccessCBMap[_0x178a9d],_0x1d07d2=_0x2fcfd4[_0x31ffc0(0x1ed)](_0x5a298d,_0x4d11ce),_0x2d490a=_0x2bd559=>{_0x2bd559&&delete sendSuccessCBMap[_0x178a9d];};_0x2fcfd4[_0x31ffc0(0x206)](_0x1d07d2,Promise)?_0x1d07d2[_0x31ffc0(0x20b)](_0x2d490a):_0x2fcfd4['jyHrf'](_0x2d490a,_0x1d07d2);}})['then']()[_0x4cd891(0x1f4)](log);});},setTimeout(()=>{const _0x109ec5=_0x164336;napCatCore[_0x109ec5(0x1e8)](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x164336(0x1e0)](_0xcd94ec,_0x90e38f,_0x1f406a,_0x32959b=!![]){const _0x5d5841=_0x164336,_0x5c946d={'PdqPB':function(_0x2de22d,_0xdbfb2a){return _0x2de22d>_0xdbfb2a;}};return _0x1f406a=_0x1f406a['toString'](),napCatCore['session'][_0x5d5841(0x21d)]()[_0x5d5841(0x213)](_0xcd94ec,_0x90e38f,_0x1f406a,_0x5c946d[_0x5d5841(0x1e4)](_0x1f406a['length'],0x3)?'2':'1',_0x32959b);}static async[_0x164336(0x218)](_0x3ea536,_0x529e65,_0x2f1ec6){const _0x1e064f=_0x164336;return napCatCore['session'][_0x1e064f(0x21d)]()[_0x1e064f(0x218)](_0x3ea536,_0x529e65,_0x2f1ec6);}static async['getMsgsByMsgId'](_0x38dcd0,_0x54f563){const _0x1479a0=_0x164336;return await napCatCore['session'][_0x1479a0(0x21d)]()[_0x1479a0(0x210)](_0x38dcd0,_0x54f563);}static async['getMsgsBySeqAndCount'](_0x226fdf,_0x59ddf4,_0x5a370e,_0x3045a0,_0x20ca1d){const _0xcb5ce=_0x164336;return await napCatCore[_0xcb5ce(0x202)]['getMsgService']()[_0xcb5ce(0x21e)](_0x226fdf,_0x59ddf4,_0x5a370e,_0x3045a0,_0x20ca1d);}static async['activateChat'](_0x128dcf){}static async[_0x164336(0x215)](_0x312c9f){}static async[_0x164336(0x1e2)](_0x123b88){const _0xf9c8c0=_0x164336;return napCatCore['session'][_0xf9c8c0(0x21d)]()[_0xf9c8c0(0x1e2)](_0x123b88);}static async['getMsgHistory'](_0x258172,_0x4b5338,_0x4b32ea){const _0x45c79b=_0x164336;return napCatCore[_0x45c79b(0x202)][_0x45c79b(0x21d)]()[_0x45c79b(0x1e5)](_0x258172,_0x4b5338,_0x4b32ea,!![]);}static async[_0x164336(0x1df)](){}static async[_0x164336(0x220)](_0x4d84ed,_0x462156){const _0x3db827=_0x164336;await napCatCore['session'][_0x3db827(0x21d)]()[_0x3db827(0x220)]({'chatType':_0x4d84ed[_0x3db827(0x20f)],'peerUid':_0x4d84ed[_0x3db827(0x1f7)]},_0x462156);}static async['sendMsg'](_0xd12582,_0x2979ef,_0x1ed060=!![],_0x4f18f0=0x2710){const _0x499fa3=_0x164336,_0x39d536={'npBwd':function(_0x3c37cf,_0x4fd600){return _0x3c37cf>_0x4fd600;},'XSfzz':_0x499fa3(0x208),'Wyfcz':function(_0x32ac8d,_0x2185cd){return _0x32ac8d===_0x2185cd;},'lQbMD':function(_0x3ac5a7,_0x329986){return _0x3ac5a7(_0x329986);},'HTnMB':function(_0x126d8e,_0x3b5e74,_0x191683){return _0x126d8e(_0x3b5e74,_0x191683);}},_0x52ed06=_0xd12582[_0x499fa3(0x1f7)];let _0x4dfd26=0x0;const _0xb0e393=async()=>{const _0x47ad97=_0x499fa3;if(_0x39d536[_0x47ad97(0x1ec)](_0x4dfd26,_0x4f18f0))throw _0x39d536[_0x47ad97(0x20a)];const _0x2c0d48=sendMessagePool[_0xd12582[_0x47ad97(0x1f7)]];if(_0x2c0d48)return await sleep(0x1f4),_0x4dfd26+=0x1f4,await _0xb0e393();else return;};return await _0xb0e393(),new Promise((_0x10ea9e,_0x86f6d9)=>{const _0x45b134=_0x499fa3;let _0x336d98=![],_0x24b131=null;const _0x31686f=randomUUID();sendSuccessCBMap[_0x31686f]=_0x1773ae=>{const _0x43adcb=_0x67ec;if(_0x39d536['Wyfcz'](_0x1773ae[_0x43adcb(0x1fc)],_0x24b131?.[_0x43adcb(0x1fc)])){if(_0x1773ae[_0x43adcb(0x216)]===0x2)return delete sendSuccessCBMap[_0x31686f],_0x336d98=!![],_0x39d536[_0x43adcb(0x1fb)](_0x10ea9e,_0x1773ae),!![];return![];}return![];},sendMessagePool[_0x52ed06]=async _0x412022=>{delete sendMessagePool[_0x52ed06],_0x24b131=_0x412022;},_0x39d536[_0x45b134(0x207)](setTimeout,()=>{const _0x111656=_0x45b134;if(_0x336d98)return;delete sendMessagePool[_0x52ed06],delete sendSuccessCBMap[_0x31686f],_0x39d536[_0x111656(0x1fb)](_0x86f6d9,_0x111656(0x208));},_0x4f18f0);const _0x52478c=napCatCore[_0x45b134(0x202)][_0x45b134(0x21d)]()[_0x45b134(0x205)]('0',_0xd12582,_0x2979ef,new Map());});}static async[_0x164336(0x203)](_0xb358f,_0x5edc7d,_0x12723a){const _0x45b3ab=_0x164336;return napCatCore[_0x45b3ab(0x202)]['getMsgService']()[_0x45b3ab(0x203)](_0x12723a,_0xb358f,[_0x5edc7d],new Map());}static async[_0x164336(0x200)](_0x4257b5,_0x29a79c,_0x10761a){const _0x386202=_0x164336,_0x35508b={'uXASE':function(_0x8bba6a,_0x4c3e77){return _0x8bba6a!=_0x4c3e77;},'Jgdiz':_0x386202(0x20e),'CqErE':function(_0x3a8bab,_0x348a1b){return _0x3a8bab==_0x348a1b;},'nVwxO':function(_0xfb2177,_0x4c9acf){return _0xfb2177(_0x4c9acf);},'RAFpZ':function(_0x53b383,_0x2c6d4d){return _0x53b383(_0x2c6d4d);},'qxBWV':function(_0x59fa5e){return _0x59fa5e();}},_0x121090=_0x10761a[_0x386202(0x21b)](_0x37dd0a=>{const _0x5afe92=_0x386202;return{'msgId':_0x37dd0a,'senderShowName':selfInfo[_0x5afe92(0x201)]};});return new Promise((_0x1d1ac0,_0x423122)=>{const _0x34cb0e=_0x386202,_0x4c1d90={'SViOC':function(_0xccf2d8,_0x2b927c){const _0x225e92=_0x67ec;return _0x35508b[_0x225e92(0x1f0)](_0xccf2d8,_0x2b927c);},'YQdda':_0x35508b[_0x34cb0e(0x1ef)],'oKqDk':function(_0x15aee6,_0x5b6ddf){return _0x35508b['CqErE'](_0x15aee6,_0x5b6ddf);},'qGDGA':function(_0x29c960,_0x441c2e){return _0x35508b['nVwxO'](_0x29c960,_0x441c2e);},'HOcrh':function(_0x4cac69,_0x25985e){return _0x35508b['RAFpZ'](_0x4cac69,_0x25985e);}};let _0x4772bc=![];const _0x352b80=_0x378919=>{const _0x2b401b=_0x34cb0e,_0x59355b=_0x378919[_0x2b401b(0x211)][_0x2b401b(0x21c)](_0x45daa8=>_0x45daa8[_0x2b401b(0x1f2)]);if(!_0x59355b)return;const _0x2671cb=JSON[_0x2b401b(0x1ee)](_0x59355b[_0x2b401b(0x1f2)]['bytesData']);if(_0x4c1d90[_0x2b401b(0x214)](_0x2671cb['app'],_0x4c1d90[_0x2b401b(0x1e7)]))return;_0x4c1d90[_0x2b401b(0x1ea)](_0x378919[_0x2b401b(0x1f7)],_0x29a79c[_0x2b401b(0x1f7)])&&_0x378919[_0x2b401b(0x1f3)]==selfInfo[_0x2b401b(0x1f1)]&&(_0x4772bc=!![],_0x4c1d90[_0x2b401b(0x1e1)](_0x1d1ac0,_0x378919));};sentMsgTasks[_0x34cb0e(0x20d)](_0x35508b[_0x34cb0e(0x217)](randomUUID),_0x352b80),setTimeout(()=>{const _0x2e9882=_0x34cb0e;!_0x4772bc&&_0x4c1d90[_0x2e9882(0x1f5)](_0x423122,_0x2e9882(0x1f8));},0x1388),napCatCore[_0x34cb0e(0x202)][_0x34cb0e(0x21d)]()[_0x34cb0e(0x21f)](_0x121090,_0x4257b5,_0x29a79c,[],new Map());});}}