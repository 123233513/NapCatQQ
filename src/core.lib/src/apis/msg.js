const _0x5763e9=_0x291a;function _0x4022(){const _0x15709e=['aGXSb','PBncB','AUVwi','aYImL','转发消息超时','mSgXU','GdgOa','10hAfYOo','length','kIVvk','getMsgsIncludeSelf','recallMsg','sendStatus','onAddSendMsg','fetchRecentContact','parse','HPLIK','nfhSS','sendMsg','inYwk','dekSO','set','anUjl','获取群文件列表超时','activateChatAndGetHistory','nHtMv','delete','getRichMediaService','LUQnG','forwardMsg','253284mQVxZV','map','multiForwardMsgWithComment','getMsgService','forEach','getGroupFileList','ehinZ','getMsgsByMsgId','multiForwardMsg','OCKMT','发送超时','416136BQvanq','InlWc','568631UvzErI','setEmojiLike','chatType','com.tencent.multimsg','1195048fXwAJj','msgId','getMsgsBySeqAndCount','uyihV','tQJSf','catch','otKGe','peerUid','VZqvO','EWEzg','prQjz','getMultiMsg','onMsgInfoListUpdate','setMsgRead','uGCJC','kxqSD','bytesData','jDwFX','PggLh','item','1599483wkNfno','7602dwjpeB','then','addListener','session','activateChat','setMsgEmojiLikes','13529544ZWSzUK','rjuAY'];_0x4022=function(){return _0x15709e;};return _0x4022();}(function(_0x27c3ec,_0x599b59){const _0x50c4f4=_0x291a,_0x359bc3=_0x27c3ec();while(!![]){try{const _0x89f37=-parseInt(_0x50c4f4(0x18a))/0x1+-parseInt(_0x50c4f4(0x190))/0x2+-parseInt(_0x50c4f4(0x158))/0x3+parseInt(_0x50c4f4(0x17f))/0x4*(parseInt(_0x50c4f4(0x168))/0x5)+parseInt(_0x50c4f4(0x159))/0x6+parseInt(_0x50c4f4(0x18c))/0x7+parseInt(_0x50c4f4(0x15f))/0x8;if(_0x89f37===_0x599b59)break;else _0x359bc3['push'](_0x359bc3['shift']());}catch(_0x3432db){_0x359bc3['push'](_0x359bc3['shift']());}}}(_0x4022,0x564ea));import{selfInfo}from'@/core/data';function _0x291a(_0x388b8b,_0x4c7965){const _0x402205=_0x4022();return _0x291a=function(_0x291a3f,_0x49cbe1){_0x291a3f=_0x291a3f-0x152;let _0x4bdf23=_0x402205[_0x291a3f];return _0x4bdf23;},_0x291a(_0x388b8b,_0x4c7965);}import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onGroupFileInfoUpdate']=_0x3b15a2=>{for(const [_0x4ccd37,_0x59437f]of GroupFileInfoUpdateTasks){_0x59437f(_0x3b15a2),GroupFileInfoUpdateTasks['delete'](_0x4ccd37);}},msgListener[_0x5763e9(0x16e)]=_0x3fa185=>{const _0x567302=_0x5763e9,_0x20d659={'VsEYS':function(_0x5871c5,_0x2989f6){return _0x5871c5(_0x2989f6);},'aGXSb':function(_0x437aaa,_0x2d15f0){return _0x437aaa instanceof _0x2d15f0;}};for(const [_0x29501f,_0x175d6c]of sentMsgTasks){_0x20d659['VsEYS'](_0x175d6c,_0x3fa185),sentMsgTasks[_0x567302(0x17b)](_0x29501f);}if(sendMessagePool[_0x3fa185['peerUid']]){const _0x41aa00=sendMessagePool[_0x3fa185['peerUid']]?.(_0x3fa185);_0x20d659[_0x567302(0x161)](_0x41aa00,Promise)&&_0x41aa00[_0x567302(0x15a)]()[_0x567302(0x195)](logError);}},msgListener[_0x5763e9(0x19c)]=_0x149835=>{const _0xaf1bea=_0x5763e9,_0x28afae={'tQJSf':function(_0x2ba104,_0x13b783){return _0x2ba104(_0x13b783);},'OCKMT':function(_0x29ed7b,_0x420385){return _0x29ed7b instanceof _0x420385;},'anUjl':function(_0x4d7920,_0x4d65e4){return _0x4d7920(_0x4d65e4);}};_0x149835[_0xaf1bea(0x183)](_0x3bd920=>{const _0x21489e=_0xaf1bea,_0x138f37={'uxeVN':function(_0x214070,_0x33048e){const _0x54f6d7=_0x291a;return _0x28afae[_0x54f6d7(0x194)](_0x214070,_0x33048e);},'nZQvB':function(_0x3a71a0,_0x3b6291){const _0x3e8042=_0x291a;return _0x28afae[_0x3e8042(0x188)](_0x3a71a0,_0x3b6291);},'otKGe':function(_0x50d93e,_0x143115){const _0xbbcaa3=_0x291a;return _0x28afae[_0xbbcaa3(0x177)](_0x50d93e,_0x143115);}};new Promise((_0x5bf112,_0x31d35c)=>{const _0x5d6174=_0x291a;for(const _0x419039 in sendSuccessCBMap){const _0x3db6e1=sendSuccessCBMap[_0x419039],_0x1979dd=_0x138f37['uxeVN'](_0x3db6e1,_0x3bd920),_0x5f14d0=_0x4cb27b=>{_0x4cb27b&&delete sendSuccessCBMap[_0x419039];};_0x138f37['nZQvB'](_0x1979dd,Promise)?_0x1979dd['then'](_0x5f14d0):_0x138f37[_0x5d6174(0x196)](_0x5f14d0,_0x1979dd);}})[_0x21489e(0x15a)]()['catch'](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x514b92=_0x291a;napCatCore[_0x514b92(0x15b)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x5763e9(0x18d)](_0x27c51f,_0x59c709,_0x4e61ae,_0x5c75e1=!![]){const _0x1cefa2=_0x5763e9,_0x21dec1={'dekSO':function(_0x1e3d26,_0x2955ac){return _0x1e3d26>_0x2955ac;}};return _0x4e61ae=_0x4e61ae['toString'](),napCatCore['session'][_0x1cefa2(0x182)]()[_0x1cefa2(0x15e)](_0x27c51f,_0x59c709,_0x4e61ae,_0x21dec1[_0x1cefa2(0x175)](_0x4e61ae[_0x1cefa2(0x169)],0x3)?'2':'1',_0x5c75e1);}static async[_0x5763e9(0x19b)](_0x25d5cd,_0x11b20e,_0x57d916){const _0x84e8b3=_0x5763e9;return napCatCore[_0x84e8b3(0x15c)]['getMsgService']()['getMultiMsg'](_0x25d5cd,_0x11b20e,_0x57d916);}static async[_0x5763e9(0x186)](_0x574177,_0x2ed96f){const _0x519515=_0x5763e9;return await napCatCore[_0x519515(0x15c)][_0x519515(0x182)]()[_0x519515(0x186)](_0x574177,_0x2ed96f);}static async[_0x5763e9(0x192)](_0x2d9a11,_0x408f0c,_0x38ac25,_0x5ec25c,_0x3dba1e){const _0xd79543=_0x5763e9;return await napCatCore['session']['getMsgService']()[_0xd79543(0x192)](_0x2d9a11,_0x408f0c,_0x38ac25,_0x5ec25c,_0x3dba1e);}static async[_0x5763e9(0x15d)](_0x283139){}static async[_0x5763e9(0x179)](_0x1077e8){}static async[_0x5763e9(0x19d)](_0xfdd632){const _0x4e748b=_0x5763e9;return napCatCore[_0x4e748b(0x15c)][_0x4e748b(0x182)]()[_0x4e748b(0x19d)](_0xfdd632);}static async['getGroupFileList'](_0x20716,_0x333be7){const _0x397a13=_0x5763e9,_0xef6c9c={'kxqSD':function(_0x1e2f4d,_0x291ea2){return _0x1e2f4d(_0x291ea2);},'prQjz':_0x397a13(0x178),'zkQgI':function(_0xc5c181,_0x5d6272){return _0xc5c181(_0x5d6272);},'inYwk':function(_0x4c7f38,_0x255ac7,_0x39ea63){return _0x4c7f38(_0x255ac7,_0x39ea63);},'aYImL':function(_0x313112){return _0x313112();}};return new Promise(async(_0x3ef385,_0x51064a)=>{const _0x4eb07d=_0x397a13,_0x57cc14={'nfhSS':function(_0x24624b,_0x4cdae9){return _0xef6c9c['zkQgI'](_0x24624b,_0x4cdae9);}};let _0x4ef8f2=![];_0xef6c9c[_0x4eb07d(0x174)](setTimeout,()=>{const _0x56e7ff=_0x4eb07d;!_0x4ef8f2&&_0xef6c9c[_0x56e7ff(0x153)](_0x51064a,_0xef6c9c[_0x56e7ff(0x19a)]);},0x1388);const _0x500e39=_0xbb1eae=>{const _0x207df9=_0x4eb07d;_0x4ef8f2=!![],_0x57cc14[_0x207df9(0x172)](_0x3ef385,_0xbb1eae[_0x207df9(0x157)]);};GroupFileInfoUpdateTasks[_0x4eb07d(0x176)](_0xef6c9c[_0x4eb07d(0x164)](randomUUID),_0x500e39),await napCatCore[_0x4eb07d(0x15c)][_0x4eb07d(0x17c)]()[_0x4eb07d(0x184)](_0x20716,_0x333be7);});}static async['getMsgHistory'](_0x247c38,_0x63ccd4,_0x21cd9f){const _0x2385c9=_0x5763e9;return napCatCore[_0x2385c9(0x15c)][_0x2385c9(0x182)]()[_0x2385c9(0x16b)](_0x247c38,_0x63ccd4,_0x21cd9f,!![]);}static async[_0x5763e9(0x16f)](){}static async['recallMsg'](_0xb44b0b,_0x61651a){const _0x5f1a12=_0x5763e9;await napCatCore[_0x5f1a12(0x15c)][_0x5f1a12(0x182)]()[_0x5f1a12(0x16c)]({'chatType':_0xb44b0b[_0x5f1a12(0x18e)],'peerUid':_0xb44b0b[_0x5f1a12(0x197)]},_0x61651a);}static async[_0x5763e9(0x173)](_0xbd0c50,_0x5b610d,_0xe006be=!![],_0x157139=0x2710){const _0x549525=_0x5763e9,_0x10f241={'VZqvO':function(_0x3fd374,_0x18f9bf){return _0x3fd374>_0x18f9bf;},'LUQnG':_0x549525(0x189),'GdgOa':function(_0x5569d9,_0xf627ca){return _0x5569d9(_0xf627ca);},'jDwFX':function(_0x388fa0){return _0x388fa0();},'InlWc':function(_0x4da90b){return _0x4da90b();},'PggLh':function(_0x5b15e1,_0x3eb86f,_0x2e21dc){return _0x5b15e1(_0x3eb86f,_0x2e21dc);}},_0x58f00e=_0xbd0c50[_0x549525(0x197)];let _0x3d0d4a=0x0;const _0x5b0bca=async()=>{const _0x3b7ebc=_0x549525;if(_0x10f241[_0x3b7ebc(0x198)](_0x3d0d4a,_0x157139))throw _0x10f241[_0x3b7ebc(0x17d)];const _0x111e36=sendMessagePool[_0xbd0c50[_0x3b7ebc(0x197)]];if(_0x111e36)return await _0x10f241[_0x3b7ebc(0x167)](sleep,0x1f4),_0x3d0d4a+=0x1f4,await _0x10f241['jDwFX'](_0x5b0bca);else return;};return await _0x10f241[_0x549525(0x155)](_0x5b0bca),new Promise((_0x120618,_0x5217a1)=>{const _0x9c4b4f=_0x549525,_0x23c576={'rjuAY':function(_0x324c2f,_0x2d52d1){return _0x324c2f===_0x2d52d1;},'uGCJC':function(_0x12668d,_0x4f1ea4){const _0x10c2ea=_0x291a;return _0x10f241[_0x10c2ea(0x167)](_0x12668d,_0x4f1ea4);},'OOmzB':_0x10f241[_0x9c4b4f(0x17d)]};let _0xa72023=![],_0x70d16e=null;const _0x4107c2=_0x10f241[_0x9c4b4f(0x18b)](randomUUID);sendSuccessCBMap[_0x4107c2]=_0x2d7315=>{const _0x549353=_0x9c4b4f;if(_0x23c576[_0x549353(0x160)](_0x2d7315['msgId'],_0x70d16e?.[_0x549353(0x191)])){if(_0x2d7315[_0x549353(0x16d)]===0x2)return delete sendSuccessCBMap[_0x4107c2],_0xa72023=!![],_0x23c576[_0x549353(0x152)](_0x120618,_0x2d7315),!![];return![];}return![];},sendMessagePool[_0x58f00e]=async _0x5f1cfc=>{delete sendMessagePool[_0x58f00e],_0x70d16e=_0x5f1cfc;},_0x10f241[_0x9c4b4f(0x156)](setTimeout,()=>{const _0x299072=_0x9c4b4f;if(_0xa72023)return;delete sendMessagePool[_0x58f00e],delete sendSuccessCBMap[_0x4107c2],_0x23c576[_0x299072(0x152)](_0x5217a1,_0x23c576['OOmzB']);},_0x157139);const _0x208cd6=napCatCore[_0x9c4b4f(0x15c)][_0x9c4b4f(0x182)]()[_0x9c4b4f(0x173)]('0',_0xbd0c50,_0x5b610d,new Map());});}static async[_0x5763e9(0x17e)](_0x28061a,_0x548687,_0x17b37f){const _0x2fa6f2=_0x5763e9;return napCatCore['session'][_0x2fa6f2(0x182)]()[_0x2fa6f2(0x17e)](_0x17b37f,_0x28061a,[_0x548687],new Map());}static async[_0x5763e9(0x187)](_0x4f69b3,_0x10eb66,_0x4d7209){const _0xcb4f38=_0x5763e9,_0x373bdb={'AUVwi':_0xcb4f38(0x18f),'PBncB':function(_0x18a85e,_0x269c5c){return _0x18a85e==_0x269c5c;},'kIVvk':function(_0x50f7b9,_0x2de2ae){return _0x50f7b9(_0x2de2ae);},'HPLIK':_0xcb4f38(0x165),'uyihV':function(_0x470f0c){return _0x470f0c();},'nHtMv':function(_0x52236f,_0x2ed9c0,_0x5c0d62){return _0x52236f(_0x2ed9c0,_0x5c0d62);}},_0x159809=_0x4d7209[_0xcb4f38(0x180)](_0x34a97d=>{return{'msgId':_0x34a97d,'senderShowName':selfInfo['nick']};});return new Promise((_0x29344f,_0x577992)=>{const _0x27cae0=_0xcb4f38,_0x527f2e={'LdzgY':function(_0x3ba18b,_0x50c575){return _0x3ba18b!=_0x50c575;},'mSgXU':_0x373bdb[_0x27cae0(0x163)],'EWEzg':function(_0x289b1f,_0x35f924){const _0x377633=_0x27cae0;return _0x373bdb[_0x377633(0x162)](_0x289b1f,_0x35f924);},'CkWCh':function(_0x5ebf84,_0x355058){const _0x3d9a84=_0x27cae0;return _0x373bdb[_0x3d9a84(0x16a)](_0x5ebf84,_0x355058);},'ehinZ':_0x373bdb[_0x27cae0(0x171)]};let _0x23d37e=![];const _0x3f568e=_0x536383=>{const _0x19bb84=_0x27cae0,_0x115e3f=_0x536383['elements']['find'](_0x548c99=>_0x548c99['arkElement']);if(!_0x115e3f)return;const _0x3852aa=JSON[_0x19bb84(0x170)](_0x115e3f['arkElement'][_0x19bb84(0x154)]);if(_0x527f2e['LdzgY'](_0x3852aa['app'],_0x527f2e[_0x19bb84(0x166)]))return;_0x527f2e[_0x19bb84(0x199)](_0x536383[_0x19bb84(0x197)],_0x10eb66[_0x19bb84(0x197)])&&_0x536383['senderUid']==selfInfo['uid']&&(_0x23d37e=!![],_0x527f2e['CkWCh'](_0x29344f,_0x536383));};sentMsgTasks[_0x27cae0(0x176)](_0x373bdb[_0x27cae0(0x193)](randomUUID),_0x3f568e),_0x373bdb[_0x27cae0(0x17a)](setTimeout,()=>{const _0x428496=_0x27cae0;!_0x23d37e&&_0x577992(_0x527f2e[_0x428496(0x185)]);},0x1388),napCatCore['session'][_0x27cae0(0x182)]()[_0x27cae0(0x181)](_0x159809,_0x4f69b3,_0x10eb66,[],new Map());});}}