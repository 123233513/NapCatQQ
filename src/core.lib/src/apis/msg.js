const _0x1f542f=_0x35ce;(function(_0x3af49d,_0x56be6f){const _0x147e31=_0x35ce,_0x4af170=_0x3af49d();while(!![]){try{const _0xea2c3=parseInt(_0x147e31(0x156))/0x1*(parseInt(_0x147e31(0x15f))/0x2)+parseInt(_0x147e31(0x176))/0x3+parseInt(_0x147e31(0x16e))/0x4+-parseInt(_0x147e31(0x15d))/0x5*(parseInt(_0x147e31(0x159))/0x6)+parseInt(_0x147e31(0x195))/0x7*(parseInt(_0x147e31(0x172))/0x8)+parseInt(_0x147e31(0x192))/0x9+-parseInt(_0x147e31(0x185))/0xa*(parseInt(_0x147e31(0x168))/0xb);if(_0xea2c3===_0x56be6f)break;else _0x4af170['push'](_0x4af170['shift']());}catch(_0x1d98dc){_0x4af170['push'](_0x4af170['shift']());}}}(_0x2a66,0xbebe4));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';function _0x2a66(){const _0x4e3dd0=['hiaoF','MMEkr','set','4WkSxof','KxLUO','sendStatus','2258964DihlGJ','activateChatAndGetHistory','onLoginSuccess','获取群文件列表超时','15kXXOqN','fCuYc','490904EybaFP','setEmojiLike','bytesData','转发消息超时','getMsgService','qusqe','pzpgF','chatType','ccgkL','88NKaAXM','OIEwt','forEach','parse','activateChat','addListener','1683060UUxhJs','msgId','EAvEL','peerUid','11821864wIbRrH','fetchRecentContact','getGroupFileList','SNcof','1335681obElwV','getMsgHistory','length','com.tencent.multimsg','senderUid','getMsgsIncludeSelf','zLxMa','setMsgEmojiLikes','recallMsg','elements','multiForwardMsgWithComment','SdauR','getMsgsByMsgId','NUBQm','uid','3294360xJzNiN','发送超时','delete','onMsgInfoListUpdate','MVWit','OjTMr','OVJEl','sendMsg','onAddSendMsg','XRpus','forwardMsg','arkElement','CVxFq','10986489ebKxWn','catch','KSvfq','7pWebiO','multiForwardMsg','getMultiMsg','then','session','setMsgRead','getMsgsBySeqAndCount','tjaqg','onGroupFileInfoUpdate','GzaKA'];_0x2a66=function(){return _0x4e3dd0;};return _0x2a66();}import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x1f542f(0x19d)]=_0x21ad07=>{const _0x5a96e3=_0x1f542f,_0x515b31={'hiaoF':function(_0x4af05a,_0x1771ad){return _0x4af05a(_0x1771ad);}};for(const [_0x33b730,_0x3e320d]of GroupFileInfoUpdateTasks){_0x515b31[_0x5a96e3(0x153)](_0x3e320d,_0x21ad07),GroupFileInfoUpdateTasks[_0x5a96e3(0x187)](_0x33b730);}},msgListener[_0x1f542f(0x18d)]=_0x3e4ad0=>{const _0x19a275=_0x1f542f,_0x36098e={'ccgkL':function(_0x38b823,_0x1ac810){return _0x38b823(_0x1ac810);},'biiOX':function(_0x4cb047,_0xcf2e94){return _0x4cb047 instanceof _0xcf2e94;}};for(const [_0x11de36,_0x3cc027]of sentMsgTasks){_0x36098e[_0x19a275(0x167)](_0x3cc027,_0x3e4ad0),sentMsgTasks[_0x19a275(0x187)](_0x11de36);}if(sendMessagePool[_0x3e4ad0[_0x19a275(0x171)]]){const _0x3b968f=sendMessagePool[_0x3e4ad0[_0x19a275(0x171)]]?.(_0x3e4ad0);_0x36098e['biiOX'](_0x3b968f,Promise)&&_0x3b968f[_0x19a275(0x198)]()[_0x19a275(0x193)](logError);}},msgListener[_0x1f542f(0x188)]=_0x3cad63=>{const _0x15cfa4=_0x1f542f,_0x41bc34={'zLxMa':function(_0x6e7692,_0x51d256){return _0x6e7692 instanceof _0x51d256;},'CVxFq':function(_0x59ee48,_0xa36c0c){return _0x59ee48(_0xa36c0c);}};_0x3cad63[_0x15cfa4(0x16a)](_0x4b6a6a=>{const _0x294f2e=_0x15cfa4,_0x334846={'SdauR':function(_0x611687,_0x34fc22){const _0x4e71a1=_0x35ce;return _0x41bc34[_0x4e71a1(0x17c)](_0x611687,_0x34fc22);},'KSvfq':function(_0x1b2c50,_0x21bd4e){const _0x43e872=_0x35ce;return _0x41bc34[_0x43e872(0x191)](_0x1b2c50,_0x21bd4e);}};new Promise((_0x487c79,_0x2cd8a5)=>{const _0x1b6e5e=_0x35ce;for(const _0x26b42f in sendSuccessCBMap){const _0x409352=sendSuccessCBMap[_0x26b42f],_0x2164cf=_0x409352(_0x4b6a6a),_0x20c9f6=_0x4c3215=>{_0x4c3215&&delete sendSuccessCBMap[_0x26b42f];};_0x334846[_0x1b6e5e(0x181)](_0x2164cf,Promise)?_0x2164cf['then'](_0x20c9f6):_0x334846[_0x1b6e5e(0x194)](_0x20c9f6,_0x2164cf);}})[_0x294f2e(0x198)]()[_0x294f2e(0x193)](log);});},setTimeout(()=>{const _0xe31c6b=_0x1f542f;napCatCore[_0xe31c6b(0x15b)](()=>{const _0x15baf3=_0xe31c6b;napCatCore[_0x15baf3(0x16d)](msgListener);});},0x64);function _0x35ce(_0x24bc0a,_0xe74c4d){const _0x2a667d=_0x2a66();return _0x35ce=function(_0x35ce4e,_0x59d35a){_0x35ce4e=_0x35ce4e-0x153;let _0x1d0a14=_0x2a667d[_0x35ce4e];return _0x1d0a14;},_0x35ce(_0x24bc0a,_0xe74c4d);}export class NTQQMsgApi{static async[_0x1f542f(0x160)](_0x249a4a,_0x4771b6,_0x35b554,_0x38eaa5=!![]){const _0x599c01=_0x1f542f,_0x214521={'tjaqg':function(_0x1260e2,_0x59becd){return _0x1260e2>_0x59becd;}};return _0x35b554=_0x35b554['toString'](),napCatCore[_0x599c01(0x199)][_0x599c01(0x163)]()[_0x599c01(0x17d)](_0x249a4a,_0x4771b6,_0x35b554,_0x214521[_0x599c01(0x19c)](_0x35b554[_0x599c01(0x178)],0x3)?'2':'1',_0x38eaa5);}static async[_0x1f542f(0x197)](_0x416e39,_0x5ad22f,_0x5c9cc5){const _0x5143cf=_0x1f542f;return napCatCore[_0x5143cf(0x199)][_0x5143cf(0x163)]()['getMultiMsg'](_0x416e39,_0x5ad22f,_0x5c9cc5);}static async[_0x1f542f(0x182)](_0x4142de,_0xd872ca){const _0x7beb1=_0x1f542f;return await napCatCore[_0x7beb1(0x199)][_0x7beb1(0x163)]()[_0x7beb1(0x182)](_0x4142de,_0xd872ca);}static async['getMsgsBySeqAndCount'](_0x129467,_0x34fb14,_0x5bd50f,_0x1dff61,_0x425d3c){const _0x1fc2e8=_0x1f542f;return await napCatCore[_0x1fc2e8(0x199)]['getMsgService']()[_0x1fc2e8(0x19b)](_0x129467,_0x34fb14,_0x5bd50f,_0x1dff61,_0x425d3c);}static async[_0x1f542f(0x16c)](_0x538e73){}static async[_0x1f542f(0x15a)](_0x1e67e5){}static async[_0x1f542f(0x19a)](_0x1d5e4e){const _0x248522=_0x1f542f;return napCatCore[_0x248522(0x199)][_0x248522(0x163)]()[_0x248522(0x19a)](_0x1d5e4e);}static async[_0x1f542f(0x174)](_0x5d1338,_0x2b4849){const _0x510eb5={'XRpus':function(_0x28750e,_0xc93f41){return _0x28750e(_0xc93f41);}};return new Promise(async(_0x1d1ebf,_0x35ff1d)=>{const _0x48625b=_0x35ce,_0x8d9e28={'OIEwt':function(_0x55d1dc,_0x597e6f){const _0xcf62a7=_0x35ce;return _0x510eb5[_0xcf62a7(0x18e)](_0x55d1dc,_0x597e6f);}};let _0x223b7b=![];setTimeout(()=>{const _0x40e442=_0x35ce;!_0x223b7b&&_0x8d9e28[_0x40e442(0x169)](_0x35ff1d,_0x40e442(0x15c));},0x1388);const _0x572340=_0x32bab9=>{const _0x44d416=_0x35ce;_0x223b7b=!![],_0x8d9e28[_0x44d416(0x169)](_0x1d1ebf,_0x32bab9['item']);};GroupFileInfoUpdateTasks[_0x48625b(0x155)](randomUUID(),_0x572340),await napCatCore[_0x48625b(0x199)]['getRichMediaService']()['getGroupFileList'](_0x5d1338,_0x2b4849);});}static async[_0x1f542f(0x177)](_0x24428d,_0x5cd869,_0x29cc4b){const _0x1c306e=_0x1f542f;return napCatCore['session'][_0x1c306e(0x163)]()[_0x1c306e(0x17b)](_0x24428d,_0x5cd869,_0x29cc4b,!![]);}static async[_0x1f542f(0x173)](){}static async['recallMsg'](_0x795f7b,_0x40b1ed){const _0x44083c=_0x1f542f;await napCatCore[_0x44083c(0x199)][_0x44083c(0x163)]()[_0x44083c(0x17e)]({'chatType':_0x795f7b[_0x44083c(0x166)],'peerUid':_0x795f7b[_0x44083c(0x171)]},_0x40b1ed);}static async[_0x1f542f(0x18c)](_0x56a1ff,_0x455043,_0x2b3eff=!![],_0x407862=0x2710){const _0x1b93ee=_0x1f542f,_0x329ee4={'OVJEl':function(_0x4f3576,_0x55488d){return _0x4f3576>_0x55488d;},'qusqe':function(_0x13ae4b){return _0x13ae4b();},'NUBQm':function(_0x105960,_0x24245e){return _0x105960===_0x24245e;},'fCuYc':function(_0x3b2901,_0x18902a){return _0x3b2901(_0x18902a);},'sORVx':'发送超时','lmNxu':function(_0x141138){return _0x141138();}},_0x4ab2e3=_0x56a1ff[_0x1b93ee(0x171)];let _0xc026ed=0x0;const _0x107f12=async()=>{const _0x277b0a=_0x1b93ee;if(_0x329ee4[_0x277b0a(0x18b)](_0xc026ed,_0x407862))throw _0x277b0a(0x186);const _0x3acb34=sendMessagePool[_0x56a1ff[_0x277b0a(0x171)]];if(_0x3acb34)return await sleep(0x1f4),_0xc026ed+=0x1f4,await _0x329ee4[_0x277b0a(0x164)](_0x107f12);else return;};return await _0x329ee4[_0x1b93ee(0x164)](_0x107f12),new Promise((_0x104157,_0x20b891)=>{const _0x366ce0=_0x1b93ee,_0x446db6={'OjTMr':function(_0x43f46a,_0x50c2fc){const _0x3e33d3=_0x35ce;return _0x329ee4[_0x3e33d3(0x183)](_0x43f46a,_0x50c2fc);},'pzpgF':function(_0x42be6a,_0x20f4c4){const _0x4c0a42=_0x35ce;return _0x329ee4[_0x4c0a42(0x15e)](_0x42be6a,_0x20f4c4);},'MVWit':_0x329ee4['sORVx']};let _0xd6162a=![],_0x50e994=null;const _0x4df919=_0x329ee4['lmNxu'](randomUUID);sendSuccessCBMap[_0x4df919]=_0xf8b157=>{const _0x148cfe=_0x35ce;if(_0x446db6['OjTMr'](_0xf8b157[_0x148cfe(0x16f)],_0x50e994?.[_0x148cfe(0x16f)])){if(_0x446db6[_0x148cfe(0x18a)](_0xf8b157[_0x148cfe(0x158)],0x2))return delete sendSuccessCBMap[_0x4df919],_0xd6162a=!![],_0x104157(_0xf8b157),!![];return![];}return![];},sendMessagePool[_0x4ab2e3]=async _0xa462a1=>{delete sendMessagePool[_0x4ab2e3],_0x50e994=_0xa462a1;},setTimeout(()=>{const _0x420212=_0x35ce;if(_0xd6162a)return;delete sendMessagePool[_0x4ab2e3],delete sendSuccessCBMap[_0x4df919],_0x446db6[_0x420212(0x165)](_0x20b891,_0x446db6[_0x420212(0x189)]);},_0x407862);const _0x4e833d=napCatCore[_0x366ce0(0x199)][_0x366ce0(0x163)]()['sendMsg']('0',_0x56a1ff,_0x455043,new Map());});}static async[_0x1f542f(0x18f)](_0x20089b,_0x53ac97,_0x54de70){const _0x1b9cbd=_0x1f542f;return napCatCore[_0x1b9cbd(0x199)][_0x1b9cbd(0x163)]()[_0x1b9cbd(0x18f)](_0x54de70,_0x20089b,[_0x53ac97],new Map());}static async[_0x1f542f(0x196)](_0x1c7d10,_0x2cf179,_0x6e918a){const _0x39d00b=_0x1f542f,_0x3ae782={'MMEkr':function(_0x1f18e7,_0x5ea056){return _0x1f18e7!=_0x5ea056;},'SNcof':_0x39d00b(0x179),'EAvEL':function(_0x23acaa,_0x203daf){return _0x23acaa==_0x203daf;},'NrnWA':function(_0x4ba0da,_0x3203fe){return _0x4ba0da(_0x3203fe);},'KxLUO':_0x39d00b(0x162),'GzaKA':function(_0xfbf2f8,_0x64d1e7,_0x38c68f){return _0xfbf2f8(_0x64d1e7,_0x38c68f);}},_0x4ab629=_0x6e918a['map'](_0x1d49a9=>{return{'msgId':_0x1d49a9,'senderShowName':selfInfo['nick']};});return new Promise((_0x5a1d40,_0x145cd5)=>{const _0x2dbec4=_0x39d00b;let _0x24c419=![];const _0x225292=_0x3cc24f=>{const _0x390eae=_0x35ce,_0x3e7c42=_0x3cc24f[_0x390eae(0x17f)]['find'](_0x4d0252=>_0x4d0252[_0x390eae(0x190)]);if(!_0x3e7c42)return;const _0x37d50c=JSON[_0x390eae(0x16b)](_0x3e7c42[_0x390eae(0x190)][_0x390eae(0x161)]);if(_0x3ae782[_0x390eae(0x154)](_0x37d50c['app'],_0x3ae782[_0x390eae(0x175)]))return;_0x3ae782[_0x390eae(0x170)](_0x3cc24f['peerUid'],_0x2cf179[_0x390eae(0x171)])&&_0x3cc24f[_0x390eae(0x17a)]==selfInfo[_0x390eae(0x184)]&&(_0x24c419=!![],_0x5a1d40(_0x3cc24f));};sentMsgTasks[_0x2dbec4(0x155)](randomUUID(),_0x225292),_0x3ae782[_0x2dbec4(0x19e)](setTimeout,()=>{const _0x515d5c=_0x2dbec4;!_0x24c419&&_0x3ae782['NrnWA'](_0x145cd5,_0x3ae782[_0x515d5c(0x157)]);},0x1388),napCatCore[_0x2dbec4(0x199)][_0x2dbec4(0x163)]()[_0x2dbec4(0x180)](_0x4ab629,_0x1c7d10,_0x2cf179,[],new Map());});}}