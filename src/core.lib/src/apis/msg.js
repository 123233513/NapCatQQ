function _0x38b4(){const _0x20a8ad=['2630340IalzgE','forEach','rELxr','YaTDo','setEmojiLike','onAddSendMsg','multiForwardMsg','getMsgsIncludeSelf','find','6fKYusK','837740SSXgXr','uid','bytesData','ElKaG','QTpCB','then','608083LljcCH','IimDV','map','vRRQV','activateChat','arkElement','IvUvj','VxrFS','onGroupFileInfoUpdate','sflqJ','getMsgsByMsgId','SRPNi','QVSxq','sendMsg','HkeBy','elements','JfNAd','发送超时','forwardMsg','onMsgInfoListUpdate','转发消息超时','224522FwlQuM','getGroupFileList','com.tencent.multimsg','msgId','getRichMediaService','nick','fetchRecentContact','sendStatus','length','getMsgsBySeqAndCount','recallMsg','onLoginSuccess','HArgS','chatType','senderUid','WziOi','getMsgHistory','activateChatAndGetHistory','359175avTmNh','delete','item','session','parse','8BVNLFu','getMultiMsg','nGEXc','getMsgService','peerUid','OZiDT','multiForwardMsgWithComment','QTrBa','toString','setMsgRead','FPQoL','qfJOW','330pnsnRD','879216UWOGhh','270729wkHplB'];_0x38b4=function(){return _0x20a8ad;};return _0x38b4();}const _0x5ca580=_0x3956;(function(_0x2862a8,_0x33abf3){const _0x559417=_0x3956,_0x6e284e=_0x2862a8();while(!![]){try{const _0xd83634=-parseInt(_0x559417(0x77))/0x1*(parseInt(_0x559417(0xa6))/0x2)+parseInt(_0x559417(0x9b))/0x3+parseInt(_0x559417(0xa7))/0x4+parseInt(_0x559417(0x89))/0x5+-parseInt(_0x559417(0x9d))/0x6+parseInt(_0x559417(0xad))/0x7*(-parseInt(_0x559417(0x8e))/0x8)+-parseInt(_0x559417(0x9c))/0x9*(-parseInt(_0x559417(0x9a))/0xa);if(_0xd83634===_0x33abf3)break;else _0x6e284e['push'](_0x6e284e['shift']());}catch(_0x4b8ba8){_0x6e284e['push'](_0x6e284e['shift']());}}}(_0x38b4,0x59e3e));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x3956(_0x3f3346,_0x213906){const _0x38b4cb=_0x38b4();return _0x3956=function(_0x395683,_0x2c3cba){_0x395683=_0x395683-0x6a;let _0x3f6fe5=_0x38b4cb[_0x395683];return _0x3f6fe5;},_0x3956(_0x3f3346,_0x213906);}const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x5ca580(0x6a)]=_0xb05ccf=>{const _0x545003=_0x5ca580,_0x3f652f={'HkeBy':function(_0x3924ae,_0x554395){return _0x3924ae(_0x554395);}};for(const [_0x1c117e,_0x140d4f]of GroupFileInfoUpdateTasks){_0x3f652f[_0x545003(0x70)](_0x140d4f,_0xb05ccf),GroupFileInfoUpdateTasks['delete'](_0x1c117e);}},msgListener[_0x5ca580(0xa2)]=_0x42c9df=>{const _0x20f0af=_0x5ca580,_0x59dc6f={'ElKaG':function(_0x2c01e9,_0xafd405){return _0x2c01e9 instanceof _0xafd405;}};for(const [_0x4a4881,_0x5c53e4]of sentMsgTasks){_0x5c53e4(_0x42c9df),sentMsgTasks[_0x20f0af(0x8a)](_0x4a4881);}if(sendMessagePool[_0x42c9df[_0x20f0af(0x92)]]){const _0xd03a80=sendMessagePool[_0x42c9df[_0x20f0af(0x92)]]?.(_0x42c9df);_0x59dc6f[_0x20f0af(0xaa)](_0xd03a80,Promise)&&_0xd03a80['then']()['catch'](logError);}},msgListener[_0x5ca580(0x75)]=_0x3c5baa=>{const _0x34f8ba=_0x5ca580,_0x176aef={'ReKrA':function(_0x465cee,_0x27bf05){return _0x465cee(_0x27bf05);},'JfNAd':function(_0x18cdb1,_0x52b13c){return _0x18cdb1 instanceof _0x52b13c;}};_0x3c5baa[_0x34f8ba(0x9e)](_0x419039=>{const _0x3d31ae=_0x34f8ba,_0x4100f9={'qfJOW':function(_0x564ad6,_0x55f68a){return _0x176aef['ReKrA'](_0x564ad6,_0x55f68a);},'HArgS':function(_0xed5369,_0x146ef7){const _0x5dfc59=_0x3956;return _0x176aef[_0x5dfc59(0x72)](_0xed5369,_0x146ef7);}};new Promise((_0x5eacab,_0x238c68)=>{const _0x485b9f=_0x3956;for(const _0x4b84f2 in sendSuccessCBMap){const _0x1ec047=sendSuccessCBMap[_0x4b84f2],_0x11731f=_0x4100f9[_0x485b9f(0x99)](_0x1ec047,_0x419039),_0x32d771=_0x574a96=>{_0x574a96&&delete sendSuccessCBMap[_0x4b84f2];};_0x4100f9[_0x485b9f(0x83)](_0x11731f,Promise)?_0x11731f[_0x485b9f(0xac)](_0x32d771):_0x4100f9[_0x485b9f(0x99)](_0x32d771,_0x11731f);}})[_0x3d31ae(0xac)]()['catch'](log);});},setTimeout(()=>{const _0x3fe0f3=_0x5ca580;napCatCore[_0x3fe0f3(0x82)](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x5ca580(0xa1)](_0x12ceeb,_0x420ffe,_0x3e285d,_0x21ee1c=!![]){const _0x205e5e=_0x5ca580,_0x455e1c={'QVSxq':function(_0x4758d8,_0x48295f){return _0x4758d8>_0x48295f;}};return _0x3e285d=_0x3e285d[_0x205e5e(0x96)](),napCatCore['session']['getMsgService']()['setMsgEmojiLikes'](_0x12ceeb,_0x420ffe,_0x3e285d,_0x455e1c[_0x205e5e(0x6e)](_0x3e285d[_0x205e5e(0x7f)],0x3)?'2':'1',_0x21ee1c);}static async[_0x5ca580(0x8f)](_0x3da458,_0xcd7321,_0x442ac3){const _0xa335fb=_0x5ca580;return napCatCore[_0xa335fb(0x8c)][_0xa335fb(0x91)]()[_0xa335fb(0x8f)](_0x3da458,_0xcd7321,_0x442ac3);}static async['getMsgsByMsgId'](_0x54606,_0x566a7a){const _0x25984d=_0x5ca580;return await napCatCore[_0x25984d(0x8c)][_0x25984d(0x91)]()[_0x25984d(0x6c)](_0x54606,_0x566a7a);}static async[_0x5ca580(0x80)](_0x17cca6,_0x841f36,_0x858f7b,_0x48bb6a,_0x16dfc7){const _0x34db19=_0x5ca580;return await napCatCore[_0x34db19(0x8c)][_0x34db19(0x91)]()[_0x34db19(0x80)](_0x17cca6,_0x841f36,_0x858f7b,_0x48bb6a,_0x16dfc7);}static async[_0x5ca580(0xb1)](_0x3f1205){}static async[_0x5ca580(0x88)](_0x44753e){}static async[_0x5ca580(0x97)](_0x4abfed){const _0x8d5208=_0x5ca580;return napCatCore[_0x8d5208(0x8c)]['getMsgService']()[_0x8d5208(0x97)](_0x4abfed);}static async[_0x5ca580(0x78)](_0x4e7b32,_0x5a0f28){const _0x2a2d40={'rELxr':'获取群文件列表超时','XjZzs':function(_0x41f22e,_0x3bc3c1){return _0x41f22e(_0x3bc3c1);},'myLTe':function(_0x2ec176,_0x599a78,_0x1838de){return _0x2ec176(_0x599a78,_0x1838de);},'vRRQV':function(_0x3ce3ef){return _0x3ce3ef();}};return new Promise(async(_0x202646,_0x1ba1de)=>{const _0x4b0698=_0x3956,_0x42b853={'FPQoL':_0x2a2d40[_0x4b0698(0x9f)],'sflqJ':function(_0x11c357,_0x4526f3){return _0x2a2d40['XjZzs'](_0x11c357,_0x4526f3);}};let _0x50342b=![];_0x2a2d40['myLTe'](setTimeout,()=>{const _0x4ca36d=_0x4b0698;!_0x50342b&&_0x1ba1de(_0x42b853[_0x4ca36d(0x98)]);},0x1388);const _0x137323=_0x3c0646=>{const _0x59835e=_0x4b0698;_0x50342b=!![],_0x42b853[_0x59835e(0x6b)](_0x202646,_0x3c0646[_0x59835e(0x8b)]);};GroupFileInfoUpdateTasks['set'](_0x2a2d40[_0x4b0698(0xb0)](randomUUID),_0x137323),await napCatCore['session'][_0x4b0698(0x7b)]()['getGroupFileList'](_0x4e7b32,_0x5a0f28);});}static async[_0x5ca580(0x87)](_0x216a13,_0x15ed7e,_0x4247b4){const _0x12630c=_0x5ca580;return napCatCore[_0x12630c(0x8c)][_0x12630c(0x91)]()[_0x12630c(0xa4)](_0x216a13,_0x15ed7e,_0x4247b4,!![]);}static async[_0x5ca580(0x7d)](){}static async['recallMsg'](_0x341c00,_0x145eba){const _0x4897df=_0x5ca580;await napCatCore['session'][_0x4897df(0x91)]()[_0x4897df(0x81)]({'chatType':_0x341c00[_0x4897df(0x84)],'peerUid':_0x341c00[_0x4897df(0x92)]},_0x145eba);}static async[_0x5ca580(0x6f)](_0xde42f2,_0x108369,_0x29c84d=!![],_0x9fd84d=0x2710){const _0x91b897=_0x5ca580,_0x23538b={'OZiDT':_0x91b897(0x73),'QTrBa':function(_0xbf6d9b,_0x244a90){return _0xbf6d9b(_0x244a90);},'YaTDo':function(_0x390e2b){return _0x390e2b();},'IvUvj':function(_0x4bfed2,_0x1f3a85){return _0x4bfed2(_0x1f3a85);},'nGEXc':function(_0x3bb10d,_0x32cc5b,_0xcdf2f4){return _0x3bb10d(_0x32cc5b,_0xcdf2f4);}},_0x8a4ade=_0xde42f2[_0x91b897(0x92)];let _0x506675=0x0;const _0x16dc6c=async()=>{const _0x31b121=_0x91b897;if(_0x506675>_0x9fd84d)throw _0x23538b['OZiDT'];const _0xb9cba6=sendMessagePool[_0xde42f2[_0x31b121(0x92)]];if(_0xb9cba6)return await _0x23538b[_0x31b121(0x95)](sleep,0x1f4),_0x506675+=0x1f4,await _0x23538b[_0x31b121(0xa0)](_0x16dc6c);else return;};return await _0x16dc6c(),new Promise((_0x357f6b,_0x25ea7a)=>{const _0x19dc8a=_0x91b897,_0x4b5f28={'WziOi':function(_0x33bc46,_0x1bd20e){return _0x33bc46===_0x1bd20e;},'QTpCB':function(_0xf7d4b9,_0x423d80){const _0x26a2a8=_0x3956;return _0x23538b[_0x26a2a8(0xb3)](_0xf7d4b9,_0x423d80);},'dZdnS':_0x23538b[_0x19dc8a(0x93)]};let _0x54dc86=![],_0x54270a=null;const _0x4cf24a=_0x23538b['YaTDo'](randomUUID);sendSuccessCBMap[_0x4cf24a]=_0x4d40b4=>{const _0x9d8cef=_0x19dc8a;if(_0x4b5f28[_0x9d8cef(0x86)](_0x4d40b4[_0x9d8cef(0x7a)],_0x54270a?.[_0x9d8cef(0x7a)])){if(_0x4d40b4[_0x9d8cef(0x7e)]===0x2)return delete sendSuccessCBMap[_0x4cf24a],_0x54dc86=!![],_0x4b5f28[_0x9d8cef(0xab)](_0x357f6b,_0x4d40b4),!![];return![];}return![];},sendMessagePool[_0x8a4ade]=async _0x4ab9cb=>{delete sendMessagePool[_0x8a4ade],_0x54270a=_0x4ab9cb;},_0x23538b[_0x19dc8a(0x90)](setTimeout,()=>{const _0x33e32a=_0x19dc8a;if(_0x54dc86)return;delete sendMessagePool[_0x8a4ade],delete sendSuccessCBMap[_0x4cf24a],_0x4b5f28[_0x33e32a(0xab)](_0x25ea7a,_0x4b5f28['dZdnS']);},_0x9fd84d);const _0x2c37c6=napCatCore[_0x19dc8a(0x8c)]['getMsgService']()[_0x19dc8a(0x6f)]('0',_0xde42f2,_0x108369,new Map());});}static async[_0x5ca580(0x74)](_0x493d66,_0x127892,_0x5ad4e3){const _0x8d951e=_0x5ca580;return napCatCore[_0x8d951e(0x8c)][_0x8d951e(0x91)]()[_0x8d951e(0x74)](_0x5ad4e3,_0x493d66,[_0x127892],new Map());}static async[_0x5ca580(0xa3)](_0x37edd7,_0x1022a2,_0x34fb24){const _0x333390=_0x5ca580,_0x21a9c0={'IimDV':_0x333390(0x79),'SRPNi':function(_0x270883,_0x256ea1){return _0x270883==_0x256ea1;},'tyDKH':function(_0x5b4965,_0x287bba){return _0x5b4965(_0x287bba);},'VxrFS':function(_0x5d110f){return _0x5d110f();},'wkKFC':function(_0x7ac391,_0x42484f,_0x2ae77e){return _0x7ac391(_0x42484f,_0x2ae77e);}},_0x1def70=_0x34fb24[_0x333390(0xaf)](_0x3ce2ad=>{const _0xcd11f1=_0x333390;return{'msgId':_0x3ce2ad,'senderShowName':selfInfo[_0xcd11f1(0x7c)]};});return new Promise((_0x182aa5,_0x247a09)=>{const _0x303c92=_0x333390;let _0x424474=![];const _0x33dee5=_0x414450=>{const _0x190a06=_0x3956,_0x4bf4dd=_0x414450[_0x190a06(0x71)][_0x190a06(0xa5)](_0x446b09=>_0x446b09[_0x190a06(0xb2)]);if(!_0x4bf4dd)return;const _0x368c47=JSON[_0x190a06(0x8d)](_0x4bf4dd[_0x190a06(0xb2)][_0x190a06(0xa9)]);if(_0x368c47['app']!=_0x21a9c0[_0x190a06(0xae)])return;_0x414450[_0x190a06(0x92)]==_0x1022a2[_0x190a06(0x92)]&&_0x21a9c0[_0x190a06(0x6d)](_0x414450[_0x190a06(0x85)],selfInfo[_0x190a06(0xa8)])&&(_0x424474=!![],_0x21a9c0['tyDKH'](_0x182aa5,_0x414450));};sentMsgTasks['set'](_0x21a9c0[_0x303c92(0xb4)](randomUUID),_0x33dee5),_0x21a9c0['wkKFC'](setTimeout,()=>{const _0x139b16=_0x303c92;!_0x424474&&_0x247a09(_0x139b16(0x76));},0x1388),napCatCore['session']['getMsgService']()[_0x303c92(0x94)](_0x1def70,_0x37edd7,_0x1022a2,[],new Map());});}}