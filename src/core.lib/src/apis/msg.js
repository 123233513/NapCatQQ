const _0x2a3aa6=_0x5ee4;(function(_0x2f04b4,_0x6c71e){const _0x15a4d8=_0x5ee4,_0x82e6ef=_0x2f04b4();while(!![]){try{const _0x2e7592=parseInt(_0x15a4d8(0x20b))/0x1+parseInt(_0x15a4d8(0x215))/0x2+parseInt(_0x15a4d8(0x1ff))/0x3+parseInt(_0x15a4d8(0x209))/0x4*(parseInt(_0x15a4d8(0x20f))/0x5)+-parseInt(_0x15a4d8(0x1f9))/0x6+-parseInt(_0x15a4d8(0x20a))/0x7+-parseInt(_0x15a4d8(0x1e8))/0x8;if(_0x2e7592===_0x6c71e)break;else _0x82e6ef['push'](_0x82e6ef['shift']());}catch(_0x363f0d){_0x82e6ef['push'](_0x82e6ef['shift']());}}}(_0x309d,0xd1670));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';function _0x5ee4(_0x1228ae,_0x246ff4){const _0x309df9=_0x309d();return _0x5ee4=function(_0x5ee4f0,_0x100e36){_0x5ee4f0=_0x5ee4f0-0x1de;let _0x1a8145=_0x309df9[_0x5ee4f0];return _0x1a8145;},_0x5ee4(_0x1228ae,_0x246ff4);}import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x2a3aa6(0x216)]=_0x14a9f1=>{const _0x5ed36c=_0x2a3aa6,_0x3f432a={'GaIVA':function(_0x450c72,_0x188f28){return _0x450c72(_0x188f28);}};for(const [_0x13652f,_0x45ec62]of GroupFileInfoUpdateTasks){_0x3f432a[_0x5ed36c(0x229)](_0x45ec62,_0x14a9f1),GroupFileInfoUpdateTasks[_0x5ed36c(0x224)](_0x13652f);}},msgListener[_0x2a3aa6(0x1e9)]=_0x407238=>{const _0x32bd5b=_0x2a3aa6,_0x26043={'LCBrj':function(_0x574802,_0x479cbb){return _0x574802(_0x479cbb);},'SOoIi':function(_0x34faa4,_0x313bb8){return _0x34faa4 instanceof _0x313bb8;}};for(const [_0x4ca324,_0x5790d2]of sentMsgTasks){_0x26043[_0x32bd5b(0x21e)](_0x5790d2,_0x407238),sentMsgTasks[_0x32bd5b(0x224)](_0x4ca324);}if(sendMessagePool[_0x407238[_0x32bd5b(0x1df)]]){const _0xc5909a=sendMessagePool[_0x407238[_0x32bd5b(0x1df)]]?.(_0x407238);_0x26043[_0x32bd5b(0x1fa)](_0xc5909a,Promise)&&_0xc5909a['then']()['catch'](logError);}},msgListener['onMsgInfoListUpdate']=_0x1afe3a=>{const _0x3529c9=_0x2a3aa6,_0x4f1b1f={'FwhrO':function(_0x366c19,_0x596721){return _0x366c19(_0x596721);}};_0x1afe3a[_0x3529c9(0x1f3)](_0x462790=>{const _0x4c4dfe=_0x3529c9,_0x4cd476={'geVYh':function(_0xbe18d3,_0x58956f){return _0xbe18d3(_0x58956f);},'gwfhQ':function(_0x1dbe2d,_0x5afb9b){const _0x186d3f=_0x5ee4;return _0x4f1b1f[_0x186d3f(0x1e1)](_0x1dbe2d,_0x5afb9b);}};new Promise((_0x5952c2,_0x38bf45)=>{const _0xdcaa19=_0x5ee4;for(const _0x3004f4 in sendSuccessCBMap){const _0x3f3bfe=sendSuccessCBMap[_0x3004f4],_0x20fc75=_0x4cd476[_0xdcaa19(0x1f1)](_0x3f3bfe,_0x462790),_0x443f99=_0x53b1a2=>{_0x53b1a2&&delete sendSuccessCBMap[_0x3004f4];};_0x20fc75 instanceof Promise?_0x20fc75[_0xdcaa19(0x1e4)](_0x443f99):_0x4cd476[_0xdcaa19(0x1e7)](_0x443f99,_0x20fc75);}})[_0x4c4dfe(0x1e4)]()[_0x4c4dfe(0x220)](log);});},setTimeout(()=>{const _0x3bfdad=_0x2a3aa6;napCatCore[_0x3bfdad(0x1e0)](()=>{const _0x536350=_0x3bfdad;napCatCore[_0x536350(0x228)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x2a3aa6(0x1f5)](_0x116339,_0x135831,_0x2ec76a,_0x53ee56=!![]){const _0x191682=_0x2a3aa6,_0x5a46a4={'fKHUd':function(_0x4ab1a4,_0x2bc84e){return _0x4ab1a4>_0x2bc84e;}};return _0x2ec76a=_0x2ec76a[_0x191682(0x1fd)](),napCatCore[_0x191682(0x1f0)]['getMsgService']()[_0x191682(0x1fe)](_0x116339,_0x135831,_0x2ec76a,_0x5a46a4[_0x191682(0x1eb)](_0x2ec76a[_0x191682(0x202)],0x3)?'2':'1',_0x53ee56);}static async[_0x2a3aa6(0x21a)](_0x249bfe,_0x1ec0d6,_0xc1a562){const _0x5ee498=_0x2a3aa6;return napCatCore[_0x5ee498(0x1f0)][_0x5ee498(0x226)]()[_0x5ee498(0x21a)](_0x249bfe,_0x1ec0d6,_0xc1a562);}static async[_0x2a3aa6(0x1ea)](_0x562dc5,_0x52ada2){const _0x4f6041=_0x2a3aa6;return await napCatCore[_0x4f6041(0x1f0)][_0x4f6041(0x226)]()[_0x4f6041(0x1ea)](_0x562dc5,_0x52ada2);}static async[_0x2a3aa6(0x223)](_0x3a9238,_0x30bd3f,_0x195bec,_0xb9a430,_0x532870){const _0x2b987b=_0x2a3aa6;return await napCatCore['session'][_0x2b987b(0x226)]()[_0x2b987b(0x223)](_0x3a9238,_0x30bd3f,_0x195bec,_0xb9a430,_0x532870);}static async[_0x2a3aa6(0x1f6)](_0x136096){}static async[_0x2a3aa6(0x21f)](_0x4ddb20){}static async[_0x2a3aa6(0x206)](_0x4fb16e){const _0x57c89b=_0x2a3aa6;return napCatCore[_0x57c89b(0x1f0)][_0x57c89b(0x226)]()[_0x57c89b(0x206)](_0x4fb16e);}static async[_0x2a3aa6(0x213)](_0x3492ba,_0x58317c){const _0x41adb8=_0x2a3aa6,_0xeb793e={'UDiQR':function(_0x4796bd,_0x5ef173){return _0x4796bd(_0x5ef173);},'bgQBb':_0x41adb8(0x221)};return new Promise(async(_0x36e2d5,_0x99ff4f)=>{const _0x1a7f0d=_0x41adb8;let _0x512e71=![];setTimeout(()=>{const _0x4b9345=_0x5ee4;!_0x512e71&&_0xeb793e[_0x4b9345(0x1ee)](_0x99ff4f,_0xeb793e[_0x4b9345(0x222)]);},0x1388);const _0x57f358=_0x2a8010=>{const _0x5d7a95=_0x5ee4;_0x512e71=!![],_0xeb793e[_0x5d7a95(0x1ee)](_0x36e2d5,_0x2a8010[_0x5d7a95(0x1ef)]);};GroupFileInfoUpdateTasks[_0x1a7f0d(0x21b)](randomUUID(),_0x57f358),await napCatCore[_0x1a7f0d(0x1f0)][_0x1a7f0d(0x219)]()[_0x1a7f0d(0x213)](_0x3492ba,_0x58317c);});}static async['getMsgHistory'](_0x353f3c,_0x13f1fa,_0x289d27){const _0x217f0e=_0x2a3aa6;return napCatCore['session']['getMsgService']()[_0x217f0e(0x20e)](_0x353f3c,_0x13f1fa,_0x289d27,!![]);}static async[_0x2a3aa6(0x218)](){}static async[_0x2a3aa6(0x1ec)](_0x46fca2,_0x31776f){const _0x549f7d=_0x2a3aa6;await napCatCore[_0x549f7d(0x1f0)][_0x549f7d(0x226)]()['recallMsg']({'chatType':_0x46fca2[_0x549f7d(0x205)],'peerUid':_0x46fca2[_0x549f7d(0x1df)]},_0x31776f);}static async[_0x2a3aa6(0x217)](_0x7f8373,_0x3901cd,_0x33c6e2=!![],_0xd6fd90=0x2710){const _0x3f30d5=_0x2a3aa6,_0x56c56f={'JbcqQ':function(_0x132824,_0x322ef7){return _0x132824>_0x322ef7;},'TZcse':function(_0x583ad9,_0x296b3a){return _0x583ad9(_0x296b3a);},'Jdect':function(_0x32196d){return _0x32196d();},'IHTxz':'发送超时','XXytC':function(_0xc3995d,_0x5acaef){return _0xc3995d===_0x5acaef;},'AAptD':function(_0x515617,_0x2588b1){return _0x515617(_0x2588b1);},'zfVri':function(_0x264ada,_0x3e57c0,_0x47c0ad){return _0x264ada(_0x3e57c0,_0x47c0ad);}},_0x5b40dc=_0x7f8373[_0x3f30d5(0x1df)];let _0xa12d6c=0x0;const _0x3dea70=async()=>{const _0x2b3402=_0x3f30d5;if(_0x56c56f[_0x2b3402(0x1f2)](_0xa12d6c,_0xd6fd90))throw _0x2b3402(0x1e3);const _0x1840e6=sendMessagePool[_0x7f8373[_0x2b3402(0x1df)]];if(_0x1840e6)return await _0x56c56f[_0x2b3402(0x21d)](sleep,0x1f4),_0xa12d6c+=0x1f4,await _0x56c56f['Jdect'](_0x3dea70);else return;};return await _0x56c56f['Jdect'](_0x3dea70),new Promise((_0x336a8c,_0x4ec657)=>{const _0xd16576=_0x3f30d5,_0x503778={'rVoHR':function(_0x5dac0e,_0x2f44cd){const _0x3589be=_0x5ee4;return _0x56c56f[_0x3589be(0x1de)](_0x5dac0e,_0x2f44cd);},'uslzR':function(_0xa4034,_0x81c079){return _0x56c56f['AAptD'](_0xa4034,_0x81c079);}};let _0x31f17c=![],_0x5234ca=null;const _0x184753=_0x56c56f[_0xd16576(0x21c)](randomUUID);sendSuccessCBMap[_0x184753]=_0x369f3b=>{const _0x10177b=_0xd16576;if(_0x503778[_0x10177b(0x1e2)](_0x369f3b[_0x10177b(0x1ed)],_0x5234ca?.['msgId'])){if(_0x369f3b[_0x10177b(0x208)]===0x2)return delete sendSuccessCBMap[_0x184753],_0x31f17c=!![],_0x503778['uslzR'](_0x336a8c,_0x369f3b),!![];return![];}return![];},sendMessagePool[_0x5b40dc]=async _0x4eb8cd=>{delete sendMessagePool[_0x5b40dc],_0x5234ca=_0x4eb8cd;},_0x56c56f[_0xd16576(0x201)](setTimeout,()=>{const _0x58bec0=_0xd16576;if(_0x31f17c)return;delete sendMessagePool[_0x5b40dc],delete sendSuccessCBMap[_0x184753],_0x4ec657(_0x56c56f[_0x58bec0(0x1f4)]);},_0xd6fd90);const _0x288e29=napCatCore[_0xd16576(0x1f0)][_0xd16576(0x226)]()['sendMsg']('0',_0x7f8373,_0x3901cd,new Map());});}static async[_0x2a3aa6(0x1fc)](_0xec06c4,_0x267e1f,_0x30e7c1){const _0x146f43=_0x2a3aa6;return napCatCore['session'][_0x146f43(0x226)]()[_0x146f43(0x1fc)](_0x30e7c1,_0xec06c4,[_0x267e1f],new Map());}static async[_0x2a3aa6(0x207)](_0x532110,_0x599b76,_0x301886){const _0x1ba329=_0x2a3aa6,_0xddbb0b={'Kefga':function(_0xe8afe3,_0x237a9d){return _0xe8afe3(_0x237a9d);},'RCrFg':'转发消息超时','rAIlZ':function(_0x28910f,_0x5bc85a){return _0x28910f(_0x5bc85a);},'AIKpm':function(_0x4b7e26){return _0x4b7e26();},'TFcls':function(_0x15978f,_0x3de7ad,_0x3c33d3){return _0x15978f(_0x3de7ad,_0x3c33d3);}},_0x3a7861=_0x301886[_0x1ba329(0x212)](_0x24dca2=>{const _0x1a3dec=_0x1ba329;return{'msgId':_0x24dca2,'senderShowName':selfInfo[_0x1a3dec(0x225)]};});return new Promise((_0x51e3b6,_0x23626a)=>{const _0x27870a=_0x1ba329,_0x9e16bc={'DvZUE':function(_0x241016,_0x4ed868){const _0x21774a=_0x5ee4;return _0xddbb0b[_0x21774a(0x211)](_0x241016,_0x4ed868);}};let _0x141cdd=![];const _0x33d081=_0x31d656=>{const _0x52d577=_0x5ee4,_0x3de105=_0x31d656[_0x52d577(0x1e6)][_0x52d577(0x214)](_0x387da6=>_0x387da6[_0x52d577(0x210)]);if(!_0x3de105)return;const _0x39c9c0=JSON[_0x52d577(0x1f8)](_0x3de105[_0x52d577(0x210)][_0x52d577(0x204)]);if(_0x39c9c0[_0x52d577(0x1f7)]!='com.tencent.multimsg')return;_0x31d656['peerUid']==_0x599b76[_0x52d577(0x1df)]&&_0x31d656[_0x52d577(0x1e5)]==selfInfo[_0x52d577(0x200)]&&(_0x141cdd=!![],_0x9e16bc[_0x52d577(0x20c)](_0x51e3b6,_0x31d656));};sentMsgTasks[_0x27870a(0x21b)](_0xddbb0b[_0x27870a(0x203)](randomUUID),_0x33d081),_0xddbb0b[_0x27870a(0x227)](setTimeout,()=>{const _0x3aaf70=_0x27870a;!_0x141cdd&&_0xddbb0b[_0x3aaf70(0x1fb)](_0x23626a,_0xddbb0b['RCrFg']);},0x1388),napCatCore[_0x27870a(0x1f0)]['getMsgService']()[_0x27870a(0x20d)](_0x3a7861,_0x532110,_0x599b76,[],new Map());});}}function _0x309d(){const _0x42d919=['sendMsg','fetchRecentContact','getRichMediaService','getMultiMsg','set','Jdect','TZcse','LCBrj','activateChatAndGetHistory','catch','获取群文件列表超时','bgQBb','getMsgsBySeqAndCount','delete','nick','getMsgService','TFcls','addListener','GaIVA','XXytC','peerUid','onLoginSuccess','FwhrO','rVoHR','发送超时','then','senderUid','elements','gwfhQ','4797536POSQjw','onAddSendMsg','getMsgsByMsgId','fKHUd','recallMsg','msgId','UDiQR','item','session','geVYh','JbcqQ','forEach','IHTxz','setEmojiLike','activateChat','app','parse','6454398vMiutR','SOoIi','Kefga','forwardMsg','toString','setMsgEmojiLikes','855531MjUbXZ','uid','zfVri','length','AIKpm','bytesData','chatType','setMsgRead','multiForwardMsg','sendStatus','3076208gXtYiu','9878190IJsNRQ','539913suZUue','DvZUE','multiForwardMsgWithComment','getMsgsIncludeSelf','10cCmCtU','arkElement','rAIlZ','map','getGroupFileList','find','3162226jFLPvr','onGroupFileInfoUpdate'];_0x309d=function(){return _0x42d919;};return _0x309d();}