const _0x1ef774=_0x4f15;(function(_0x33ca7d,_0x24806a){const _0x46ec78=_0x4f15,_0x11b82e=_0x33ca7d();while(!![]){try{const _0x5d2c9f=-parseInt(_0x46ec78(0x1f0))/0x1*(-parseInt(_0x46ec78(0x20f))/0x2)+-parseInt(_0x46ec78(0x219))/0x3*(parseInt(_0x46ec78(0x1e3))/0x4)+-parseInt(_0x46ec78(0x1ef))/0x5*(-parseInt(_0x46ec78(0x1f6))/0x6)+parseInt(_0x46ec78(0x1da))/0x7+-parseInt(_0x46ec78(0x1f1))/0x8*(-parseInt(_0x46ec78(0x1f5))/0x9)+-parseInt(_0x46ec78(0x1db))/0xa+-parseInt(_0x46ec78(0x1f8))/0xb*(-parseInt(_0x46ec78(0x1e7))/0xc);if(_0x5d2c9f===_0x24806a)break;else _0x11b82e['push'](_0x11b82e['shift']());}catch(_0x22ccf9){_0x11b82e['push'](_0x11b82e['shift']());}}}(_0xd0b0,0x5e886));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x4f15(_0x46ec99,_0x12b866){const _0xd0b00=_0xd0b0();return _0x4f15=function(_0x4f15bf,_0x569753){_0x4f15bf=_0x4f15bf-0x1d1;let _0x108728=_0xd0b00[_0x4f15bf];return _0x108728;},_0x4f15(_0x46ec99,_0x12b866);}import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x1ef774(0x21b)]=_0x27d17e=>{const _0x334b7a=_0x1ef774,_0x51440a={'ruzBR':function(_0x4ebc20,_0x5f1842){return _0x4ebc20(_0x5f1842);}};for(const [_0x450308,_0x42e9d3]of GroupFileInfoUpdateTasks){_0x51440a[_0x334b7a(0x1f4)](_0x42e9d3,_0x27d17e),GroupFileInfoUpdateTasks[_0x334b7a(0x20a)](_0x450308);}},msgListener[_0x1ef774(0x1d2)]=_0x561e14=>{const _0x2ad266=_0x1ef774,_0x281e80={'qAUaQ':function(_0x19eb33,_0x5683ab){return _0x19eb33(_0x5683ab);},'wrlCR':function(_0x54e4a5,_0x36d240){return _0x54e4a5 instanceof _0x36d240;}};for(const [_0x1df078,_0x306569]of sentMsgTasks){_0x281e80[_0x2ad266(0x21e)](_0x306569,_0x561e14),sentMsgTasks[_0x2ad266(0x20a)](_0x1df078);}if(sendMessagePool[_0x561e14[_0x2ad266(0x220)]]){const _0x7ac5f7=sendMessagePool[_0x561e14[_0x2ad266(0x220)]]?.(_0x561e14);_0x281e80[_0x2ad266(0x1fe)](_0x7ac5f7,Promise)&&_0x7ac5f7[_0x2ad266(0x1f3)]()[_0x2ad266(0x1e6)](logError);}},msgListener['onMsgInfoListUpdate']=_0x22bd81=>{const _0x507a9a=_0x1ef774,_0x3036e6={'fBbVA':function(_0x2c926a,_0x449adb){return _0x2c926a(_0x449adb);},'JlTiz':function(_0x1b243d,_0x1d0376){return _0x1b243d instanceof _0x1d0376;}};_0x22bd81[_0x507a9a(0x203)](_0x4cfe2f=>{const _0x5df49e=_0x507a9a;new Promise((_0x4b218d,_0xc028e2)=>{const _0x50c481=_0x4f15;for(const _0x57d0f6 in sendSuccessCBMap){const _0xa06938=sendSuccessCBMap[_0x57d0f6],_0x7f0c1d=_0x3036e6[_0x50c481(0x1d1)](_0xa06938,_0x4cfe2f),_0x1e3b8d=_0x3e053a=>{_0x3e053a&&delete sendSuccessCBMap[_0x57d0f6];};_0x3036e6[_0x50c481(0x21f)](_0x7f0c1d,Promise)?_0x7f0c1d[_0x50c481(0x1f3)](_0x1e3b8d):_0x1e3b8d(_0x7f0c1d);}})[_0x5df49e(0x1f3)]()[_0x5df49e(0x1e6)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x30442d=_0x4f15;napCatCore[_0x30442d(0x207)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x1ef774(0x204)](_0x42c92c,_0x5a9cf9,_0x43deb1,_0x296dac=!![]){const _0x39197a=_0x1ef774,_0x4e2477={'YelDC':function(_0x5166da,_0x493890){return _0x5166da>_0x493890;}};return _0x43deb1=_0x43deb1['toString'](),napCatCore[_0x39197a(0x202)][_0x39197a(0x1dc)]()[_0x39197a(0x1f7)](_0x42c92c,_0x5a9cf9,_0x43deb1,_0x4e2477[_0x39197a(0x1e5)](_0x43deb1[_0x39197a(0x212)],0x3)?'2':'1',_0x296dac);}static async[_0x1ef774(0x1de)](_0x3837f7,_0x13d624,_0x179cf8){const _0x40b7ea=_0x1ef774;return napCatCore[_0x40b7ea(0x202)]['getMsgService']()[_0x40b7ea(0x1de)](_0x3837f7,_0x13d624,_0x179cf8);}static async[_0x1ef774(0x20e)](_0x24827d,_0x560098){const _0xf9f65c=_0x1ef774;return await napCatCore[_0xf9f65c(0x202)][_0xf9f65c(0x1dc)]()[_0xf9f65c(0x20e)](_0x24827d,_0x560098);}static async[_0x1ef774(0x1f2)](_0x109346,_0x37c3a9,_0x591ef2,_0x2a2fde,_0x51acfa){const _0x3a59d0=_0x1ef774;return await napCatCore[_0x3a59d0(0x202)]['getMsgService']()['getMsgsBySeqAndCount'](_0x109346,_0x37c3a9,_0x591ef2,_0x2a2fde,_0x51acfa);}static async[_0x1ef774(0x1d5)](_0x3934d1){}static async[_0x1ef774(0x1fb)](_0x56b6cf){}static async[_0x1ef774(0x1fa)](_0x566bb2){const _0x358d91=_0x1ef774;return napCatCore['session'][_0x358d91(0x1dc)]()['setMsgRead'](_0x566bb2);}static async[_0x1ef774(0x21a)](_0xbb89c9,_0x134bcd){const _0x185615=_0x1ef774,_0x265303={'Hxqla':function(_0x30b449,_0xffc352){return _0x30b449(_0xffc352);},'tOtIS':_0x185615(0x213)};return new Promise(async(_0x3dadfb,_0xea998f)=>{const _0x4ccd3b=_0x185615,_0x2758e4={'qzyMy':function(_0x4b400f,_0xb1084f){const _0xec88f8=_0x4f15;return _0x265303[_0xec88f8(0x210)](_0x4b400f,_0xb1084f);},'oKpCa':_0x265303[_0x4ccd3b(0x216)],'FTaFw':function(_0x55959b,_0x2162bb){return _0x265303['Hxqla'](_0x55959b,_0x2162bb);}};let _0x546483=![];setTimeout(()=>{const _0x41c2cc=_0x4ccd3b;!_0x546483&&_0x2758e4[_0x41c2cc(0x218)](_0xea998f,_0x2758e4[_0x41c2cc(0x1eb)]);},0x1388);const _0x38876a=_0x13a39a=>{const _0x158897=_0x4ccd3b;_0x546483=!![],_0x2758e4['FTaFw'](_0x3dadfb,_0x13a39a[_0x158897(0x201)]);};GroupFileInfoUpdateTasks[_0x4ccd3b(0x1ea)](randomUUID(),_0x38876a),await napCatCore['session'][_0x4ccd3b(0x215)]()[_0x4ccd3b(0x21a)](_0xbb89c9,_0x134bcd);});}static async[_0x1ef774(0x1d8)](_0x4313f0,_0x310736,_0x1f720c){const _0x46bd07=_0x1ef774;return napCatCore[_0x46bd07(0x202)][_0x46bd07(0x1dc)]()[_0x46bd07(0x1d4)](_0x4313f0,_0x310736,_0x1f720c,!![]);}static async[_0x1ef774(0x1d3)](){}static async['recallMsg'](_0x44a063,_0x181f08){const _0x40dbc9=_0x1ef774;await napCatCore[_0x40dbc9(0x202)][_0x40dbc9(0x1dc)]()[_0x40dbc9(0x217)]({'chatType':_0x44a063['chatType'],'peerUid':_0x44a063[_0x40dbc9(0x220)]},_0x181f08);}static async[_0x1ef774(0x211)](_0x2e7e39,_0x3a6198,_0x3e550c=!![],_0x53f8b8=0x2710){const _0x589f73=_0x1ef774,_0x2f9e9d={'euZiJ':function(_0x2f4aa4,_0x55aac2){return _0x2f4aa4>_0x55aac2;},'CsUfY':_0x589f73(0x20b),'sTdyc':function(_0xed3bde,_0x2c9b22){return _0xed3bde(_0x2c9b22);},'FFScC':function(_0x15fff0){return _0x15fff0();},'BakfL':function(_0x27a38c,_0x4a7361){return _0x27a38c===_0x4a7361;},'MKwVf':function(_0x5b7d42){return _0x5b7d42();},'Hymzs':function(_0xee8777,_0x4ed5ae,_0x32468b){return _0xee8777(_0x4ed5ae,_0x32468b);},'UnRBO':function(_0x19c829){return _0x19c829();}},_0x783a83=_0x2e7e39[_0x589f73(0x220)];let _0x1f02d2=0x0;const _0xa1076a=async()=>{const _0x4758ed=_0x589f73;if(_0x2f9e9d[_0x4758ed(0x20c)](_0x1f02d2,_0x53f8b8))throw _0x2f9e9d['CsUfY'];const _0x55b04a=sendMessagePool[_0x2e7e39[_0x4758ed(0x220)]];if(_0x55b04a)return await _0x2f9e9d['sTdyc'](sleep,0x1f4),_0x1f02d2+=0x1f4,await _0x2f9e9d[_0x4758ed(0x214)](_0xa1076a);else return;};return await _0x2f9e9d[_0x589f73(0x206)](_0xa1076a),new Promise((_0x4d1ff2,_0x4afb89)=>{const _0x3ada7e=_0x589f73,_0x483231={'fcOMM':function(_0x99d2c7,_0x8974fd){return _0x2f9e9d['BakfL'](_0x99d2c7,_0x8974fd);},'wbQey':function(_0x446cea,_0x4d9fb7){return _0x446cea===_0x4d9fb7;}};let _0x106b0a=![],_0x2059d8=null;const _0x442ded=_0x2f9e9d[_0x3ada7e(0x1e1)](randomUUID);sendSuccessCBMap[_0x442ded]=_0x1f0175=>{const _0x5d8fe0=_0x3ada7e;if(_0x483231[_0x5d8fe0(0x1e0)](_0x1f0175[_0x5d8fe0(0x208)],_0x2059d8?.[_0x5d8fe0(0x208)])){if(_0x483231['wbQey'](_0x1f0175[_0x5d8fe0(0x1d9)],0x2))return delete sendSuccessCBMap[_0x442ded],_0x106b0a=!![],_0x4d1ff2(_0x1f0175),!![];return![];}return![];},sendMessagePool[_0x783a83]=async _0xe41cf=>{delete sendMessagePool[_0x783a83],_0x2059d8=_0xe41cf;},_0x2f9e9d['Hymzs'](setTimeout,()=>{const _0x308a17=_0x3ada7e;if(_0x106b0a)return;delete sendMessagePool[_0x783a83],delete sendSuccessCBMap[_0x442ded],_0x4afb89(_0x308a17(0x20b));},_0x53f8b8);const _0x5452c8=napCatCore[_0x3ada7e(0x202)][_0x3ada7e(0x1dc)]()[_0x3ada7e(0x211)]('0',_0x2e7e39,_0x3a6198,new Map());});}static async[_0x1ef774(0x1ec)](_0x15972f,_0x6427d6,_0x3a60e5){const _0x5389a0=_0x1ef774;return napCatCore['session']['getMsgService']()[_0x5389a0(0x1ec)](_0x3a60e5,_0x15972f,[_0x6427d6],new Map());}static async[_0x1ef774(0x209)](_0x10e3e5,_0xe017f,_0x226f9d){const _0x21397f=_0x1ef774,_0x41b0d0={'kfSgP':function(_0x1fa60b,_0x26bbad){return _0x1fa60b!=_0x26bbad;},'LbOaX':_0x21397f(0x1ff),'qWqGE':function(_0x2d8d46,_0x54e831){return _0x2d8d46==_0x54e831;},'QeXTH':function(_0x21e193,_0x4fe9df){return _0x21e193(_0x4fe9df);},'cjchr':_0x21397f(0x20d),'eqSlZ':function(_0x5bb684){return _0x5bb684();},'miABg':function(_0x15d321,_0x25cd29,_0x328c96){return _0x15d321(_0x25cd29,_0x328c96);}},_0x4089e9=_0x226f9d[_0x21397f(0x1fc)](_0x5462e2=>{const _0x2dec8b=_0x21397f;return{'msgId':_0x5462e2,'senderShowName':selfInfo[_0x2dec8b(0x1e8)]};});return new Promise((_0x530774,_0xa4a27a)=>{const _0x3c149f=_0x21397f,_0x4a7f44={'Zsjry':function(_0x21af2f,_0x516521){const _0x3bea15=_0x4f15;return _0x41b0d0[_0x3bea15(0x1d6)](_0x21af2f,_0x516521);},'lFTYL':_0x41b0d0[_0x3c149f(0x1dd)]};let _0x34e88d=![];const _0x2f2347=_0x5d90c2=>{const _0x32145c=_0x3c149f,_0x43ee67=_0x5d90c2[_0x32145c(0x1ee)]['find'](_0x1c7f31=>_0x1c7f31['arkElement']);if(!_0x43ee67)return;const _0x120e4a=JSON[_0x32145c(0x205)](_0x43ee67[_0x32145c(0x1e9)][_0x32145c(0x1f9)]);if(_0x41b0d0[_0x32145c(0x1ed)](_0x120e4a[_0x32145c(0x21d)],_0x41b0d0[_0x32145c(0x1d7)]))return;_0x41b0d0[_0x32145c(0x1df)](_0x5d90c2[_0x32145c(0x220)],_0xe017f[_0x32145c(0x220)])&&_0x5d90c2['senderUid']==selfInfo[_0x32145c(0x21c)]&&(_0x34e88d=!![],_0x41b0d0[_0x32145c(0x1d6)](_0x530774,_0x5d90c2));};sentMsgTasks[_0x3c149f(0x1ea)](_0x41b0d0[_0x3c149f(0x1e2)](randomUUID),_0x2f2347),_0x41b0d0['miABg'](setTimeout,()=>{const _0x4650b8=_0x3c149f;!_0x34e88d&&_0x4a7f44[_0x4650b8(0x1fd)](_0xa4a27a,_0x4a7f44[_0x4650b8(0x1e4)]);},0x1388),napCatCore[_0x3c149f(0x202)]['getMsgService']()[_0x3c149f(0x200)](_0x4089e9,_0x10e3e5,_0xe017f,[],new Map());});}}function _0xd0b0(){const _0x325433=['sendStatus','341257tcsyuL','4760330juxtzM','getMsgService','cjchr','getMultiMsg','qWqGE','fcOMM','MKwVf','eqSlZ','196YbKUHF','lFTYL','YelDC','catch','124788AYVSRK','nick','arkElement','set','oKpCa','forwardMsg','kfSgP','elements','2041145ntKABW','7LMgfNO','42712Aowttx','getMsgsBySeqAndCount','then','ruzBR','9cSMqbP','6oRFuDR','setMsgEmojiLikes','275KVnGxk','bytesData','setMsgRead','activateChatAndGetHistory','map','Zsjry','wrlCR','com.tencent.multimsg','multiForwardMsgWithComment','item','session','forEach','setEmojiLike','parse','UnRBO','addListener','msgId','multiForwardMsg','delete','发送超时','euZiJ','转发消息超时','getMsgsByMsgId','46262easbbt','Hxqla','sendMsg','length','获取群文件列表超时','FFScC','getRichMediaService','tOtIS','recallMsg','qzyMy','1284TEeboz','getGroupFileList','onGroupFileInfoUpdate','uid','app','qAUaQ','JlTiz','peerUid','fBbVA','onAddSendMsg','fetchRecentContact','getMsgsIncludeSelf','activateChat','QeXTH','LbOaX','getMsgHistory'];_0xd0b0=function(){return _0x325433;};return _0xd0b0();}