const _0x5c9ace=_0x4324;(function(_0xe8d6c4,_0x4171a0){const _0x5b48d1=_0x4324,_0x23bf9b=_0xe8d6c4();while(!![]){try{const _0x13c5ae=-parseInt(_0x5b48d1(0x9d))/0x1*(parseInt(_0x5b48d1(0x87))/0x2)+parseInt(_0x5b48d1(0x9b))/0x3*(parseInt(_0x5b48d1(0xa1))/0x4)+-parseInt(_0x5b48d1(0x8c))/0x5*(-parseInt(_0x5b48d1(0x7a))/0x6)+parseInt(_0x5b48d1(0x88))/0x7+-parseInt(_0x5b48d1(0xa5))/0x8*(parseInt(_0x5b48d1(0xac))/0x9)+parseInt(_0x5b48d1(0x81))/0xa+parseInt(_0x5b48d1(0x9a))/0xb*(parseInt(_0x5b48d1(0x7b))/0xc);if(_0x13c5ae===_0x4171a0)break;else _0x23bf9b['push'](_0x23bf9b['shift']());}catch(_0x396baf){_0x23bf9b['push'](_0x23bf9b['shift']());}}}(_0x56f8,0xac511));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x56f8(){const _0x48e7cb=['nick','GogPH','oeLLa','XOMRE','getMsgsByMsgId','KfOJw','com.tencent.multimsg','kkbpn','getMsgsIncludeSelf','sendStatus','parse','53625HwUYDG','537213YZHNtR','ysaoy','427583BHMhSr','getMsgsBySeqAndCount','jLWGT','dFhqk','28SwlnCV','NhRuK','recallMsg','app','7424WHIHyp','setMsgRead','fbBAn','DYyDu','activateChat','session','chatType','11709JbMISO','msgId','catch','XHonz','DZdDa','CKfPG','multiForwardMsgWithComment','senderUid','multiForwardMsg','AardK','forEach','peerUid','getMsgService','length','setMsgEmojiLikes','then','ARNxc','obBhr','390492InmJPI','168vwexJH','发送超时','map','onAddSendMsg','GIRYp','onMsgInfoListUpdate','11954070hHhLKT','forwardMsg','uid','sendMsg','setEmojiLike','auZeu','6uDidWU','1562106DPjDXZ','getMsgHistory','转发消息超时','guildId','35vwRBSN','fffAi','CcmYS'];_0x56f8=function(){return _0x48e7cb;};return _0x56f8();}function _0x4324(_0x2473a9,_0xb5d37e){const _0x56f8ee=_0x56f8();return _0x4324=function(_0x432425,_0x1a58de){_0x432425=_0x432425-0x70;let _0x219d35=_0x56f8ee[_0x432425];return _0x219d35;},_0x4324(_0x2473a9,_0xb5d37e);}const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x5c9ace(0x7e)]=_0x44e05c=>{const _0x358784=_0x5c9ace,_0x13ec51={'XHonz':function(_0xd651f4,_0x1002ee){return _0xd651f4(_0x1002ee);}};for(const [_0x1dab96,_0x4a7e31]of sentMsgTasks){_0x13ec51[_0x358784(0xaf)](_0x4a7e31,_0x44e05c),sentMsgTasks['delete'](_0x1dab96);}if(sendMessagePool[_0x44e05c[_0x358784(0x73)]]){const _0x118f7b=sendMessagePool[_0x44e05c[_0x358784(0x73)]]?.(_0x44e05c);_0x118f7b instanceof Promise&&_0x118f7b[_0x358784(0x77)]()[_0x358784(0xae)](logError);}},msgListener[_0x5c9ace(0x80)]=_0x46e009=>{const _0x25b619=_0x5c9ace,_0x4fcbed={'XOMRE':function(_0x5e9e5b,_0x2cf4c3){return _0x5e9e5b(_0x2cf4c3);},'auZeu':function(_0x353bbd,_0x1dab54){return _0x353bbd instanceof _0x1dab54;}};_0x46e009[_0x25b619(0x72)](_0x2c59a2=>{const _0x23020f=_0x25b619,_0x269431={'jLWGT':function(_0x23960c,_0x8e3285){const _0x121484=_0x4324;return _0x4fcbed[_0x121484(0x92)](_0x23960c,_0x8e3285);},'FgAKO':function(_0x4aef82,_0x5593b9){const _0x44ab99=_0x4324;return _0x4fcbed[_0x44ab99(0x86)](_0x4aef82,_0x5593b9);}};new Promise((_0x4c418c,_0x3f7635)=>{const _0x1b5368=_0x4324;for(const _0x4b447d in sendSuccessCBMap){const _0x468571=sendSuccessCBMap[_0x4b447d],_0x2686fb=_0x269431[_0x1b5368(0x9f)](_0x468571,_0x2c59a2),_0x38a234=_0x377012=>{_0x377012&&delete sendSuccessCBMap[_0x4b447d];};_0x269431['FgAKO'](_0x2686fb,Promise)?_0x2686fb[_0x1b5368(0x77)](_0x38a234):_0x269431[_0x1b5368(0x9f)](_0x38a234,_0x2686fb);}})[_0x23020f(0x77)]()[_0x23020f(0xae)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x5c9ace(0x85)](_0x5ad647,_0x11a330,_0x198e71,_0x244e6a=!![]){const _0x48877a=_0x5c9ace,_0x2f71cd={'NhRuK':function(_0x1322e1,_0x1df9aa){return _0x1322e1>_0x1df9aa;}};return napCatCore[_0x48877a(0xaa)][_0x48877a(0x74)]()[_0x48877a(0x76)](_0x5ad647,_0x11a330,_0x198e71,_0x2f71cd[_0x48877a(0xa2)](_0x198e71[_0x48877a(0x75)],0x3)?'2':'1',_0x244e6a);}static async['getMultiMsg'](_0x48f405,_0x59bb95,_0x521e81){const _0x5eda5f=_0x5c9ace;return napCatCore[_0x5eda5f(0xaa)][_0x5eda5f(0x74)]()['getMultiMsg'](_0x48f405,_0x59bb95,_0x521e81);}static async[_0x5c9ace(0x93)](_0x1d58cc,_0x38bdc2){const _0x4dfa4c=_0x5c9ace;return await napCatCore[_0x4dfa4c(0xaa)][_0x4dfa4c(0x74)]()['getMsgsByMsgId'](_0x1d58cc,_0x38bdc2);}static async['getMsgsBySeqAndCount'](_0x254005,_0x11c4b2,_0xebbc2b,_0x2781b2,_0x47b77b){const _0x5316f3=_0x5c9ace;return await napCatCore['session'][_0x5316f3(0x74)]()[_0x5316f3(0x9e)](_0x254005,_0x11c4b2,_0xebbc2b,_0x2781b2,_0x47b77b);}static async[_0x5c9ace(0xa9)](_0xd7d3d9){}static async['activateChatAndGetHistory'](_0x536090){}static async[_0x5c9ace(0xa6)](_0x2f83b3){const _0x50303e=_0x5c9ace;return napCatCore[_0x50303e(0xaa)]['getMsgService']()[_0x50303e(0xa6)](_0x2f83b3['chatType'],_0x2f83b3[_0x50303e(0x73)],_0x2f83b3[_0x50303e(0x8b)]);}static async[_0x5c9ace(0x89)](_0x54220d,_0x4904cb,_0xb47bcb){const _0x147d69=_0x5c9ace;return napCatCore['session']['getMsgService']()[_0x147d69(0x97)](_0x54220d,_0x4904cb,_0xb47bcb,!![]);}static async['fetchRecentContact'](){}static async[_0x5c9ace(0xa3)](_0x7d6520,_0x29ba8e){const _0x2e788a=_0x5c9ace;await napCatCore['session'][_0x2e788a(0x74)]()['recallMsg']({'chatType':_0x7d6520[_0x2e788a(0xab)],'peerUid':_0x7d6520[_0x2e788a(0x73)]},_0x29ba8e);}static async[_0x5c9ace(0x84)](_0x94a30,_0x46a8f6,_0x3b2aec=!![],_0x2381ca=0x2710){const _0x354d5b=_0x5c9ace,_0x27f048={'GIRYp':function(_0x5e8914,_0x104231){return _0x5e8914>_0x104231;},'fbBAn':_0x354d5b(0x7c),'PKpzv':function(_0x10c212){return _0x10c212();},'AardK':function(_0x4b980e,_0x1bd702){return _0x4b980e(_0x1bd702);},'dFhqk':function(_0x582d8b,_0x5689f6){return _0x582d8b===_0x5689f6;},'fffAi':function(_0x312601,_0x383f8c,_0x5e1fa2){return _0x312601(_0x383f8c,_0x5e1fa2);},'CcmYS':function(_0x2d982d){return _0x2d982d();}},_0x4d6d42=_0x94a30[_0x354d5b(0x73)];let _0x140365=0x0;const _0x48d7eb=async()=>{const _0x143a26=_0x354d5b;if(_0x27f048[_0x143a26(0x7f)](_0x140365,_0x2381ca))throw _0x27f048[_0x143a26(0xa7)];const _0x114b96=sendMessagePool[_0x94a30[_0x143a26(0x73)]];if(_0x114b96)return await sleep(0x1f4),_0x140365+=0x1f4,await _0x27f048['PKpzv'](_0x48d7eb);else return;};return await _0x27f048[_0x354d5b(0x8e)](_0x48d7eb),new Promise((_0xab25a5,_0x3d5f53)=>{const _0x570313=_0x354d5b,_0x384fd6={'oeLLa':function(_0x1ac58f,_0x506534){const _0x4f249f=_0x4324;return _0x27f048[_0x4f249f(0xa0)](_0x1ac58f,_0x506534);},'IPzog':function(_0x5656c6,_0x522e85){const _0x18bedc=_0x4324;return _0x27f048[_0x18bedc(0x71)](_0x5656c6,_0x522e85);}};let _0x318b92=![],_0x7428dc=null;const _0x50a5ca=randomUUID();sendSuccessCBMap[_0x50a5ca]=_0x229225=>{const _0x25d132=_0x4324;if(_0x384fd6[_0x25d132(0x91)](_0x229225[_0x25d132(0xad)],_0x7428dc?.[_0x25d132(0xad)])){if(_0x384fd6[_0x25d132(0x91)](_0x229225[_0x25d132(0x98)],0x2))return delete sendSuccessCBMap[_0x50a5ca],_0x318b92=!![],_0x384fd6['IPzog'](_0xab25a5,_0x229225),!![];return![];}return![];},sendMessagePool[_0x4d6d42]=async _0x593fd8=>{delete sendMessagePool[_0x4d6d42],_0x7428dc=_0x593fd8;},_0x27f048[_0x570313(0x8d)](setTimeout,()=>{const _0x71b4=_0x570313;if(_0x318b92)return;delete sendMessagePool[_0x4d6d42],delete sendSuccessCBMap[_0x50a5ca],_0x27f048[_0x71b4(0x71)](_0x3d5f53,_0x27f048['fbBAn']);},_0x2381ca);const _0x3fb8f0=napCatCore[_0x570313(0xaa)]['getMsgService']()['sendMsg']('0',_0x94a30,_0x46a8f6,new Map());});}static async[_0x5c9ace(0x82)](_0x40d636,_0x477f5e,_0x174525){return napCatCore['session']['getMsgService']()['forwardMsg'](_0x174525,_0x40d636,[_0x477f5e],new Map());}static async[_0x5c9ace(0x70)](_0x27a3de,_0x1b86ea,_0x2b07e8){const _0x1f4df0=_0x5c9ace,_0x405181={'obBhr':function(_0x13626c,_0x1e99a4){return _0x13626c==_0x1e99a4;},'uboUc':function(_0x312b26,_0x5f3f30){return _0x312b26(_0x5f3f30);},'CKfPG':function(_0x5d4a21,_0x34143e){return _0x5d4a21(_0x34143e);},'zrfKR':_0x1f4df0(0x8a),'KfOJw':function(_0xf9b4fa){return _0xf9b4fa();},'ysaoy':function(_0x26eacc,_0x4e7f41,_0x770a0a){return _0x26eacc(_0x4e7f41,_0x770a0a);}},_0x2ad04c=_0x2b07e8[_0x1f4df0(0x7d)](_0x105755=>{const _0x5b01af=_0x1f4df0;return{'msgId':_0x105755,'senderShowName':selfInfo[_0x5b01af(0x8f)]};});return new Promise((_0x90d881,_0x1a60c5)=>{const _0x4518c7=_0x1f4df0,_0x324974={'DYyDu':function(_0x304801,_0x4b3d9f){return _0x304801!=_0x4b3d9f;},'ARNxc':_0x4518c7(0x95),'GogPH':function(_0x4f70fc,_0x36e1cb){const _0x41b5b2=_0x4518c7;return _0x405181[_0x41b5b2(0x79)](_0x4f70fc,_0x36e1cb);},'EwOcM':function(_0x5ae4d1,_0xcb2958){return _0x405181['obBhr'](_0x5ae4d1,_0xcb2958);},'TLEtp':function(_0x50fcb9,_0x1d2232){return _0x405181['uboUc'](_0x50fcb9,_0x1d2232);},'kkbpn':function(_0x206250,_0x200cb4){const _0x18e8e5=_0x4518c7;return _0x405181[_0x18e8e5(0xb1)](_0x206250,_0x200cb4);},'DZdDa':_0x405181['zrfKR']};let _0x4883a2=![];const _0x5a5826=_0x186ea8=>{const _0x171b67=_0x4518c7,_0x21189f=_0x186ea8['elements']['find'](_0x2cc274=>_0x2cc274['arkElement']);if(!_0x21189f)return;const _0x5db689=JSON[_0x171b67(0x99)](_0x21189f['arkElement']['bytesData']);if(_0x324974[_0x171b67(0xa8)](_0x5db689[_0x171b67(0xa4)],_0x324974[_0x171b67(0x78)]))return;_0x324974[_0x171b67(0x90)](_0x186ea8[_0x171b67(0x73)],_0x1b86ea[_0x171b67(0x73)])&&_0x324974['EwOcM'](_0x186ea8[_0x171b67(0xb3)],selfInfo[_0x171b67(0x83)])&&(_0x4883a2=!![],_0x324974['TLEtp'](_0x90d881,_0x186ea8));};sentMsgTasks['set'](_0x405181[_0x4518c7(0x94)](randomUUID),_0x5a5826),_0x405181[_0x4518c7(0x9c)](setTimeout,()=>{const _0x5c8c9f=_0x4518c7;!_0x4883a2&&_0x324974[_0x5c8c9f(0x96)](_0x1a60c5,_0x324974[_0x5c8c9f(0xb0)]);},0x1388),napCatCore[_0x4518c7(0xaa)][_0x4518c7(0x74)]()[_0x4518c7(0xb2)](_0x2ad04c,_0x27a3de,_0x1b86ea,[],new Map());});}}