const _0x2fc698=_0x19e1;(function(_0x40f2d1,_0x10e45a){const _0x148fd9=_0x19e1,_0x1e51b1=_0x40f2d1();while(!![]){try{const _0x1b8930=parseInt(_0x148fd9(0x15e))/0x1+-parseInt(_0x148fd9(0x160))/0x2*(parseInt(_0x148fd9(0x137))/0x3)+-parseInt(_0x148fd9(0x133))/0x4+parseInt(_0x148fd9(0x152))/0x5+parseInt(_0x148fd9(0x13c))/0x6*(parseInt(_0x148fd9(0x14e))/0x7)+parseInt(_0x148fd9(0x147))/0x8+-parseInt(_0x148fd9(0x167))/0x9;if(_0x1b8930===_0x10e45a)break;else _0x1e51b1['push'](_0x1e51b1['shift']());}catch(_0x1c0ac1){_0x1e51b1['push'](_0x1e51b1['shift']());}}}(_0x1cc9,0x9a8db));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';function _0x19e1(_0x26707f,_0x51716e){const _0x1cc97d=_0x1cc9();return _0x19e1=function(_0x19e137,_0x2832f9){_0x19e137=_0x19e137-0x12f;let _0x5e8f43=_0x1cc97d[_0x19e137];return _0x5e8f43;},_0x19e1(_0x26707f,_0x51716e);}import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x1cc9(){const _0x6be04=['setMsgEmojiLikes','wGvmS','IMIhF','tGqLE','getMultiMsg','getMsgsBySeqAndCount','tVpMU','elements','发送超时','542360WVxxLk','then','740218pcKOWb','fetchRecentContact','onAddSendMsg','KQxSe','bytesData','bfdbl','getMsgHistory','20351205tblsNN','Nsfsm','session','forwardMsg','onMsgInfoListUpdate','arkElement','getMsgsByMsgId','uid','转发消息超时','find','msgId','setMsgRead','tfQRe','recallMsg','671592fADBIe','nick','setEmojiLike','addListener','3OiGlqC','HTwPP','activateChatAndGetHistory','chatType','map','36PwXCcz','WvwxX','Bkehj','NfgvV','NjJUK','getMsgService','sendMsg','getMsgsIncludeSelf','senderUid','sendStatus','activateChat','4920656xrCpkB','QOScJ','onLoginSuccess','delete','parse','length','multiForwardMsg','1261967ebNbjo','peerUid','set','catch','5965875QyHpGi','xzjRL','multiForwardMsgWithComment'];_0x1cc9=function(){return _0x6be04;};return _0x1cc9();}const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x2fc698(0x162)]=_0x4ac392=>{const _0x251b87=_0x2fc698,_0x3d7eef={'IMIhF':function(_0x84f972,_0xe1dd7c){return _0x84f972 instanceof _0xe1dd7c;}};for(const [_0x5df5ef,_0x1724a6]of sentMsgTasks){_0x1724a6(_0x4ac392),sentMsgTasks[_0x251b87(0x14a)](_0x5df5ef);}if(sendMessagePool[_0x4ac392[_0x251b87(0x14f)]]){const _0x4a1437=sendMessagePool[_0x4ac392[_0x251b87(0x14f)]]?.(_0x4ac392);_0x3d7eef[_0x251b87(0x157)](_0x4a1437,Promise)&&_0x4a1437[_0x251b87(0x15f)]()['catch'](logError);}},msgListener[_0x2fc698(0x16b)]=_0xb419b7=>{const _0x581c54={'tfQRe':function(_0x49f786,_0x4e4ebb){return _0x49f786(_0x4e4ebb);}};_0xb419b7['forEach'](_0x384cae=>{const _0x3416d5=_0x19e1;new Promise((_0x5d6f35,_0x16b2ae)=>{const _0x5134a0=_0x19e1;for(const _0xae0645 in sendSuccessCBMap){const _0x218e63=sendSuccessCBMap[_0xae0645],_0x2120ad=_0x218e63(_0x384cae),_0x3ea2c6=_0x58d395=>{_0x58d395&&delete sendSuccessCBMap[_0xae0645];};_0x2120ad instanceof Promise?_0x2120ad['then'](_0x3ea2c6):_0x581c54[_0x5134a0(0x131)](_0x3ea2c6,_0x2120ad);}})['then']()[_0x3416d5(0x151)](log);});},setTimeout(()=>{const _0x359968=_0x2fc698;napCatCore[_0x359968(0x149)](()=>{const _0x29ddcb=_0x359968;napCatCore[_0x29ddcb(0x136)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x2fc698(0x135)](_0x4830b5,_0x266c57,_0x3ed791,_0xe80d38=!![]){const _0x4a1309=_0x2fc698,_0x445ae1={'tVpMU':function(_0x2fe238,_0x491aab){return _0x2fe238>_0x491aab;}};return _0x3ed791=_0x3ed791['toString'](),napCatCore[_0x4a1309(0x169)][_0x4a1309(0x141)]()[_0x4a1309(0x155)](_0x4830b5,_0x266c57,_0x3ed791,_0x445ae1[_0x4a1309(0x15b)](_0x3ed791[_0x4a1309(0x14c)],0x3)?'2':'1',_0xe80d38);}static async[_0x2fc698(0x159)](_0x53032a,_0x55f1e7,_0x55fe6b){const _0xac4f61=_0x2fc698;return napCatCore[_0xac4f61(0x169)]['getMsgService']()['getMultiMsg'](_0x53032a,_0x55f1e7,_0x55fe6b);}static async[_0x2fc698(0x16d)](_0x1b61df,_0x48cc12){const _0x12c9aa=_0x2fc698;return await napCatCore[_0x12c9aa(0x169)][_0x12c9aa(0x141)]()[_0x12c9aa(0x16d)](_0x1b61df,_0x48cc12);}static async[_0x2fc698(0x15a)](_0x49358b,_0x105ed0,_0x42f24a,_0x21f42f,_0x5c34cf){const _0x2a9f97=_0x2fc698;return await napCatCore[_0x2a9f97(0x169)][_0x2a9f97(0x141)]()[_0x2a9f97(0x15a)](_0x49358b,_0x105ed0,_0x42f24a,_0x21f42f,_0x5c34cf);}static async[_0x2fc698(0x146)](_0xdb51c7){}static async[_0x2fc698(0x139)](_0x2b2f54){}static async[_0x2fc698(0x130)](_0x8a7204){const _0x3849df=_0x2fc698;return napCatCore[_0x3849df(0x169)]['getMsgService']()[_0x3849df(0x130)](_0x8a7204);}static async[_0x2fc698(0x166)](_0x5e5bcf,_0x224f5b,_0x1aefb2){const _0x180736=_0x2fc698;return napCatCore[_0x180736(0x169)][_0x180736(0x141)]()[_0x180736(0x143)](_0x5e5bcf,_0x224f5b,_0x1aefb2,!![]);}static async[_0x2fc698(0x161)](){}static async[_0x2fc698(0x132)](_0x3fd927,_0xdf73f8){const _0x5b900f=_0x2fc698;await napCatCore[_0x5b900f(0x169)]['getMsgService']()[_0x5b900f(0x132)]({'chatType':_0x3fd927[_0x5b900f(0x13a)],'peerUid':_0x3fd927[_0x5b900f(0x14f)]},_0xdf73f8);}static async[_0x2fc698(0x142)](_0x5858a0,_0x54be32,_0x4397ab=!![],_0x4a7c06=0x2710){const _0x3d2e2f=_0x2fc698,_0x249049={'wGvmS':function(_0x20aac6,_0x4483cb){return _0x20aac6>_0x4483cb;},'QOScJ':function(_0x40942d,_0x55cf13){return _0x40942d(_0x55cf13);},'Bkehj':function(_0x2338ef){return _0x2338ef();},'WvwxX':_0x3d2e2f(0x15d),'dSPXR':function(_0x1296ee,_0x65b2bb){return _0x1296ee===_0x65b2bb;}},_0x54d530=_0x5858a0[_0x3d2e2f(0x14f)];let _0x593ab3=0x0;const _0x37b58e=async()=>{const _0xb781bf=_0x3d2e2f;if(_0x249049[_0xb781bf(0x156)](_0x593ab3,_0x4a7c06))throw _0xb781bf(0x15d);const _0x37943d=sendMessagePool[_0x5858a0[_0xb781bf(0x14f)]];if(_0x37943d)return await _0x249049[_0xb781bf(0x148)](sleep,0x1f4),_0x593ab3+=0x1f4,await _0x249049[_0xb781bf(0x13e)](_0x37b58e);else return;};return await _0x249049[_0x3d2e2f(0x13e)](_0x37b58e),new Promise((_0x4765a7,_0x2e6b78)=>{const _0x129557=_0x3d2e2f,_0x48f77d={'bfdbl':function(_0x2d09f5,_0x38ddc6){return _0x249049['dSPXR'](_0x2d09f5,_0x38ddc6);},'xzjRL':function(_0x3267b2,_0x527696){return _0x3267b2(_0x527696);}};let _0x185681=![],_0x19cae9=null;const _0x10a01b=randomUUID();sendSuccessCBMap[_0x10a01b]=_0x24f173=>{const _0x54977c=_0x19e1;if(_0x48f77d[_0x54977c(0x165)](_0x24f173['msgId'],_0x19cae9?.[_0x54977c(0x12f)])){if(_0x48f77d['bfdbl'](_0x24f173[_0x54977c(0x145)],0x2))return delete sendSuccessCBMap[_0x10a01b],_0x185681=!![],_0x48f77d[_0x54977c(0x153)](_0x4765a7,_0x24f173),!![];return![];}return![];},sendMessagePool[_0x54d530]=async _0x11dd61=>{delete sendMessagePool[_0x54d530],_0x19cae9=_0x11dd61;},setTimeout(()=>{const _0x232a6b=_0x19e1;if(_0x185681)return;delete sendMessagePool[_0x54d530],delete sendSuccessCBMap[_0x10a01b],_0x2e6b78(_0x249049[_0x232a6b(0x13d)]);},_0x4a7c06);const _0x436b72=napCatCore[_0x129557(0x169)][_0x129557(0x141)]()[_0x129557(0x142)]('0',_0x5858a0,_0x54be32,new Map());});}static async[_0x2fc698(0x16a)](_0x179d54,_0x59cf69,_0x340e7e){const _0x41d8da=_0x2fc698;return napCatCore[_0x41d8da(0x169)][_0x41d8da(0x141)]()[_0x41d8da(0x16a)](_0x340e7e,_0x179d54,[_0x59cf69],new Map());}static async[_0x2fc698(0x14d)](_0x27459d,_0xa68a19,_0x332f14){const _0x59a5be=_0x2fc698,_0x3eb3d5={'Nsfsm':function(_0x16911a,_0x57a820){return _0x16911a!=_0x57a820;},'xxpQO':function(_0x5f13ef,_0x4f9770){return _0x5f13ef==_0x4f9770;},'eQicy':function(_0x595e7f,_0x2f236b){return _0x595e7f==_0x2f236b;},'tGqLE':function(_0x436c03,_0x3714a7){return _0x436c03(_0x3714a7);},'NfgvV':_0x59a5be(0x16f),'NjJUK':function(_0x450a7c){return _0x450a7c();},'KQxSe':function(_0x27003e,_0x1de025,_0x1e92d8){return _0x27003e(_0x1de025,_0x1e92d8);}},_0x2261b8=_0x332f14[_0x59a5be(0x13b)](_0x46d553=>{const _0x402a86=_0x59a5be;return{'msgId':_0x46d553,'senderShowName':selfInfo[_0x402a86(0x134)]};});return new Promise((_0x3f504c,_0x20817f)=>{const _0x1daf72=_0x59a5be,_0xba1659={'HTwPP':function(_0x3b34e0,_0x5216d2){const _0xa1c508=_0x19e1;return _0x3eb3d5[_0xa1c508(0x158)](_0x3b34e0,_0x5216d2);},'sJYNg':_0x3eb3d5[_0x1daf72(0x13f)]};let _0x234e61=![];const _0x151db5=_0x1a217f=>{const _0x3ec3e6=_0x1daf72,_0x1cc509=_0x1a217f[_0x3ec3e6(0x15c)][_0x3ec3e6(0x170)](_0x1a60aa=>_0x1a60aa[_0x3ec3e6(0x16c)]);if(!_0x1cc509)return;const _0x7252ba=JSON[_0x3ec3e6(0x14b)](_0x1cc509[_0x3ec3e6(0x16c)][_0x3ec3e6(0x164)]);if(_0x3eb3d5[_0x3ec3e6(0x168)](_0x7252ba['app'],'com.tencent.multimsg'))return;_0x3eb3d5['xxpQO'](_0x1a217f[_0x3ec3e6(0x14f)],_0xa68a19[_0x3ec3e6(0x14f)])&&_0x3eb3d5['eQicy'](_0x1a217f[_0x3ec3e6(0x144)],selfInfo[_0x3ec3e6(0x16e)])&&(_0x234e61=!![],_0x3f504c(_0x1a217f));};sentMsgTasks[_0x1daf72(0x150)](_0x3eb3d5[_0x1daf72(0x140)](randomUUID),_0x151db5),_0x3eb3d5[_0x1daf72(0x163)](setTimeout,()=>{const _0x337a2c=_0x1daf72;!_0x234e61&&_0xba1659[_0x337a2c(0x138)](_0x20817f,_0xba1659['sJYNg']);},0x1388),napCatCore[_0x1daf72(0x169)][_0x1daf72(0x141)]()[_0x1daf72(0x154)](_0x2261b8,_0x27459d,_0xa68a19,[],new Map());});}}