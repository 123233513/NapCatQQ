function _0x23df(){const _0x55a8dc=['ZljwJ','56NFnmSB','fppCq','2632959JDRBoV','2260448xrvday','UyPfI','setMsgEmojiLikes','com.tencent.multimsg','recallMsg','arkElement','iZAkj','setEmojiLike','senderUid','onLoginSuccess','then','length','session','multiForwardMsg','JppJy','2250204NJABeo','1344978hkAzwl','iUPeU','nZAnO','mMlkj','184079xWBgDT','8117658bmNyGt','set','setMsgRead','xGPrG','RdmIi','getMsgsBySeqAndCount','hNHSl','QkSve','xNNtC','onAddSendMsg','发送超时','nick','toString','delete','peerUid','activateChat','EuUdT','parse','getMultiMsg','tSaRL','chatType','app','dOZtZ','3gixCZX','sendMsg','getMsgHistory','getMsgService','xIRVJ','msgId','AOTxa','3621250ZLIfog','forEach','fetchRecentContact','multiForwardMsgWithComment','elements','doUYL','forwardMsg','onMsgInfoListUpdate'];_0x23df=function(){return _0x55a8dc;};return _0x23df();}const _0x18f5fe=_0x1ff0;(function(_0x459e67,_0x3b7e35){const _0x5b3d00=_0x1ff0,_0xc321ca=_0x459e67();while(!![]){try{const _0xaa4b02=-parseInt(_0x5b3d00(0x178))/0x1+-parseInt(_0x5b3d00(0x164))/0x2*(parseInt(_0x5b3d00(0x151))/0x3)+-parseInt(_0x5b3d00(0x173))/0x4+parseInt(_0x5b3d00(0x158))/0x5+parseInt(_0x5b3d00(0x179))/0x6+-parseInt(_0x5b3d00(0x163))/0x7+parseInt(_0x5b3d00(0x161))/0x8*(parseInt(_0x5b3d00(0x174))/0x9);if(_0xaa4b02===_0x3b7e35)break;else _0xc321ca['push'](_0xc321ca['shift']());}catch(_0x41bc9b){_0xc321ca['push'](_0xc321ca['shift']());}}}(_0x23df,0xd4798));import{selfInfo}from'@/core/data';function _0x1ff0(_0x2efc38,_0x592794){const _0x23dfb0=_0x23df();return _0x1ff0=function(_0x1ff0af,_0x44f991){_0x1ff0af=_0x1ff0af-0x148;let _0x285db6=_0x23dfb0[_0x1ff0af];return _0x285db6;},_0x1ff0(_0x2efc38,_0x592794);}import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x18f5fe(0x182)]=_0x497b42=>{const _0x4ea0c9=_0x18f5fe;for(const [_0x5dfbf3,_0x33f15b]of sentMsgTasks){_0x33f15b(_0x497b42),sentMsgTasks[_0x4ea0c9(0x186)](_0x5dfbf3);}if(sendMessagePool[_0x497b42['peerUid']]){const _0x1b6ceb=sendMessagePool[_0x497b42[_0x4ea0c9(0x148)]]?.(_0x497b42);_0x1b6ceb instanceof Promise&&_0x1b6ceb['then']()['catch'](logError);}},msgListener[_0x18f5fe(0x15f)]=_0x1ba30f=>{const _0x4f6c6a=_0x18f5fe,_0x4316e1={'xNNtC':function(_0x59c1b2,_0x5c340c){return _0x59c1b2(_0x5c340c);},'AOTxa':function(_0x240879,_0x316154){return _0x240879 instanceof _0x316154;},'nZAnO':function(_0x3ceb4c,_0x647c2){return _0x3ceb4c(_0x647c2);}};_0x1ba30f[_0x4f6c6a(0x159)](_0x53fef0=>{const _0x304489=_0x4f6c6a;new Promise((_0x49e4c0,_0x34fbc6)=>{const _0x3e055c=_0x1ff0;for(const _0xba202b in sendSuccessCBMap){const _0x2ded30=sendSuccessCBMap[_0xba202b],_0x2c1fce=_0x4316e1[_0x3e055c(0x181)](_0x2ded30,_0x53fef0),_0x1bd495=_0x3cfbef=>{_0x3cfbef&&delete sendSuccessCBMap[_0xba202b];};_0x4316e1[_0x3e055c(0x157)](_0x2c1fce,Promise)?_0x2c1fce[_0x3e055c(0x16e)](_0x1bd495):_0x4316e1[_0x3e055c(0x176)](_0x1bd495,_0x2c1fce);}})[_0x304489(0x16e)]()['catch'](log);});},setTimeout(()=>{const _0x446f62=_0x18f5fe;napCatCore[_0x446f62(0x16d)](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x18f5fe(0x16b)](_0x4a6ee1,_0x58cded,_0x37c876,_0x55e7a2=!![]){const _0x38fd0c=_0x18f5fe,_0x24695e={'CAwRX':function(_0x5ac04f,_0x3d4985){return _0x5ac04f>_0x3d4985;}};return _0x37c876=_0x37c876[_0x38fd0c(0x185)](),napCatCore[_0x38fd0c(0x170)]['getMsgService']()[_0x38fd0c(0x166)](_0x4a6ee1,_0x58cded,_0x37c876,_0x24695e['CAwRX'](_0x37c876[_0x38fd0c(0x16f)],0x3)?'2':'1',_0x55e7a2);}static async[_0x18f5fe(0x14c)](_0x4f3cef,_0x43a8b0,_0x29a9cf){const _0x9d56bc=_0x18f5fe;return napCatCore[_0x9d56bc(0x170)][_0x9d56bc(0x154)]()['getMultiMsg'](_0x4f3cef,_0x43a8b0,_0x29a9cf);}static async['getMsgsByMsgId'](_0x2433b3,_0x25a087){const _0xa236cb=_0x18f5fe;return await napCatCore[_0xa236cb(0x170)][_0xa236cb(0x154)]()['getMsgsByMsgId'](_0x2433b3,_0x25a087);}static async[_0x18f5fe(0x17e)](_0x1bef48,_0x4d93e8,_0x53c08b,_0x11d499,_0x6590f5){const _0x199e1e=_0x18f5fe;return await napCatCore[_0x199e1e(0x170)]['getMsgService']()['getMsgsBySeqAndCount'](_0x1bef48,_0x4d93e8,_0x53c08b,_0x11d499,_0x6590f5);}static async[_0x18f5fe(0x149)](_0x2dcb53){}static async['activateChatAndGetHistory'](_0x1343f8){}static async[_0x18f5fe(0x17b)](_0x13e9e2){const _0xd6af63=_0x18f5fe;return napCatCore[_0xd6af63(0x170)]['getMsgService']()[_0xd6af63(0x17b)](_0x13e9e2);}static async[_0x18f5fe(0x153)](_0x29e934,_0x13b6b2,_0x1b412e){const _0x342601=_0x18f5fe;return napCatCore[_0x342601(0x170)]['getMsgService']()['getMsgsIncludeSelf'](_0x29e934,_0x13b6b2,_0x1b412e,!![]);}static async[_0x18f5fe(0x15a)](){}static async[_0x18f5fe(0x168)](_0x32723a,_0x2c2f0f){const _0x5f16ed=_0x18f5fe;await napCatCore[_0x5f16ed(0x170)][_0x5f16ed(0x154)]()[_0x5f16ed(0x168)]({'chatType':_0x32723a[_0x5f16ed(0x14e)],'peerUid':_0x32723a[_0x5f16ed(0x148)]},_0x2c2f0f);}static async[_0x18f5fe(0x152)](_0x22a05a,_0x183682,_0x202a19=!![],_0x3c2785=0x2710){const _0x1d9468=_0x18f5fe,_0x4b4f08={'tSaRL':function(_0x1d1ffc,_0x15ae02){return _0x1d1ffc>_0x15ae02;},'HkFMq':_0x1d9468(0x183),'EuUdT':function(_0x5d8678,_0x5e0483){return _0x5d8678(_0x5e0483);},'dOZtZ':function(_0x4d98ba){return _0x4d98ba();},'JppJy':function(_0x38ef30,_0x238d28){return _0x38ef30===_0x238d28;},'ydNFm':function(_0x6c9b90,_0x32358d){return _0x6c9b90(_0x32358d);},'QkSve':function(_0x36534b,_0x1a294f,_0x4639a4){return _0x36534b(_0x1a294f,_0x4639a4);}},_0x235878=_0x22a05a['peerUid'];let _0x4139ab=0x0;const _0xfe52ee=async()=>{const _0x285a7d=_0x1d9468;if(_0x4b4f08[_0x285a7d(0x14d)](_0x4139ab,_0x3c2785))throw _0x4b4f08['HkFMq'];const _0x32ba89=sendMessagePool[_0x22a05a[_0x285a7d(0x148)]];if(_0x32ba89)return await _0x4b4f08[_0x285a7d(0x14a)](sleep,0x1f4),_0x4139ab+=0x1f4,await _0x4b4f08[_0x285a7d(0x150)](_0xfe52ee);else return;};return await _0x4b4f08[_0x1d9468(0x150)](_0xfe52ee),new Promise((_0x1c2be7,_0x15ecab)=>{const _0x38426f=_0x1d9468,_0x54bc56={'fppCq':function(_0x5835d6,_0x1d27ea){return _0x4b4f08['ydNFm'](_0x5835d6,_0x1d27ea);},'xIRVJ':_0x4b4f08['HkFMq']};let _0x27298e=![],_0x50a587=null;const _0x145352=_0x4b4f08[_0x38426f(0x150)](randomUUID);sendSuccessCBMap[_0x145352]=_0x4bc61b=>{const _0x549b25=_0x38426f;if(_0x4b4f08[_0x549b25(0x172)](_0x4bc61b[_0x549b25(0x156)],_0x50a587?.[_0x549b25(0x156)])){if(_0x4bc61b['sendStatus']===0x2)return delete sendSuccessCBMap[_0x145352],_0x27298e=!![],_0x4b4f08[_0x549b25(0x14a)](_0x1c2be7,_0x4bc61b),!![];return![];}return![];},sendMessagePool[_0x235878]=async _0x2261ec=>{delete sendMessagePool[_0x235878],_0x50a587=_0x2261ec;},_0x4b4f08[_0x38426f(0x180)](setTimeout,()=>{const _0x34cd23=_0x38426f;if(_0x27298e)return;delete sendMessagePool[_0x235878],delete sendSuccessCBMap[_0x145352],_0x54bc56[_0x34cd23(0x162)](_0x15ecab,_0x54bc56[_0x34cd23(0x155)]);},_0x3c2785);const _0x4c9662=napCatCore[_0x38426f(0x170)][_0x38426f(0x154)]()[_0x38426f(0x152)]('0',_0x22a05a,_0x183682,new Map());});}static async[_0x18f5fe(0x15e)](_0x10ac79,_0x175654,_0x5dde80){const _0x38ec96=_0x18f5fe;return napCatCore[_0x38ec96(0x170)][_0x38ec96(0x154)]()[_0x38ec96(0x15e)](_0x5dde80,_0x10ac79,[_0x175654],new Map());}static async[_0x18f5fe(0x171)](_0x23e7fe,_0x5cb215,_0x5acfc3){const _0x23e442=_0x18f5fe,_0x8333a5={'RdmIi':_0x23e442(0x167),'mMlkj':function(_0x28e127,_0x27f4ed){return _0x28e127==_0x27f4ed;},'UyPfI':function(_0x8a8d4d,_0x387646){return _0x8a8d4d==_0x387646;},'doUYL':function(_0x4ea75e,_0x2fd6a6){return _0x4ea75e(_0x2fd6a6);},'xGPrG':function(_0x146d69){return _0x146d69();},'yKkFc':function(_0x56f383,_0xf1f9ce,_0x32a493){return _0x56f383(_0xf1f9ce,_0x32a493);}},_0x10b95f=_0x5acfc3['map'](_0xec5b6c=>{const _0x273ec6=_0x23e442;return{'msgId':_0xec5b6c,'senderShowName':selfInfo[_0x273ec6(0x184)]};});return new Promise((_0x5d5943,_0xaf8057)=>{const _0x284010=_0x23e442,_0x20741e={'iUPeU':_0x8333a5[_0x284010(0x17d)],'oflTV':function(_0x58e433,_0x4d5159){const _0x2a5063=_0x284010;return _0x8333a5[_0x2a5063(0x177)](_0x58e433,_0x4d5159);},'ZljwJ':function(_0x5baf0f,_0x59cfeb){const _0x7acace=_0x284010;return _0x8333a5[_0x7acace(0x165)](_0x5baf0f,_0x59cfeb);},'iZAkj':function(_0x1d64fe,_0x3f5afa){const _0x2a6edc=_0x284010;return _0x8333a5[_0x2a6edc(0x15d)](_0x1d64fe,_0x3f5afa);},'hNHSl':'转发消息超时'};let _0x4afaba=![];const _0x4682da=_0x55f6ac=>{const _0x2e6d9a=_0x284010,_0x43f6f5=_0x55f6ac[_0x2e6d9a(0x15c)]['find'](_0x511553=>_0x511553[_0x2e6d9a(0x169)]);if(!_0x43f6f5)return;const _0x2a2444=JSON[_0x2e6d9a(0x14b)](_0x43f6f5[_0x2e6d9a(0x169)]['bytesData']);if(_0x2a2444[_0x2e6d9a(0x14f)]!=_0x20741e[_0x2e6d9a(0x175)])return;_0x20741e['oflTV'](_0x55f6ac['peerUid'],_0x5cb215[_0x2e6d9a(0x148)])&&_0x20741e[_0x2e6d9a(0x160)](_0x55f6ac[_0x2e6d9a(0x16c)],selfInfo['uid'])&&(_0x4afaba=!![],_0x20741e[_0x2e6d9a(0x16a)](_0x5d5943,_0x55f6ac));};sentMsgTasks[_0x284010(0x17a)](_0x8333a5[_0x284010(0x17c)](randomUUID),_0x4682da),_0x8333a5['yKkFc'](setTimeout,()=>{const _0xae182f=_0x284010;!_0x4afaba&&_0x20741e[_0xae182f(0x16a)](_0xaf8057,_0x20741e[_0xae182f(0x17f)]);},0x1388),napCatCore[_0x284010(0x170)][_0x284010(0x154)]()[_0x284010(0x15b)](_0x10b95f,_0x23e7fe,_0x5cb215,[],new Map());});}}