const _0x155f26=_0xbad7;function _0xbad7(_0x52a457,_0x173dc5){const _0x222b6d=_0x222b();return _0xbad7=function(_0xbad7ea,_0x23ba21){_0xbad7ea=_0xbad7ea-0x150;let _0x63e7b5=_0x222b6d[_0xbad7ea];return _0x63e7b5;},_0xbad7(_0x52a457,_0x173dc5);}(function(_0x1dc43a,_0x976376){const _0x29898b=_0xbad7,_0x43edf1=_0x1dc43a();while(!![]){try{const _0x26ac59=-parseInt(_0x29898b(0x188))/0x1+-parseInt(_0x29898b(0x172))/0x2+-parseInt(_0x29898b(0x153))/0x3*(-parseInt(_0x29898b(0x173))/0x4)+-parseInt(_0x29898b(0x170))/0x5+parseInt(_0x29898b(0x189))/0x6*(-parseInt(_0x29898b(0x196))/0x7)+parseInt(_0x29898b(0x183))/0x8*(parseInt(_0x29898b(0x195))/0x9)+parseInt(_0x29898b(0x163))/0xa;if(_0x26ac59===_0x976376)break;else _0x43edf1['push'](_0x43edf1['shift']());}catch(_0x4fc983){_0x43edf1['push'](_0x43edf1['shift']());}}}(_0x222b,0x60762));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';function _0x222b(){const _0x59594f=['bytesData','ZPQoa','WwjhB','elements','getMsgsIncludeSelf','chatType','sendMsg','item','IdLvH','getMsgHistory','fetchRecentContact','getMsgsByMsgId','onAddSendMsg','GbeQL','TRcmz','1778344EAdDRC','multiForwardMsgWithComment','setEmojiLike','recallMsg','addListener','628351xRubup','1189038smIrWa','获取群文件列表超时','getMsgsBySeqAndCount','qozPV','activateChatAndGetHistory','multiForwardMsg','senderUid','set','session','delete','then','msgId','9gILaAL','14IzoBPo','BVBTg','parse','BQuRU','getMsgService','onGroupFileInfoUpdate','375DKyTzo','getGroupFileList','toString','onLoginSuccess','nick','CJJuB','qxuLs','app','AgxtO','uid','forEach','SjAIK','getMultiMsg','com.tencent.multimsg','arkElement','onMsgInfoListUpdate','20316600sfiWhU','map','peerUid','find','forwardMsg','BGGDT','发送超时','fDFrk','length','xjeba','setMsgRead','WMXfA','JSIHV','2306675uvzwyC','catch','1205380HvDXlB','7356QIktfL'];_0x222b=function(){return _0x59594f;};return _0x222b();}import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x155f26(0x152)]=_0x112e0c=>{const _0x118090=_0x155f26;for(const [_0x4d0a73,_0x3c7bf4]of GroupFileInfoUpdateTasks){_0x3c7bf4(_0x112e0c),GroupFileInfoUpdateTasks[_0x118090(0x192)](_0x4d0a73);}},msgListener[_0x155f26(0x180)]=_0x2d81f7=>{const _0x4925cd=_0x155f26,_0x81266d={'fDFrk':function(_0xd0f54f,_0x5ecd9e){return _0xd0f54f(_0x5ecd9e);},'HdGLW':function(_0x16240f,_0x50b99d){return _0x16240f instanceof _0x50b99d;}};for(const [_0x252b90,_0x47eb8c]of sentMsgTasks){_0x81266d[_0x4925cd(0x16a)](_0x47eb8c,_0x2d81f7),sentMsgTasks[_0x4925cd(0x192)](_0x252b90);}if(sendMessagePool[_0x2d81f7['peerUid']]){const _0x565b3b=sendMessagePool[_0x2d81f7[_0x4925cd(0x165)]]?.(_0x2d81f7);_0x81266d['HdGLW'](_0x565b3b,Promise)&&_0x565b3b[_0x4925cd(0x193)]()[_0x4925cd(0x171)](logError);}},msgListener[_0x155f26(0x162)]=_0x5677e2=>{const _0x4669d4=_0x155f26,_0x2d9dfb={'Xbpel':function(_0x1ddc77,_0xd8d4e9){return _0x1ddc77(_0xd8d4e9);},'BGGDT':function(_0x4b8ce2,_0x568b76){return _0x4b8ce2 instanceof _0x568b76;}};_0x5677e2[_0x4669d4(0x15d)](_0x21dbc6=>{const _0x58e827=_0x4669d4;new Promise((_0x5c1047,_0x2b89c9)=>{const _0x4de34b=_0xbad7;for(const _0x24bb8c in sendSuccessCBMap){const _0xebc08a=sendSuccessCBMap[_0x24bb8c],_0x34b204=_0x2d9dfb['Xbpel'](_0xebc08a,_0x21dbc6),_0x325d2f=_0x3bd350=>{_0x3bd350&&delete sendSuccessCBMap[_0x24bb8c];};_0x2d9dfb[_0x4de34b(0x168)](_0x34b204,Promise)?_0x34b204['then'](_0x325d2f):_0x325d2f(_0x34b204);}})[_0x58e827(0x193)]()['catch'](log);});},setTimeout(()=>{const _0x163f42=_0x155f26;napCatCore[_0x163f42(0x156)](()=>{const _0x338846=_0x163f42;napCatCore[_0x338846(0x187)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x155f26(0x185)](_0x3682a3,_0x11b172,_0x2f33bd,_0x2b8b2e=!![]){const _0x185aa4=_0x155f26;return _0x2f33bd=_0x2f33bd[_0x185aa4(0x155)](),napCatCore[_0x185aa4(0x191)][_0x185aa4(0x151)]()['setMsgEmojiLikes'](_0x3682a3,_0x11b172,_0x2f33bd,_0x2f33bd[_0x185aa4(0x16b)]>0x3?'2':'1',_0x2b8b2e);}static async['getMultiMsg'](_0x43faf2,_0x49e6e7,_0x14a1ea){const _0x4ee0dc=_0x155f26;return napCatCore[_0x4ee0dc(0x191)]['getMsgService']()[_0x4ee0dc(0x15f)](_0x43faf2,_0x49e6e7,_0x14a1ea);}static async[_0x155f26(0x17f)](_0x2f68b0,_0x5b8bdd){const _0x547f78=_0x155f26;return await napCatCore[_0x547f78(0x191)][_0x547f78(0x151)]()['getMsgsByMsgId'](_0x2f68b0,_0x5b8bdd);}static async[_0x155f26(0x18b)](_0x1e6ec3,_0x764439,_0xd7e78f,_0x210475,_0x4dd8cc){const _0x4adc24=_0x155f26;return await napCatCore[_0x4adc24(0x191)]['getMsgService']()[_0x4adc24(0x18b)](_0x1e6ec3,_0x764439,_0xd7e78f,_0x210475,_0x4dd8cc);}static async['activateChat'](_0x23262c){}static async[_0x155f26(0x18d)](_0x1ccb20){}static async['setMsgRead'](_0x43a436){const _0x5b14a3=_0x155f26;return napCatCore[_0x5b14a3(0x191)]['getMsgService']()[_0x5b14a3(0x16d)](_0x43a436);}static async['getGroupFileList'](_0x249e82,_0x39afc5){const _0x3a96d0=_0x155f26,_0x4262ec={'GbeQL':function(_0x249d13,_0x4d7898){return _0x249d13(_0x4d7898);},'WJJXb':_0x3a96d0(0x18a),'vTpBG':function(_0x460461){return _0x460461();}};return new Promise(async(_0x6b3100,_0x40051a)=>{const _0x48765c=_0x3a96d0;let _0x478e07=![];setTimeout(()=>{const _0x1a9144=_0xbad7;!_0x478e07&&_0x4262ec[_0x1a9144(0x181)](_0x40051a,_0x4262ec['WJJXb']);},0x1388);const _0x51d95b=_0x3b8bbe=>{const _0x231a02=_0xbad7;_0x478e07=!![],_0x4262ec[_0x231a02(0x181)](_0x6b3100,_0x3b8bbe[_0x231a02(0x17b)]);};GroupFileInfoUpdateTasks[_0x48765c(0x190)](_0x4262ec['vTpBG'](randomUUID),_0x51d95b),await napCatCore['session']['getRichMediaService']()[_0x48765c(0x154)](_0x249e82,_0x39afc5);});}static async[_0x155f26(0x17d)](_0x5d55af,_0x5b52ab,_0x3db2fc){const _0x46831d=_0x155f26;return napCatCore[_0x46831d(0x191)][_0x46831d(0x151)]()[_0x46831d(0x178)](_0x5d55af,_0x5b52ab,_0x3db2fc,!![]);}static async[_0x155f26(0x17e)](){}static async[_0x155f26(0x186)](_0x1d6e68,_0xe1bd2f){const _0x5bd95b=_0x155f26;await napCatCore[_0x5bd95b(0x191)]['getMsgService']()[_0x5bd95b(0x186)]({'chatType':_0x1d6e68[_0x5bd95b(0x179)],'peerUid':_0x1d6e68[_0x5bd95b(0x165)]},_0xe1bd2f);}static async[_0x155f26(0x17a)](_0x1b19c4,_0x5c8196,_0x2d61d6=!![],_0x2d07a3=0x2710){const _0x4b3203=_0x155f26,_0x1038f2={'WwjhB':function(_0x281028,_0x1a28f1){return _0x281028>_0x1a28f1;},'JSIHV':function(_0x335b6e,_0x4e45b8){return _0x335b6e(_0x4e45b8);},'WMXfA':function(_0x25a480){return _0x25a480();},'TRcmz':_0x4b3203(0x169),'SjAIK':function(_0x1db59a,_0x175494){return _0x1db59a===_0x175494;},'xjeba':function(_0x509c49,_0x4537e2,_0x1c398d){return _0x509c49(_0x4537e2,_0x1c398d);},'ljvtl':function(_0x4e56ab){return _0x4e56ab();}},_0x1dcc0a=_0x1b19c4['peerUid'];let _0x460e0f=0x0;const _0x39d1f7=async()=>{const _0x19df66=_0x4b3203;if(_0x1038f2[_0x19df66(0x176)](_0x460e0f,_0x2d07a3))throw _0x19df66(0x169);const _0x37915e=sendMessagePool[_0x1b19c4[_0x19df66(0x165)]];if(_0x37915e)return await _0x1038f2[_0x19df66(0x16f)](sleep,0x1f4),_0x460e0f+=0x1f4,await _0x1038f2['WMXfA'](_0x39d1f7);else return;};return await _0x1038f2['ljvtl'](_0x39d1f7),new Promise((_0x2cea54,_0x24e5d2)=>{const _0xbc17c6=_0x4b3203,_0x599923={'CJJuB':function(_0x6a7b0c,_0x10c4ba){const _0x2aaf91=_0xbad7;return _0x1038f2[_0x2aaf91(0x15e)](_0x6a7b0c,_0x10c4ba);},'IdLvH':function(_0x1cdc17,_0x2dfb3e){const _0x52bf6f=_0xbad7;return _0x1038f2[_0x52bf6f(0x16f)](_0x1cdc17,_0x2dfb3e);}};let _0x54d1e1=![],_0x1418c0=null;const _0x95c1fc=_0x1038f2[_0xbc17c6(0x16e)](randomUUID);sendSuccessCBMap[_0x95c1fc]=_0x282d06=>{const _0x509e1f=_0xbc17c6;if(_0x282d06['msgId']===_0x1418c0?.[_0x509e1f(0x194)]){if(_0x599923[_0x509e1f(0x158)](_0x282d06['sendStatus'],0x2))return delete sendSuccessCBMap[_0x95c1fc],_0x54d1e1=!![],_0x599923[_0x509e1f(0x17c)](_0x2cea54,_0x282d06),!![];return![];}return![];},sendMessagePool[_0x1dcc0a]=async _0x1efbf1=>{delete sendMessagePool[_0x1dcc0a],_0x1418c0=_0x1efbf1;},_0x1038f2[_0xbc17c6(0x16c)](setTimeout,()=>{const _0x431dcb=_0xbc17c6;if(_0x54d1e1)return;delete sendMessagePool[_0x1dcc0a],delete sendSuccessCBMap[_0x95c1fc],_0x1038f2[_0x431dcb(0x16f)](_0x24e5d2,_0x1038f2[_0x431dcb(0x182)]);},_0x2d07a3);const _0x4c5fbe=napCatCore['session'][_0xbc17c6(0x151)]()[_0xbc17c6(0x17a)]('0',_0x1b19c4,_0x5c8196,new Map());});}static async['forwardMsg'](_0x14b16c,_0x483361,_0xead750){const _0x5ce531=_0x155f26;return napCatCore[_0x5ce531(0x191)][_0x5ce531(0x151)]()[_0x5ce531(0x167)](_0xead750,_0x14b16c,[_0x483361],new Map());}static async[_0x155f26(0x18e)](_0x413bb2,_0x59dc53,_0x3e77ed){const _0x25e5e4=_0x155f26,_0x1d4001={'KhIQs':function(_0x4c2e35,_0x359a87){return _0x4c2e35!=_0x359a87;},'AgxtO':_0x25e5e4(0x160),'qxuLs':function(_0x1560d7,_0x25264a){return _0x1560d7==_0x25264a;},'qozPV':function(_0x5ddfa6,_0x3d1a19){return _0x5ddfa6(_0x3d1a19);},'ZPQoa':function(_0x19a90e,_0x211170){return _0x19a90e(_0x211170);},'BQuRU':'转发消息超时','BVBTg':function(_0x22d89c){return _0x22d89c();}},_0x51296f=_0x3e77ed[_0x25e5e4(0x164)](_0x1f859b=>{const _0x65409c=_0x25e5e4;return{'msgId':_0x1f859b,'senderShowName':selfInfo[_0x65409c(0x157)]};});return new Promise((_0x14ecca,_0x3f54fd)=>{const _0x45198c=_0x25e5e4;let _0x12fe23=![];const _0x22dd25=_0x2b3414=>{const _0x1bfd4d=_0xbad7,_0x472c5c=_0x2b3414[_0x1bfd4d(0x177)][_0x1bfd4d(0x166)](_0x5e758a=>_0x5e758a[_0x1bfd4d(0x161)]);if(!_0x472c5c)return;const _0x4af63c=JSON[_0x1bfd4d(0x198)](_0x472c5c[_0x1bfd4d(0x161)][_0x1bfd4d(0x174)]);if(_0x1d4001['KhIQs'](_0x4af63c[_0x1bfd4d(0x15a)],_0x1d4001[_0x1bfd4d(0x15b)]))return;_0x1d4001[_0x1bfd4d(0x159)](_0x2b3414[_0x1bfd4d(0x165)],_0x59dc53[_0x1bfd4d(0x165)])&&_0x2b3414[_0x1bfd4d(0x18f)]==selfInfo[_0x1bfd4d(0x15c)]&&(_0x12fe23=!![],_0x1d4001[_0x1bfd4d(0x18c)](_0x14ecca,_0x2b3414));};sentMsgTasks[_0x45198c(0x190)](_0x1d4001[_0x45198c(0x197)](randomUUID),_0x22dd25),setTimeout(()=>{const _0xfe100f=_0x45198c;!_0x12fe23&&_0x1d4001[_0xfe100f(0x175)](_0x3f54fd,_0x1d4001[_0xfe100f(0x150)]);},0x1388),napCatCore[_0x45198c(0x191)][_0x45198c(0x151)]()[_0x45198c(0x184)](_0x51296f,_0x413bb2,_0x59dc53,[],new Map());});}}