const _0x582727=_0x456c;(function(_0x1feabc,_0x1d068b){const _0x41a86e=_0x456c,_0x5c4a86=_0x1feabc();while(!![]){try{const _0xcbb275=parseInt(_0x41a86e(0x90))/0x1*(-parseInt(_0x41a86e(0x8f))/0x2)+parseInt(_0x41a86e(0xaf))/0x3+-parseInt(_0x41a86e(0xb1))/0x4*(-parseInt(_0x41a86e(0xc4))/0x5)+parseInt(_0x41a86e(0xa7))/0x6+parseInt(_0x41a86e(0xb2))/0x7*(-parseInt(_0x41a86e(0x8a))/0x8)+-parseInt(_0x41a86e(0xa9))/0x9*(parseInt(_0x41a86e(0xc7))/0xa)+parseInt(_0x41a86e(0xca))/0xb*(parseInt(_0x41a86e(0xcb))/0xc);if(_0xcbb275===_0x1d068b)break;else _0x5c4a86['push'](_0x5c4a86['shift']());}catch(_0x599b14){_0x5c4a86['push'](_0x5c4a86['shift']());}}}(_0x3ff3,0x5f563));import{selfInfo}from'@/core/data';function _0x456c(_0x5c4917,_0x416739){const _0x3ff356=_0x3ff3();return _0x456c=function(_0x456cd6,_0x2913bf){_0x456cd6=_0x456cd6-0x89;let _0x8db5b5=_0x3ff356[_0x456cd6];return _0x8db5b5;},_0x456c(_0x5c4917,_0x416739);}import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onGroupFileInfoUpdate']=_0x532ccd=>{const _0x55c2c2=_0x456c,_0x4a088d={'TKYeb':function(_0x5d0d54,_0x48ed5a){return _0x5d0d54(_0x48ed5a);}};for(const [_0x5d94fb,_0x3bca3a]of GroupFileInfoUpdateTasks){_0x4a088d[_0x55c2c2(0xa2)](_0x3bca3a,_0x532ccd),GroupFileInfoUpdateTasks['delete'](_0x5d94fb);}},msgListener[_0x582727(0xc9)]=_0x485de7=>{const _0x7086d2=_0x582727,_0x2a70ac={'YXiJn':function(_0x26bc05,_0x4c66bd){return _0x26bc05 instanceof _0x4c66bd;}};for(const [_0x21f425,_0xb7b785]of sentMsgTasks){_0xb7b785(_0x485de7),sentMsgTasks['delete'](_0x21f425);}if(sendMessagePool[_0x485de7[_0x7086d2(0x98)]]){const _0x5d6446=sendMessagePool[_0x485de7[_0x7086d2(0x98)]]?.(_0x485de7);_0x2a70ac['YXiJn'](_0x5d6446,Promise)&&_0x5d6446[_0x7086d2(0x8b)]()[_0x7086d2(0xa4)](logError);}},msgListener['onMsgInfoListUpdate']=_0x5af27d=>{const _0x1190a9=_0x582727,_0x38a059={'zEhEZ':function(_0x419737,_0x5691f4){return _0x419737(_0x5691f4);}};_0x5af27d[_0x1190a9(0x9d)](_0xa79ea5=>{const _0xb96f95=_0x1190a9;new Promise((_0x232546,_0x523831)=>{const _0x5c9dff=_0x456c;for(const _0x3b277f in sendSuccessCBMap){const _0x2655d7=sendSuccessCBMap[_0x3b277f],_0x49f79c=_0x38a059[_0x5c9dff(0xbe)](_0x2655d7,_0xa79ea5),_0x23a8c3=_0x49af8c=>{_0x49af8c&&delete sendSuccessCBMap[_0x3b277f];};_0x49f79c instanceof Promise?_0x49f79c[_0x5c9dff(0x8b)](_0x23a8c3):_0x38a059['zEhEZ'](_0x23a8c3,_0x49f79c);}})[_0xb96f95(0x8b)]()['catch'](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async['setEmojiLike'](_0x2c2954,_0x8af953,_0x505d89,_0x4b5fb2=!![]){const _0x18cd6b=_0x582727,_0x2ea831={'HffCn':function(_0xb3026f,_0xe61535){return _0xb3026f>_0xe61535;}};return _0x505d89=_0x505d89[_0x18cd6b(0xb3)](),napCatCore[_0x18cd6b(0xac)][_0x18cd6b(0x91)]()['setMsgEmojiLikes'](_0x2c2954,_0x8af953,_0x505d89,_0x2ea831[_0x18cd6b(0xcc)](_0x505d89[_0x18cd6b(0x89)],0x3)?'2':'1',_0x4b5fb2);}static async['getMultiMsg'](_0x67225,_0x1ab73c,_0x2fc53b){const _0x47320e=_0x582727;return napCatCore[_0x47320e(0xac)][_0x47320e(0x91)]()[_0x47320e(0x92)](_0x67225,_0x1ab73c,_0x2fc53b);}static async[_0x582727(0xba)](_0x5dd06c,_0x4faa7f){const _0x1a16d1=_0x582727;return await napCatCore[_0x1a16d1(0xac)][_0x1a16d1(0x91)]()['getMsgsByMsgId'](_0x5dd06c,_0x4faa7f);}static async[_0x582727(0x9a)](_0x4121d1,_0x587377,_0x3c53fb,_0x2a5f2d,_0xf1971c){const _0x524106=_0x582727;return await napCatCore[_0x524106(0xac)][_0x524106(0x91)]()[_0x524106(0x9a)](_0x4121d1,_0x587377,_0x3c53fb,_0x2a5f2d,_0xf1971c);}static async['activateChat'](_0x15a104){}static async[_0x582727(0x8c)](_0xb89eea){}static async['setMsgRead'](_0x4d0843){const _0x2cc493=_0x582727;return napCatCore[_0x2cc493(0xac)]['getMsgService']()[_0x2cc493(0x95)](_0x4d0843);}static async[_0x582727(0xb9)](_0x25df7d,_0x4cb322){const _0xbe866f={'vOTNZ':function(_0x3b4231,_0x5e657c){return _0x3b4231(_0x5e657c);},'MiNNt':function(_0x266a8b,_0x488682,_0x44efbd){return _0x266a8b(_0x488682,_0x44efbd);},'asawg':function(_0xeff2b4){return _0xeff2b4();}};return new Promise(async(_0x460cf4,_0x90f076)=>{const _0x3c72d6=_0x456c,_0x2ce7cc={'ptZLq':function(_0x1a4847,_0x2f444b){const _0x16bd44=_0x456c;return _0xbe866f[_0x16bd44(0xb8)](_0x1a4847,_0x2f444b);}};let _0x2971a2=![];_0xbe866f[_0x3c72d6(0xad)](setTimeout,()=>{const _0x472143=_0x3c72d6;!_0x2971a2&&_0x90f076(_0x472143(0x99));},0x1388);const _0x4eabd2=_0x322010=>{const _0x236ad9=_0x3c72d6;_0x2971a2=!![],_0x2ce7cc['ptZLq'](_0x460cf4,_0x322010[_0x236ad9(0x8e)]);};GroupFileInfoUpdateTasks['set'](_0xbe866f[_0x3c72d6(0xb6)](randomUUID),_0x4eabd2),await napCatCore[_0x3c72d6(0xac)]['getRichMediaService']()[_0x3c72d6(0xb9)](_0x25df7d,_0x4cb322);});}static async[_0x582727(0xa8)](_0x25de16,_0x2d2cf5,_0x3fb060){const _0x4fffc7=_0x582727;return napCatCore[_0x4fffc7(0xac)][_0x4fffc7(0x91)]()[_0x4fffc7(0xab)](_0x25de16,_0x2d2cf5,_0x3fb060,!![]);}static async['fetchRecentContact'](){}static async['recallMsg'](_0x38de82,_0x33e18a){const _0x5e6756=_0x582727;await napCatCore[_0x5e6756(0xac)][_0x5e6756(0x91)]()[_0x5e6756(0xc3)]({'chatType':_0x38de82[_0x5e6756(0xc6)],'peerUid':_0x38de82[_0x5e6756(0x98)]},_0x33e18a);}static async[_0x582727(0x8d)](_0x233cf8,_0x505cd1,_0x1997ec=!![],_0x44867c=0x2710){const _0x4c71fe=_0x582727,_0x3d4758={'IklQo':function(_0x1e8622,_0x388755){return _0x1e8622>_0x388755;},'cBYei':_0x4c71fe(0xb0),'TYZQT':function(_0x1dec20,_0x2793b2){return _0x1dec20(_0x2793b2);},'AtnEZ':function(_0x3cd5d4,_0x11334f){return _0x3cd5d4===_0x11334f;},'JEkWk':function(_0x479c78,_0x48632d){return _0x479c78===_0x48632d;},'ZovcH':function(_0x33599c,_0x28f47c){return _0x33599c(_0x28f47c);},'eLRbt':function(_0x42835b){return _0x42835b();},'GjqeC':function(_0xe26119,_0xf38cf,_0x16bf4c){return _0xe26119(_0xf38cf,_0x16bf4c);}},_0x1ea47b=_0x233cf8[_0x4c71fe(0x98)];let _0x1f31f0=0x0;const _0x146daf=async()=>{const _0x21edc3=_0x4c71fe;if(_0x3d4758[_0x21edc3(0xc0)](_0x1f31f0,_0x44867c))throw _0x3d4758[_0x21edc3(0xb7)];const _0x17d927=sendMessagePool[_0x233cf8['peerUid']];if(_0x17d927)return await _0x3d4758[_0x21edc3(0x9e)](sleep,0x1f4),_0x1f31f0+=0x1f4,await _0x146daf();else return;};return await _0x146daf(),new Promise((_0x84915d,_0xfc04fc)=>{const _0x22ef48=_0x4c71fe;let _0x317c26=![],_0x24d215=null;const _0x408b08=_0x3d4758['eLRbt'](randomUUID);sendSuccessCBMap[_0x408b08]=_0x43ac48=>{const _0x66d1c9=_0x456c;if(_0x3d4758['AtnEZ'](_0x43ac48[_0x66d1c9(0xc2)],_0x24d215?.['msgId'])){if(_0x3d4758['JEkWk'](_0x43ac48[_0x66d1c9(0xae)],0x2))return delete sendSuccessCBMap[_0x408b08],_0x317c26=!![],_0x3d4758['TYZQT'](_0x84915d,_0x43ac48),!![];return![];}return![];},sendMessagePool[_0x1ea47b]=async _0x691707=>{delete sendMessagePool[_0x1ea47b],_0x24d215=_0x691707;},_0x3d4758[_0x22ef48(0xc5)](setTimeout,()=>{const _0x505650=_0x22ef48;if(_0x317c26)return;delete sendMessagePool[_0x1ea47b],delete sendSuccessCBMap[_0x408b08],_0x3d4758[_0x505650(0xb5)](_0xfc04fc,_0x3d4758['cBYei']);},_0x44867c);const _0x5e7a14=napCatCore['session']['getMsgService']()[_0x22ef48(0x8d)]('0',_0x233cf8,_0x505cd1,new Map());});}static async['forwardMsg'](_0x4ff8b3,_0x11f1e1,_0x1d0fc1){const _0x1661ca=_0x582727;return napCatCore[_0x1661ca(0xac)][_0x1661ca(0x91)]()[_0x1661ca(0x94)](_0x1d0fc1,_0x4ff8b3,[_0x11f1e1],new Map());}static async[_0x582727(0xa5)](_0x3c01f6,_0xf2fa21,_0x55df8d){const _0x319477=_0x582727,_0x34741d={'tTrYZ':'转发消息超时','OylWu':function(_0xe42d4b,_0x15278d){return _0xe42d4b!=_0x15278d;},'bUYqS':_0x319477(0xbb),'vqWJs':function(_0x1649bb,_0xf4034){return _0x1649bb(_0xf4034);},'xyQnB':function(_0x6e6393){return _0x6e6393();},'WpcuE':function(_0x4e0868,_0x47fe26,_0x1f81fe){return _0x4e0868(_0x47fe26,_0x1f81fe);}},_0x4d5cfa=_0x55df8d[_0x319477(0xaa)](_0x4a5fa8=>{const _0x173acf=_0x319477;return{'msgId':_0x4a5fa8,'senderShowName':selfInfo[_0x173acf(0x9b)]};});return new Promise((_0x32751f,_0x4faf59)=>{const _0x2bc8b5=_0x319477,_0x35dee1={'VtKHe':function(_0x2e3de8,_0x2f7c77){return _0x34741d['OylWu'](_0x2e3de8,_0x2f7c77);},'SaNMG':_0x34741d[_0x2bc8b5(0x9c)],'GgPxx':function(_0x3d55d7,_0x324858){return _0x3d55d7==_0x324858;},'ZPTWA':function(_0x25ccbf,_0x442012){return _0x34741d['vqWJs'](_0x25ccbf,_0x442012);}};let _0x2fbc0f=![];const _0x45b057=_0x5c2a80=>{const _0xe6b3a9=_0x2bc8b5,_0x32e52e=_0x5c2a80[_0xe6b3a9(0x96)][_0xe6b3a9(0xa1)](_0xdb7353=>_0xdb7353[_0xe6b3a9(0xbf)]);if(!_0x32e52e)return;const _0x477d7a=JSON[_0xe6b3a9(0xbc)](_0x32e52e['arkElement'][_0xe6b3a9(0x9f)]);if(_0x35dee1[_0xe6b3a9(0x93)](_0x477d7a[_0xe6b3a9(0xb4)],_0x35dee1['SaNMG']))return;_0x35dee1[_0xe6b3a9(0xc1)](_0x5c2a80['peerUid'],_0xf2fa21[_0xe6b3a9(0x98)])&&_0x35dee1[_0xe6b3a9(0xc1)](_0x5c2a80[_0xe6b3a9(0xa0)],selfInfo[_0xe6b3a9(0xa6)])&&(_0x2fbc0f=!![],_0x35dee1[_0xe6b3a9(0x97)](_0x32751f,_0x5c2a80));};sentMsgTasks['set'](_0x34741d[_0x2bc8b5(0xc8)](randomUUID),_0x45b057),_0x34741d[_0x2bc8b5(0xa3)](setTimeout,()=>{const _0x55b037=_0x2bc8b5;!_0x2fbc0f&&_0x4faf59(_0x34741d[_0x55b037(0xbd)]);},0x1388),napCatCore['session'][_0x2bc8b5(0x91)]()['multiForwardMsgWithComment'](_0x4d5cfa,_0x3c01f6,_0xf2fa21,[],new Map());});}}function _0x3ff3(){const _0x13705f=['IklQo','GgPxx','msgId','recallMsg','40845WiXhTB','GjqeC','chatType','4280970hxHvuF','xyQnB','onAddSendMsg','30327ElwzpB','2916gEkCYu','HffCn','length','8tEOkiE','then','activateChatAndGetHistory','sendMsg','item','254ujeUlt','2321ylLJMP','getMsgService','getMultiMsg','VtKHe','forwardMsg','setMsgRead','elements','ZPTWA','peerUid','获取群文件列表超时','getMsgsBySeqAndCount','nick','bUYqS','forEach','TYZQT','bytesData','senderUid','find','TKYeb','WpcuE','catch','multiForwardMsg','uid','1503426HaVJxU','getMsgHistory','9uNFwzP','map','getMsgsIncludeSelf','session','MiNNt','sendStatus','1195119WLsUXd','发送超时','148rHcxUe','3554495QxSWce','toString','app','ZovcH','asawg','cBYei','vOTNZ','getGroupFileList','getMsgsByMsgId','com.tencent.multimsg','parse','tTrYZ','zEhEZ','arkElement'];_0x3ff3=function(){return _0x13705f;};return _0x3ff3();}