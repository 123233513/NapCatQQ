const _0x204eb4=_0x39da;(function(_0x220e68,_0x424eb4){const _0x2a5e2d=_0x39da,_0x1a7c63=_0x220e68();while(!![]){try{const _0x56cd02=parseInt(_0x2a5e2d(0x17e))/0x1+parseInt(_0x2a5e2d(0x160))/0x2*(-parseInt(_0x2a5e2d(0x177))/0x3)+parseInt(_0x2a5e2d(0x15a))/0x4*(parseInt(_0x2a5e2d(0x183))/0x5)+parseInt(_0x2a5e2d(0x165))/0x6+-parseInt(_0x2a5e2d(0x186))/0x7+parseInt(_0x2a5e2d(0x176))/0x8*(-parseInt(_0x2a5e2d(0x178))/0x9)+parseInt(_0x2a5e2d(0x18c))/0xa;if(_0x56cd02===_0x424eb4)break;else _0x1a7c63['push'](_0x1a7c63['shift']());}catch(_0x47d176){_0x1a7c63['push'](_0x1a7c63['shift']());}}}(_0x1b5d,0xced38));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';function _0x39da(_0x1dcfdf,_0x372112){const _0x1b5dd0=_0x1b5d();return _0x39da=function(_0x39da33,_0xbb3580){_0x39da33=_0x39da33-0x153;let _0x53fca8=_0x1b5dd0[_0x39da33];return _0x53fca8;},_0x39da(_0x1dcfdf,_0x372112);}import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x204eb4(0x189)]=_0x2a54e5=>{const _0x5cea3f=_0x204eb4,_0x57911c={'tZSoZ':function(_0x541d05,_0x2662a7){return _0x541d05(_0x2662a7);},'qwFNK':function(_0x5e6309,_0x30b615){return _0x5e6309 instanceof _0x30b615;}};for(const [_0x1e9f5c,_0x5b9283]of sentMsgTasks){_0x57911c['tZSoZ'](_0x5b9283,_0x2a54e5),sentMsgTasks[_0x5cea3f(0x16c)](_0x1e9f5c);}if(sendMessagePool[_0x2a54e5[_0x5cea3f(0x18e)]]){const _0x1b2a7a=sendMessagePool[_0x2a54e5[_0x5cea3f(0x18e)]]?.(_0x2a54e5);_0x57911c[_0x5cea3f(0x18b)](_0x1b2a7a,Promise)&&_0x1b2a7a[_0x5cea3f(0x17b)]()[_0x5cea3f(0x190)](logError);}},msgListener[_0x204eb4(0x16b)]=_0x442e5c=>{const _0x4e1eda=_0x204eb4,_0x414d5a={'XfmYQ':function(_0x3797cf,_0x5894a8){return _0x3797cf(_0x5894a8);},'fgkCM':function(_0x218433,_0x44fd4b){return _0x218433 instanceof _0x44fd4b;}};_0x442e5c[_0x4e1eda(0x168)](_0x4bc246=>{const _0x35bfe6=_0x4e1eda;new Promise((_0x542181,_0x45d5db)=>{const _0xb49680=_0x39da;for(const _0x2ac4aa in sendSuccessCBMap){const _0x41d76a=sendSuccessCBMap[_0x2ac4aa],_0xf90980=_0x414d5a['XfmYQ'](_0x41d76a,_0x4bc246),_0xae1469=_0x54bfeb=>{_0x54bfeb&&delete sendSuccessCBMap[_0x2ac4aa];};_0x414d5a[_0xb49680(0x163)](_0xf90980,Promise)?_0xf90980['then'](_0xae1469):_0x414d5a[_0xb49680(0x158)](_0xae1469,_0xf90980);}})['then']()[_0x35bfe6(0x190)](log);});},setTimeout(()=>{const _0x40aacf=_0x204eb4;napCatCore[_0x40aacf(0x155)](()=>{const _0x5ed77a=_0x40aacf;napCatCore[_0x5ed77a(0x182)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x204eb4(0x193)](_0x14a9ea,_0x45a037,_0xf3aa1b,_0x1bca4=!![]){const _0x317070=_0x204eb4,_0x4d1fd2={'FZzSV':function(_0xb7dbe3,_0x320f57){return _0xb7dbe3>_0x320f57;}};return _0xf3aa1b=_0xf3aa1b[_0x317070(0x166)](),napCatCore[_0x317070(0x188)][_0x317070(0x187)]()[_0x317070(0x167)](_0x14a9ea,_0x45a037,_0xf3aa1b,_0x4d1fd2['FZzSV'](_0xf3aa1b[_0x317070(0x162)],0x3)?'2':'1',_0x1bca4);}static async['getMultiMsg'](_0x1ab9e7,_0x519a96,_0x30fb98){const _0x2d3a60=_0x204eb4;return napCatCore['session'][_0x2d3a60(0x187)]()[_0x2d3a60(0x184)](_0x1ab9e7,_0x519a96,_0x30fb98);}static async['getMsgsByMsgId'](_0x2b6e2e,_0x368ec1){const _0x454e70=_0x204eb4;return await napCatCore[_0x454e70(0x188)][_0x454e70(0x187)]()[_0x454e70(0x156)](_0x2b6e2e,_0x368ec1);}static async[_0x204eb4(0x180)](_0x43c615,_0x1f01fe,_0x12426a,_0x206702,_0x10e700){const _0x148b5c=_0x204eb4;return await napCatCore[_0x148b5c(0x188)][_0x148b5c(0x187)]()['getMsgsBySeqAndCount'](_0x43c615,_0x1f01fe,_0x12426a,_0x206702,_0x10e700);}static async[_0x204eb4(0x15f)](_0x1d9c21){}static async['activateChatAndGetHistory'](_0x2d7099){}static async[_0x204eb4(0x185)](_0x2711e0){const _0x10db0d=_0x204eb4;return napCatCore['session']['getMsgService']()[_0x10db0d(0x185)](_0x2711e0);}static async['getMsgHistory'](_0x2530ff,_0x1e33eb,_0x4afd3b){const _0x5a7aee=_0x204eb4;return napCatCore['session']['getMsgService']()[_0x5a7aee(0x164)](_0x2530ff,_0x1e33eb,_0x4afd3b,!![]);}static async[_0x204eb4(0x171)](){}static async[_0x204eb4(0x161)](_0x284e02,_0x90fb8a){const _0x49cf44=_0x204eb4;await napCatCore[_0x49cf44(0x188)][_0x49cf44(0x187)]()[_0x49cf44(0x161)]({'chatType':_0x284e02['chatType'],'peerUid':_0x284e02[_0x49cf44(0x18e)]},_0x90fb8a);}static async['sendMsg'](_0xa90497,_0x3b0b8e,_0x1e355e=!![],_0x1dbdc0=0x2710){const _0x501024=_0x204eb4,_0x34648e={'gWLxF':function(_0x1aeff2,_0x5a1649){return _0x1aeff2>_0x5a1649;},'yPjWa':_0x501024(0x181),'SKOKd':function(_0x536ba6,_0x206b34){return _0x536ba6(_0x206b34);},'PZmMr':function(_0x946d6a){return _0x946d6a();},'VekXT':function(_0xf28114,_0x1774c3){return _0xf28114===_0x1774c3;},'ObjhI':function(_0xcb09f3,_0x1c267e){return _0xcb09f3===_0x1c267e;},'pDUqc':function(_0x3ff845,_0xa0af77){return _0x3ff845(_0xa0af77);},'dRJHt':function(_0x230b1b,_0x17b70d,_0x4c69c8){return _0x230b1b(_0x17b70d,_0x4c69c8);},'VXfdN':function(_0x3ec31d){return _0x3ec31d();}},_0x2ababe=_0xa90497[_0x501024(0x18e)];let _0x51ab8d=0x0;const _0x59ac3e=async()=>{const _0x38cb11=_0x501024;if(_0x34648e[_0x38cb11(0x18f)](_0x51ab8d,_0x1dbdc0))throw _0x34648e[_0x38cb11(0x170)];const _0x2a05ba=sendMessagePool[_0xa90497[_0x38cb11(0x18e)]];if(_0x2a05ba)return await _0x34648e[_0x38cb11(0x15e)](sleep,0x1f4),_0x51ab8d+=0x1f4,await _0x34648e['PZmMr'](_0x59ac3e);else return;};return await _0x34648e['VXfdN'](_0x59ac3e),new Promise((_0x241966,_0x5bc128)=>{const _0x3d2a78=_0x501024,_0x583b78={'zzYWn':function(_0x49029c,_0x5a64b7){return _0x34648e['VekXT'](_0x49029c,_0x5a64b7);},'BLbgn':function(_0x5d63d1,_0xbb5b12){const _0x5b805a=_0x39da;return _0x34648e[_0x5b805a(0x18a)](_0x5d63d1,_0xbb5b12);},'TcrrY':function(_0x1587c3,_0x43946d){const _0x44ac44=_0x39da;return _0x34648e[_0x44ac44(0x153)](_0x1587c3,_0x43946d);},'EKwbS':_0x34648e[_0x3d2a78(0x170)]};let _0xcc349d=![],_0x47c863=null;const _0x4f0def=_0x34648e[_0x3d2a78(0x16f)](randomUUID);sendSuccessCBMap[_0x4f0def]=_0x5e95c0=>{const _0xeee311=_0x3d2a78;if(_0x583b78[_0xeee311(0x15d)](_0x5e95c0['msgId'],_0x47c863?.[_0xeee311(0x173)])){if(_0x583b78[_0xeee311(0x169)](_0x5e95c0[_0xeee311(0x18d)],0x2))return delete sendSuccessCBMap[_0x4f0def],_0xcc349d=!![],_0x583b78['TcrrY'](_0x241966,_0x5e95c0),!![];return![];}return![];},sendMessagePool[_0x2ababe]=async _0x16ab0a=>{delete sendMessagePool[_0x2ababe],_0x47c863=_0x16ab0a;},_0x34648e[_0x3d2a78(0x17d)](setTimeout,()=>{if(_0xcc349d)return;delete sendMessagePool[_0x2ababe],delete sendSuccessCBMap[_0x4f0def],_0x5bc128(_0x583b78['EKwbS']);},_0x1dbdc0);const _0x23c82b=napCatCore[_0x3d2a78(0x188)][_0x3d2a78(0x187)]()[_0x3d2a78(0x157)]('0',_0xa90497,_0x3b0b8e,new Map());});}static async[_0x204eb4(0x16e)](_0x555f0d,_0x52f2f4,_0x5d0553){const _0x5ecbeb=_0x204eb4;return napCatCore[_0x5ecbeb(0x188)]['getMsgService']()[_0x5ecbeb(0x16e)](_0x5d0553,_0x555f0d,[_0x52f2f4],new Map());}static async['multiForwardMsg'](_0x458154,_0x1f8029,_0x192d42){const _0x2894cb=_0x204eb4,_0x21ec0f={'qwlRI':function(_0x23eb5e,_0x153d2a){return _0x23eb5e(_0x153d2a);},'rPczI':'转发消息超时','rmmMZ':function(_0x1830cb,_0x52680c){return _0x1830cb!=_0x52680c;},'RlwFA':_0x2894cb(0x154),'AKPNr':function(_0x461d59,_0x19a8a7){return _0x461d59==_0x19a8a7;},'HxTZV':function(_0x550d7a){return _0x550d7a();},'PeLAG':function(_0x2a711d,_0x4e6074,_0x2e23fc){return _0x2a711d(_0x4e6074,_0x2e23fc);}},_0x30fb7b=_0x192d42['map'](_0x4e0e95=>{return{'msgId':_0x4e0e95,'senderShowName':selfInfo['nick']};});return new Promise((_0x2a672b,_0x4adca4)=>{const _0x26191c=_0x2894cb,_0x49ca60={'RWWBw':function(_0x3fdb10,_0x27bc44){return _0x21ec0f['rmmMZ'](_0x3fdb10,_0x27bc44);},'TIjnF':_0x21ec0f[_0x26191c(0x175)],'ISQMf':function(_0x28dbdc,_0x5e1512){const _0x2a182e=_0x26191c;return _0x21ec0f[_0x2a182e(0x17a)](_0x28dbdc,_0x5e1512);},'ioHrr':function(_0x504489,_0x115753){return _0x504489(_0x115753);}};let _0x2ecc03=![];const _0x5d61b3=_0x1a38c9=>{const _0x76a51f=_0x26191c,_0x5db812=_0x1a38c9[_0x76a51f(0x15c)][_0x76a51f(0x192)](_0x58b0f8=>_0x58b0f8[_0x76a51f(0x17f)]);if(!_0x5db812)return;const _0x3d035d=JSON[_0x76a51f(0x159)](_0x5db812[_0x76a51f(0x17f)][_0x76a51f(0x16a)]);if(_0x49ca60['RWWBw'](_0x3d035d[_0x76a51f(0x15b)],_0x49ca60['TIjnF']))return;_0x49ca60[_0x76a51f(0x179)](_0x1a38c9[_0x76a51f(0x18e)],_0x1f8029[_0x76a51f(0x18e)])&&_0x1a38c9[_0x76a51f(0x17c)]==selfInfo['uid']&&(_0x2ecc03=!![],_0x49ca60['ioHrr'](_0x2a672b,_0x1a38c9));};sentMsgTasks[_0x26191c(0x191)](_0x21ec0f[_0x26191c(0x172)](randomUUID),_0x5d61b3),_0x21ec0f['PeLAG'](setTimeout,()=>{const _0x420a49=_0x26191c;!_0x2ecc03&&_0x21ec0f['qwlRI'](_0x4adca4,_0x21ec0f[_0x420a49(0x16d)]);},0x1388),napCatCore[_0x26191c(0x188)]['getMsgService']()[_0x26191c(0x174)](_0x30fb7b,_0x458154,_0x1f8029,[],new Map());});}}function _0x1b5d(){const _0x1a658c=['onAddSendMsg','ObjhI','qwFNK','16715920lOBkVR','sendStatus','peerUid','gWLxF','catch','set','find','setEmojiLike','pDUqc','com.tencent.multimsg','onLoginSuccess','getMsgsByMsgId','sendMsg','XfmYQ','parse','714276lTExuN','app','elements','zzYWn','SKOKd','activateChat','2392zMXlAQ','recallMsg','length','fgkCM','getMsgsIncludeSelf','5743698kqjoCe','toString','setMsgEmojiLikes','forEach','BLbgn','bytesData','onMsgInfoListUpdate','delete','rPczI','forwardMsg','PZmMr','yPjWa','fetchRecentContact','HxTZV','msgId','multiForwardMsgWithComment','RlwFA','116024vgYjIq','4074PawmEH','459sgMFRL','ISQMf','AKPNr','then','senderUid','dRJHt','619272uEfNDE','arkElement','getMsgsBySeqAndCount','发送超时','addListener','5YbvpKM','getMultiMsg','setMsgRead','1510145ksSEIS','getMsgService','session'];_0x1b5d=function(){return _0x1a658c;};return _0x1b5d();}