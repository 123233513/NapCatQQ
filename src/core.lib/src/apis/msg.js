const _0x8aa741=_0x22e3;(function(_0x141319,_0xc4ed8f){const _0x27f394=_0x22e3,_0x305f7d=_0x141319();while(!![]){try{const _0x2744e0=-parseInt(_0x27f394(0x218))/0x1*(-parseInt(_0x27f394(0x1ef))/0x2)+parseInt(_0x27f394(0x217))/0x3+parseInt(_0x27f394(0x214))/0x4*(-parseInt(_0x27f394(0x206))/0x5)+parseInt(_0x27f394(0x1fd))/0x6*(-parseInt(_0x27f394(0x1ff))/0x7)+-parseInt(_0x27f394(0x20a))/0x8*(-parseInt(_0x27f394(0x209))/0x9)+parseInt(_0x27f394(0x1f1))/0xa*(-parseInt(_0x27f394(0x215))/0xb)+parseInt(_0x27f394(0x22d))/0xc*(parseInt(_0x27f394(0x21e))/0xd);if(_0x2744e0===_0xc4ed8f)break;else _0x305f7d['push'](_0x305f7d['shift']());}catch(_0x68e94d){_0x305f7d['push'](_0x305f7d['shift']());}}}(_0x34e1,0x4ce6d));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x22e3(_0x38d410,_0x2a1171){const _0x34e100=_0x34e1();return _0x22e3=function(_0x22e399,_0x1dca63){_0x22e399=_0x22e399-0x1e7;let _0x318bfa=_0x34e100[_0x22e399];return _0x318bfa;},_0x22e3(_0x38d410,_0x2a1171);}const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x8aa741(0x1e7)]=_0x332f18=>{const _0x939640=_0x8aa741,_0x2f9222={'OYjvD':function(_0x3e8007,_0x4209f0){return _0x3e8007(_0x4209f0);},'IbeSz':function(_0x3bc940,_0x1bf5b2){return _0x3bc940 instanceof _0x1bf5b2;}};for(const [_0x15ee69,_0x77bf8e]of sentMsgTasks){_0x2f9222[_0x939640(0x1fb)](_0x77bf8e,_0x332f18),sentMsgTasks['delete'](_0x15ee69);}if(sendMessagePool[_0x332f18['peerUid']]){const _0x3b8e4e=sendMessagePool[_0x332f18[_0x939640(0x22a)]]?.(_0x332f18);_0x2f9222['IbeSz'](_0x3b8e4e,Promise)&&_0x3b8e4e[_0x939640(0x200)]()[_0x939640(0x223)](logError);}},msgListener[_0x8aa741(0x201)]=_0x5e2fe6=>{const _0x5b5f58=_0x8aa741,_0x13d1c6={'MFJyc':function(_0x59c91d,_0x23ba24){return _0x59c91d(_0x23ba24);},'rZCHs':function(_0x3155be,_0x402583){return _0x3155be instanceof _0x402583;},'cbSaZ':function(_0x4ae19e,_0x4aabec){return _0x4ae19e(_0x4aabec);}};_0x5e2fe6[_0x5b5f58(0x221)](_0x595f3f=>{const _0x5ec394=_0x5b5f58;new Promise((_0x185869,_0x1afca6)=>{const _0x4c2fe4=_0x22e3;for(const _0x4a0ac0 in sendSuccessCBMap){const _0x36561e=sendSuccessCBMap[_0x4a0ac0],_0x485246=_0x13d1c6[_0x4c2fe4(0x224)](_0x36561e,_0x595f3f),_0x3c77f5=_0x2f745a=>{_0x2f745a&&delete sendSuccessCBMap[_0x4a0ac0];};_0x13d1c6[_0x4c2fe4(0x1ea)](_0x485246,Promise)?_0x485246[_0x4c2fe4(0x200)](_0x3c77f5):_0x13d1c6[_0x4c2fe4(0x21f)](_0x3c77f5,_0x485246);}})['then']()[_0x5ec394(0x223)](log);});},setTimeout(()=>{const _0x52c4c7=_0x8aa741;napCatCore[_0x52c4c7(0x216)](()=>{const _0x10e394=_0x52c4c7;napCatCore[_0x10e394(0x21d)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x8aa741(0x1f0)](_0x11cda8,_0x59ced9,_0x18e90e,_0x5b4c0c=!![]){const _0x506cc5=_0x8aa741,_0x31df44={'zkWUc':function(_0xd5f9f1,_0xcfe05d){return _0xd5f9f1>_0xcfe05d;}};return napCatCore[_0x506cc5(0x210)][_0x506cc5(0x20f)]()[_0x506cc5(0x1fc)](_0x11cda8,_0x59ced9,_0x18e90e,_0x31df44[_0x506cc5(0x20b)](_0x18e90e[_0x506cc5(0x212)],0x3)?'2':'1',_0x5b4c0c);}static async[_0x8aa741(0x1f3)](_0x47dd3c,_0x3d1866,_0x5a7de6){const _0x19cc2f=_0x8aa741;return napCatCore[_0x19cc2f(0x210)][_0x19cc2f(0x20f)]()[_0x19cc2f(0x1f3)](_0x47dd3c,_0x3d1866,_0x5a7de6);}static async['getMsgsByMsgId'](_0x3e5f33,_0x9deb62){const _0x4b7c19=_0x8aa741;return await napCatCore[_0x4b7c19(0x210)][_0x4b7c19(0x20f)]()[_0x4b7c19(0x1eb)](_0x3e5f33,_0x9deb62);}static async[_0x8aa741(0x1f8)](_0x1badd5,_0xd0ba3c,_0x4d29e3,_0x41ce68,_0x1d0c03){const _0x3a51f2=_0x8aa741;return await napCatCore[_0x3a51f2(0x210)]['getMsgService']()[_0x3a51f2(0x1f8)](_0x1badd5,_0xd0ba3c,_0x4d29e3,_0x41ce68,_0x1d0c03);}static async[_0x8aa741(0x1ee)](_0x2563ea){}static async[_0x8aa741(0x1e8)](_0x47841b){}static async[_0x8aa741(0x20d)](_0x4dfa41){const _0xb96a0f=_0x8aa741;return napCatCore['session'][_0xb96a0f(0x20f)]()[_0xb96a0f(0x20d)](_0x4dfa41[_0xb96a0f(0x1ed)],_0x4dfa41['peerUid'],_0x4dfa41[_0xb96a0f(0x208)]);}static async[_0x8aa741(0x220)](_0x3d5a9a,_0x5544c2,_0x46efd6){const _0x3aba28=_0x8aa741;return napCatCore[_0x3aba28(0x210)]['getMsgService']()[_0x3aba28(0x1fe)](_0x3d5a9a,_0x5544c2,_0x46efd6,!![]);}static async[_0x8aa741(0x229)](){}static async[_0x8aa741(0x1f2)](_0x3c0f3b,_0x47ba78){const _0x50670d=_0x8aa741;await napCatCore['session'][_0x50670d(0x20f)]()[_0x50670d(0x1f2)]({'chatType':_0x3c0f3b['chatType'],'peerUid':_0x3c0f3b[_0x50670d(0x22a)]},_0x47ba78);}static async[_0x8aa741(0x1f4)](_0xa1c787,_0x189db6,_0x4d2997=!![],_0x471429=0x2710){const _0xad5475=_0x8aa741,_0x180685={'hcEfj':function(_0x59b2ca,_0xf2a175){return _0x59b2ca>_0xf2a175;},'PWpYH':_0xad5475(0x225),'xxRPJ':function(_0x52dd1c,_0x1fdc60){return _0x52dd1c===_0x1fdc60;},'GtPjz':function(_0x4dba6e,_0x972fef){return _0x4dba6e(_0x972fef);},'mAvDv':function(_0x13cb72){return _0x13cb72();},'MzIzn':function(_0x131ff8,_0x370df8,_0x2c56ef){return _0x131ff8(_0x370df8,_0x2c56ef);},'SXgXh':function(_0x382e53){return _0x382e53();}},_0x4f708a=_0xa1c787['peerUid'];let _0x370001=0x0;const _0x25b78d=async()=>{const _0x385286=_0xad5475;if(_0x180685[_0x385286(0x204)](_0x370001,_0x471429))throw _0x180685['PWpYH'];const _0x4ce3c3=sendMessagePool[_0xa1c787[_0x385286(0x22a)]];if(_0x4ce3c3)return await sleep(0x1f4),_0x370001+=0x1f4,await _0x25b78d();else return;};return await _0x180685['SXgXh'](_0x25b78d),new Promise((_0x189255,_0x3cec88)=>{const _0x2aa672=_0xad5475,_0x5df499={'BcJfV':function(_0x185343,_0x34adfc){return _0x185343(_0x34adfc);},'XMthO':_0x180685[_0x2aa672(0x211)]};let _0x399561=![],_0x4c6c35=null;const _0x79af2=_0x180685[_0x2aa672(0x20c)](randomUUID);sendSuccessCBMap[_0x79af2]=_0x26ae93=>{const _0x273712=_0x2aa672;if(_0x26ae93[_0x273712(0x219)]===_0x4c6c35?.[_0x273712(0x219)]){if(_0x180685['xxRPJ'](_0x26ae93[_0x273712(0x22b)],0x2))return delete sendSuccessCBMap[_0x79af2],_0x399561=!![],_0x180685[_0x273712(0x226)](_0x189255,_0x26ae93),!![];return![];}return![];},sendMessagePool[_0x4f708a]=async _0x3f13c3=>{delete sendMessagePool[_0x4f708a],_0x4c6c35=_0x3f13c3;},_0x180685['MzIzn'](setTimeout,()=>{const _0x313aee=_0x2aa672;if(_0x399561)return;delete sendMessagePool[_0x4f708a],delete sendSuccessCBMap[_0x79af2],_0x5df499[_0x313aee(0x20e)](_0x3cec88,_0x5df499['XMthO']);},_0x471429);const _0x52cde1=napCatCore[_0x2aa672(0x210)][_0x2aa672(0x20f)]()[_0x2aa672(0x1f4)]('0',_0xa1c787,_0x189db6,new Map());});}static async[_0x8aa741(0x1fa)](_0x531789,_0xed8a53,_0x5c19c3){}static async[_0x8aa741(0x205)](_0xb283d4,_0x49fa42,_0xa88e70){const _0x307f23=_0x8aa741,_0x5698eb={'jPgDH':function(_0x3649d8,_0x58cdb8){return _0x3649d8!=_0x58cdb8;},'PUPwD':'com.tencent.multimsg','QrReR':function(_0x6b95df,_0x3735a8){return _0x6b95df==_0x3735a8;},'GgrPn':function(_0x6753d5,_0x28656f){return _0x6753d5(_0x28656f);},'IopUX':function(_0x571cf9){return _0x571cf9();},'PqVRa':function(_0x2e48da,_0x1920c6,_0x55997f){return _0x2e48da(_0x1920c6,_0x55997f);}},_0x46e3f1=_0xa88e70[_0x307f23(0x22c)](_0x1a3a4f=>{return{'msgId':_0x1a3a4f,'senderShowName':selfInfo['nick']};});return new Promise((_0x365860,_0x5330a0)=>{const _0x2f17b9=_0x307f23,_0x3d445f={'teqYh':function(_0x35cfb8,_0x3bd322){return _0x5698eb['GgrPn'](_0x35cfb8,_0x3bd322);}};let _0x547b2a=![];const _0x51904f=_0x4b342f=>{const _0x3ff6a7=_0x22e3,_0x2ed4d8=_0x4b342f[_0x3ff6a7(0x21b)][_0x3ff6a7(0x203)](_0x295814=>_0x295814['arkElement']);if(!_0x2ed4d8)return;const _0x5ed23f=JSON[_0x3ff6a7(0x1ec)](_0x2ed4d8[_0x3ff6a7(0x1f9)][_0x3ff6a7(0x1e9)]);if(_0x5698eb[_0x3ff6a7(0x213)](_0x5ed23f[_0x3ff6a7(0x207)],_0x5698eb[_0x3ff6a7(0x1f6)]))return;_0x4b342f[_0x3ff6a7(0x22a)]==_0x49fa42['peerUid']&&_0x5698eb[_0x3ff6a7(0x21c)](_0x4b342f[_0x3ff6a7(0x222)],selfInfo[_0x3ff6a7(0x1f5)])&&(_0x547b2a=!![],_0x5698eb[_0x3ff6a7(0x227)](_0x365860,_0x4b342f));};sentMsgTasks[_0x2f17b9(0x202)](_0x5698eb['IopUX'](randomUUID),_0x51904f),_0x5698eb[_0x2f17b9(0x228)](setTimeout,()=>{const _0x3fbbf4=_0x2f17b9;!_0x547b2a&&_0x3d445f[_0x3fbbf4(0x1f7)](_0x5330a0,_0x3fbbf4(0x21a));},0x1388),napCatCore[_0x2f17b9(0x210)][_0x2f17b9(0x20f)]()['multiForwardMsgWithComment'](_0x46e3f1,_0xb283d4,_0x49fa42,[],new Map());});}}function _0x34e1(){const _0x2329ba=['getMsgsIncludeSelf','7eVIImM','then','onMsgInfoListUpdate','set','find','hcEfj','multiForwardMsg','5285JfKLSX','app','guildId','13617Atqidg','1624YtwVQI','zkWUc','mAvDv','setMsgRead','BcJfV','getMsgService','session','PWpYH','length','jPgDH','2284WzLTcS','627okuiQD','onLoginSuccess','914667QmnCCz','163233wONVhu','msgId','转发消息超时','elements','QrReR','addListener','218894MdRsHC','cbSaZ','getMsgHistory','forEach','senderUid','catch','MFJyc','发送超时','GtPjz','GgrPn','PqVRa','fetchRecentContact','peerUid','sendStatus','map','588aknQFs','onAddSendMsg','activateChatAndGetHistory','bytesData','rZCHs','getMsgsByMsgId','parse','chatType','activateChat','2IzWsJB','setEmojiLike','81590YXDTXE','recallMsg','getMultiMsg','sendMsg','uid','PUPwD','teqYh','getMsgsBySeqAndCount','arkElement','forwardMsg','OYjvD','setMsgEmojiLikes','1300344FaBefu'];_0x34e1=function(){return _0x2329ba;};return _0x34e1();}