const _0x2ecb22=_0x52d1;(function(_0xa3f3a9,_0xb5919d){const _0x832015=_0x52d1,_0x351f1d=_0xa3f3a9();while(!![]){try{const _0x1a72d9=-parseInt(_0x832015(0x12a))/0x1*(parseInt(_0x832015(0x123))/0x2)+-parseInt(_0x832015(0x15b))/0x3*(-parseInt(_0x832015(0x11e))/0x4)+-parseInt(_0x832015(0x136))/0x5+parseInt(_0x832015(0x14d))/0x6*(parseInt(_0x832015(0x15a))/0x7)+parseInt(_0x832015(0x149))/0x8*(-parseInt(_0x832015(0x15c))/0x9)+parseInt(_0x832015(0x133))/0xa+parseInt(_0x832015(0x15d))/0xb;if(_0x1a72d9===_0xb5919d)break;else _0x351f1d['push'](_0x351f1d['shift']());}catch(_0x56d72e){_0x351f1d['push'](_0x351f1d['shift']());}}}(_0x1258,0x40e06));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x2ecb22(0x118)]=_0x12711f=>{const _0x5325e6=_0x2ecb22,_0x50fa01={'Vrrbr':function(_0x2a709a,_0x3cc9c8){return _0x2a709a(_0x3cc9c8);}};for(const [_0x5b5150,_0x42fd25]of GroupFileInfoUpdateTasks){_0x50fa01['Vrrbr'](_0x42fd25,_0x12711f),GroupFileInfoUpdateTasks[_0x5325e6(0x116)](_0x5b5150);}},msgListener[_0x2ecb22(0x119)]=_0x8662f8=>{const _0x54e7df=_0x2ecb22,_0x239267={'gLvZk':function(_0x170e58,_0x46fae2){return _0x170e58(_0x46fae2);},'fDMnD':function(_0x2ba8bf,_0x1a02fc){return _0x2ba8bf instanceof _0x1a02fc;}};for(const [_0x535cd8,_0x5be72d]of sentMsgTasks){_0x239267[_0x54e7df(0x148)](_0x5be72d,_0x8662f8),sentMsgTasks[_0x54e7df(0x116)](_0x535cd8);}if(sendMessagePool[_0x8662f8['peerUid']]){const _0x11983c=sendMessagePool[_0x8662f8[_0x54e7df(0x13c)]]?.(_0x8662f8);_0x239267[_0x54e7df(0x13d)](_0x11983c,Promise)&&_0x11983c[_0x54e7df(0x132)]()[_0x54e7df(0x159)](logError);}},msgListener['onMsgInfoListUpdate']=_0x22c617=>{const _0x18195d=_0x2ecb22,_0x28cee1={'BpdxZ':function(_0x519c43,_0x289945){return _0x519c43(_0x289945);},'hocRA':function(_0x322df6,_0x2e6da6){return _0x322df6 instanceof _0x2e6da6;}};_0x22c617[_0x18195d(0x130)](_0x477586=>{const _0x1902cf=_0x18195d;new Promise((_0x50b3f2,_0x56ff14)=>{const _0xf89935=_0x52d1;for(const _0x3b55b8 in sendSuccessCBMap){const _0x51a923=sendSuccessCBMap[_0x3b55b8],_0x4c2823=_0x28cee1[_0xf89935(0x14f)](_0x51a923,_0x477586),_0x34a19=_0x20ed88=>{_0x20ed88&&delete sendSuccessCBMap[_0x3b55b8];};_0x28cee1[_0xf89935(0x12f)](_0x4c2823,Promise)?_0x4c2823['then'](_0x34a19):_0x34a19(_0x4c2823);}})['then']()[_0x1902cf(0x159)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x394ce4=_0x52d1;napCatCore[_0x394ce4(0x12b)](msgListener);});},0x64);function _0x52d1(_0x556c30,_0x1faa0c){const _0x1258eb=_0x1258();return _0x52d1=function(_0x52d1fb,_0x2a5683){_0x52d1fb=_0x52d1fb-0x116;let _0x44d810=_0x1258eb[_0x52d1fb];return _0x44d810;},_0x52d1(_0x556c30,_0x1faa0c);}export class NTQQMsgApi{static async['setEmojiLike'](_0x409632,_0x3ac884,_0xb4016a,_0x293070=!![]){const _0x34a82b=_0x2ecb22,_0x51bcd2={'FgYIq':function(_0x163185,_0x22f452){return _0x163185>_0x22f452;}};return _0xb4016a=_0xb4016a[_0x34a82b(0x142)](),napCatCore['session']['getMsgService']()[_0x34a82b(0x128)](_0x409632,_0x3ac884,_0xb4016a,_0x51bcd2[_0x34a82b(0x14a)](_0xb4016a[_0x34a82b(0x14b)],0x3)?'2':'1',_0x293070);}static async[_0x2ecb22(0x156)](_0x3ed1f0,_0x4cd9af,_0x3b0fc3){const _0x1e46ba=_0x2ecb22;return napCatCore['session'][_0x1e46ba(0x129)]()['getMultiMsg'](_0x3ed1f0,_0x4cd9af,_0x3b0fc3);}static async[_0x2ecb22(0x12e)](_0x373808,_0x34e871){const _0xb42680=_0x2ecb22;return await napCatCore[_0xb42680(0x13f)][_0xb42680(0x129)]()[_0xb42680(0x12e)](_0x373808,_0x34e871);}static async[_0x2ecb22(0x143)](_0x2516d5,_0x4331f8,_0x5d67a3,_0x55d7b2,_0x2b162f){const _0x362b8d=_0x2ecb22;return await napCatCore[_0x362b8d(0x13f)][_0x362b8d(0x129)]()[_0x362b8d(0x143)](_0x2516d5,_0x4331f8,_0x5d67a3,_0x55d7b2,_0x2b162f);}static async['activateChat'](_0x5989be){}static async[_0x2ecb22(0x124)](_0x211872){}static async[_0x2ecb22(0x146)](_0x564317){const _0x33fcc8=_0x2ecb22;return napCatCore[_0x33fcc8(0x13f)][_0x33fcc8(0x129)]()[_0x33fcc8(0x146)](_0x564317);}static async[_0x2ecb22(0x121)](_0x1929c7,_0x4e9682){const _0x83fd5a=_0x2ecb22,_0x2aa6b={'JMpmy':function(_0x49ff8b,_0x3158f6){return _0x49ff8b(_0x3158f6);},'VUWvS':_0x83fd5a(0x14c),'HEItR':function(_0x55ead6,_0x1d7f8f,_0x2aee3a){return _0x55ead6(_0x1d7f8f,_0x2aee3a);},'dHHfz':function(_0x171af4){return _0x171af4();}};return new Promise(async(_0xd3fc3b,_0x273698)=>{const _0x15ed7b=_0x83fd5a;let _0x381e04=![];_0x2aa6b[_0x15ed7b(0x126)](setTimeout,()=>{const _0x1ab83b=_0x15ed7b;!_0x381e04&&_0x2aa6b[_0x1ab83b(0x153)](_0x273698,_0x2aa6b[_0x1ab83b(0x117)]);},0x1388);const _0x491e2a=_0x10442b=>{const _0x4f4bce=_0x15ed7b;_0x381e04=!![],_0x2aa6b[_0x4f4bce(0x153)](_0xd3fc3b,_0x10442b[_0x4f4bce(0x11c)]);};GroupFileInfoUpdateTasks['set'](_0x2aa6b[_0x15ed7b(0x13a)](randomUUID),_0x491e2a),await napCatCore[_0x15ed7b(0x13f)][_0x15ed7b(0x150)]()[_0x15ed7b(0x121)](_0x1929c7,_0x4e9682);});}static async['getMsgHistory'](_0x15b168,_0x472929,_0x1d22dc){const _0x4592e1=_0x2ecb22;return napCatCore[_0x4592e1(0x13f)][_0x4592e1(0x129)]()[_0x4592e1(0x120)](_0x15b168,_0x472929,_0x1d22dc,!![]);}static async[_0x2ecb22(0x141)](){}static async[_0x2ecb22(0x157)](_0x4e7951,_0x39f495){const _0x512b59=_0x2ecb22;await napCatCore[_0x512b59(0x13f)][_0x512b59(0x129)]()[_0x512b59(0x157)]({'chatType':_0x4e7951[_0x512b59(0x12d)],'peerUid':_0x4e7951['peerUid']},_0x39f495);}static async['sendMsg'](_0x143930,_0x509ef1,_0x3d5df9=!![],_0x5d5ecf=0x2710){const _0x1d46b1=_0x2ecb22,_0x4b5e5e={'Gxtnr':function(_0x50bbc6,_0x467a2a){return _0x50bbc6>_0x467a2a;},'ivPwv':_0x1d46b1(0x145),'dvCAm':function(_0xed706a,_0x1abd15){return _0xed706a(_0x1abd15);},'JrIlT':function(_0x3f6c5e){return _0x3f6c5e();},'XnZRu':function(_0x4ebd83,_0x22eef7){return _0x4ebd83===_0x22eef7;},'Gllxd':function(_0x16850b,_0x4dd377){return _0x16850b(_0x4dd377);},'TUMcy':function(_0x546125,_0x19350f,_0x49e2fb){return _0x546125(_0x19350f,_0x49e2fb);}},_0x447f2c=_0x143930['peerUid'];let _0x10fcbd=0x0;const _0x30ab4c=async()=>{const _0x5ea8da=_0x1d46b1;if(_0x4b5e5e[_0x5ea8da(0x122)](_0x10fcbd,_0x5d5ecf))throw _0x4b5e5e[_0x5ea8da(0x12c)];const _0x5bc647=sendMessagePool[_0x143930[_0x5ea8da(0x13c)]];if(_0x5bc647)return await _0x4b5e5e[_0x5ea8da(0x138)](sleep,0x1f4),_0x10fcbd+=0x1f4,await _0x4b5e5e[_0x5ea8da(0x139)](_0x30ab4c);else return;};return await _0x4b5e5e['JrIlT'](_0x30ab4c),new Promise((_0x548634,_0x5d6b37)=>{const _0x273cb1=_0x1d46b1;let _0x23fd80=![],_0x384274=null;const _0x5a4d0a=_0x4b5e5e[_0x273cb1(0x139)](randomUUID);sendSuccessCBMap[_0x5a4d0a]=_0x266945=>{const _0x2dc752=_0x273cb1;if(_0x4b5e5e['XnZRu'](_0x266945[_0x2dc752(0x134)],_0x384274?.['msgId'])){if(_0x4b5e5e[_0x2dc752(0x140)](_0x266945[_0x2dc752(0x154)],0x2))return delete sendSuccessCBMap[_0x5a4d0a],_0x23fd80=!![],_0x4b5e5e[_0x2dc752(0x11a)](_0x548634,_0x266945),!![];return![];}return![];},sendMessagePool[_0x447f2c]=async _0x482e79=>{delete sendMessagePool[_0x447f2c],_0x384274=_0x482e79;},_0x4b5e5e['TUMcy'](setTimeout,()=>{const _0x40d229=_0x273cb1;if(_0x23fd80)return;delete sendMessagePool[_0x447f2c],delete sendSuccessCBMap[_0x5a4d0a],_0x5d6b37(_0x40d229(0x145));},_0x5d5ecf);const _0x5e15bc=napCatCore[_0x273cb1(0x13f)][_0x273cb1(0x129)]()[_0x273cb1(0x152)]('0',_0x143930,_0x509ef1,new Map());});}static async['forwardMsg'](_0x3c6225,_0x52bbfe,_0x1327e1){const _0x42ecc1=_0x2ecb22;return napCatCore[_0x42ecc1(0x13f)][_0x42ecc1(0x129)]()[_0x42ecc1(0x11d)](_0x1327e1,_0x3c6225,[_0x52bbfe],new Map());}static async['multiForwardMsg'](_0x1e9b54,_0x58bb41,_0x2415d0){const _0x5c0336=_0x2ecb22,_0x5b7c1b={'IIjNu':'转发消息超时','ekHIa':function(_0x21285c,_0x34db78){return _0x21285c==_0x34db78;},'EMeqx':function(_0x47f253,_0x1784b8){return _0x47f253(_0x1784b8);},'vKgld':function(_0x4b1c02){return _0x4b1c02();},'QFVCw':function(_0x947d64,_0x2ade95,_0x2124b9){return _0x947d64(_0x2ade95,_0x2124b9);}},_0x1c65ee=_0x2415d0[_0x5c0336(0x135)](_0x56e992=>{const _0x52df97=_0x5c0336;return{'msgId':_0x56e992,'senderShowName':selfInfo[_0x52df97(0x13e)]};});return new Promise((_0x342b74,_0x1ad586)=>{const _0x278d0e=_0x5c0336,_0x220769={'NhRxv':'com.tencent.multimsg','LiLdX':function(_0x12032f,_0x591b3e){const _0x3eecec=_0x52d1;return _0x5b7c1b[_0x3eecec(0x11b)](_0x12032f,_0x591b3e);},'IOvrR':function(_0x1db2c5,_0x15c75c){return _0x5b7c1b['EMeqx'](_0x1db2c5,_0x15c75c);}};let _0xca57d6=![];const _0x537a5b=_0x246c09=>{const _0x557b62=_0x52d1,_0x5ca559=_0x246c09['elements'][_0x557b62(0x125)](_0x232825=>_0x232825[_0x557b62(0x131)]);if(!_0x5ca559)return;const _0xedcc92=JSON[_0x557b62(0x127)](_0x5ca559[_0x557b62(0x131)][_0x557b62(0x137)]);if(_0xedcc92[_0x557b62(0x144)]!=_0x220769[_0x557b62(0x11f)])return;_0x246c09[_0x557b62(0x13c)]==_0x58bb41[_0x557b62(0x13c)]&&_0x220769[_0x557b62(0x14e)](_0x246c09['senderUid'],selfInfo[_0x557b62(0x155)])&&(_0xca57d6=!![],_0x220769[_0x557b62(0x151)](_0x342b74,_0x246c09));};sentMsgTasks[_0x278d0e(0x13b)](_0x5b7c1b[_0x278d0e(0x147)](randomUUID),_0x537a5b),_0x5b7c1b[_0x278d0e(0x158)](setTimeout,()=>{!_0xca57d6&&_0x1ad586(_0x5b7c1b['IIjNu']);},0x1388),napCatCore['session']['getMsgService']()[_0x278d0e(0x15e)](_0x1c65ee,_0x1e9b54,_0x58bb41,[],new Map());});}}function _0x1258(){const _0x148d91=['onGroupFileInfoUpdate','onAddSendMsg','Gllxd','ekHIa','item','forwardMsg','30944pkFuXA','NhRxv','getMsgsIncludeSelf','getGroupFileList','Gxtnr','158vsSAPY','activateChatAndGetHistory','find','HEItR','parse','setMsgEmojiLikes','getMsgService','4278dhmmeI','addListener','ivPwv','chatType','getMsgsByMsgId','hocRA','forEach','arkElement','then','4464540SBsePv','msgId','map','457165JwpIdP','bytesData','dvCAm','JrIlT','dHHfz','set','peerUid','fDMnD','nick','session','XnZRu','fetchRecentContact','toString','getMsgsBySeqAndCount','app','发送超时','setMsgRead','vKgld','gLvZk','368lakOsu','FgYIq','length','获取群文件列表超时','6NqhfYC','LiLdX','BpdxZ','getRichMediaService','IOvrR','sendMsg','JMpmy','sendStatus','uid','getMultiMsg','recallMsg','QFVCw','catch','334586QyCyTe','3iGLBiP','82989GfyYfN','6790377pwkykI','multiForwardMsgWithComment','delete','VUWvS'];_0x1258=function(){return _0x148d91;};return _0x1258();}