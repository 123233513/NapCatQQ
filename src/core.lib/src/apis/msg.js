const _0x39c8b3=_0x3c63;(function(_0x3956af,_0x4dc1c1){const _0x47af0f=_0x3c63,_0x1dc076=_0x3956af();while(!![]){try{const _0x4fbdc8=parseInt(_0x47af0f(0xaa))/0x1*(-parseInt(_0x47af0f(0xc1))/0x2)+parseInt(_0x47af0f(0x98))/0x3*(parseInt(_0x47af0f(0xc3))/0x4)+-parseInt(_0x47af0f(0xb4))/0x5+parseInt(_0x47af0f(0x94))/0x6+parseInt(_0x47af0f(0x9c))/0x7*(-parseInt(_0x47af0f(0xc9))/0x8)+parseInt(_0x47af0f(0xc5))/0x9+parseInt(_0x47af0f(0xcc))/0xa;if(_0x4fbdc8===_0x4dc1c1)break;else _0x1dc076['push'](_0x1dc076['shift']());}catch(_0xaccfbd){_0x1dc076['push'](_0x1dc076['shift']());}}}(_0xadd1,0xb6ef4));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';function _0x3c63(_0x11a7d0,_0x3331e1){const _0xadd141=_0xadd1();return _0x3c63=function(_0x3c6331,_0x188581){_0x3c6331=_0x3c6331-0x93;let _0x19921b=_0xadd141[_0x3c6331];return _0x19921b;},_0x3c63(_0x11a7d0,_0x3331e1);}import{sleep}from'@/common/utils/helper';function _0xadd1(){const _0x53f7cb=['onLoginSuccess','msgId','find','chatType','1514AFTHgC','getMsgHistory','32IsXAfo','arkElement','3900582JtLjPQ','session','sendMsg','sEOdk','359512CldkfW','bytesData','app','12511990uxVzKW','cwNre','6222642LgbArX','forEach','onAddSendMsg','elements','439524skAetc','recallMsg','UPKVm','BsLqj','231yyStub','getMultiMsg','parse','onMsgInfoListUpdate','Effbo','lfNrm','getMsgsBySeqAndCount','fetchRecentContact','getMsgService','setMsgRead','gEETl','HWNai','ahrQO','pJrsH','863osHLvW','setMsgEmojiLikes','getMsgsByMsgId','sendStatus','nick','then','PLcQl','catch','发送超时','forwardMsg','5040950QotKzc','com.tencent.multimsg','peerUid','qSPey','toString','xqtfT','NTvKG','activateChat','map'];_0xadd1=function(){return _0x53f7cb;};return _0xadd1();}import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x39c8b3(0x96)]=_0xd10732=>{const _0x3732ce=_0x39c8b3,_0x477a23={'lfNrm':function(_0x3de895,_0x23edb2){return _0x3de895(_0x23edb2);},'cwNre':function(_0x40b9cf,_0x133adb){return _0x40b9cf instanceof _0x133adb;}};for(const [_0x4ca90c,_0x5e0c37]of sentMsgTasks){_0x477a23[_0x3732ce(0xa1)](_0x5e0c37,_0xd10732),sentMsgTasks['delete'](_0x4ca90c);}if(sendMessagePool[_0xd10732['peerUid']]){const _0x33def9=sendMessagePool[_0xd10732[_0x3732ce(0xb6)]]?.(_0xd10732);_0x477a23[_0x3732ce(0x93)](_0x33def9,Promise)&&_0x33def9[_0x3732ce(0xaf)]()[_0x3732ce(0xb1)](logError);}},msgListener[_0x39c8b3(0x9f)]=_0x520a51=>{const _0x4b1d2c=_0x39c8b3,_0x4a734b={'PLcQl':function(_0x2c115c,_0xe61428){return _0x2c115c(_0xe61428);},'vcquu':function(_0x2c7f28,_0x1f6cf8){return _0x2c7f28 instanceof _0x1f6cf8;}};_0x520a51[_0x4b1d2c(0x95)](_0x3de11a=>{const _0x5b4e82=_0x4b1d2c;new Promise((_0x5acd27,_0x115355)=>{const _0x57161b=_0x3c63;for(const _0x487b23 in sendSuccessCBMap){const _0x2723e0=sendSuccessCBMap[_0x487b23],_0x23b333=_0x4a734b['PLcQl'](_0x2723e0,_0x3de11a),_0x1fd874=_0x1dd553=>{_0x1dd553&&delete sendSuccessCBMap[_0x487b23];};_0x4a734b['vcquu'](_0x23b333,Promise)?_0x23b333['then'](_0x1fd874):_0x4a734b[_0x57161b(0xb0)](_0x1fd874,_0x23b333);}})[_0x5b4e82(0xaf)]()[_0x5b4e82(0xb1)](log);});},setTimeout(()=>{const _0x1a4832=_0x39c8b3;napCatCore[_0x1a4832(0xbd)](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async['setEmojiLike'](_0x20d1eb,_0x1749a0,_0x2c1688,_0x432a53=!![]){const _0x5be4ea=_0x39c8b3;return _0x2c1688=_0x2c1688[_0x5be4ea(0xb8)](),napCatCore[_0x5be4ea(0xc6)]['getMsgService']()[_0x5be4ea(0xab)](_0x20d1eb,_0x1749a0,_0x2c1688,_0x2c1688['length']>0x3?'2':'1',_0x432a53);}static async['getMultiMsg'](_0x469bf3,_0x33117b,_0x49c0dd){const _0x25fb45=_0x39c8b3;return napCatCore[_0x25fb45(0xc6)][_0x25fb45(0xa4)]()[_0x25fb45(0x9d)](_0x469bf3,_0x33117b,_0x49c0dd);}static async[_0x39c8b3(0xac)](_0x461ad3,_0x20951b){const _0x28c30a=_0x39c8b3;return await napCatCore[_0x28c30a(0xc6)][_0x28c30a(0xa4)]()[_0x28c30a(0xac)](_0x461ad3,_0x20951b);}static async[_0x39c8b3(0xa2)](_0x3c4351,_0x4ff9d1,_0x259942,_0x56e9ae,_0x4c07e5){const _0x29f489=_0x39c8b3;return await napCatCore[_0x29f489(0xc6)]['getMsgService']()[_0x29f489(0xa2)](_0x3c4351,_0x4ff9d1,_0x259942,_0x56e9ae,_0x4c07e5);}static async[_0x39c8b3(0xbb)](_0x2b0234){}static async['activateChatAndGetHistory'](_0x258295){}static async['setMsgRead'](_0x305481){const _0x1c708e=_0x39c8b3;return napCatCore['session'][_0x1c708e(0xa4)]()[_0x1c708e(0xa5)](_0x305481);}static async[_0x39c8b3(0xc2)](_0x1c81bd,_0x1923da,_0x227ef1){const _0x2ede0b=_0x39c8b3;return napCatCore['session'][_0x2ede0b(0xa4)]()['getMsgsIncludeSelf'](_0x1c81bd,_0x1923da,_0x227ef1,!![]);}static async[_0x39c8b3(0xa3)](){}static async['recallMsg'](_0x44b29c,_0x169908){const _0x464708=_0x39c8b3;await napCatCore[_0x464708(0xc6)][_0x464708(0xa4)]()[_0x464708(0x99)]({'chatType':_0x44b29c[_0x464708(0xc0)],'peerUid':_0x44b29c['peerUid']},_0x169908);}static async[_0x39c8b3(0xc7)](_0x2f1a6f,_0x583374,_0x38b87d=!![],_0x26283d=0x2710){const _0x3c70cf=_0x39c8b3,_0x1fd0a2={'qSPey':function(_0x223725,_0x2ec060){return _0x223725>_0x2ec060;},'UPKVm':_0x3c70cf(0xb2),'Effbo':function(_0x40e48e,_0x4ad637){return _0x40e48e(_0x4ad637);},'xqtfT':function(_0x36e0c3){return _0x36e0c3();},'HWNai':function(_0xe61ddd,_0x2c4f1a){return _0xe61ddd(_0x2c4f1a);},'xBkPs':function(_0x5226ca,_0x1e8b1c,_0x59b903){return _0x5226ca(_0x1e8b1c,_0x59b903);}},_0x428f27=_0x2f1a6f['peerUid'];let _0x30d735=0x0;const _0x258922=async()=>{const _0x5a564d=_0x3c70cf;if(_0x1fd0a2[_0x5a564d(0xb7)](_0x30d735,_0x26283d))throw _0x1fd0a2[_0x5a564d(0x9a)];const _0x12419f=sendMessagePool[_0x2f1a6f[_0x5a564d(0xb6)]];if(_0x12419f)return await _0x1fd0a2[_0x5a564d(0xa0)](sleep,0x1f4),_0x30d735+=0x1f4,await _0x1fd0a2[_0x5a564d(0xb9)](_0x258922);else return;};return await _0x258922(),new Promise((_0xca361a,_0x409f28)=>{const _0x5b7dcc=_0x3c70cf,_0x3c1656={'ahrQO':function(_0x16a0e8,_0x2fdf5e){return _0x16a0e8===_0x2fdf5e;},'pJrsH':function(_0x1fe546,_0x1474ff){const _0x58d819=_0x3c63;return _0x1fd0a2[_0x58d819(0xa7)](_0x1fe546,_0x1474ff);}};let _0x2aa313=![],_0x5bc091=null;const _0x23131b=_0x1fd0a2[_0x5b7dcc(0xb9)](randomUUID);sendSuccessCBMap[_0x23131b]=_0xe4cdb=>{const _0x18e269=_0x5b7dcc;if(_0x3c1656[_0x18e269(0xa8)](_0xe4cdb[_0x18e269(0xbe)],_0x5bc091?.[_0x18e269(0xbe)])){if(_0x3c1656['ahrQO'](_0xe4cdb[_0x18e269(0xad)],0x2))return delete sendSuccessCBMap[_0x23131b],_0x2aa313=!![],_0x3c1656[_0x18e269(0xa9)](_0xca361a,_0xe4cdb),!![];return![];}return![];},sendMessagePool[_0x428f27]=async _0x1000ef=>{delete sendMessagePool[_0x428f27],_0x5bc091=_0x1000ef;},_0x1fd0a2['xBkPs'](setTimeout,()=>{const _0x928c0c=_0x5b7dcc;if(_0x2aa313)return;delete sendMessagePool[_0x428f27],delete sendSuccessCBMap[_0x23131b],_0x1fd0a2[_0x928c0c(0xa0)](_0x409f28,_0x1fd0a2[_0x928c0c(0x9a)]);},_0x26283d);const _0x338af7=napCatCore[_0x5b7dcc(0xc6)][_0x5b7dcc(0xa4)]()[_0x5b7dcc(0xc7)]('0',_0x2f1a6f,_0x583374,new Map());});}static async[_0x39c8b3(0xb3)](_0x312966,_0x318d5f,_0xe4367d){const _0x5773b1=_0x39c8b3;return napCatCore[_0x5773b1(0xc6)][_0x5773b1(0xa4)]()['forwardMsg'](_0xe4367d,_0x312966,[_0x318d5f],new Map());}static async['multiForwardMsg'](_0x18bb8c,_0x139c4a,_0x5b5334){const _0x436a90=_0x39c8b3,_0x55920c={'sEOdk':function(_0x166507,_0x1fd738){return _0x166507!=_0x1fd738;},'gEETl':_0x436a90(0xb5),'cavBM':function(_0x357281,_0x2139d9){return _0x357281==_0x2139d9;},'uwISY':function(_0x37b8aa,_0x38232b){return _0x37b8aa==_0x38232b;},'BsLqj':'转发消息超时','NTvKG':function(_0x53615e,_0x153637,_0x5ea0f0){return _0x53615e(_0x153637,_0x5ea0f0);}},_0x5a7c55=_0x5b5334[_0x436a90(0xbc)](_0x1c9da2=>{const _0x4b7d34=_0x436a90;return{'msgId':_0x1c9da2,'senderShowName':selfInfo[_0x4b7d34(0xae)]};});return new Promise((_0x5ed841,_0x2f8bc8)=>{const _0x59f8b6=_0x436a90,_0x39dd5c={'DDCSU':_0x55920c[_0x59f8b6(0x9b)]};let _0x5735d8=![];const _0x468b5a=_0x150f1c=>{const _0x2f47=_0x59f8b6,_0xed52d0=_0x150f1c[_0x2f47(0x97)][_0x2f47(0xbf)](_0x21a34c=>_0x21a34c[_0x2f47(0xc4)]);if(!_0xed52d0)return;const _0x2d8ce6=JSON[_0x2f47(0x9e)](_0xed52d0['arkElement'][_0x2f47(0xca)]);if(_0x55920c[_0x2f47(0xc8)](_0x2d8ce6[_0x2f47(0xcb)],_0x55920c[_0x2f47(0xa6)]))return;_0x55920c['cavBM'](_0x150f1c[_0x2f47(0xb6)],_0x139c4a['peerUid'])&&_0x55920c['uwISY'](_0x150f1c['senderUid'],selfInfo['uid'])&&(_0x5735d8=!![],_0x5ed841(_0x150f1c));};sentMsgTasks['set'](randomUUID(),_0x468b5a),_0x55920c[_0x59f8b6(0xba)](setTimeout,()=>{!_0x5735d8&&_0x2f8bc8(_0x39dd5c['DDCSU']);},0x1388),napCatCore[_0x59f8b6(0xc6)]['getMsgService']()['multiForwardMsgWithComment'](_0x5a7c55,_0x18bb8c,_0x139c4a,[],new Map());});}}