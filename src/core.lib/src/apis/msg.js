const _0x15bf52=_0x4150;(function(_0x3e0bc0,_0xef2205){const _0x2b61bd=_0x4150,_0x498923=_0x3e0bc0();while(!![]){try{const _0xc5e630=-parseInt(_0x2b61bd(0x180))/0x1+-parseInt(_0x2b61bd(0x168))/0x2+parseInt(_0x2b61bd(0x169))/0x3+-parseInt(_0x2b61bd(0x16d))/0x4+-parseInt(_0x2b61bd(0x173))/0x5*(parseInt(_0x2b61bd(0x154))/0x6)+parseInt(_0x2b61bd(0x164))/0x7*(parseInt(_0x2b61bd(0x15e))/0x8)+parseInt(_0x2b61bd(0x15b))/0x9;if(_0xc5e630===_0xef2205)break;else _0x498923['push'](_0x498923['shift']());}catch(_0xf10d0){_0x498923['push'](_0x498923['shift']());}}}(_0x4f37,0x50121));import{selfInfo}from'@/common/data';import{log}from'@/common/utils/log';function _0x4150(_0xd1ed19,_0x334c0c){const _0x4f37b7=_0x4f37();return _0x4150=function(_0x415090,_0x392f25){_0x415090=_0x415090-0x152;let _0x35e16d=_0x4f37b7[_0x415090];return _0x35e16d;},_0x4150(_0xd1ed19,_0x334c0c);}import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x4f37(){const _0x450b72=['chatType','onAddSendMsg','dbvJR','8494137rpmLrk','forwardMsg','activateChat','1964712VSKkvu','bfoLj','getMsgHistory','getMsgsIncludeSelf','addListener','arkElement','7ZwnErE','DjeTo','session','WspZm','564572EcLZpR','454158QqOuab','sendStatus','发送超时','multiForwardMsgWithComment','10580kILQIF','nick','zGQob','onMsgInfoListUpdate','peerUid','guildId','15jxfxhh','catch','onLoginSuccess','bytesData','uid','rtwik','gdteH','activateChatAndGetHistory','find','vjgsY','elements','com.tencent.multimsg','zhZfP','430817graVzk','then','setMsgRead','map','vLJTO','recallMsg','getMsgService','sendMsg','ROtCb','msgId','hiXjX','cpHEF','bscNM','nOQoL','594102oICFyr','removeKernelMsgListener','multiForwardMsg','app'];_0x4f37=function(){return _0x450b72;};return _0x4f37();}import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},msgListener=new MsgListener();msgListener[_0x15bf52(0x159)]=_0x340111=>{const _0x47164f=_0x15bf52,_0x5600ee={'ROtCb':function(_0xe7e89c,_0x1a1b82){return _0xe7e89c instanceof _0x1a1b82;}};if(sendMessagePool[_0x340111[_0x47164f(0x171)]]){const _0x367e76=sendMessagePool[_0x340111[_0x47164f(0x171)]]?.(_0x340111);_0x5600ee[_0x47164f(0x188)](_0x367e76,Promise)&&_0x367e76['then']()['then'](log);}},msgListener[_0x15bf52(0x170)]=_0x22fed9=>{const _0x2d5640={'hiXjX':function(_0x21c1e6,_0x1da4ae){return _0x21c1e6(_0x1da4ae);}};_0x22fed9['forEach'](_0x1b280a=>{const _0x2ab573=_0x4150;new Promise((_0x40d269,_0x3f45bf)=>{const _0x493313=_0x4150;for(const _0x42359e in sendSuccessCBMap){const _0xa4e856=sendSuccessCBMap[_0x42359e],_0x2be45a=_0x2d5640[_0x493313(0x18a)](_0xa4e856,_0x1b280a),_0x4f045a=_0x36f79a=>{_0x36f79a&&delete sendSuccessCBMap[_0x42359e];};_0x2be45a instanceof Promise?_0x2be45a[_0x493313(0x181)](_0x4f045a):_0x2d5640[_0x493313(0x18a)](_0x4f045a,_0x2be45a);}})[_0x2ab573(0x181)]()[_0x2ab573(0x174)](log);});},setTimeout(()=>{const _0x30bd42=_0x15bf52;napCatCore[_0x30bd42(0x175)](()=>{const _0x5c0dcc=_0x30bd42;napCatCore[_0x5c0dcc(0x162)](msgListener);});},0x64);export class NTQQMsgApi{static async['getMultiMsg'](_0x59d116,_0x19cead,_0x56522f){return napCatCore['session']['getMsgService']()['getMultiMsg'](_0x59d116,_0x19cead,_0x56522f);}static async[_0x15bf52(0x15d)](_0x57590c){}static async[_0x15bf52(0x17a)](_0x45c036){}static async[_0x15bf52(0x182)](_0x2df774){const _0x5af073=_0x15bf52;return napCatCore[_0x5af073(0x166)]['getMsgService']()[_0x5af073(0x182)](_0x2df774[_0x5af073(0x158)],_0x2df774[_0x5af073(0x171)],_0x2df774[_0x5af073(0x172)]);}static async[_0x15bf52(0x160)](_0x4485b3,_0x52a545,_0x1a1da5){const _0x43d952=_0x15bf52;return napCatCore[_0x43d952(0x166)][_0x43d952(0x186)]()[_0x43d952(0x161)](_0x4485b3,_0x52a545,_0x1a1da5,!![]);}static async['fetchRecentContact'](){}static async[_0x15bf52(0x185)](_0x1626e3,_0x1a42f7){const _0x356c60=_0x15bf52;await napCatCore[_0x356c60(0x166)]['getMsgService']()[_0x356c60(0x185)]({'chatType':_0x1626e3[_0x356c60(0x158)],'peerUid':_0x1626e3['peerUid']},_0x1a42f7);}static async[_0x15bf52(0x187)](_0x3052e1,_0x38b4cd,_0x4aa901=!![],_0x729fdf=0x2710){const _0x776dd4=_0x15bf52,_0x206354={'nOQoL':function(_0x23d26d,_0x5682d0){return _0x23d26d>_0x5682d0;},'bfoLj':function(_0x1af58b,_0x378a12){return _0x1af58b===_0x378a12;},'zGQob':function(_0x134368,_0x3deca8){return _0x134368(_0x3deca8);},'dbvJR':function(_0x224844,_0x332277){return _0x224844(_0x332277);},'aMddk':_0x776dd4(0x16b),'vLJTO':function(_0x3489f3){return _0x3489f3();},'vjgsY':function(_0x62051e,_0x42f7c3,_0x370d7e){return _0x62051e(_0x42f7c3,_0x370d7e);},'DjeTo':function(_0x4f26cb){return _0x4f26cb();}},_0x431e9e=_0x3052e1[_0x776dd4(0x171)];let _0x3d979b=0x0;const _0x14c6e1=async()=>{const _0x56ce13=_0x776dd4;if(_0x206354[_0x56ce13(0x153)](_0x3d979b,_0x729fdf))throw'发送超时';const _0x14cd13=sendMessagePool[_0x3052e1[_0x56ce13(0x171)]];if(_0x14cd13)return await sleep(0x1f4),_0x3d979b+=0x1f4,await _0x14c6e1();else return;};return await _0x206354[_0x776dd4(0x165)](_0x14c6e1),new Promise((_0x5a1c62,_0x54dfbb)=>{const _0xfba548=_0x776dd4;let _0x1aa3b1=![],_0x4fbd8=null;const _0x2dd1ee=_0x206354[_0xfba548(0x184)](randomUUID);sendSuccessCBMap[_0x2dd1ee]=_0x25ab9f=>{const _0x590a3d=_0xfba548;if(_0x206354[_0x590a3d(0x15f)](_0x25ab9f[_0x590a3d(0x189)],_0x4fbd8?.[_0x590a3d(0x189)])){if(_0x206354[_0x590a3d(0x15f)](_0x25ab9f[_0x590a3d(0x16a)],0x2))return delete sendSuccessCBMap[_0x2dd1ee],_0x1aa3b1=!![],_0x206354[_0x590a3d(0x16f)](_0x5a1c62,_0x25ab9f),!![];return![];}return![];},sendMessagePool[_0x431e9e]=async _0x131236=>{delete sendMessagePool[_0x431e9e],_0x4fbd8=_0x131236;},_0x206354[_0xfba548(0x17c)](setTimeout,()=>{const _0x16499=_0xfba548;if(_0x1aa3b1)return;delete sendMessagePool[_0x431e9e],delete sendSuccessCBMap[_0x2dd1ee],_0x206354[_0x16499(0x15a)](_0x54dfbb,_0x206354['aMddk']);},_0x729fdf);const _0x518845=napCatCore['session'][_0xfba548(0x186)]()['sendMsg']('0',_0x3052e1,_0x38b4cd,new Map());});}static async[_0x15bf52(0x15c)](_0x4099c2,_0x2ab973,_0x32a0fa){}static async[_0x15bf52(0x156)](_0x183a82,_0x1c36a6,_0x5e432e){const _0x4bb5cf=_0x15bf52,_0x35522b={'cpHEF':function(_0x6629bf,_0x48acfd){return _0x6629bf(_0x48acfd);},'mjYBV':'转发消息超时','rtwik':function(_0x9e326,_0x1da275){return _0x9e326!=_0x1da275;},'zhZfP':_0x4bb5cf(0x17e),'WspZm':function(_0x20d785,_0xfdfa91){return _0x20d785==_0xfdfa91;}},_0x2c2d2e=_0x5e432e[_0x4bb5cf(0x183)](_0x405982=>{const _0x300bd2=_0x4bb5cf;return{'msgId':_0x405982,'senderShowName':selfInfo[_0x300bd2(0x16e)]};});return new Promise((_0x4155ce,_0x46cf15)=>{const _0x574268=_0x4bb5cf,_0x8c552a={'gdteH':function(_0x528751,_0x67397e){const _0x257169=_0x4150;return _0x35522b[_0x257169(0x178)](_0x528751,_0x67397e);},'AHeIY':_0x35522b[_0x574268(0x17f)],'bscNM':function(_0x531645,_0x4cca2b){const _0x21c06f=_0x574268;return _0x35522b[_0x21c06f(0x167)](_0x531645,_0x4cca2b);}};let _0x7498dc=![];const _0x801f87=new MsgListener(),_0x486f1c=_0xa8c67a=>{const _0x2497e6=_0x574268,_0x701552=_0xa8c67a[_0x2497e6(0x17d)][_0x2497e6(0x17b)](_0x2f96c5=>_0x2f96c5[_0x2497e6(0x163)]);if(!_0x701552)return;const _0x11a19b=JSON['parse'](_0x701552[_0x2497e6(0x163)][_0x2497e6(0x176)]);if(_0x8c552a[_0x2497e6(0x179)](_0x11a19b[_0x2497e6(0x157)],_0x8c552a['AHeIY']))return;_0x8c552a[_0x2497e6(0x152)](_0xa8c67a['peerUid'],_0x1c36a6[_0x2497e6(0x171)])&&_0x8c552a['bscNM'](_0xa8c67a['senderUid'],selfInfo[_0x2497e6(0x177)])&&(_0x7498dc=!![],napCatCore[_0x2497e6(0x166)][_0x2497e6(0x186)]()[_0x2497e6(0x155)](_0x3485aa),_0x4155ce(_0xa8c67a));};_0x801f87[_0x574268(0x159)]=_0x486f1c;const _0x3485aa=napCatCore[_0x574268(0x162)](_0x801f87);setTimeout(()=>{const _0x3d27a3=_0x574268;!_0x7498dc&&(napCatCore[_0x3d27a3(0x166)]['getMsgService']()[_0x3d27a3(0x155)](_0x3485aa),_0x35522b[_0x3d27a3(0x18b)](_0x46cf15,_0x35522b['mjYBV']));},0x1388),napCatCore[_0x574268(0x166)][_0x574268(0x186)]()[_0x574268(0x16c)](_0x2c2d2e,_0x183a82,_0x1c36a6,[],new Map());});}}
