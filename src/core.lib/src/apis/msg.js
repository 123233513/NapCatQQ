function _0x59b2(_0x3b1d94,_0x22e0bc){const _0x25694a=_0x2569();return _0x59b2=function(_0x59b20a,_0x3b0f17){_0x59b20a=_0x59b20a-0xca;let _0x23404c=_0x25694a[_0x59b20a];return _0x23404c;},_0x59b2(_0x3b1d94,_0x22e0bc);}const _0x2f6ea5=_0x59b2;(function(_0x2dc97b,_0x4e8aa5){const _0x6bce6d=_0x59b2,_0x19fc86=_0x2dc97b();while(!![]){try{const _0x2a6cb3=-parseInt(_0x6bce6d(0x112))/0x1*(-parseInt(_0x6bce6d(0x10e))/0x2)+-parseInt(_0x6bce6d(0xce))/0x3+-parseInt(_0x6bce6d(0x10d))/0x4*(parseInt(_0x6bce6d(0xf7))/0x5)+parseInt(_0x6bce6d(0x107))/0x6*(parseInt(_0x6bce6d(0xcd))/0x7)+-parseInt(_0x6bce6d(0xcc))/0x8*(-parseInt(_0x6bce6d(0xd2))/0x9)+-parseInt(_0x6bce6d(0x100))/0xa+parseInt(_0x6bce6d(0x10a))/0xb*(-parseInt(_0x6bce6d(0xe3))/0xc);if(_0x2a6cb3===_0x4e8aa5)break;else _0x19fc86['push'](_0x19fc86['shift']());}catch(_0x230c89){_0x19fc86['push'](_0x19fc86['shift']());}}}(_0x2569,0xdb8af));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();function _0x2569(){const _0x592ca0=['forEach','onMsgInfoListUpdate','LwvLR','3188940iXaJov','vVteT','zKLKs','834482AFwvBc','delete','getMsgsByMsgId','12smSVAZ','880886ojpEaE','JIgdd','find','length','1hPRHxF','item','multiForwardMsgWithComment','LFrif','NJudu','getMultiMsg','then','activateChatAndGetHistory','19400WlewGu','21MCOeBq','242067QcxEeQ','onGroupFileInfoUpdate','yvYJb','exLXG','6435VMcyyR','getMsgsBySeqAndCount','cwSsd','QhCcu','bMAzs','msgId','onLoginSuccess','parse','session','addListener','getGroupFileList','jTvpR','chatType','VvBQl','peerUid','forwardMsg','pyzaQ','96hKPXWl','set','setMsgRead','GYCBF','getMsgService','arkElement','tVlKW','转发消息超时','sendMsg','activateChat','toString','senderUid','fetchRecentContact','发送超时','DxZFV','map','获取群文件列表超时','jSFVa','PubcK','onAddSendMsg','2423365lOXTRL','EkYYB','catch','jejWG','LFrLQ','multiForwardMsg','elements','app','getMsgHistory','7279370RwrRmQ','com.tencent.multimsg','setEmojiLike','uid'];_0x2569=function(){return _0x592ca0;};return _0x2569();}msgListener[_0x2f6ea5(0xcf)]=_0x50fe01=>{const _0x392d74=_0x2f6ea5,_0x5948b2={'yvYJb':function(_0x4d48e2,_0x3d25e9){return _0x4d48e2(_0x3d25e9);}};for(const [_0x57f4b0,_0xf7481]of GroupFileInfoUpdateTasks){_0x5948b2[_0x392d74(0xd0)](_0xf7481,_0x50fe01),GroupFileInfoUpdateTasks['delete'](_0x57f4b0);}},msgListener[_0x2f6ea5(0xf6)]=_0x252efb=>{const _0x2bb396=_0x2f6ea5,_0x4081ae={'ULcIY':function(_0x379d6d,_0xbad058){return _0x379d6d(_0xbad058);},'NSLBO':function(_0x54e713,_0x107b0b){return _0x54e713 instanceof _0x107b0b;}};for(const [_0x2f17a6,_0x19ad41]of sentMsgTasks){_0x4081ae['ULcIY'](_0x19ad41,_0x252efb),sentMsgTasks[_0x2bb396(0x10b)](_0x2f17a6);}if(sendMessagePool[_0x252efb[_0x2bb396(0xe0)]]){const _0x5bbe4a=sendMessagePool[_0x252efb[_0x2bb396(0xe0)]]?.(_0x252efb);_0x4081ae['NSLBO'](_0x5bbe4a,Promise)&&_0x5bbe4a[_0x2bb396(0xca)]()[_0x2bb396(0xf9)](logError);}},msgListener[_0x2f6ea5(0x105)]=_0x326a1e=>{const _0x26a968=_0x2f6ea5,_0x31b760={'bMAzs':function(_0x334693,_0x5176df){return _0x334693(_0x5176df);},'scjTz':function(_0x28cbc7,_0x19e786){return _0x28cbc7 instanceof _0x19e786;}};_0x326a1e[_0x26a968(0x104)](_0x4e154c=>{const _0x2db29b=_0x26a968,_0x81dd5e={'LFrLQ':function(_0xa9efe9,_0x809377){const _0x1ad123=_0x59b2;return _0x31b760[_0x1ad123(0xd6)](_0xa9efe9,_0x809377);},'pyzaQ':function(_0x511597,_0x4b7b02){return _0x31b760['scjTz'](_0x511597,_0x4b7b02);}};new Promise((_0x2aba48,_0x3124b2)=>{const _0x2027e4=_0x59b2;for(const _0x29d9ab in sendSuccessCBMap){const _0x2fe98d=sendSuccessCBMap[_0x29d9ab],_0x50ef49=_0x81dd5e[_0x2027e4(0xfb)](_0x2fe98d,_0x4e154c),_0x3b439b=_0x3220c0=>{_0x3220c0&&delete sendSuccessCBMap[_0x29d9ab];};_0x81dd5e[_0x2027e4(0xe2)](_0x50ef49,Promise)?_0x50ef49['then'](_0x3b439b):_0x81dd5e[_0x2027e4(0xfb)](_0x3b439b,_0x50ef49);}})['then']()[_0x2db29b(0xf9)](log);});},setTimeout(()=>{const _0x2567d3=_0x2f6ea5;napCatCore[_0x2567d3(0xd8)](()=>{const _0x339d5a=_0x2567d3;napCatCore[_0x339d5a(0xdb)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x2f6ea5(0x102)](_0xe35314,_0x39a1eb,_0x324aa8,_0x1d7a3d=!![]){const _0x13f0dd=_0x2f6ea5,_0x1f1362={'cwSsd':function(_0x43845a,_0x49ab8d){return _0x43845a>_0x49ab8d;}};return _0x324aa8=_0x324aa8[_0x13f0dd(0xed)](),napCatCore[_0x13f0dd(0xda)][_0x13f0dd(0xe7)]()['setMsgEmojiLikes'](_0xe35314,_0x39a1eb,_0x324aa8,_0x1f1362[_0x13f0dd(0xd4)](_0x324aa8[_0x13f0dd(0x111)],0x3)?'2':'1',_0x1d7a3d);}static async[_0x2f6ea5(0x117)](_0x485b7b,_0x481329,_0x2dd6f9){const _0x5b9d2b=_0x2f6ea5;return napCatCore['session'][_0x5b9d2b(0xe7)]()[_0x5b9d2b(0x117)](_0x485b7b,_0x481329,_0x2dd6f9);}static async[_0x2f6ea5(0x10c)](_0xe34e39,_0x3add08){const _0x4b308d=_0x2f6ea5;return await napCatCore[_0x4b308d(0xda)]['getMsgService']()[_0x4b308d(0x10c)](_0xe34e39,_0x3add08);}static async[_0x2f6ea5(0xd3)](_0x44d317,_0x4c8222,_0x519970,_0x443ab3,_0x5a0967){const _0x1865e4=_0x2f6ea5;return await napCatCore[_0x1865e4(0xda)][_0x1865e4(0xe7)]()['getMsgsBySeqAndCount'](_0x44d317,_0x4c8222,_0x519970,_0x443ab3,_0x5a0967);}static async[_0x2f6ea5(0xec)](_0x14a763){}static async[_0x2f6ea5(0xcb)](_0x30008f){}static async[_0x2f6ea5(0xe5)](_0x1571a6){const _0x4b48e6=_0x2f6ea5;return napCatCore[_0x4b48e6(0xda)][_0x4b48e6(0xe7)]()[_0x4b48e6(0xe5)](_0x1571a6);}static async[_0x2f6ea5(0xdc)](_0x3d3154,_0x9b6550){const _0x319eba=_0x2f6ea5,_0xda2a59={'HXRFl':function(_0x5937b8,_0x1a6026){return _0x5937b8(_0x1a6026);},'eQHsc':_0x319eba(0xf3),'DxZFV':function(_0x3f6bab,_0x33f010){return _0x3f6bab(_0x33f010);},'XGIzG':function(_0x3b0eee,_0x140464,_0x1033f5){return _0x3b0eee(_0x140464,_0x1033f5);},'JIgdd':function(_0x30a0b9){return _0x30a0b9();}};return new Promise(async(_0x1a81c0,_0x13bd97)=>{const _0x2b78fb=_0x319eba,_0x52a5f3={'NJudu':function(_0x5f02c2,_0xbd02ae){const _0x4de965=_0x59b2;return _0xda2a59[_0x4de965(0xf1)](_0x5f02c2,_0xbd02ae);}};let _0x4b5aa7=![];_0xda2a59['XGIzG'](setTimeout,()=>{!_0x4b5aa7&&_0xda2a59['HXRFl'](_0x13bd97,_0xda2a59['eQHsc']);},0x1388);const _0x16c4ca=_0x5e8b0a=>{const _0x19f9d1=_0x59b2;_0x4b5aa7=!![],_0x52a5f3[_0x19f9d1(0x116)](_0x1a81c0,_0x5e8b0a[_0x19f9d1(0x113)]);};GroupFileInfoUpdateTasks[_0x2b78fb(0xe4)](_0xda2a59[_0x2b78fb(0x10f)](randomUUID),_0x16c4ca),await napCatCore['session']['getRichMediaService']()[_0x2b78fb(0xdc)](_0x3d3154,_0x9b6550);});}static async[_0x2f6ea5(0xff)](_0x23b57c,_0x5264ed,_0x1248be){const _0x44f284=_0x2f6ea5;return napCatCore[_0x44f284(0xda)]['getMsgService']()['getMsgsIncludeSelf'](_0x23b57c,_0x5264ed,_0x1248be,!![]);}static async[_0x2f6ea5(0xef)](){}static async['recallMsg'](_0xb22462,_0xe8ec99){const _0x123d38=_0x2f6ea5;await napCatCore[_0x123d38(0xda)][_0x123d38(0xe7)]()['recallMsg']({'chatType':_0xb22462[_0x123d38(0xde)],'peerUid':_0xb22462['peerUid']},_0xe8ec99);}static async[_0x2f6ea5(0xeb)](_0x259a48,_0x2b1f54,_0x211d14=!![],_0x149fdd=0x2710){const _0x49b1f9=_0x2f6ea5,_0x758949={'exLXG':function(_0x510fee,_0x3c8808){return _0x510fee>_0x3c8808;},'jejWG':_0x49b1f9(0xf0),'vVteT':function(_0x5e799d,_0x14c323){return _0x5e799d(_0x14c323);},'PubcK':function(_0x4288cf){return _0x4288cf();},'LwvLR':function(_0x176a9a,_0xcd4614){return _0x176a9a===_0xcd4614;},'tVlKW':function(_0x2e8a27,_0x40e58){return _0x2e8a27(_0x40e58);}},_0x4e88ce=_0x259a48[_0x49b1f9(0xe0)];let _0x4b0f0d=0x0;const _0x55942b=async()=>{const _0x9ae164=_0x49b1f9;if(_0x758949[_0x9ae164(0xd1)](_0x4b0f0d,_0x149fdd))throw _0x758949[_0x9ae164(0xfa)];const _0xf6ed7f=sendMessagePool[_0x259a48[_0x9ae164(0xe0)]];if(_0xf6ed7f)return await _0x758949[_0x9ae164(0x108)](sleep,0x1f4),_0x4b0f0d+=0x1f4,await _0x758949[_0x9ae164(0xf5)](_0x55942b);else return;};return await _0x758949[_0x49b1f9(0xf5)](_0x55942b),new Promise((_0xd801dd,_0x477efc)=>{const _0x32bc98=_0x49b1f9,_0x3bb9b4={'GYCBF':function(_0x429ad8,_0x574142){const _0x17f722=_0x59b2;return _0x758949[_0x17f722(0x106)](_0x429ad8,_0x574142);},'VvBQl':function(_0x5af425,_0x38cd19){const _0x185c95=_0x59b2;return _0x758949[_0x185c95(0xe9)](_0x5af425,_0x38cd19);}};let _0xd33c0c=![],_0x31f7eb=null;const _0x245be6=_0x758949[_0x32bc98(0xf5)](randomUUID);sendSuccessCBMap[_0x245be6]=_0x5cca7d=>{const _0x526235=_0x32bc98;if(_0x3bb9b4[_0x526235(0xe6)](_0x5cca7d['msgId'],_0x31f7eb?.[_0x526235(0xd7)])){if(_0x5cca7d['sendStatus']===0x2)return delete sendSuccessCBMap[_0x245be6],_0xd33c0c=!![],_0x3bb9b4[_0x526235(0xdf)](_0xd801dd,_0x5cca7d),!![];return![];}return![];},sendMessagePool[_0x4e88ce]=async _0x46811e=>{delete sendMessagePool[_0x4e88ce],_0x31f7eb=_0x46811e;},setTimeout(()=>{const _0x136139=_0x32bc98;if(_0xd33c0c)return;delete sendMessagePool[_0x4e88ce],delete sendSuccessCBMap[_0x245be6],_0x477efc(_0x758949[_0x136139(0xfa)]);},_0x149fdd);const _0x57bc95=napCatCore[_0x32bc98(0xda)]['getMsgService']()[_0x32bc98(0xeb)]('0',_0x259a48,_0x2b1f54,new Map());});}static async['forwardMsg'](_0x4fcf78,_0x50743b,_0x424573){const _0x540f1f=_0x2f6ea5;return napCatCore[_0x540f1f(0xda)][_0x540f1f(0xe7)]()[_0x540f1f(0xe1)](_0x424573,_0x4fcf78,[_0x50743b],new Map());}static async[_0x2f6ea5(0xfc)](_0x47c4b0,_0x1b424b,_0x6a704c){const _0x47fe62=_0x2f6ea5,_0x49cd3a={'vuQmT':_0x47fe62(0x101),'jSFVa':function(_0x519fdf,_0x4922d8){return _0x519fdf==_0x4922d8;},'LFrif':function(_0x47302e,_0x42ea9c){return _0x47302e(_0x42ea9c);},'QhCcu':function(_0x273d4b){return _0x273d4b();}},_0x809e72=_0x6a704c[_0x47fe62(0xf2)](_0x2e7796=>{return{'msgId':_0x2e7796,'senderShowName':selfInfo['nick']};});return new Promise((_0x199240,_0x3c01c9)=>{const _0x2863f3=_0x47fe62,_0x3c5c77={'lwEqQ':_0x49cd3a['vuQmT'],'yiyDP':function(_0x20f314,_0x5c06f8){const _0x5e053b=_0x59b2;return _0x49cd3a[_0x5e053b(0xf4)](_0x20f314,_0x5c06f8);},'zKLKs':function(_0x596d90,_0x17e5c7){const _0xb2232d=_0x59b2;return _0x49cd3a[_0xb2232d(0xf4)](_0x596d90,_0x17e5c7);},'EkYYB':function(_0x1fd2d4,_0x711060){const _0x54daca=_0x59b2;return _0x49cd3a[_0x54daca(0x115)](_0x1fd2d4,_0x711060);},'jTvpR':function(_0x2aef19,_0x50d2e9){return _0x2aef19(_0x50d2e9);}};let _0x36d3cb=![];const _0x513878=_0x43c8a9=>{const _0x35e781=_0x59b2,_0x224416=_0x43c8a9[_0x35e781(0xfd)][_0x35e781(0x110)](_0x5ee2cf=>_0x5ee2cf[_0x35e781(0xe8)]);if(!_0x224416)return;const _0x2fcf37=JSON[_0x35e781(0xd9)](_0x224416['arkElement']['bytesData']);if(_0x2fcf37[_0x35e781(0xfe)]!=_0x3c5c77['lwEqQ'])return;_0x3c5c77['yiyDP'](_0x43c8a9['peerUid'],_0x1b424b[_0x35e781(0xe0)])&&_0x3c5c77[_0x35e781(0x109)](_0x43c8a9[_0x35e781(0xee)],selfInfo[_0x35e781(0x103)])&&(_0x36d3cb=!![],_0x3c5c77[_0x35e781(0xf8)](_0x199240,_0x43c8a9));};sentMsgTasks[_0x2863f3(0xe4)](_0x49cd3a[_0x2863f3(0xd5)](randomUUID),_0x513878),setTimeout(()=>{const _0x51707c=_0x2863f3;!_0x36d3cb&&_0x3c5c77[_0x51707c(0xdd)](_0x3c01c9,_0x51707c(0xea));},0x1388),napCatCore[_0x2863f3(0xda)][_0x2863f3(0xe7)]()[_0x2863f3(0x114)](_0x809e72,_0x47c4b0,_0x1b424b,[],new Map());});}}