const _0x1d8e3a=_0x42b8;function _0x336b(){const _0x1c1a74=['XaRdC','dAlTS','1394056xyOCJW','activateChatAndGetHistory','getMsgsByMsgId','104936QQeiBE','Bmxwp','zCDje','sendStatus','nick','toString','20OIqeBb','getMultiMsg','session','UUQgR','68121TPaDNs','RcfiX','catch','918ltNUTE','eQAgy','arkElement','peerUid','uiLIz','bytesData','xQlal','getMsgService','onMsgInfoListUpdate','215180shIUqM','1715uJNcVx','setMsgEmojiLikes','UHFiu','440595FvYwHo','multiForwardMsg','sendMsg','length','BNWSs','chatType','160237WuQfIV','getMsgsBySeqAndCount','msgId','fetchRecentContact','getMsgHistory','senderUid','forEach','then','activateChat','转发消息超时','ZsDgz','onAddSendMsg','set','setMsgRead','recallMsg','find','发送超时','addListener','app','qUGhg','multiForwardMsgWithComment','parse','setEmojiLike','KAvZY','HOcco','getMsgsIncludeSelf','elements','pQSrL'];_0x336b=function(){return _0x1c1a74;};return _0x336b();}(function(_0x4a9d82,_0x1de8fa){const _0x385a65=_0x42b8,_0x518378=_0x4a9d82();while(!![]){try{const _0xf589f9=-parseInt(_0x385a65(0xc2))/0x1+parseInt(_0x385a65(0xc8))/0x2*(parseInt(_0x385a65(0xcc))/0x3)+parseInt(_0x385a65(0xd8))/0x4+-parseInt(_0x385a65(0xd9))/0x5*(-parseInt(_0x385a65(0xcf))/0x6)+parseInt(_0x385a65(0xa1))/0x7+-parseInt(_0x385a65(0xbf))/0x8+parseInt(_0x385a65(0x9b))/0x9;if(_0xf589f9===_0x1de8fa)break;else _0x518378['push'](_0x518378['shift']());}catch(_0x137fe2){_0x518378['push'](_0x518378['shift']());}}}(_0x336b,0x1ec2d));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';function _0x42b8(_0x10675c,_0x17cf0){const _0x336b23=_0x336b();return _0x42b8=function(_0x42b81c,_0x2f7cae){_0x42b81c=_0x42b81c-0x99;let _0x60f46f=_0x336b23[_0x42b81c];return _0x60f46f;},_0x42b8(_0x10675c,_0x17cf0);}import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x1d8e3a(0xac)]=_0x24f992=>{const _0x8bac7c=_0x1d8e3a,_0x12b078={'YrUDD':function(_0x3c8b7f,_0x171d7a){return _0x3c8b7f instanceof _0x171d7a;}};for(const [_0x54c42d,_0x126096]of sentMsgTasks){_0x126096(_0x24f992),sentMsgTasks['delete'](_0x54c42d);}if(sendMessagePool[_0x24f992[_0x8bac7c(0xd2)]]){const _0x473f01=sendMessagePool[_0x24f992[_0x8bac7c(0xd2)]]?.(_0x24f992);_0x12b078['YrUDD'](_0x473f01,Promise)&&_0x473f01[_0x8bac7c(0xa8)]()[_0x8bac7c(0xce)](logError);}},msgListener[_0x1d8e3a(0xd7)]=_0x4451be=>{const _0x12e6f3=_0x1d8e3a;_0x4451be[_0x12e6f3(0xa7)](_0x448870=>{const _0x4cb279=_0x12e6f3,_0x294f4f={'KAvZY':function(_0x5c6dae,_0xc3ed87){return _0x5c6dae instanceof _0xc3ed87;}};new Promise((_0x2058c6,_0x4eb18a)=>{const _0x513bfa=_0x42b8;for(const _0x114d93 in sendSuccessCBMap){const _0x3bdd0c=sendSuccessCBMap[_0x114d93],_0x2018c0=_0x3bdd0c(_0x448870),_0x107dc6=_0x11d914=>{_0x11d914&&delete sendSuccessCBMap[_0x114d93];};_0x294f4f[_0x513bfa(0xb8)](_0x2018c0,Promise)?_0x2018c0[_0x513bfa(0xa8)](_0x107dc6):_0x107dc6(_0x2018c0);}})[_0x4cb279(0xa8)]()['catch'](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x250719=_0x42b8;napCatCore[_0x250719(0xb2)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x1d8e3a(0xb7)](_0x3183b2,_0x4d2af5,_0x597ef2,_0x1298b1=!![]){const _0x4d905e=_0x1d8e3a,_0x58cdd9={'zCDje':function(_0x277e2d,_0xe602f){return _0x277e2d>_0xe602f;}};return _0x597ef2=_0x597ef2[_0x4d905e(0xc7)](),napCatCore['session'][_0x4d905e(0xd6)]()[_0x4d905e(0x99)](_0x3183b2,_0x4d2af5,_0x597ef2,_0x58cdd9[_0x4d905e(0xc4)](_0x597ef2[_0x4d905e(0x9e)],0x3)?'2':'1',_0x1298b1);}static async[_0x1d8e3a(0xc9)](_0x40a7fd,_0x112524,_0x5645fb){const _0x21c5b0=_0x1d8e3a;return napCatCore[_0x21c5b0(0xca)][_0x21c5b0(0xd6)]()['getMultiMsg'](_0x40a7fd,_0x112524,_0x5645fb);}static async[_0x1d8e3a(0xc1)](_0xf9132a,_0x59083f){const _0x3b20ab=_0x1d8e3a;return await napCatCore[_0x3b20ab(0xca)][_0x3b20ab(0xd6)]()[_0x3b20ab(0xc1)](_0xf9132a,_0x59083f);}static async[_0x1d8e3a(0xa2)](_0x11a571,_0x49a7b7,_0x11a327,_0x1259d7,_0x5a7a50){const _0x3ea1aa=_0x1d8e3a;return await napCatCore[_0x3ea1aa(0xca)]['getMsgService']()[_0x3ea1aa(0xa2)](_0x11a571,_0x49a7b7,_0x11a327,_0x1259d7,_0x5a7a50);}static async[_0x1d8e3a(0xa9)](_0x41e57b){}static async[_0x1d8e3a(0xc0)](_0x2a6448){}static async[_0x1d8e3a(0xae)](_0x57fded){const _0x308263=_0x1d8e3a;return napCatCore[_0x308263(0xca)]['getMsgService']()[_0x308263(0xae)](_0x57fded);}static async[_0x1d8e3a(0xa5)](_0x235b3c,_0x4aa627,_0x24a2a1){const _0x2c1ebc=_0x1d8e3a;return napCatCore[_0x2c1ebc(0xca)][_0x2c1ebc(0xd6)]()[_0x2c1ebc(0xba)](_0x235b3c,_0x4aa627,_0x24a2a1,!![]);}static async[_0x1d8e3a(0xa4)](){}static async[_0x1d8e3a(0xaf)](_0x3b81f5,_0x5aacb1){const _0x3121d4=_0x1d8e3a;await napCatCore[_0x3121d4(0xca)]['getMsgService']()[_0x3121d4(0xaf)]({'chatType':_0x3b81f5[_0x3121d4(0xa0)],'peerUid':_0x3b81f5[_0x3121d4(0xd2)]},_0x5aacb1);}static async[_0x1d8e3a(0x9d)](_0x236992,_0x1b8db1,_0x443239=!![],_0x53b9fe=0x2710){const _0x3794e8=_0x1d8e3a,_0x1349d8={'BNWSs':function(_0x28d617,_0x213a02){return _0x28d617>_0x213a02;},'eQAgy':_0x3794e8(0xb1),'ZsDgz':function(_0x1e0c9d,_0x25f91c){return _0x1e0c9d(_0x25f91c);},'uiLIz':function(_0x2ccd0e){return _0x2ccd0e();},'xQlal':function(_0x4570c1,_0x52c577){return _0x4570c1===_0x52c577;},'UUQgR':function(_0x5b0e47,_0x4a4271){return _0x5b0e47(_0x4a4271);},'pQSrL':function(_0x5e8ef4){return _0x5e8ef4();},'RcfiX':function(_0x2452ba){return _0x2452ba();}},_0xca2fac=_0x236992['peerUid'];let _0x33c852=0x0;const _0x5bef5d=async()=>{const _0x3672b1=_0x3794e8;if(_0x1349d8[_0x3672b1(0x9f)](_0x33c852,_0x53b9fe))throw _0x1349d8[_0x3672b1(0xd0)];const _0x179b82=sendMessagePool[_0x236992[_0x3672b1(0xd2)]];if(_0x179b82)return await _0x1349d8[_0x3672b1(0xab)](sleep,0x1f4),_0x33c852+=0x1f4,await _0x1349d8[_0x3672b1(0xd3)](_0x5bef5d);else return;};return await _0x1349d8[_0x3794e8(0xcd)](_0x5bef5d),new Promise((_0x2ad2ba,_0x48d6d3)=>{const _0x81680=_0x3794e8;let _0x57e66f=![],_0x530a4a=null;const _0x4acccd=_0x1349d8[_0x81680(0xbc)](randomUUID);sendSuccessCBMap[_0x4acccd]=_0x55f12c=>{const _0xa6e7c5=_0x81680;if(_0x55f12c[_0xa6e7c5(0xa3)]===_0x530a4a?.['msgId']){if(_0x1349d8[_0xa6e7c5(0xd5)](_0x55f12c[_0xa6e7c5(0xc5)],0x2))return delete sendSuccessCBMap[_0x4acccd],_0x57e66f=!![],_0x1349d8[_0xa6e7c5(0xab)](_0x2ad2ba,_0x55f12c),!![];return![];}return![];},sendMessagePool[_0xca2fac]=async _0x22d48e=>{delete sendMessagePool[_0xca2fac],_0x530a4a=_0x22d48e;},setTimeout(()=>{const _0x23b54e=_0x81680;if(_0x57e66f)return;delete sendMessagePool[_0xca2fac],delete sendSuccessCBMap[_0x4acccd],_0x1349d8[_0x23b54e(0xcb)](_0x48d6d3,_0x1349d8[_0x23b54e(0xd0)]);},_0x53b9fe);const _0x2d58ee=napCatCore[_0x81680(0xca)][_0x81680(0xd6)]()[_0x81680(0x9d)]('0',_0x236992,_0x1b8db1,new Map());});}static async['forwardMsg'](_0x4c8b79,_0x2a4319,_0x2df023){const _0x2e58ba=_0x1d8e3a;return napCatCore[_0x2e58ba(0xca)][_0x2e58ba(0xd6)]()['forwardMsg'](_0x2df023,_0x4c8b79,[_0x2a4319],new Map());}static async[_0x1d8e3a(0x9c)](_0x3d4d3b,_0x349e0b,_0x287012){const _0x5d90b4=_0x1d8e3a,_0x1b7505={'XaRdC':function(_0x346409,_0x560b6b){return _0x346409!=_0x560b6b;},'lXwcu':function(_0x2623f2,_0x5e4c81){return _0x2623f2==_0x5e4c81;},'HOcco':function(_0x295f86,_0x3153f5){return _0x295f86(_0x3153f5);},'Bmxwp':_0x5d90b4(0xaa),'dAlTS':function(_0x135e74,_0x4dd1a9,_0x41d4a0){return _0x135e74(_0x4dd1a9,_0x41d4a0);}},_0x434252=_0x287012['map'](_0x24b888=>{const _0x19cd4=_0x5d90b4;return{'msgId':_0x24b888,'senderShowName':selfInfo[_0x19cd4(0xc6)]};});return new Promise((_0x2a005e,_0x5ac8bb)=>{const _0x10dca4=_0x5d90b4,_0x2fe398={'UHFiu':function(_0x1ee43f,_0x37ed){const _0xa53e44=_0x42b8;return _0x1b7505[_0xa53e44(0xb9)](_0x1ee43f,_0x37ed);},'qUGhg':_0x1b7505[_0x10dca4(0xc3)]};let _0xf0de83=![];const _0x7cdcb3=_0x4ea27b=>{const _0x1e65a8=_0x10dca4,_0x461a95=_0x4ea27b[_0x1e65a8(0xbb)][_0x1e65a8(0xb0)](_0x46c3fa=>_0x46c3fa[_0x1e65a8(0xd1)]);if(!_0x461a95)return;const _0x29023a=JSON[_0x1e65a8(0xb6)](_0x461a95[_0x1e65a8(0xd1)][_0x1e65a8(0xd4)]);if(_0x1b7505[_0x1e65a8(0xbd)](_0x29023a[_0x1e65a8(0xb3)],'com.tencent.multimsg'))return;_0x1b7505['lXwcu'](_0x4ea27b['peerUid'],_0x349e0b['peerUid'])&&_0x4ea27b[_0x1e65a8(0xa6)]==selfInfo['uid']&&(_0xf0de83=!![],_0x1b7505[_0x1e65a8(0xb9)](_0x2a005e,_0x4ea27b));};sentMsgTasks[_0x10dca4(0xad)](randomUUID(),_0x7cdcb3),_0x1b7505[_0x10dca4(0xbe)](setTimeout,()=>{const _0x1863a4=_0x10dca4;!_0xf0de83&&_0x2fe398[_0x1863a4(0x9a)](_0x5ac8bb,_0x2fe398[_0x1863a4(0xb4)]);},0x1388),napCatCore[_0x10dca4(0xca)]['getMsgService']()[_0x10dca4(0xb5)](_0x434252,_0x3d4d3b,_0x349e0b,[],new Map());});}}