const _0x1da4cc=_0x570d;(function(_0x5e8591,_0x28f3c0){const _0x86d82=_0x570d,_0x2550b0=_0x5e8591();while(!![]){try{const _0x4dac6f=parseInt(_0x86d82(0xce))/0x1*(-parseInt(_0x86d82(0xaf))/0x2)+parseInt(_0x86d82(0xe8))/0x3+parseInt(_0x86d82(0xf3))/0x4+parseInt(_0x86d82(0xee))/0x5*(parseInt(_0x86d82(0xd7))/0x6)+-parseInt(_0x86d82(0xae))/0x7*(-parseInt(_0x86d82(0xd1))/0x8)+parseInt(_0x86d82(0xe0))/0x9*(parseInt(_0x86d82(0xf7))/0xa)+-parseInt(_0x86d82(0xbd))/0xb*(parseInt(_0x86d82(0xcc))/0xc);if(_0x4dac6f===_0x28f3c0)break;else _0x2550b0['push'](_0x2550b0['shift']());}catch(_0x25cb27){_0x2550b0['push'](_0x2550b0['shift']());}}}(_0x1c8c,0xb475f));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';function _0x1c8c(){const _0x31cf40=['3744020rPafUK','uPuwU','delete','cvmVE','27050sjcJka','iwLZC','GxvjP','77EMUfIz','7386rofyZF','转发消息超时','getGroupFileList','setMsgRead','doUzy','getMsgsBySeqAndCount','getMultiMsg','EAcIL','qlEyd','YbDsG','AlJbk','发送超时','iDcwI','catch','36462602dSirHF','sendStatus','EeXdg','multiForwardMsgWithComment','onMsgInfoListUpdate','senderUid','MiEYI','activateChat','session','find','length','bytesData','XthhC','parse','gXEFx','12RIrdPA','nick','127HpJjxX','oxGZT','activateChatAndGetHistory','328096RPXskT','onLoginSuccess','getMsgService','getRichMediaService','then','multiForwardMsg','2916dPUYdf','com.tencent.multimsg','KapZf','chatType','app','map','recallMsg','QhpXG','ERQFD','4410BVBhaZ','sendMsg','forwardMsg','GNpsa','PmsRG','arkElement','elements','TZahk','2303709jpreeV','peerUid','OPVdL','getMsgsByMsgId','onAddSendMsg','toString','10725cAilqF','forEach','set','getMsgsIncludeSelf','uzDUI'];_0x1c8c=function(){return _0x31cf40;};return _0x1c8c();}import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';function _0x570d(_0x437f45,_0x5567a4){const _0x1c8c5d=_0x1c8c();return _0x570d=function(_0x570dde,_0x396009){_0x570dde=_0x570dde-0xad;let _0x352cf0=_0x1c8c5d[_0x570dde];return _0x352cf0;},_0x570d(_0x437f45,_0x5567a4);}import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onGroupFileInfoUpdate']=_0x3e075f=>{const _0x1adb7b=_0x570d,_0x38d8c0={'uzDUI':function(_0x247c01,_0x4da9b7){return _0x247c01(_0x4da9b7);}};for(const [_0x143ef7,_0xc2f100]of GroupFileInfoUpdateTasks){_0x38d8c0[_0x1adb7b(0xf2)](_0xc2f100,_0x3e075f),GroupFileInfoUpdateTasks[_0x1adb7b(0xf5)](_0x143ef7);}},msgListener[_0x1da4cc(0xec)]=_0x413992=>{const _0x4f32d3=_0x1da4cc,_0x1acd7c={'ERQFD':function(_0x33c271,_0x4325fa){return _0x33c271 instanceof _0x4325fa;}};for(const [_0x44fa4d,_0x9b47e9]of sentMsgTasks){_0x9b47e9(_0x413992),sentMsgTasks[_0x4f32d3(0xf5)](_0x44fa4d);}if(sendMessagePool[_0x413992[_0x4f32d3(0xe9)]]){const _0x4eb0f4=sendMessagePool[_0x413992[_0x4f32d3(0xe9)]]?.(_0x413992);_0x1acd7c[_0x4f32d3(0xdf)](_0x4eb0f4,Promise)&&_0x4eb0f4[_0x4f32d3(0xd5)]()[_0x4f32d3(0xbc)](logError);}},msgListener[_0x1da4cc(0xc1)]=_0x4dc0b6=>{const _0x51302a=_0x1da4cc,_0x37969c={'EeXdg':function(_0x249f0f,_0x52c244){return _0x249f0f(_0x52c244);},'KapZf':function(_0x3e2967,_0x51d592){return _0x3e2967(_0x51d592);}};_0x4dc0b6[_0x51302a(0xef)](_0x59bab4=>{const _0x44b657=_0x51302a;new Promise((_0x378e60,_0x321a13)=>{const _0x3463ad=_0x570d;for(const _0x39957a in sendSuccessCBMap){const _0x3ee94f=sendSuccessCBMap[_0x39957a],_0x20766c=_0x37969c[_0x3463ad(0xbf)](_0x3ee94f,_0x59bab4),_0x3c4997=_0x1cd190=>{_0x1cd190&&delete sendSuccessCBMap[_0x39957a];};_0x20766c instanceof Promise?_0x20766c['then'](_0x3c4997):_0x37969c[_0x3463ad(0xd9)](_0x3c4997,_0x20766c);}})[_0x44b657(0xd5)]()['catch'](log);});},setTimeout(()=>{const _0x3ea0f9=_0x1da4cc;napCatCore[_0x3ea0f9(0xd2)](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async['setEmojiLike'](_0x2e5a37,_0x13caea,_0xd39a21,_0x4b1a58=!![]){const _0x323ac4=_0x1da4cc,_0x3460fc={'QhpXG':function(_0x396b72,_0x110d1e){return _0x396b72>_0x110d1e;}};return _0xd39a21=_0xd39a21[_0x323ac4(0xed)](),napCatCore['session']['getMsgService']()['setMsgEmojiLikes'](_0x2e5a37,_0x13caea,_0xd39a21,_0x3460fc[_0x323ac4(0xde)](_0xd39a21[_0x323ac4(0xc7)],0x3)?'2':'1',_0x4b1a58);}static async[_0x1da4cc(0xb5)](_0xba05d6,_0x4e79b4,_0x5a9091){const _0x5dd9ec=_0x1da4cc;return napCatCore[_0x5dd9ec(0xc5)][_0x5dd9ec(0xd3)]()[_0x5dd9ec(0xb5)](_0xba05d6,_0x4e79b4,_0x5a9091);}static async[_0x1da4cc(0xeb)](_0x3dd5b9,_0x27d50c){const _0x3448e2=_0x1da4cc;return await napCatCore[_0x3448e2(0xc5)][_0x3448e2(0xd3)]()[_0x3448e2(0xeb)](_0x3dd5b9,_0x27d50c);}static async[_0x1da4cc(0xb4)](_0x2ff39f,_0x3229fc,_0xb07bf1,_0x496554,_0x1b80d6){const _0xda3ede=_0x1da4cc;return await napCatCore[_0xda3ede(0xc5)][_0xda3ede(0xd3)]()[_0xda3ede(0xb4)](_0x2ff39f,_0x3229fc,_0xb07bf1,_0x496554,_0x1b80d6);}static async[_0x1da4cc(0xc4)](_0x2c48f4){}static async[_0x1da4cc(0xd0)](_0x5429f1){}static async[_0x1da4cc(0xb2)](_0x5e9714){const _0x2d53cb=_0x1da4cc;return napCatCore[_0x2d53cb(0xc5)][_0x2d53cb(0xd3)]()[_0x2d53cb(0xb2)](_0x5e9714);}static async[_0x1da4cc(0xb1)](_0x384590,_0x222bb7){const _0x224a87={'GxvjP':function(_0x228939,_0x13203a){return _0x228939(_0x13203a);},'aBtFI':function(_0x47213b,_0x52c01d,_0x18269e){return _0x47213b(_0x52c01d,_0x18269e);},'TkfZK':function(_0x568783){return _0x568783();}};return new Promise(async(_0x36f85d,_0x3fd6de)=>{const _0x157bdd=_0x570d,_0x55fbd3={'cvmVE':function(_0x8439f0,_0x4b9c0e){const _0x4d10e5=_0x570d;return _0x224a87[_0x4d10e5(0xad)](_0x8439f0,_0x4b9c0e);}};let _0x4506f1=![];_0x224a87['aBtFI'](setTimeout,()=>{const _0x5e70c1=_0x570d;!_0x4506f1&&_0x55fbd3[_0x5e70c1(0xf6)](_0x3fd6de,'获取群文件列表超时');},0x1388);const _0x172bcb=_0x4f111b=>{_0x4506f1=!![],_0x36f85d(_0x4f111b['item']);};GroupFileInfoUpdateTasks['set'](_0x224a87['TkfZK'](randomUUID),_0x172bcb),await napCatCore[_0x157bdd(0xc5)][_0x157bdd(0xd4)]()[_0x157bdd(0xb1)](_0x384590,_0x222bb7);});}static async['getMsgHistory'](_0x51763e,_0x44ba0b,_0x2e004c){const _0x2560d5=_0x1da4cc;return napCatCore[_0x2560d5(0xc5)][_0x2560d5(0xd3)]()[_0x2560d5(0xf1)](_0x51763e,_0x44ba0b,_0x2e004c,!![]);}static async['fetchRecentContact'](){}static async[_0x1da4cc(0xdd)](_0x3b7f62,_0x1a909f){const _0x489068=_0x1da4cc;await napCatCore[_0x489068(0xc5)][_0x489068(0xd3)]()[_0x489068(0xdd)]({'chatType':_0x3b7f62[_0x489068(0xda)],'peerUid':_0x3b7f62['peerUid']},_0x1a909f);}static async[_0x1da4cc(0xe1)](_0x4fe21b,_0x5b92e5,_0x29b4d8=!![],_0x54f503=0x2710){const _0x2f1bab=_0x1da4cc,_0x449777={'YbDsG':function(_0x1f7e8f,_0x4e06e6){return _0x1f7e8f>_0x4e06e6;},'PmsRG':function(_0x18acba,_0x4414d4){return _0x18acba(_0x4414d4);},'iDcwI':function(_0x38cd6b){return _0x38cd6b();},'MiEYI':'发送超时','qlEyd':function(_0x20659e){return _0x20659e();},'AlJbk':function(_0x30961b,_0x10fadf,_0x2ca252){return _0x30961b(_0x10fadf,_0x2ca252);}},_0x31ff1d=_0x4fe21b[_0x2f1bab(0xe9)];let _0x4a3936=0x0;const _0xc66118=async()=>{const _0x2f012d=_0x2f1bab;if(_0x449777[_0x2f012d(0xb8)](_0x4a3936,_0x54f503))throw _0x2f012d(0xba);const _0x2a6ccd=sendMessagePool[_0x4fe21b[_0x2f012d(0xe9)]];if(_0x2a6ccd)return await _0x449777['PmsRG'](sleep,0x1f4),_0x4a3936+=0x1f4,await _0x449777[_0x2f012d(0xbb)](_0xc66118);else return;};return await _0x449777['iDcwI'](_0xc66118),new Promise((_0x14a404,_0x51dd74)=>{const _0x460da8=_0x2f1bab,_0x5ce13e={'doUzy':function(_0x1b88cc,_0x52c0fd){return _0x1b88cc===_0x52c0fd;},'XthhC':function(_0x38971e,_0x3d0e03){const _0x2a3baa=_0x570d;return _0x449777[_0x2a3baa(0xe4)](_0x38971e,_0x3d0e03);}};let _0x5ca589=![],_0x21297e=null;const _0x718717=_0x449777[_0x460da8(0xb7)](randomUUID);sendSuccessCBMap[_0x718717]=_0x14af23=>{const _0x532c15=_0x460da8;if(_0x5ce13e[_0x532c15(0xb3)](_0x14af23['msgId'],_0x21297e?.['msgId'])){if(_0x14af23[_0x532c15(0xbe)]===0x2)return delete sendSuccessCBMap[_0x718717],_0x5ca589=!![],_0x5ce13e[_0x532c15(0xc9)](_0x14a404,_0x14af23),!![];return![];}return![];},sendMessagePool[_0x31ff1d]=async _0x36a4da=>{delete sendMessagePool[_0x31ff1d],_0x21297e=_0x36a4da;},_0x449777[_0x460da8(0xb9)](setTimeout,()=>{const _0x3ce5e8=_0x460da8;if(_0x5ca589)return;delete sendMessagePool[_0x31ff1d],delete sendSuccessCBMap[_0x718717],_0x449777[_0x3ce5e8(0xe4)](_0x51dd74,_0x449777[_0x3ce5e8(0xc3)]);},_0x54f503);const _0xa5e072=napCatCore[_0x460da8(0xc5)][_0x460da8(0xd3)]()['sendMsg']('0',_0x4fe21b,_0x5b92e5,new Map());});}static async[_0x1da4cc(0xe2)](_0x2e87bc,_0x11c10f,_0x52e456){const _0x5669db=_0x1da4cc;return napCatCore[_0x5669db(0xc5)][_0x5669db(0xd3)]()[_0x5669db(0xe2)](_0x52e456,_0x2e87bc,[_0x11c10f],new Map());}static async[_0x1da4cc(0xd6)](_0x23c3c,_0x3ec460,_0x4a364c){const _0x5dc39c=_0x1da4cc,_0x5312d5={'oxGZT':function(_0x3e0fd4,_0xa6bc71){return _0x3e0fd4(_0xa6bc71);},'OPVdL':_0x5dc39c(0xb0),'GNpsa':function(_0x693d45,_0x5a999e){return _0x693d45!=_0x5a999e;},'EAcIL':_0x5dc39c(0xd8),'uPuwU':function(_0x11ce67,_0x41234f){return _0x11ce67==_0x41234f;},'TZahk':function(_0x1f94a1){return _0x1f94a1();},'RcOcS':function(_0x569b4c,_0x3540e6,_0x2e81dc){return _0x569b4c(_0x3540e6,_0x2e81dc);}},_0x242067=_0x4a364c[_0x5dc39c(0xdc)](_0x24e007=>{const _0x1e5e47=_0x5dc39c;return{'msgId':_0x24e007,'senderShowName':selfInfo[_0x1e5e47(0xcd)]};});return new Promise((_0x3dc313,_0x1a5963)=>{const _0x3f3582=_0x5dc39c,_0x155340={'gXEFx':function(_0x26e0bb,_0x3f76f7){const _0x1eca32=_0x570d;return _0x5312d5[_0x1eca32(0xe3)](_0x26e0bb,_0x3f76f7);},'gkUnE':_0x5312d5[_0x3f3582(0xb6)],'iwLZC':function(_0x49f532,_0x56f5e9){const _0xc5060=_0x3f3582;return _0x5312d5[_0xc5060(0xf4)](_0x49f532,_0x56f5e9);}};let _0x523cb1=![];const _0x4d9d32=_0x180bf0=>{const _0x1dc173=_0x3f3582,_0x18e035=_0x180bf0[_0x1dc173(0xe6)][_0x1dc173(0xc6)](_0x2ad326=>_0x2ad326[_0x1dc173(0xe5)]);if(!_0x18e035)return;const _0x363e1f=JSON[_0x1dc173(0xca)](_0x18e035[_0x1dc173(0xe5)][_0x1dc173(0xc8)]);if(_0x155340[_0x1dc173(0xcb)](_0x363e1f[_0x1dc173(0xdb)],_0x155340['gkUnE']))return;_0x180bf0[_0x1dc173(0xe9)]==_0x3ec460['peerUid']&&_0x155340[_0x1dc173(0xf8)](_0x180bf0[_0x1dc173(0xc2)],selfInfo['uid'])&&(_0x523cb1=!![],_0x3dc313(_0x180bf0));};sentMsgTasks[_0x3f3582(0xf0)](_0x5312d5[_0x3f3582(0xe7)](randomUUID),_0x4d9d32),_0x5312d5['RcOcS'](setTimeout,()=>{const _0x306b97=_0x3f3582;!_0x523cb1&&_0x5312d5[_0x306b97(0xcf)](_0x1a5963,_0x5312d5[_0x306b97(0xea)]);},0x1388),napCatCore[_0x3f3582(0xc5)][_0x3f3582(0xd3)]()[_0x3f3582(0xc0)](_0x242067,_0x23c3c,_0x3ec460,[],new Map());});}}