const _0xa8bfde=_0x48d3;(function(_0x376f86,_0x4c61f0){const _0x23d9d1=_0x48d3,_0x16aea6=_0x376f86();while(!![]){try{const _0x55f6bb=parseInt(_0x23d9d1(0xbf))/0x1*(-parseInt(_0x23d9d1(0xb8))/0x2)+parseInt(_0x23d9d1(0xb7))/0x3*(-parseInt(_0x23d9d1(0x8c))/0x4)+-parseInt(_0x23d9d1(0x9d))/0x5+parseInt(_0x23d9d1(0xa6))/0x6+-parseInt(_0x23d9d1(0xa9))/0x7*(-parseInt(_0x23d9d1(0x92))/0x8)+-parseInt(_0x23d9d1(0xb0))/0x9*(-parseInt(_0x23d9d1(0xa7))/0xa)+parseInt(_0x23d9d1(0xb3))/0xb;if(_0x55f6bb===_0x4c61f0)break;else _0x16aea6['push'](_0x16aea6['shift']());}catch(_0x1ac8fc){_0x16aea6['push'](_0x16aea6['shift']());}}}(_0xf9ee,0x4169a));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x48d3(_0x5e3332,_0x802e11){const _0xf9ee1d=_0xf9ee();return _0x48d3=function(_0x48d37e,_0xacfe7){_0x48d37e=_0x48d37e-0x89;let _0x12c247=_0xf9ee1d[_0x48d37e];return _0x12c247;},_0x48d3(_0x5e3332,_0x802e11);}const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();function _0xf9ee(){const _0x29affd=['getMsgsIncludeSelf','set','bytesData','arkElement','multiForwardMsg','PuiGU','session','LvQmt','activateChat','uvmHX','recallMsg','catch','741864VNtKPr','then','VqjvP','setEmojiLike','elements','发送超时','24xQHlvK','rkcFz','delete','jCSJl','getMultiMsg','getMsgsBySeqAndCount','jJfEP','forwardMsg','setMsgRead','com.tencent.multimsg','uid','1816400MqMfTN','senderUid','forEach','length','setMsgEmojiLikes','enFsK','parse','msgId','转发消息超时','993516GeqgRU','5240fqJiUv','jENEI','409171XXVpFK','onAddSendMsg','onLoginSuccess','find','ILbmi','chatType','toString','6606FSqAyc','snNBZ','fetchRecentContact','5236715afkONG','peerUid','getMsgHistory','app','3viuEzR','10sAkLtR','getMsgService','sendMsg','map','onMsgInfoListUpdate','addListener','getMsgsByMsgId','76990FQRfSP'];_0xf9ee=function(){return _0x29affd;};return _0xf9ee();}msgListener[_0xa8bfde(0xaa)]=_0x3831fd=>{const _0x4b51c4=_0xa8bfde,_0x5ca637={'jCSJl':function(_0x3f241f,_0x3005f8){return _0x3f241f(_0x3005f8);}};for(const [_0x344d7c,_0x46bdd4]of sentMsgTasks){_0x5ca637[_0x4b51c4(0x95)](_0x46bdd4,_0x3831fd),sentMsgTasks[_0x4b51c4(0x94)](_0x344d7c);}if(sendMessagePool[_0x3831fd['peerUid']]){const _0x4dc0a7=sendMessagePool[_0x3831fd[_0x4b51c4(0xb4)]]?.(_0x3831fd);_0x4dc0a7 instanceof Promise&&_0x4dc0a7[_0x4b51c4(0x8d)]()[_0x4b51c4(0x8b)](logError);}},msgListener[_0xa8bfde(0xbc)]=_0x460980=>{const _0x11332a=_0xa8bfde,_0x2fdc43={'PuiGU':function(_0x568864,_0x423496){return _0x568864(_0x423496);},'ILbmi':function(_0x45da90,_0x12a6ae){return _0x45da90 instanceof _0x12a6ae;}};_0x460980[_0x11332a(0x9f)](_0x30ebc0=>{const _0x4f2842=_0x11332a;new Promise((_0x3d497a,_0x5e3533)=>{const _0x20a79d=_0x48d3;for(const _0x507c03 in sendSuccessCBMap){const _0x3332d7=sendSuccessCBMap[_0x507c03],_0x319a70=_0x2fdc43[_0x20a79d(0xc5)](_0x3332d7,_0x30ebc0),_0x22bbe9=_0x3b6547=>{_0x3b6547&&delete sendSuccessCBMap[_0x507c03];};_0x2fdc43[_0x20a79d(0xad)](_0x319a70,Promise)?_0x319a70['then'](_0x22bbe9):_0x2fdc43[_0x20a79d(0xc5)](_0x22bbe9,_0x319a70);}})[_0x4f2842(0x8d)]()[_0x4f2842(0x8b)](log);});},setTimeout(()=>{const _0x56d41d=_0xa8bfde;napCatCore[_0x56d41d(0xab)](()=>{const _0x5b9e5c=_0x56d41d;napCatCore[_0x5b9e5c(0xbd)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0xa8bfde(0x8f)](_0x5a6e5c,_0x5b926b,_0x5ee32e,_0x21be41=!![]){const _0x57efde=_0xa8bfde,_0x25bc6c={'snNBZ':function(_0x33e720,_0x46ab42){return _0x33e720>_0x46ab42;}};return _0x5ee32e=_0x5ee32e[_0x57efde(0xaf)](),napCatCore[_0x57efde(0xc6)]['getMsgService']()[_0x57efde(0xa1)](_0x5a6e5c,_0x5b926b,_0x5ee32e,_0x25bc6c[_0x57efde(0xb1)](_0x5ee32e[_0x57efde(0xa0)],0x3)?'2':'1',_0x21be41);}static async[_0xa8bfde(0x96)](_0x1be310,_0x42ce26,_0x22f8d3){const _0x30ed8f=_0xa8bfde;return napCatCore[_0x30ed8f(0xc6)][_0x30ed8f(0xb9)]()[_0x30ed8f(0x96)](_0x1be310,_0x42ce26,_0x22f8d3);}static async[_0xa8bfde(0xbe)](_0xa52cce,_0x26599f){const _0x2c17b1=_0xa8bfde;return await napCatCore[_0x2c17b1(0xc6)]['getMsgService']()[_0x2c17b1(0xbe)](_0xa52cce,_0x26599f);}static async[_0xa8bfde(0x97)](_0x349ee0,_0x4cf6d1,_0xb4be28,_0x2a0422,_0x42b64f){const _0x504828=_0xa8bfde;return await napCatCore[_0x504828(0xc6)][_0x504828(0xb9)]()[_0x504828(0x97)](_0x349ee0,_0x4cf6d1,_0xb4be28,_0x2a0422,_0x42b64f);}static async[_0xa8bfde(0xc8)](_0xd9d649){}static async['activateChatAndGetHistory'](_0x30cd87){}static async[_0xa8bfde(0x9a)](_0x72e9a5){const _0x2ce400=_0xa8bfde;return napCatCore[_0x2ce400(0xc6)][_0x2ce400(0xb9)]()['setMsgRead'](_0x72e9a5);}static async[_0xa8bfde(0xb5)](_0x3f3525,_0x2b3eaf,_0x5dfe9f){const _0x203667=_0xa8bfde;return napCatCore[_0x203667(0xc6)][_0x203667(0xb9)]()[_0x203667(0xc0)](_0x3f3525,_0x2b3eaf,_0x5dfe9f,!![]);}static async[_0xa8bfde(0xb2)](){}static async['recallMsg'](_0x2fd277,_0x35eef8){const _0x5e12ea=_0xa8bfde;await napCatCore[_0x5e12ea(0xc6)]['getMsgService']()[_0x5e12ea(0x8a)]({'chatType':_0x2fd277[_0x5e12ea(0xae)],'peerUid':_0x2fd277[_0x5e12ea(0xb4)]},_0x35eef8);}static async[_0xa8bfde(0xba)](_0x36ccc1,_0x4f7dc7,_0x387014=!![],_0x3f5eee=0x2710){const _0x36914c=_0xa8bfde,_0x32cb66={'tXKgP':function(_0x3214b7,_0x29e236){return _0x3214b7>_0x29e236;},'enFsK':_0x36914c(0x91),'QfoBj':function(_0x1cc4db,_0x2fadbd){return _0x1cc4db(_0x2fadbd);},'rkcFz':function(_0x3d22c4){return _0x3d22c4();},'VqjvP':function(_0xf478ac,_0x5465d3){return _0xf478ac(_0x5465d3);},'uvmHX':function(_0x44f8c2){return _0x44f8c2();},'jENEI':function(_0x2a77f,_0x25012e,_0x2d2617){return _0x2a77f(_0x25012e,_0x2d2617);}},_0xd9af1=_0x36ccc1['peerUid'];let _0xe0343d=0x0;const _0x2c2c82=async()=>{const _0x20f183=_0x36914c;if(_0x32cb66['tXKgP'](_0xe0343d,_0x3f5eee))throw _0x32cb66[_0x20f183(0xa2)];const _0x416c74=sendMessagePool[_0x36ccc1[_0x20f183(0xb4)]];if(_0x416c74)return await _0x32cb66['QfoBj'](sleep,0x1f4),_0xe0343d+=0x1f4,await _0x32cb66[_0x20f183(0x93)](_0x2c2c82);else return;};return await _0x32cb66[_0x36914c(0x93)](_0x2c2c82),new Promise((_0xa0804d,_0x55c564)=>{const _0x30b259=_0x36914c,_0x372b44={'cyqQA':function(_0xef6b1,_0x336104){return _0xef6b1===_0x336104;}};let _0x3edec7=![],_0x4b57ea=null;const _0x25d4a7=_0x32cb66[_0x30b259(0x89)](randomUUID);sendSuccessCBMap[_0x25d4a7]=_0x53fc12=>{const _0x29f6a2=_0x30b259;if(_0x372b44['cyqQA'](_0x53fc12[_0x29f6a2(0xa4)],_0x4b57ea?.[_0x29f6a2(0xa4)])){if(_0x53fc12['sendStatus']===0x2)return delete sendSuccessCBMap[_0x25d4a7],_0x3edec7=!![],_0xa0804d(_0x53fc12),!![];return![];}return![];},sendMessagePool[_0xd9af1]=async _0x4815ad=>{delete sendMessagePool[_0xd9af1],_0x4b57ea=_0x4815ad;},_0x32cb66[_0x30b259(0xa8)](setTimeout,()=>{const _0xfb1a7e=_0x30b259;if(_0x3edec7)return;delete sendMessagePool[_0xd9af1],delete sendSuccessCBMap[_0x25d4a7],_0x32cb66[_0xfb1a7e(0x8e)](_0x55c564,_0xfb1a7e(0x91));},_0x3f5eee);const _0x77c569=napCatCore[_0x30b259(0xc6)][_0x30b259(0xb9)]()[_0x30b259(0xba)]('0',_0x36ccc1,_0x4f7dc7,new Map());});}static async[_0xa8bfde(0x99)](_0x1a9614,_0xb455e,_0x102b18){const _0x334cf7=_0xa8bfde;return napCatCore[_0x334cf7(0xc6)]['getMsgService']()[_0x334cf7(0x99)](_0x102b18,_0x1a9614,[_0xb455e],new Map());}static async[_0xa8bfde(0xc4)](_0xf64368,_0x451afe,_0x1a18f4){const _0x3cb666=_0xa8bfde,_0x3caa28={'jJfEP':function(_0x416650,_0x308a19){return _0x416650==_0x308a19;},'LbWIQ':function(_0x5b016a,_0x574ad0){return _0x5b016a(_0x574ad0);},'LvQmt':_0x3cb666(0xa5)},_0x2bfea5=_0x1a18f4[_0x3cb666(0xbb)](_0x323c7d=>{return{'msgId':_0x323c7d,'senderShowName':selfInfo['nick']};});return new Promise((_0x465c5c,_0x4f87ea)=>{const _0x383f3c=_0x3cb666;let _0x2121af=![];const _0x4ea8ad=_0x237b36=>{const _0x4e3f0b=_0x48d3,_0x5c3e21=_0x237b36[_0x4e3f0b(0x90)][_0x4e3f0b(0xac)](_0x4bb59f=>_0x4bb59f[_0x4e3f0b(0xc3)]);if(!_0x5c3e21)return;const _0x3f0141=JSON[_0x4e3f0b(0xa3)](_0x5c3e21[_0x4e3f0b(0xc3)][_0x4e3f0b(0xc2)]);if(_0x3f0141[_0x4e3f0b(0xb6)]!=_0x4e3f0b(0x9b))return;_0x3caa28['jJfEP'](_0x237b36[_0x4e3f0b(0xb4)],_0x451afe['peerUid'])&&_0x3caa28[_0x4e3f0b(0x98)](_0x237b36[_0x4e3f0b(0x9e)],selfInfo[_0x4e3f0b(0x9c)])&&(_0x2121af=!![],_0x3caa28['LbWIQ'](_0x465c5c,_0x237b36));};sentMsgTasks[_0x383f3c(0xc1)](randomUUID(),_0x4ea8ad),setTimeout(()=>{const _0x29d0e9=_0x383f3c;!_0x2121af&&_0x4f87ea(_0x3caa28[_0x29d0e9(0xc7)]);},0x1388),napCatCore[_0x383f3c(0xc6)][_0x383f3c(0xb9)]()['multiForwardMsgWithComment'](_0x2bfea5,_0xf64368,_0x451afe,[],new Map());});}}