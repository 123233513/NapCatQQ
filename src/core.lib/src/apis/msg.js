const _0x3d216d=_0x5be6;(function(_0x2a222f,_0x386945){const _0x2c92d0=_0x5be6,_0x5a3416=_0x2a222f();while(!![]){try{const _0x43a903=parseInt(_0x2c92d0(0x1c7))/0x1*(-parseInt(_0x2c92d0(0x1cb))/0x2)+parseInt(_0x2c92d0(0x1b2))/0x3+parseInt(_0x2c92d0(0x1a8))/0x4*(-parseInt(_0x2c92d0(0x1d8))/0x5)+parseInt(_0x2c92d0(0x1b9))/0x6*(parseInt(_0x2c92d0(0x1b4))/0x7)+-parseInt(_0x2c92d0(0x1c8))/0x8*(-parseInt(_0x2c92d0(0x19e))/0x9)+parseInt(_0x2c92d0(0x1a4))/0xa+-parseInt(_0x2c92d0(0x1d7))/0xb*(parseInt(_0x2c92d0(0x1aa))/0xc);if(_0x43a903===_0x386945)break;else _0x5a3416['push'](_0x5a3416['shift']());}catch(_0xa1212e){_0x5a3416['push'](_0x5a3416['shift']());}}}(_0x4474,0xf189a));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x4474(){const _0x4a17c7=['Ljpje','multiForwardMsgWithComment','getGroupFileList','9jrmofF','sendStatus','bytesData','sendMsg','find','then','8330840RClGVb','onMsgInfoListUpdate','发送超时','cBXZm','28PHoXNA','addListener','320316obCNWd','getMsgHistory','elements','wFmrW','length','FdsKW','getMsgService','IMCtg','5704203VBKmbB','forEach','2797501ChpFUo','com.tencent.multimsg','arkElement','delete','onLoginSuccess','12KejFGY','getRichMediaService','TGFCM','msgId','map','fGfYN','cbTfj','item','ZgIIY','getMsgsIncludeSelf','fetchRecentContact','activateChat','vNVQq','GrEzB','99539YEcpeH','4891832GEZoVn','LJoNN','catch','38khslTD','UggUH','getMsgsBySeqAndCount','转发消息超时','uid','peerUid','TdtHP','setMsgEmojiLikes','recallMsg','senderUid','getMsgsByMsgId','setMsgRead','11sYohVa','884270uxNWHf','onGroupFileInfoUpdate','getMultiMsg','set','toString','app','jUPIO','session','activateChatAndGetHistory','forwardMsg'];_0x4474=function(){return _0x4a17c7;};return _0x4474();}const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x3d216d(0x1d9)]=_0x1c2ef2=>{const _0x2d65f2=_0x3d216d,_0x376399={'wFmrW':function(_0x39b0ac,_0x889978){return _0x39b0ac(_0x889978);}};for(const [_0x148819,_0x2214ac]of GroupFileInfoUpdateTasks){_0x376399[_0x2d65f2(0x1ad)](_0x2214ac,_0x1c2ef2),GroupFileInfoUpdateTasks[_0x2d65f2(0x1b7)](_0x148819);}},msgListener['onAddSendMsg']=_0x3c80fe=>{const _0x5a499b=_0x3d216d,_0x23e9ad={'mFWzb':function(_0x2896cb,_0x1e6055){return _0x2896cb(_0x1e6055);}};for(const [_0x4c68ae,_0x524ba8]of sentMsgTasks){_0x23e9ad['mFWzb'](_0x524ba8,_0x3c80fe),sentMsgTasks[_0x5a499b(0x1b7)](_0x4c68ae);}if(sendMessagePool[_0x3c80fe[_0x5a499b(0x1d0)]]){const _0x2e98cd=sendMessagePool[_0x3c80fe[_0x5a499b(0x1d0)]]?.(_0x3c80fe);_0x2e98cd instanceof Promise&&_0x2e98cd[_0x5a499b(0x1a3)]()[_0x5a499b(0x1ca)](logError);}},msgListener[_0x3d216d(0x1a5)]=_0x4e9797=>{const _0x5e8fd0=_0x3d216d,_0x537278={'Ljpje':function(_0xe6e41c,_0x5069ef){return _0xe6e41c(_0x5069ef);}};_0x4e9797[_0x5e8fd0(0x1b3)](_0x12d6a6=>{const _0x2110bb=_0x5e8fd0,_0xf362ca={'jUPIO':function(_0x1b6e3d,_0x1dc52a){const _0x18b498=_0x5be6;return _0x537278[_0x18b498(0x19b)](_0x1b6e3d,_0x1dc52a);}};new Promise((_0x30271c,_0x4a37e6)=>{const _0x13e989=_0x5be6;for(const _0x4d73ed in sendSuccessCBMap){const _0x2e9c91=sendSuccessCBMap[_0x4d73ed],_0x1e5ab5=_0xf362ca[_0x13e989(0x197)](_0x2e9c91,_0x12d6a6),_0x554344=_0x1253cb=>{_0x1253cb&&delete sendSuccessCBMap[_0x4d73ed];};_0x1e5ab5 instanceof Promise?_0x1e5ab5[_0x13e989(0x1a3)](_0x554344):_0x554344(_0x1e5ab5);}})[_0x2110bb(0x1a3)]()[_0x2110bb(0x1ca)](log);});},setTimeout(()=>{const _0x4acf35=_0x3d216d;napCatCore[_0x4acf35(0x1b8)](()=>{const _0x2a8752=_0x4acf35;napCatCore[_0x2a8752(0x1a9)](msgListener);});},0x64);function _0x5be6(_0x126c98,_0x53eca7){const _0x44743a=_0x4474();return _0x5be6=function(_0x5be642,_0x3248c5){_0x5be642=_0x5be642-0x197;let _0x47f46d=_0x44743a[_0x5be642];return _0x47f46d;},_0x5be6(_0x126c98,_0x53eca7);}export class NTQQMsgApi{static async['setEmojiLike'](_0x104772,_0x3998a0,_0x3b5216,_0x456f75=!![]){const _0x4f2f7a=_0x3d216d;return _0x3b5216=_0x3b5216[_0x4f2f7a(0x1dc)](),napCatCore[_0x4f2f7a(0x198)][_0x4f2f7a(0x1b0)]()[_0x4f2f7a(0x1d2)](_0x104772,_0x3998a0,_0x3b5216,_0x3b5216[_0x4f2f7a(0x1ae)]>0x3?'2':'1',_0x456f75);}static async[_0x3d216d(0x1da)](_0x49eeee,_0xbe5a62,_0x4ad2be){const _0x49a1a6=_0x3d216d;return napCatCore['session'][_0x49a1a6(0x1b0)]()[_0x49a1a6(0x1da)](_0x49eeee,_0xbe5a62,_0x4ad2be);}static async['getMsgsByMsgId'](_0x4cea22,_0xccfe51){const _0x2c4632=_0x3d216d;return await napCatCore[_0x2c4632(0x198)]['getMsgService']()[_0x2c4632(0x1d5)](_0x4cea22,_0xccfe51);}static async[_0x3d216d(0x1cd)](_0x42ae8c,_0x90814c,_0x3150a8,_0x16c6ca,_0x18f203){const _0x161658=_0x3d216d;return await napCatCore['session']['getMsgService']()[_0x161658(0x1cd)](_0x42ae8c,_0x90814c,_0x3150a8,_0x16c6ca,_0x18f203);}static async[_0x3d216d(0x1c4)](_0x78fd79){}static async[_0x3d216d(0x199)](_0x4f36f1){}static async['setMsgRead'](_0x351d38){const _0x5d20d4=_0x3d216d;return napCatCore[_0x5d20d4(0x198)]['getMsgService']()[_0x5d20d4(0x1d6)](_0x351d38);}static async['getGroupFileList'](_0x1c3aca,_0x466cd1){const _0x339757={'cbTfj':function(_0x289c0d,_0x5b5816){return _0x289c0d(_0x5b5816);},'GrEzB':function(_0x5f1d1a,_0x554e8c,_0x41caa1){return _0x5f1d1a(_0x554e8c,_0x41caa1);},'fGfYN':function(_0x125eed){return _0x125eed();}};return new Promise(async(_0xfc164c,_0x2d9c06)=>{const _0x1d99e6=_0x5be6,_0x1fbac8={'LJoNN':function(_0x1786c4,_0x433cb6){const _0x3e0167=_0x5be6;return _0x339757[_0x3e0167(0x1bf)](_0x1786c4,_0x433cb6);}};let _0x3c3fc3=![];_0x339757[_0x1d99e6(0x1c6)](setTimeout,()=>{const _0x2d25e4=_0x1d99e6;!_0x3c3fc3&&_0x1fbac8[_0x2d25e4(0x1c9)](_0x2d9c06,'获取群文件列表超时');},0x1388);const _0x24dc9d=_0xcd22ef=>{const _0x2fc461=_0x1d99e6;_0x3c3fc3=!![],_0x339757[_0x2fc461(0x1bf)](_0xfc164c,_0xcd22ef[_0x2fc461(0x1c0)]);};GroupFileInfoUpdateTasks[_0x1d99e6(0x1db)](_0x339757[_0x1d99e6(0x1be)](randomUUID),_0x24dc9d),await napCatCore[_0x1d99e6(0x198)][_0x1d99e6(0x1ba)]()[_0x1d99e6(0x19d)](_0x1c3aca,_0x466cd1);});}static async[_0x3d216d(0x1ab)](_0x451b22,_0x583123,_0x322da1){const _0x3acfb0=_0x3d216d;return napCatCore['session'][_0x3acfb0(0x1b0)]()[_0x3acfb0(0x1c2)](_0x451b22,_0x583123,_0x322da1,!![]);}static async[_0x3d216d(0x1c3)](){}static async[_0x3d216d(0x1d3)](_0x55ae18,_0x4e384a){const _0xc59637=_0x3d216d;await napCatCore['session'][_0xc59637(0x1b0)]()[_0xc59637(0x1d3)]({'chatType':_0x55ae18['chatType'],'peerUid':_0x55ae18[_0xc59637(0x1d0)]},_0x4e384a);}static async[_0x3d216d(0x1a1)](_0x59f327,_0x3eb40,_0x3e97fa=!![],_0x749b2a=0x2710){const _0x38f016=_0x3d216d,_0x3c6788={'QDGfA':function(_0x3d8a4d,_0x337db3){return _0x3d8a4d>_0x337db3;},'IMCtg':function(_0xc1b4a8,_0x3210ae){return _0xc1b4a8(_0x3210ae);},'TGFCM':function(_0x2591de){return _0x2591de();},'vNVQq':function(_0x484fa1,_0x37439e){return _0x484fa1===_0x37439e;},'pubMG':function(_0x65c195,_0x25d657){return _0x65c195(_0x25d657);},'ZgIIY':_0x38f016(0x1a6),'cBXZm':function(_0x747dab){return _0x747dab();},'FdsKW':function(_0x415c85,_0x508888,_0x4cfb9f){return _0x415c85(_0x508888,_0x4cfb9f);}},_0x282ce0=_0x59f327['peerUid'];let _0x56b571=0x0;const _0x213575=async()=>{const _0x10e018=_0x38f016;if(_0x3c6788['QDGfA'](_0x56b571,_0x749b2a))throw _0x10e018(0x1a6);const _0x2a8119=sendMessagePool[_0x59f327[_0x10e018(0x1d0)]];if(_0x2a8119)return await _0x3c6788[_0x10e018(0x1b1)](sleep,0x1f4),_0x56b571+=0x1f4,await _0x3c6788[_0x10e018(0x1bb)](_0x213575);else return;};return await _0x3c6788[_0x38f016(0x1bb)](_0x213575),new Promise((_0x311097,_0x4b68ad)=>{const _0x1b0230=_0x38f016,_0x29f3bf={'rmgPF':_0x3c6788[_0x1b0230(0x1c1)]};let _0xda005a=![],_0x2eb53e=null;const _0x42413f=_0x3c6788[_0x1b0230(0x1a7)](randomUUID);sendSuccessCBMap[_0x42413f]=_0x373a47=>{const _0x290880=_0x1b0230;if(_0x3c6788[_0x290880(0x1c5)](_0x373a47[_0x290880(0x1bc)],_0x2eb53e?.['msgId'])){if(_0x373a47[_0x290880(0x19f)]===0x2)return delete sendSuccessCBMap[_0x42413f],_0xda005a=!![],_0x3c6788['pubMG'](_0x311097,_0x373a47),!![];return![];}return![];},sendMessagePool[_0x282ce0]=async _0x593adb=>{delete sendMessagePool[_0x282ce0],_0x2eb53e=_0x593adb;},_0x3c6788[_0x1b0230(0x1af)](setTimeout,()=>{if(_0xda005a)return;delete sendMessagePool[_0x282ce0],delete sendSuccessCBMap[_0x42413f],_0x4b68ad(_0x29f3bf['rmgPF']);},_0x749b2a);const _0xcdb2c1=napCatCore[_0x1b0230(0x198)][_0x1b0230(0x1b0)]()[_0x1b0230(0x1a1)]('0',_0x59f327,_0x3eb40,new Map());});}static async[_0x3d216d(0x19a)](_0x4375d7,_0x2bfb2d,_0x4d8b0a){const _0x47f384=_0x3d216d;return napCatCore[_0x47f384(0x198)]['getMsgService']()[_0x47f384(0x19a)](_0x4d8b0a,_0x4375d7,[_0x2bfb2d],new Map());}static async['multiForwardMsg'](_0x14f556,_0x50832b,_0x5c7a65){const _0x5e3014=_0x3d216d,_0x2cba14={'TdtHP':function(_0x39a98a,_0x57af6b){return _0x39a98a(_0x57af6b);},'OvndQ':_0x5e3014(0x1ce),'pJBnS':_0x5e3014(0x1b5),'eKZRK':function(_0x22bdb9,_0x3dceb2){return _0x22bdb9==_0x3dceb2;},'cZobc':function(_0x17e11c,_0x361df6){return _0x17e11c(_0x361df6);},'ndDSE':function(_0x4e32a3){return _0x4e32a3();}},_0x80cbf0=_0x5c7a65[_0x5e3014(0x1bd)](_0x3f8aa0=>{return{'msgId':_0x3f8aa0,'senderShowName':selfInfo['nick']};});return new Promise((_0x592520,_0x1b67d7)=>{const _0x4ebd89=_0x5e3014,_0x3a69bb={'iqjWq':_0x2cba14['pJBnS'],'UggUH':function(_0x1f5f8a,_0x4b2857){return _0x2cba14['eKZRK'](_0x1f5f8a,_0x4b2857);},'gWHPy':function(_0x260a28,_0x406594){return _0x2cba14['cZobc'](_0x260a28,_0x406594);}};let _0x199bdc=![];const _0x57f884=_0x34dde7=>{const _0x40da42=_0x5be6,_0x233783=_0x34dde7[_0x40da42(0x1ac)][_0x40da42(0x1a2)](_0x299583=>_0x299583['arkElement']);if(!_0x233783)return;const _0x577873=JSON['parse'](_0x233783[_0x40da42(0x1b6)][_0x40da42(0x1a0)]);if(_0x577873[_0x40da42(0x1dd)]!=_0x3a69bb['iqjWq'])return;_0x3a69bb[_0x40da42(0x1cc)](_0x34dde7[_0x40da42(0x1d0)],_0x50832b[_0x40da42(0x1d0)])&&_0x3a69bb['UggUH'](_0x34dde7[_0x40da42(0x1d4)],selfInfo[_0x40da42(0x1cf)])&&(_0x199bdc=!![],_0x3a69bb['gWHPy'](_0x592520,_0x34dde7));};sentMsgTasks[_0x4ebd89(0x1db)](_0x2cba14['ndDSE'](randomUUID),_0x57f884),setTimeout(()=>{const _0x13d074=_0x4ebd89;!_0x199bdc&&_0x2cba14[_0x13d074(0x1d1)](_0x1b67d7,_0x2cba14['OvndQ']);},0x1388),napCatCore[_0x4ebd89(0x198)][_0x4ebd89(0x1b0)]()[_0x4ebd89(0x19c)](_0x80cbf0,_0x14f556,_0x50832b,[],new Map());});}}