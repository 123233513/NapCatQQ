const _0x1445e9=_0x1f41;(function(_0x435dbb,_0x31885f){const _0xb644ee=_0x1f41,_0x5d1346=_0x435dbb();while(!![]){try{const _0xe33efb=parseInt(_0xb644ee(0xb5))/0x1*(parseInt(_0xb644ee(0xc0))/0x2)+parseInt(_0xb644ee(0xab))/0x3+-parseInt(_0xb644ee(0xb4))/0x4*(-parseInt(_0xb644ee(0x93))/0x5)+-parseInt(_0xb644ee(0x8c))/0x6*(parseInt(_0xb644ee(0xb2))/0x7)+-parseInt(_0xb644ee(0xb1))/0x8+-parseInt(_0xb644ee(0x96))/0x9+parseInt(_0xb644ee(0xc4))/0xa;if(_0xe33efb===_0x31885f)break;else _0x5d1346['push'](_0x5d1346['shift']());}catch(_0x1ba25d){_0x5d1346['push'](_0x5d1346['shift']());}}}(_0x243a,0x6a4e8));import{selfInfo}from'@/core/data';function _0x1f41(_0x4f49e8,_0x41b887){const _0x243aa8=_0x243a();return _0x1f41=function(_0x1f415a,_0x297da1){_0x1f415a=_0x1f415a-0x8b;let _0x3fe18f=_0x243aa8[_0x1f415a];return _0x3fe18f;},_0x1f41(_0x4f49e8,_0x41b887);}import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onAddSendMsg']=_0x1e265d=>{const _0x31e87d=_0x1f41,_0x244842={'aStMH':function(_0x145ae6,_0x42bcdc){return _0x145ae6 instanceof _0x42bcdc;}};for(const [_0x44bad5,_0x264f8f]of sentMsgTasks){_0x264f8f(_0x1e265d),sentMsgTasks[_0x31e87d(0xba)](_0x44bad5);}if(sendMessagePool[_0x1e265d[_0x31e87d(0xb8)]]){const _0xd310c9=sendMessagePool[_0x1e265d[_0x31e87d(0xb8)]]?.(_0x1e265d);_0x244842[_0x31e87d(0xa0)](_0xd310c9,Promise)&&_0xd310c9[_0x31e87d(0xc7)]()['catch'](logError);}},msgListener[_0x1445e9(0xb9)]=_0x3a8e5a=>{const _0x69dc6f={'wLJVj':function(_0x15d78b,_0x6209c6){return _0x15d78b(_0x6209c6);},'FOrdu':function(_0x24b53b,_0x194a6f){return _0x24b53b instanceof _0x194a6f;}};_0x3a8e5a['forEach'](_0x33d5dd=>{const _0x9b81e7=_0x1f41;new Promise((_0x48dac4,_0x3a85f5)=>{const _0x5e76f3=_0x1f41;for(const _0x4e48eb in sendSuccessCBMap){const _0x2db2f2=sendSuccessCBMap[_0x4e48eb],_0x5cc680=_0x69dc6f[_0x5e76f3(0x9d)](_0x2db2f2,_0x33d5dd),_0x2225fc=_0x1f7c1b=>{_0x1f7c1b&&delete sendSuccessCBMap[_0x4e48eb];};_0x69dc6f[_0x5e76f3(0x8d)](_0x5cc680,Promise)?_0x5cc680[_0x5e76f3(0xc7)](_0x2225fc):_0x69dc6f[_0x5e76f3(0x9d)](_0x2225fc,_0x5cc680);}})[_0x9b81e7(0xc7)]()[_0x9b81e7(0xae)](log);});},setTimeout(()=>{const _0xc95321=_0x1445e9;napCatCore[_0xc95321(0xa9)](()=>{napCatCore['addListener'](msgListener);});},0x64);function _0x243a(){const _0xf2639=['multiForwardMsg','FVkpp','peerUid','onMsgInfoListUpdate','delete','getMsgHistory','toString','bytesData','FxWGX','multiForwardMsgWithComment','1041868pbfhmW','转发消息超时','weVkX','nick','8086340RhRqhI','activateChat','setMsgEmojiLikes','then','kiwAl','rZWbV','forwardMsg','18ecEOde','FOrdu','SZcCg','arkElement','QQjKN','session','EvGVs','115UDiVjs','activateChatAndGetHistory','map','1992429sIagzy','set','app','setMsgRead','setEmojiLike','getMsgsBySeqAndCount','getMsgsIncludeSelf','wLJVj','xvuFI','mXLzw','aStMH','发送超时','parse','sendMsg','msgId','com.tencent.multimsg','AuTpN','uid','usArl','onLoginSuccess','bDTIB','90063fBvWjm','hYsIP','getMultiMsg','catch','getMsgService','GRYcN','6906024OfFeyU','1549289TdDLiD','find','143384tpLwge','1sQvzpz'];_0x243a=function(){return _0xf2639;};return _0x243a();}export class NTQQMsgApi{static async[_0x1445e9(0x9a)](_0x5b9edc,_0x252365,_0x33ad8c,_0x5de424=!![]){const _0x18f466=_0x1445e9,_0x337b6f={'xvuFI':function(_0x1f40d0,_0x27d102){return _0x1f40d0>_0x27d102;}};return _0x33ad8c=_0x33ad8c[_0x18f466(0xbc)](),napCatCore[_0x18f466(0x91)]['getMsgService']()[_0x18f466(0xc6)](_0x5b9edc,_0x252365,_0x33ad8c,_0x337b6f[_0x18f466(0x9e)](_0x33ad8c['length'],0x3)?'2':'1',_0x5de424);}static async[_0x1445e9(0xad)](_0x38758f,_0xb3e7b1,_0x4e7964){const _0x3f4bc1=_0x1445e9;return napCatCore[_0x3f4bc1(0x91)][_0x3f4bc1(0xaf)]()['getMultiMsg'](_0x38758f,_0xb3e7b1,_0x4e7964);}static async['getMsgsByMsgId'](_0x599868,_0x2568b6){const _0x1e03bd=_0x1445e9;return await napCatCore[_0x1e03bd(0x91)]['getMsgService']()['getMsgsByMsgId'](_0x599868,_0x2568b6);}static async[_0x1445e9(0x9b)](_0x54a075,_0x2b9bce,_0x39c459,_0x4940d8,_0x524b18){const _0x4ed335=_0x1445e9;return await napCatCore[_0x4ed335(0x91)][_0x4ed335(0xaf)]()[_0x4ed335(0x9b)](_0x54a075,_0x2b9bce,_0x39c459,_0x4940d8,_0x524b18);}static async[_0x1445e9(0xc5)](_0x33c77b){}static async[_0x1445e9(0x94)](_0x324123){}static async[_0x1445e9(0x99)](_0x2259b7){const _0x174aa3=_0x1445e9;return napCatCore[_0x174aa3(0x91)][_0x174aa3(0xaf)]()[_0x174aa3(0x99)](_0x2259b7);}static async[_0x1445e9(0xbb)](_0x3fc89d,_0x3a2bd6,_0x504bba){const _0x1d6316=_0x1445e9;return napCatCore['session']['getMsgService']()[_0x1d6316(0x9c)](_0x3fc89d,_0x3a2bd6,_0x504bba,!![]);}static async['fetchRecentContact'](){}static async['recallMsg'](_0x587e50,_0x587cb0){const _0x2da557=_0x1445e9;await napCatCore[_0x2da557(0x91)][_0x2da557(0xaf)]()['recallMsg']({'chatType':_0x587e50['chatType'],'peerUid':_0x587e50['peerUid']},_0x587cb0);}static async[_0x1445e9(0xa3)](_0x371c5f,_0x5d3c60,_0x274975=!![],_0x4f62de=0x2710){const _0x38e566=_0x1445e9,_0x4b6d15={'jnvbw':function(_0x5129d7,_0x24ed6a){return _0x5129d7>_0x24ed6a;},'GRYcN':_0x38e566(0xa1),'kiwAl':function(_0x17574e,_0x74cbcc){return _0x17574e(_0x74cbcc);},'bDTIB':function(_0xbaee17){return _0xbaee17();},'AuTpN':function(_0x246fc6,_0x7c99c0,_0x361375){return _0x246fc6(_0x7c99c0,_0x361375);},'FVkpp':function(_0x2cc070){return _0x2cc070();}},_0xc02e6d=_0x371c5f[_0x38e566(0xb8)];let _0x1dad6c=0x0;const _0x3ac37d=async()=>{const _0x4aff29=_0x38e566;if(_0x4b6d15['jnvbw'](_0x1dad6c,_0x4f62de))throw _0x4b6d15['GRYcN'];const _0x1cd917=sendMessagePool[_0x371c5f['peerUid']];if(_0x1cd917)return await _0x4b6d15[_0x4aff29(0xc8)](sleep,0x1f4),_0x1dad6c+=0x1f4,await _0x3ac37d();else return;};return await _0x4b6d15[_0x38e566(0xb7)](_0x3ac37d),new Promise((_0x298ad8,_0x278af3)=>{const _0x1bc0be=_0x38e566,_0x469c94={'mQYnm':function(_0x59a0dc,_0x4e0ce6){return _0x59a0dc===_0x4e0ce6;},'rZWbV':function(_0x586794,_0x3119dd){const _0x3dfcac=_0x1f41;return _0x4b6d15[_0x3dfcac(0xc8)](_0x586794,_0x3119dd);}};let _0x42b995=![],_0x54b424=null;const _0x13a408=_0x4b6d15[_0x1bc0be(0xaa)](randomUUID);sendSuccessCBMap[_0x13a408]=_0x3daf20=>{const _0x3702d1=_0x1bc0be;if(_0x469c94['mQYnm'](_0x3daf20[_0x3702d1(0xa4)],_0x54b424?.[_0x3702d1(0xa4)])){if(_0x3daf20['sendStatus']===0x2)return delete sendSuccessCBMap[_0x13a408],_0x42b995=!![],_0x469c94[_0x3702d1(0xc9)](_0x298ad8,_0x3daf20),!![];return![];}return![];},sendMessagePool[_0xc02e6d]=async _0x3bf646=>{delete sendMessagePool[_0xc02e6d],_0x54b424=_0x3bf646;},_0x4b6d15[_0x1bc0be(0xa6)](setTimeout,()=>{const _0x1c0fd5=_0x1bc0be;if(_0x42b995)return;delete sendMessagePool[_0xc02e6d],delete sendSuccessCBMap[_0x13a408],_0x4b6d15[_0x1c0fd5(0xc8)](_0x278af3,_0x4b6d15[_0x1c0fd5(0xb0)]);},_0x4f62de);const _0x5c4b7d=napCatCore[_0x1bc0be(0x91)][_0x1bc0be(0xaf)]()[_0x1bc0be(0xa3)]('0',_0x371c5f,_0x5d3c60,new Map());});}static async[_0x1445e9(0x8b)](_0x4c17cb,_0x39e749,_0x34c298){const _0x487987=_0x1445e9;return napCatCore[_0x487987(0x91)]['getMsgService']()[_0x487987(0x8b)](_0x34c298,_0x4c17cb,[_0x39e749],new Map());}static async[_0x1445e9(0xb6)](_0x3d3948,_0x570ff8,_0xdb274){const _0x2b9334=_0x1445e9,_0x116589={'mXLzw':_0x2b9334(0xa5),'SZcCg':function(_0x31925b,_0x545701){return _0x31925b==_0x545701;},'EvGVs':function(_0x35b5cc,_0x504892){return _0x35b5cc(_0x504892);},'QQjKN':function(_0x42e55e){return _0x42e55e();},'FxWGX':function(_0x387275,_0x326c4b,_0x6aa89a){return _0x387275(_0x326c4b,_0x6aa89a);}},_0x45038f=_0xdb274[_0x2b9334(0x95)](_0x354689=>{const _0x44d2b4=_0x2b9334;return{'msgId':_0x354689,'senderShowName':selfInfo[_0x44d2b4(0xc3)]};});return new Promise((_0x260365,_0x16bedd)=>{const _0x29c86e=_0x2b9334,_0x328c17={'hYsIP':_0x116589[_0x29c86e(0x9f)],'usArl':function(_0x5bfead,_0x8d2bb4){const _0x2836f3=_0x29c86e;return _0x116589[_0x2836f3(0x8e)](_0x5bfead,_0x8d2bb4);},'kPhrv':function(_0x4ceddb,_0x174ab7){return _0x4ceddb(_0x174ab7);},'VwZhJ':function(_0x1e4988,_0x535419){const _0x2d467b=_0x29c86e;return _0x116589[_0x2d467b(0x92)](_0x1e4988,_0x535419);},'weVkX':_0x29c86e(0xc1)};let _0x4e548a=![];const _0x9845ff=_0xc06424=>{const _0x44163=_0x29c86e,_0x466e35=_0xc06424['elements'][_0x44163(0xb3)](_0x26f0b4=>_0x26f0b4[_0x44163(0x8f)]);if(!_0x466e35)return;const _0x18b2ec=JSON[_0x44163(0xa2)](_0x466e35[_0x44163(0x8f)][_0x44163(0xbd)]);if(_0x18b2ec[_0x44163(0x98)]!=_0x328c17[_0x44163(0xac)])return;_0xc06424['peerUid']==_0x570ff8[_0x44163(0xb8)]&&_0x328c17[_0x44163(0xa8)](_0xc06424['senderUid'],selfInfo[_0x44163(0xa7)])&&(_0x4e548a=!![],_0x328c17['kPhrv'](_0x260365,_0xc06424));};sentMsgTasks[_0x29c86e(0x97)](_0x116589[_0x29c86e(0x90)](randomUUID),_0x9845ff),_0x116589[_0x29c86e(0xbe)](setTimeout,()=>{const _0x49431f=_0x29c86e;!_0x4e548a&&_0x328c17['VwZhJ'](_0x16bedd,_0x328c17[_0x49431f(0xc2)]);},0x1388),napCatCore[_0x29c86e(0x91)][_0x29c86e(0xaf)]()[_0x29c86e(0xbf)](_0x45038f,_0x3d3948,_0x570ff8,[],new Map());});}}