const _0xdc4999=_0x130e;(function(_0xa279f2,_0x50db5a){const _0x202e9f=_0x130e,_0x2b4d4=_0xa279f2();while(!![]){try{const _0x225cdd=parseInt(_0x202e9f(0x156))/0x1*(-parseInt(_0x202e9f(0x13b))/0x2)+-parseInt(_0x202e9f(0x164))/0x3*(parseInt(_0x202e9f(0x16f))/0x4)+-parseInt(_0x202e9f(0x162))/0x5+parseInt(_0x202e9f(0x142))/0x6+-parseInt(_0x202e9f(0x152))/0x7+parseInt(_0x202e9f(0x15f))/0x8+-parseInt(_0x202e9f(0x135))/0x9*(-parseInt(_0x202e9f(0x140))/0xa);if(_0x225cdd===_0x50db5a)break;else _0x2b4d4['push'](_0x2b4d4['shift']());}catch(_0x11587e){_0x2b4d4['push'](_0x2b4d4['shift']());}}}(_0x3819,0x9df03));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';function _0x130e(_0x27ea38,_0x3e0ee9){const _0x3819b3=_0x3819();return _0x130e=function(_0x130e53,_0x42bdaa){_0x130e53=_0x130e53-0x135;let _0x4a8265=_0x3819b3[_0x130e53];return _0x4a8265;},_0x130e(_0x27ea38,_0x3e0ee9);}function _0x3819(){const _0xa40f02=['addListener','length','getMsgHistory','hRYeN','setMsgRead','getMsgService','lJIoT','setMsgEmojiLikes','getMsgsBySeqAndCount','forwardMsg','845019BxHvIZ','转发消息超时','senderUid','chatType','44264pTSkTz','toString','CGmfU','jiDTA','set','msgId','OLWPG','getMsgsByMsgId','poELs','8676552XmdkAp','catch','sendMsg','6193980hWTKNG','peerUid','6rSzWiy','qazqz','recallMsg','agLCQ','orYhK','map','parse','tJyjV','elements','nrCwi','session','217100HzQlLx','getMultiMsg','fjtTQ','nlvkL','发送超时','arkElement','UjPIR','sGKxP','18SUbLiW','khQjp','bytesData','multiForwardMsg','delete','forEach','36SDWtyC','activateChat','then','find','fetchRecentContact','3770520ZfUYQa','uid','6438342vTpvAU','onMsgInfoListUpdate','jaEPU','activateChatAndGetHistory','UZxDG','getMsgsIncludeSelf'];_0x3819=function(){return _0xa40f02;};return _0x3819();}import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onAddSendMsg']=_0x1049bb=>{const _0x366a7d=_0x130e,_0xfad455={'nlvkL':function(_0x27c83b,_0xa8ef24){return _0x27c83b(_0xa8ef24);},'mlhMG':function(_0x3a6ed6,_0x37ed4d){return _0x3a6ed6 instanceof _0x37ed4d;}};for(const [_0x399944,_0x5968bf]of sentMsgTasks){_0xfad455[_0x366a7d(0x172)](_0x5968bf,_0x1049bb),sentMsgTasks[_0x366a7d(0x139)](_0x399944);}if(sendMessagePool[_0x1049bb['peerUid']]){const _0x2524c5=sendMessagePool[_0x1049bb['peerUid']]?.(_0x1049bb);_0xfad455['mlhMG'](_0x2524c5,Promise)&&_0x2524c5['then']()[_0x366a7d(0x160)](logError);}},msgListener[_0xdc4999(0x143)]=_0x39ac9d=>{const _0x53f76a=_0xdc4999;_0x39ac9d[_0x53f76a(0x13a)](_0x2155df=>{const _0x12129e=_0x53f76a,_0x301062={'orYhK':function(_0x30ce4f,_0x128a87){return _0x30ce4f(_0x128a87);},'RKKpY':function(_0x48662a,_0x344116){return _0x48662a instanceof _0x344116;}};new Promise((_0x5d2ff3,_0x5d0e89)=>{const _0x5fd74d=_0x130e;for(const _0x17a1ad in sendSuccessCBMap){const _0x2e86af=sendSuccessCBMap[_0x17a1ad],_0x4dae4d=_0x301062['orYhK'](_0x2e86af,_0x2155df),_0x43f6ed=_0x71766=>{_0x71766&&delete sendSuccessCBMap[_0x17a1ad];};_0x301062['RKKpY'](_0x4dae4d,Promise)?_0x4dae4d[_0x5fd74d(0x13d)](_0x43f6ed):_0x301062[_0x5fd74d(0x168)](_0x43f6ed,_0x4dae4d);}})[_0x12129e(0x13d)]()[_0x12129e(0x160)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x3d9481=_0x130e;napCatCore[_0x3d9481(0x148)](msgListener);});},0x64);export class NTQQMsgApi{static async['setEmojiLike'](_0x1208b7,_0x4464bd,_0x1ae3a6,_0x5232c1=!![]){const _0x40fea3=_0xdc4999;return _0x1ae3a6=_0x1ae3a6[_0x40fea3(0x157)](),napCatCore['session'][_0x40fea3(0x14d)]()[_0x40fea3(0x14f)](_0x1208b7,_0x4464bd,_0x1ae3a6,_0x1ae3a6[_0x40fea3(0x149)]>0x3?'2':'1',_0x5232c1);}static async[_0xdc4999(0x170)](_0x3641ef,_0x2bb21b,_0x501fe3){const _0x513d5d=_0xdc4999;return napCatCore['session'][_0x513d5d(0x14d)]()[_0x513d5d(0x170)](_0x3641ef,_0x2bb21b,_0x501fe3);}static async[_0xdc4999(0x15d)](_0x568c9b,_0x4d7e36){const _0x5952eb=_0xdc4999;return await napCatCore['session'][_0x5952eb(0x14d)]()[_0x5952eb(0x15d)](_0x568c9b,_0x4d7e36);}static async[_0xdc4999(0x150)](_0x1a0288,_0x22143a,_0x1e6137,_0x3d9bbd,_0x53a32d){const _0x35fd2f=_0xdc4999;return await napCatCore[_0x35fd2f(0x16e)]['getMsgService']()['getMsgsBySeqAndCount'](_0x1a0288,_0x22143a,_0x1e6137,_0x3d9bbd,_0x53a32d);}static async[_0xdc4999(0x13c)](_0x56ad9a){}static async[_0xdc4999(0x145)](_0x6a7539){}static async['setMsgRead'](_0x58399d){const _0x16cc25=_0xdc4999;return napCatCore['session'][_0x16cc25(0x14d)]()[_0x16cc25(0x14c)](_0x58399d);}static async[_0xdc4999(0x14a)](_0x4ff003,_0x16bcbc,_0x4118c8){const _0x5c5459=_0xdc4999;return napCatCore['session'][_0x5c5459(0x14d)]()[_0x5c5459(0x147)](_0x4ff003,_0x16bcbc,_0x4118c8,!![]);}static async[_0xdc4999(0x13f)](){}static async[_0xdc4999(0x166)](_0x9604f4,_0x15b4c6){const _0x60c8ef=_0xdc4999;await napCatCore[_0x60c8ef(0x16e)][_0x60c8ef(0x14d)]()[_0x60c8ef(0x166)]({'chatType':_0x9604f4[_0x60c8ef(0x155)],'peerUid':_0x9604f4[_0x60c8ef(0x163)]},_0x15b4c6);}static async[_0xdc4999(0x161)](_0x4e7998,_0x4cc6be,_0x125621=!![],_0x525e9c=0x2710){const _0x5e379e=_0xdc4999,_0x20db25={'khQjp':_0x5e379e(0x173),'lJIoT':function(_0x39181e,_0x14085e){return _0x39181e(_0x14085e);},'agLCQ':function(_0x5711f5){return _0x5711f5();},'OLWPG':function(_0x50ac10,_0x3920b7){return _0x50ac10(_0x3920b7);},'poELs':function(_0x598904,_0x221ba7){return _0x598904===_0x221ba7;},'hRYeN':function(_0x4eee4b){return _0x4eee4b();}},_0x217006=_0x4e7998[_0x5e379e(0x163)];let _0x5255d4=0x0;const _0x5de008=async()=>{const _0x26be3d=_0x5e379e;if(_0x5255d4>_0x525e9c)throw _0x20db25[_0x26be3d(0x136)];const _0x4b0a35=sendMessagePool[_0x4e7998['peerUid']];if(_0x4b0a35)return await _0x20db25[_0x26be3d(0x14e)](sleep,0x1f4),_0x5255d4+=0x1f4,await _0x20db25[_0x26be3d(0x167)](_0x5de008);else return;};return await _0x20db25[_0x5e379e(0x14b)](_0x5de008),new Promise((_0x3fc030,_0x59166d)=>{const _0x96dae7=_0x5e379e,_0x206e34={'UjPIR':function(_0x263a8b,_0x35dfc5){const _0x6e7981=_0x130e;return _0x20db25[_0x6e7981(0x15e)](_0x263a8b,_0x35dfc5);},'jaEPU':function(_0x2575fa,_0x5f0492){const _0x352625=_0x130e;return _0x20db25[_0x352625(0x15c)](_0x2575fa,_0x5f0492);}};let _0x4ba07f=![],_0x4102ba=null;const _0xceca7d=_0x20db25[_0x96dae7(0x167)](randomUUID);sendSuccessCBMap[_0xceca7d]=_0x42ef66=>{const _0x354367=_0x96dae7;if(_0x42ef66[_0x354367(0x15b)]===_0x4102ba?.[_0x354367(0x15b)]){if(_0x206e34[_0x354367(0x175)](_0x42ef66['sendStatus'],0x2))return delete sendSuccessCBMap[_0xceca7d],_0x4ba07f=!![],_0x206e34[_0x354367(0x144)](_0x3fc030,_0x42ef66),!![];return![];}return![];},sendMessagePool[_0x217006]=async _0x3e9aa1=>{delete sendMessagePool[_0x217006],_0x4102ba=_0x3e9aa1;},setTimeout(()=>{const _0x1624cb=_0x96dae7;if(_0x4ba07f)return;delete sendMessagePool[_0x217006],delete sendSuccessCBMap[_0xceca7d],_0x20db25[_0x1624cb(0x15c)](_0x59166d,_0x20db25['khQjp']);},_0x525e9c);const _0x4c4478=napCatCore[_0x96dae7(0x16e)][_0x96dae7(0x14d)]()['sendMsg']('0',_0x4e7998,_0x4cc6be,new Map());});}static async[_0xdc4999(0x151)](_0x57a06f,_0x1dc651,_0x535459){const _0x142a5c=_0xdc4999;return napCatCore[_0x142a5c(0x16e)][_0x142a5c(0x14d)]()[_0x142a5c(0x151)](_0x535459,_0x57a06f,[_0x1dc651],new Map());}static async[_0xdc4999(0x138)](_0xc694d1,_0x490a6d,_0x14a44f){const _0x3590a1=_0xdc4999,_0x498b17={'sGKxP':function(_0x30229e,_0x185a42){return _0x30229e!=_0x185a42;},'fJYrr':'com.tencent.multimsg','fjtTQ':function(_0x5bdd0f,_0x389bbb){return _0x5bdd0f==_0x389bbb;},'qazqz':function(_0x37bd70,_0x48c080){return _0x37bd70(_0x48c080);},'CGmfU':_0x3590a1(0x153),'nrCwi':function(_0x1faa54){return _0x1faa54();},'UZxDG':function(_0x4cdadc,_0x260c0b,_0x59dea2){return _0x4cdadc(_0x260c0b,_0x59dea2);}},_0x3ddff7=_0x14a44f[_0x3590a1(0x169)](_0x2a6ca4=>{return{'msgId':_0x2a6ca4,'senderShowName':selfInfo['nick']};});return new Promise((_0xa1f28f,_0x3feb0e)=>{const _0x2f9c89=_0x3590a1,_0x1c382f={'jiDTA':function(_0x5c21fb,_0x5aebe6){const _0x37fbbc=_0x130e;return _0x498b17[_0x37fbbc(0x165)](_0x5c21fb,_0x5aebe6);},'tJyjV':_0x498b17[_0x2f9c89(0x158)]};let _0x368cd4=![];const _0x4481d1=_0x48a7ca=>{const _0x226dbb=_0x2f9c89,_0x540f4b=_0x48a7ca[_0x226dbb(0x16c)][_0x226dbb(0x13e)](_0x22c206=>_0x22c206[_0x226dbb(0x174)]);if(!_0x540f4b)return;const _0x6be70e=JSON[_0x226dbb(0x16a)](_0x540f4b[_0x226dbb(0x174)][_0x226dbb(0x137)]);if(_0x498b17[_0x226dbb(0x176)](_0x6be70e['app'],_0x498b17['fJYrr']))return;_0x498b17[_0x226dbb(0x171)](_0x48a7ca[_0x226dbb(0x163)],_0x490a6d[_0x226dbb(0x163)])&&_0x498b17[_0x226dbb(0x171)](_0x48a7ca[_0x226dbb(0x154)],selfInfo[_0x226dbb(0x141)])&&(_0x368cd4=!![],_0x498b17['qazqz'](_0xa1f28f,_0x48a7ca));};sentMsgTasks[_0x2f9c89(0x15a)](_0x498b17[_0x2f9c89(0x16d)](randomUUID),_0x4481d1),_0x498b17[_0x2f9c89(0x146)](setTimeout,()=>{const _0x327315=_0x2f9c89;!_0x368cd4&&_0x1c382f[_0x327315(0x159)](_0x3feb0e,_0x1c382f[_0x327315(0x16b)]);},0x1388),napCatCore[_0x2f9c89(0x16e)]['getMsgService']()['multiForwardMsgWithComment'](_0x3ddff7,_0xc694d1,_0x490a6d,[],new Map());});}}