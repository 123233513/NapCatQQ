const _0x28088f=_0x4c2a;(function(_0x38df56,_0x37cace){const _0x3c765e=_0x4c2a,_0x541f1f=_0x38df56();while(!![]){try{const _0x56608d=-parseInt(_0x3c765e(0xd3))/0x1+-parseInt(_0x3c765e(0xc3))/0x2*(-parseInt(_0x3c765e(0xcd))/0x3)+parseInt(_0x3c765e(0xd1))/0x4+-parseInt(_0x3c765e(0xf4))/0x5+-parseInt(_0x3c765e(0xe8))/0x6+parseInt(_0x3c765e(0xe3))/0x7+parseInt(_0x3c765e(0xdb))/0x8;if(_0x56608d===_0x37cace)break;else _0x541f1f['push'](_0x541f1f['shift']());}catch(_0x2a29cb){_0x541f1f['push'](_0x541f1f['shift']());}}}(_0x1dc7,0x6dbf1));import{selfInfo}from'@/core/data';function _0x4c2a(_0x5e4d96,_0x2ab739){const _0x1dc710=_0x1dc7();return _0x4c2a=function(_0x4c2a5b,_0x4148fa){_0x4c2a5b=_0x4c2a5b-0xba;let _0x3a3438=_0x1dc710[_0x4c2a5b];return _0x3a3438;},_0x4c2a(_0x5e4d96,_0x2ab739);}import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x1dc7(){const _0xb9f5b7=['uid','orafD','1643764CVCtJW','izIgK','452085kBbmow','activateChatAndGetHistory','map','set','senderUid','recallMsg','delete','bytesData','7454568tMoISA','QbXcU','multiForwardMsg','KpRvP','setMsgEmojiLikes','getMsgsByMsgId','IecNL','yyOir','5229651mDUsxf','ecwGt','length','Lnulc','onAddSendMsg','3024906mDTikS','catch','toString','转发消息超时','yxqmh','sendMsg','nick','app','msgId','getMsgsBySeqAndCount','addListener','发送超时','4435655ZysyRn','setEmojiLike','arkElement','find','getMsgService','BQPXk','sendStatus','QExaZ','fetchRecentContact','ihSTU','xNJce','WllcE','then','2JrGsqZ','getMultiMsg','session','getMsgsIncludeSelf','peerUid','parse','XzuYS','setMsgRead','onMsgInfoListUpdate','getMsgHistory','609099CqxfMX','com.tencent.multimsg'];_0x1dc7=function(){return _0xb9f5b7;};return _0x1dc7();}const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x28088f(0xe7)]=_0xc2727c=>{const _0x98a46=_0x28088f,_0x9f0a32={'BQPXk':function(_0x2bcfa7,_0x32be68){return _0x2bcfa7 instanceof _0x32be68;}};for(const [_0x12ecbf,_0xae78a5]of sentMsgTasks){_0xae78a5(_0xc2727c),sentMsgTasks[_0x98a46(0xd9)](_0x12ecbf);}if(sendMessagePool[_0xc2727c['peerUid']]){const _0x416a91=sendMessagePool[_0xc2727c[_0x98a46(0xc7)]]?.(_0xc2727c);_0x9f0a32[_0x98a46(0xbb)](_0x416a91,Promise)&&_0x416a91[_0x98a46(0xc2)]()[_0x98a46(0xe9)](logError);}},msgListener[_0x28088f(0xcb)]=_0x17d6cb=>{const _0xf8a723={'yxqmh':function(_0x5add81,_0x57ceb4){return _0x5add81 instanceof _0x57ceb4;},'FfwNJ':function(_0xabb2b,_0x3b92ea){return _0xabb2b(_0x3b92ea);}};_0x17d6cb['forEach'](_0x24a43b=>{const _0xc9da2e=_0x4c2a;new Promise((_0x492a9d,_0xcafcca)=>{const _0xd3a7b7=_0x4c2a;for(const _0x129494 in sendSuccessCBMap){const _0x35dcc4=sendSuccessCBMap[_0x129494],_0x27fa6b=_0x35dcc4(_0x24a43b),_0x61c65c=_0x4de50c=>{_0x4de50c&&delete sendSuccessCBMap[_0x129494];};_0xf8a723[_0xd3a7b7(0xec)](_0x27fa6b,Promise)?_0x27fa6b[_0xd3a7b7(0xc2)](_0x61c65c):_0xf8a723['FfwNJ'](_0x61c65c,_0x27fa6b);}})[_0xc9da2e(0xc2)]()['catch'](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x3bfe65=_0x4c2a;napCatCore[_0x3bfe65(0xf2)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x28088f(0xf5)](_0x5c657c,_0x3dc8d5,_0x4f4f12,_0x1f3a41=!![]){const _0x2500c7=_0x28088f,_0x26ed9f={'wXRcW':function(_0x1560c2,_0x2123ea){return _0x1560c2>_0x2123ea;}};return _0x4f4f12=_0x4f4f12[_0x2500c7(0xea)](),napCatCore[_0x2500c7(0xc5)][_0x2500c7(0xba)]()[_0x2500c7(0xdf)](_0x5c657c,_0x3dc8d5,_0x4f4f12,_0x26ed9f['wXRcW'](_0x4f4f12[_0x2500c7(0xe5)],0x3)?'2':'1',_0x1f3a41);}static async[_0x28088f(0xc4)](_0x2f034c,_0x5920c5,_0x2a3abc){const _0x3a98be=_0x28088f;return napCatCore['session'][_0x3a98be(0xba)]()[_0x3a98be(0xc4)](_0x2f034c,_0x5920c5,_0x2a3abc);}static async[_0x28088f(0xe0)](_0x231505,_0x515302){const _0x2ac6c0=_0x28088f;return await napCatCore[_0x2ac6c0(0xc5)][_0x2ac6c0(0xba)]()[_0x2ac6c0(0xe0)](_0x231505,_0x515302);}static async[_0x28088f(0xf1)](_0x5a6625,_0x473403,_0x16306a,_0x43f176,_0x391b6d){const _0x41d213=_0x28088f;return await napCatCore['session'][_0x41d213(0xba)]()[_0x41d213(0xf1)](_0x5a6625,_0x473403,_0x16306a,_0x43f176,_0x391b6d);}static async['activateChat'](_0x64ca7){}static async[_0x28088f(0xd4)](_0x4ce236){}static async[_0x28088f(0xca)](_0x4acb9c){const _0x9287cd=_0x28088f;return napCatCore[_0x9287cd(0xc5)][_0x9287cd(0xba)]()[_0x9287cd(0xca)](_0x4acb9c);}static async[_0x28088f(0xcc)](_0x1449d7,_0x2f605e,_0x32c623){const _0x488a2a=_0x28088f;return napCatCore['session'][_0x488a2a(0xba)]()[_0x488a2a(0xc6)](_0x1449d7,_0x2f605e,_0x32c623,!![]);}static async[_0x28088f(0xbe)](){}static async[_0x28088f(0xd8)](_0x16e909,_0x50e238){const _0x2f35a2=_0x28088f;await napCatCore[_0x2f35a2(0xc5)]['getMsgService']()[_0x2f35a2(0xd8)]({'chatType':_0x16e909['chatType'],'peerUid':_0x16e909[_0x2f35a2(0xc7)]},_0x50e238);}static async[_0x28088f(0xed)](_0x249589,_0x390685,_0x513bb2=!![],_0x7c3416=0x2710){const _0x1892b7=_0x28088f,_0xfbf595={'ihSTU':function(_0x157157,_0x3022d){return _0x157157>_0x3022d;},'QbXcU':_0x1892b7(0xf3),'ecwGt':function(_0x210479,_0x253146){return _0x210479(_0x253146);},'KpRvP':function(_0x156dd1){return _0x156dd1();},'XzuYS':function(_0x2cb18e,_0x4554c1){return _0x2cb18e===_0x4554c1;},'yyOir':function(_0x1ac3ca,_0x1bfbc6){return _0x1ac3ca===_0x1bfbc6;},'LTQkb':function(_0x10f1e1,_0x396eb7,_0x3cc32d){return _0x10f1e1(_0x396eb7,_0x3cc32d);},'QExaZ':function(_0x1a8091){return _0x1a8091();}},_0xd4b8e9=_0x249589[_0x1892b7(0xc7)];let _0x494c78=0x0;const _0x3a6ccf=async()=>{const _0xf35635=_0x1892b7;if(_0xfbf595[_0xf35635(0xbf)](_0x494c78,_0x7c3416))throw _0xfbf595[_0xf35635(0xdc)];const _0x4b9b52=sendMessagePool[_0x249589[_0xf35635(0xc7)]];if(_0x4b9b52)return await _0xfbf595['ecwGt'](sleep,0x1f4),_0x494c78+=0x1f4,await _0xfbf595[_0xf35635(0xde)](_0x3a6ccf);else return;};return await _0xfbf595[_0x1892b7(0xbd)](_0x3a6ccf),new Promise((_0xa29a41,_0x4d7c5d)=>{const _0x3a44c7=_0x1892b7,_0x42e90d={'Lnulc':function(_0x4149f2,_0x2f2d98){const _0x2ce94f=_0x4c2a;return _0xfbf595[_0x2ce94f(0xc9)](_0x4149f2,_0x2f2d98);},'bvcbY':function(_0x7c5c29,_0xb81aaa){const _0xbda905=_0x4c2a;return _0xfbf595[_0xbda905(0xe2)](_0x7c5c29,_0xb81aaa);}};let _0x1524f2=![],_0xddd5ab=null;const _0x5eb69b=randomUUID();sendSuccessCBMap[_0x5eb69b]=_0x2229c3=>{const _0x521e78=_0x4c2a;if(_0x42e90d[_0x521e78(0xe6)](_0x2229c3['msgId'],_0xddd5ab?.[_0x521e78(0xf0)])){if(_0x42e90d['bvcbY'](_0x2229c3[_0x521e78(0xbc)],0x2))return delete sendSuccessCBMap[_0x5eb69b],_0x1524f2=!![],_0xa29a41(_0x2229c3),!![];return![];}return![];},sendMessagePool[_0xd4b8e9]=async _0xa4387d=>{delete sendMessagePool[_0xd4b8e9],_0xddd5ab=_0xa4387d;},_0xfbf595['LTQkb'](setTimeout,()=>{const _0x2e4272=_0x4c2a;if(_0x1524f2)return;delete sendMessagePool[_0xd4b8e9],delete sendSuccessCBMap[_0x5eb69b],_0xfbf595[_0x2e4272(0xe4)](_0x4d7c5d,_0xfbf595[_0x2e4272(0xdc)]);},_0x7c3416);const _0x2681a3=napCatCore[_0x3a44c7(0xc5)]['getMsgService']()[_0x3a44c7(0xed)]('0',_0x249589,_0x390685,new Map());});}static async['forwardMsg'](_0x1e2981,_0x552958,_0x1f4e39){const _0x25e192=_0x28088f;return napCatCore[_0x25e192(0xc5)][_0x25e192(0xba)]()['forwardMsg'](_0x1f4e39,_0x1e2981,[_0x552958],new Map());}static async[_0x28088f(0xdd)](_0xf31d2a,_0x313f8e,_0x43f322){const _0x48d419=_0x28088f,_0x1dde75={'WllcE':function(_0x15caa3,_0x52bc39){return _0x15caa3!=_0x52bc39;},'IecNL':_0x48d419(0xce),'oMoHw':function(_0x8666e1,_0x17b0ad){return _0x8666e1==_0x17b0ad;},'LegcV':function(_0x41f195,_0x35cf80){return _0x41f195(_0x35cf80);},'izIgK':function(_0x596bb2,_0x193dee){return _0x596bb2(_0x193dee);},'orafD':_0x48d419(0xeb),'xNJce':function(_0x3e060d){return _0x3e060d();}},_0x470e78=_0x43f322[_0x48d419(0xd5)](_0x4d1c54=>{const _0x3d77f9=_0x48d419;return{'msgId':_0x4d1c54,'senderShowName':selfInfo[_0x3d77f9(0xee)]};});return new Promise((_0x36f034,_0xf41de4)=>{const _0x1e4d04=_0x48d419;let _0x116c7e=![];const _0x175475=_0x26c3e5=>{const _0x4cbb1d=_0x4c2a,_0xac8ab1=_0x26c3e5['elements'][_0x4cbb1d(0xf7)](_0x158ac0=>_0x158ac0[_0x4cbb1d(0xf6)]);if(!_0xac8ab1)return;const _0x575117=JSON[_0x4cbb1d(0xc8)](_0xac8ab1[_0x4cbb1d(0xf6)][_0x4cbb1d(0xda)]);if(_0x1dde75[_0x4cbb1d(0xc1)](_0x575117[_0x4cbb1d(0xef)],_0x1dde75[_0x4cbb1d(0xe1)]))return;_0x26c3e5[_0x4cbb1d(0xc7)]==_0x313f8e[_0x4cbb1d(0xc7)]&&_0x1dde75['oMoHw'](_0x26c3e5[_0x4cbb1d(0xd7)],selfInfo[_0x4cbb1d(0xcf)])&&(_0x116c7e=!![],_0x1dde75['LegcV'](_0x36f034,_0x26c3e5));};sentMsgTasks[_0x1e4d04(0xd6)](_0x1dde75[_0x1e4d04(0xc0)](randomUUID),_0x175475),setTimeout(()=>{const _0x3221a3=_0x1e4d04;!_0x116c7e&&_0x1dde75[_0x3221a3(0xd2)](_0xf41de4,_0x1dde75[_0x3221a3(0xd0)]);},0x1388),napCatCore['session'][_0x1e4d04(0xba)]()['multiForwardMsgWithComment'](_0x470e78,_0xf31d2a,_0x313f8e,[],new Map());});}}