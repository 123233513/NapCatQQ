function _0x28d7(){const _0x3113a5=['28699380KSPsSr','3995058nefZEq','发送超时','forwardMsg','bJOKl','cWDmO','recallMsg','activateChatAndGetHistory','set','chatType','activateChat','getMsgService','jJpRM','aKpiC','1678885vhgUti','map','YfZeT','gmhtj','4bICKCu','XFqDf','peerUid','jjYKW','com.tencent.multimsg','ESmvd','setEmojiLike','转发消息超时','forEach','301058fEORZn','nick','getMsgHistory','7bGXYAh','senderUid','getMsgsByMsgId','getMsgsBySeqAndCount','uid','addListener','3470325wpNtqp','744123sALcig','msgId','multiForwardMsg','getMsgsIncludeSelf','dpoEn','5698032wYumtC','arkElement','sendMsg','onMsgInfoListUpdate','eMENi','LTUgv','catch','sendStatus','setMsgRead','zmsZl','elements','pObLc','session','then','guildId','fetchRecentContact','getMultiMsg','bytesData'];_0x28d7=function(){return _0x3113a5;};return _0x28d7();}const _0x4e6c8a=_0x13f2;(function(_0x413781,_0x596a07){const _0x59a2cf=_0x13f2,_0x124b40=_0x413781();while(!![]){try{const _0x419359=-parseInt(_0x59a2cf(0x156))/0x1+-parseInt(_0x59a2cf(0x14c))/0x2+-parseInt(_0x59a2cf(0x155))/0x3*(parseInt(_0x59a2cf(0x143))/0x4)+-parseInt(_0x59a2cf(0x13f))/0x5+-parseInt(_0x59a2cf(0x132))/0x6*(parseInt(_0x59a2cf(0x14f))/0x7)+parseInt(_0x59a2cf(0x15b))/0x8+parseInt(_0x59a2cf(0x131))/0x9;if(_0x419359===_0x596a07)break;else _0x124b40['push'](_0x124b40['shift']());}catch(_0x1d2245){_0x124b40['push'](_0x124b40['shift']());}}}(_0x28d7,0xcf09b));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onAddSendMsg']=_0x362fd0=>{const _0x4364d4=_0x13f2,_0x5a9ffa={'dpoEn':function(_0x5ca0f6,_0xc51b92){return _0x5ca0f6(_0xc51b92);},'XqGXl':function(_0x45f9bd,_0x50eb83){return _0x45f9bd instanceof _0x50eb83;}};for(const [_0x4b246f,_0x1b3ca6]of sentMsgTasks){_0x5a9ffa[_0x4364d4(0x15a)](_0x1b3ca6,_0x362fd0),sentMsgTasks['delete'](_0x4b246f);}if(sendMessagePool[_0x362fd0['peerUid']]){const _0x19dddc=sendMessagePool[_0x362fd0[_0x4364d4(0x145)]]?.(_0x362fd0);_0x5a9ffa['XqGXl'](_0x19dddc,Promise)&&_0x19dddc[_0x4364d4(0x168)]()[_0x4364d4(0x161)](logError);}},msgListener[_0x4e6c8a(0x15e)]=_0x2ccc39=>{const _0x266732=_0x4e6c8a,_0x428168={'zmsZl':function(_0x30c4a4,_0x5579c4){return _0x30c4a4(_0x5579c4);}};_0x2ccc39[_0x266732(0x14b)](_0x90f618=>{const _0x3439da=_0x266732,_0x4eef16={'pObLc':function(_0x3fb3d7,_0x10ce41){const _0x37cefd=_0x13f2;return _0x428168[_0x37cefd(0x164)](_0x3fb3d7,_0x10ce41);},'AqQKD':function(_0x15279f,_0x53c452){const _0x4f0df5=_0x13f2;return _0x428168[_0x4f0df5(0x164)](_0x15279f,_0x53c452);}};new Promise((_0x5aacb3,_0x43b9da)=>{const _0x6ab2a7=_0x13f2;for(const _0x4ceb2d in sendSuccessCBMap){const _0x4a31c1=sendSuccessCBMap[_0x4ceb2d],_0x1fb910=_0x4eef16[_0x6ab2a7(0x166)](_0x4a31c1,_0x90f618),_0x9637ee=_0x21dfb9=>{_0x21dfb9&&delete sendSuccessCBMap[_0x4ceb2d];};_0x1fb910 instanceof Promise?_0x1fb910['then'](_0x9637ee):_0x4eef16['AqQKD'](_0x9637ee,_0x1fb910);}})[_0x3439da(0x168)]()[_0x3439da(0x161)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x38b188=_0x13f2;napCatCore[_0x38b188(0x154)](msgListener);});},0x64);function _0x13f2(_0x3e8f55,_0x5b583f){const _0x28d7fb=_0x28d7();return _0x13f2=function(_0x13f2c7,_0x1ab9b4){_0x13f2c7=_0x13f2c7-0x12f;let _0x5f4ca6=_0x28d7fb[_0x13f2c7];return _0x5f4ca6;},_0x13f2(_0x3e8f55,_0x5b583f);}export class NTQQMsgApi{static async[_0x4e6c8a(0x149)](_0x4c5822,_0x31f2ad,_0x42c536,_0x537665=!![]){const _0x5c3102=_0x4e6c8a,_0x3c4cea={'Kabmi':function(_0x2c5008,_0x55e9f3){return _0x2c5008>_0x55e9f3;}};return napCatCore[_0x5c3102(0x167)][_0x5c3102(0x13c)]()['setMsgEmojiLikes'](_0x4c5822,_0x31f2ad,_0x42c536,_0x3c4cea['Kabmi'](_0x42c536['length'],0x3)?'2':'1',_0x537665);}static async[_0x4e6c8a(0x12f)](_0x444f0a,_0x2d4b2e,_0x4ada80){const _0x3f8c91=_0x4e6c8a;return napCatCore[_0x3f8c91(0x167)][_0x3f8c91(0x13c)]()[_0x3f8c91(0x12f)](_0x444f0a,_0x2d4b2e,_0x4ada80);}static async[_0x4e6c8a(0x151)](_0x38a71b,_0x49c9eb){const _0xdc934b=_0x4e6c8a;return await napCatCore[_0xdc934b(0x167)][_0xdc934b(0x13c)]()[_0xdc934b(0x151)](_0x38a71b,_0x49c9eb);}static async[_0x4e6c8a(0x152)](_0x38c187,_0x5260fe,_0x30a3cf,_0x186ba5,_0x576f94){const _0x131331=_0x4e6c8a;return await napCatCore[_0x131331(0x167)][_0x131331(0x13c)]()['getMsgsBySeqAndCount'](_0x38c187,_0x5260fe,_0x30a3cf,_0x186ba5,_0x576f94);}static async[_0x4e6c8a(0x13b)](_0x3c0e87){}static async[_0x4e6c8a(0x138)](_0x2454a5){}static async[_0x4e6c8a(0x163)](_0x158728){const _0x5c817a=_0x4e6c8a;return napCatCore[_0x5c817a(0x167)][_0x5c817a(0x13c)]()['setMsgRead'](_0x158728[_0x5c817a(0x13a)],_0x158728[_0x5c817a(0x145)],_0x158728[_0x5c817a(0x169)]);}static async[_0x4e6c8a(0x14e)](_0x106ebd,_0x45cbe2,_0xa5cb80){const _0x3e7713=_0x4e6c8a;return napCatCore[_0x3e7713(0x167)]['getMsgService']()[_0x3e7713(0x159)](_0x106ebd,_0x45cbe2,_0xa5cb80,!![]);}static async[_0x4e6c8a(0x16a)](){}static async[_0x4e6c8a(0x137)](_0x1cc9c8,_0x545d32){const _0x324f55=_0x4e6c8a;await napCatCore[_0x324f55(0x167)]['getMsgService']()[_0x324f55(0x137)]({'chatType':_0x1cc9c8[_0x324f55(0x13a)],'peerUid':_0x1cc9c8['peerUid']},_0x545d32);}static async[_0x4e6c8a(0x15d)](_0x5eed1d,_0x80d23d,_0x30736d=!![],_0x4b4e7b=0x2710){const _0x1a0cba=_0x4e6c8a,_0x469a6f={'mnfmm':function(_0x4382d2,_0x370005){return _0x4382d2>_0x370005;},'LTUgv':_0x1a0cba(0x133),'XFqDf':function(_0x3fa57a,_0x4f0344){return _0x3fa57a(_0x4f0344);},'ESmvd':function(_0x380138){return _0x380138();},'aKpiC':function(_0x3edc0d,_0x40f4bb){return _0x3edc0d===_0x40f4bb;},'cWDmO':function(_0x2ea7b2,_0x384202,_0x5cc509){return _0x2ea7b2(_0x384202,_0x5cc509);}},_0x5d27ec=_0x5eed1d[_0x1a0cba(0x145)];let _0x406f67=0x0;const _0x10d295=async()=>{const _0x34b081=_0x1a0cba;if(_0x469a6f['mnfmm'](_0x406f67,_0x4b4e7b))throw _0x469a6f[_0x34b081(0x160)];const _0x190fa8=sendMessagePool[_0x5eed1d[_0x34b081(0x145)]];if(_0x190fa8)return await _0x469a6f[_0x34b081(0x144)](sleep,0x1f4),_0x406f67+=0x1f4,await _0x469a6f[_0x34b081(0x148)](_0x10d295);else return;};return await _0x469a6f[_0x1a0cba(0x148)](_0x10d295),new Promise((_0x56f4f4,_0x51fd63)=>{const _0x1a4705=_0x1a0cba;let _0x3238a0=![],_0x1ec79a=null;const _0xf5231b=_0x469a6f[_0x1a4705(0x148)](randomUUID);sendSuccessCBMap[_0xf5231b]=_0x4a3a8f=>{const _0xd3b048=_0x1a4705;if(_0x469a6f[_0xd3b048(0x13e)](_0x4a3a8f[_0xd3b048(0x157)],_0x1ec79a?.[_0xd3b048(0x157)])){if(_0x469a6f[_0xd3b048(0x13e)](_0x4a3a8f[_0xd3b048(0x162)],0x2))return delete sendSuccessCBMap[_0xf5231b],_0x3238a0=!![],_0x469a6f[_0xd3b048(0x144)](_0x56f4f4,_0x4a3a8f),!![];return![];}return![];},sendMessagePool[_0x5d27ec]=async _0x3c1943=>{delete sendMessagePool[_0x5d27ec],_0x1ec79a=_0x3c1943;},_0x469a6f[_0x1a4705(0x136)](setTimeout,()=>{const _0x3088d3=_0x1a4705;if(_0x3238a0)return;delete sendMessagePool[_0x5d27ec],delete sendSuccessCBMap[_0xf5231b],_0x51fd63(_0x469a6f[_0x3088d3(0x160)]);},_0x4b4e7b);const _0x27a355=napCatCore['session'][_0x1a4705(0x13c)]()[_0x1a4705(0x15d)]('0',_0x5eed1d,_0x80d23d,new Map());});}static async['forwardMsg'](_0x365239,_0x15911d,_0x2924d1){const _0x1efea1=_0x4e6c8a;return napCatCore[_0x1efea1(0x167)][_0x1efea1(0x13c)]()[_0x1efea1(0x134)](_0x2924d1,_0x365239,[_0x15911d],new Map());}static async[_0x4e6c8a(0x158)](_0x435d61,_0x2e34e7,_0x516d3b){const _0x21d82d=_0x4e6c8a,_0x7fd1d1={'NZwqV':function(_0x447126,_0x2f9581){return _0x447126!=_0x2f9581;},'eMENi':function(_0x984458,_0xf12322){return _0x984458==_0xf12322;},'jJpRM':function(_0x1981d9,_0x222b13){return _0x1981d9(_0x222b13);},'TPPNP':_0x21d82d(0x14a),'gmhtj':function(_0x545e76,_0xce3c1b,_0x5e6182){return _0x545e76(_0xce3c1b,_0x5e6182);}},_0x311039=_0x516d3b[_0x21d82d(0x140)](_0x3ae240=>{const _0x3a227b=_0x21d82d;return{'msgId':_0x3ae240,'senderShowName':selfInfo[_0x3a227b(0x14d)]};});return new Promise((_0x3005dd,_0x340ab2)=>{const _0x3cdb5a=_0x21d82d,_0xd18a74={'jjYKW':function(_0x376b19,_0x359cf4){return _0x7fd1d1['NZwqV'](_0x376b19,_0x359cf4);},'YfZeT':function(_0x966f40,_0x357bfa){const _0x53090d=_0x13f2;return _0x7fd1d1[_0x53090d(0x15f)](_0x966f40,_0x357bfa);},'bJOKl':function(_0x60baeb,_0x43842f){const _0x275272=_0x13f2;return _0x7fd1d1[_0x275272(0x13d)](_0x60baeb,_0x43842f);},'ygEII':function(_0x4db9d7,_0xf7b18f){const _0x270914=_0x13f2;return _0x7fd1d1[_0x270914(0x13d)](_0x4db9d7,_0xf7b18f);},'tsknD':_0x7fd1d1['TPPNP']};let _0x28fff5=![];const _0x3c805d=_0xc212b6=>{const _0x428e9a=_0x13f2,_0x5389c5=_0xc212b6[_0x428e9a(0x165)]['find'](_0x16478b=>_0x16478b[_0x428e9a(0x15c)]);if(!_0x5389c5)return;const _0x3bec35=JSON['parse'](_0x5389c5['arkElement'][_0x428e9a(0x130)]);if(_0xd18a74[_0x428e9a(0x146)](_0x3bec35['app'],_0x428e9a(0x147)))return;_0xd18a74[_0x428e9a(0x141)](_0xc212b6[_0x428e9a(0x145)],_0x2e34e7[_0x428e9a(0x145)])&&_0xd18a74[_0x428e9a(0x141)](_0xc212b6[_0x428e9a(0x150)],selfInfo[_0x428e9a(0x153)])&&(_0x28fff5=!![],_0xd18a74[_0x428e9a(0x135)](_0x3005dd,_0xc212b6));};sentMsgTasks[_0x3cdb5a(0x139)](randomUUID(),_0x3c805d),_0x7fd1d1[_0x3cdb5a(0x142)](setTimeout,()=>{!_0x28fff5&&_0xd18a74['ygEII'](_0x340ab2,_0xd18a74['tsknD']);},0x1388),napCatCore[_0x3cdb5a(0x167)][_0x3cdb5a(0x13c)]()['multiForwardMsgWithComment'](_0x311039,_0x435d61,_0x2e34e7,[],new Map());});}}