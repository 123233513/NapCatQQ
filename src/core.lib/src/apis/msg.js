function _0x3e15(){const _0x365861=['nick','sTsLl','2014503niPKqH','200DwtcWM','activateChatAndGetHistory','setMsgEmojiLikes','hpCer','jZTvK','onAddSendMsg','bytesData','addListener','recallMsg','arkElement','map','5814qMBCvN','getMsgHistory','getMultiMsg','发送超时','uid','转发消息超时','setMsgRead','WHfSm','parse','forEach','msgId','fetchRecentContact','QpEAZ','chatType','193571rajTaV','activateChat','32454XxHjVu','guildId','qjMvq','removeKernelMsgListener','LReRE','XwEHk','session','multiForwardMsg','then','forwardMsg','sendMsg','PeDJE','541106mNCMLP','getMsgsIncludeSelf','1758816JxgMmj','elements','getMsgService','peerUid','uzKeR','length','1847574lcuYQF','XgRsl','setEmojiLike','onMsgInfoListUpdate','sNbsa','multiForwardMsgWithComment','sendStatus','XAMxq','CVxII','svKeW','215sIvihi','5320qJHcVI'];_0x3e15=function(){return _0x365861;};return _0x3e15();}const _0xeed2cf=_0x31ec;(function(_0xadb0a3,_0x2f4813){const _0x143cfb=_0x31ec,_0x3487f9=_0xadb0a3();while(!![]){try{const _0x125d1d=parseInt(_0x143cfb(0x1f4))/0x1+parseInt(_0x143cfb(0x1fc))/0x2+parseInt(_0x143cfb(0x20a))/0x3+-parseInt(_0x143cfb(0x1f6))/0x4+parseInt(_0x143cfb(0x206))/0x5*(parseInt(_0x143cfb(0x216))/0x6)+-parseInt(_0x143cfb(0x224))/0x7*(-parseInt(_0x143cfb(0x20b))/0x8)+parseInt(_0x143cfb(0x226))/0x9*(-parseInt(_0x143cfb(0x207))/0xa);if(_0x125d1d===_0x2f4813)break;else _0x3487f9['push'](_0x3487f9['shift']());}catch(_0x3fd48d){_0x3487f9['push'](_0x3487f9['shift']());}}}(_0x3e15,0x7cd3a));import{selfInfo}from'@/core/data';import{log}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';function _0x31ec(_0x29e136,_0x283f5d){const _0x3e158a=_0x3e15();return _0x31ec=function(_0x31ecfe,_0x457e3c){_0x31ecfe=_0x31ecfe-0x1f4;let _0x276578=_0x3e158a[_0x31ecfe];return _0x276578;},_0x31ec(_0x29e136,_0x283f5d);}import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},msgListener=new MsgListener();msgListener['onAddSendMsg']=_0x2ddffb=>{const _0x252521=_0x31ec,_0x5b775b={'RIqrE':function(_0x35104e,_0x262747){return _0x35104e instanceof _0x262747;}};if(sendMessagePool[_0x2ddffb['peerUid']]){const _0x210ec3=sendMessagePool[_0x2ddffb[_0x252521(0x1f9)]]?.(_0x2ddffb);_0x5b775b['RIqrE'](_0x210ec3,Promise)&&_0x210ec3[_0x252521(0x22e)]()[_0x252521(0x22e)](log);}},msgListener[_0xeed2cf(0x1ff)]=_0x43ef12=>{const _0x3c1f76=_0xeed2cf,_0x3f8714={'SZVGb':function(_0x1d1075,_0x138d34){return _0x1d1075(_0x138d34);},'hpCer':function(_0x36126a,_0x1c5970){return _0x36126a instanceof _0x1c5970;}};_0x43ef12[_0x3c1f76(0x21f)](_0x3eb3ee=>{const _0x82fb80=_0x3c1f76,_0x1e1b35={'uzKeR':function(_0x3482d7,_0x2a4990){return _0x3f8714['SZVGb'](_0x3482d7,_0x2a4990);},'DuLGy':function(_0xf447da,_0xf4760b){const _0x31e6ef=_0x31ec;return _0x3f8714[_0x31e6ef(0x20e)](_0xf447da,_0xf4760b);}};new Promise((_0x11b3f1,_0x3e3ec4)=>{const _0x1e2967=_0x31ec;for(const _0x5a963d in sendSuccessCBMap){const _0x1bd3c8=sendSuccessCBMap[_0x5a963d],_0x38bfa5=_0x1e1b35[_0x1e2967(0x1fa)](_0x1bd3c8,_0x3eb3ee),_0x731686=_0xaa0aa2=>{_0xaa0aa2&&delete sendSuccessCBMap[_0x5a963d];};_0x1e1b35['DuLGy'](_0x38bfa5,Promise)?_0x38bfa5[_0x1e2967(0x22e)](_0x731686):_0x731686(_0x38bfa5);}})[_0x82fb80(0x22e)]()['catch'](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x4ef6ee=_0x31ec;napCatCore[_0x4ef6ee(0x212)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0xeed2cf(0x1fe)](_0x430644,_0x120f6c,_0xb23cd4,_0x458a08=!![]){const _0x54633b=_0xeed2cf;return napCatCore['session']['getMsgService']()[_0x54633b(0x20d)](_0x430644,_0x120f6c,_0xb23cd4,_0xb23cd4[_0x54633b(0x1fb)]>0x3?'2':'1',_0x458a08);}static async[_0xeed2cf(0x218)](_0x4f17f2,_0x3bd58f,_0x5f46da){const _0x3295de=_0xeed2cf;return napCatCore[_0x3295de(0x22c)][_0x3295de(0x1f8)]()[_0x3295de(0x218)](_0x4f17f2,_0x3bd58f,_0x5f46da);}static async[_0xeed2cf(0x225)](_0x1c7d86){}static async[_0xeed2cf(0x20c)](_0x334837){}static async[_0xeed2cf(0x21c)](_0x199811){const _0x45b3f8=_0xeed2cf;return napCatCore[_0x45b3f8(0x22c)][_0x45b3f8(0x1f8)]()[_0x45b3f8(0x21c)](_0x199811[_0x45b3f8(0x223)],_0x199811['peerUid'],_0x199811[_0x45b3f8(0x227)]);}static async[_0xeed2cf(0x217)](_0x1b58af,_0x1ae3d6,_0x2ad25c){const _0x1319da=_0xeed2cf;return napCatCore[_0x1319da(0x22c)]['getMsgService']()[_0x1319da(0x1f5)](_0x1b58af,_0x1ae3d6,_0x2ad25c,!![]);}static async[_0xeed2cf(0x221)](){}static async[_0xeed2cf(0x213)](_0x5342ee,_0x2a12d0){const _0x504363=_0xeed2cf;await napCatCore['session'][_0x504363(0x1f8)]()[_0x504363(0x213)]({'chatType':_0x5342ee[_0x504363(0x223)],'peerUid':_0x5342ee[_0x504363(0x1f9)]},_0x2a12d0);}static async[_0xeed2cf(0x230)](_0x4056bf,_0x501218,_0x11ff61=!![],_0xa37f94=0x2710){const _0x579e99=_0xeed2cf,_0x30c849={'svKeW':function(_0x474e73,_0x24ee60){return _0x474e73>_0x24ee60;},'utqpp':_0x579e99(0x219),'sNbsa':function(_0x57122d){return _0x57122d();},'QpEAZ':function(_0x53a7bb,_0x4e6ce9){return _0x53a7bb===_0x4e6ce9;},'qJfCt':function(_0x1e8bf8){return _0x1e8bf8();},'PeDJE':function(_0x172eb6){return _0x172eb6();}},_0x4d72fb=_0x4056bf[_0x579e99(0x1f9)];let _0x49cb20=0x0;const _0x2ebc0d=async()=>{const _0x53497b=_0x579e99;if(_0x30c849[_0x53497b(0x205)](_0x49cb20,_0xa37f94))throw _0x30c849['utqpp'];const _0x46a389=sendMessagePool[_0x4056bf[_0x53497b(0x1f9)]];if(_0x46a389)return await sleep(0x1f4),_0x49cb20+=0x1f4,await _0x30c849[_0x53497b(0x200)](_0x2ebc0d);else return;};return await _0x30c849[_0x579e99(0x231)](_0x2ebc0d),new Promise((_0xc68700,_0x205d12)=>{const _0x1fa05a=_0x579e99,_0x4df701={'jZTvK':function(_0x2ec7e9,_0x1e2175){const _0x24d11f=_0x31ec;return _0x30c849[_0x24d11f(0x222)](_0x2ec7e9,_0x1e2175);},'SWcnW':function(_0x22d39a,_0x2a53cc){const _0x59d090=_0x31ec;return _0x30c849[_0x59d090(0x222)](_0x22d39a,_0x2a53cc);}};let _0x5a388f=![],_0x3a96ad=null;const _0x4b5ba7=_0x30c849['qJfCt'](randomUUID);sendSuccessCBMap[_0x4b5ba7]=_0x599b3b=>{const _0x2814a4=_0x31ec;if(_0x4df701[_0x2814a4(0x20f)](_0x599b3b[_0x2814a4(0x220)],_0x3a96ad?.['msgId'])){if(_0x4df701['SWcnW'](_0x599b3b[_0x2814a4(0x202)],0x2))return delete sendSuccessCBMap[_0x4b5ba7],_0x5a388f=!![],_0xc68700(_0x599b3b),!![];return![];}return![];},sendMessagePool[_0x4d72fb]=async _0x36c748=>{delete sendMessagePool[_0x4d72fb],_0x3a96ad=_0x36c748;},setTimeout(()=>{if(_0x5a388f)return;delete sendMessagePool[_0x4d72fb],delete sendSuccessCBMap[_0x4b5ba7],_0x205d12('发送超时');},_0xa37f94);const _0xf20bc0=napCatCore[_0x1fa05a(0x22c)][_0x1fa05a(0x1f8)]()[_0x1fa05a(0x230)]('0',_0x4056bf,_0x501218,new Map());});}static async[_0xeed2cf(0x22f)](_0x8ae810,_0x10f9b7,_0x77538c){}static async[_0xeed2cf(0x22d)](_0x42ab09,_0x297b2a,_0x302533){const _0x33e15e=_0xeed2cf,_0x58533e={'WHfSm':function(_0x51b30a,_0x3820ae){return _0x51b30a(_0x3820ae);},'qjMvq':_0x33e15e(0x21b),'LReRE':'com.tencent.multimsg','sTsLl':function(_0x612f97,_0x689e13){return _0x612f97==_0x689e13;},'XwEHk':function(_0x84d00a,_0x5eb380){return _0x84d00a==_0x5eb380;},'XAMxq':function(_0x2400b7,_0x3a7423,_0x458b64){return _0x2400b7(_0x3a7423,_0x458b64);}},_0x492a4d=_0x302533[_0x33e15e(0x215)](_0x2d0e5e=>{const _0x2b970d=_0x33e15e;return{'msgId':_0x2d0e5e,'senderShowName':selfInfo[_0x2b970d(0x208)]};});return new Promise((_0x4e6338,_0x315f0a)=>{const _0x3c081f=_0x33e15e,_0x716186={'aTYjm':_0x58533e[_0x3c081f(0x22a)],'XgRsl':function(_0x4c9a6f,_0x3b1738){const _0x506b63=_0x3c081f;return _0x58533e[_0x506b63(0x209)](_0x4c9a6f,_0x3b1738);},'CVxII':function(_0x4a425a,_0x1204ab){const _0x5db882=_0x3c081f;return _0x58533e[_0x5db882(0x22b)](_0x4a425a,_0x1204ab);},'TXeTX':function(_0x3bd3bb,_0x1cc044){return _0x3bd3bb(_0x1cc044);}};let _0x526996=![];const _0x480a6f=new MsgListener(),_0x8d59aa=_0x4068ba=>{const _0x238c63=_0x3c081f,_0x5ead4a=_0x4068ba[_0x238c63(0x1f7)]['find'](_0x2c5ad9=>_0x2c5ad9[_0x238c63(0x214)]);if(!_0x5ead4a)return;const _0x560822=JSON[_0x238c63(0x21e)](_0x5ead4a[_0x238c63(0x214)][_0x238c63(0x211)]);if(_0x560822['app']!=_0x716186['aTYjm'])return;_0x716186[_0x238c63(0x1fd)](_0x4068ba[_0x238c63(0x1f9)],_0x297b2a['peerUid'])&&_0x716186[_0x238c63(0x204)](_0x4068ba['senderUid'],selfInfo[_0x238c63(0x21a)])&&(_0x526996=!![],napCatCore[_0x238c63(0x22c)][_0x238c63(0x1f8)]()[_0x238c63(0x229)](_0x3d2f31),_0x716186['TXeTX'](_0x4e6338,_0x4068ba));};_0x480a6f[_0x3c081f(0x210)]=_0x8d59aa;const _0x3d2f31=napCatCore['addListener'](_0x480a6f);_0x58533e[_0x3c081f(0x203)](setTimeout,()=>{const _0x31b177=_0x3c081f;!_0x526996&&(napCatCore['session'][_0x31b177(0x1f8)]()[_0x31b177(0x229)](_0x3d2f31),_0x58533e[_0x31b177(0x21d)](_0x315f0a,_0x58533e[_0x31b177(0x228)]));},0x1388),napCatCore[_0x3c081f(0x22c)]['getMsgService']()[_0x3c081f(0x201)](_0x492a4d,_0x42ab09,_0x297b2a,[],new Map());});}}