function _0x49ca(_0x5a9530,_0x3057fd){const _0x4bd863=_0x4bd8();return _0x49ca=function(_0x49cac9,_0x52f9e0){_0x49cac9=_0x49cac9-0xd8;let _0x537a86=_0x4bd863[_0x49cac9];return _0x537a86;},_0x49ca(_0x5a9530,_0x3057fd);}const _0x5ef2ef=_0x49ca;(function(_0x4af004,_0x52b691){const _0x1a44e9=_0x49ca,_0x289a0c=_0x4af004();while(!![]){try{const _0x63947e=-parseInt(_0x1a44e9(0x11a))/0x1*(-parseInt(_0x1a44e9(0x10b))/0x2)+parseInt(_0x1a44e9(0xe8))/0x3*(-parseInt(_0x1a44e9(0x116))/0x4)+parseInt(_0x1a44e9(0x108))/0x5*(parseInt(_0x1a44e9(0xde))/0x6)+parseInt(_0x1a44e9(0x10c))/0x7+-parseInt(_0x1a44e9(0xf1))/0x8+-parseInt(_0x1a44e9(0x11d))/0x9+parseInt(_0x1a44e9(0xec))/0xa;if(_0x63947e===_0x52b691)break;else _0x289a0c['push'](_0x289a0c['shift']());}catch(_0x53cf2d){_0x289a0c['push'](_0x289a0c['shift']());}}}(_0x4bd8,0xbcb5d));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();function _0x4bd8(){const _0x1518b9=['setMsgRead','发送超时','then','CCxss','TqSCs','mugYM','uid','uHbsv','iLCie','item','wayZr','com.tencent.multimsg','getMsgsBySeqAndCount','addListener','onAddSendMsg','chatType','forwardMsg','map','20gzazaM','DXdmW','recallMsg','6GEvqzY','51030emGLfe','nick','getMsgService','msgId','wVUfc','ALDjp','forEach','session','elements','length','109788mnOlLP','multiForwardMsg','vhiXo','app','424249lINmVY','juobg','find','10767600kUcJTH','getMsgHistory','转发消息超时','toString','获取群文件列表超时','boaxC','delete','fetchRecentContact','activateChat','KzNvT','1091346Sfuagw','setEmojiLike','getGroupFileList','sendStatus','setMsgEmojiLikes','QYvbm','HCaht','sendMsg','getMsgsByMsgId','IrUua','135LcuBJK','getMultiMsg','senderUid','VgszA','23536730RBOjoG','getMsgsIncludeSelf','peerUid','onGroupFileInfoUpdate','arkElement','9254416OEhWFA','getRichMediaService','jFZIG','catch','parse'];_0x4bd8=function(){return _0x1518b9;};return _0x4bd8();}msgListener[_0x5ef2ef(0xef)]=_0x4ca6c9=>{const _0x1dff1e=_0x5ef2ef,_0x4213d6={'vhiXo':function(_0x52be10,_0x1175d4){return _0x52be10(_0x1175d4);}};for(const [_0x1401c9,_0x470233]of GroupFileInfoUpdateTasks){_0x4213d6[_0x1dff1e(0x118)](_0x470233,_0x4ca6c9),GroupFileInfoUpdateTasks[_0x1dff1e(0xda)](_0x1401c9);}},msgListener[_0x5ef2ef(0x104)]=_0x590057=>{const _0xc9fd9e=_0x5ef2ef,_0x5b4b58={'wVUfc':function(_0x3f04f2,_0x12f0ba){return _0x3f04f2 instanceof _0x12f0ba;}};for(const [_0x411d02,_0x1fa971]of sentMsgTasks){_0x1fa971(_0x590057),sentMsgTasks['delete'](_0x411d02);}if(sendMessagePool[_0x590057[_0xc9fd9e(0xee)]]){const _0x36b71f=sendMessagePool[_0x590057[_0xc9fd9e(0xee)]]?.(_0x590057);_0x5b4b58[_0xc9fd9e(0x110)](_0x36b71f,Promise)&&_0x36b71f['then']()[_0xc9fd9e(0xf4)](logError);}},msgListener['onMsgInfoListUpdate']=_0x1a9f87=>{const _0x525079=_0x5ef2ef,_0x30d7fb={'uHbsv':function(_0x48b73d,_0x44382a){return _0x48b73d(_0x44382a);},'wayZr':function(_0x11d732,_0x2db0f6){return _0x11d732 instanceof _0x2db0f6;}};_0x1a9f87[_0x525079(0x112)](_0x383b00=>{const _0x36a7f9=_0x525079,_0x333ad6={'jFZIG':function(_0x3ea479,_0x57abfc){const _0x20b2ed=_0x49ca;return _0x30d7fb[_0x20b2ed(0xfd)](_0x3ea479,_0x57abfc);},'iLCie':function(_0x4178c3,_0x4e4597){const _0x243c26=_0x49ca;return _0x30d7fb[_0x243c26(0x100)](_0x4178c3,_0x4e4597);}};new Promise((_0x25a151,_0x3e5473)=>{const _0x579151=_0x49ca;for(const _0x5c41f0 in sendSuccessCBMap){const _0x55974c=sendSuccessCBMap[_0x5c41f0],_0x2c2f38=_0x333ad6[_0x579151(0xf3)](_0x55974c,_0x383b00),_0x15f3bc=_0x43b2b5=>{_0x43b2b5&&delete sendSuccessCBMap[_0x5c41f0];};_0x333ad6[_0x579151(0xfe)](_0x2c2f38,Promise)?_0x2c2f38[_0x579151(0xf8)](_0x15f3bc):_0x333ad6[_0x579151(0xf3)](_0x15f3bc,_0x2c2f38);}})[_0x36a7f9(0xf8)]()['catch'](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x1feb25=_0x49ca;napCatCore[_0x1feb25(0x103)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x5ef2ef(0xdf)](_0x22e742,_0x30c90e,_0x347e99,_0x192356=!![]){const _0x9c139e=_0x5ef2ef,_0x2c06c1={'IrUua':function(_0x12cccd,_0x3eed50){return _0x12cccd>_0x3eed50;}};return _0x347e99=_0x347e99[_0x9c139e(0x120)](),napCatCore[_0x9c139e(0x113)]['getMsgService']()[_0x9c139e(0xe2)](_0x22e742,_0x30c90e,_0x347e99,_0x2c06c1[_0x9c139e(0xe7)](_0x347e99[_0x9c139e(0x115)],0x3)?'2':'1',_0x192356);}static async[_0x5ef2ef(0xe9)](_0x2d9e09,_0x4a3f83,_0x3dd057){const _0xff40df=_0x5ef2ef;return napCatCore['session'][_0xff40df(0x10e)]()[_0xff40df(0xe9)](_0x2d9e09,_0x4a3f83,_0x3dd057);}static async[_0x5ef2ef(0xe6)](_0x8aa5b5,_0x5c99ac){return await napCatCore['session']['getMsgService']()['getMsgsByMsgId'](_0x8aa5b5,_0x5c99ac);}static async[_0x5ef2ef(0x102)](_0x5a48c0,_0x4c47a7,_0xc2c157,_0x20d24e,_0x1ef746){const _0x3e6e99=_0x5ef2ef;return await napCatCore[_0x3e6e99(0x113)][_0x3e6e99(0x10e)]()[_0x3e6e99(0x102)](_0x5a48c0,_0x4c47a7,_0xc2c157,_0x20d24e,_0x1ef746);}static async[_0x5ef2ef(0xdc)](_0x254dbb){}static async['activateChatAndGetHistory'](_0x522cc0){}static async[_0x5ef2ef(0xf6)](_0xe2efab){const _0x2236de=_0x5ef2ef;return napCatCore['session'][_0x2236de(0x10e)]()[_0x2236de(0xf6)](_0xe2efab);}static async[_0x5ef2ef(0xe0)](_0x1e34fc,_0x53da84){const _0x284967={'KzNvT':function(_0x804015,_0x3666db){return _0x804015(_0x3666db);},'mbmKi':function(_0x1cfa8f,_0x114c5a,_0x6b6fd3){return _0x1cfa8f(_0x114c5a,_0x6b6fd3);},'syabj':function(_0x58ffaa){return _0x58ffaa();}};return new Promise(async(_0x4e8f93,_0x303504)=>{const _0xf71afb=_0x49ca;let _0xae0058=![];_0x284967['mbmKi'](setTimeout,()=>{const _0x24d6f9=_0x49ca;!_0xae0058&&_0x303504(_0x24d6f9(0xd8));},0x1388);const _0x5d6cdf=_0x4a8c0f=>{const _0x56a543=_0x49ca;_0xae0058=!![],_0x284967[_0x56a543(0xdd)](_0x4e8f93,_0x4a8c0f[_0x56a543(0xff)]);};GroupFileInfoUpdateTasks['set'](_0x284967['syabj'](randomUUID),_0x5d6cdf),await napCatCore['session'][_0xf71afb(0xf2)]()[_0xf71afb(0xe0)](_0x1e34fc,_0x53da84);});}static async[_0x5ef2ef(0x11e)](_0xd7f4c9,_0xa04289,_0x330610){const _0x15362e=_0x5ef2ef;return napCatCore[_0x15362e(0x113)][_0x15362e(0x10e)]()[_0x15362e(0xed)](_0xd7f4c9,_0xa04289,_0x330610,!![]);}static async[_0x5ef2ef(0xdb)](){}static async[_0x5ef2ef(0x10a)](_0x75bf2f,_0x23a159){const _0x46ebe5=_0x5ef2ef;await napCatCore['session'][_0x46ebe5(0x10e)]()[_0x46ebe5(0x10a)]({'chatType':_0x75bf2f[_0x46ebe5(0x105)],'peerUid':_0x75bf2f[_0x46ebe5(0xee)]},_0x23a159);}static async[_0x5ef2ef(0xe5)](_0x2b8747,_0xb7a9f8,_0x18caed=!![],_0x40f6c2=0x2710){const _0x13231b=_0x5ef2ef,_0x2997c8={'OKwvi':function(_0x15b037,_0x5a9bca){return _0x15b037(_0x5a9bca);},'ALDjp':function(_0xb6fd5e){return _0xb6fd5e();},'FKxVd':_0x13231b(0xf7),'mugYM':function(_0xdfc0fe,_0x5ebfba){return _0xdfc0fe===_0x5ebfba;},'juobg':function(_0x1ee7c9,_0x2a125f){return _0x1ee7c9===_0x2a125f;},'VgszA':function(_0x22fb9f,_0x3a6c7a,_0x4ffe44){return _0x22fb9f(_0x3a6c7a,_0x4ffe44);}},_0x4987ea=_0x2b8747[_0x13231b(0xee)];let _0x36c297=0x0;const _0x332482=async()=>{const _0x5675ea=_0x13231b;if(_0x36c297>_0x40f6c2)throw _0x5675ea(0xf7);const _0x2da9ab=sendMessagePool[_0x2b8747[_0x5675ea(0xee)]];if(_0x2da9ab)return await _0x2997c8['OKwvi'](sleep,0x1f4),_0x36c297+=0x1f4,await _0x2997c8[_0x5675ea(0x111)](_0x332482);else return;};return await _0x2997c8[_0x13231b(0x111)](_0x332482),new Promise((_0x39f0fc,_0x20e373)=>{const _0x1d8870=_0x13231b,_0x1991e1={'DXdmW':function(_0x33243e,_0x2ba642){const _0x3f0016=_0x49ca;return _0x2997c8[_0x3f0016(0xfb)](_0x33243e,_0x2ba642);},'boaxC':function(_0x3fd8fd,_0x276fd6){const _0x16529b=_0x49ca;return _0x2997c8[_0x16529b(0x11b)](_0x3fd8fd,_0x276fd6);}};let _0x3b9d33=![],_0x3b4a9f=null;const _0x5be212=randomUUID();sendSuccessCBMap[_0x5be212]=_0x40f03f=>{const _0x4828e4=_0x49ca;if(_0x1991e1[_0x4828e4(0x109)](_0x40f03f[_0x4828e4(0x10f)],_0x3b4a9f?.['msgId'])){if(_0x1991e1[_0x4828e4(0xd9)](_0x40f03f[_0x4828e4(0xe1)],0x2))return delete sendSuccessCBMap[_0x5be212],_0x3b9d33=!![],_0x39f0fc(_0x40f03f),!![];return![];}return![];},sendMessagePool[_0x4987ea]=async _0xfdb010=>{delete sendMessagePool[_0x4987ea],_0x3b4a9f=_0xfdb010;},_0x2997c8[_0x1d8870(0xeb)](setTimeout,()=>{if(_0x3b9d33)return;delete sendMessagePool[_0x4987ea],delete sendSuccessCBMap[_0x5be212],_0x20e373(_0x2997c8['FKxVd']);},_0x40f6c2);const _0x9d55d4=napCatCore[_0x1d8870(0x113)][_0x1d8870(0x10e)]()[_0x1d8870(0xe5)]('0',_0x2b8747,_0xb7a9f8,new Map());});}static async[_0x5ef2ef(0x106)](_0x2bc1ae,_0x43f210,_0x7cbb8a){const _0x1d7138=_0x5ef2ef;return napCatCore[_0x1d7138(0x113)][_0x1d7138(0x10e)]()[_0x1d7138(0x106)](_0x7cbb8a,_0x2bc1ae,[_0x43f210],new Map());}static async[_0x5ef2ef(0x117)](_0x254c8d,_0x18ac98,_0x40a51){const _0x778e6=_0x5ef2ef,_0x38758a={'HCaht':function(_0x3f6152,_0x4468cd){return _0x3f6152(_0x4468cd);},'jlicW':_0x778e6(0x11f),'vlVub':function(_0x3e4138,_0x28460f){return _0x3e4138!=_0x28460f;},'TqSCs':_0x778e6(0x101),'CCxss':function(_0x557c57){return _0x557c57();}},_0x7d6eff=_0x40a51[_0x778e6(0x107)](_0x4a28be=>{const _0x287887=_0x778e6;return{'msgId':_0x4a28be,'senderShowName':selfInfo[_0x287887(0x10d)]};});return new Promise((_0x336654,_0x3cbd54)=>{const _0x46d0c7=_0x778e6,_0x21aa1c={'QYvbm':function(_0xe68463,_0x57a191){return _0x38758a['vlVub'](_0xe68463,_0x57a191);},'VeqGb':_0x38758a[_0x46d0c7(0xfa)],'BdtnU':function(_0x2d7396,_0x4d78d4){return _0x2d7396==_0x4d78d4;}};let _0x50d9e0=![];const _0x9e6880=_0xbf21df=>{const _0x10ac94=_0x46d0c7,_0x4c9d2a=_0xbf21df[_0x10ac94(0x114)][_0x10ac94(0x11c)](_0x4b7f5f=>_0x4b7f5f[_0x10ac94(0xf0)]);if(!_0x4c9d2a)return;const _0x405c66=JSON[_0x10ac94(0xf5)](_0x4c9d2a[_0x10ac94(0xf0)]['bytesData']);if(_0x21aa1c[_0x10ac94(0xe3)](_0x405c66[_0x10ac94(0x119)],_0x21aa1c['VeqGb']))return;_0x21aa1c['BdtnU'](_0xbf21df['peerUid'],_0x18ac98['peerUid'])&&_0xbf21df[_0x10ac94(0xea)]==selfInfo[_0x10ac94(0xfc)]&&(_0x50d9e0=!![],_0x336654(_0xbf21df));};sentMsgTasks['set'](_0x38758a[_0x46d0c7(0xf9)](randomUUID),_0x9e6880),setTimeout(()=>{const _0x5435b8=_0x46d0c7;!_0x50d9e0&&_0x38758a[_0x5435b8(0xe4)](_0x3cbd54,_0x38758a['jlicW']);},0x1388),napCatCore[_0x46d0c7(0x113)][_0x46d0c7(0x10e)]()['multiForwardMsgWithComment'](_0x7d6eff,_0x254c8d,_0x18ac98,[],new Map());});}}