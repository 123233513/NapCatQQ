(function(_0x4c3ae3,_0x30e41e){const _0x325341=_0x26b5,_0x3c341f=_0x4c3ae3();while(!![]){try{const _0x27be39=parseInt(_0x325341(0x163))/0x1*(-parseInt(_0x325341(0x17c))/0x2)+-parseInt(_0x325341(0x166))/0x3*(parseInt(_0x325341(0x1a9))/0x4)+parseInt(_0x325341(0x170))/0x5*(parseInt(_0x325341(0x187))/0x6)+-parseInt(_0x325341(0x19c))/0x7*(-parseInt(_0x325341(0x17f))/0x8)+parseInt(_0x325341(0x195))/0x9+parseInt(_0x325341(0x19f))/0xa*(parseInt(_0x325341(0x191))/0xb)+-parseInt(_0x325341(0x182))/0xc;if(_0x27be39===_0x30e41e)break;else _0x3c341f['push'](_0x3c341f['shift']());}catch(_0x25f489){_0x3c341f['push'](_0x3c341f['shift']());}}}(_0x105d,0xe6baf));import{logDebug}from'@/common/utils/log';import{NTQQUserApi}from'./user';import{selfInfo}from'../data';function _0x105d(){const _0x2a6ea2=['p_skey','mfByb','9079576xVDWjA','&type=0','gesAo','17652552WeWNcu','&ark=','hUtbF','POST','track_info','10145478zQEjYB','replace','IxdTU','genBkn','uploadImageForOpenPlatform','tVxyU','FdCez','QQ音乐','jHxYq','tag','1012KuuBZS','mid',';\x20uin=o','com.tencent.qqreader.share','10526562pSAQgy','https://api.leafone.cn/api/qqmusic?id=','CFccX','LrzBB','\x5c/\x5c/','songinfo','prompt','7zXKYQh','OikiP','IvBFV','105540WRMovI','TOIbg','GET','KiIbc',';\x20p_uin=o','https://i.y.qq.com/v8/playsong.html?songmid=','url','aSlnD','ObXHG','jQhLR','30204VuVpNt','Vqjum','jsMSp','DMGWp','igPqM','signed_ark','music','name','cover','preview','TcyoC','LxdcZ','SEEeC','https://p.qpic.cn/qqconnect/0/app_100497308_1626060999/100?max-age=2592000&t=0','https://h5.qzone.qq.com/v2/vip/tx/trpc/ark-share/GenNewSignedArk?g_tk=','BJFpg','[分享]','application/json','data','xJcTQ','getQzoneCookies','5eJtHZo','HttpGetJson','miniapp','702qROQVo','uin=o10086','MiniApp\x20JSON\x20消息生成失败','znGmc','tianxuan.imgJumpArk','jumpUrl','卡片图片不正确','uin','com.tencent.miniapp.lua','siQsq','5HBUeYf','singer','unlink','p_skey=','https://ws.stream.qqmusic.qq.com/','9a63343c32d5a16bcde653eb97faa25d','LmayI','VgmxA','sIgmW','&type=8','},\x22module\x22:\x22music.pf_song_detail_svr\x22}}','normal','313358EiJhoV'];_0x105d=function(){return _0x2a6ea2;};return _0x105d();}import{RequestUtil}from'@/common/utils/request';import{WebApi}from'./webapi';import{checkFileReceived2,uri2local}from'@/common/utils/file';import _0x10367b from'node:fs';export async function SignMiniApp(_0x44e2db){const _0x3e275b=_0x26b5,_0x5c26a3={'diZXl':_0x3e275b(0x16a),'LmayI':_0x3e275b(0x165),'LxdcZ':_0x3e275b(0x17b),'FdCez':_0x3e275b(0x199),'igPqM':function(_0x4fb066,_0x177003){return _0x4fb066+_0x177003;},'ObXHG':function(_0x29c601,_0xf1af91){return _0x29c601+_0xf1af91;},'jHxYq':function(_0x25709e,_0x3cb09a){return _0x25709e+_0x3cb09a;},'TBkgs':_0x3e275b(0x173),'jQhLR':';\x20skey=','znGmc':_0x3e275b(0x1a3),'VgmxA':_0x3e275b(0x193),'OikiP':function(_0x1d4319,_0x7d1016){return _0x1d4319+_0x7d1016;},'ZXgNT':function(_0x31e32c,_0x18d6b4){return _0x31e32c+_0x18d6b4;},'AqHvg':_0x3e275b(0x183),'Vqjum':_0x3e275b(0x1a1),'WuczK':function(_0x3a9ce9,_0x2b5024,_0x17889d){return _0x3a9ce9(_0x2b5024,_0x17889d);},'TOIbg':_0x3e275b(0x168)};let _0x4ef910={'app':_0x3e275b(0x16e),'bizsrc':_0x5c26a3['diZXl'],'view':_0x5c26a3[_0x3e275b(0x176)],'prompt':_0x44e2db[_0x3e275b(0x19b)],'config':{'type':_0x5c26a3[_0x3e275b(0x1b4)],'forward':0x1,'autosize':0x0},'meta':{'miniapp':{'title':_0x44e2db['title'],'preview':_0x44e2db[_0x3e275b(0x1b2)]['replace'](/\\/g,_0x5c26a3[_0x3e275b(0x18d)]),'jumpUrl':_0x44e2db[_0x3e275b(0x16b)][_0x3e275b(0x188)](/\\/g,_0x5c26a3[_0x3e275b(0x18d)]),'tag':_0x44e2db[_0x3e275b(0x190)],'tagIcon':_0x44e2db['tagIcon']['replace'](/\\/g,_0x5c26a3[_0x3e275b(0x18d)]),'source':_0x44e2db['source'],'sourcelogo':_0x44e2db['sourcelogo']['replace'](/\\/g,_0x5c26a3['FdCez'])}}},_0x48a969=await NTQQUserApi[_0x3e275b(0x162)]();const _0x170a9b=WebApi[_0x3e275b(0x18a)](_0x48a969[_0x3e275b(0x17d)]),_0x8115ba=_0x5c26a3[_0x3e275b(0x1ad)](_0x5c26a3['igPqM'](_0x5c26a3[_0x3e275b(0x1a7)](_0x5c26a3[_0x3e275b(0x18f)](_0x5c26a3[_0x3e275b(0x1ad)](_0x5c26a3['TBkgs'],_0x48a969[_0x3e275b(0x17d)]),_0x5c26a3[_0x3e275b(0x1a8)]),_0x48a969['skey'])+_0x5c26a3[_0x3e275b(0x169)],selfInfo[_0x3e275b(0x16d)]),_0x5c26a3[_0x3e275b(0x177)])+selfInfo[_0x3e275b(0x16d)];let _0x29bcf8=_0x5c26a3[_0x3e275b(0x19d)](_0x5c26a3['ZXgNT'](_0x3e275b(0x15c)+_0x170a9b,_0x5c26a3['AqHvg']),encodeURIComponent(JSON['stringify'](_0x4ef910))),_0x172d5d='';try{let _0x3b2472=await RequestUtil[_0x3e275b(0x164)](_0x29bcf8,_0x5c26a3[_0x3e275b(0x1aa)],undefined,{'Cookie':_0x8115ba});_0x172d5d=_0x3b2472[_0x3e275b(0x160)][_0x3e275b(0x1ae)];}catch(_0x19c165){_0x5c26a3['WuczK'](logDebug,_0x5c26a3[_0x3e275b(0x1a0)],_0x19c165);}return _0x172d5d;}export async function SignMusicInternal(_0x2e3196,_0x194655,_0x5ce703,_0x3e41c0,_0x5318c4){const _0x4ccf01=_0x26b5,_0x9f33dd={'hUtbF':'https://mqq.reader.qq.com/api/mqq/share/card?accessToken&_csrfToken&source=c0003','mfByb':_0x4ccf01(0x194),'jsMSp':_0x4ccf01(0x175),'TcyoC':_0x4ccf01(0x17b),'NGmdw':function(_0x6af3cc,_0x87a1a5){return _0x6af3cc+_0x87a1a5;},'IxdTU':_0x4ccf01(0x1a4),'tVxyU':_0x4ccf01(0x180),'SEEeC':_0x4ccf01(0x1b6),'gesAo':function(_0x3cd8ab,_0x2542fb){return _0x3cd8ab+_0x2542fb;},'xJcTQ':'0.0.0.1','RYrsH':_0x4ccf01(0x185),'FzsTc':_0x4ccf01(0x167),'uciNs':_0x4ccf01(0x15f)};let _0x3b5122=_0x9f33dd[_0x4ccf01(0x184)],_0xee409c={'app':_0x9f33dd[_0x4ccf01(0x17e)],'config':{'ctime':0x6670467e,'forward':0x1,'token':_0x9f33dd[_0x4ccf01(0x1ab)],'type':_0x9f33dd[_0x4ccf01(0x1b3)]},'extra':{'app_type':0x1,'appid':0x5fd779c,'msg_seq':0xc7a7f60e2d080800,'uin':0x674d9a89},'meta':{'music':{'action':'','android_pkg_name':'','app_type':0x1,'appid':0x5fd779c,'ctime':0x6670467e,'desc':_0x194655,'jumpUrl':_0x9f33dd['NGmdw'](_0x9f33dd[_0x4ccf01(0x189)]+_0x3e41c0,_0x9f33dd[_0x4ccf01(0x18c)]),'musicUrl':_0x5318c4,'preview':_0x5ce703,'cover':_0x5ce703,'sourceMsgId':'0','source_icon':_0x9f33dd[_0x4ccf01(0x1b5)],'source_url':'','tag':_0x4ccf01(0x18e),'title':_0x2e3196,'uin':0x2766}},'prompt':_0x9f33dd[_0x4ccf01(0x181)](_0x4ccf01(0x15e),_0x2e3196),'ver':_0x9f33dd[_0x4ccf01(0x161)],'view':_0x4ccf01(0x1af)},_0x1b0234=await RequestUtil[_0x4ccf01(0x164)](_0x3b5122,_0x9f33dd['RYrsH'],_0xee409c,{'Cookie':_0x9f33dd['FzsTc'],'Content-Type':_0x9f33dd['uciNs']});return _0x1b0234;}export async function CreateMusicThridWay0(_0x284b37='',_0x120fd8=''){const _0x61e7c2=_0x26b5,_0x933ca2={'IvBFV':function(_0x124cb9,_0x14f26c){return _0x124cb9+_0x14f26c;},'DMGWp':'https://u.y.qq.com/cgi-bin/musicu.fcg?format=json&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq.json&needNewCode=0&data={\x22comm\x22:{\x22ct\x22:24,\x22cv\x22:0},\x22songinfo\x22:{\x22method\x22:\x22get_song_detail_yqq\x22,\x22param\x22:{\x22song_type\x22:0,\x22song_mid\x22:\x22\x22,\x22song_id\x22:','BJFpg':_0x61e7c2(0x17a),'aSlnD':_0x61e7c2(0x1a1),'IkYwP':function(_0x41efdf,_0x264d80){return _0x41efdf+_0x264d80;},'LrzBB':function(_0xd9b861,_0x506d99){return _0xd9b861+_0x506d99;},'ErTEg':_0x61e7c2(0x179)};if(_0x120fd8==''){let _0x4ed9b9=await RequestUtil['HttpGetJson'](_0x933ca2[_0x61e7c2(0x19e)](_0x933ca2[_0x61e7c2(0x19e)](_0x933ca2[_0x61e7c2(0x1ac)],_0x284b37),_0x933ca2[_0x61e7c2(0x15d)]),_0x933ca2[_0x61e7c2(0x1a6)],undefined);_0x120fd8=_0x4ed9b9[_0x61e7c2(0x19a)]?.[_0x61e7c2(0x160)]?.[_0x61e7c2(0x186)][_0x61e7c2(0x192)];}let _0x541d86=await RequestUtil['HttpGetJson'](_0x933ca2['IkYwP'](_0x933ca2[_0x61e7c2(0x198)](_0x61e7c2(0x196),_0x120fd8),_0x933ca2['ErTEg']),_0x933ca2[_0x61e7c2(0x1a6)],undefined);return{..._0x541d86[_0x61e7c2(0x160)],'mid':_0x120fd8};}function _0x26b5(_0x5b4547,_0x3c3292){const _0x105dc2=_0x105d();return _0x26b5=function(_0x26b5d0,_0x95f7aa){_0x26b5d0=_0x26b5d0-0x15c;let _0x224425=_0x105dc2[_0x26b5d0];return _0x224425;},_0x26b5(_0x5b4547,_0x3c3292);}export async function CreateMusicThridWay1(_0x832357='',_0x882d93=''){}export async function SignMusicWrapper(_0x5b4f40=''){const _0x245ffc=_0x26b5,_0x496b80={'siQsq':function(_0x10835f,_0x3b6134){return _0x10835f(_0x3b6134);},'CFccX':function(_0x3e4c91,_0x381a21){return _0x3e4c91||_0x381a21;},'PFtVT':function(_0x1b2900,_0x1c2f8c,_0x1c6025,_0x370543,_0x20be9f,_0x3996ec){return _0x1b2900(_0x1c2f8c,_0x1c6025,_0x370543,_0x20be9f,_0x3996ec);},'KiIbc':function(_0x284967,_0x166264){return _0x284967+_0x166264;},'sIgmW':_0x245ffc(0x174)};let _0x1a6eff=await CreateMusicThridWay0(_0x5b4f40);const {path:_0x111e3e,isLocal:_0xfc0b5a,errMsg:_0x1dce39}=await _0x496b80[_0x245ffc(0x16f)](uri2local,_0x1a6eff[_0x245ffc(0x1b1)]);if(_0x496b80[_0x245ffc(0x197)](_0x1dce39,!_0x111e3e))throw _0x245ffc(0x16c);await checkFileReceived2(_0x111e3e,0x1388);let _0x2f2009=await RequestUtil[_0x245ffc(0x18b)](_0x111e3e);!_0xfc0b5a&&_0x10367b[_0x245ffc(0x172)](_0x111e3e,()=>{});let _0x56eb3d=await _0x496b80['PFtVT'](SignMusicInternal,_0x1a6eff[_0x245ffc(0x1b0)],_0x1a6eff[_0x245ffc(0x171)],_0x2f2009,_0x1a6eff[_0x245ffc(0x192)],_0x496b80[_0x245ffc(0x1a2)](_0x496b80[_0x245ffc(0x178)],_0x1a6eff[_0x245ffc(0x1a5)]));return _0x56eb3d;}