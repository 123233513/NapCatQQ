const _0x213328=_0x3b6d;(function(_0x166ade,_0x3a4656){const _0x4a2405=_0x3b6d,_0x41b8e2=_0x166ade();while(!![]){try{const _0x1390aa=-parseInt(_0x4a2405(0x1c6))/0x1+parseInt(_0x4a2405(0x1bf))/0x2+parseInt(_0x4a2405(0x1bd))/0x3+parseInt(_0x4a2405(0x1d9))/0x4+-parseInt(_0x4a2405(0x1b6))/0x5*(parseInt(_0x4a2405(0x1ca))/0x6)+-parseInt(_0x4a2405(0x1c9))/0x7+-parseInt(_0x4a2405(0x1c1))/0x8*(-parseInt(_0x4a2405(0x1a8))/0x9);if(_0x1390aa===_0x3a4656)break;else _0x41b8e2['push'](_0x41b8e2['shift']());}catch(_0x3c4656){_0x41b8e2['push'](_0x41b8e2['shift']());}}}(_0x2179,0xa5907));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';function _0x3b6d(_0x1042e1,_0x39a681){const _0x217907=_0x2179();return _0x3b6d=function(_0x3b6d11,_0x39e026){_0x3b6d11=_0x3b6d11-0x18e;let _0x31e16=_0x217907[_0x3b6d11];return _0x31e16;},_0x3b6d(_0x1042e1,_0x39a681);}import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';function _0x2179(){const _0x5b96af=['uin','pAjCE','getPSkey','vjqcm','eHiDN','entries','assign','4250292TLADvY','keyIndex','getUserDetailInfo\x20timeout','fromEntries','skey','onLoginSuccess','DqEiW','getProfileLikeService','yYBTv','&clientkey=','mqZNt','dJHYS','YfzSk','UXFkN','PskeyData','pCDcW','iFDaU','lXjFO','getMsgService','setBuddyProfileLike','getRobotUinRange','getUserDetailInfoWithBizInfo','forceFetchClientKey','ZzGIE','uid','like','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','getPskey','4568931ITGoGt','setHeader','addListener','response','PskeyTime','HttpsGetCookies','onProfileDetailInfoChanged','session','then','ObKoM','getRobotService','getUserDetailInfo','length','robotUinRanges','4245fzlpBP','CreatTime','getProfileService','errMsg','CUeRh','rJVIN','set','3879603eqIDaD','get','323180UiGUgC','OUOGC','8StsFGm','vWQif','getUserInfo','forEach','delete','1328932NxdAjk','domainPskeyMap','获取Pskey失败','3601381zCcdFc','3558VQefEG','Skey','setStatus','now','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','getSelfInfo','mLCAG','请求获取Skey时失败'];_0x2179=function(){return _0x5b96af;};return _0x2179();}const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x213328(0x1ae)]=_0x1c846f=>{const _0x5e09bd=_0x213328;userInfoCache[_0x1c846f[_0x5e09bd(0x1a4)]]=_0x1c846f,userDetailHandlers[_0x5e09bd(0x1c4)](_0x18c672=>_0x18c672(_0x1c846f));},setTimeout(()=>{const _0x21e7c5=_0x213328;napCatCore[_0x21e7c5(0x191)](()=>{const _0x29c7d3=_0x21e7c5;napCatCore[_0x29c7d3(0x1aa)](profileListener);});},0x64);export class NTQQUserApi{static async['setSelfOnlineStatus'](_0x514b7f,_0x15e74e,_0x10243c){const _0x11250a=_0x213328;return napCatCore[_0x11250a(0x1af)][_0x11250a(0x19e)]()[_0x11250a(0x1cc)]({'status':_0x514b7f,'extStatus':_0x15e74e,'batteryStatus':_0x10243c});}static async[_0x213328(0x1a5)](_0x97f4c8,_0x473333=0x1){const _0x5a8a5a=_0x213328;return napCatCore[_0x5a8a5a(0x1af)][_0x5a8a5a(0x193)]()[_0x5a8a5a(0x19f)]({'friendUid':_0x97f4c8,'sourceId':0x47,'doLikeCount':_0x473333,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x161fcc){const _0x379fa3=_0x213328,_0x5b47ad=napCatCore[_0x379fa3(0x1af)][_0x379fa3(0x1b8)]()[_0x379fa3(0x1a9)](_0x161fcc);return{'result':_0x5b47ad?.['result'],'errMsg':_0x5b47ad?.['errMsg']};}static async[_0x213328(0x1cf)](){}static async[_0x213328(0x1c3)](_0x4a36aa){}static async[_0x213328(0x1b3)](_0x10465f){const _0x3a6597=_0x213328,_0x44347a={'UXFkN':function(_0x39980c,_0x2d37a6){return _0x39980c===_0x2d37a6;},'vjqcm':function(_0x17373b,_0x1f0749){return _0x17373b(_0x1f0749);},'mLCAG':function(_0x1f36b3,_0x1bc760){return _0x1f36b3(_0x1bc760);},'ZzGIE':_0x3a6597(0x18e),'iFDaU':function(_0x10be20){return _0x10be20();},'DqEiW':function(_0x46f38e,_0x1cd824,_0x11e693){return _0x46f38e(_0x1cd824,_0x11e693);}},_0x44cf53=napCatCore[_0x3a6597(0x1af)]['getProfileService']();return new Promise((_0x7bb83a,_0x32237a)=>{const _0x573de2=_0x3a6597,_0x49cd29={'ObKoM':function(_0x44dbf4,_0x2ad7c0){const _0x5f53ef=_0x3b6d;return _0x44347a[_0x5f53ef(0x1d0)](_0x44dbf4,_0x2ad7c0);},'CUeRh':_0x44347a[_0x573de2(0x1a3)]},_0x1b718d=_0x44347a[_0x573de2(0x19c)](randomUUID);let _0x1d0ffd=![],_0xd39a0d=undefined,_0x31a8cd=!![];_0x44347a[_0x573de2(0x192)](setTimeout,()=>{const _0x18cc09=_0x573de2;!_0x1d0ffd&&(_0xd39a0d?_0x49cd29[_0x18cc09(0x1b1)](_0x7bb83a,_0xd39a0d):_0x49cd29[_0x18cc09(0x1b1)](_0x32237a,_0x49cd29[_0x18cc09(0x1ba)])),userDetailHandlers[_0x18cc09(0x1c5)](_0x1b718d);},0x1388),userDetailHandlers['set'](_0x1b718d,_0x516dbc=>{const _0x2d5352=_0x573de2;_0x44347a[_0x2d5352(0x199)](_0x516dbc[_0x2d5352(0x1a4)],_0x10465f)&&(uid2UinMap[_0x10465f]=_0x516dbc[_0x2d5352(0x1d2)],_0x31a8cd?(_0xd39a0d=_0x516dbc,_0x31a8cd=![]):(_0x1d0ffd=!![],_0x44347a[_0x2d5352(0x1d5)](_0x7bb83a,_0x516dbc)));}),_0x44cf53[_0x573de2(0x1a1)](_0x10465f,[0x0])[_0x573de2(0x1b0)](_0x40a5cd=>{});});}static async[_0x213328(0x1d4)](_0x563781,_0x582254=!![]){const _0x336c73=_0x213328,_0x2437f3={'pAjCE':function(_0x3d732a,_0x129874){return _0x3d732a||_0x129874;},'qgbUv':function(_0x3e0335,_0x475b1c){return _0x3e0335-_0x475b1c;},'lXjFO':function(_0x465400,_0x590a97){return _0x465400*_0x590a97;},'vxUka':_0x336c73(0x1c8)},_0x2a56f5=[],_0x132084={};for(const _0x343cfa in _0x563781){const _0x51897b=Credentials[_0x336c73(0x19a)][_0x336c73(0x1be)](_0x563781[_0x343cfa]),_0x32e76d=Credentials['PskeyTime'][_0x336c73(0x1be)](_0x563781[_0x343cfa]);_0x2437f3[_0x336c73(0x1d3)](!_0x51897b,!_0x32e76d)||_0x2437f3['qgbUv'](Date[_0x336c73(0x1cd)](),_0x32e76d)>_0x2437f3[_0x336c73(0x19d)](0x708,0x3e8)||!_0x582254?_0x2a56f5['push'](_0x563781[_0x343cfa]):_0x132084[_0x563781[_0x343cfa]]=_0x51897b;}let _0xda16a5={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x2a56f5[_0x336c73(0x1b4)]>0x0&&(_0xda16a5=await napCatCore['session']['getTipOffService']()[_0x336c73(0x1a7)](_0x2a56f5,!![]));const _0x46c339=_0xda16a5[_0x336c73(0x1c7)];for(const _0xa6264d of _0x46c339[_0x336c73(0x1d7)]()){Credentials['PskeyData'][_0x336c73(0x1bc)](_0xa6264d[0x0],_0xa6264d[0x1]),Credentials[_0x336c73(0x1ac)][_0x336c73(0x1bc)](_0xa6264d[0x0],Date['now']());}const _0x4b105e=Object[_0x336c73(0x1d8)](Object[_0x336c73(0x18f)](_0x46c339),_0x132084);if(_0xda16a5['result']===0x0)return _0x4b105e;else logError(_0x2437f3['vxUka'],_0xda16a5[_0x336c73(0x1b9)]);return{};}static async[_0x213328(0x1a0)](){const _0x40ac82=_0x213328,_0x3572e9=await napCatCore[_0x40ac82(0x1af)][_0x40ac82(0x1b2)]()['getRobotUinRange']({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x3572e9?.[_0x40ac82(0x1ab)]?.[_0x40ac82(0x1b5)];}static async['getSkey'](_0x5ef687=!![]){const _0x4aa0b5=_0x213328,_0x56100f={'pCDcW':function(_0x44375d,_0x4ff14b){return _0x44375d==_0x4ff14b;},'OUOGC':function(_0x50e7f7,_0x4b8a1d){return _0x50e7f7>_0x4b8a1d;},'vWQif':function(_0x44ddf1,_0x2f11f2){return _0x44ddf1-_0x2f11f2;},'yYBTv':function(_0x56e160,_0x5a9429){return _0x56e160*_0x5a9429;},'YfzSk':function(_0x2c3818,_0x58eaba){return _0x2c3818+_0x58eaba;},'xzydb':function(_0x52f291,_0x34838a){return _0x52f291+_0x34838a;},'jUyiN':_0x4aa0b5(0x1ce),'dJHYS':_0x4aa0b5(0x195),'jFxub':_0x4aa0b5(0x1a6),'eHiDN':function(_0x1a6325,_0x1ce701,_0x372306){return _0x1a6325(_0x1ce701,_0x372306);},'mqZNt':_0x4aa0b5(0x1d1),'rJVIN':_0x4aa0b5(0x190)};try{if(_0x56100f[_0x4aa0b5(0x19b)](Credentials[_0x4aa0b5(0x1b7)],0x0)||_0x56100f[_0x4aa0b5(0x1c0)](_0x56100f[_0x4aa0b5(0x1c2)](Date[_0x4aa0b5(0x1cd)](),Credentials[_0x4aa0b5(0x1b7)]),_0x56100f[_0x4aa0b5(0x194)](0x3e8,0xe10))||!_0x5ef687){const _0xad7e6b=await napCatCore[_0x4aa0b5(0x1af)]['getTicketService']()[_0x4aa0b5(0x1a2)]('');if(_0xad7e6b['result']!==0x0)return'';const _0x47969c=_0xad7e6b['clientKey'],_0x21bce5=_0xad7e6b[_0x4aa0b5(0x1da)],_0x5b7630=_0x56100f[_0x4aa0b5(0x198)](_0x56100f['xzydb'](_0x56100f[_0x4aa0b5(0x198)](_0x56100f['jUyiN'],selfInfo[_0x4aa0b5(0x1d2)])+_0x56100f[_0x4aa0b5(0x197)]+_0x47969c,_0x56100f['jFxub']),_0x21bce5);let _0x58fc53;try{_0x58fc53=await RequestUtil[_0x4aa0b5(0x1ad)](_0x5b7630);}catch(_0x3668fe){_0x56100f[_0x4aa0b5(0x1d6)](logDebug,_0x56100f[_0x4aa0b5(0x196)],_0x3668fe),_0x58fc53=new Map();}const _0x121ecc=_0x58fc53[_0x4aa0b5(0x1be)](_0x56100f[_0x4aa0b5(0x1bb)]);if(!_0x121ecc)return'';return Credentials['CreatTime']=Date[_0x4aa0b5(0x1cd)](),Credentials[_0x4aa0b5(0x1cb)]=_0x121ecc,_0x121ecc;}return Credentials[_0x4aa0b5(0x1cb)];}catch(_0x50819f){}return undefined;}}