const _0x48d1fa=_0x204b;function _0x45b9(){const _0x5c7922=['CreatTime','4293849QCnpTJ','push','NtDXp','beBGu','assign','response','like','PklFW','dKlNo','getSkey','qzlBc','skey','uid','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','Ybwoz','session','setStatus','result','vTBln','getUserDetailInfo\x20timeout','32020vwWfhm','GkZLZ','getTicketService','154105ItouQc','tdJWQ','&clientkey=','cHacO','TKCTP','getRobotService','PskeyData','now','getUserDetailInfoWithBizInfo','emHXq','getProfileLikeService','QvwVk','HttpsGetCookies','get','fromEntries','entries','Skey','ZEJol','getRobotUinRange','setQQAvatar','setHeader','tnNlw','136RlFWBy','uin','qvRLm','YwfDf','onLoginSuccess','HXzRi','632880bHhSZc','forEach','JOSiu','then','获取Pskey失败','5361402pbooYe','clientKey','keyIndex','delete','BltlH','HGnjI','LgzHf','请求获取Skey时失败','getMsgService','3ZtDgqp','693iPnJMz','917712JLwFWJ','58613880gHmYOP','%2Finfocenter&keyindex=19%27','tCuZg','KeyIndex','length','forceFetchClientKey','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','getProfileService','pdoVY','errMsg','getSelfInfo','addListener','setSelfOnlineStatus','ClientKey','getTipOffService','oxZlb','setBuddyProfileLike','domainPskeyMap','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','CSthU','8RCkiFa','set','11xEtqGK','QbzoY','PskeyTime'];_0x45b9=function(){return _0x5c7922;};return _0x45b9();}(function(_0x2ba81b,_0x1a1dd6){const _0x17db47=_0x204b,_0x4f74c1=_0x2ba81b();while(!![]){try{const _0x1d26e3=-parseInt(_0x17db47(0x1ed))/0x1+-parseInt(_0x17db47(0x1fd))/0x2*(parseInt(_0x17db47(0x1fb))/0x3)+parseInt(_0x17db47(0x1e7))/0x4*(-parseInt(_0x17db47(0x1d1))/0x5)+-parseInt(_0x17db47(0x1f2))/0x6+parseInt(_0x17db47(0x218))/0x7*(-parseInt(_0x17db47(0x212))/0x8)+parseInt(_0x17db47(0x1fc))/0x9*(-parseInt(_0x17db47(0x1ce))/0xa)+-parseInt(_0x17db47(0x214))/0xb*(-parseInt(_0x17db47(0x1fe))/0xc);if(_0x1d26e3===_0x1a1dd6)break;else _0x4f74c1['push'](_0x4f74c1['shift']());}catch(_0xd6a386){_0x4f74c1['push'](_0x4f74c1['shift']());}}}(_0x45b9,0xf2050));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';function _0x204b(_0x52f877,_0x21f5e0){const _0x45b976=_0x45b9();return _0x204b=function(_0x204b88,_0x25a762){_0x204b88=_0x204b88-0x1c5;let _0x335b5b=_0x45b976[_0x204b88];return _0x335b5b;},_0x204b(_0x52f877,_0x21f5e0);}const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener['onProfileDetailInfoChanged']=_0x3297b5=>{const _0x522c7f=_0x204b;userInfoCache[_0x3297b5[_0x522c7f(0x1c6)]]=_0x3297b5,userDetailHandlers[_0x522c7f(0x1ee)](_0x1242f8=>_0x1242f8(_0x3297b5));},setTimeout(()=>{const _0x1e4936=_0x204b;napCatCore[_0x1e4936(0x1eb)](()=>{const _0x20e62c=_0x1e4936;napCatCore[_0x20e62c(0x209)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x48d1fa(0x20a)](_0x135afa,_0x19ebd6,_0x14a60f){const _0x58063f=_0x48d1fa;return napCatCore[_0x58063f(0x1c9)][_0x58063f(0x1fa)]()[_0x58063f(0x1ca)]({'status':_0x135afa,'extStatus':_0x19ebd6,'batteryStatus':_0x14a60f});}static async[_0x48d1fa(0x21e)](_0xecc396,_0x145de9=0x1){const _0x22d117=_0x48d1fa;return napCatCore['session'][_0x22d117(0x1db)]()[_0x22d117(0x20e)]({'friendUid':_0xecc396,'sourceId':0x47,'doLikeCount':_0x145de9,'doLikeTollCount':0x0});}static async[_0x48d1fa(0x1e4)](_0x15e00d){const _0x2cfe20=_0x48d1fa,_0x4beea0=napCatCore[_0x2cfe20(0x1c9)][_0x2cfe20(0x205)]()[_0x2cfe20(0x1e5)](_0x15e00d);return{'result':_0x4beea0?.[_0x2cfe20(0x1cb)],'errMsg':_0x4beea0?.[_0x2cfe20(0x207)]};}static async[_0x48d1fa(0x208)](){}static async['getUserInfo'](_0x45dbc0){}static async['getUserDetailInfo'](_0xd8fe73){const _0x2b1a3c=_0x48d1fa,_0xb4a987={'CSthU':function(_0x172a8b,_0x318708){return _0x172a8b(_0x318708);},'tCuZg':function(_0x1b8efe,_0x5376b3){return _0x1b8efe===_0x5376b3;},'NtDXp':function(_0x3ce1c6,_0x49acd6,_0x57c8a0){return _0x3ce1c6(_0x49acd6,_0x57c8a0);}},_0x436e39=napCatCore[_0x2b1a3c(0x1c9)][_0x2b1a3c(0x205)]();return new Promise((_0x503438,_0x480c11)=>{const _0x32bc5d=_0x2b1a3c,_0x38c7ed={'JOSiu':function(_0x110f61,_0x5ed9d8){const _0x41fd86=_0x204b;return _0xb4a987[_0x41fd86(0x200)](_0x110f61,_0x5ed9d8);}},_0x3a3e8d=randomUUID();let _0x4e2377=![],_0x5ba908=undefined,_0x52b43e=!![];_0xb4a987[_0x32bc5d(0x21a)](setTimeout,()=>{const _0xe6ae4a=_0x32bc5d;!_0x4e2377&&(_0x5ba908?_0xb4a987[_0xe6ae4a(0x211)](_0x503438,_0x5ba908):_0xb4a987[_0xe6ae4a(0x211)](_0x480c11,_0xe6ae4a(0x1cd))),userDetailHandlers[_0xe6ae4a(0x1f5)](_0x3a3e8d);},0x1388),userDetailHandlers[_0x32bc5d(0x213)](_0x3a3e8d,_0x225fd5=>{const _0xaf1b97=_0x32bc5d;_0x38c7ed[_0xaf1b97(0x1ef)](_0x225fd5['uid'],_0xd8fe73)&&(uid2UinMap[_0xd8fe73]=_0x225fd5['uin'],_0x52b43e?(_0x5ba908=_0x225fd5,_0x52b43e=![]):(_0x4e2377=!![],_0x503438(_0x225fd5)));}),_0x436e39[_0x32bc5d(0x1d9)](_0xd8fe73,[0x0])[_0x32bc5d(0x1f0)](_0x41f256=>{});});}static async['getPSkey'](_0x179168,_0xba250d=!![]){const _0x2898e8=_0x48d1fa,_0x3df14e={'oxZlb':function(_0x48ede1,_0x266171){return _0x48ede1||_0x266171;},'qvRLm':function(_0x2ac7b6,_0x7a178a){return _0x2ac7b6>_0x7a178a;},'BltlH':function(_0x52f8a7,_0x29199f){return _0x52f8a7-_0x29199f;},'GkZLZ':function(_0xfd148d,_0x1d555c){return _0xfd148d*_0x1d555c;},'HXzRi':function(_0x18b513,_0x3fa71c){return _0x18b513===_0x3fa71c;},'LgzHf':function(_0x87c044,_0x2c38b5,_0x271351){return _0x87c044(_0x2c38b5,_0x271351);},'PklFW':_0x2898e8(0x1f1)},_0x140cb5=[],_0x30d3a7={};for(const _0x1e3c30 in _0x179168){const _0x9968a9=Credentials[_0x2898e8(0x1d7)][_0x2898e8(0x1de)](_0x179168[_0x1e3c30]),_0x39d02c=Credentials[_0x2898e8(0x216)][_0x2898e8(0x1de)](_0x179168[_0x1e3c30]);_0x3df14e[_0x2898e8(0x20d)](!_0x9968a9,!_0x39d02c)||_0x3df14e[_0x2898e8(0x1e9)](_0x3df14e[_0x2898e8(0x1f6)](Date[_0x2898e8(0x1d8)](),_0x39d02c),_0x3df14e[_0x2898e8(0x1cf)](0x708,0x3e8))||!_0xba250d?_0x140cb5[_0x2898e8(0x219)](_0x179168[_0x1e3c30]):_0x30d3a7[_0x179168[_0x1e3c30]]=_0x9968a9;}let _0x4c2a5b={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x3df14e[_0x2898e8(0x1e9)](_0x140cb5[_0x2898e8(0x202)],0x0)&&(_0x4c2a5b=await napCatCore[_0x2898e8(0x1c9)][_0x2898e8(0x20c)]()['getPskey'](_0x140cb5,!![]));const _0x2692ff=_0x4c2a5b[_0x2898e8(0x20f)];for(const _0x5a548c of _0x2692ff[_0x2898e8(0x1e0)]()){Credentials[_0x2898e8(0x1d7)][_0x2898e8(0x213)](_0x5a548c[0x0],_0x5a548c[0x1]),Credentials[_0x2898e8(0x216)]['set'](_0x5a548c[0x0],Date['now']());}const _0x2f3d13=Object[_0x2898e8(0x21c)](Object[_0x2898e8(0x1df)](_0x2692ff),_0x30d3a7);if(_0x3df14e[_0x2898e8(0x1ec)](_0x4c2a5b[_0x2898e8(0x1cb)],0x0))return _0x2f3d13;else _0x3df14e[_0x2898e8(0x1f8)](logError,_0x3df14e[_0x2898e8(0x21f)],_0x4c2a5b[_0x2898e8(0x207)]);return{};}static async[_0x48d1fa(0x1e3)](){const _0x47b046=_0x48d1fa,_0x575963=await napCatCore[_0x47b046(0x1c9)][_0x47b046(0x1d6)]()[_0x47b046(0x1e3)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x575963?.[_0x47b046(0x21d)]?.['robotUinRanges'];}static async['getQzoneCookies'](){const _0x45469f=_0x48d1fa,_0x8c3a27={'beBGu':function(_0x4b7e7c,_0x125722){return _0x4b7e7c+_0x125722;},'ViWLh':function(_0x3913d0,_0x4d2125){return _0x3913d0+_0x4d2125;},'QvwVk':function(_0x4e6c52,_0x3793c1){return _0x4e6c52+_0x3793c1;},'HGnjI':function(_0x2a55fe,_0x3bf69e){return _0x2a55fe+_0x3bf69e;},'TKCTP':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','qzlBc':_0x45469f(0x1d3),'Ybwoz':_0x45469f(0x1c7),'tnNlw':_0x45469f(0x1ff),'tdJWQ':function(_0xf84340,_0x3159ec,_0x28c0e1){return _0xf84340(_0x3159ec,_0x28c0e1);},'kXZJv':'请求获取Cookies时失败'},_0x49233d=_0x8c3a27[_0x45469f(0x21b)](_0x8c3a27['ViWLh'](_0x8c3a27[_0x45469f(0x1dc)](_0x8c3a27[_0x45469f(0x1dc)](_0x8c3a27[_0x45469f(0x1f7)](_0x8c3a27[_0x45469f(0x1d5)],selfInfo[_0x45469f(0x1e8)]),_0x8c3a27[_0x45469f(0x222)]),Credentials[_0x45469f(0x20b)])+_0x8c3a27[_0x45469f(0x1c8)],selfInfo['uin']),_0x8c3a27[_0x45469f(0x1e6)]);let _0x1d1502={};try{_0x1d1502=await RequestUtil[_0x45469f(0x1dd)](_0x49233d);}catch(_0x1b5667){_0x8c3a27[_0x45469f(0x1d2)](logDebug,_0x8c3a27['kXZJv'],_0x1b5667),_0x1d1502={};}return _0x1d1502;}static async[_0x48d1fa(0x221)](_0x339291=!![]){const _0x29482b=_0x48d1fa,_0x1931d9={'vTBln':function(_0x3be4fe,_0x4c507d){return _0x3be4fe==_0x4c507d;},'YwfDf':function(_0x2f19c6,_0x51677a){return _0x2f19c6>_0x51677a;},'ZEJol':function(_0x1507c4,_0x12f068){return _0x1507c4-_0x12f068;},'emHXq':function(_0x229084,_0xa29c4){return _0x229084*_0xa29c4;},'nPOuH':function(_0x39ceb2,_0x387089){return _0x39ceb2!==_0x387089;},'pdoVY':function(_0x5b021a,_0x2df44b){return _0x5b021a+_0x2df44b;},'QbzoY':_0x29482b(0x210),'cHacO':_0x29482b(0x1d3),'dKlNo':_0x29482b(0x204)};try{if(_0x1931d9[_0x29482b(0x1cc)](Credentials[_0x29482b(0x217)],0x0)||_0x1931d9[_0x29482b(0x1ea)](_0x1931d9[_0x29482b(0x1e2)](Date[_0x29482b(0x1d8)](),Credentials[_0x29482b(0x217)]),_0x1931d9[_0x29482b(0x1da)](0x3e8,0xe10))||!_0x339291){const _0xe0982=await napCatCore[_0x29482b(0x1c9)][_0x29482b(0x1d0)]()[_0x29482b(0x203)]('');if(_0x1931d9['nPOuH'](_0xe0982['result'],0x0))return'';const _0x181b99=_0xe0982[_0x29482b(0x1f3)],_0x1c4978=_0xe0982[_0x29482b(0x1f4)],_0x4d7800=_0x1931d9[_0x29482b(0x206)](_0x1931d9[_0x29482b(0x206)](_0x1931d9[_0x29482b(0x206)](_0x1931d9['pdoVY'](_0x1931d9[_0x29482b(0x215)],selfInfo[_0x29482b(0x1e8)]),_0x1931d9[_0x29482b(0x1d4)])+_0x181b99,_0x1931d9[_0x29482b(0x220)]),_0x1c4978);let _0x528977={};try{_0x528977=await RequestUtil[_0x29482b(0x1dd)](_0x4d7800);}catch(_0xb022d9){logDebug(_0x29482b(0x1f9),_0xb022d9),_0x528977={};}const _0x2af4ba=_0x528977[_0x29482b(0x1c5)];if(!_0x2af4ba)return'';return Credentials[_0x29482b(0x20b)]=_0x181b99,Credentials[_0x29482b(0x201)]=_0x1c4978,Credentials['CreatTime']=Date[_0x29482b(0x1d8)](),Credentials[_0x29482b(0x1e1)]=_0x2af4ba,_0x2af4ba;}return Credentials[_0x29482b(0x1e1)];}catch(_0x519494){}return undefined;}}