const _0x1576c0=_0x9d85;(function(_0x143558,_0x1e7501){const _0x27a795=_0x9d85,_0xd87b4d=_0x143558();while(!![]){try{const _0x4cbb81=parseInt(_0x27a795(0x114))/0x1*(parseInt(_0x27a795(0x146))/0x2)+-parseInt(_0x27a795(0x143))/0x3+parseInt(_0x27a795(0x142))/0x4*(parseInt(_0x27a795(0x141))/0x5)+-parseInt(_0x27a795(0x14e))/0x6+parseInt(_0x27a795(0x132))/0x7*(parseInt(_0x27a795(0x10b))/0x8)+parseInt(_0x27a795(0x13c))/0x9+parseInt(_0x27a795(0x12d))/0xa*(parseInt(_0x27a795(0x112))/0xb);if(_0x4cbb81===_0x1e7501)break;else _0xd87b4d['push'](_0xd87b4d['shift']());}catch(_0x12ccb8){_0xd87b4d['push'](_0xd87b4d['shift']());}}}(_0x23a8,0x3ac71));function _0x23a8(){const _0x2f9cdc=['fromEntries','PskeyData','&clientkey=','yElki','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','setSelfOnlineStatus','entries','vRhup','PskeyTime','jmTEA','fThJa','HttpsGetCookies','Skey','forceFetchClientKey','30xQCURF','setStatus','domainPskeyMap','DDjSE','uid','67494itWpob','HmNGG','length','ClientKey','uin','getPskey','MJDOm','setBuddyProfileLike','onProfileDetailInfoChanged','get','142560wOakJI','wvFcw','AdNKZ','errMsg','KeyIndex','15ZezppR','89852rlwuzj','1300854bZoywU','ZBeqI','GpAZn','102lQnPrv','UgLtR','delete','CreatTime','then','set','skey','Wgopi','2784018eiOGQa','esVnq','请求获取Cookies时失败','wKgkF','getRobotUinRange','assign','获取Pskey失败','nKqWz','getProfileService','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','result','sioIq','getProfileLikeService','bvRbM','getUserInfo','response','QzQdc','keyIndex','getTipOffService','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','forEach','40sBldID','like','clientKey','aEVdV','now','getUserDetailInfo','ZNmgJ','2250138RNHlGu','jNAuw','7711EXxSvl','setQQAvatar','WUszZ','MxVAB','session','XqWJx','getSkey','请求获取Skey时失败','getUserDetailInfoWithBizInfo','onLoginSuccess','getRobotService'];_0x23a8=function(){return _0x2f9cdc;};return _0x23a8();}import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';function _0x9d85(_0x2ffd92,_0x13f88c){const _0x23a8d5=_0x23a8();return _0x9d85=function(_0x9d8511,_0x246f24){_0x9d8511=_0x9d8511-0x103;let _0x39c354=_0x23a8d5[_0x9d8511];return _0x39c354;},_0x9d85(_0x2ffd92,_0x13f88c);}import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x1576c0(0x13a)]=_0x324043=>{const _0x52d3a1=_0x1576c0;userInfoCache[_0x324043[_0x52d3a1(0x131)]]=_0x324043,userDetailHandlers[_0x52d3a1(0x10a)](_0xeef16=>_0xeef16(_0x324043));},setTimeout(()=>{const _0x135bf0=_0x1576c0;napCatCore[_0x135bf0(0x11d)](()=>{napCatCore['addListener'](profileListener);});},0x64);export class NTQQUserApi{static async[_0x1576c0(0x124)](_0x22003e,_0xf7f2c4,_0x57ddf2){const _0x8c21e9=_0x1576c0;return napCatCore[_0x8c21e9(0x118)]['getMsgService']()[_0x8c21e9(0x12e)]({'status':_0x22003e,'extStatus':_0xf7f2c4,'batteryStatus':_0x57ddf2});}static async[_0x1576c0(0x10c)](_0x5cf796,_0xcf8256=0x1){const _0x582978=_0x1576c0;return napCatCore[_0x582978(0x118)][_0x582978(0x15a)]()[_0x582978(0x139)]({'friendUid':_0x5cf796,'sourceId':0x47,'doLikeCount':_0xcf8256,'doLikeTollCount':0x0});}static async[_0x1576c0(0x115)](_0x8a1a6b){const _0x5d4cfc=_0x1576c0,_0x531d59=napCatCore['session']['getProfileService']()['setHeader'](_0x8a1a6b);return{'result':_0x531d59?.[_0x5d4cfc(0x158)],'errMsg':_0x531d59?.[_0x5d4cfc(0x13f)]};}static async['getSelfInfo'](){}static async[_0x1576c0(0x104)](_0x3a6283){}static async[_0x1576c0(0x110)](_0x223fe4){const _0x5ad81e=_0x1576c0,_0xb88e4b={'DDjSE':function(_0x42cff5,_0x39f5a2){return _0x42cff5(_0x39f5a2);},'yElki':'getUserDetailInfo\x20timeout','esVnq':function(_0x37023e){return _0x37023e();}},_0x177e3f=napCatCore['session'][_0x5ad81e(0x156)]();return new Promise((_0x285ccb,_0x43a453)=>{const _0x5d8b1a=_0x5ad81e,_0x3a02aa={'MJDOm':function(_0xc7be79,_0x366454){const _0x3cd12b=_0x9d85;return _0xb88e4b[_0x3cd12b(0x130)](_0xc7be79,_0x366454);},'XqWJx':_0xb88e4b[_0x5d8b1a(0x122)],'fThJa':function(_0x62648,_0x215f8b){return _0x62648===_0x215f8b;}},_0x48203a=_0xb88e4b[_0x5d8b1a(0x14f)](randomUUID);let _0x4925de=![],_0x28fd51=undefined,_0x347b41=!![];setTimeout(()=>{const _0x7ce62f=_0x5d8b1a;!_0x4925de&&(_0x28fd51?_0x3a02aa['MJDOm'](_0x285ccb,_0x28fd51):_0x3a02aa['MJDOm'](_0x43a453,_0x3a02aa[_0x7ce62f(0x119)])),userDetailHandlers[_0x7ce62f(0x148)](_0x48203a);},0x1388),userDetailHandlers[_0x5d8b1a(0x14b)](_0x48203a,_0x58159a=>{const _0x58a1ec=_0x5d8b1a;_0x3a02aa[_0x58a1ec(0x129)](_0x58159a['uid'],_0x223fe4)&&(uid2UinMap[_0x223fe4]=_0x58159a[_0x58a1ec(0x136)],_0x347b41?(_0x28fd51=_0x58159a,_0x347b41=![]):(_0x4925de=!![],_0x3a02aa[_0x58a1ec(0x138)](_0x285ccb,_0x58159a)));}),_0x177e3f[_0x5d8b1a(0x11c)](_0x223fe4,[0x0])[_0x5d8b1a(0x14a)](_0x32b941=>{});});}static async['getPSkey'](_0x1eea57,_0x460ffd=!![]){const _0x46ec3f=_0x1576c0,_0x10d8a7={'nKqWz':function(_0x21b23a,_0x460697){return _0x21b23a||_0x460697;},'jmTEA':function(_0x4bc239,_0x240f73){return _0x4bc239>_0x240f73;},'ZBeqI':function(_0x3defd3,_0x2c1acb){return _0x3defd3-_0x2c1acb;},'QzQdc':function(_0x535138,_0x279759){return _0x535138>_0x279759;},'WUszZ':function(_0xcc87de,_0x188e66){return _0xcc87de===_0x188e66;},'UgLtR':function(_0x40b20d,_0x53ed45,_0x9fdb5d){return _0x40b20d(_0x53ed45,_0x9fdb5d);},'INuaP':_0x46ec3f(0x154)},_0x4341a1=[],_0x5a3f55={};for(const _0x331b5b in _0x1eea57){const _0x37a47a=Credentials[_0x46ec3f(0x120)][_0x46ec3f(0x13b)](_0x1eea57[_0x331b5b]),_0x14a743=Credentials[_0x46ec3f(0x127)][_0x46ec3f(0x13b)](_0x1eea57[_0x331b5b]);_0x10d8a7[_0x46ec3f(0x155)](!_0x37a47a,!_0x14a743)||_0x10d8a7[_0x46ec3f(0x128)](_0x10d8a7[_0x46ec3f(0x144)](Date[_0x46ec3f(0x10f)](),_0x14a743),0x708*0x3e8)||!_0x460ffd?_0x4341a1['push'](_0x1eea57[_0x331b5b]):_0x5a3f55[_0x1eea57[_0x331b5b]]=_0x37a47a;}let _0x5593e0={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x10d8a7[_0x46ec3f(0x106)](_0x4341a1[_0x46ec3f(0x134)],0x0)&&(_0x5593e0=await napCatCore['session'][_0x46ec3f(0x108)]()[_0x46ec3f(0x137)](_0x4341a1,!![]));const _0x48a892=_0x5593e0[_0x46ec3f(0x12f)];for(const _0x40ec0f of _0x48a892[_0x46ec3f(0x125)]()){Credentials[_0x46ec3f(0x120)][_0x46ec3f(0x14b)](_0x40ec0f[0x0],_0x40ec0f[0x1]),Credentials[_0x46ec3f(0x127)]['set'](_0x40ec0f[0x0],Date[_0x46ec3f(0x10f)]());}const _0x53f57b=Object[_0x46ec3f(0x153)](Object[_0x46ec3f(0x11f)](_0x48a892),_0x5a3f55);if(_0x10d8a7[_0x46ec3f(0x116)](_0x5593e0[_0x46ec3f(0x158)],0x0))return _0x53f57b;else _0x10d8a7[_0x46ec3f(0x147)](logError,_0x10d8a7['INuaP'],_0x5593e0[_0x46ec3f(0x13f)]);return{};}static async[_0x1576c0(0x152)](){const _0x373a62=_0x1576c0,_0x11edb8=await napCatCore[_0x373a62(0x118)][_0x373a62(0x11e)]()[_0x373a62(0x152)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x11edb8?.[_0x373a62(0x105)]?.['robotUinRanges'];}static async['getQzoneCookies'](){const _0x5bf11c=_0x1576c0,_0x5d4c65={'AdNKZ':function(_0x38a5ab,_0x477c02){return _0x38a5ab+_0x477c02;},'wKgkF':function(_0x32a1a8,_0x49ddc4){return _0x32a1a8+_0x49ddc4;},'ZNmgJ':function(_0x159729,_0x4cd3f1){return _0x159729+_0x4cd3f1;},'wvFcw':function(_0x3e0ede,_0x287f8a){return _0x3e0ede+_0x287f8a;},'NeSJL':_0x5bf11c(0x121),'vRhup':'%2Finfocenter&keyindex=19%27','aWjky':function(_0x588120,_0x34e132,_0x167183){return _0x588120(_0x34e132,_0x167183);}},_0x419ffc=_0x5d4c65[_0x5bf11c(0x13e)](_0x5d4c65[_0x5bf11c(0x151)](_0x5d4c65['AdNKZ'](_0x5d4c65['AdNKZ'](_0x5d4c65[_0x5bf11c(0x111)](_0x5d4c65[_0x5bf11c(0x13d)](_0x5bf11c(0x109),selfInfo[_0x5bf11c(0x136)]),_0x5d4c65['NeSJL']),Credentials[_0x5bf11c(0x135)]),_0x5bf11c(0x157)),selfInfo[_0x5bf11c(0x136)]),_0x5d4c65[_0x5bf11c(0x126)]);let _0x354324={};try{_0x354324=await RequestUtil[_0x5bf11c(0x12a)](_0x419ffc);}catch(_0x527d6d){_0x5d4c65['aWjky'](logDebug,_0x5bf11c(0x150),_0x527d6d),_0x354324={};}return _0x354324;}static async[_0x1576c0(0x11a)](_0x9ccd46=!![]){const _0x37b1d5=_0x1576c0,_0x2dc1e3={'MxVAB':function(_0x316cc6,_0x4b5abc){return _0x316cc6*_0x4b5abc;},'bvRbM':function(_0x1d08d6,_0x58558d){return _0x1d08d6!==_0x58558d;},'RZqQv':function(_0x51b892,_0x49f3b8){return _0x51b892+_0x49f3b8;},'sioIq':function(_0x13e812,_0x2f4375){return _0x13e812+_0x2f4375;},'jNAuw':function(_0x2f7991,_0x5b70bf){return _0x2f7991+_0x5b70bf;},'HmNGG':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','GpAZn':_0x37b1d5(0x123),'Wgopi':function(_0x16ee99,_0x51a743,_0x5e9d12){return _0x16ee99(_0x51a743,_0x5e9d12);},'ShGNs':_0x37b1d5(0x11b),'aEVdV':_0x37b1d5(0x14c)};try{if(Credentials['CreatTime']==0x0||Date[_0x37b1d5(0x10f)]()-Credentials[_0x37b1d5(0x149)]>_0x2dc1e3[_0x37b1d5(0x117)](0x3e8,0xe10)||!_0x9ccd46){const _0x2a133d=await napCatCore[_0x37b1d5(0x118)]['getTicketService']()[_0x37b1d5(0x12c)]('');if(_0x2dc1e3[_0x37b1d5(0x103)](_0x2a133d[_0x37b1d5(0x158)],0x0))return'';const _0x562794=_0x2a133d[_0x37b1d5(0x10d)],_0x1f4f64=_0x2a133d[_0x37b1d5(0x107)],_0x2ee8ab=_0x2dc1e3['RZqQv'](_0x2dc1e3['sioIq'](_0x2dc1e3[_0x37b1d5(0x159)](_0x2dc1e3[_0x37b1d5(0x113)](_0x2dc1e3[_0x37b1d5(0x133)],selfInfo[_0x37b1d5(0x136)]),_0x37b1d5(0x121)),_0x562794)+_0x2dc1e3[_0x37b1d5(0x145)],_0x1f4f64);let _0x143635={};try{_0x143635=await RequestUtil['HttpsGetCookies'](_0x2ee8ab);}catch(_0x46a4a2){_0x2dc1e3[_0x37b1d5(0x14d)](logDebug,_0x2dc1e3['ShGNs'],_0x46a4a2),_0x143635={};}const _0x4c288e=_0x143635[_0x2dc1e3[_0x37b1d5(0x10e)]];if(!_0x4c288e)return'';return Credentials[_0x37b1d5(0x135)]=_0x562794,Credentials[_0x37b1d5(0x140)]=_0x1f4f64,Credentials[_0x37b1d5(0x149)]=Date['now'](),Credentials[_0x37b1d5(0x12b)]=_0x4c288e,_0x4c288e;}return Credentials[_0x37b1d5(0x12b)];}catch(_0x354645){}return undefined;}}