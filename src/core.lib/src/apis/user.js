const _0x14c5a7=_0x4146;(function(_0x32ed5f,_0x5e6817){const _0xdf1b33=_0x4146,_0x1486f0=_0x32ed5f();while(!![]){try{const _0x32e4a2=parseInt(_0xdf1b33(0xea))/0x1+-parseInt(_0xdf1b33(0xdb))/0x2+parseInt(_0xdf1b33(0xfa))/0x3+parseInt(_0xdf1b33(0x118))/0x4+-parseInt(_0xdf1b33(0x110))/0x5+-parseInt(_0xdf1b33(0x11c))/0x6*(-parseInt(_0xdf1b33(0x11e))/0x7)+-parseInt(_0xdf1b33(0xf2))/0x8;if(_0x32e4a2===_0x5e6817)break;else _0x1486f0['push'](_0x1486f0['shift']());}catch(_0x4dc310){_0x1486f0['push'](_0x1486f0['shift']());}}}(_0x5dcb,0x7ceee));import{Credentials,selfInfo}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x5dcb(){const _0x4adc55=['setStatus','ehiMZ','ZCAyl','response','robotUinRanges','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','fromEntries','oSLaz','JuzYd','NodeIKernelUixConvertService/getUin','getMsgService','getQzoneCookies','KeyIndex','102042zdCpKD','GvVoC','uin','getRobotService','&clientkey=','setSelfOnlineStatus','NodeIKernelProfileService/getUserDetailInfoByUin','UVuRv','6846992Ecrpwa','jhHEM','assign','session','YcRlO','keyIndex','setQQAvatar','uYuUK','1562652VRIFZS','push','set','modifyDesktopMiniProfile','uid','getProfileService','getSelfInfo','like','CallNoListenerEvent','getRobotUinRange','PkZvf','clientKey','TgyCV','result','ClientKey','CreatTime','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','uEFAh','TGtHe','GNnZX','NodeIKernelUixConvertService/getUid','get','2740430HjuRKp','Skey','MNsBt','%2Finfocenter&keyindex=19%27','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','getUserInfo','domainPskeyMap','PskeyTime','2905764CPNupL','errMsg','getUidByUin','getPSkey','228cPNGxN','获取Pskey失败','131838hdmDUs','pvYjw','onProfileDetailInfoChanged','getTipOffService','length','Kbvqs','VCQSN','请求获取Cookies时失败','now','wCvoY','getProfileLikeService','setHeader','dQknn','mxqYQ','uidInfo','HttpsGetCookies','getUserDetailInfoWithBizInfo','uinInfo','skey','fIJRv','then','RapFb','PskeyData','298746OuxadR','getPskey'];_0x5dcb=function(){return _0x4adc55;};return _0x5dcb();}function _0x4146(_0x4357aa,_0x210c82){const _0x5dcb00=_0x5dcb();return _0x4146=function(_0x414630,_0x1878da){_0x414630=_0x414630-0xd7;let _0x2ff298=_0x5dcb00[_0x414630];return _0x2ff298;},_0x4146(_0x4357aa,_0x210c82);}import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';import{NTEventDispatch}from'@/common/utils/EventTask';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x14c5a7(0x120)]=_0x264df1=>{const _0x2f7485=_0x14c5a7;userInfoCache[_0x264df1[_0x2f7485(0xfe)]]=_0x264df1,userDetailHandlers['forEach'](_0x30cf92=>_0x30cf92(_0x264df1));},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{napCatCore['addListener'](profileListener);});},0x64);export class NTQQUserApi{static async[_0x14c5a7(0xef)](_0x181321,_0xb72100,_0x1f40d6){const _0x324f09=_0x14c5a7;return napCatCore[_0x324f09(0xf5)][_0x324f09(0xe7)]()[_0x324f09(0xdd)]({'status':_0x181321,'extStatus':_0xb72100,'batteryStatus':_0x1f40d6});}static async['getBuddyRecommendContactArkJson'](_0x94ba73,_0x28ba47=''){const _0x58c369=_0x14c5a7;return napCatCore[_0x58c369(0xf5)]['getBuddyService']()['getBuddyRecommendContactArkJson'](_0x94ba73,_0x28ba47);}static async[_0x14c5a7(0x101)](_0x447116,_0x74f81=0x1){const _0xcb9e78=_0x14c5a7;return napCatCore[_0xcb9e78(0xf5)][_0xcb9e78(0x128)]()['setBuddyProfileLike']({'friendUid':_0x447116,'sourceId':0x47,'doLikeCount':_0x74f81,'doLikeTollCount':0x0});}static async[_0x14c5a7(0xf8)](_0x10fe8d){const _0x458bf5=_0x14c5a7,_0x2d5e72=await napCatCore['session']['getProfileService']()[_0x458bf5(0x129)](_0x10fe8d);return{'result':_0x2d5e72?.[_0x458bf5(0x107)],'errMsg':_0x2d5e72?.['errMsg']};}static async[_0x14c5a7(0x100)](){}static async[_0x14c5a7(0x115)](_0x13012f){}static async['getUserDetailInfo'](_0x2578de){const _0x3cb668=_0x14c5a7,_0x4f2883={'uEFAh':function(_0x3de4b9,_0x171bbc){return _0x3de4b9(_0x171bbc);},'VCQSN':'getUserDetailInfo\x20timeout','pvYjw':function(_0x41a6b7,_0x5b016e){return _0x41a6b7===_0x5b016e;},'uYuUK':function(_0x47857e){return _0x47857e();}},_0x435968=napCatCore[_0x3cb668(0xf5)][_0x3cb668(0xff)]();return new Promise((_0x13c618,_0x43630c)=>{const _0x11a561=_0x3cb668,_0x3fcb2c={'dQknn':function(_0x5aeedf,_0x942a76){const _0x36d6eb=_0x4146;return _0x4f2883[_0x36d6eb(0x11f)](_0x5aeedf,_0x942a76);},'ehiMZ':function(_0x39014a,_0x372f17){return _0x4f2883['uEFAh'](_0x39014a,_0x372f17);}},_0x248316=_0x4f2883[_0x11a561(0xf9)](randomUUID);let _0x3738e3=![],_0x2587bd=undefined,_0x33dfaf=!![];setTimeout(()=>{const _0x2f528f=_0x11a561;!_0x3738e3&&(_0x2587bd?_0x4f2883[_0x2f528f(0x10b)](_0x13c618,_0x2587bd):_0x43630c(_0x4f2883[_0x2f528f(0x124)])),userDetailHandlers['delete'](_0x248316);},0x1388),userDetailHandlers['set'](_0x248316,_0x17155e=>{const _0x10b005=_0x11a561;_0x3fcb2c[_0x10b005(0x12a)](_0x17155e[_0x10b005(0xfe)],_0x2578de)&&(_0x33dfaf?(_0x2587bd=_0x17155e,_0x33dfaf=![]):(_0x3738e3=!![],_0x3fcb2c[_0x10b005(0xde)](_0x13c618,_0x17155e)));}),_0x435968[_0x11a561(0x12e)](_0x2578de,[0x0])[_0x11a561(0xd8)](_0x210aad=>{});});}static async['modifySelfProfile'](_0x19b9fd){const _0x260fff=_0x14c5a7;return napCatCore[_0x260fff(0xf5)][_0x260fff(0xff)]()[_0x260fff(0xfd)](_0x19b9fd);}static async[_0x14c5a7(0x11b)](_0x141aca,_0xfad02f=!![]){const _0x4eb0bd=_0x14c5a7,_0x47ac72={'GvVoC':function(_0x1ed0da,_0x32f4a8){return _0x1ed0da||_0x32f4a8;},'TgyCV':function(_0x5f287f,_0x10dfe2){return _0x5f287f-_0x10dfe2;},'jhHEM':function(_0x3ece97,_0x3fc919){return _0x3ece97*_0x3fc919;},'oSLaz':function(_0xbab146,_0x30cfc0){return _0xbab146>_0x30cfc0;},'fIJRv':function(_0x2f628a,_0x3a7f0d){return _0x2f628a===_0x3a7f0d;},'Kbvqs':_0x4eb0bd(0x11d)},_0x14c00d=[],_0x1b38ee={};for(const _0x392c31 in _0x141aca){const _0x2da3a9=Credentials[_0x4eb0bd(0xda)]['get'](_0x141aca[_0x392c31]),_0x3705f6=Credentials[_0x4eb0bd(0x117)]['get'](_0x141aca[_0x392c31]);_0x47ac72[_0x4eb0bd(0xeb)](!_0x2da3a9,!_0x3705f6)||_0x47ac72[_0x4eb0bd(0x106)](Date['now'](),_0x3705f6)>_0x47ac72[_0x4eb0bd(0xf3)](0x708,0x3e8)||!_0xfad02f?_0x14c00d[_0x4eb0bd(0xfb)](_0x141aca[_0x392c31]):_0x1b38ee[_0x141aca[_0x392c31]]=_0x2da3a9;}let _0x510041={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x47ac72[_0x4eb0bd(0xe4)](_0x14c00d[_0x4eb0bd(0x122)],0x0)&&(_0x510041=await napCatCore[_0x4eb0bd(0xf5)][_0x4eb0bd(0x121)]()[_0x4eb0bd(0xdc)](_0x14c00d,!![]));const _0x1a0fc2=_0x510041[_0x4eb0bd(0x116)];for(const _0x5a2aaf of _0x1a0fc2['entries']()){Credentials[_0x4eb0bd(0xda)][_0x4eb0bd(0xfc)](_0x5a2aaf[0x0],_0x5a2aaf[0x1]),Credentials[_0x4eb0bd(0x117)][_0x4eb0bd(0xfc)](_0x5a2aaf[0x0],Date[_0x4eb0bd(0x126)]());}const _0x356509=Object[_0x4eb0bd(0xf4)](Object[_0x4eb0bd(0xe3)](_0x1a0fc2),_0x1b38ee);if(_0x47ac72[_0x4eb0bd(0xd7)](_0x510041['result'],0x0))return _0x356509;else logError(_0x47ac72[_0x4eb0bd(0x123)],_0x510041[_0x4eb0bd(0x119)]);return{};}static async['getRobotUinRange'](){const _0xe255ff=_0x14c5a7,_0x16a19a=await napCatCore[_0xe255ff(0xf5)][_0xe255ff(0xed)]()[_0xe255ff(0x103)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x16a19a?.[_0xe255ff(0xe0)]?.[_0xe255ff(0xe1)];}static async[_0x14c5a7(0xe8)](){const _0x12f148=_0x14c5a7,_0x1a04c3={'MNsBt':function(_0xa68986,_0x118b50){return _0xa68986+_0x118b50;},'UVuRv':function(_0x411903,_0x2c35a4){return _0x411903+_0x2c35a4;},'YcRlO':_0x12f148(0x10a),'TGtHe':'&clientkey=','NgGxt':_0x12f148(0xe2),'kBIbx':_0x12f148(0x113),'habmw':function(_0x5f3b95,_0x3997da,_0x65197a){return _0x5f3b95(_0x3997da,_0x65197a);},'mxqYQ':_0x12f148(0x125)},_0x30e4da=_0x1a04c3[_0x12f148(0x112)](_0x1a04c3[_0x12f148(0x112)](_0x1a04c3[_0x12f148(0x112)](_0x1a04c3[_0x12f148(0xf1)](_0x1a04c3[_0x12f148(0xf6)],selfInfo[_0x12f148(0xec)]),_0x1a04c3[_0x12f148(0x10c)])+Credentials[_0x12f148(0x108)],_0x1a04c3['NgGxt'])+selfInfo[_0x12f148(0xec)],_0x1a04c3['kBIbx']);let _0x5daacd={};try{_0x5daacd=await RequestUtil[_0x12f148(0x12d)](_0x30e4da);}catch(_0x3015d8){_0x1a04c3['habmw'](logDebug,_0x1a04c3[_0x12f148(0x12b)],_0x3015d8),_0x5daacd={};}return _0x5daacd;}static async['getSkey'](_0x4b5860=!![]){const _0x6c7b84=_0x14c5a7,_0x1d1ca2={'XbsXA':function(_0x5450ed,_0x5d0df2){return _0x5450ed==_0x5d0df2;},'FeoEP':function(_0x26a6e6,_0xf1ceb6){return _0x26a6e6>_0xf1ceb6;},'GNnZX':function(_0x53e005,_0x21f232){return _0x53e005*_0x21f232;},'JuzYd':function(_0x47e9b6,_0x2e9e4c){return _0x47e9b6!==_0x2e9e4c;},'PkZvf':function(_0x542059,_0x206d03){return _0x542059+_0x206d03;},'wCvoY':_0x6c7b84(0xee),'ZCAyl':_0x6c7b84(0x114),'kxGMg':function(_0x58dc94,_0x5ad70f,_0x45d26b){return _0x58dc94(_0x5ad70f,_0x45d26b);},'RapFb':'请求获取Skey时失败'};try{if(_0x1d1ca2['XbsXA'](Credentials['CreatTime'],0x0)||_0x1d1ca2['FeoEP'](Date['now']()-Credentials[_0x6c7b84(0x109)],_0x1d1ca2[_0x6c7b84(0x10d)](0x3e8,0xe10))||!_0x4b5860){const _0xe2a241=await napCatCore[_0x6c7b84(0xf5)]['getTicketService']()['forceFetchClientKey']('');if(_0x1d1ca2[_0x6c7b84(0xe5)](_0xe2a241['result'],0x0))return'';const _0x1d07f2=_0xe2a241[_0x6c7b84(0x105)],_0x63f650=_0xe2a241[_0x6c7b84(0xf7)],_0x213769=_0x1d1ca2['PkZvf'](_0x1d1ca2[_0x6c7b84(0x104)](_0x1d1ca2[_0x6c7b84(0x104)](_0x1d1ca2[_0x6c7b84(0x104)](_0x1d1ca2[_0x6c7b84(0x104)](_0x6c7b84(0x10a),selfInfo[_0x6c7b84(0xec)]),_0x1d1ca2[_0x6c7b84(0x127)]),_0x1d07f2),_0x1d1ca2[_0x6c7b84(0xdf)]),_0x63f650);let _0x2e835c={};try{_0x2e835c=await RequestUtil[_0x6c7b84(0x12d)](_0x213769);}catch(_0x4403be){_0x1d1ca2['kxGMg'](logDebug,_0x1d1ca2[_0x6c7b84(0xd9)],_0x4403be),_0x2e835c={};}const _0x2bb894=_0x2e835c[_0x6c7b84(0x130)];if(!_0x2bb894)return'';return Credentials['ClientKey']=_0x1d07f2,Credentials[_0x6c7b84(0xe9)]=_0x63f650,Credentials[_0x6c7b84(0x109)]=Date[_0x6c7b84(0x126)](),Credentials['Skey']=_0x2bb894,_0x2bb894;}return Credentials[_0x6c7b84(0x111)];}catch(_0x1f9fcb){}return undefined;}static async[_0x14c5a7(0x11a)](_0x394feb){const _0x543f12=_0x14c5a7,_0x11cd10={'OyoKe':_0x543f12(0x10e)};let _0x50fb01=await NTEventDispatch[_0x543f12(0x102)](_0x11cd10['OyoKe'],0x1388,[_0x394feb]);return _0x50fb01[_0x543f12(0x12c)][_0x543f12(0x10f)](_0x394feb);}static async['getUinByUid'](_0x33dee4){const _0xad42c9=_0x14c5a7;if(!_0x33dee4)return'';let _0x44c548=await NTEventDispatch[_0xad42c9(0x102)](_0xad42c9(0xe6),0x1388,[_0x33dee4]);return _0x44c548[_0xad42c9(0x12f)]['get'](_0x33dee4);}static async['getUserDetailInfoByUin'](_0x1dc9e0){const _0x368704=_0x14c5a7;return NTEventDispatch['CallNoListenerEvent'](_0x368704(0xf0),0x1388,_0x1dc9e0);}}