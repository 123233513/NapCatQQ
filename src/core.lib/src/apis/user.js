const _0x2812ba=_0x245f;(function(_0x261bce,_0x540c46){const _0x1510d4=_0x245f,_0x45c3a5=_0x261bce();while(!![]){try{const _0x47edd9=parseInt(_0x1510d4(0xdc))/0x1+-parseInt(_0x1510d4(0x105))/0x2+parseInt(_0x1510d4(0x119))/0x3+-parseInt(_0x1510d4(0xee))/0x4*(-parseInt(_0x1510d4(0x11b))/0x5)+-parseInt(_0x1510d4(0xe7))/0x6*(-parseInt(_0x1510d4(0x109))/0x7)+-parseInt(_0x1510d4(0xdf))/0x8+parseInt(_0x1510d4(0x10f))/0x9*(-parseInt(_0x1510d4(0x108))/0xa);if(_0x47edd9===_0x540c46)break;else _0x45c3a5['push'](_0x45c3a5['shift']());}catch(_0x59744b){_0x45c3a5['push'](_0x45c3a5['shift']());}}}(_0x4d97,0xd7c83));import{Credentials,selfInfo}from'@/core/data';function _0x4d97(){const _0x2ee077=['onLoginSuccess','XcRrK','VZCsV','mbKjw','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','get','VKBKW','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','NodeIKernelUixConvertService/getUin','getBuddyService','CreatTime','getBuddyRecommendContactArkJson','2530214mzKFiM','获取Pskey失败','keyIndex','2950OAAjCW','14AczwsI','clientKey','robotUinRanges','addListener','gyUUg','getUserInfo','26541WpXlGm','MUKku','modifyDesktopMiniProfile','GOwlm','CpivC','setStatus','getSkey','lSoRr','aMFhx','HttpsGetCookies','2901726SbmdkY','uDfDw','5884090QLRedS','getUserDetailInfoWithBizInfo','TYpyL','getPskey','Skey','now','TgdYQ','getQzoneCookies','getProfileService','NodeIKernelProfileService/getUserDetailInfoByUin','ZtlVm','CallNoListenerEvent','setBuddyProfileLike','result','modifySelfProfile','ucCGH','getTicketService','set','uinInfo','getRobotUinRange','getUinByUid','plJif','uidInfo','&clientkey=','assign','MBNzI','fromEntries','getRobotService','length','FNnfi','uqVqF','getUidByUin','setHeader','then','AqTjg','1686546dMrMVc','getUserDetailInfo\x20timeout','rCGSw','8077784UYZHqZ','请求获取Skey时失败','delete','getProfileLikeService','avAKD','forEach','skey','vMuoD','594066aVuhZI','HKOag','PskeyTime','uid','getUserDetailInfoByUin','errMsg','domainPskeyMap','4SkxmAx','uin','setQQAvatar','ClientKey','NodeIKernelUixConvertService/getUid','push','KeyIndex','PskeyData','qYnVJ','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','session'];_0x4d97=function(){return _0x2ee077;};return _0x4d97();}function _0x245f(_0x371dcf,_0x4ac1e4){const _0x4d9783=_0x4d97();return _0x245f=function(_0x245fdf,_0x36b12e){_0x245fdf=_0x245fdf-0xbd;let _0x2178b1=_0x4d9783[_0x245fdf];return _0x2178b1;},_0x245f(_0x371dcf,_0x4ac1e4);}import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';import{NTEventDispatch}from'@/common/utils/EventTask';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener['onProfileDetailInfoChanged']=_0x11fdf5=>{const _0x4abeb2=_0x245f;userInfoCache[_0x11fdf5['uid']]=_0x11fdf5,userDetailHandlers[_0x4abeb2(0xe4)](_0x2d3c81=>_0x2d3c81(_0x11fdf5));},setTimeout(()=>{const _0x1ae95b=_0x245f;napCatCore[_0x1ae95b(0xf9)](()=>{const _0x1005e3=_0x1ae95b;napCatCore[_0x1005e3(0x10c)](profileListener);});},0x64);export class NTQQUserApi{static async['setSelfOnlineStatus'](_0x51dbd9,_0x3d7d7a,_0x1dacf6){const _0x4e505d=_0x245f;return napCatCore['session']['getMsgService']()[_0x4e505d(0x114)]({'status':_0x51dbd9,'extStatus':_0x3d7d7a,'batteryStatus':_0x1dacf6});}static async[_0x2812ba(0x104)](_0x2a2e56,_0x50ddc8=''){const _0x33746e=_0x2812ba;return napCatCore[_0x33746e(0xf8)][_0x33746e(0x102)]()['getBuddyRecommendContactArkJson'](_0x2a2e56,_0x50ddc8);}static async['like'](_0x3048a7,_0x21e474=0x1){const _0x1d7f40=_0x2812ba;return napCatCore[_0x1d7f40(0xf8)][_0x1d7f40(0xe2)]()[_0x1d7f40(0xc5)]({'friendUid':_0x3048a7,'sourceId':0x47,'doLikeCount':_0x21e474,'doLikeTollCount':0x0});}static async[_0x2812ba(0xf0)](_0x31bc0e){const _0x1d3a78=_0x2812ba,_0x417f3d=await napCatCore[_0x1d3a78(0xf8)][_0x1d3a78(0xc1)]()[_0x1d3a78(0xd9)](_0x31bc0e);return{'result':_0x417f3d?.[_0x1d3a78(0xc6)],'errMsg':_0x417f3d?.[_0x1d3a78(0xec)]};}static async['getSelfInfo'](){}static async[_0x2812ba(0x10e)](_0x24861d){}static async['getUserDetailInfo'](_0x243b0e){const _0x33378c=_0x2812ba,_0x43373e={'rCGSw':function(_0x543930,_0x389d3f){return _0x543930(_0x389d3f);},'qYnVJ':_0x33378c(0xdd),'XcRrK':function(_0x50ad93){return _0x50ad93();},'aMFhx':function(_0x47b084,_0x7444f5,_0xd096d1){return _0x47b084(_0x7444f5,_0xd096d1);}},_0x3ece46=napCatCore['session'][_0x33378c(0xc1)]();return new Promise((_0x24b457,_0xee99a1)=>{const _0x32c337=_0x33378c,_0x3866db={'uqVqF':function(_0x3cfd8d,_0x2350dc){const _0x3bf55f=_0x245f;return _0x43373e[_0x3bf55f(0xde)](_0x3cfd8d,_0x2350dc);}},_0x1ea85f=_0x43373e[_0x32c337(0xfa)](randomUUID);let _0x101682=![],_0x2824cd=undefined,_0xeed443=!![];_0x43373e[_0x32c337(0x117)](setTimeout,()=>{const _0x56cac3=_0x32c337;!_0x101682&&(_0x2824cd?_0x43373e[_0x56cac3(0xde)](_0x24b457,_0x2824cd):_0xee99a1(_0x43373e[_0x56cac3(0xf6)])),userDetailHandlers[_0x56cac3(0xe1)](_0x1ea85f);},0x1388),userDetailHandlers[_0x32c337(0xca)](_0x1ea85f,_0x4eb223=>{const _0xeb731e=_0x32c337;_0x4eb223[_0xeb731e(0xea)]===_0x243b0e&&(_0xeed443?(_0x2824cd=_0x4eb223,_0xeed443=![]):(_0x101682=!![],_0x3866db[_0xeb731e(0xd7)](_0x24b457,_0x4eb223)));}),_0x3ece46[_0x32c337(0x11c)](_0x243b0e,[0x0])[_0x32c337(0xda)](_0x6b4efc=>{});});}static async[_0x2812ba(0xc7)](_0x395e58){const _0x27e0be=_0x2812ba;return napCatCore[_0x27e0be(0xf8)]['getProfileService']()[_0x27e0be(0x111)](_0x395e58);}static async['getPSkey'](_0x43a52a,_0x50fa14=!![]){const _0x497e79=_0x2812ba,_0x558b1c={'AqTjg':function(_0x4ecaf5,_0x35c9e3){return _0x4ecaf5||_0x35c9e3;},'mbKjw':function(_0x142a09,_0x37022f){return _0x142a09>_0x37022f;},'TYpyL':function(_0x3335b5,_0x2be280){return _0x3335b5-_0x2be280;},'FNnfi':function(_0xfe68ea,_0x486dd9){return _0xfe68ea*_0x486dd9;},'GOwlm':function(_0x431215,_0x2bb9be){return _0x431215===_0x2bb9be;},'avAKD':function(_0x45d40c,_0x1f7fb9,_0x40e0c5){return _0x45d40c(_0x1f7fb9,_0x40e0c5);},'uDfDw':_0x497e79(0x106)},_0x1a957c=[],_0x2329df={};for(const _0x1c022f in _0x43a52a){const _0x18f491=Credentials['PskeyData'][_0x497e79(0xfe)](_0x43a52a[_0x1c022f]),_0x53c50e=Credentials[_0x497e79(0xe9)]['get'](_0x43a52a[_0x1c022f]);_0x558b1c[_0x497e79(0xdb)](!_0x18f491,!_0x53c50e)||_0x558b1c['mbKjw'](_0x558b1c[_0x497e79(0x11d)](Date[_0x497e79(0xbe)](),_0x53c50e),_0x558b1c[_0x497e79(0xd6)](0x708,0x3e8))||!_0x50fa14?_0x1a957c[_0x497e79(0xf3)](_0x43a52a[_0x1c022f]):_0x2329df[_0x43a52a[_0x1c022f]]=_0x18f491;}let _0x14aa36={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x558b1c[_0x497e79(0xfc)](_0x1a957c[_0x497e79(0xd5)],0x0)&&(_0x14aa36=await napCatCore[_0x497e79(0xf8)]['getTipOffService']()[_0x497e79(0x11e)](_0x1a957c,!![]));const _0x55afb2=_0x14aa36[_0x497e79(0xed)];for(const _0x558ca7 of _0x55afb2['entries']()){Credentials[_0x497e79(0xf5)][_0x497e79(0xca)](_0x558ca7[0x0],_0x558ca7[0x1]),Credentials[_0x497e79(0xe9)][_0x497e79(0xca)](_0x558ca7[0x0],Date['now']());}const _0x571e1d=Object[_0x497e79(0xd1)](Object[_0x497e79(0xd3)](_0x55afb2),_0x2329df);if(_0x558b1c[_0x497e79(0x112)](_0x14aa36[_0x497e79(0xc6)],0x0))return _0x571e1d;else _0x558b1c[_0x497e79(0xe3)](logError,_0x558b1c[_0x497e79(0x11a)],_0x14aa36['errMsg']);return{};}static async['getRobotUinRange'](){const _0x5b1d73=_0x2812ba,_0x25f253=await napCatCore[_0x5b1d73(0xf8)][_0x5b1d73(0xd4)]()[_0x5b1d73(0xcc)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x25f253?.['response']?.[_0x5b1d73(0x10b)];}static async[_0x2812ba(0xc0)](){const _0x18ef40=_0x2812ba,_0x172ffd={'cREFO':function(_0x45f02d,_0x3e0269){return _0x45f02d+_0x3e0269;},'HKOag':function(_0x29ff22,_0x518705){return _0x29ff22+_0x518705;},'ucCGH':function(_0x1f7de1,_0x3910ef){return _0x1f7de1+_0x3910ef;},'vMuoD':function(_0x3a3cee,_0x480574){return _0x3a3cee+_0x480574;},'MBNzI':_0x18ef40(0x100)},_0x2611ad=_0x172ffd['cREFO'](_0x172ffd[_0x18ef40(0xe8)](_0x172ffd[_0x18ef40(0xc8)](_0x172ffd[_0x18ef40(0xe6)](_0x18ef40(0xfd),selfInfo[_0x18ef40(0xef)])+'&clientkey=',Credentials[_0x18ef40(0xf1)]),_0x172ffd[_0x18ef40(0xd2)])+selfInfo[_0x18ef40(0xef)],'%2Finfocenter&keyindex=19%27');let _0x4f7b25={};try{_0x4f7b25=await RequestUtil[_0x18ef40(0x118)](_0x2611ad);}catch(_0x2213f3){logDebug('请求获取Cookies时失败',_0x2213f3),_0x4f7b25={};}return _0x4f7b25;}static async[_0x2812ba(0x115)](_0x799889=!![]){const _0x5a59b7=_0x2812ba,_0x434bc0={'VKBKW':function(_0x4fb0a2,_0x4e4ab0){return _0x4fb0a2==_0x4e4ab0;},'gyUUg':function(_0x31c790,_0xfaed1a){return _0x31c790!==_0xfaed1a;},'CpivC':function(_0x32bd63,_0x41de76){return _0x32bd63+_0x41de76;},'CmYxv':function(_0x504b27,_0x4950b2){return _0x504b27+_0x4950b2;},'MUKku':function(_0x48dded,_0x155ca7){return _0x48dded+_0x155ca7;},'ZtlVm':_0x5a59b7(0xfd),'VZCsV':_0x5a59b7(0xd0),'TgdYQ':function(_0x311b2f,_0x5d0ec2,_0x3d770a){return _0x311b2f(_0x5d0ec2,_0x3d770a);},'xyvvI':_0x5a59b7(0xe5)};try{if(_0x434bc0[_0x5a59b7(0xff)](Credentials['CreatTime'],0x0)||Date['now']()-Credentials['CreatTime']>0x3e8*0xe10||!_0x799889){const _0x22fd94=await napCatCore['session'][_0x5a59b7(0xc9)]()['forceFetchClientKey']('');if(_0x434bc0[_0x5a59b7(0x10d)](_0x22fd94['result'],0x0))return'';const _0x140b1d=_0x22fd94[_0x5a59b7(0x10a)],_0x52bc33=_0x22fd94[_0x5a59b7(0x107)],_0x4cc85b=_0x434bc0[_0x5a59b7(0x113)](_0x434bc0['CmYxv'](_0x434bc0[_0x5a59b7(0x110)](_0x434bc0[_0x5a59b7(0x113)](_0x434bc0[_0x5a59b7(0xc3)]+selfInfo['uin'],_0x434bc0[_0x5a59b7(0xfb)]),_0x140b1d),_0x5a59b7(0xf7)),_0x52bc33);let _0x18f14b={};try{_0x18f14b=await RequestUtil[_0x5a59b7(0x118)](_0x4cc85b);}catch(_0x4fb52e){_0x434bc0[_0x5a59b7(0xbf)](logDebug,_0x5a59b7(0xe0),_0x4fb52e),_0x18f14b={};}const _0x817c43=_0x18f14b[_0x434bc0['xyvvI']];if(!_0x817c43)return'';return Credentials[_0x5a59b7(0xf1)]=_0x140b1d,Credentials[_0x5a59b7(0xf4)]=_0x52bc33,Credentials[_0x5a59b7(0x103)]=Date[_0x5a59b7(0xbe)](),Credentials[_0x5a59b7(0xbd)]=_0x817c43,_0x817c43;}return Credentials[_0x5a59b7(0xbd)];}catch(_0x27f52a){}return undefined;}static async[_0x2812ba(0xd8)](_0x1f45c6){const _0x3b4bf6=_0x2812ba,_0x159e55={'lSoRr':_0x3b4bf6(0xf2)};let _0x14059a=await NTEventDispatch[_0x3b4bf6(0xc4)](_0x159e55[_0x3b4bf6(0x116)],0x1388,[_0x1f45c6]);return _0x14059a[_0x3b4bf6(0xcf)][_0x3b4bf6(0xfe)](_0x1f45c6);}static async[_0x2812ba(0xcd)](_0x401124){const _0x508c7f=_0x2812ba,_0x277040={'plJif':_0x508c7f(0x101)};if(!_0x401124)return'';let _0x5aabe2=await NTEventDispatch['CallNoListenerEvent'](_0x277040[_0x508c7f(0xce)],0x1388,[_0x401124]);return _0x5aabe2[_0x508c7f(0xcb)]['get'](_0x401124);}static async[_0x2812ba(0xeb)](_0x20ee5f){const _0x134ec6=_0x2812ba;return NTEventDispatch[_0x134ec6(0xc4)](_0x134ec6(0xc2),0x1388,_0x20ee5f);}}