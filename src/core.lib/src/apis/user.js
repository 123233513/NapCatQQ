const _0x44d698=_0x37c1;(function(_0x361e94,_0x4ec3cd){const _0x478b40=_0x37c1,_0x38f8cf=_0x361e94();while(!![]){try{const _0x201124=-parseInt(_0x478b40(0x108))/0x1+parseInt(_0x478b40(0x126))/0x2*(-parseInt(_0x478b40(0x11d))/0x3)+parseInt(_0x478b40(0x119))/0x4*(-parseInt(_0x478b40(0x120))/0x5)+parseInt(_0x478b40(0x139))/0x6+parseInt(_0x478b40(0x13f))/0x7+parseInt(_0x478b40(0xfe))/0x8+-parseInt(_0x478b40(0x141))/0x9;if(_0x201124===_0x4ec3cd)break;else _0x38f8cf['push'](_0x38f8cf['shift']());}catch(_0x456fd2){_0x38f8cf['push'](_0x38f8cf['shift']());}}}(_0x4ad8,0x7d7de));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x4ad8(){const _0x4ddcca=['LNrcA','585515tkHtKu','AxaJx','forEach','getMsgService','CreatTime','getSkey','71726hlgNmO','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','getProfileLikeService','Fdjzm','PskeyData','ClientKey','Htsao','getPSkey','setHeader','set','keyIndex','dKBKI','PskeyTime','RgjvK','fromEntries','push','then','KxmZF','getRobotUinRange','5037312nQytTY','LfORB','clientKey','getQzoneCookies','onLoginSuccess','请求获取Cookies时失败','3634540Xmxcmx','domainPskeyMap','6741891CLohqZ','now','setBuddyProfileLike','skxqX','获取Pskey失败','kVXKW','getProfileService','result','%2Finfocenter&keyindex=19%27','pgIZw','&clientkey=','uid','TinaE','MBBsS','qaMCJ','NwvbL','setStatus','addListener','7714152lvLukc','JCWmE','skey','response','jBBgJ','delete','onProfileDetailInfoChanged','getUserDetailInfo\x20timeout','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','forceFetchClientKey','108462qwSwHR','get','setSelfOnlineStatus','Skey','hTtYY','HttpsGetCookies','getTipOffService','setQQAvatar','mJKqf','getPskey','ixQcM','errMsg','LPZmT','entries','nYqkb','KeyIndex','iHPqM','8bqQWBq','pABGU','uin','session','60qmdofw','XLaXg'];_0x4ad8=function(){return _0x4ddcca;};return _0x4ad8();}import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';function _0x37c1(_0x2d9f3e,_0x338281){const _0x4ad890=_0x4ad8();return _0x37c1=function(_0x37c1f6,_0xbe8db){_0x37c1f6=_0x37c1f6-0xfb;let _0x2f8bd5=_0x4ad890[_0x37c1f6];return _0x2f8bd5;},_0x37c1(_0x2d9f3e,_0x338281);}const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x44d698(0x104)]=_0x39b080=>{const _0x590f6c=_0x44d698;userInfoCache[_0x39b080[_0x590f6c(0x14c)]]=_0x39b080,userDetailHandlers[_0x590f6c(0x122)](_0x47aaa8=>_0x47aaa8(_0x39b080));},setTimeout(()=>{const _0x26bea9=_0x44d698;napCatCore[_0x26bea9(0x13d)](()=>{const _0x22cfd7=_0x26bea9;napCatCore[_0x22cfd7(0xfd)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x44d698(0x10a)](_0x8f282d,_0x4ed534,_0x313809){const _0x511da2=_0x44d698;return napCatCore[_0x511da2(0x11c)][_0x511da2(0x123)]()[_0x511da2(0xfc)]({'status':_0x8f282d,'extStatus':_0x4ed534,'batteryStatus':_0x313809});}static async['like'](_0x4a666f,_0x5d674f=0x1){const _0xcef9e7=_0x44d698;return napCatCore[_0xcef9e7(0x11c)][_0xcef9e7(0x128)]()[_0xcef9e7(0x143)]({'friendUid':_0x4a666f,'sourceId':0x47,'doLikeCount':_0x5d674f,'doLikeTollCount':0x0});}static async[_0x44d698(0x10f)](_0x66f082){const _0x163c9c=_0x44d698,_0x41101a=napCatCore[_0x163c9c(0x11c)][_0x163c9c(0x147)]()[_0x163c9c(0x12e)](_0x66f082);return{'result':_0x41101a?.[_0x163c9c(0x148)],'errMsg':_0x41101a?.[_0x163c9c(0x113)]};}static async['getSelfInfo'](){}static async['getUserInfo'](_0x3a413d){}static async['getUserDetailInfo'](_0x1cf865){const _0x4333be=_0x44d698,_0x23648d={'jBBgJ':function(_0x25f894,_0x3c689e){return _0x25f894===_0x3c689e;},'zXarJ':function(_0x465c3e,_0x5ecdd9){return _0x465c3e(_0x5ecdd9);},'nYqkb':function(_0x563b26){return _0x563b26();},'hTtYY':function(_0x37985c,_0x17b367,_0x1a5c23){return _0x37985c(_0x17b367,_0x1a5c23);}},_0x35e364=napCatCore[_0x4333be(0x11c)][_0x4333be(0x147)]();return new Promise((_0x4c2a02,_0x49fbd4)=>{const _0x42e21f=_0x4333be,_0x4566a9={'LNrcA':function(_0x3fdb69,_0x4998cf){return _0x23648d['zXarJ'](_0x3fdb69,_0x4998cf);}},_0x41441f=_0x23648d[_0x42e21f(0x116)](randomUUID);let _0x242019=![],_0x4b9f4b=undefined,_0x3d9069=!![];_0x23648d[_0x42e21f(0x10c)](setTimeout,()=>{const _0x23b85b=_0x42e21f;!_0x242019&&(_0x4b9f4b?_0x4566a9['LNrcA'](_0x4c2a02,_0x4b9f4b):_0x4566a9[_0x23b85b(0x11f)](_0x49fbd4,_0x23b85b(0x105))),userDetailHandlers[_0x23b85b(0x103)](_0x41441f);},0x1388),userDetailHandlers[_0x42e21f(0x12f)](_0x41441f,_0x3dbc9a=>{const _0x1ab4f4=_0x42e21f;_0x23648d[_0x1ab4f4(0x102)](_0x3dbc9a[_0x1ab4f4(0x14c)],_0x1cf865)&&(uid2UinMap[_0x1cf865]=_0x3dbc9a[_0x1ab4f4(0x11b)],_0x3d9069?(_0x4b9f4b=_0x3dbc9a,_0x3d9069=![]):(_0x242019=!![],_0x4c2a02(_0x3dbc9a)));}),_0x35e364['getUserDetailInfoWithBizInfo'](_0x1cf865,[0x0])[_0x42e21f(0x136)](_0x3218e3=>{});});}static async[_0x44d698(0x12d)](_0x121e9f,_0x742c2e=!![]){const _0x2581d3=_0x44d698,_0x4100ce={'dKBKI':function(_0x1372a5,_0x41d69b){return _0x1372a5||_0x41d69b;},'pgIZw':function(_0x29ad38,_0x20ac1a){return _0x29ad38>_0x20ac1a;},'PtPpA':function(_0x57aa54,_0x5f35e1){return _0x57aa54-_0x5f35e1;},'RgjvK':function(_0x1cd112,_0x15b2ef){return _0x1cd112*_0x15b2ef;},'MBBsS':function(_0x342972,_0x408ef0){return _0x342972>_0x408ef0;},'Dleiz':function(_0x184c2b,_0x3b04a3){return _0x184c2b===_0x3b04a3;},'JCWmE':function(_0x6a994c,_0x156620,_0x10557a){return _0x6a994c(_0x156620,_0x10557a);},'qaMCJ':_0x2581d3(0x145)},_0x2d1d4c=[],_0x43fcde={};for(const _0x437ed0 in _0x121e9f){const _0x4ae163=Credentials[_0x2581d3(0x12a)][_0x2581d3(0x109)](_0x121e9f[_0x437ed0]),_0x317f91=Credentials[_0x2581d3(0x132)][_0x2581d3(0x109)](_0x121e9f[_0x437ed0]);_0x4100ce[_0x2581d3(0x131)](!_0x4ae163,!_0x317f91)||_0x4100ce[_0x2581d3(0x14a)](_0x4100ce['PtPpA'](Date[_0x2581d3(0x142)](),_0x317f91),_0x4100ce[_0x2581d3(0x133)](0x708,0x3e8))||!_0x742c2e?_0x2d1d4c[_0x2581d3(0x135)](_0x121e9f[_0x437ed0]):_0x43fcde[_0x121e9f[_0x437ed0]]=_0x4ae163;}let _0x24ce9c={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x4100ce[_0x2581d3(0x14e)](_0x2d1d4c['length'],0x0)&&(_0x24ce9c=await napCatCore[_0x2581d3(0x11c)][_0x2581d3(0x10e)]()[_0x2581d3(0x111)](_0x2d1d4c,!![]));const _0x10fddc=_0x24ce9c[_0x2581d3(0x140)];for(const _0x12656a of _0x10fddc[_0x2581d3(0x115)]()){Credentials[_0x2581d3(0x12a)][_0x2581d3(0x12f)](_0x12656a[0x0],_0x12656a[0x1]),Credentials['PskeyTime'][_0x2581d3(0x12f)](_0x12656a[0x0],Date[_0x2581d3(0x142)]());}const _0x42835e=Object['assign'](Object[_0x2581d3(0x134)](_0x10fddc),_0x43fcde);if(_0x4100ce['Dleiz'](_0x24ce9c['result'],0x0))return _0x42835e;else _0x4100ce[_0x2581d3(0xff)](logError,_0x4100ce[_0x2581d3(0x14f)],_0x24ce9c['errMsg']);return{};}static async['getRobotUinRange'](){const _0xd06dbb=_0x44d698,_0x46e4cd=await napCatCore[_0xd06dbb(0x11c)]['getRobotService']()[_0xd06dbb(0x138)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x46e4cd?.[_0xd06dbb(0x101)]?.['robotUinRanges'];}static async[_0x44d698(0x13c)](){const _0x43e16c=_0x44d698,_0x425f44={'wHaNK':function(_0x551ac9,_0x262d75){return _0x551ac9+_0x262d75;},'pABGU':function(_0x3d89ba,_0x54678e){return _0x3d89ba+_0x54678e;},'Fdjzm':function(_0xee8baa,_0x35fb59){return _0xee8baa+_0x35fb59;},'LfORB':function(_0x5d02af,_0x30a88c){return _0x5d02af+_0x30a88c;},'eECXN':_0x43e16c(0x127),'KxmZF':_0x43e16c(0x106),'iHPqM':_0x43e16c(0x149),'TinaE':function(_0x59654f,_0x123c2d,_0x8798eb){return _0x59654f(_0x123c2d,_0x8798eb);},'kVXKW':_0x43e16c(0x13e)},_0x968d0d=_0x425f44['wHaNK'](_0x425f44[_0x43e16c(0x11a)](_0x425f44[_0x43e16c(0x129)](_0x425f44[_0x43e16c(0x11a)](_0x425f44[_0x43e16c(0x13a)](_0x425f44['eECXN']+selfInfo[_0x43e16c(0x11b)],_0x43e16c(0x14b)),Credentials[_0x43e16c(0x12b)]),_0x425f44[_0x43e16c(0x137)]),selfInfo[_0x43e16c(0x11b)]),_0x425f44[_0x43e16c(0x118)]);let _0x2d3cea={};try{_0x2d3cea=await RequestUtil[_0x43e16c(0x10d)](_0x968d0d);}catch(_0x140ad9){_0x425f44[_0x43e16c(0x14d)](logDebug,_0x425f44[_0x43e16c(0x146)],_0x140ad9),_0x2d3cea={};}return _0x2d3cea;}static async[_0x44d698(0x125)](_0x8cfca=!![]){const _0x360f54=_0x44d698,_0x56323d={'ixQcM':function(_0x3931dd,_0x28e60d){return _0x3931dd-_0x28e60d;},'skxqX':function(_0x291bb0,_0x380782){return _0x291bb0*_0x380782;},'Htsao':function(_0x62056a,_0x317564){return _0x62056a+_0x317564;},'mJKqf':function(_0x279cca,_0x5f02fe){return _0x279cca+_0x5f02fe;},'sVeSw':function(_0x2eb746,_0x36c371){return _0x2eb746+_0x36c371;},'XLaXg':function(_0x598a3f,_0x1a5fc3){return _0x598a3f+_0x1a5fc3;},'AxaJx':_0x360f54(0x127),'twHtx':'&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','NwvbL':function(_0xaf77c0,_0x506c8a,_0x5da613){return _0xaf77c0(_0x506c8a,_0x5da613);},'LPZmT':'请求获取Skey时失败','xKFQl':_0x360f54(0x100)};try{if(Credentials[_0x360f54(0x124)]==0x0||_0x56323d[_0x360f54(0x112)](Date[_0x360f54(0x142)](),Credentials[_0x360f54(0x124)])>_0x56323d[_0x360f54(0x144)](0x3e8,0xe10)||!_0x8cfca){const _0x3e95dc=await napCatCore[_0x360f54(0x11c)]['getTicketService']()[_0x360f54(0x107)]('');if(_0x3e95dc[_0x360f54(0x148)]!==0x0)return'';const _0x44f972=_0x3e95dc[_0x360f54(0x13b)],_0x183105=_0x3e95dc[_0x360f54(0x130)],_0xdf38ad=_0x56323d[_0x360f54(0x12c)](_0x56323d[_0x360f54(0x110)](_0x56323d['sVeSw'](_0x56323d[_0x360f54(0x11e)](_0x56323d[_0x360f54(0x110)](_0x56323d[_0x360f54(0x121)],selfInfo[_0x360f54(0x11b)]),_0x360f54(0x14b)),_0x44f972),_0x56323d['twHtx']),_0x183105);let _0x4013a8={};try{_0x4013a8=await RequestUtil[_0x360f54(0x10d)](_0xdf38ad);}catch(_0x5e5c9f){_0x56323d[_0x360f54(0xfb)](logDebug,_0x56323d[_0x360f54(0x114)],_0x5e5c9f),_0x4013a8={};}const _0x3cd59e=_0x4013a8[_0x56323d['xKFQl']];if(!_0x3cd59e)return'';return Credentials['ClientKey']=_0x44f972,Credentials[_0x360f54(0x117)]=_0x183105,Credentials[_0x360f54(0x124)]=Date[_0x360f54(0x142)](),Credentials[_0x360f54(0x10b)]=_0x3cd59e,_0x3cd59e;}return Credentials['Skey'];}catch(_0x153607){}return undefined;}}