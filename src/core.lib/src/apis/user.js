const _0x2593db=_0x15e8;(function(_0x5df3b1,_0x14478f){const _0x24ca1b=_0x15e8,_0x48f6d0=_0x5df3b1();while(!![]){try{const _0x2871d6=-parseInt(_0x24ca1b(0x9e))/0x1+-parseInt(_0x24ca1b(0xd4))/0x2+-parseInt(_0x24ca1b(0xa3))/0x3*(parseInt(_0x24ca1b(0xcb))/0x4)+-parseInt(_0x24ca1b(0xd8))/0x5+parseInt(_0x24ca1b(0xb3))/0x6+parseInt(_0x24ca1b(0xe4))/0x7+parseInt(_0x24ca1b(0xc8))/0x8;if(_0x2871d6===_0x14478f)break;else _0x48f6d0['push'](_0x48f6d0['shift']());}catch(_0x15f1d6){_0x48f6d0['push'](_0x48f6d0['shift']());}}}(_0x500e,0x8399b));import{Credentials,selfInfo}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';function _0x15e8(_0x4c659b,_0x432039){const _0x500e16=_0x500e();return _0x15e8=function(_0x15e887,_0x3a34f9){_0x15e887=_0x15e887-0x9e;let _0x47c551=_0x500e16[_0x15e887];return _0x47c551;},_0x15e8(_0x4c659b,_0x432039);}import{randomUUID}from'crypto';import{HttpGetCookies}from'../../../common/utils/request';function _0x500e(){const _0x56f5da=['errMsg','getSelfInfo','addListener','PskeyData','entries','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','Eieub','Vfmjp','20753224JyGuVS','fromEntries','push','4pDBKqH','PskeyTime','clientKey','getRobotUinRange','rYPEy','Gvkjj','getUserDetailInfo\x20timeout','aOhrp','setQQAvatar','1654844uPCuek','forEach','DMQvT','getMsgService','4524865sgQtzf','bIiXc','delete','NPuYv','forceFetchClientKey','domainPskeyMap','tKNBU','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','getTicketService','length','now','Skey','4899454geFJRN','sCcdB','GbddF','359767KGoejJ','pnpTi','response','mdLBA','getTipOffService','3115533wDJqWc','igayL','ASVFF','vnuPk','set','onProfileDetailInfoChanged','then','CGsiC','session','onLoginSuccess','get','setSelfOnlineStatus','uid','获取Pskey失败','BKQjL','result','2253798dauOmj','&clientkey=','HDnQD','getUserDetailInfoWithBizInfo','getSkey','assign','getPSkey','pPhip','bYjIk','CreatTime','getUserInfo','robotUinRanges','wBmUr'];_0x500e=function(){return _0x56f5da;};return _0x500e();}import{logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x2593db(0xa8)]=_0x32e7c2=>{const _0x30ca62=_0x2593db;userInfoCache[_0x32e7c2[_0x30ca62(0xaf)]]=_0x32e7c2,userDetailHandlers[_0x30ca62(0xd5)](_0x5a2145=>_0x5a2145(_0x32e7c2));},setTimeout(()=>{const _0x5766f4=_0x2593db;napCatCore[_0x5766f4(0xac)](()=>{const _0x5abe41=_0x5766f4;napCatCore[_0x5abe41(0xc2)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x2593db(0xae)](_0x3788d2,_0x4d1758,_0x7e8f64){const _0x7a67bd=_0x2593db;return napCatCore[_0x7a67bd(0xab)][_0x7a67bd(0xd7)]()['setStatus']({'status':_0x3788d2,'extStatus':_0x4d1758,'batteryStatus':_0x7e8f64});}static async['like'](_0x36c053,_0x26bc10=0x1){return napCatCore['session']['getProfileLikeService']()['setBuddyProfileLike']({'friendUid':_0x36c053,'sourceId':0x47,'doLikeCount':_0x26bc10,'doLikeTollCount':0x0});}static async[_0x2593db(0xd3)](_0x22843e){const _0x5a5c09=_0x2593db,_0x55a468=napCatCore[_0x5a5c09(0xab)]['getProfileService']()['setHeader'](_0x22843e);return{'result':_0x55a468?.[_0x5a5c09(0xb2)],'errMsg':_0x55a468?.['errMsg']};}static async[_0x2593db(0xc1)](){}static async[_0x2593db(0xbd)](_0x108469){}static async['getUserDetailInfo'](_0x2dee24){const _0x152476=_0x2593db,_0x595f64={'pnpTi':function(_0x277bf9,_0x222256){return _0x277bf9(_0x222256);},'wBmUr':function(_0x40b5ea,_0x36c3bc){return _0x40b5ea(_0x36c3bc);},'Gvkjj':_0x152476(0xd1)},_0xd26d16=napCatCore[_0x152476(0xab)]['getProfileService']();return new Promise((_0x5aef36,_0x5c2e6c)=>{const _0xcba7b7=_0x152476,_0x18aab8={'GbddF':function(_0x15d723,_0x126168){const _0x108b7e=_0x15e8;return _0x595f64[_0x108b7e(0xbf)](_0x15d723,_0x126168);},'bIiXc':_0x595f64[_0xcba7b7(0xd0)]},_0x3825ce=randomUUID();let _0x4b51f3=![];setTimeout(()=>{const _0xb42984=_0xcba7b7;!_0x4b51f3&&_0x18aab8[_0xb42984(0xe6)](_0x5c2e6c,_0x18aab8[_0xb42984(0xd9)]);},0x1388),userDetailHandlers[_0xcba7b7(0xa7)](_0x3825ce,_0x29eac0=>{const _0x201175=_0xcba7b7;_0x29eac0[_0x201175(0xaf)]===_0x2dee24&&(_0x4b51f3=!![],userDetailHandlers[_0x201175(0xda)](_0x3825ce),_0x595f64[_0x201175(0x9f)](_0x5aef36,_0x29eac0));}),_0xd26d16[_0xcba7b7(0xb6)](_0x2dee24,[0x0])[_0xcba7b7(0xa9)](_0x2ee159=>{});});}static async[_0x2593db(0xb9)](_0x5a5e17,_0x514481=!![]){const _0x1690cd=_0x2593db,_0x3ffe92={'mdLBA':function(_0x476a8e,_0x55d4c2){return _0x476a8e||_0x55d4c2;},'CGsiC':function(_0x57019c,_0xb987dd){return _0x57019c>_0xb987dd;},'wevta':function(_0x1cfba8,_0x3b6d0d){return _0x1cfba8-_0x3b6d0d;},'ASVFF':function(_0x5d826f,_0x4c71a8){return _0x5d826f*_0x4c71a8;},'DMQvT':function(_0x1e132b,_0x4320c9){return _0x1e132b===_0x4320c9;},'vnuPk':function(_0x3af4b0,_0x3a5d1d,_0x32e902){return _0x3af4b0(_0x3a5d1d,_0x32e902);},'rYPEy':_0x1690cd(0xb0)};let _0x1f8867=[],_0x2baa2d={};for(let _0x4bd98d in _0x5a5e17){let _0x9ee510=Credentials[_0x1690cd(0xc3)][_0x1690cd(0xad)](_0x5a5e17[_0x4bd98d]),_0x18a3ac=Credentials[_0x1690cd(0xcc)][_0x1690cd(0xad)](_0x5a5e17[_0x4bd98d]);_0x3ffe92[_0x1690cd(0xa1)](!_0x9ee510,!_0x18a3ac)||_0x3ffe92[_0x1690cd(0xaa)](_0x3ffe92['wevta'](Date['now'](),_0x18a3ac),_0x3ffe92[_0x1690cd(0xa5)](0x708,0x3e8))||!_0x514481?_0x1f8867[_0x1690cd(0xca)](_0x5a5e17[_0x4bd98d]):_0x2baa2d[_0x5a5e17[_0x4bd98d]]=_0x9ee510;}let _0x1f8492={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x3ffe92[_0x1690cd(0xaa)](_0x1f8867[_0x1690cd(0xe1)],0x0)&&(_0x1f8492=await napCatCore[_0x1690cd(0xab)][_0x1690cd(0xa2)]()['getPskey'](_0x1f8867,!![]));let _0x3a809f=_0x1f8492[_0x1690cd(0xdd)];for(let _0x29752a of _0x3a809f[_0x1690cd(0xc4)]()){Credentials[_0x1690cd(0xc3)][_0x1690cd(0xa7)](_0x29752a[0x0],_0x29752a[0x1]),Credentials[_0x1690cd(0xcc)][_0x1690cd(0xa7)](_0x29752a[0x0],Date['now']());}let _0x2c4dff=Object[_0x1690cd(0xb8)](Object[_0x1690cd(0xc9)](_0x3a809f),_0x2baa2d);if(_0x3ffe92[_0x1690cd(0xd6)](_0x1f8492[_0x1690cd(0xb2)],0x0))return _0x2c4dff;else _0x3ffe92[_0x1690cd(0xa6)](logError,_0x3ffe92[_0x1690cd(0xcf)],_0x1f8492[_0x1690cd(0xc0)]);return{};}static async[_0x2593db(0xce)](){const _0x4044bf=_0x2593db,_0x5e9242=await napCatCore[_0x4044bf(0xab)]['getRobotService']()[_0x4044bf(0xce)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x5e9242?.[_0x4044bf(0xa0)]?.[_0x4044bf(0xbe)];}static async[_0x2593db(0xb7)](_0x2377ad=!![]){const _0x2f5181=_0x2593db,_0x3b9cc7={'pPhip':function(_0x3959e0,_0x4fd4d3){return _0x3959e0>_0x4fd4d3;},'Vfmjp':function(_0x3c1e7c,_0x5e7e29){return _0x3c1e7c-_0x5e7e29;},'igayL':function(_0x11b37a,_0x35b6f6){return _0x11b37a*_0x35b6f6;},'NPuYv':function(_0x4d6e3c,_0x5aa6d8){return _0x4d6e3c!==_0x5aa6d8;},'HDnQD':function(_0x490774,_0x1f37a4){return _0x490774+_0x1f37a4;},'sCcdB':function(_0x43628d,_0x614520){return _0x43628d+_0x614520;},'tKNBU':_0x2f5181(0xdf),'bYjIk':_0x2f5181(0xb4),'Eieub':_0x2f5181(0xc5),'BKQjL':function(_0x85f8f5,_0x49d09b){return _0x85f8f5(_0x49d09b);},'aOhrp':'skey'};try{if(Credentials[_0x2f5181(0xbc)]==0x0||_0x3b9cc7[_0x2f5181(0xba)](_0x3b9cc7[_0x2f5181(0xc7)](Date['now'](),Credentials[_0x2f5181(0xbc)]),_0x3b9cc7[_0x2f5181(0xa4)](0x3e8,0xe10))||!_0x2377ad){const _0x5c7cd4=await napCatCore[_0x2f5181(0xab)][_0x2f5181(0xe0)]()[_0x2f5181(0xdc)]('');if(_0x3b9cc7[_0x2f5181(0xdb)](_0x5c7cd4['result'],0x0))return'';const _0x309d3f=_0x5c7cd4[_0x2f5181(0xcd)],_0x17b15c=_0x5c7cd4['keyIndex'],_0x2955f4=_0x3b9cc7[_0x2f5181(0xb5)](_0x3b9cc7[_0x2f5181(0xb5)](_0x3b9cc7[_0x2f5181(0xe5)](_0x3b9cc7[_0x2f5181(0xde)],selfInfo['uin']),_0x3b9cc7[_0x2f5181(0xbb)]),_0x309d3f)+_0x3b9cc7[_0x2f5181(0xc6)]+_0x17b15c,_0x422b6c=await _0x3b9cc7[_0x2f5181(0xb1)](HttpGetCookies,_0x2955f4),_0x3d10bf=_0x422b6c['get'](_0x3b9cc7[_0x2f5181(0xd2)]);if(!_0x3d10bf)return'';return Credentials[_0x2f5181(0xbc)]=Date[_0x2f5181(0xe2)](),Credentials[_0x2f5181(0xe3)]=_0x3d10bf,_0x3d10bf;}return Credentials[_0x2f5181(0xe3)];}catch(_0x5dc0a9){}return undefined;}}