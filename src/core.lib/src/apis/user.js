const _0x2be849=_0x3dde;(function(_0x561091,_0x1e1723){const _0x3d891b=_0x3dde,_0x5d6a33=_0x561091();while(!![]){try{const _0x5b7cea=-parseInt(_0x3d891b(0x95))/0x1*(parseInt(_0x3d891b(0x85))/0x2)+parseInt(_0x3d891b(0x8a))/0x3*(parseInt(_0x3d891b(0xb0))/0x4)+parseInt(_0x3d891b(0x82))/0x5*(-parseInt(_0x3d891b(0xad))/0x6)+parseInt(_0x3d891b(0xbf))/0x7+parseInt(_0x3d891b(0x7b))/0x8*(-parseInt(_0x3d891b(0x83))/0x9)+parseInt(_0x3d891b(0x8f))/0xa*(-parseInt(_0x3d891b(0xa1))/0xb)+-parseInt(_0x3d891b(0x89))/0xc*(-parseInt(_0x3d891b(0xc2))/0xd);if(_0x5b7cea===_0x1e1723)break;else _0x5d6a33['push'](_0x5d6a33['shift']());}catch(_0x561a3b){_0x5d6a33['push'](_0x5d6a33['shift']());}}}(_0x39f6,0xdf3d9));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x3dde(_0x4eef72,_0x258be7){const _0x39f627=_0x39f6();return _0x3dde=function(_0x3dde5f,_0x38fe26){_0x3dde5f=_0x3dde5f-0x78;let _0x50974a=_0x39f627[_0x3dde5f];return _0x50974a;},_0x3dde(_0x4eef72,_0x258be7);}import{RequestUtil}from'@/common/utils/request';function _0x39f6(){const _0x4cf254=['获取Pskey失败','176kCoUuk','CCNof','getPskey','set','keyIndex','uid','PskeyData','then','GOXhn','forEach','CreatTime','DCdVs','IsvSR','like','getProfileLikeService','11589081QUUtHx','onProfileDetailInfoChanged','lgzIH','17173vEYlPG','mMQkL','HttpsGetCookies','getProfileService','result','fromEntries','domainPskeyMap','getUserDetailInfoWithBizInfo','clientKey','ZYYIO','1880nBMLBG','setHeader','hdQJA','response','session','getRobotUinRange','now','410NyegMX','12807RbgoXL','getUserInfo','351518oCetoX','robotUinRanges','getTicketService','uin','24948CJRGXc','14808tJMbCd','setQQAvatar','IDKwh','getUserDetailInfo','getTipOffService','240aumtOW','getMsgService','setStatus','get','getPSkey','GzBpC','6nJWHBQ','OcRHi','delete','NwiJQ','setBuddyProfileLike','getRobotService','skey','YYuPW','onLoginSuccess','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','HfLDL','push','494527DqPUtR','addListener','PskeyTime','&clientkey=','SnjYo','length','LsBgW','assign','errMsg','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','JAcuX','NIWJZ','90498GbHGBI','Skey'];_0x39f6=function(){return _0x4cf254;};return _0x39f6();}import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x2be849(0xc0)]=_0xea0d88=>{const _0x9bb04=_0x2be849;userInfoCache[_0xea0d88[_0x9bb04(0xb5)]]=_0xea0d88,userDetailHandlers[_0x9bb04(0xb9)](_0x27baf4=>_0x27baf4(_0xea0d88));},setTimeout(()=>{const _0x3303f9=_0x2be849;napCatCore[_0x3303f9(0x9d)](()=>{const _0x5a76a6=_0x3303f9;napCatCore[_0x5a76a6(0xa2)](profileListener);});},0x64);export class NTQQUserApi{static async['setSelfOnlineStatus'](_0x221913,_0x22db1c,_0x8edb56){const _0x2cee22=_0x2be849;return napCatCore[_0x2cee22(0x7f)][_0x2cee22(0x90)]()[_0x2cee22(0x91)]({'status':_0x221913,'extStatus':_0x22db1c,'batteryStatus':_0x8edb56});}static async[_0x2be849(0xbd)](_0x26c21f,_0x5e4746=0x1){const _0x19795f=_0x2be849;return napCatCore['session'][_0x19795f(0xbe)]()[_0x19795f(0x99)]({'friendUid':_0x26c21f,'sourceId':0x47,'doLikeCount':_0x5e4746,'doLikeTollCount':0x0});}static async[_0x2be849(0x8b)](_0x2f778e){const _0x46dfc6=_0x2be849,_0x3ed15d=napCatCore[_0x46dfc6(0x7f)][_0x46dfc6(0xc5)]()[_0x46dfc6(0x7c)](_0x2f778e);return{'result':_0x3ed15d?.[_0x46dfc6(0xc6)],'errMsg':_0x3ed15d?.[_0x46dfc6(0xa9)]};}static async['getSelfInfo'](){}static async[_0x2be849(0x84)](_0x527a07){}static async[_0x2be849(0x8d)](_0x3221d6){const _0x43f217=_0x2be849,_0x34ff4d={'zulxF':'getUserDetailInfo\x20timeout','JAcuX':function(_0x3cb6be,_0xc7f986){return _0x3cb6be(_0xc7f986);},'IDKwh':function(_0x5c8185){return _0x5c8185();}},_0x3e9135=napCatCore[_0x43f217(0x7f)][_0x43f217(0xc5)]();return new Promise((_0x1e0579,_0x23e975)=>{const _0x219965=_0x43f217,_0x58b3cd={'HfLDL':function(_0x40bd84,_0x458634){return _0x40bd84===_0x458634;},'rQKQX':function(_0x425cc6,_0x301279){const _0x46bf4a=_0x3dde;return _0x34ff4d[_0x46bf4a(0xab)](_0x425cc6,_0x301279);}},_0x5ef881=_0x34ff4d[_0x219965(0x8c)](randomUUID);let _0x3735b8=![],_0x212a45=!![];setTimeout(()=>{const _0x1a1cc3=_0x219965;!_0x3735b8&&_0x23e975(_0x34ff4d['zulxF']),userDetailHandlers[_0x1a1cc3(0x97)](_0x5ef881);},0x1388),userDetailHandlers[_0x219965(0xb3)](_0x5ef881,_0x469251=>{const _0x4b2455=_0x219965;_0x58b3cd[_0x4b2455(0x9f)](_0x469251['uid'],_0x3221d6)&&(_0x212a45?_0x212a45=![]:(_0x3735b8=!![],uid2UinMap[_0x3221d6]=_0x469251[_0x4b2455(0x88)],_0x58b3cd['rQKQX'](_0x1e0579,_0x469251)));}),_0x3e9135[_0x219965(0x78)](_0x3221d6,[0x0])[_0x219965(0xb7)](_0x43e587=>{});});}static async[_0x2be849(0x93)](_0x2c2cff,_0x21b7a2=!![]){const _0x16b737=_0x2be849,_0x34906b={'DCdVs':function(_0x5e7f91,_0x3b5dc1){return _0x5e7f91>_0x3b5dc1;},'LsBgW':function(_0x3fd190,_0x53b94a){return _0x3fd190-_0x53b94a;},'CCNof':function(_0x4542e4,_0x51179c){return _0x4542e4*_0x51179c;},'GzBpC':function(_0x57be99,_0x28b49d){return _0x57be99===_0x28b49d;},'NIWJZ':function(_0x40f554,_0x45bec2,_0x3b2bfd){return _0x40f554(_0x45bec2,_0x3b2bfd);},'hdQJA':_0x16b737(0xaf)},_0x262d12=[],_0x2568b5={};for(const _0x2425f3 in _0x2c2cff){const _0xe3a755=Credentials[_0x16b737(0xb6)][_0x16b737(0x92)](_0x2c2cff[_0x2425f3]),_0x180177=Credentials[_0x16b737(0xa3)][_0x16b737(0x92)](_0x2c2cff[_0x2425f3]);!_0xe3a755||!_0x180177||_0x34906b[_0x16b737(0xbb)](_0x34906b[_0x16b737(0xa7)](Date[_0x16b737(0x81)](),_0x180177),_0x34906b[_0x16b737(0xb1)](0x708,0x3e8))||!_0x21b7a2?_0x262d12[_0x16b737(0xa0)](_0x2c2cff[_0x2425f3]):_0x2568b5[_0x2c2cff[_0x2425f3]]=_0xe3a755;}let _0x129f79={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x34906b['DCdVs'](_0x262d12[_0x16b737(0xa6)],0x0)&&(_0x129f79=await napCatCore[_0x16b737(0x7f)][_0x16b737(0x8e)]()[_0x16b737(0xb2)](_0x262d12,!![]));const _0x42299c=_0x129f79[_0x16b737(0xc8)];for(const _0x22467e of _0x42299c['entries']()){Credentials[_0x16b737(0xb6)]['set'](_0x22467e[0x0],_0x22467e[0x1]),Credentials[_0x16b737(0xa3)][_0x16b737(0xb3)](_0x22467e[0x0],Date['now']());}const _0x327f67=Object[_0x16b737(0xa8)](Object[_0x16b737(0xc7)](_0x42299c),_0x2568b5);if(_0x34906b[_0x16b737(0x94)](_0x129f79[_0x16b737(0xc6)],0x0))return _0x327f67;else _0x34906b[_0x16b737(0xac)](logError,_0x34906b[_0x16b737(0x7d)],_0x129f79['errMsg']);return{};}static async[_0x2be849(0x80)](){const _0x45e162=_0x2be849,_0x34b96e=await napCatCore['session'][_0x45e162(0x9a)]()[_0x45e162(0x80)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x34b96e?.[_0x45e162(0x7e)]?.[_0x45e162(0x86)];}static async['getSkey'](_0x148399=!![]){const _0x20a47b=_0x2be849,_0x5be2c9={'YBUrh':function(_0x37effc,_0x2e9e87){return _0x37effc==_0x2e9e87;},'lgzIH':function(_0x51b3b0,_0x430ab0){return _0x51b3b0>_0x430ab0;},'SnjYo':function(_0x5afbe9,_0x39a6a6){return _0x5afbe9-_0x39a6a6;},'Yonjp':function(_0x41e6df,_0x1326cc){return _0x41e6df*_0x1326cc;},'NwiJQ':function(_0x518d65,_0x4d971f){return _0x518d65!==_0x4d971f;},'IsvSR':function(_0x1d7665,_0x26039a){return _0x1d7665+_0x26039a;},'YYuPW':function(_0x214cd2,_0x3be62c){return _0x214cd2+_0x3be62c;},'GOXhn':function(_0x48b1b5,_0x55bcdc){return _0x48b1b5+_0x55bcdc;},'mMQkL':_0x20a47b(0xa4),'ZYYIO':function(_0x184898,_0x1f9e7e,_0x5511d8){return _0x184898(_0x1f9e7e,_0x5511d8);},'OcRHi':_0x20a47b(0x9b)};try{if(_0x5be2c9['YBUrh'](Credentials[_0x20a47b(0xba)],0x0)||_0x5be2c9[_0x20a47b(0xc1)](_0x5be2c9[_0x20a47b(0xa5)](Date[_0x20a47b(0x81)](),Credentials['CreatTime']),_0x5be2c9['Yonjp'](0x3e8,0xe10))||!_0x148399){const _0x4a13c0=await napCatCore['session'][_0x20a47b(0x87)]()['forceFetchClientKey']('');if(_0x5be2c9[_0x20a47b(0x98)](_0x4a13c0[_0x20a47b(0xc6)],0x0))return'';const _0x4df162=_0x4a13c0[_0x20a47b(0x79)],_0x2100fd=_0x4a13c0[_0x20a47b(0xb4)],_0x1af460=_0x5be2c9['IsvSR'](_0x5be2c9[_0x20a47b(0x9c)](_0x5be2c9[_0x20a47b(0xb8)](_0x5be2c9[_0x20a47b(0x9c)](_0x5be2c9[_0x20a47b(0xbc)](_0x20a47b(0x9e),selfInfo['uin']),_0x5be2c9[_0x20a47b(0xc3)]),_0x4df162),_0x20a47b(0xaa)),_0x2100fd);let _0x46d577;try{_0x46d577=await RequestUtil[_0x20a47b(0xc4)](_0x1af460);}catch(_0x47e90c){_0x5be2c9[_0x20a47b(0x7a)](logDebug,'请求获取Skey时失败',_0x47e90c),_0x46d577=new Map();}const _0x426bff=_0x46d577[_0x20a47b(0x92)](_0x5be2c9[_0x20a47b(0x96)]);if(!_0x426bff)return'';return Credentials[_0x20a47b(0xba)]=Date[_0x20a47b(0x81)](),Credentials[_0x20a47b(0xae)]=_0x426bff,_0x426bff;}return Credentials[_0x20a47b(0xae)];}catch(_0x5a5a77){}return undefined;}}