const _0x2b3a66=_0x2293;(function(_0x615a64,_0x4e1bdb){const _0x14519e=_0x2293,_0x5295b4=_0x615a64();while(!![]){try{const _0x502982=parseInt(_0x14519e(0x163))/0x1+-parseInt(_0x14519e(0x17a))/0x2+parseInt(_0x14519e(0x16b))/0x3*(-parseInt(_0x14519e(0x17d))/0x4)+-parseInt(_0x14519e(0x172))/0x5+-parseInt(_0x14519e(0x18a))/0x6+parseInt(_0x14519e(0x1a8))/0x7+-parseInt(_0x14519e(0x158))/0x8*(-parseInt(_0x14519e(0x181))/0x9);if(_0x502982===_0x4e1bdb)break;else _0x5295b4['push'](_0x5295b4['shift']());}catch(_0x52f319){_0x5295b4['push'](_0x5295b4['shift']());}}}(_0x5db9,0x9e69a));import{Credentials,selfInfo}from'@/core/data';import{napCatCore}from'@/core';function _0x5db9(){const _0x98b049=['getUserDetailInfo\x20timeout','getPSkey','getRobotService','cEhPh','CallNoListenerEvent','jQqAj','3OfOMbo','domainPskeyMap','set','%2Finfocenter&keyindex=19%27','oTqkR','YOmsr','uid','2674375sFHloz','clientKey','modifySelfProfile','getTicketService','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','session','PskeyTime','KeyIndex','2022250JQGbCl','setHeader','ynvjP','639384NUAvGo','getUinByUid','setStatus','bxGGw','5374413rRKXsJ','tLuHh','response','RmqMu','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','modifyDesktopMiniProfile','kCZlF','keyIndex','getMsgService','3077958lzhdkk','getBuddyRecommendContactArkJson','getProfileService','getRobotUinRange','getUserDetailInfo','errMsg','NodeIKernelUixConvertService/getUin','setLongNick','RQPhF','获取Pskey失败','cnMel','getUserDetailInfoByUin','setBuddyProfileLike','forEach','setSelfOnlineStatus','ClientKey','then','onLoginSuccess','oeYZp','getBuddyService','BktaE','Skey','Hcqpi','iwUTs','NodeIKernelProfileService/getUserDetailInfoByUin','push','getQzoneCookies','getTipOffService','getUserDetailInfoWithBizInfo','JFPlv','7545398GerCxA','now','robotUinRanges','getUserInfo','get','cdARF','tbqvs','getSelfInfo','&clientkey=','HttpsGetCookies','BUoff','getSkey','uin','PskeyData','result','pmrof','CreatTime','8yBzZzR','NodeIKernelUixConvertService/getUid','UkETX','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','NOgTo','uidInfo','onProfileDetailInfoChanged','like','skey','getPskey','zGWdg','1192626bLznkY','otnnw'];_0x5db9=function(){return _0x98b049;};return _0x5db9();}import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';import{NTEventDispatch}from'@/common/utils/EventTask';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x2293(_0x4265b5,_0x2e9127){const _0x5db9fc=_0x5db9();return _0x2293=function(_0x2293af,_0x343960){_0x2293af=_0x2293af-0x14b;let _0x2fb44e=_0x5db9fc[_0x2293af];return _0x2fb44e;},_0x2293(_0x4265b5,_0x2e9127);}profileListener[_0x2b3a66(0x15e)]=_0x7629a4=>{const _0x22a25b=_0x2b3a66;userInfoCache[_0x7629a4[_0x22a25b(0x171)]]=_0x7629a4,userDetailHandlers[_0x22a25b(0x197)](_0x2347af=>_0x2347af(_0x7629a4));},setTimeout(()=>{const _0x4eb3a4=_0x2b3a66;napCatCore[_0x4eb3a4(0x19b)](()=>{napCatCore['addListener'](profileListener);});},0x64);export class NTQQUserApi{static async[_0x2b3a66(0x191)](_0x2ec151){const _0x28c316=_0x2b3a66;return napCatCore[_0x28c316(0x177)][_0x28c316(0x18c)]()[_0x28c316(0x191)](_0x2ec151);}static async[_0x2b3a66(0x198)](_0x15e6c6,_0xbf9692,_0x42490f){const _0x346e99=_0x2b3a66;return napCatCore['session'][_0x346e99(0x189)]()[_0x346e99(0x17f)]({'status':_0x15e6c6,'extStatus':_0xbf9692,'batteryStatus':_0x42490f});}static async[_0x2b3a66(0x18b)](_0x13177c,_0x133580=''){const _0x438cca=_0x2b3a66;return napCatCore[_0x438cca(0x177)][_0x438cca(0x19d)]()[_0x438cca(0x18b)](_0x13177c,_0x133580);}static async[_0x2b3a66(0x15f)](_0x4b793f,_0x2c9c81=0x1){const _0x12a53b=_0x2b3a66;return napCatCore[_0x12a53b(0x177)]['getProfileLikeService']()[_0x12a53b(0x196)]({'friendUid':_0x4b793f,'sourceId':0x47,'doLikeCount':_0x2c9c81,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x35dc19){const _0x4b8054=_0x2b3a66,_0x2bffed=await napCatCore['session'][_0x4b8054(0x18c)]()[_0x4b8054(0x17b)](_0x35dc19);return{'result':_0x2bffed?.['result'],'errMsg':_0x2bffed?.[_0x4b8054(0x18f)]};}static async[_0x2b3a66(0x14e)](){}static async[_0x2b3a66(0x1ab)](_0x36222f){}static async[_0x2b3a66(0x18e)](_0x211811){const _0x563716=_0x2b3a66,_0x2d3faf={'kCZlF':function(_0x19a87f,_0x2156aa){return _0x19a87f(_0x2156aa);},'jQqAj':function(_0x12d8a5,_0x4dc536){return _0x12d8a5(_0x4dc536);},'BUoff':function(_0x5e9db8,_0x1cdcb9){return _0x5e9db8===_0x1cdcb9;},'JFPlv':function(_0x132295){return _0x132295();},'cdARF':function(_0x37c331,_0x387ac9,_0x369c58){return _0x37c331(_0x387ac9,_0x369c58);}},_0x35d643=napCatCore[_0x563716(0x177)]['getProfileService']();return new Promise((_0x43df42,_0x570d10)=>{const _0xcafbda=_0x563716,_0xc2851c={'cnMel':function(_0x8eafb2,_0x374b1c){const _0x24ac3d=_0x2293;return _0x2d3faf[_0x24ac3d(0x151)](_0x8eafb2,_0x374b1c);},'otnnw':function(_0xfb81a4,_0x470939){return _0x2d3faf['kCZlF'](_0xfb81a4,_0x470939);}},_0x24bb89=_0x2d3faf[_0xcafbda(0x1a7)](randomUUID);let _0x4532e7=![],_0x4eeb20=undefined,_0x10c39d=!![];_0x2d3faf[_0xcafbda(0x14c)](setTimeout,()=>{const _0x1b5dac=_0xcafbda;!_0x4532e7&&(_0x4eeb20?_0x2d3faf[_0x1b5dac(0x187)](_0x43df42,_0x4eeb20):_0x2d3faf[_0x1b5dac(0x16a)](_0x570d10,_0x1b5dac(0x165))),userDetailHandlers['delete'](_0x24bb89);},0x1388),userDetailHandlers[_0xcafbda(0x16d)](_0x24bb89,_0x8ebace=>{const _0x110072=_0xcafbda;_0xc2851c[_0x110072(0x194)](_0x8ebace[_0x110072(0x171)],_0x211811)&&(_0x10c39d?(_0x4eeb20=_0x8ebace,_0x10c39d=![]):(_0x4532e7=!![],_0xc2851c[_0x110072(0x164)](_0x43df42,_0x8ebace)));}),_0x35d643[_0xcafbda(0x1a6)](_0x211811,[0x0])[_0xcafbda(0x19a)](_0x2a72bc=>{});});}static async[_0x2b3a66(0x174)](_0x2b2515){const _0x4a7eaa=_0x2b3a66;return napCatCore[_0x4a7eaa(0x177)]['getProfileService']()[_0x4a7eaa(0x186)](_0x2b2515);}static async[_0x2b3a66(0x166)](_0x164841,_0x25b0b0=!![]){const _0x50314c=_0x2b3a66,_0x576a46={'YOmsr':function(_0x34576e,_0x1f5b21){return _0x34576e||_0x1f5b21;},'aRuYt':function(_0x16fdc5,_0x5b5f3e){return _0x16fdc5>_0x5b5f3e;},'zGWdg':function(_0x998f65,_0x3a2c59){return _0x998f65*_0x3a2c59;},'cEhPh':function(_0x5e44f9,_0x41375e){return _0x5e44f9>_0x41375e;},'BktaE':function(_0xead873,_0x235a5c){return _0xead873===_0x235a5c;},'wdjDH':function(_0x3fc792,_0x5b17c8,_0x369ca9){return _0x3fc792(_0x5b17c8,_0x369ca9);}},_0x2e8980=[],_0x2f9989={};for(const _0x2f7baa in _0x164841){const _0x44f596=Credentials['PskeyData'][_0x50314c(0x14b)](_0x164841[_0x2f7baa]),_0x337292=Credentials[_0x50314c(0x178)]['get'](_0x164841[_0x2f7baa]);_0x576a46[_0x50314c(0x170)](!_0x44f596,!_0x337292)||_0x576a46['aRuYt'](Date[_0x50314c(0x1a9)]()-_0x337292,_0x576a46[_0x50314c(0x162)](0x708,0x3e8))||!_0x25b0b0?_0x2e8980[_0x50314c(0x1a3)](_0x164841[_0x2f7baa]):_0x2f9989[_0x164841[_0x2f7baa]]=_0x44f596;}let _0x1d797c={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x576a46[_0x50314c(0x168)](_0x2e8980['length'],0x0)&&(_0x1d797c=await napCatCore[_0x50314c(0x177)][_0x50314c(0x1a5)]()[_0x50314c(0x161)](_0x2e8980,!![]));const _0x21669b=_0x1d797c[_0x50314c(0x16c)];for(const _0x1294e5 of _0x21669b['entries']()){Credentials[_0x50314c(0x154)][_0x50314c(0x16d)](_0x1294e5[0x0],_0x1294e5[0x1]),Credentials[_0x50314c(0x178)][_0x50314c(0x16d)](_0x1294e5[0x0],Date['now']());}const _0x37cfab=Object['assign'](Object['fromEntries'](_0x21669b),_0x2f9989);if(_0x576a46[_0x50314c(0x19e)](_0x1d797c[_0x50314c(0x155)],0x0))return _0x37cfab;else _0x576a46['wdjDH'](logError,_0x50314c(0x193),_0x1d797c[_0x50314c(0x18f)]);return{};}static async['getRobotUinRange'](){const _0x515117=_0x2b3a66,_0xbde5a6=await napCatCore['session'][_0x515117(0x167)]()[_0x515117(0x18d)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0xbde5a6?.[_0x515117(0x183)]?.[_0x515117(0x1aa)];}static async[_0x2b3a66(0x1a4)](){const _0x528d05=_0x2b3a66,_0x43011f={'Hcqpi':function(_0x3e78bc,_0x285b77){return _0x3e78bc+_0x285b77;},'tLuHh':function(_0x107ddf,_0x4f1b18){return _0x107ddf+_0x4f1b18;},'UkETX':function(_0x39431a,_0x30ec5f){return _0x39431a+_0x30ec5f;},'oTqkR':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','BYDtf':_0x528d05(0x15b),'bxGGw':_0x528d05(0x16e),'pmrof':function(_0x52ba3d,_0x5eed53,_0x501b4e){return _0x52ba3d(_0x5eed53,_0x501b4e);},'DqtmX':'请求获取Cookies时失败'},_0x401927=_0x43011f['Hcqpi'](_0x43011f[_0x528d05(0x182)](_0x43011f[_0x528d05(0x1a0)](_0x43011f[_0x528d05(0x15a)](_0x43011f[_0x528d05(0x15a)](_0x43011f[_0x528d05(0x16f)],selfInfo[_0x528d05(0x153)]),_0x528d05(0x14f))+Credentials[_0x528d05(0x199)],_0x43011f['BYDtf']),selfInfo[_0x528d05(0x153)]),_0x43011f[_0x528d05(0x180)]);let _0x31c749={};try{_0x31c749=await RequestUtil['HttpsGetCookies'](_0x401927);}catch(_0xe1d518){_0x43011f[_0x528d05(0x156)](logDebug,_0x43011f['DqtmX'],_0xe1d518),_0x31c749={};}return _0x31c749;}static async[_0x2b3a66(0x152)](_0x1968bc=!![]){const _0x1e9111=_0x2b3a66,_0x228c0f={'iwUTs':function(_0x155a28,_0x3b0aa1){return _0x155a28==_0x3b0aa1;},'oeYZp':function(_0x26ed32,_0x2accbe){return _0x26ed32+_0x2accbe;},'ynvjP':_0x1e9111(0x176),'RmqMu':_0x1e9111(0x14f),'axdSz':function(_0x45726b,_0x18d800,_0x21ea81){return _0x45726b(_0x18d800,_0x21ea81);}};try{if(_0x228c0f[_0x1e9111(0x1a1)](Credentials['CreatTime'],0x0)||Date[_0x1e9111(0x1a9)]()-Credentials[_0x1e9111(0x157)]>0x3e8*0xe10||!_0x1968bc){const _0x40b8af=await napCatCore['session'][_0x1e9111(0x175)]()['forceFetchClientKey']('');if(_0x40b8af['result']!==0x0)return'';const _0x492c8c=_0x40b8af[_0x1e9111(0x173)],_0x4ebe55=_0x40b8af[_0x1e9111(0x188)],_0x5b39c3=_0x228c0f['oeYZp'](_0x228c0f[_0x1e9111(0x19c)](_0x228c0f[_0x1e9111(0x19c)](_0x228c0f[_0x1e9111(0x19c)](_0x228c0f[_0x1e9111(0x17c)],selfInfo[_0x1e9111(0x153)]),_0x228c0f[_0x1e9111(0x184)]),_0x492c8c),_0x1e9111(0x185))+_0x4ebe55;let _0x33c276={};try{_0x33c276=await RequestUtil[_0x1e9111(0x150)](_0x5b39c3);}catch(_0x41885d){_0x228c0f['axdSz'](logDebug,'请求获取Skey时失败',_0x41885d),_0x33c276={};}const _0x5b0ebe=_0x33c276[_0x1e9111(0x160)];if(!_0x5b0ebe)return'';return Credentials[_0x1e9111(0x199)]=_0x492c8c,Credentials[_0x1e9111(0x179)]=_0x4ebe55,Credentials[_0x1e9111(0x157)]=Date[_0x1e9111(0x1a9)](),Credentials[_0x1e9111(0x19f)]=_0x5b0ebe,_0x5b0ebe;}return Credentials['Skey'];}catch(_0x48132a){}return undefined;}static async['getUidByUin'](_0x350b8e){const _0x4d6b11=_0x2b3a66,_0x2ed37b={'tbqvs':_0x4d6b11(0x159)};let _0xe45f15=await NTEventDispatch[_0x4d6b11(0x169)](_0x2ed37b[_0x4d6b11(0x14d)],0x1388,[_0x350b8e]);return _0xe45f15[_0x4d6b11(0x15d)][_0x4d6b11(0x14b)](_0x350b8e);}static async[_0x2b3a66(0x17e)](_0x2f0f3e){const _0x1c97d0=_0x2b3a66,_0x13cc51={'NOgTo':_0x1c97d0(0x190)};if(!_0x2f0f3e)return'';let _0x4a77f2=await NTEventDispatch['CallNoListenerEvent'](_0x13cc51[_0x1c97d0(0x15c)],0x1388,[_0x2f0f3e]);return _0x4a77f2['uinInfo'][_0x1c97d0(0x14b)](_0x2f0f3e);}static async[_0x2b3a66(0x195)](_0x1bf41d){const _0x31051a=_0x2b3a66,_0x40eb59={'RQPhF':_0x31051a(0x1a2)};return NTEventDispatch['CallNoListenerEvent'](_0x40eb59[_0x31051a(0x192)],0x1388,_0x1bf41d);}}