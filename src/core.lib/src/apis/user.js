const _0x1e47c8=_0x48da;(function(_0x5c9fb6,_0x4c5d80){const _0x4c22c7=_0x48da,_0x665a75=_0x5c9fb6();while(!![]){try{const _0x4ebf97=-parseInt(_0x4c22c7(0xbb))/0x1+parseInt(_0x4c22c7(0x8a))/0x2*(parseInt(_0x4c22c7(0x84))/0x3)+parseInt(_0x4c22c7(0xba))/0x4+parseInt(_0x4c22c7(0xb9))/0x5*(-parseInt(_0x4c22c7(0x7a))/0x6)+parseInt(_0x4c22c7(0xbc))/0x7*(parseInt(_0x4c22c7(0x8b))/0x8)+parseInt(_0x4c22c7(0x9e))/0x9+-parseInt(_0x4c22c7(0x75))/0xa*(parseInt(_0x4c22c7(0x8f))/0xb);if(_0x4ebf97===_0x4c5d80)break;else _0x665a75['push'](_0x665a75['shift']());}catch(_0x40c142){_0x665a75['push'](_0x665a75['shift']());}}}(_0x2197,0x46f01));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x2197(){const _0x519e04=['pYfxS','then','setQQAvatar','setSelfOnlineStatus','forEach','getUserDetailInfo\x20timeout','3865194DVSAUE','onProfileDetailInfoChanged','getPskey','PskeyTime','keyIndex','getMsgService','uid','delete','like','length','setHeader','getTicketService','tjCUj','getSkey','fromEntries','JYUgO','vrFNS','getRobotService','CreatTime','getSelfInfo','getUserDetailInfoWithBizInfo','bcDlN','forceFetchClientKey','assign','WPrEJ','push','Skey','5DccXkS','1892164CMPYjY','302726uUeTvF','734825ixwIeL','response','rrwPK','setStatus','79930FqTxDT','onLoginSuccess','getProfileLikeService','errMsg','getProfileService','856134vcvfIQ','PskeyData','set','session','getRobotUinRange','domainPskeyMap','获取Pskey失败','hAkCK','getUserInfo','result','6mATPUG','BUekO','getPSkey','HttpsGetCookies','请求获取Skey时失败','getTipOffService','16242SPnSfD','8iEhlHs','PwLYv','BvKgh','now','396hnmzlv','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','clientKey','AsajM','get','uin','skey','SRvvJ','robotUinRanges'];_0x2197=function(){return _0x519e04;};return _0x2197();}profileListener[_0x1e47c8(0x9f)]=_0x29b628=>{const _0x271e8c=_0x1e47c8;userInfoCache[_0x29b628['uid']]=_0x29b628,userDetailHandlers[_0x271e8c(0x9c)](_0x3854ee=>_0x3854ee(_0x29b628));},setTimeout(()=>{const _0x538322=_0x1e47c8;napCatCore[_0x538322(0x76)](()=>{napCatCore['addListener'](profileListener);});},0x64);function _0x48da(_0x201f23,_0x970381){const _0x219745=_0x2197();return _0x48da=function(_0x48da65,_0x20f656){_0x48da65=_0x48da65-0x75;let _0x562b15=_0x219745[_0x48da65];return _0x562b15;},_0x48da(_0x201f23,_0x970381);}export class NTQQUserApi{static async[_0x1e47c8(0x9b)](_0x310ea0,_0x43d121,_0x27941a){const _0x5ad966=_0x1e47c8;return napCatCore['session'][_0x5ad966(0xa3)]()[_0x5ad966(0xbf)]({'status':_0x310ea0,'extStatus':_0x43d121,'batteryStatus':_0x27941a});}static async[_0x1e47c8(0xa6)](_0x134b3b,_0x112dcd=0x1){const _0x5021d7=_0x1e47c8;return napCatCore['session'][_0x5021d7(0x77)]()['setBuddyProfileLike']({'friendUid':_0x134b3b,'sourceId':0x47,'doLikeCount':_0x112dcd,'doLikeTollCount':0x0});}static async[_0x1e47c8(0x9a)](_0x2564bd){const _0x42ea8a=_0x1e47c8,_0x28b3c2=napCatCore[_0x42ea8a(0x7d)][_0x42ea8a(0x79)]()[_0x42ea8a(0xa8)](_0x2564bd);return{'result':_0x28b3c2?.[_0x42ea8a(0x83)],'errMsg':_0x28b3c2?.[_0x42ea8a(0x78)]};}static async[_0x1e47c8(0xb1)](){}static async[_0x1e47c8(0x82)](_0x315e15){}static async['getUserDetailInfo'](_0x3c9041){const _0x2b5486=_0x1e47c8,_0x2686e2={'BUekO':_0x2b5486(0x9d),'XUswE':function(_0x5efb1b,_0x922eb9){return _0x5efb1b===_0x922eb9;},'gVmDW':function(_0x1173d2){return _0x1173d2();},'MJNBY':function(_0x22e182,_0x4ac434,_0x34515c){return _0x22e182(_0x4ac434,_0x34515c);}},_0x2113d0=napCatCore[_0x2b5486(0x7d)][_0x2b5486(0x79)]();return new Promise((_0x2b7d62,_0x2ef705)=>{const _0x7d404a=_0x2b5486,_0x3711e7={'MHRJS':function(_0xb1af11,_0x55f2d5){return _0x2686e2['XUswE'](_0xb1af11,_0x55f2d5);}},_0x2c71b9=_0x2686e2['gVmDW'](randomUUID);let _0x50e76f=![];_0x2686e2['MJNBY'](setTimeout,()=>{const _0x3784d7=_0x48da;!_0x50e76f&&_0x2ef705(_0x2686e2[_0x3784d7(0x85)]);},0x1388),userDetailHandlers[_0x7d404a(0x7c)](_0x2c71b9,_0x28f6d7=>{const _0x5c8cda=_0x7d404a;_0x3711e7['MHRJS'](_0x28f6d7[_0x5c8cda(0xa4)],_0x3c9041)&&(_0x50e76f=!![],userDetailHandlers[_0x5c8cda(0xa5)](_0x2c71b9),uid2UinMap[_0x3c9041]=_0x28f6d7['uin'],_0x2b7d62(_0x28f6d7));}),_0x2113d0[_0x7d404a(0xb2)](_0x3c9041,[0x0])[_0x7d404a(0x99)](_0x7dc640=>{});});}static async[_0x1e47c8(0x86)](_0x3d5828,_0x223f55=!![]){const _0x9c31b1=_0x1e47c8,_0x1e4831={'rrwPK':function(_0x33eba6,_0x391b50){return _0x33eba6||_0x391b50;},'UmTev':function(_0x5ca5ed,_0x5d3ac1){return _0x5ca5ed>_0x5d3ac1;},'EEzqR':function(_0x54d50a,_0x617811){return _0x54d50a-_0x617811;},'spzxU':function(_0x31dbd2,_0xf2ad43){return _0x31dbd2*_0xf2ad43;},'hAkCK':function(_0x7eb02e,_0x1d8d62){return _0x7eb02e===_0x1d8d62;},'BvKgh':function(_0x59dfe4,_0x56beec,_0x4922c2){return _0x59dfe4(_0x56beec,_0x4922c2);},'SRvvJ':_0x9c31b1(0x80)},_0x21c3b9=[],_0x432ca8={};for(const _0xd2575c in _0x3d5828){const _0x41bb8c=Credentials[_0x9c31b1(0x7b)][_0x9c31b1(0x93)](_0x3d5828[_0xd2575c]),_0x28fe0a=Credentials[_0x9c31b1(0xa1)][_0x9c31b1(0x93)](_0x3d5828[_0xd2575c]);_0x1e4831[_0x9c31b1(0xbe)](!_0x41bb8c,!_0x28fe0a)||_0x1e4831['UmTev'](_0x1e4831['EEzqR'](Date[_0x9c31b1(0x8e)](),_0x28fe0a),_0x1e4831['spzxU'](0x708,0x3e8))||!_0x223f55?_0x21c3b9[_0x9c31b1(0xb7)](_0x3d5828[_0xd2575c]):_0x432ca8[_0x3d5828[_0xd2575c]]=_0x41bb8c;}let _0x49e1b2={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x1e4831['UmTev'](_0x21c3b9[_0x9c31b1(0xa7)],0x0)&&(_0x49e1b2=await napCatCore['session'][_0x9c31b1(0x89)]()[_0x9c31b1(0xa0)](_0x21c3b9,!![]));const _0x211969=_0x49e1b2[_0x9c31b1(0x7f)];for(const _0x3ba407 of _0x211969['entries']()){Credentials[_0x9c31b1(0x7b)][_0x9c31b1(0x7c)](_0x3ba407[0x0],_0x3ba407[0x1]),Credentials[_0x9c31b1(0xa1)]['set'](_0x3ba407[0x0],Date[_0x9c31b1(0x8e)]());}const _0x2a0d15=Object[_0x9c31b1(0xb5)](Object[_0x9c31b1(0xac)](_0x211969),_0x432ca8);if(_0x1e4831[_0x9c31b1(0x81)](_0x49e1b2[_0x9c31b1(0x83)],0x0))return _0x2a0d15;else _0x1e4831[_0x9c31b1(0x8d)](logError,_0x1e4831[_0x9c31b1(0x96)],_0x49e1b2[_0x9c31b1(0x78)]);return{};}static async['getRobotUinRange'](){const _0x3bdb3c=_0x1e47c8,_0x6a6b22=await napCatCore['session'][_0x3bdb3c(0xaf)]()[_0x3bdb3c(0x7e)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x6a6b22?.[_0x3bdb3c(0xbd)]?.[_0x3bdb3c(0x97)];}static async[_0x1e47c8(0xab)](_0x54df6a=!![]){const _0x3b3d90=_0x1e47c8,_0x1c8fad={'mwUvi':function(_0x49f9f5,_0x7143a3){return _0x49f9f5==_0x7143a3;},'PwLYv':function(_0x529933,_0x14c2b0){return _0x529933>_0x14c2b0;},'tjCUj':function(_0x3c4df5,_0x453b91){return _0x3c4df5-_0x453b91;},'WPrEJ':function(_0x18594f,_0x1d0089){return _0x18594f*_0x1d0089;},'bcDlN':function(_0x210ab2,_0x55bcb9){return _0x210ab2+_0x55bcb9;},'pYfxS':function(_0x49e275,_0x88b030){return _0x49e275+_0x88b030;},'qrBvZ':_0x3b3d90(0x90),'JYUgO':'&clientkey=','AsajM':function(_0x2be63a,_0x3c8b96,_0xa70a46){return _0x2be63a(_0x3c8b96,_0xa70a46);},'vrFNS':_0x3b3d90(0x95)};try{if(_0x1c8fad['mwUvi'](Credentials['CreatTime'],0x0)||_0x1c8fad[_0x3b3d90(0x8c)](_0x1c8fad[_0x3b3d90(0xaa)](Date[_0x3b3d90(0x8e)](),Credentials[_0x3b3d90(0xb0)]),_0x1c8fad[_0x3b3d90(0xb6)](0x3e8,0xe10))||!_0x54df6a){const _0x4fbc2a=await napCatCore[_0x3b3d90(0x7d)][_0x3b3d90(0xa9)]()[_0x3b3d90(0xb4)]('');if(_0x4fbc2a['result']!==0x0)return'';const _0x1ddb8b=_0x4fbc2a[_0x3b3d90(0x91)],_0x18c892=_0x4fbc2a[_0x3b3d90(0xa2)],_0x1e5d6d=_0x1c8fad[_0x3b3d90(0xb3)](_0x1c8fad[_0x3b3d90(0xb3)](_0x1c8fad[_0x3b3d90(0x98)](_0x1c8fad['bcDlN'](_0x1c8fad['qrBvZ']+selfInfo[_0x3b3d90(0x94)],_0x1c8fad[_0x3b3d90(0xad)]),_0x1ddb8b),'&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex='),_0x18c892);let _0x2a01d5;try{_0x2a01d5=await RequestUtil[_0x3b3d90(0x87)](_0x1e5d6d);}catch(_0x2bad4f){_0x1c8fad[_0x3b3d90(0x92)](logDebug,_0x3b3d90(0x88),_0x2bad4f),_0x2a01d5=new Map();}const _0x49c3e5=_0x2a01d5[_0x3b3d90(0x93)](_0x1c8fad[_0x3b3d90(0xae)]);if(!_0x49c3e5)return'';return Credentials[_0x3b3d90(0xb0)]=Date[_0x3b3d90(0x8e)](),Credentials['Skey']=_0x49c3e5,_0x49c3e5;}return Credentials[_0x3b3d90(0xb8)];}catch(_0x55a889){}return undefined;}}