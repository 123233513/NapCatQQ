const _0x1e558e=_0x5382;(function(_0x5b545a,_0x2d1fd7){const _0x2d9b38=_0x5382,_0x2f751a=_0x5b545a();while(!![]){try{const _0x199c8e=parseInt(_0x2d9b38(0x9a))/0x1+parseInt(_0x2d9b38(0xcb))/0x2*(-parseInt(_0x2d9b38(0xc3))/0x3)+-parseInt(_0x2d9b38(0xd7))/0x4+-parseInt(_0x2d9b38(0xca))/0x5+-parseInt(_0x2d9b38(0x9f))/0x6*(parseInt(_0x2d9b38(0xbc))/0x7)+-parseInt(_0x2d9b38(0xad))/0x8*(parseInt(_0x2d9b38(0xa5))/0x9)+-parseInt(_0x2d9b38(0xda))/0xa*(-parseInt(_0x2d9b38(0xde))/0xb);if(_0x199c8e===_0x2d1fd7)break;else _0x2f751a['push'](_0x2f751a['shift']());}catch(_0x5928d3){_0x2f751a['push'](_0x2f751a['shift']());}}}(_0x2c24,0x8bd3c));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x2c24(){const _0x9cf25=['get','146290vosGpV','domainPskeyMap','uin','keyIndex','1133CPuKkb','URZjs','getProfileLikeService','iBYFj','VeqnK','result','errMsg','请求获取Cookies时失败','zutvE','LvjoV','setHeader','getUserInfo','uid','83847kOOFrm','ClientKey','&clientkey=','length','yceaB','3648IhAKig','getRobotService','getRobotUinRange','session','entries','EvfQG','1217925gUvjLb','getUserDetailInfoWithBizInfo','getMsgService','fromEntries','RyhoV','PskeyData','skey','getQzoneCookies','24OPtmAI','assign','lFIUp','HtNcy','neKEf','Xogkm','akfbh','CreatTime','onLoginSuccess','forEach','PskeyTime','mmDPK','now','getSelfInfo','KeyIndex','154KnLdgw','getSkey','getTipOffService','getPSkey','wbFDM','setBuddyProfileLike','getUserDetailInfo','6BLzznS','pFZkK','gnIqR','RONPt','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','setQQAvatar','431655HzGhHG','179356liYIrJ','set','hrHxt','like','forceFetchClientKey','rkPkS','push','onProfileDetailInfoChanged','then','%2Finfocenter&keyindex=19%27','getProfileService','HttpsGetCookies','1331456VjHFXB','fMFPS'];_0x2c24=function(){return _0x9cf25;};return _0x2c24();}import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x5382(_0x485b13,_0x43369b){const _0x2c2475=_0x2c24();return _0x5382=function(_0x53824b,_0x467e1c){_0x53824b=_0x53824b-0x98;let _0x4d5a16=_0x2c2475[_0x53824b];return _0x4d5a16;},_0x5382(_0x485b13,_0x43369b);}profileListener[_0x1e558e(0xd2)]=_0x1e2f43=>{const _0x398ecb=_0x1e558e;userInfoCache[_0x1e2f43[_0x398ecb(0x99)]]=_0x1e2f43,userDetailHandlers[_0x398ecb(0xb6)](_0x1705c2=>_0x1705c2(_0x1e2f43));},setTimeout(()=>{const _0x5b958c=_0x1e558e;napCatCore[_0x5b958c(0xb5)](()=>{napCatCore['addListener'](profileListener);});},0x64);export class NTQQUserApi{static async['setSelfOnlineStatus'](_0xcdd3e7,_0x521dbb,_0x373176){const _0x45c486=_0x1e558e;return napCatCore[_0x45c486(0xa2)][_0x45c486(0xa7)]()['setStatus']({'status':_0xcdd3e7,'extStatus':_0x521dbb,'batteryStatus':_0x373176});}static async[_0x1e558e(0xce)](_0x18adcb,_0x5aa341=0x1){const _0x46101c=_0x1e558e;return napCatCore[_0x46101c(0xa2)][_0x46101c(0xe0)]()[_0x46101c(0xc1)]({'friendUid':_0x18adcb,'sourceId':0x47,'doLikeCount':_0x5aa341,'doLikeTollCount':0x0});}static async[_0x1e558e(0xc9)](_0x246431){const _0x4b2190=_0x1e558e,_0x29ff8d=napCatCore[_0x4b2190(0xa2)][_0x4b2190(0xd5)]()[_0x4b2190(0xe8)](_0x246431);return{'result':_0x29ff8d?.[_0x4b2190(0xe3)],'errMsg':_0x29ff8d?.[_0x4b2190(0xe4)]};}static async[_0x1e558e(0xba)](){}static async[_0x1e558e(0x98)](_0x511c09){}static async[_0x1e558e(0xc2)](_0x29dfc9){const _0x3279fe=_0x1e558e,_0x5a4235={'iBYFj':function(_0x35e293,_0x40685d){return _0x35e293(_0x40685d);},'RyhoV':function(_0x111fa8,_0x5c9dbf){return _0x111fa8(_0x5c9dbf);},'clKfm':'getUserDetailInfo\x20timeout','XFmkf':function(_0x563658,_0x200b89){return _0x563658===_0x200b89;},'LvjoV':function(_0x2ae78e){return _0x2ae78e();}},_0x424b11=napCatCore['session'][_0x3279fe(0xd5)]();return new Promise((_0x306108,_0x3ade23)=>{const _0x2dbbae=_0x3279fe,_0x379c1a={'gnIqR':function(_0x117fbc,_0x329f8c){return _0x5a4235['XFmkf'](_0x117fbc,_0x329f8c);},'zutvE':function(_0x4b5a83,_0xa85120){const _0x4e07ba=_0x5382;return _0x5a4235[_0x4e07ba(0xa9)](_0x4b5a83,_0xa85120);}},_0x519ed5=_0x5a4235[_0x2dbbae(0xe7)](randomUUID);let _0x39ff2f=![],_0x18c010=undefined,_0x1dce50=!![];setTimeout(()=>{const _0x2cc8ad=_0x2dbbae;!_0x39ff2f&&(_0x18c010?_0x5a4235[_0x2cc8ad(0xe1)](_0x306108,_0x18c010):_0x5a4235['RyhoV'](_0x3ade23,_0x5a4235['clKfm'])),userDetailHandlers['delete'](_0x519ed5);},0x1388),userDetailHandlers[_0x2dbbae(0xcc)](_0x519ed5,_0x18f1ee=>{const _0x39c1b7=_0x2dbbae;_0x379c1a[_0x39c1b7(0xc5)](_0x18f1ee[_0x39c1b7(0x99)],_0x29dfc9)&&(uid2UinMap[_0x29dfc9]=_0x18f1ee['uin'],_0x1dce50?(_0x18c010=_0x18f1ee,_0x1dce50=![]):(_0x39ff2f=!![],_0x379c1a[_0x39c1b7(0xe6)](_0x306108,_0x18f1ee)));}),_0x424b11[_0x2dbbae(0xa6)](_0x29dfc9,[0x0])[_0x2dbbae(0xd3)](_0x558ed4=>{});});}static async[_0x1e558e(0xbf)](_0xc76c4e,_0x2c593a=!![]){const _0xb3d56f=_0x1e558e,_0x4ad39e={'lFIUp':function(_0xbe92f1,_0x41fe38){return _0xbe92f1||_0x41fe38;},'hrHxt':function(_0x21c1f2,_0x5309b3){return _0x21c1f2>_0x5309b3;},'EvfQG':function(_0x3160e7,_0x180a21){return _0x3160e7-_0x180a21;},'rkPkS':function(_0x27c216,_0xbe8faa){return _0x27c216*_0xbe8faa;},'fMFPS':function(_0x1cafc0,_0x2a50b5){return _0x1cafc0>_0x2a50b5;},'nQZZk':function(_0x4dcd40,_0x1f6326,_0x4bbf64){return _0x4dcd40(_0x1f6326,_0x4bbf64);},'pFZkK':'获取Pskey失败'},_0x59f21e=[],_0x355ee2={};for(const _0x220896 in _0xc76c4e){const _0x14cb98=Credentials['PskeyData']['get'](_0xc76c4e[_0x220896]),_0xa457f=Credentials[_0xb3d56f(0xb7)][_0xb3d56f(0xd9)](_0xc76c4e[_0x220896]);_0x4ad39e[_0xb3d56f(0xaf)](!_0x14cb98,!_0xa457f)||_0x4ad39e[_0xb3d56f(0xcd)](_0x4ad39e[_0xb3d56f(0xa4)](Date[_0xb3d56f(0xb9)](),_0xa457f),_0x4ad39e[_0xb3d56f(0xd0)](0x708,0x3e8))||!_0x2c593a?_0x59f21e[_0xb3d56f(0xd1)](_0xc76c4e[_0x220896]):_0x355ee2[_0xc76c4e[_0x220896]]=_0x14cb98;}let _0x9801b4={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x4ad39e[_0xb3d56f(0xd8)](_0x59f21e[_0xb3d56f(0x9d)],0x0)&&(_0x9801b4=await napCatCore[_0xb3d56f(0xa2)][_0xb3d56f(0xbe)]()['getPskey'](_0x59f21e,!![]));const _0x23efd1=_0x9801b4[_0xb3d56f(0xdb)];for(const _0xb6a9fe of _0x23efd1[_0xb3d56f(0xa3)]()){Credentials[_0xb3d56f(0xaa)]['set'](_0xb6a9fe[0x0],_0xb6a9fe[0x1]),Credentials['PskeyTime'][_0xb3d56f(0xcc)](_0xb6a9fe[0x0],Date[_0xb3d56f(0xb9)]());}const _0x4868d5=Object[_0xb3d56f(0xae)](Object[_0xb3d56f(0xa8)](_0x23efd1),_0x355ee2);if(_0x9801b4[_0xb3d56f(0xe3)]===0x0)return _0x4868d5;else _0x4ad39e['nQZZk'](logError,_0x4ad39e[_0xb3d56f(0xc4)],_0x9801b4[_0xb3d56f(0xe4)]);return{};}static async[_0x1e558e(0xa1)](){const _0x3422bf=_0x1e558e,_0x404459=await napCatCore[_0x3422bf(0xa2)][_0x3422bf(0xa0)]()['getRobotUinRange']({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x404459?.['response']?.['robotUinRanges'];}static async[_0x1e558e(0xac)](){const _0x43ee22=_0x1e558e,_0x11a1cc={'yceaB':function(_0x5e559d,_0x170334){return _0x5e559d+_0x170334;},'ixKgS':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','mmDPK':_0x43ee22(0x9c),'HtNcy':_0x43ee22(0xd4),'neKEf':function(_0x3f8b3f,_0x3aba1f,_0x448d45){return _0x3f8b3f(_0x3aba1f,_0x448d45);},'wbFDM':_0x43ee22(0xe5)},_0xdc5edd=_0x11a1cc['yceaB'](_0x11a1cc[_0x43ee22(0x9e)](_0x11a1cc['yceaB'](_0x11a1cc['yceaB'](_0x11a1cc[_0x43ee22(0x9e)](_0x11a1cc['ixKgS'],selfInfo[_0x43ee22(0xdc)]),_0x11a1cc[_0x43ee22(0xb8)]),Credentials[_0x43ee22(0x9b)])+_0x43ee22(0xc7),selfInfo[_0x43ee22(0xdc)]),_0x11a1cc[_0x43ee22(0xb0)]);let _0x743b04={};try{_0x743b04=await RequestUtil[_0x43ee22(0xd6)](_0xdc5edd);}catch(_0x6f4db7){_0x11a1cc[_0x43ee22(0xb1)](logDebug,_0x11a1cc[_0x43ee22(0xc0)],_0x6f4db7),_0x743b04={};}return _0x743b04;}static async[_0x1e558e(0xbd)](_0x19c6a1=!![]){const _0x3b0282=_0x1e558e,_0x5085bf={'Pzcum':function(_0x6d0758,_0x2d84f4){return _0x6d0758==_0x2d84f4;},'ReyeA':function(_0x23f093,_0x154da0){return _0x23f093-_0x154da0;},'Xogkm':function(_0x13f670,_0x497268){return _0x13f670!==_0x497268;},'URZjs':function(_0xc18b31,_0xab2a6d){return _0xc18b31+_0xab2a6d;},'KYwog':_0x3b0282(0xc8),'akfbh':'&clientkey=','VeqnK':'&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','RONPt':function(_0x502728,_0x239fbd,_0x15e6cb){return _0x502728(_0x239fbd,_0x15e6cb);},'bbcXm':'请求获取Skey时失败'};try{if(_0x5085bf['Pzcum'](Credentials[_0x3b0282(0xb4)],0x0)||_0x5085bf['ReyeA'](Date[_0x3b0282(0xb9)](),Credentials[_0x3b0282(0xb4)])>0x3e8*0xe10||!_0x19c6a1){const _0xe6e656=await napCatCore[_0x3b0282(0xa2)]['getTicketService']()[_0x3b0282(0xcf)]('');if(_0x5085bf[_0x3b0282(0xb2)](_0xe6e656[_0x3b0282(0xe3)],0x0))return'';const _0x3c1ab8=_0xe6e656['clientKey'],_0x4e0cfc=_0xe6e656[_0x3b0282(0xdd)],_0x48c160=_0x5085bf[_0x3b0282(0xdf)](_0x5085bf[_0x3b0282(0xdf)](_0x5085bf[_0x3b0282(0xdf)](_0x5085bf['URZjs'](_0x5085bf['KYwog'],selfInfo['uin']),_0x5085bf[_0x3b0282(0xb3)]),_0x3c1ab8),_0x5085bf[_0x3b0282(0xe2)])+_0x4e0cfc;let _0x58238d={};try{_0x58238d=await RequestUtil[_0x3b0282(0xd6)](_0x48c160);}catch(_0x8dae6e){_0x5085bf[_0x3b0282(0xc6)](logDebug,_0x5085bf['bbcXm'],_0x8dae6e),_0x58238d={};}const _0x2a0efb=_0x58238d[_0x3b0282(0xab)];if(!_0x2a0efb)return'';return Credentials[_0x3b0282(0x9b)]=_0x3c1ab8,Credentials[_0x3b0282(0xbb)]=_0x4e0cfc,Credentials['CreatTime']=Date['now'](),Credentials['Skey']=_0x2a0efb,_0x2a0efb;}return Credentials['Skey'];}catch(_0x421672){}return undefined;}}