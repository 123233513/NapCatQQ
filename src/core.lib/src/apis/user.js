const _0x112e67=_0x5ba3;(function(_0x5dcd21,_0x5854bc){const _0x2a24b3=_0x5ba3,_0x40f45a=_0x5dcd21();while(!![]){try{const _0x350250=-parseInt(_0x2a24b3(0xed))/0x1+parseInt(_0x2a24b3(0xc1))/0x2+-parseInt(_0x2a24b3(0xd8))/0x3+parseInt(_0x2a24b3(0xca))/0x4+parseInt(_0x2a24b3(0xcd))/0x5*(parseInt(_0x2a24b3(0xbb))/0x6)+parseInt(_0x2a24b3(0xd2))/0x7*(parseInt(_0x2a24b3(0xde))/0x8)+parseInt(_0x2a24b3(0xe3))/0x9*(-parseInt(_0x2a24b3(0xdc))/0xa);if(_0x350250===_0x5854bc)break;else _0x40f45a['push'](_0x40f45a['shift']());}catch(_0xb63fff){_0x40f45a['push'](_0x40f45a['shift']());}}}(_0x37cc,0xbeab5));import{Credentials,selfInfo}from'@/core/data';function _0x5ba3(_0x5e958d,_0x581699){const _0x37cc55=_0x37cc();return _0x5ba3=function(_0x5ba318,_0x615f19){_0x5ba318=_0x5ba318-0xb1;let _0x3d4b90=_0x37cc55[_0x5ba318];return _0x3d4b90;},_0x5ba3(_0x5e958d,_0x581699);}import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{HttpGetCookies}from'../../../common/utils/request';import{logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x37cc(){const _0x5ce024=['getSkey','uid','onLoginSuccess','HbHKd','getRobotService','273504YIAYhD','then','getUserDetailInfo\x20timeout','getTicketService','getRobotUinRange','ZADxz','now','getProfileService','pZNYw','3273700knUQFO','length','getTipOffService','205NaTCRl','get','session','entries','VwZeN','10142741PYaQBo','getPSkey','getUserInfo','GqoNI','TUgTT','&clientkey=','2919894urBzvD','pAAjM','PskeyData','addListener','60eWAghQ','uin','8CzowJM','setStatus','setBuddyProfileLike','gevgS','like','1345698npuzxC','PskeyTime','CreatTime','获取Pskey失败','QUMsJ','onProfileDetailInfoChanged','qSioQ','GHqzB','getUserDetailInfoWithBizInfo','getProfileLikeService','462931gnSJop','qdTvX','getMsgService','assign','errMsg','forEach','fromEntries','setSelfOnlineStatus','result','push','getSelfInfo','PeXTr','set','robotUinRanges','setHeader','103932wOkfzD'];_0x37cc=function(){return _0x5ce024;};return _0x37cc();}profileListener[_0x112e67(0xe8)]=_0x2f0889=>{const _0xe327ca=_0x112e67;userInfoCache[_0x2f0889[_0xe327ca(0xbd)]]=_0x2f0889,userDetailHandlers[_0xe327ca(0xb1)](_0x569cf7=>_0x569cf7(_0x2f0889));},setTimeout(()=>{const _0x5ec84b=_0x112e67;napCatCore[_0x5ec84b(0xbe)](()=>{const _0x4fee66=_0x5ec84b;napCatCore[_0x4fee66(0xdb)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x112e67(0xb3)](_0x316a7d,_0x19ae87,_0x2b3fda){const _0x10bdac=_0x112e67;return napCatCore[_0x10bdac(0xcf)][_0x10bdac(0xef)]()[_0x10bdac(0xdf)]({'status':_0x316a7d,'extStatus':_0x19ae87,'batteryStatus':_0x2b3fda});}static async[_0x112e67(0xe2)](_0x307b4a,_0x43f696=0x1){const _0x5488ef=_0x112e67;return napCatCore['session'][_0x5488ef(0xec)]()[_0x5488ef(0xe0)]({'friendUid':_0x307b4a,'sourceId':0x47,'doLikeCount':_0x43f696,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x349c93){const _0x320f14=_0x112e67,_0xba052=napCatCore[_0x320f14(0xcf)]['getProfileService']()[_0x320f14(0xba)](_0x349c93);return{'result':_0xba052?.[_0x320f14(0xb4)],'errMsg':_0xba052?.[_0x320f14(0xf1)]};}static async[_0x112e67(0xb6)](){}static async[_0x112e67(0xd4)](_0x4e25ec){}static async['getUserDetailInfo'](_0x57c820){const _0x3aae1e=_0x112e67,_0x37ed39={'HbHKd':function(_0x372b02,_0xa8706b){return _0x372b02(_0xa8706b);},'pAAjM':_0x3aae1e(0xc3),'PeXTr':function(_0x3dfaed){return _0x3dfaed();},'qdTvX':function(_0x2f1f4e,_0x223257,_0x89ffe1){return _0x2f1f4e(_0x223257,_0x89ffe1);}},_0x3b4d37=napCatCore['session'][_0x3aae1e(0xc8)]();return new Promise((_0x40941b,_0x2ada31)=>{const _0x28fb84=_0x3aae1e,_0x4a8f23={'ZADxz':function(_0x881159,_0x52431){return _0x881159===_0x52431;},'NINXi':function(_0xd3ca69,_0x5ef4db){return _0xd3ca69(_0x5ef4db);}},_0x30ddb8=_0x37ed39[_0x28fb84(0xb7)](randomUUID);let _0x1e692f=![];_0x37ed39[_0x28fb84(0xee)](setTimeout,()=>{const _0x23d91a=_0x28fb84;!_0x1e692f&&_0x37ed39[_0x23d91a(0xbf)](_0x2ada31,_0x37ed39[_0x23d91a(0xd9)]);},0x1388),userDetailHandlers[_0x28fb84(0xb8)](_0x30ddb8,_0x1f757e=>{const _0x3276db=_0x28fb84;_0x4a8f23[_0x3276db(0xc6)](_0x1f757e[_0x3276db(0xbd)],_0x57c820)&&(_0x1e692f=!![],userDetailHandlers['delete'](_0x30ddb8),_0x4a8f23['NINXi'](_0x40941b,_0x1f757e));}),_0x3b4d37[_0x28fb84(0xeb)](_0x57c820,[0x0])[_0x28fb84(0xc2)](_0x4bffd8=>{});});}static async[_0x112e67(0xd3)](_0x5dc127,_0x3b4ae=!![]){const _0x28d7fc=_0x112e67,_0x37bb89={'QUMsJ':function(_0x115428,_0x146b65){return _0x115428||_0x146b65;},'qSioQ':function(_0x4809a9,_0x7a617a){return _0x4809a9*_0x7a617a;},'GqoNI':function(_0x596af4,_0x28c4e0){return _0x596af4>_0x28c4e0;},'VwZeN':function(_0x475d49,_0x36a1b8){return _0x475d49===_0x36a1b8;},'yaYCp':_0x28d7fc(0xe6)};let _0x446baf=[],_0x482c28={};for(let _0x200253 in _0x5dc127){let _0x56484e=Credentials['PskeyData'][_0x28d7fc(0xce)](_0x5dc127[_0x200253]),_0x4d84eb=Credentials[_0x28d7fc(0xe4)][_0x28d7fc(0xce)](_0x5dc127[_0x200253]);_0x37bb89[_0x28d7fc(0xe7)](!_0x56484e,!_0x4d84eb)||Date[_0x28d7fc(0xc7)]()-_0x4d84eb>_0x37bb89[_0x28d7fc(0xe9)](0x708,0x3e8)||!_0x3b4ae?_0x446baf[_0x28d7fc(0xb5)](_0x5dc127[_0x200253]):_0x482c28[_0x5dc127[_0x200253]]=_0x56484e;}let _0x3eed2e={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x37bb89[_0x28d7fc(0xd5)](_0x446baf[_0x28d7fc(0xcb)],0x0)&&(_0x3eed2e=await napCatCore[_0x28d7fc(0xcf)][_0x28d7fc(0xcc)]()['getPskey'](_0x446baf,!![]));let _0x5ee55a=_0x3eed2e['domainPskeyMap'];for(let _0x7d00b8 of _0x5ee55a[_0x28d7fc(0xd0)]()){Credentials[_0x28d7fc(0xda)][_0x28d7fc(0xb8)](_0x7d00b8[0x0],_0x7d00b8[0x1]),Credentials[_0x28d7fc(0xe4)]['set'](_0x7d00b8[0x0],Date[_0x28d7fc(0xc7)]());}let _0x4b5a17=Object[_0x28d7fc(0xf0)](Object[_0x28d7fc(0xb2)](_0x5ee55a),_0x482c28);if(_0x37bb89[_0x28d7fc(0xd1)](_0x3eed2e[_0x28d7fc(0xb4)],0x0))return _0x4b5a17;else logError(_0x37bb89['yaYCp'],_0x3eed2e[_0x28d7fc(0xf1)]);return{};}static async[_0x112e67(0xc5)](){const _0x22312a=_0x112e67,_0x593a25=await napCatCore[_0x22312a(0xcf)][_0x22312a(0xc0)]()[_0x22312a(0xc5)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x593a25?.['response']?.[_0x22312a(0xb9)];}static async[_0x112e67(0xbc)](_0x396d97=!![]){const _0x58e4fe=_0x112e67,_0x1b608f={'HfDpk':function(_0x285979,_0x350a84){return _0x285979>_0x350a84;},'gevgS':function(_0x554df1,_0x76741c){return _0x554df1*_0x76741c;},'pZNYw':function(_0x1ba8e7,_0x1d468c){return _0x1ba8e7!==_0x1d468c;},'GHqzB':function(_0xbc6079,_0x19b8fe){return _0xbc6079+_0x19b8fe;},'hvEII':function(_0x4f4bf4,_0x51a62b){return _0x4f4bf4+_0x51a62b;},'OqkGG':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','TUgTT':function(_0x352dc2,_0x2fea9e){return _0x352dc2(_0x2fea9e);},'UBeRS':'skey'};try{if(Credentials['CreatTime']==0x0||_0x1b608f['HfDpk'](Date[_0x58e4fe(0xc7)]()-Credentials[_0x58e4fe(0xe5)],_0x1b608f[_0x58e4fe(0xe1)](0x3e8,0xe10))||!_0x396d97){const _0x48bb71=await napCatCore[_0x58e4fe(0xcf)][_0x58e4fe(0xc4)]()['forceFetchClientKey']('');if(_0x1b608f[_0x58e4fe(0xc9)](_0x48bb71[_0x58e4fe(0xb4)],0x0))return'';const _0x36f7d2=_0x48bb71['clientKey'],_0x5d5b34=_0x48bb71['keyIndex'],_0x5b01e6=_0x1b608f[_0x58e4fe(0xea)](_0x1b608f['hvEII'](_0x1b608f[_0x58e4fe(0xea)](_0x1b608f['GHqzB'](_0x1b608f['OqkGG'],selfInfo[_0x58e4fe(0xdd)])+_0x58e4fe(0xd7),_0x36f7d2),'&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex='),_0x5d5b34),_0x19eb4a=await _0x1b608f[_0x58e4fe(0xd6)](HttpGetCookies,_0x5b01e6),_0x2eb749=_0x19eb4a[_0x58e4fe(0xce)](_0x1b608f['UBeRS']);if(!_0x2eb749)return'';return Credentials[_0x58e4fe(0xe5)]=Date[_0x58e4fe(0xc7)](),Credentials['Skey']=_0x2eb749,_0x2eb749;}return Credentials['Skey'];}catch(_0x53fc09){}return undefined;}}