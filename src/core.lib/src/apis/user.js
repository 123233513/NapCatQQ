const _0x146597=_0x3e34;(function(_0x36d75c,_0x40f6e5){const _0x311e65=_0x3e34,_0x424b87=_0x36d75c();while(!![]){try{const _0x437d09=parseInt(_0x311e65(0x180))/0x1+parseInt(_0x311e65(0x12b))/0x2*(-parseInt(_0x311e65(0x172))/0x3)+parseInt(_0x311e65(0x144))/0x4*(-parseInt(_0x311e65(0x16f))/0x5)+parseInt(_0x311e65(0x12e))/0x6*(parseInt(_0x311e65(0x14b))/0x7)+parseInt(_0x311e65(0x141))/0x8*(-parseInt(_0x311e65(0x175))/0x9)+-parseInt(_0x311e65(0x17c))/0xa+parseInt(_0x311e65(0x13e))/0xb*(parseInt(_0x311e65(0x163))/0xc);if(_0x437d09===_0x40f6e5)break;else _0x424b87['push'](_0x424b87['shift']());}catch(_0x331672){_0x424b87['push'](_0x424b87['shift']());}}}(_0x7ba7,0xb5e60));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x7ba7(){const _0x30baea=['LUjuf','PmCHN','getTicketService','JypsK','like','2097515byjOEU','Orebs','DWeVX','13002vAlCuT','now','then','9YYnpcI','bFSHv','result','rzPDb','getUserDetailInfo\x20timeout','Skey','set','5916130UWWenS','session','KeyIndex','KIBrW','186615SgOtog','length','onProfileDetailInfoChanged','skey','286zyKgAI','jVtQv','HzoVS','498SzDXYa','getProfileLikeService','getRobotUinRange','HttpsGetCookies','clientKey','getTipOffService','PskeyTime','getRobotService','NnglM','getUserDetailInfo','kozdT','setQQAvatar','response','uin','WcHWg','%2Finfocenter&keyindex=19%27','4995331fqSISB','xuukQ','getQzoneCookies','11770408HPITMA','errMsg','delete','12FSzXAT','HqySF','robotUinRanges','bsPaQ','ClientKey','getSelfInfo','sdSEa','111391HQlqFT','push','getSkey','YiRMK','getProfileService','CgAKK','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','获取Pskey失败','setBuddyProfileLike','assign','mkGtC','getUserInfo','rJhYa','URbuP','entries','LzjRH','get','OGdAk','getPSkey','Ppzzf','fromEntries','onLoginSuccess','CreatTime','PskeyData','84dhbzHn','addListener','&clientkey=','domainPskeyMap','keyIndex','getUserDetailInfoWithBizInfo','iAKyk'];_0x7ba7=function(){return _0x30baea;};return _0x7ba7();}function _0x3e34(_0x28c92a,_0x1ed13d){const _0x7ba75=_0x7ba7();return _0x3e34=function(_0x3e34bf,_0x3a76f3){_0x3e34bf=_0x3e34bf-0x12b;let _0x1cfe69=_0x7ba75[_0x3e34bf];return _0x1cfe69;},_0x3e34(_0x28c92a,_0x1ed13d);}profileListener[_0x146597(0x182)]=_0x6321c7=>{userInfoCache[_0x6321c7['uid']]=_0x6321c7,userDetailHandlers['forEach'](_0x16ac3f=>_0x16ac3f(_0x6321c7));},setTimeout(()=>{const _0x4df917=_0x146597;napCatCore[_0x4df917(0x160)](()=>{const _0x5dc786=_0x4df917;napCatCore[_0x5dc786(0x164)](profileListener);});},0x64);export class NTQQUserApi{static async['setSelfOnlineStatus'](_0x441e30,_0x2451c6,_0x586e82){const _0x49cbc4=_0x146597;return napCatCore[_0x49cbc4(0x17d)]['getMsgService']()['setStatus']({'status':_0x441e30,'extStatus':_0x2451c6,'batteryStatus':_0x586e82});}static async[_0x146597(0x16e)](_0x340262,_0x1ee10d=0x1){const _0x55f0f0=_0x146597;return napCatCore['session'][_0x55f0f0(0x12f)]()[_0x55f0f0(0x153)]({'friendUid':_0x340262,'sourceId':0x47,'doLikeCount':_0x1ee10d,'doLikeTollCount':0x0});}static async[_0x146597(0x139)](_0x385c06){const _0x54d0b2=_0x146597,_0xe01372=napCatCore[_0x54d0b2(0x17d)]['getProfileService']()['setHeader'](_0x385c06);return{'result':_0xe01372?.[_0x54d0b2(0x177)],'errMsg':_0xe01372?.[_0x54d0b2(0x142)]};}static async[_0x146597(0x149)](){}static async[_0x146597(0x156)](_0x14b6c7){}static async[_0x146597(0x137)](_0x423898){const _0x3e8f91=_0x146597,_0x3c2711={'bsPaQ':function(_0x44c879,_0x1eef32){return _0x44c879(_0x1eef32);},'JypsK':function(_0x4c7323,_0x545f16){return _0x4c7323(_0x545f16);},'HzoVS':_0x3e8f91(0x179),'WcHWg':function(_0x31625a,_0x4471e8){return _0x31625a===_0x4471e8;},'MJTxc':function(_0x3aa6a0){return _0x3aa6a0();}},_0x1ae1b4=napCatCore[_0x3e8f91(0x17d)][_0x3e8f91(0x14f)]();return new Promise((_0x13a633,_0x17df58)=>{const _0x242109=_0x3e8f91,_0x50fc52=_0x3c2711['MJTxc'](randomUUID);let _0x51a78c=![],_0x4c34e1=undefined,_0x3e1436=!![];setTimeout(()=>{const _0x4f6236=_0x3e34;!_0x51a78c&&(_0x4c34e1?_0x3c2711[_0x4f6236(0x147)](_0x13a633,_0x4c34e1):_0x3c2711[_0x4f6236(0x16d)](_0x17df58,_0x3c2711[_0x4f6236(0x12d)])),userDetailHandlers[_0x4f6236(0x143)](_0x50fc52);},0x1388),userDetailHandlers['set'](_0x50fc52,_0x16981c=>{const _0x7799a2=_0x3e34;_0x3c2711[_0x7799a2(0x13c)](_0x16981c['uid'],_0x423898)&&(uid2UinMap[_0x423898]=_0x16981c[_0x7799a2(0x13b)],_0x3e1436?(_0x4c34e1=_0x16981c,_0x3e1436=![]):(_0x51a78c=!![],_0x3c2711[_0x7799a2(0x16d)](_0x13a633,_0x16981c)));}),_0x1ae1b4[_0x242109(0x168)](_0x423898,[0x0])[_0x242109(0x174)](_0xd55d61=>{});});}static async[_0x146597(0x15d)](_0x2a4d93,_0x103767=!![]){const _0x81ebc7=_0x146597,_0x16d6da={'YiRMK':function(_0xf6b757,_0x529a58){return _0xf6b757||_0x529a58;},'CgAKK':function(_0x9ee0d3,_0x2f257c){return _0x9ee0d3>_0x2f257c;},'zleCs':function(_0x110fcc,_0x49ffc6){return _0x110fcc-_0x49ffc6;},'bFSHv':function(_0x914dfa,_0x355801){return _0x914dfa*_0x355801;},'HqySF':function(_0x5d8d82,_0x2b5eb3){return _0x5d8d82===_0x2b5eb3;},'rJhYa':function(_0x207fc2,_0x519c38,_0x454c38){return _0x207fc2(_0x519c38,_0x454c38);},'OGdAk':_0x81ebc7(0x152)},_0xb42490=[],_0x3e8634={};for(const _0x1455b4 in _0x2a4d93){const _0x12194f=Credentials[_0x81ebc7(0x162)]['get'](_0x2a4d93[_0x1455b4]),_0x445214=Credentials[_0x81ebc7(0x134)][_0x81ebc7(0x15b)](_0x2a4d93[_0x1455b4]);_0x16d6da[_0x81ebc7(0x14e)](!_0x12194f,!_0x445214)||_0x16d6da[_0x81ebc7(0x150)](_0x16d6da['zleCs'](Date[_0x81ebc7(0x173)](),_0x445214),_0x16d6da[_0x81ebc7(0x176)](0x708,0x3e8))||!_0x103767?_0xb42490[_0x81ebc7(0x14c)](_0x2a4d93[_0x1455b4]):_0x3e8634[_0x2a4d93[_0x1455b4]]=_0x12194f;}let _0x43ef92={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x16d6da[_0x81ebc7(0x150)](_0xb42490[_0x81ebc7(0x181)],0x0)&&(_0x43ef92=await napCatCore['session'][_0x81ebc7(0x133)]()['getPskey'](_0xb42490,!![]));const _0x56fa26=_0x43ef92[_0x81ebc7(0x166)];for(const _0x279dca of _0x56fa26[_0x81ebc7(0x159)]()){Credentials['PskeyData'][_0x81ebc7(0x17b)](_0x279dca[0x0],_0x279dca[0x1]),Credentials[_0x81ebc7(0x134)][_0x81ebc7(0x17b)](_0x279dca[0x0],Date['now']());}const _0x3a0725=Object[_0x81ebc7(0x154)](Object[_0x81ebc7(0x15f)](_0x56fa26),_0x3e8634);if(_0x16d6da[_0x81ebc7(0x145)](_0x43ef92['result'],0x0))return _0x3a0725;else _0x16d6da[_0x81ebc7(0x157)](logError,_0x16d6da[_0x81ebc7(0x15c)],_0x43ef92[_0x81ebc7(0x142)]);return{};}static async[_0x146597(0x130)](){const _0x5d4743=_0x146597,_0x4f26ed=await napCatCore['session'][_0x5d4743(0x135)]()[_0x5d4743(0x130)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x4f26ed?.[_0x5d4743(0x13a)]?.[_0x5d4743(0x146)];}static async[_0x146597(0x140)](){const _0x268cc0=_0x146597,_0x4c30f6={'xuukQ':function(_0x2927f2,_0x3f3a53){return _0x2927f2+_0x3f3a53;},'kozdT':function(_0x1b042e,_0x362502){return _0x1b042e+_0x362502;},'hTAHt':function(_0x41f7e5,_0x5527d3){return _0x41f7e5+_0x5527d3;},'sdSEa':function(_0x3dc587,_0x5cc57a){return _0x3dc587+_0x5cc57a;},'NnglM':_0x268cc0(0x151),'PmCHN':_0x268cc0(0x165),'LzjRH':'&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','URbuP':_0x268cc0(0x13d),'DWeVX':'请求获取Cookies时失败'},_0x4b1972=_0x4c30f6[_0x268cc0(0x13f)](_0x4c30f6['xuukQ'](_0x4c30f6[_0x268cc0(0x138)](_0x4c30f6[_0x268cc0(0x138)](_0x4c30f6['hTAHt'](_0x4c30f6[_0x268cc0(0x14a)](_0x4c30f6[_0x268cc0(0x136)],selfInfo[_0x268cc0(0x13b)]),_0x4c30f6[_0x268cc0(0x16b)]),Credentials[_0x268cc0(0x148)]),_0x4c30f6[_0x268cc0(0x15a)]),selfInfo[_0x268cc0(0x13b)]),_0x4c30f6[_0x268cc0(0x158)]);let _0x1f0fc8={};try{_0x1f0fc8=await RequestUtil['HttpsGetCookies'](_0x4b1972);}catch(_0x2c8d78){logDebug(_0x4c30f6[_0x268cc0(0x171)],_0x2c8d78),_0x1f0fc8={};}return _0x1f0fc8;}static async[_0x146597(0x14d)](_0xcef064=!![]){const _0x5f5a2e=_0x146597,_0x5a1b13={'IQood':function(_0x3cfb7d,_0x2fe68d){return _0x3cfb7d>_0x2fe68d;},'Orebs':function(_0x4bd281,_0x5c577e){return _0x4bd281-_0x5c577e;},'LUjuf':function(_0x20e264,_0x5c8a92){return _0x20e264*_0x5c8a92;},'Ppzzf':function(_0x121489,_0xb6dc25){return _0x121489!==_0xb6dc25;},'KIBrW':function(_0x53669d,_0x270fe3){return _0x53669d+_0x270fe3;},'xFOLm':function(_0x233b45,_0xc79442){return _0x233b45+_0xc79442;},'rzPDb':'&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','jVtQv':function(_0x52de11,_0x128b87,_0x215a57){return _0x52de11(_0x128b87,_0x215a57);},'iAKyk':'请求获取Skey时失败','mkGtC':_0x5f5a2e(0x183)};try{if(Credentials['CreatTime']==0x0||_0x5a1b13['IQood'](_0x5a1b13[_0x5f5a2e(0x170)](Date[_0x5f5a2e(0x173)](),Credentials[_0x5f5a2e(0x161)]),_0x5a1b13[_0x5f5a2e(0x16a)](0x3e8,0xe10))||!_0xcef064){const _0xc99b81=await napCatCore['session'][_0x5f5a2e(0x16c)]()['forceFetchClientKey']('');if(_0x5a1b13[_0x5f5a2e(0x15e)](_0xc99b81[_0x5f5a2e(0x177)],0x0))return'';const _0xd03407=_0xc99b81[_0x5f5a2e(0x132)],_0x4f54eb=_0xc99b81[_0x5f5a2e(0x167)],_0x349414=_0x5a1b13[_0x5f5a2e(0x17f)](_0x5a1b13[_0x5f5a2e(0x17f)](_0x5a1b13['xFOLm']('https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=',selfInfo[_0x5f5a2e(0x13b)])+'&clientkey=',_0xd03407)+_0x5a1b13[_0x5f5a2e(0x178)],_0x4f54eb);let _0x145b92={};try{_0x145b92=await RequestUtil[_0x5f5a2e(0x131)](_0x349414);}catch(_0x210019){_0x5a1b13[_0x5f5a2e(0x12c)](logDebug,_0x5a1b13[_0x5f5a2e(0x169)],_0x210019),_0x145b92={};}const _0x4a091a=_0x145b92[_0x5a1b13[_0x5f5a2e(0x155)]];if(!_0x4a091a)return'';return Credentials[_0x5f5a2e(0x148)]=_0xd03407,Credentials[_0x5f5a2e(0x17e)]=_0x4f54eb,Credentials[_0x5f5a2e(0x161)]=Date[_0x5f5a2e(0x173)](),Credentials[_0x5f5a2e(0x17a)]=_0x4a091a,_0x4a091a;}return Credentials[_0x5f5a2e(0x17a)];}catch(_0x20abbf){}return undefined;}}