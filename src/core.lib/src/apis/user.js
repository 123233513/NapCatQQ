const _0x4226c4=_0x5c83;function _0x5c83(_0x5e8604,_0x45cf49){const _0x58a8f2=_0x58a8();return _0x5c83=function(_0x5c8349,_0x544f69){_0x5c8349=_0x5c8349-0x17b;let _0x5d8053=_0x58a8f2[_0x5c8349];return _0x5d8053;},_0x5c83(_0x5e8604,_0x45cf49);}(function(_0x26fe23,_0x45aa5d){const _0x47daf3=_0x5c83,_0x4b5d33=_0x26fe23();while(!![]){try{const _0x97e6d7=-parseInt(_0x47daf3(0x190))/0x1*(-parseInt(_0x47daf3(0x1a2))/0x2)+parseInt(_0x47daf3(0x1b1))/0x3*(-parseInt(_0x47daf3(0x1b7))/0x4)+parseInt(_0x47daf3(0x19a))/0x5+parseInt(_0x47daf3(0x194))/0x6+-parseInt(_0x47daf3(0x1ad))/0x7+parseInt(_0x47daf3(0x19d))/0x8*(-parseInt(_0x47daf3(0x1cc))/0x9)+parseInt(_0x47daf3(0x1c2))/0xa*(-parseInt(_0x47daf3(0x1b9))/0xb);if(_0x97e6d7===_0x45aa5d)break;else _0x4b5d33['push'](_0x4b5d33['shift']());}catch(_0x345aef){_0x4b5d33['push'](_0x4b5d33['shift']());}}}(_0x58a8,0xd0909));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x4226c4(0x1c5)]=_0x5ddf97=>{const _0x45ed28=_0x4226c4;userInfoCache[_0x5ddf97[_0x45ed28(0x1af)]]=_0x5ddf97,userDetailHandlers['forEach'](_0x2be059=>_0x2be059(_0x5ddf97));},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x9a1a2=_0x5c83;napCatCore[_0x9a1a2(0x1be)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x4226c4(0x17e)](_0x4ab9c9,_0xb5cb7d,_0x38c5a9){const _0x124fbb=_0x4226c4;return napCatCore[_0x124fbb(0x1aa)][_0x124fbb(0x185)]()[_0x124fbb(0x1a9)]({'status':_0x4ab9c9,'extStatus':_0xb5cb7d,'batteryStatus':_0x38c5a9});}static async[_0x4226c4(0x1a3)](_0x4d57a2,_0x39935a=0x1){const _0x16c467=_0x4226c4;return napCatCore[_0x16c467(0x1aa)]['getProfileLikeService']()[_0x16c467(0x182)]({'friendUid':_0x4d57a2,'sourceId':0x47,'doLikeCount':_0x39935a,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x523362){const _0x3f1a16=_0x4226c4,_0x15fb9a=napCatCore[_0x3f1a16(0x1aa)][_0x3f1a16(0x1c4)]()[_0x3f1a16(0x1a4)](_0x523362);return{'result':_0x15fb9a?.[_0x3f1a16(0x1c3)],'errMsg':_0x15fb9a?.[_0x3f1a16(0x1b2)]};}static async[_0x4226c4(0x1b4)](){}static async['getUserInfo'](_0x1801cc){}static async[_0x4226c4(0x1cd)](_0x1cbf13){const _0x527a9e={'OLmBL':function(_0x589654,_0x332eaf){return _0x589654===_0x332eaf;},'gOyVr':function(_0x164a42,_0x3238fb){return _0x164a42(_0x3238fb);}},_0x2d594e=napCatCore['session']['getProfileService']();return new Promise((_0x1cd074,_0x33e576)=>{const _0x5d3233=_0x5c83,_0x1d93e5={'PAqzO':function(_0x342737,_0x4ad37a){return _0x342737(_0x4ad37a);},'FBwWW':'getUserDetailInfo\x20timeout'},_0xf2e40f=randomUUID();let _0x4c5c4a=![],_0x357a51=undefined,_0xc00e78=!![];setTimeout(()=>{const _0x530299=_0x5c83;!_0x4c5c4a&&(_0x357a51?_0x1d93e5[_0x530299(0x1bd)](_0x1cd074,_0x357a51):_0x33e576(_0x1d93e5[_0x530299(0x1c7)])),userDetailHandlers['delete'](_0xf2e40f);},0x1388),userDetailHandlers['set'](_0xf2e40f,_0x1f92c0=>{const _0x1a6bb3=_0x5c83;_0x527a9e[_0x1a6bb3(0x1bb)](_0x1f92c0[_0x1a6bb3(0x1af)],_0x1cbf13)&&(uid2UinMap[_0x1cbf13]=_0x1f92c0[_0x1a6bb3(0x1c1)],_0xc00e78?(_0x357a51=_0x1f92c0,_0xc00e78=![]):(_0x4c5c4a=!![],_0x527a9e[_0x1a6bb3(0x197)](_0x1cd074,_0x1f92c0)));}),_0x2d594e['getUserDetailInfoWithBizInfo'](_0x1cbf13,[0x0])[_0x5d3233(0x191)](_0xb499d7=>{});});}static async[_0x4226c4(0x1b8)](_0x299f6b,_0x28ea55=!![]){const _0x4da8ec=_0x4226c4,_0x5f2055={'SUhiU':function(_0x1deef4,_0x1beea3){return _0x1deef4||_0x1beea3;},'ypBVM':function(_0xfbe2c3,_0x865407){return _0xfbe2c3>_0x865407;},'qylvr':function(_0x3c6e50,_0x2475d4){return _0x3c6e50-_0x2475d4;},'hHnnf':function(_0x49e034,_0x5d7d71){return _0x49e034===_0x5d7d71;}},_0xe624cf=[],_0x4840b0={};for(const _0x26efae in _0x299f6b){const _0x56b900=Credentials[_0x4da8ec(0x1a7)][_0x4da8ec(0x193)](_0x299f6b[_0x26efae]),_0x37a8d3=Credentials[_0x4da8ec(0x19f)]['get'](_0x299f6b[_0x26efae]);_0x5f2055[_0x4da8ec(0x1ab)](!_0x56b900,!_0x37a8d3)||_0x5f2055[_0x4da8ec(0x19e)](_0x5f2055[_0x4da8ec(0x18e)](Date[_0x4da8ec(0x1b3)](),_0x37a8d3),0x708*0x3e8)||!_0x28ea55?_0xe624cf[_0x4da8ec(0x181)](_0x299f6b[_0x26efae]):_0x4840b0[_0x299f6b[_0x26efae]]=_0x56b900;}let _0x5799a9={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0xe624cf[_0x4da8ec(0x192)]>0x0&&(_0x5799a9=await napCatCore[_0x4da8ec(0x1aa)][_0x4da8ec(0x1ce)]()[_0x4da8ec(0x1ae)](_0xe624cf,!![]));const _0x2fe0e7=_0x5799a9[_0x4da8ec(0x1a0)];for(const _0x237a36 of _0x2fe0e7[_0x4da8ec(0x17f)]()){Credentials[_0x4da8ec(0x1a7)][_0x4da8ec(0x18d)](_0x237a36[0x0],_0x237a36[0x1]),Credentials[_0x4da8ec(0x19f)][_0x4da8ec(0x18d)](_0x237a36[0x0],Date['now']());}const _0x52228a=Object[_0x4da8ec(0x199)](Object[_0x4da8ec(0x17d)](_0x2fe0e7),_0x4840b0);if(_0x5f2055[_0x4da8ec(0x1ac)](_0x5799a9[_0x4da8ec(0x1c3)],0x0))return _0x52228a;else logError(_0x4da8ec(0x18a),_0x5799a9[_0x4da8ec(0x1b2)]);return{};}static async[_0x4226c4(0x184)](){const _0x148c6d=_0x4226c4,_0x2e4cb4=await napCatCore[_0x148c6d(0x1aa)][_0x148c6d(0x195)]()[_0x148c6d(0x184)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x2e4cb4?.[_0x148c6d(0x196)]?.[_0x148c6d(0x1c8)];}static async[_0x4226c4(0x17b)](){const _0x6433df=_0x4226c4,_0x13a916={'rtmET':function(_0x998fcb,_0x468fe2){return _0x998fcb+_0x468fe2;},'tLxYm':function(_0x3d8eaa,_0x35179c){return _0x3d8eaa+_0x35179c;},'lxSeQ':function(_0x136836,_0x124c52){return _0x136836+_0x124c52;},'tbkBb':'&clientkey=','OowZU':_0x6433df(0x1a8),'mICWV':_0x6433df(0x17c)},_0x24a6be=_0x13a916[_0x6433df(0x188)](_0x13a916['tLxYm'](_0x13a916[_0x6433df(0x188)](_0x13a916[_0x6433df(0x1a6)](_0x13a916[_0x6433df(0x1a6)]('https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=',selfInfo[_0x6433df(0x1c1)]),_0x13a916[_0x6433df(0x189)]),Credentials['ClientKey'])+_0x13a916[_0x6433df(0x1cb)],selfInfo[_0x6433df(0x1c1)]),_0x13a916['mICWV']);let _0xf891a5={};try{_0xf891a5=await RequestUtil[_0x6433df(0x180)](_0x24a6be);}catch(_0x451ffe){logDebug('请求获取Cookies时失败',_0x451ffe),_0xf891a5={};}return _0xf891a5;}static async[_0x4226c4(0x18f)](_0x44de23=!![]){const _0x440a95=_0x4226c4,_0x907c2a={'fWxAs':function(_0x4e49ec,_0x54eb3b){return _0x4e49ec==_0x54eb3b;},'rhsyp':function(_0x2c0b27,_0x5a23df){return _0x2c0b27>_0x5a23df;},'OpCbj':function(_0x6ef959,_0x45ac09){return _0x6ef959-_0x45ac09;},'hDlJK':function(_0x2e25d3,_0x2ae4a8){return _0x2e25d3*_0x2ae4a8;},'RkMvk':function(_0x1e94b7,_0x5bc0f0){return _0x1e94b7!==_0x5bc0f0;},'Ijmez':function(_0x4527d2,_0x432a7f){return _0x4527d2+_0x432a7f;},'WkOpw':function(_0x5128d7,_0x11c5e8){return _0x5128d7+_0x11c5e8;},'SKaFZ':function(_0x3d140c,_0x281cf4){return _0x3d140c+_0x281cf4;},'GVkXo':function(_0xaef0b1,_0x535db7){return _0xaef0b1+_0x535db7;},'OVCic':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','Oxsoc':_0x440a95(0x187),'HVRMb':function(_0x4faae5,_0x4a3cf7,_0x1b638a){return _0x4faae5(_0x4a3cf7,_0x1b638a);},'NXGxu':_0x440a95(0x1a5)};try{if(_0x907c2a['fWxAs'](Credentials[_0x440a95(0x1cf)],0x0)||_0x907c2a[_0x440a95(0x1c6)](_0x907c2a[_0x440a95(0x1ba)](Date[_0x440a95(0x1b3)](),Credentials[_0x440a95(0x1cf)]),_0x907c2a['hDlJK'](0x3e8,0xe10))||!_0x44de23){const _0x3a535f=await napCatCore['session']['getTicketService']()[_0x440a95(0x1bf)]('');if(_0x907c2a[_0x440a95(0x186)](_0x3a535f[_0x440a95(0x1c3)],0x0))return'';const _0x3dcd2e=_0x3a535f[_0x440a95(0x183)],_0x5ab31a=_0x3a535f[_0x440a95(0x1bc)],_0x5abe28=_0x907c2a[_0x440a95(0x1c9)](_0x907c2a['WkOpw'](_0x907c2a[_0x440a95(0x1b5)](_0x907c2a[_0x440a95(0x18b)](_0x907c2a['Ijmez'](_0x907c2a[_0x440a95(0x198)],selfInfo['uin']),_0x440a95(0x1b6)),_0x3dcd2e),_0x907c2a[_0x440a95(0x18c)]),_0x5ab31a);let _0x311bf2={};try{_0x311bf2=await RequestUtil[_0x440a95(0x180)](_0x5abe28);}catch(_0x41d1ae){_0x907c2a[_0x440a95(0x1c0)](logDebug,_0x907c2a[_0x440a95(0x1ca)],_0x41d1ae),_0x311bf2={};}const _0x4c0ad3=_0x311bf2[_0x440a95(0x1b0)];if(!_0x4c0ad3)return'';return Credentials[_0x440a95(0x1a1)]=_0x3dcd2e,Credentials[_0x440a95(0x19c)]=_0x5ab31a,Credentials[_0x440a95(0x1cf)]=Date[_0x440a95(0x1b3)](),Credentials[_0x440a95(0x19b)]=_0x4c0ad3,_0x4c0ad3;}return Credentials[_0x440a95(0x19b)];}catch(_0xf66de6){}return undefined;}}function _0x58a8(){const _0x324606=['hHnnf','1410381isqDSN','getPskey','uid','skey','12VEhLNu','errMsg','now','getSelfInfo','SKaFZ','&clientkey=','496260Qzdsnb','getPSkey','15964179dPYymI','OpCbj','OLmBL','keyIndex','PAqzO','addListener','forceFetchClientKey','HVRMb','uin','10TGxPco','result','getProfileService','onProfileDetailInfoChanged','rhsyp','FBwWW','robotUinRanges','Ijmez','NXGxu','OowZU','162lsbJfL','getUserDetailInfo','getTipOffService','CreatTime','getQzoneCookies','%2Finfocenter&keyindex=19%27','fromEntries','setSelfOnlineStatus','entries','HttpsGetCookies','push','setBuddyProfileLike','clientKey','getRobotUinRange','getMsgService','RkMvk','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','rtmET','tbkBb','获取Pskey失败','GVkXo','Oxsoc','set','qylvr','getSkey','414893aBwRrd','then','length','get','8446866BgILCD','getRobotService','response','gOyVr','OVCic','assign','7407755udaDSO','Skey','KeyIndex','133752cBuOEO','ypBVM','PskeyTime','domainPskeyMap','ClientKey','2Gkweoi','like','setHeader','请求获取Skey时失败','lxSeQ','PskeyData','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','setStatus','session','SUhiU'];_0x58a8=function(){return _0x324606;};return _0x58a8();}