const _0x2cf0f2=_0x5262;(function(_0x89377a,_0xa322dd){const _0x331ac3=_0x5262,_0x2a6dc9=_0x89377a();while(!![]){try{const _0x215ad9=-parseInt(_0x331ac3(0x21e))/0x1+parseInt(_0x331ac3(0x212))/0x2*(parseInt(_0x331ac3(0x1dc))/0x3)+-parseInt(_0x331ac3(0x1e4))/0x4*(parseInt(_0x331ac3(0x1e9))/0x5)+-parseInt(_0x331ac3(0x1d0))/0x6+parseInt(_0x331ac3(0x1e5))/0x7+parseInt(_0x331ac3(0x1ea))/0x8+-parseInt(_0x331ac3(0x1f3))/0x9*(-parseInt(_0x331ac3(0x1d7))/0xa);if(_0x215ad9===_0xa322dd)break;else _0x2a6dc9['push'](_0x2a6dc9['shift']());}catch(_0x2439e2){_0x2a6dc9['push'](_0x2a6dc9['shift']());}}}(_0x5896,0xf2d70));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';function _0x5896(){const _0x5dcc07=['请求获取Skey时失败','session','hxIWK','PqRyZ','getSkey','fromEntries','1559584nPTbOO','get','then','response','qdayE','QFHLt','now','CreatTime','2584098GsOKPw','uin','Skey','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','JMNnJ','length','voMYU','17890uMqRUf','PskeyData','setQQAvatar','xHDkQ','GHhdO','348gKTaaL','%2Finfocenter&keyindex=19%27','errMsg','set','assign','onProfileDetailInfoChanged','YQQXK','addListener','404DxWWyf','6567113OUTYhQ','getUserDetailInfoWithBizInfo','HttpsGetCookies','mONZU','91945RraDMp','10411168RRgpVr','STAAu','PskeyTime','dEeZF','oNMAi','entries','znxrT','getUserDetailInfo','ZqgUN','10053BgOWgt','forEach','getProfileLikeService','FQpeZ','forceFetchClientKey','getTipOffService','delete','modifySelfProfile','clientKey','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','onLoginSuccess','getMsgService','getQzoneCookies','cTkDR','getPSkey','qFiYn','&clientkey=','NNUBm','getRobotService','getUserDetailInfo\x20timeout','getUserInfo','ClientKey','orBGX','SfuSe','uid','setHeader','getProfileService','zOgVf','请求获取Cookies时失败','domainPskeyMap','getRobotUinRange','10420dJlgnw','gihIB','robotUinRanges','fRcIn','result','setSelfOnlineStatus'];_0x5896=function(){return _0x5dcc07;};return _0x5896();}const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x5262(_0x28f9c0,_0x10a971){const _0x5896e7=_0x5896();return _0x5262=function(_0x526226,_0xbd05f2){_0x526226=_0x526226-0x1c9;let _0x3f5d60=_0x5896e7[_0x526226];return _0x3f5d60;},_0x5262(_0x28f9c0,_0x10a971);}profileListener[_0x2cf0f2(0x1e1)]=_0x4afb63=>{const _0x55550f=_0x2cf0f2;userInfoCache[_0x4afb63[_0x55550f(0x20b)]]=_0x4afb63,userDetailHandlers[_0x55550f(0x1f4)](_0xc407e7=>_0xc407e7(_0x4afb63));},setTimeout(()=>{const _0xf51cc9=_0x2cf0f2;napCatCore[_0xf51cc9(0x1fd)](()=>{const _0x2217e8=_0xf51cc9;napCatCore[_0x2217e8(0x1e3)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x2cf0f2(0x217)](_0x324364,_0x769f1d,_0x3ce78a){const _0x4316fd=_0x2cf0f2;return napCatCore[_0x4316fd(0x219)][_0x4316fd(0x1fe)]()['setStatus']({'status':_0x324364,'extStatus':_0x769f1d,'batteryStatus':_0x3ce78a});}static async['like'](_0x284663,_0x51d8fa=0x1){const _0x1872e5=_0x2cf0f2;return napCatCore[_0x1872e5(0x219)][_0x1872e5(0x1f5)]()['setBuddyProfileLike']({'friendUid':_0x284663,'sourceId':0x47,'doLikeCount':_0x51d8fa,'doLikeTollCount':0x0});}static async[_0x2cf0f2(0x1d9)](_0x4dbc75){const _0x31a9cf=_0x2cf0f2,_0x30cd4a=napCatCore[_0x31a9cf(0x219)][_0x31a9cf(0x20d)]()[_0x31a9cf(0x20c)](_0x4dbc75);return{'result':_0x30cd4a?.['result'],'errMsg':_0x30cd4a?.['errMsg']};}static async['getSelfInfo'](){}static async[_0x2cf0f2(0x207)](_0x568f1d){}static async[_0x2cf0f2(0x1f1)](_0x5ec73f){const _0x462533=_0x2cf0f2,_0x724f97={'NNUBm':function(_0x50041c,_0x4c0dd6){return _0x50041c(_0x4c0dd6);},'JMNnJ':function(_0x143e11,_0x1201d2){return _0x143e11===_0x1201d2;},'SfuSe':function(_0x5d0b0c,_0x1f8815){return _0x5d0b0c(_0x1f8815);},'gihIB':function(_0x5b6192){return _0x5b6192();},'qdayE':function(_0x2a76b8,_0x378dc8,_0x5d4dcb){return _0x2a76b8(_0x378dc8,_0x5d4dcb);}},_0x411953=napCatCore[_0x462533(0x219)][_0x462533(0x20d)]();return new Promise((_0x33ef0a,_0x314532)=>{const _0x5ad0ae=_0x462533,_0x37474e=_0x724f97[_0x5ad0ae(0x213)](randomUUID);let _0x2f1182=![],_0x395135=undefined,_0x157aa3=!![];_0x724f97[_0x5ad0ae(0x1cc)](setTimeout,()=>{const _0x5d45dc=_0x5ad0ae;!_0x2f1182&&(_0x395135?_0x33ef0a(_0x395135):_0x724f97[_0x5d45dc(0x204)](_0x314532,_0x5d45dc(0x206))),userDetailHandlers[_0x5d45dc(0x1f9)](_0x37474e);},0x1388),userDetailHandlers[_0x5ad0ae(0x1df)](_0x37474e,_0x2bef10=>{const _0x4094b1=_0x5ad0ae;_0x724f97[_0x4094b1(0x1d4)](_0x2bef10[_0x4094b1(0x20b)],_0x5ec73f)&&(uid2UinMap[_0x5ec73f]=_0x2bef10[_0x4094b1(0x1d1)],_0x157aa3?(_0x395135=_0x2bef10,_0x157aa3=![]):(_0x2f1182=!![],_0x724f97[_0x4094b1(0x20a)](_0x33ef0a,_0x2bef10)));}),_0x411953[_0x5ad0ae(0x1e6)](_0x5ec73f,[0x0])[_0x5ad0ae(0x1ca)](_0x3c0c99=>{});});}static async[_0x2cf0f2(0x1fa)](_0x310271){const _0x2ad777=_0x2cf0f2;return napCatCore[_0x2ad777(0x219)][_0x2ad777(0x20d)]()['modifyDesktopMiniProfile'](_0x310271);}static async[_0x2cf0f2(0x201)](_0x3c1fc1,_0x210324=!![]){const _0xa9f2bc=_0x2cf0f2,_0x1b4f5d={'mONZU':function(_0x270e8e,_0x51ab94){return _0x270e8e||_0x51ab94;},'ZqgUN':function(_0x532133,_0x508dff){return _0x532133>_0x508dff;},'YQQXK':function(_0x134e85,_0x202126){return _0x134e85-_0x202126;},'znxrT':function(_0x5a9482,_0x5f10da){return _0x5a9482===_0x5f10da;},'ktCHq':function(_0x32286d,_0x5f1a8f,_0x22f538){return _0x32286d(_0x5f1a8f,_0x22f538);}},_0x7d5351=[],_0x5d9f73={};for(const _0x2da29a in _0x3c1fc1){const _0x4470b9=Credentials[_0xa9f2bc(0x1d8)][_0xa9f2bc(0x1c9)](_0x3c1fc1[_0x2da29a]),_0x1a3bd0=Credentials[_0xa9f2bc(0x1ec)][_0xa9f2bc(0x1c9)](_0x3c1fc1[_0x2da29a]);_0x1b4f5d[_0xa9f2bc(0x1e8)](!_0x4470b9,!_0x1a3bd0)||_0x1b4f5d[_0xa9f2bc(0x1f2)](_0x1b4f5d[_0xa9f2bc(0x1e2)](Date['now'](),_0x1a3bd0),0x708*0x3e8)||!_0x210324?_0x7d5351['push'](_0x3c1fc1[_0x2da29a]):_0x5d9f73[_0x3c1fc1[_0x2da29a]]=_0x4470b9;}let _0x405742={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x7d5351[_0xa9f2bc(0x1d5)]>0x0&&(_0x405742=await napCatCore[_0xa9f2bc(0x219)][_0xa9f2bc(0x1f8)]()['getPskey'](_0x7d5351,!![]));const _0x599888=_0x405742[_0xa9f2bc(0x210)];for(const _0x27a41b of _0x599888[_0xa9f2bc(0x1ef)]()){Credentials[_0xa9f2bc(0x1d8)][_0xa9f2bc(0x1df)](_0x27a41b[0x0],_0x27a41b[0x1]),Credentials['PskeyTime']['set'](_0x27a41b[0x0],Date['now']());}const _0x14a9f0=Object[_0xa9f2bc(0x1e0)](Object[_0xa9f2bc(0x21d)](_0x599888),_0x5d9f73);if(_0x1b4f5d[_0xa9f2bc(0x1f0)](_0x405742[_0xa9f2bc(0x216)],0x0))return _0x14a9f0;else _0x1b4f5d['ktCHq'](logError,'获取Pskey失败',_0x405742[_0xa9f2bc(0x1de)]);return{};}static async[_0x2cf0f2(0x211)](){const _0x2caec1=_0x2cf0f2,_0xdd773b=await napCatCore['session'][_0x2caec1(0x205)]()['getRobotUinRange']({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0xdd773b?.[_0x2caec1(0x1cb)]?.[_0x2caec1(0x214)];}static async[_0x2cf0f2(0x1ff)](){const _0x69286=_0x2cf0f2,_0xd04fad={'orBGX':function(_0x3541e9,_0x2677d8){return _0x3541e9+_0x2677d8;},'hxIWK':function(_0x4562be,_0x2a6fc5){return _0x4562be+_0x2a6fc5;},'QFHLt':function(_0x17b6d6,_0xca7c8c){return _0x17b6d6+_0xca7c8c;},'STAAu':_0x69286(0x1fc),'PqRyZ':_0x69286(0x203),'RPqtH':'&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','xHDkQ':function(_0x4a2ab0,_0x20315e,_0x25b891){return _0x4a2ab0(_0x20315e,_0x25b891);},'fRcIn':_0x69286(0x20f)},_0x4fd8da=_0xd04fad[_0x69286(0x209)](_0xd04fad['hxIWK'](_0xd04fad[_0x69286(0x21a)](_0xd04fad[_0x69286(0x21a)](_0xd04fad[_0x69286(0x1cd)](_0xd04fad[_0x69286(0x1eb)],selfInfo[_0x69286(0x1d1)]),_0xd04fad[_0x69286(0x21b)]),Credentials[_0x69286(0x208)]),_0xd04fad['RPqtH'])+selfInfo['uin'],_0x69286(0x1dd));let _0xf2bee6={};try{_0xf2bee6=await RequestUtil[_0x69286(0x1e7)](_0x4fd8da);}catch(_0x2186f6){_0xd04fad[_0x69286(0x1da)](logDebug,_0xd04fad[_0x69286(0x215)],_0x2186f6),_0xf2bee6={};}return _0xf2bee6;}static async[_0x2cf0f2(0x21c)](_0x3a2a68=!![]){const _0x22892a=_0x2cf0f2,_0x5b2010={'cTkDR':function(_0x5b65fa,_0x13b7dd){return _0x5b65fa>_0x13b7dd;},'qFiYn':function(_0x2edbee,_0x5968ac){return _0x2edbee-_0x5968ac;},'zOgVf':function(_0x5512c5,_0x552f6b){return _0x5512c5*_0x552f6b;},'QMTqg':function(_0x550af2,_0x559da1){return _0x550af2!==_0x559da1;},'FQpeZ':function(_0x2635cc,_0x4d8cc2){return _0x2635cc+_0x4d8cc2;},'epnVX':function(_0x2ca5c0,_0x3039cc){return _0x2ca5c0+_0x3039cc;},'oNMAi':function(_0x384811,_0x952391){return _0x384811+_0x952391;},'voMYU':function(_0x4c8e72,_0xb386e){return _0x4c8e72+_0xb386e;},'OvJnS':_0x22892a(0x1d3),'GHhdO':_0x22892a(0x218),'dEeZF':'skey'};try{if(Credentials[_0x22892a(0x1cf)]==0x0||_0x5b2010[_0x22892a(0x200)](_0x5b2010[_0x22892a(0x202)](Date['now'](),Credentials[_0x22892a(0x1cf)]),_0x5b2010[_0x22892a(0x20e)](0x3e8,0xe10))||!_0x3a2a68){const _0x3592c6=await napCatCore['session']['getTicketService']()[_0x22892a(0x1f7)]('');if(_0x5b2010['QMTqg'](_0x3592c6[_0x22892a(0x216)],0x0))return'';const _0x49784e=_0x3592c6[_0x22892a(0x1fb)],_0xcb890=_0x3592c6['keyIndex'],_0x45c8ec=_0x5b2010[_0x22892a(0x1f6)](_0x5b2010['epnVX'](_0x5b2010[_0x22892a(0x1ee)](_0x5b2010[_0x22892a(0x1d6)]('https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin='+selfInfo['uin'],_0x22892a(0x203)),_0x49784e),_0x5b2010['OvJnS']),_0xcb890);let _0x111645={};try{_0x111645=await RequestUtil[_0x22892a(0x1e7)](_0x45c8ec);}catch(_0x36d1f8){logDebug(_0x5b2010[_0x22892a(0x1db)],_0x36d1f8),_0x111645={};}const _0x2c24bb=_0x111645[_0x5b2010[_0x22892a(0x1ed)]];if(!_0x2c24bb)return'';return Credentials[_0x22892a(0x208)]=_0x49784e,Credentials['KeyIndex']=_0xcb890,Credentials['CreatTime']=Date[_0x22892a(0x1ce)](),Credentials[_0x22892a(0x1d2)]=_0x2c24bb,_0x2c24bb;}return Credentials[_0x22892a(0x1d2)];}catch(_0x6adca6){}return undefined;}}