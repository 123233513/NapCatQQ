const _0x463562=_0x820d;(function(_0x32af5e,_0x29a8e9){const _0x2e6aef=_0x820d,_0x43d405=_0x32af5e();while(!![]){try{const _0xf078dd=-parseInt(_0x2e6aef(0x171))/0x1+parseInt(_0x2e6aef(0x19a))/0x2+-parseInt(_0x2e6aef(0x1a1))/0x3*(parseInt(_0x2e6aef(0x179))/0x4)+parseInt(_0x2e6aef(0x19e))/0x5+parseInt(_0x2e6aef(0x183))/0x6*(parseInt(_0x2e6aef(0x175))/0x7)+-parseInt(_0x2e6aef(0x1a4))/0x8+parseInt(_0x2e6aef(0x164))/0x9*(-parseInt(_0x2e6aef(0x185))/0xa);if(_0xf078dd===_0x29a8e9)break;else _0x43d405['push'](_0x43d405['shift']());}catch(_0x3ee825){_0x43d405['push'](_0x43d405['shift']());}}}(_0xb970,0x3b077));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0xb970(){const _0x47f177=['getUserDetailInfoWithBizInfo','exFvC','setQQAvatar','forEach','AvtPe','rKqRx','请求获取Skey时失败','ZRVZE','HttpsGetCookies','getUserDetailInfo\x20timeout','setBuddyProfileLike','result','hGvDo','&clientkey=','soMPp','get','setHeader','获取Pskey失败','376664KSzkNJ','setSelfOnlineStatus','clientKey','getMsgService','2067605zeXgvz','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','getPSkey','15bIduqC','errMsg','getProfileService','507808ynrRUU','getProfileLikeService','uin','session','9RNsMXS','robotUinRanges','then','forceFetchClientKey','skey','onLoginSuccess','CreatTime','getPskey','mVeFx','RyXoC','addListener','entries','assign','140479ItuOWf','aTVDC','vwFCa','PskeyData','7DgtyOP','keyIndex','length','ejdXA','13228SKRaol','vFTcf','getRobotUinRange','now','getTipOffService','vSGrE','like','PskeyTime','set','uid','2562342lblkZr','onProfileDetailInfoChanged','5666370EVQnnm','push','Skey'];_0xb970=function(){return _0x47f177;};return _0xb970();}import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';function _0x820d(_0x2feb50,_0x1b72a1){const _0xb970ea=_0xb970();return _0x820d=function(_0x820d5b,_0x5bbaf2){_0x820d5b=_0x820d5b-0x161;let _0x2f5bda=_0xb970ea[_0x820d5b];return _0x2f5bda;},_0x820d(_0x2feb50,_0x1b72a1);}const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x463562(0x184)]=_0x165a0a=>{const _0x29414f=_0x463562;userInfoCache[_0x165a0a[_0x29414f(0x182)]]=_0x165a0a,userDetailHandlers[_0x29414f(0x18b)](_0x3f6674=>_0x3f6674(_0x165a0a));},setTimeout(()=>{const _0x2259e2=_0x463562;napCatCore[_0x2259e2(0x169)](()=>{const _0x2506d1=_0x2259e2;napCatCore[_0x2506d1(0x16e)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x463562(0x19b)](_0x787e50,_0x2cc9dc,_0x33deae){const _0x1f7f6e=_0x463562;return napCatCore[_0x1f7f6e(0x163)][_0x1f7f6e(0x19d)]()['setStatus']({'status':_0x787e50,'extStatus':_0x2cc9dc,'batteryStatus':_0x33deae});}static async[_0x463562(0x17f)](_0x1396aa,_0x45cf55=0x1){const _0x152cb7=_0x463562;return napCatCore[_0x152cb7(0x163)][_0x152cb7(0x161)]()[_0x152cb7(0x192)]({'friendUid':_0x1396aa,'sourceId':0x47,'doLikeCount':_0x45cf55,'doLikeTollCount':0x0});}static async[_0x463562(0x18a)](_0x50130a){const _0x1f215f=_0x463562,_0x8cc80=napCatCore[_0x1f215f(0x163)][_0x1f215f(0x1a3)]()[_0x1f215f(0x198)](_0x50130a);return{'result':_0x8cc80?.['result'],'errMsg':_0x8cc80?.[_0x1f215f(0x1a2)]};}static async['getSelfInfo'](){}static async['getUserInfo'](_0x32b8f1){}static async['getUserDetailInfo'](_0x3d6bbd){const _0x4c743c=_0x463562,_0x1697af={'rKqRx':_0x4c743c(0x191),'mRsDR':function(_0x11ace9,_0x446616){return _0x11ace9===_0x446616;},'exFvC':function(_0x402706,_0x4face5){return _0x402706(_0x4face5);},'RyXoC':function(_0xdc458e){return _0xdc458e();},'aTVDC':function(_0x5f41c2,_0x9307f,_0x269053){return _0x5f41c2(_0x9307f,_0x269053);}},_0x3ec1c4=napCatCore['session'][_0x4c743c(0x1a3)]();return new Promise((_0x1e6c18,_0x24020f)=>{const _0x4088f1=_0x4c743c,_0x2efb37=_0x1697af[_0x4088f1(0x16d)](randomUUID);let _0x40266b=![];_0x1697af[_0x4088f1(0x172)](setTimeout,()=>{const _0x5868f8=_0x4088f1;!_0x40266b&&_0x24020f(_0x1697af[_0x5868f8(0x18d)]);},0x1388),userDetailHandlers['set'](_0x2efb37,_0x30be88=>{const _0x4890e1=_0x4088f1;_0x1697af['mRsDR'](_0x30be88[_0x4890e1(0x182)],_0x3d6bbd)&&(_0x40266b=!![],userDetailHandlers['delete'](_0x2efb37),uid2UinMap[_0x3d6bbd]=_0x30be88[_0x4890e1(0x162)],_0x1697af[_0x4890e1(0x189)](_0x1e6c18,_0x30be88));}),_0x3ec1c4[_0x4088f1(0x188)](_0x3d6bbd,[0x0])[_0x4088f1(0x166)](_0x3eab5f=>{});});}static async[_0x463562(0x1a0)](_0x2e5ca9,_0x4597a0=!![]){const _0x351d1d=_0x463562,_0x3e5414={'soMPp':function(_0x1e928a,_0x41fd35){return _0x1e928a>_0x41fd35;},'vPutX':function(_0x83cfc1,_0x5b026a){return _0x83cfc1-_0x5b026a;},'hGvDo':function(_0x149875,_0x2bc19d){return _0x149875*_0x2bc19d;},'vwFCa':function(_0x597406,_0x542952){return _0x597406===_0x542952;},'ZRVZE':function(_0xcecd57,_0x55c972,_0x354335){return _0xcecd57(_0x55c972,_0x354335);}},_0x1d1ac3=[],_0x37212b={};for(const _0x5a20d2 in _0x2e5ca9){const _0x8a69fe=Credentials[_0x351d1d(0x174)][_0x351d1d(0x197)](_0x2e5ca9[_0x5a20d2]),_0x41c26d=Credentials[_0x351d1d(0x180)][_0x351d1d(0x197)](_0x2e5ca9[_0x5a20d2]);!_0x8a69fe||!_0x41c26d||_0x3e5414[_0x351d1d(0x196)](_0x3e5414['vPutX'](Date[_0x351d1d(0x17c)](),_0x41c26d),_0x3e5414[_0x351d1d(0x194)](0x708,0x3e8))||!_0x4597a0?_0x1d1ac3[_0x351d1d(0x186)](_0x2e5ca9[_0x5a20d2]):_0x37212b[_0x2e5ca9[_0x5a20d2]]=_0x8a69fe;}let _0x302a86={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x3e5414[_0x351d1d(0x196)](_0x1d1ac3[_0x351d1d(0x177)],0x0)&&(_0x302a86=await napCatCore[_0x351d1d(0x163)][_0x351d1d(0x17d)]()[_0x351d1d(0x16b)](_0x1d1ac3,!![]));const _0x414368=_0x302a86['domainPskeyMap'];for(const _0x350809 of _0x414368[_0x351d1d(0x16f)]()){Credentials[_0x351d1d(0x174)][_0x351d1d(0x181)](_0x350809[0x0],_0x350809[0x1]),Credentials[_0x351d1d(0x180)]['set'](_0x350809[0x0],Date[_0x351d1d(0x17c)]());}const _0x2058f7=Object[_0x351d1d(0x170)](Object['fromEntries'](_0x414368),_0x37212b);if(_0x3e5414[_0x351d1d(0x173)](_0x302a86['result'],0x0))return _0x2058f7;else _0x3e5414[_0x351d1d(0x18f)](logError,_0x351d1d(0x199),_0x302a86[_0x351d1d(0x1a2)]);return{};}static async['getRobotUinRange'](){const _0x202bd9=_0x463562,_0x236163=await napCatCore[_0x202bd9(0x163)]['getRobotService']()[_0x202bd9(0x17b)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x236163?.['response']?.[_0x202bd9(0x165)];}static async['getSkey'](_0x13d35a=!![]){const _0x40cde9=_0x463562,_0x11ff4f={'mVeFx':function(_0x18099a,_0x1720f1){return _0x18099a==_0x1720f1;},'ejdXA':function(_0xb0b157,_0x2b486b){return _0xb0b157>_0x2b486b;},'AvtPe':function(_0x459ae4,_0x589fb7){return _0x459ae4-_0x589fb7;},'zBpqj':function(_0x3c1011,_0x2d403f){return _0x3c1011*_0x2d403f;},'ggJXx':function(_0x3a8531,_0x5b95fa){return _0x3a8531!==_0x5b95fa;},'vFTcf':function(_0x386301,_0x3e3e45){return _0x386301+_0x3e3e45;},'EripV':function(_0xe2a77b,_0x488ebc){return _0xe2a77b+_0x488ebc;},'oxBot':function(_0x205949,_0x6e8bbe){return _0x205949+_0x6e8bbe;},'vSGrE':_0x40cde9(0x168)};try{if(_0x11ff4f[_0x40cde9(0x16c)](Credentials[_0x40cde9(0x16a)],0x0)||_0x11ff4f[_0x40cde9(0x178)](_0x11ff4f[_0x40cde9(0x18c)](Date[_0x40cde9(0x17c)](),Credentials[_0x40cde9(0x16a)]),_0x11ff4f['zBpqj'](0x3e8,0xe10))||!_0x13d35a){const _0xaf1b85=await napCatCore[_0x40cde9(0x163)]['getTicketService']()[_0x40cde9(0x167)]('');if(_0x11ff4f['ggJXx'](_0xaf1b85[_0x40cde9(0x193)],0x0))return'';const _0x4cb1db=_0xaf1b85[_0x40cde9(0x19c)],_0xdf2fee=_0xaf1b85[_0x40cde9(0x176)],_0x526ec1=_0x11ff4f[_0x40cde9(0x17a)](_0x11ff4f['vFTcf'](_0x11ff4f['EripV'](_0x11ff4f['oxBot'](_0x11ff4f[_0x40cde9(0x17a)]('https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=',selfInfo[_0x40cde9(0x162)]),_0x40cde9(0x195)),_0x4cb1db),_0x40cde9(0x19f)),_0xdf2fee);let _0x3e7b62;try{_0x3e7b62=await RequestUtil[_0x40cde9(0x190)](_0x526ec1);}catch(_0x48fc8f){logDebug(_0x40cde9(0x18e),_0x48fc8f),_0x3e7b62=new Map();}const _0x5ed942=_0x3e7b62['get'](_0x11ff4f[_0x40cde9(0x17e)]);if(!_0x5ed942)return'';return Credentials[_0x40cde9(0x16a)]=Date['now'](),Credentials[_0x40cde9(0x187)]=_0x5ed942,_0x5ed942;}return Credentials['Skey'];}catch(_0x446972){}return undefined;}}