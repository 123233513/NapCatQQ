const _0x5a6461=_0x5f81;(function(_0x26f270,_0x2b78d1){const _0x27a8c3=_0x5f81,_0x57b6f7=_0x26f270();while(!![]){try{const _0x34e4cd=parseInt(_0x27a8c3(0x14e))/0x1*(-parseInt(_0x27a8c3(0x10a))/0x2)+parseInt(_0x27a8c3(0x144))/0x3+parseInt(_0x27a8c3(0x104))/0x4+parseInt(_0x27a8c3(0x149))/0x5+parseInt(_0x27a8c3(0x142))/0x6*(parseInt(_0x27a8c3(0x11a))/0x7)+parseInt(_0x27a8c3(0x155))/0x8+-parseInt(_0x27a8c3(0xfa))/0x9;if(_0x34e4cd===_0x2b78d1)break;else _0x57b6f7['push'](_0x57b6f7['shift']());}catch(_0x2a36dd){_0x57b6f7['push'](_0x57b6f7['shift']());}}}(_0x4930,0x2315e));import{Credentials,selfInfo}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';import{NTEventDispatch}from'@/common/utils/EventTask';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x5a6461(0xf7)]=_0x3e0781=>{const _0x613eb1=_0x5a6461;userInfoCache[_0x3e0781[_0x613eb1(0x131)]]=_0x3e0781,userDetailHandlers[_0x613eb1(0x150)](_0x58b4eb=>_0x58b4eb(_0x3e0781));},setTimeout(()=>{const _0x4024fe=_0x5a6461;napCatCore[_0x4024fe(0x13f)](()=>{const _0x5301e1=_0x4024fe;napCatCore[_0x5301e1(0x153)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x5a6461(0x145)](_0x3bf402){const _0x6a1f7e=_0x5a6461;return napCatCore[_0x6a1f7e(0x10d)][_0x6a1f7e(0x11d)]()[_0x6a1f7e(0x145)](_0x3bf402);}static async[_0x5a6461(0x133)](_0x1d4889,_0x40f3e9,_0x5420b6){const _0x17e117=_0x5a6461;return napCatCore[_0x17e117(0x10d)][_0x17e117(0x151)]()[_0x17e117(0x11b)]({'status':_0x1d4889,'extStatus':_0x40f3e9,'batteryStatus':_0x5420b6});}static async['getBuddyRecommendContactArkJson'](_0x5a6fb5,_0x32eb94=''){const _0x5700f5=_0x5a6461;return napCatCore[_0x5700f5(0x10d)][_0x5700f5(0x14c)]()[_0x5700f5(0x100)](_0x5a6fb5,_0x32eb94);}static async[_0x5a6461(0x126)](_0x330524,_0x4760bf=0x1){const _0x18bc05=_0x5a6461;return napCatCore[_0x18bc05(0x10d)][_0x18bc05(0x140)]()[_0x18bc05(0x12d)]({'friendUid':_0x330524,'sourceId':0x47,'doLikeCount':_0x4760bf,'doLikeTollCount':0x0});}static async[_0x5a6461(0x13e)](_0x4faa3b){const _0x1c6a11=_0x5a6461,_0x1b05ce=await napCatCore[_0x1c6a11(0x10d)]['getProfileService']()[_0x1c6a11(0x124)](_0x4faa3b);return{'result':_0x1b05ce?.['result'],'errMsg':_0x1b05ce?.['errMsg']};}static async['getSelfInfo'](){}static async[_0x5a6461(0xf8)](_0x3337b1){}static async[_0x5a6461(0xf5)](_0x3bb3a9){const _0x59665b=_0x5a6461,_0x5adfcd={'PiNmA':function(_0x527ebf,_0x126e7b){return _0x527ebf(_0x126e7b);},'PINsI':_0x59665b(0x14b),'jJNkT':function(_0x16b9de,_0x59f8fa){return _0x16b9de===_0x59f8fa;},'caUhC':function(_0x92d49f){return _0x92d49f();},'blQIY':function(_0x510a6e,_0x3339f9,_0x4fcd96){return _0x510a6e(_0x3339f9,_0x4fcd96);}},_0x54ce3f=napCatCore['session'][_0x59665b(0x11d)]();return new Promise((_0x967784,_0x342a18)=>{const _0x404f33=_0x59665b,_0x1070f6={'VqMWh':function(_0x1151af,_0x9efe59){return _0x5adfcd['PiNmA'](_0x1151af,_0x9efe59);},'sYvKu':_0x5adfcd[_0x404f33(0x136)],'gFCNn':function(_0x1098d5,_0x1186b9){return _0x5adfcd['jJNkT'](_0x1098d5,_0x1186b9);},'AwoFK':function(_0x3ff0c1,_0x3e8223){return _0x3ff0c1(_0x3e8223);}},_0x2f0601=_0x5adfcd['caUhC'](randomUUID);let _0x5923ed=![],_0x4ffb10=undefined,_0x57a96d=!![];_0x5adfcd['blQIY'](setTimeout,()=>{const _0x38c7e1=_0x404f33;!_0x5923ed&&(_0x4ffb10?_0x1070f6[_0x38c7e1(0x12a)](_0x967784,_0x4ffb10):_0x1070f6[_0x38c7e1(0x12a)](_0x342a18,_0x1070f6['sYvKu'])),userDetailHandlers[_0x38c7e1(0x154)](_0x2f0601);},0x1388),userDetailHandlers[_0x404f33(0x10b)](_0x2f0601,_0x49c7a4=>{const _0x4535b7=_0x404f33;_0x1070f6[_0x4535b7(0x14d)](_0x49c7a4[_0x4535b7(0x131)],_0x3bb3a9)&&(_0x57a96d?(_0x4ffb10=_0x49c7a4,_0x57a96d=![]):(_0x5923ed=!![],_0x1070f6[_0x4535b7(0x111)](_0x967784,_0x49c7a4)));}),_0x54ce3f[_0x404f33(0x118)](_0x3bb3a9,[0x0])[_0x404f33(0xf9)](_0x5ac670=>{});});}static async[_0x5a6461(0x116)](_0x449a6d){const _0xa56316=_0x5a6461;return napCatCore[_0xa56316(0x10d)][_0xa56316(0x11d)]()[_0xa56316(0x105)](_0x449a6d);}static async[_0x5a6461(0xf6)](_0x17c80a,_0x5470d1=!![]){const _0xc31713=_0x5a6461,_0x55ccb1={'FVwlC':function(_0x43303d,_0x39a4c3){return _0x43303d>_0x39a4c3;},'JGkzI':function(_0x4804cf,_0x62f86b){return _0x4804cf-_0x62f86b;},'drzbk':function(_0xee42a1,_0xca726c){return _0xee42a1*_0xca726c;},'kgSew':function(_0x1fe58a,_0x4634fa){return _0x1fe58a===_0x4634fa;},'cuohP':function(_0x3f637b,_0xeaef67,_0xf14a09){return _0x3f637b(_0xeaef67,_0xf14a09);},'PYLKS':_0xc31713(0x129)},_0x35da4f=[],_0x44918f={};for(const _0x114b5d in _0x17c80a){const _0x1714a6=Credentials[_0xc31713(0x12b)][_0xc31713(0x143)](_0x17c80a[_0x114b5d]),_0x303e59=Credentials['PskeyTime']['get'](_0x17c80a[_0x114b5d]);!_0x1714a6||!_0x303e59||_0x55ccb1[_0xc31713(0x156)](_0x55ccb1[_0xc31713(0x119)](Date['now'](),_0x303e59),_0x55ccb1[_0xc31713(0x102)](0x708,0x3e8))||!_0x5470d1?_0x35da4f[_0xc31713(0x110)](_0x17c80a[_0x114b5d]):_0x44918f[_0x17c80a[_0x114b5d]]=_0x1714a6;}let _0x117c7a={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x55ccb1[_0xc31713(0x156)](_0x35da4f['length'],0x0)&&(_0x117c7a=await napCatCore[_0xc31713(0x10d)][_0xc31713(0x148)]()['getPskey'](_0x35da4f,!![]));const _0x20203b=_0x117c7a[_0xc31713(0x125)];for(const _0x48e7c9 of _0x20203b['entries']()){Credentials[_0xc31713(0x12b)]['set'](_0x48e7c9[0x0],_0x48e7c9[0x1]),Credentials[_0xc31713(0x13d)][_0xc31713(0x10b)](_0x48e7c9[0x0],Date[_0xc31713(0x101)]());}const _0x4c87f7=Object[_0xc31713(0x121)](Object[_0xc31713(0x128)](_0x20203b),_0x44918f);if(_0x55ccb1[_0xc31713(0x138)](_0x117c7a[_0xc31713(0xfd)],0x0))return _0x4c87f7;else _0x55ccb1[_0xc31713(0x10c)](logError,_0x55ccb1['PYLKS'],_0x117c7a[_0xc31713(0x115)]);return{};}static async[_0x5a6461(0xfb)](){const _0x1c3f4c=_0x5a6461,_0x87ec04=await napCatCore['session'][_0x1c3f4c(0x135)]()['getRobotUinRange']({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x87ec04?.[_0x1c3f4c(0x103)]?.[_0x1c3f4c(0x117)];}static async[_0x5a6461(0xfe)](){const _0x7a54a1=_0x5a6461,_0x516562={'sCnyv':function(_0x3e6a9e,_0x3f373d){return _0x3e6a9e+_0x3f373d;},'DIRFX':function(_0x5afd2c,_0x2c7ce1){return _0x5afd2c+_0x2c7ce1;},'mfAuL':_0x7a54a1(0x137),'SxaXr':_0x7a54a1(0x127),'mLizj':_0x7a54a1(0x107),'RopcW':function(_0x3562c3,_0xd1be83,_0xf46f92){return _0x3562c3(_0xd1be83,_0xf46f92);},'QHimw':_0x7a54a1(0x13c)},_0x3337ae=_0x516562[_0x7a54a1(0x13a)](_0x516562[_0x7a54a1(0x13a)](_0x516562['DIRFX'](_0x516562[_0x7a54a1(0x120)](_0x516562[_0x7a54a1(0x120)](_0x516562[_0x7a54a1(0x10e)]+selfInfo[_0x7a54a1(0x146)],_0x7a54a1(0x108)),Credentials['ClientKey']),_0x516562[_0x7a54a1(0x11e)]),selfInfo[_0x7a54a1(0x146)]),_0x516562[_0x7a54a1(0x109)]);let _0x1f90aa={};try{_0x1f90aa=await RequestUtil['HttpsGetCookies'](_0x3337ae);}catch(_0x27dc25){_0x516562[_0x7a54a1(0x10f)](logDebug,_0x516562['QHimw'],_0x27dc25),_0x1f90aa={};}return _0x1f90aa;}static async['getSkey'](_0x3662a0=!![]){const _0x388711=_0x5a6461,_0x52196b={'iVQdq':function(_0x126eae,_0x449a49){return _0x126eae>_0x449a49;},'JdMGR':function(_0x127bce,_0x5e657f){return _0x127bce-_0x5e657f;},'POAGS':function(_0x309e54,_0x4330a9){return _0x309e54*_0x4330a9;},'ypdEm':function(_0x4d2128,_0x150ca1){return _0x4d2128!==_0x150ca1;},'WEdWF':function(_0x490157,_0x9bea30){return _0x490157+_0x9bea30;},'KnXkq':_0x388711(0x137),'ZjDUS':_0x388711(0x108),'IBZQO':_0x388711(0x13b),'twuhJ':'请求获取Skey时失败','VlCGH':_0x388711(0x147)};try{if(Credentials[_0x388711(0x14a)]==0x0||_0x52196b[_0x388711(0x12f)](_0x52196b[_0x388711(0x141)](Date[_0x388711(0x101)](),Credentials[_0x388711(0x14a)]),_0x52196b[_0x388711(0x139)](0x3e8,0xe10))||!_0x3662a0){const _0xa84521=await napCatCore[_0x388711(0x10d)][_0x388711(0x152)]()['forceFetchClientKey']('');if(_0x52196b[_0x388711(0x106)](_0xa84521[_0x388711(0xfd)],0x0))return'';const _0xc93a87=_0xa84521[_0x388711(0x134)],_0x510041=_0xa84521['keyIndex'],_0x2e1fdf=_0x52196b[_0x388711(0x130)](_0x52196b[_0x388711(0x123)]+selfInfo[_0x388711(0x146)]+_0x52196b['ZjDUS']+_0xc93a87,_0x52196b[_0x388711(0x132)])+_0x510041;let _0x3f090a={};try{_0x3f090a=await RequestUtil[_0x388711(0x14f)](_0x2e1fdf);}catch(_0x16bcc6){logDebug(_0x52196b[_0x388711(0x122)],_0x16bcc6),_0x3f090a={};}const _0x935847=_0x3f090a[_0x52196b[_0x388711(0xfc)]];if(!_0x935847)return'';return Credentials[_0x388711(0x12c)]=_0xc93a87,Credentials[_0x388711(0x112)]=_0x510041,Credentials[_0x388711(0x14a)]=Date[_0x388711(0x101)](),Credentials['Skey']=_0x935847,_0x935847;}return Credentials['Skey'];}catch(_0xd739c2){}return undefined;}static async['getUidByUin'](_0x2a6de3){const _0x5c8dd6=_0x5a6461,_0x1d346b={'dfnWn':_0x5c8dd6(0x11f)};let _0x291864=await NTEventDispatch[_0x5c8dd6(0xff)](_0x1d346b[_0x5c8dd6(0x12e)],0x1388,[_0x2a6de3]);return _0x291864['uidInfo'][_0x5c8dd6(0x143)](_0x2a6de3);}static async['getUinByUid'](_0x3fe548){const _0x1ee15d=_0x5a6461;if(!_0x3fe548)return'';let _0x1f824b=await NTEventDispatch[_0x1ee15d(0xff)]('NodeIKernelUixConvertService/getUin',0x1388,[_0x3fe548]);return _0x1f824b[_0x1ee15d(0x11c)][_0x1ee15d(0x143)](_0x3fe548);}static async[_0x5a6461(0x113)](_0x31b0fd){const _0x2ab69e=_0x5a6461,_0x5ba3cf={'lYVZU':_0x2ab69e(0x114)};return NTEventDispatch[_0x2ab69e(0xff)](_0x5ba3cf['lYVZU'],0x1388,_0x31b0fd);}}function _0x5f81(_0x58fed5,_0x59d7cc){const _0x4930f0=_0x4930();return _0x5f81=function(_0x5f815f,_0x437713){_0x5f815f=_0x5f815f-0xf5;let _0x3c2f5a=_0x4930f0[_0x5f815f];return _0x3c2f5a;},_0x5f81(_0x58fed5,_0x59d7cc);}function _0x4930(){const _0x34a62f=['PINsI','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','kgSew','POAGS','sCnyv','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','请求获取Cookies时失败','PskeyTime','setQQAvatar','onLoginSuccess','getProfileLikeService','JdMGR','1614InJyiq','get','47898BHZlPu','setLongNick','uin','skey','getTipOffService','623600UQdcEI','CreatTime','getUserDetailInfo\x20timeout','getBuddyService','gFCNn','1gysYgO','HttpsGetCookies','forEach','getMsgService','getTicketService','addListener','delete','2108448AYHIjp','FVwlC','getUserDetailInfo','getPSkey','onProfileDetailInfoChanged','getUserInfo','then','1961118zAWwLo','getRobotUinRange','VlCGH','result','getQzoneCookies','CallNoListenerEvent','getBuddyRecommendContactArkJson','now','drzbk','response','322996BDFSHk','modifyDesktopMiniProfile','ypdEm','%2Finfocenter&keyindex=19%27','&clientkey=','mLizj','270430PLSpWv','set','cuohP','session','mfAuL','RopcW','push','AwoFK','KeyIndex','getUserDetailInfoByUin','NodeIKernelProfileService/getUserDetailInfoByUin','errMsg','modifySelfProfile','robotUinRanges','getUserDetailInfoWithBizInfo','JGkzI','308WqPLxh','setStatus','uinInfo','getProfileService','SxaXr','NodeIKernelUixConvertService/getUid','DIRFX','assign','twuhJ','KnXkq','setHeader','domainPskeyMap','like','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','fromEntries','获取Pskey失败','VqMWh','PskeyData','ClientKey','setBuddyProfileLike','dfnWn','iVQdq','WEdWF','uid','IBZQO','setSelfOnlineStatus','clientKey','getRobotService'];_0x4930=function(){return _0x34a62f;};return _0x4930();}