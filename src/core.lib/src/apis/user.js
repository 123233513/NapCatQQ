const _0x475216=_0x5932;(function(_0x2fedfe,_0x1ed7ed){const _0x3e7e40=_0x5932,_0x4cbde5=_0x2fedfe();while(!![]){try{const _0x2f6220=parseInt(_0x3e7e40(0xcb))/0x1*(-parseInt(_0x3e7e40(0xc8))/0x2)+parseInt(_0x3e7e40(0xab))/0x3*(parseInt(_0x3e7e40(0xac))/0x4)+parseInt(_0x3e7e40(0xcc))/0x5*(-parseInt(_0x3e7e40(0xc0))/0x6)+-parseInt(_0x3e7e40(0xaf))/0x7*(-parseInt(_0x3e7e40(0xc2))/0x8)+parseInt(_0x3e7e40(0xd2))/0x9+-parseInt(_0x3e7e40(0xdd))/0xa+parseInt(_0x3e7e40(0xc3))/0xb;if(_0x2f6220===_0x1ed7ed)break;else _0x4cbde5['push'](_0x4cbde5['shift']());}catch(_0x3795b9){_0x4cbde5['push'](_0x4cbde5['shift']());}}}(_0x583a,0x52500));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';function _0x5932(_0x14b1b8,_0x49ad00){const _0x583a1c=_0x583a();return _0x5932=function(_0x593228,_0x981f26){_0x593228=_0x593228-0xa6;let _0x2b4ae5=_0x583a1c[_0x593228];return _0x2b4ae5;},_0x5932(_0x14b1b8,_0x49ad00);}import{ProfileListener}from'@/core/listeners';function _0x583a(){const _0x3c5133=['push','mTjiX','getSelfInfo','获取Pskey失败','hOQxn','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','PskeyData','addListener','tMAZy','getRobotUinRange','like','fromEntries','oCDaR','RFMTA','237BsajkM','9788pOYuYu','then','getUserDetailInfo','36239GUrDAN','getRobotService','getTipOffService','CreatTime','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','uid','result','getTicketService','clientKey','PskeyTime','OpkUY','uin','SLOQm','delete','now','Skey','COlWT','82506DKhKCT','forceFetchClientKey','784AWHvOz','5046261pKCVJQ','cWxTB','&clientkey=','set','getProfileLikeService','170952XMYmPT','getUserInfo','setHeader','1apmbme','135MPgoBy','forEach','BepMz','qTPED','lEcyX','robotUinRanges','651600YOVyWd','session','mQrhj','assign','getSkey','response','get','errMsg','getProfileService','getUserDetailInfo\x20timeout','请求获取Skey时失败','4379050ODHQFn','entries','domainPskeyMap'];_0x583a=function(){return _0x3c5133;};return _0x583a();}import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener['onProfileDetailInfoChanged']=_0x2b531a=>{const _0x51944e=_0x5932;userInfoCache[_0x2b531a[_0x51944e(0xb4)]]=_0x2b531a,userDetailHandlers[_0x51944e(0xcd)](_0x5ade55=>_0x5ade55(_0x2b531a));},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x10bc60=_0x5932;napCatCore[_0x10bc60(0xe7)](profileListener);});},0x64);export class NTQQUserApi{static async['setSelfOnlineStatus'](_0x68b1ef,_0x3cd96e,_0x3d574d){const _0x155ed4=_0x5932;return napCatCore[_0x155ed4(0xd3)]['getMsgService']()['setStatus']({'status':_0x68b1ef,'extStatus':_0x3cd96e,'batteryStatus':_0x3d574d});}static async[_0x475216(0xa7)](_0x21a0e9,_0x1b6dfc=0x1){const _0x116880=_0x475216;return napCatCore['session'][_0x116880(0xc7)]()['setBuddyProfileLike']({'friendUid':_0x21a0e9,'sourceId':0x47,'doLikeCount':_0x1b6dfc,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x7f6bf6){const _0x46a794=_0x475216,_0x558c25=napCatCore[_0x46a794(0xd3)][_0x46a794(0xda)]()[_0x46a794(0xca)](_0x7f6bf6);return{'result':_0x558c25?.['result'],'errMsg':_0x558c25?.[_0x46a794(0xd9)]};}static async[_0x475216(0xe2)](){}static async[_0x475216(0xc9)](_0x45cf2a){}static async[_0x475216(0xae)](_0x1d55d8){const _0x130ffd=_0x475216,_0x5eb347={'mQrhj':function(_0x202595,_0x29bcb3){return _0x202595(_0x29bcb3);},'dkzDj':_0x130ffd(0xdb),'SLOQm':function(_0x4ff6c0,_0x101c24,_0x402447){return _0x4ff6c0(_0x101c24,_0x402447);}},_0x72494d=napCatCore['session'][_0x130ffd(0xda)]();return new Promise((_0x364b62,_0x5f04e5)=>{const _0x3df061=_0x130ffd,_0x3af044={'RFMTA':_0x5eb347['dkzDj']},_0x1d94c1=randomUUID();let _0xf88050=![],_0x4da13f=!![];_0x5eb347[_0x3df061(0xbb)](setTimeout,()=>{const _0xa4b76=_0x3df061;!_0xf88050&&_0x5f04e5(_0x3af044[_0xa4b76(0xaa)]),userDetailHandlers[_0xa4b76(0xbc)](_0x1d94c1);},0x1388),userDetailHandlers['set'](_0x1d94c1,_0x2e369e=>{const _0xc35d13=_0x3df061;_0x2e369e[_0xc35d13(0xb4)]===_0x1d55d8&&(_0x4da13f?_0x4da13f=![]:(_0xf88050=!![],uid2UinMap[_0x1d55d8]=_0x2e369e['uin'],_0x5eb347[_0xc35d13(0xd4)](_0x364b62,_0x2e369e)));}),_0x72494d['getUserDetailInfoWithBizInfo'](_0x1d55d8,[0x0])[_0x3df061(0xad)](_0x8072fa=>{});});}static async['getPSkey'](_0x12171d,_0xa0027e=!![]){const _0x49a080=_0x475216,_0x13fb15={'bAYZP':function(_0x1c365,_0x11621e){return _0x1c365||_0x11621e;},'lEcyX':function(_0x5b4a48,_0x1eb397){return _0x5b4a48>_0x1eb397;},'OpkUY':function(_0x4b2bba,_0x40966a){return _0x4b2bba*_0x40966a;},'mTjiX':function(_0x580c63,_0x102582){return _0x580c63===_0x102582;},'COlWT':function(_0x49c1a4,_0x3490d3,_0xa4b674){return _0x49c1a4(_0x3490d3,_0xa4b674);},'MZkwr':_0x49a080(0xe3)},_0x3bf338=[],_0x3de78d={};for(const _0x3f56d5 in _0x12171d){const _0x388cf6=Credentials['PskeyData'][_0x49a080(0xd8)](_0x12171d[_0x3f56d5]),_0x213e92=Credentials[_0x49a080(0xb8)][_0x49a080(0xd8)](_0x12171d[_0x3f56d5]);_0x13fb15['bAYZP'](!_0x388cf6,!_0x213e92)||_0x13fb15[_0x49a080(0xd0)](Date[_0x49a080(0xbd)]()-_0x213e92,_0x13fb15[_0x49a080(0xb9)](0x708,0x3e8))||!_0xa0027e?_0x3bf338[_0x49a080(0xe0)](_0x12171d[_0x3f56d5]):_0x3de78d[_0x12171d[_0x3f56d5]]=_0x388cf6;}let _0x4d077d={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x13fb15['lEcyX'](_0x3bf338['length'],0x0)&&(_0x4d077d=await napCatCore['session'][_0x49a080(0xb1)]()['getPskey'](_0x3bf338,!![]));const _0x3fa3ef=_0x4d077d[_0x49a080(0xdf)];for(const _0x3f02ec of _0x3fa3ef[_0x49a080(0xde)]()){Credentials[_0x49a080(0xe6)][_0x49a080(0xc6)](_0x3f02ec[0x0],_0x3f02ec[0x1]),Credentials[_0x49a080(0xb8)]['set'](_0x3f02ec[0x0],Date['now']());}const _0x5a44d5=Object[_0x49a080(0xd5)](Object[_0x49a080(0xa8)](_0x3fa3ef),_0x3de78d);if(_0x13fb15[_0x49a080(0xe1)](_0x4d077d['result'],0x0))return _0x5a44d5;else _0x13fb15[_0x49a080(0xbf)](logError,_0x13fb15['MZkwr'],_0x4d077d[_0x49a080(0xd9)]);return{};}static async['getRobotUinRange'](){const _0x3f9114=_0x475216,_0x2f9c9b=await napCatCore[_0x3f9114(0xd3)][_0x3f9114(0xb0)]()[_0x3f9114(0xa6)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x2f9c9b?.[_0x3f9114(0xd7)]?.[_0x3f9114(0xd1)];}static async[_0x475216(0xd6)](_0x26eabf=!![]){const _0x352c8d=_0x475216,_0x191f75={'qTPED':function(_0x2e85cb,_0x219131){return _0x2e85cb==_0x219131;},'YeEmI':function(_0xb23eb9,_0x40c054){return _0xb23eb9-_0x40c054;},'oCDaR':function(_0x27c287,_0x52d275){return _0x27c287!==_0x52d275;},'mTxCs':function(_0x19dbb6,_0x245dc0){return _0x19dbb6+_0x245dc0;},'tMAZy':function(_0xa1fff1,_0x548885){return _0xa1fff1+_0x548885;},'slIOv':_0x352c8d(0xc5),'hOQxn':_0x352c8d(0xb3),'cWxTB':function(_0x362dff,_0x34da0d,_0x901697){return _0x362dff(_0x34da0d,_0x901697);},'BepMz':_0x352c8d(0xdc),'fmjEY':'skey'};try{if(_0x191f75[_0x352c8d(0xcf)](Credentials['CreatTime'],0x0)||_0x191f75['YeEmI'](Date[_0x352c8d(0xbd)](),Credentials[_0x352c8d(0xb2)])>0x3e8*0xe10||!_0x26eabf){const _0x2c0ff8=await napCatCore[_0x352c8d(0xd3)][_0x352c8d(0xb6)]()[_0x352c8d(0xc1)]('');if(_0x191f75[_0x352c8d(0xa9)](_0x2c0ff8[_0x352c8d(0xb5)],0x0))return'';const _0x729800=_0x2c0ff8[_0x352c8d(0xb7)],_0x3d91ce=_0x2c0ff8['keyIndex'],_0x957be1=_0x191f75['mTxCs'](_0x191f75['mTxCs'](_0x191f75[_0x352c8d(0xe8)](_0x191f75[_0x352c8d(0xe8)](_0x352c8d(0xe5)+selfInfo[_0x352c8d(0xba)],_0x191f75['slIOv']),_0x729800),_0x191f75[_0x352c8d(0xe4)]),_0x3d91ce);let _0x5f54f4;try{_0x5f54f4=await RequestUtil['HttpsGetCookies'](_0x957be1);}catch(_0x5c6798){_0x191f75[_0x352c8d(0xc4)](logDebug,_0x191f75[_0x352c8d(0xce)],_0x5c6798),_0x5f54f4=new Map();}const _0x598f60=_0x5f54f4[_0x352c8d(0xd8)](_0x191f75['fmjEY']);if(!_0x598f60)return'';return Credentials[_0x352c8d(0xb2)]=Date['now'](),Credentials[_0x352c8d(0xbe)]=_0x598f60,_0x598f60;}return Credentials[_0x352c8d(0xbe)];}catch(_0x23b572){}return undefined;}}