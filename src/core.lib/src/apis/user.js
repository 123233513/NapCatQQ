const _0x43fba0=_0x30de;(function(_0x1ac75a,_0x16ab3c){const _0x2927ea=_0x30de,_0x590401=_0x1ac75a();while(!![]){try{const _0x5056e4=parseInt(_0x2927ea(0x9a))/0x1+parseInt(_0x2927ea(0xa7))/0x2*(-parseInt(_0x2927ea(0x98))/0x3)+-parseInt(_0x2927ea(0xbd))/0x4+-parseInt(_0x2927ea(0x90))/0x5*(-parseInt(_0x2927ea(0xa6))/0x6)+parseInt(_0x2927ea(0xc9))/0x7+-parseInt(_0x2927ea(0xc5))/0x8+parseInt(_0x2927ea(0x8b))/0x9;if(_0x5056e4===_0x16ab3c)break;else _0x590401['push'](_0x590401['shift']());}catch(_0x2a4abd){_0x590401['push'](_0x590401['shift']());}}}(_0x3ef1,0xde039));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';function _0x3ef1(){const _0x266d67=['getMsgService','length','forEach','3420KfpLqI','2JRazWf','onProfileDetailInfoChanged','mZhcH','setStatus','robotUinRanges','entries','session','dpPDv','vVCJv','CreatTime','uid','JtvWt','VEhnt','assign','PskeyTime','HttpsGetCookies','getTicketService','请求获取Skey时失败','setBuddyProfileLike','dQfmK','iDYzJ','now','2344232ZaOrDs','bojOx','onLoginSuccess','result','ZYbRw','response','getPSkey','setHeader','3704696oLaUNY','aZTHk','PSuff','OfMVv','8231979FUjFDY','wtvfS','get','fromEntries','getProfileLikeService','7096716YDITqE','forceFetchClientKey','getProfileService','clientKey','XJbeV','4630ZYbhLW','OGruZ','PskeyData','uin','&clientkey=','set','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','getRobotUinRange','3798891ylUdBi','Skey','732470uqAscu','delete','setSelfOnlineStatus','errMsg','ChtRM','push','getSelfInfo','kTXGC','keyIndex'];_0x3ef1=function(){return _0x266d67;};return _0x3ef1();}function _0x30de(_0x7cef7c,_0xb4b146){const _0x3ef10f=_0x3ef1();return _0x30de=function(_0x30de34,_0x596e34){_0x30de34=_0x30de34-0x8a;let _0x436e04=_0x3ef10f[_0x30de34];return _0x436e04;},_0x30de(_0x7cef7c,_0xb4b146);}import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x43fba0(0xa8)]=_0x4feee3=>{const _0x355437=_0x43fba0;userInfoCache[_0x4feee3[_0x355437(0xb1)]]=_0x4feee3,userDetailHandlers[_0x355437(0xa5)](_0x269934=>_0x269934(_0x4feee3));},setTimeout(()=>{const _0x10cfd8=_0x43fba0;napCatCore[_0x10cfd8(0xbf)](()=>{napCatCore['addListener'](profileListener);});},0x64);export class NTQQUserApi{static async[_0x43fba0(0x9c)](_0x1c2b4c,_0x194bd6,_0x5a6fdb){const _0x345023=_0x43fba0;return napCatCore[_0x345023(0xad)][_0x345023(0xa3)]()[_0x345023(0xaa)]({'status':_0x1c2b4c,'extStatus':_0x194bd6,'batteryStatus':_0x5a6fdb});}static async['like'](_0x55f267,_0x5aeec9=0x1){const _0x38d5e9=_0x43fba0;return napCatCore[_0x38d5e9(0xad)][_0x38d5e9(0x8a)]()[_0x38d5e9(0xb9)]({'friendUid':_0x55f267,'sourceId':0x47,'doLikeCount':_0x5aeec9,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x50f180){const _0x10fe0a=_0x43fba0,_0x3cc5c2=napCatCore['session'][_0x10fe0a(0x8d)]()[_0x10fe0a(0xc4)](_0x50f180);return{'result':_0x3cc5c2?.[_0x10fe0a(0xc0)],'errMsg':_0x3cc5c2?.['errMsg']};}static async[_0x43fba0(0xa0)](){}static async['getUserInfo'](_0x2e83ca){}static async['getUserDetailInfo'](_0x560d36){const _0x4172b9=_0x43fba0,_0x1e18c6={'mZhcH':function(_0x87b405,_0x1ffd52){return _0x87b405(_0x1ffd52);},'aZTHk':function(_0x5fccb1,_0x28630f){return _0x5fccb1===_0x28630f;},'vVCJv':function(_0x243e8e,_0x387fac,_0x4678d2){return _0x243e8e(_0x387fac,_0x4678d2);}},_0x52a0e4=napCatCore[_0x4172b9(0xad)]['getProfileService']();return new Promise((_0x184904,_0x5526ae)=>{const _0x4cef5d=_0x4172b9,_0x584baf={'jdYlz':function(_0x4fc7a9,_0x2ba01c){return _0x1e18c6['mZhcH'](_0x4fc7a9,_0x2ba01c);},'dQfmK':'getUserDetailInfo\x20timeout','JtvWt':function(_0x89cc6d,_0x3ac12f){const _0x4061fa=_0x30de;return _0x1e18c6[_0x4061fa(0xc6)](_0x89cc6d,_0x3ac12f);},'kTXGC':function(_0x5b6772,_0xabbb2e){const _0x4f47ac=_0x30de;return _0x1e18c6[_0x4f47ac(0xa9)](_0x5b6772,_0xabbb2e);}},_0x357bb5=randomUUID();let _0x52f592=![];_0x1e18c6[_0x4cef5d(0xaf)](setTimeout,()=>{const _0x24edda=_0x4cef5d;!_0x52f592&&_0x584baf['jdYlz'](_0x5526ae,_0x584baf[_0x24edda(0xba)]);},0x1388),userDetailHandlers[_0x4cef5d(0x95)](_0x357bb5,_0x1793c3=>{const _0x14effb=_0x4cef5d;_0x584baf[_0x14effb(0xb2)](_0x1793c3[_0x14effb(0xb1)],_0x560d36)&&(_0x52f592=!![],userDetailHandlers[_0x14effb(0x9b)](_0x357bb5),uid2UinMap[_0x560d36]=_0x1793c3[_0x14effb(0x93)],_0x584baf[_0x14effb(0xa1)](_0x184904,_0x1793c3));}),_0x52a0e4['getUserDetailInfoWithBizInfo'](_0x560d36,[0x0])['then'](_0x6e4ae1=>{});});}static async[_0x43fba0(0xc3)](_0x5b2343,_0x3455b4=!![]){const _0x41d10e=_0x43fba0,_0x3c1913={'ChtRM':function(_0x20f2e2,_0x4e5539){return _0x20f2e2||_0x4e5539;},'OGruZ':function(_0x24f661,_0x31852d){return _0x24f661>_0x31852d;},'wtvfS':function(_0x3a3e6d,_0x18ec68){return _0x3a3e6d*_0x18ec68;},'ZYbRw':function(_0x42679a,_0x1935dc){return _0x42679a===_0x1935dc;},'RhOgF':function(_0x464f23,_0x1384a8,_0x33e889){return _0x464f23(_0x1384a8,_0x33e889);}},_0x5ad618=[],_0x53452a={};for(const _0x2b1855 in _0x5b2343){const _0xe0f1b9=Credentials['PskeyData']['get'](_0x5b2343[_0x2b1855]),_0x71b9e6=Credentials['PskeyTime']['get'](_0x5b2343[_0x2b1855]);_0x3c1913[_0x41d10e(0x9e)](!_0xe0f1b9,!_0x71b9e6)||_0x3c1913[_0x41d10e(0x91)](Date[_0x41d10e(0xbc)]()-_0x71b9e6,_0x3c1913[_0x41d10e(0xca)](0x708,0x3e8))||!_0x3455b4?_0x5ad618[_0x41d10e(0x9f)](_0x5b2343[_0x2b1855]):_0x53452a[_0x5b2343[_0x2b1855]]=_0xe0f1b9;}let _0x22117c={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x5ad618[_0x41d10e(0xa4)]>0x0&&(_0x22117c=await napCatCore[_0x41d10e(0xad)]['getTipOffService']()['getPskey'](_0x5ad618,!![]));const _0xd789ad=_0x22117c['domainPskeyMap'];for(const _0x185e74 of _0xd789ad[_0x41d10e(0xac)]()){Credentials[_0x41d10e(0x92)][_0x41d10e(0x95)](_0x185e74[0x0],_0x185e74[0x1]),Credentials[_0x41d10e(0xb5)]['set'](_0x185e74[0x0],Date['now']());}const _0x3ecd26=Object[_0x41d10e(0xb4)](Object[_0x41d10e(0xcc)](_0xd789ad),_0x53452a);if(_0x3c1913[_0x41d10e(0xc1)](_0x22117c[_0x41d10e(0xc0)],0x0))return _0x3ecd26;else _0x3c1913['RhOgF'](logError,'获取Pskey失败',_0x22117c[_0x41d10e(0x9d)]);return{};}static async['getRobotUinRange'](){const _0x3335a0=_0x43fba0,_0x2cf9c5=await napCatCore[_0x3335a0(0xad)]['getRobotService']()[_0x3335a0(0x97)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x2cf9c5?.[_0x3335a0(0xc2)]?.[_0x3335a0(0xab)];}static async['getSkey'](_0x4481f9=!![]){const _0x4a6a92=_0x43fba0,_0x5e6069={'nDBro':function(_0x2b7bd8,_0x14745e){return _0x2b7bd8==_0x14745e;},'iDYzJ':function(_0x444fb5,_0x448a4b){return _0x444fb5-_0x448a4b;},'vdjcs':function(_0x301880,_0x2127d1){return _0x301880!==_0x2127d1;},'OfMVv':function(_0x1141ef,_0x18c063){return _0x1141ef+_0x18c063;},'XJbeV':function(_0x5e4772,_0x4686cf){return _0x5e4772+_0x4686cf;},'ccfkX':_0x4a6a92(0x94),'dpPDv':_0x4a6a92(0x96),'VEhnt':function(_0x10a123,_0x1fd351,_0x3d5e58){return _0x10a123(_0x1fd351,_0x3d5e58);},'PSuff':_0x4a6a92(0xb8),'bojOx':'skey'};try{if(_0x5e6069['nDBro'](Credentials[_0x4a6a92(0xb0)],0x0)||_0x5e6069[_0x4a6a92(0xbb)](Date['now'](),Credentials[_0x4a6a92(0xb0)])>0x3e8*0xe10||!_0x4481f9){const _0x5cec32=await napCatCore[_0x4a6a92(0xad)][_0x4a6a92(0xb7)]()[_0x4a6a92(0x8c)]('');if(_0x5e6069['vdjcs'](_0x5cec32[_0x4a6a92(0xc0)],0x0))return'';const _0x429793=_0x5cec32[_0x4a6a92(0x8e)],_0x11c3d5=_0x5cec32[_0x4a6a92(0xa2)],_0x3a7ba9=_0x5e6069[_0x4a6a92(0xc8)](_0x5e6069[_0x4a6a92(0x8f)](_0x5e6069[_0x4a6a92(0x8f)](_0x5e6069['XJbeV']('https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin='+selfInfo[_0x4a6a92(0x93)],_0x5e6069['ccfkX']),_0x429793),_0x5e6069[_0x4a6a92(0xae)]),_0x11c3d5);let _0x1b2bb3;try{_0x1b2bb3=await RequestUtil[_0x4a6a92(0xb6)](_0x3a7ba9);}catch(_0x3dde8b){_0x5e6069[_0x4a6a92(0xb3)](logDebug,_0x5e6069[_0x4a6a92(0xc7)],_0x3dde8b),_0x1b2bb3=new Map();}const _0x52866b=_0x1b2bb3[_0x4a6a92(0xcb)](_0x5e6069[_0x4a6a92(0xbe)]);if(!_0x52866b)return'';return Credentials[_0x4a6a92(0xb0)]=Date[_0x4a6a92(0xbc)](),Credentials[_0x4a6a92(0x99)]=_0x52866b,_0x52866b;}return Credentials['Skey'];}catch(_0x35bbfc){}return undefined;}}