const _0x1857d8=_0x5e13;function _0x5e13(_0x2ad749,_0x218f55){const _0xfd4175=_0xfd41();return _0x5e13=function(_0x5e137d,_0x4be1f7){_0x5e137d=_0x5e137d-0x162;let _0x2ef9b4=_0xfd4175[_0x5e137d];return _0x2ef9b4;},_0x5e13(_0x2ad749,_0x218f55);}(function(_0x4d1711,_0x20fdd6){const _0x19e5e3=_0x5e13,_0x18cba6=_0x4d1711();while(!![]){try{const _0x2a8c79=-parseInt(_0x19e5e3(0x1ac))/0x1*(-parseInt(_0x19e5e3(0x175))/0x2)+-parseInt(_0x19e5e3(0x198))/0x3+parseInt(_0x19e5e3(0x1b9))/0x4+-parseInt(_0x19e5e3(0x195))/0x5*(-parseInt(_0x19e5e3(0x186))/0x6)+parseInt(_0x19e5e3(0x199))/0x7+-parseInt(_0x19e5e3(0x16f))/0x8*(-parseInt(_0x19e5e3(0x1b2))/0x9)+-parseInt(_0x19e5e3(0x179))/0xa;if(_0x2a8c79===_0x20fdd6)break;else _0x18cba6['push'](_0x18cba6['shift']());}catch(_0x572307){_0x18cba6['push'](_0x18cba6['shift']());}}}(_0xfd41,0x1e6fe));import{Credentials,selfInfo}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';import{NTEventDispatch}from'@/common/utils/EventTask';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x1857d8(0x18d)]=_0x4f0ba5=>{const _0x9145f1=_0x1857d8;userInfoCache[_0x4f0ba5[_0x9145f1(0x177)]]=_0x4f0ba5,userDetailHandlers[_0x9145f1(0x18e)](_0xa4a5de=>_0xa4a5de(_0x4f0ba5));},setTimeout(()=>{const _0x5f0831=_0x1857d8;napCatCore[_0x5f0831(0x19a)](()=>{const _0x3cc786=_0x5f0831;napCatCore[_0x3cc786(0x18c)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x1857d8(0x16b)](_0x4c0e81,_0x4df6eb,_0x52402d){const _0x3179c3=_0x1857d8;return napCatCore['session']['getMsgService']()[_0x3179c3(0x1b8)]({'status':_0x4c0e81,'extStatus':_0x4df6eb,'batteryStatus':_0x52402d});}static async[_0x1857d8(0x1a1)](_0x5a5db2,_0xb99771=0x1){const _0xc429e7=_0x1857d8;return napCatCore[_0xc429e7(0x183)][_0xc429e7(0x188)]()[_0xc429e7(0x192)]({'friendUid':_0x5a5db2,'sourceId':0x47,'doLikeCount':_0xb99771,'doLikeTollCount':0x0});}static async[_0x1857d8(0x19c)](_0x397f1a){const _0x5a2f76=_0x1857d8,_0x4085ea=napCatCore[_0x5a2f76(0x183)][_0x5a2f76(0x1a9)]()['setHeader'](_0x397f1a);return{'result':_0x4085ea?.[_0x5a2f76(0x1a3)],'errMsg':_0x4085ea?.[_0x5a2f76(0x191)]};}static async[_0x1857d8(0x165)](){}static async[_0x1857d8(0x17c)](_0x515693){}static async['getUserDetailInfo'](_0x404fa5){const _0x2253f3=_0x1857d8,_0xa70efa={'jWAbL':function(_0x1728e7,_0x5f314c){return _0x1728e7(_0x5f314c);},'AkHYv':function(_0xb5cec,_0xdaf15b){return _0xb5cec(_0xdaf15b);},'pASIn':'getUserDetailInfo\x20timeout','yvHnr':function(_0x46ca32){return _0x46ca32();},'ILSrJ':function(_0x52bebf,_0xa793fc,_0x59dd1d){return _0x52bebf(_0xa793fc,_0x59dd1d);}},_0x3fbc73=napCatCore[_0x2253f3(0x183)][_0x2253f3(0x1a9)]();return new Promise((_0xbc474,_0x5be069)=>{const _0x2919dc=_0x2253f3,_0x49e0f3=_0xa70efa[_0x2919dc(0x196)](randomUUID);let _0x523c2e=![],_0x19fd7a=undefined,_0x1bc5c3=!![];_0xa70efa[_0x2919dc(0x19d)](setTimeout,()=>{const _0x3afb73=_0x2919dc;!_0x523c2e&&(_0x19fd7a?_0xa70efa[_0x3afb73(0x18f)](_0xbc474,_0x19fd7a):_0xa70efa[_0x3afb73(0x169)](_0x5be069,_0xa70efa[_0x3afb73(0x163)])),userDetailHandlers[_0x3afb73(0x1a2)](_0x49e0f3);},0x1388),userDetailHandlers[_0x2919dc(0x178)](_0x49e0f3,_0x559b27=>{const _0x460383=_0x2919dc;_0x559b27[_0x460383(0x177)]===_0x404fa5&&(_0x1bc5c3?(_0x19fd7a=_0x559b27,_0x1bc5c3=![]):(_0x523c2e=!![],_0xa70efa[_0x460383(0x169)](_0xbc474,_0x559b27)));}),_0x3fbc73[_0x2919dc(0x1b4)](_0x404fa5,[0x0])[_0x2919dc(0x166)](_0x1be965=>{});});}static async[_0x1857d8(0x17b)](_0x4f515b){const _0x502359=_0x1857d8;return napCatCore[_0x502359(0x183)][_0x502359(0x1a9)]()[_0x502359(0x19b)](_0x4f515b);}static async[_0x1857d8(0x17a)](_0x22c5f8,_0x4c6f53=!![]){const _0x37ca3d=_0x1857d8,_0xa21511={'fknPJ':function(_0x4bdcc1,_0x5be482){return _0x4bdcc1||_0x5be482;},'ziVvt':function(_0x277db0,_0x4f7cfc){return _0x277db0>_0x4f7cfc;},'gWFvI':function(_0x117f0c,_0x4d043b){return _0x117f0c-_0x4d043b;},'RPGRu':function(_0x22e649,_0xe2cd9f,_0x2a80f0){return _0x22e649(_0xe2cd9f,_0x2a80f0);},'xkJzG':_0x37ca3d(0x1bb)},_0x36f8ac=[],_0x4758ec={};for(const _0xd7bc27 in _0x22c5f8){const _0x1eacfd=Credentials[_0x37ca3d(0x1a8)]['get'](_0x22c5f8[_0xd7bc27]),_0x407822=Credentials['PskeyTime'][_0x37ca3d(0x1af)](_0x22c5f8[_0xd7bc27]);_0xa21511[_0x37ca3d(0x1a7)](!_0x1eacfd,!_0x407822)||_0xa21511[_0x37ca3d(0x1b1)](_0xa21511[_0x37ca3d(0x167)](Date[_0x37ca3d(0x16a)](),_0x407822),0x708*0x3e8)||!_0x4c6f53?_0x36f8ac[_0x37ca3d(0x1ab)](_0x22c5f8[_0xd7bc27]):_0x4758ec[_0x22c5f8[_0xd7bc27]]=_0x1eacfd;}let _0x2d4b52={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0xa21511[_0x37ca3d(0x1b1)](_0x36f8ac[_0x37ca3d(0x193)],0x0)&&(_0x2d4b52=await napCatCore[_0x37ca3d(0x183)][_0x37ca3d(0x176)]()[_0x37ca3d(0x1ad)](_0x36f8ac,!![]));const _0x5c40bf=_0x2d4b52['domainPskeyMap'];for(const _0x1cd85d of _0x5c40bf[_0x37ca3d(0x1a0)]()){Credentials[_0x37ca3d(0x1a8)]['set'](_0x1cd85d[0x0],_0x1cd85d[0x1]),Credentials[_0x37ca3d(0x18a)][_0x37ca3d(0x178)](_0x1cd85d[0x0],Date[_0x37ca3d(0x16a)]());}const _0x4cc7af=Object[_0x37ca3d(0x1b5)](Object[_0x37ca3d(0x17f)](_0x5c40bf),_0x4758ec);if(_0x2d4b52[_0x37ca3d(0x1a3)]===0x0)return _0x4cc7af;else _0xa21511['RPGRu'](logError,_0xa21511['xkJzG'],_0x2d4b52['errMsg']);return{};}static async[_0x1857d8(0x184)](){const _0xbfe1a9=_0x1857d8,_0x5cb170=await napCatCore[_0xbfe1a9(0x183)][_0xbfe1a9(0x1b7)]()[_0xbfe1a9(0x184)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x5cb170?.[_0xbfe1a9(0x189)]?.[_0xbfe1a9(0x1ae)];}static async[_0x1857d8(0x18b)](){const _0x3c640d=_0x1857d8,_0x47e8e4={'maUnx':function(_0x8dd9de,_0x5b73d2){return _0x8dd9de+_0x5b73d2;},'ePbFx':function(_0x4e05b8,_0x22565c){return _0x4e05b8+_0x22565c;},'VtXhN':function(_0x41d670,_0x4a4363){return _0x41d670+_0x4a4363;},'hFWMW':function(_0x478630,_0x1061d0){return _0x478630+_0x1061d0;},'EVjTf':function(_0x2e954b,_0x524daf){return _0x2e954b+_0x524daf;},'cGREX':_0x3c640d(0x170),'IESrl':_0x3c640d(0x1ba),'wMrLQ':_0x3c640d(0x19e),'TTPqE':_0x3c640d(0x1aa)},_0x1fd6a0=_0x47e8e4['maUnx'](_0x47e8e4[_0x3c640d(0x172)](_0x47e8e4[_0x3c640d(0x173)](_0x47e8e4['hFWMW'](_0x47e8e4[_0x3c640d(0x1be)](_0x47e8e4[_0x3c640d(0x1be)](_0x47e8e4['cGREX'],selfInfo[_0x3c640d(0x180)]),_0x47e8e4[_0x3c640d(0x16d)]),Credentials['ClientKey']),_0x47e8e4[_0x3c640d(0x190)]),selfInfo[_0x3c640d(0x180)]),'%2Finfocenter&keyindex=19%27');let _0x2e35c8={};try{_0x2e35c8=await RequestUtil[_0x3c640d(0x164)](_0x1fd6a0);}catch(_0x339d8a){logDebug(_0x47e8e4[_0x3c640d(0x17e)],_0x339d8a),_0x2e35c8={};}return _0x2e35c8;}static async[_0x1857d8(0x1a4)](_0x4ed638=!![]){const _0x55c01f=_0x1857d8,_0x4628bb={'mBOzr':function(_0x446f6c,_0xc6f9ff){return _0x446f6c>_0xc6f9ff;},'tlvKe':function(_0x2df31e,_0xe59462){return _0x2df31e-_0xe59462;},'ZuaDb':function(_0x13b7cd,_0x29e1d4){return _0x13b7cd*_0x29e1d4;},'FJYcb':function(_0x37a82,_0x12fca0){return _0x37a82!==_0x12fca0;},'uJizO':function(_0x2b9949,_0x3b3302){return _0x2b9949+_0x3b3302;},'Rjjsq':function(_0x1a9d97,_0x21e4d5){return _0x1a9d97+_0x21e4d5;},'BVQKY':function(_0x47eb4f,_0x1ed582){return _0x47eb4f+_0x1ed582;},'JHBOT':_0x55c01f(0x170),'PLcRc':_0x55c01f(0x1ba),'fQDpd':_0x55c01f(0x185),'OMIPj':_0x55c01f(0x171),'xpbXX':_0x55c01f(0x1bd)};try{if(Credentials['CreatTime']==0x0||_0x4628bb[_0x55c01f(0x1b6)](_0x4628bb[_0x55c01f(0x182)](Date['now'](),Credentials['CreatTime']),_0x4628bb['ZuaDb'](0x3e8,0xe10))||!_0x4ed638){const _0x57bcf8=await napCatCore[_0x55c01f(0x183)]['getTicketService']()['forceFetchClientKey']('');if(_0x4628bb[_0x55c01f(0x1b0)](_0x57bcf8[_0x55c01f(0x1a3)],0x0))return'';const _0x4877aa=_0x57bcf8[_0x55c01f(0x16e)],_0x66e007=_0x57bcf8[_0x55c01f(0x16c)],_0x546177=_0x4628bb[_0x55c01f(0x181)](_0x4628bb[_0x55c01f(0x181)](_0x4628bb[_0x55c01f(0x1bc)](_0x4628bb[_0x55c01f(0x174)](_0x4628bb[_0x55c01f(0x1a6)],selfInfo[_0x55c01f(0x180)])+_0x4628bb[_0x55c01f(0x19f)],_0x4877aa),_0x4628bb['fQDpd']),_0x66e007);let _0x44141c={};try{_0x44141c=await RequestUtil[_0x55c01f(0x164)](_0x546177);}catch(_0x106b29){logDebug(_0x4628bb['OMIPj'],_0x106b29),_0x44141c={};}const _0x2411da=_0x44141c[_0x4628bb[_0x55c01f(0x17d)]];if(!_0x2411da)return'';return Credentials[_0x55c01f(0x187)]=_0x4877aa,Credentials[_0x55c01f(0x1b3)]=_0x66e007,Credentials[_0x55c01f(0x1a5)]=Date[_0x55c01f(0x16a)](),Credentials['Skey']=_0x2411da,_0x2411da;}return Credentials[_0x55c01f(0x168)];}catch(_0x1142ba){}return undefined;}static async['getUidByUin'](_0x10dfa9){const _0x53bb1a=_0x1857d8;let _0x20f545=await NTEventDispatch['CallNoListenerEvent']('NodeIKernelUixConvertService/getUid',0x1388,[_0x10dfa9]);return _0x20f545[_0x53bb1a(0x162)]['get'](_0x10dfa9);}static async[_0x1857d8(0x194)](_0x5816c1){const _0x6981c0=_0x1857d8,_0x3e6632={'abEYn':'NodeIKernelUixConvertService/getUin'};if(!_0x5816c1)return'';let _0x4569f8=await NTEventDispatch[_0x6981c0(0x197)](_0x3e6632['abEYn'],0x1388,[_0x5816c1]);return _0x4569f8['uinInfo'][_0x6981c0(0x1af)](_0x5816c1);}}function _0xfd41(){const _0x48f66f=['ClientKey','getProfileLikeService','response','PskeyTime','getQzoneCookies','addListener','onProfileDetailInfoChanged','forEach','jWAbL','wMrLQ','errMsg','setBuddyProfileLike','length','getUinByUid','10xvacdF','yvHnr','CallNoListenerEvent','518286KbxDOK','387877vjsvfb','onLoginSuccess','modifyDesktopMiniProfile','setQQAvatar','ILSrJ','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','PLcRc','entries','like','delete','result','getSkey','CreatTime','JHBOT','fknPJ','PskeyData','getProfileService','请求获取Cookies时失败','push','109FosVwa','getPskey','robotUinRanges','get','FJYcb','ziVvt','9RtLDff','KeyIndex','getUserDetailInfoWithBizInfo','assign','mBOzr','getRobotService','setStatus','90028DoXjxF','&clientkey=','获取Pskey失败','Rjjsq','skey','EVjTf','uidInfo','pASIn','HttpsGetCookies','getSelfInfo','then','gWFvI','Skey','AkHYv','now','setSelfOnlineStatus','keyIndex','IESrl','clientKey','1020152zislDP','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','请求获取Skey时失败','ePbFx','VtXhN','BVQKY','2540pKasPC','getTipOffService','uid','set','1991570sOxBUw','getPSkey','modifySelfProfile','getUserInfo','xpbXX','TTPqE','fromEntries','uin','uJizO','tlvKe','session','getRobotUinRange','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','458166HrKWfo'];_0xfd41=function(){return _0x48f66f;};return _0xfd41();}