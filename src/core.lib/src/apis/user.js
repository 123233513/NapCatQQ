const _0x5a105f=_0x3553;(function(_0x1409c8,_0xc394c0){const _0x1a3aac=_0x3553,_0x41ddc2=_0x1409c8();while(!![]){try{const _0x59a5e5=-parseInt(_0x1a3aac(0x1f7))/0x1+-parseInt(_0x1a3aac(0x202))/0x2+-parseInt(_0x1a3aac(0x1c7))/0x3+-parseInt(_0x1a3aac(0x1dc))/0x4*(-parseInt(_0x1a3aac(0x1da))/0x5)+parseInt(_0x1a3aac(0x208))/0x6*(-parseInt(_0x1a3aac(0x1c2))/0x7)+-parseInt(_0x1a3aac(0x1c9))/0x8+-parseInt(_0x1a3aac(0x1e9))/0x9*(-parseInt(_0x1a3aac(0x1d3))/0xa);if(_0x59a5e5===_0xc394c0)break;else _0x41ddc2['push'](_0x41ddc2['shift']());}catch(_0x79cede){_0x41ddc2['push'](_0x41ddc2['shift']());}}}(_0x509e,0x59bc3));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';function _0x509e(){const _0x11843c=['delete','91587ouqlft','getMsgService','fromEntries','getProfileService','PKdsL','robotUinRanges','setStatus','length','JMrVf','pkPEl','GqqcB','780346yIGMjH','set','Wvjxe','getUserDetailInfoWithBizInfo','&clientkey=','now','36MrVIBU','Skey','107716qNgVMh','result','NKjiT','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','sbCnE','539028aHNOXO','PskeyTime','2522128YVmJKW','getRobotUinRange','get','PskeyData','uin','setQQAvatar','session','vAjuy','mnQKL','getPSkey','73140zvdDfp','getPskey','getTipOffService','addListener','jXGjT','then','setSelfOnlineStatus','5PycMqJ','WGlkU','2294132HWlGOA','keyIndex','onLoginSuccess','qhNtD','asuGO','setHeader','getUserDetailInfo\x20timeout','获取Pskey失败','CreatTime','errMsg','getTicketService','getUserInfo','uid','1062MLUiKF','HttpsGetCookies','like','forEach','domainPskeyMap','onProfileDetailInfoChanged','alYgC','getUserDetailInfo','getProfileLikeService','getRobotService','mouXO','xtQjh','xkEjK'];_0x509e=function(){return _0x11843c;};return _0x509e();}import{ProfileListener}from'@/core/listeners';function _0x3553(_0x19be63,_0x1c750e){const _0x509e6b=_0x509e();return _0x3553=function(_0x355397,_0x22b4b9){_0x355397=_0x355397-0x1c1;let _0x56d835=_0x509e6b[_0x355397];return _0x56d835;},_0x3553(_0x19be63,_0x1c750e);}import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x5a105f(0x1ee)]=_0x3e8f26=>{const _0x39b791=_0x5a105f;userInfoCache[_0x3e8f26[_0x39b791(0x1e8)]]=_0x3e8f26,userDetailHandlers[_0x39b791(0x1ec)](_0x27e33d=>_0x27e33d(_0x3e8f26));},setTimeout(()=>{const _0x4ac4fd=_0x5a105f;napCatCore[_0x4ac4fd(0x1de)](()=>{const _0x475cc5=_0x4ac4fd;napCatCore[_0x475cc5(0x1d6)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x5a105f(0x1d9)](_0x2d792e,_0x533d38,_0x43b454){const _0x4533a2=_0x5a105f;return napCatCore[_0x4533a2(0x1cf)][_0x4533a2(0x1f8)]()[_0x4533a2(0x1fd)]({'status':_0x2d792e,'extStatus':_0x533d38,'batteryStatus':_0x43b454});}static async[_0x5a105f(0x1eb)](_0x2f3854,_0x387d2f=0x1){const _0x5bdac4=_0x5a105f;return napCatCore[_0x5bdac4(0x1cf)][_0x5bdac4(0x1f1)]()['setBuddyProfileLike']({'friendUid':_0x2f3854,'sourceId':0x47,'doLikeCount':_0x387d2f,'doLikeTollCount':0x0});}static async[_0x5a105f(0x1ce)](_0x59f363){const _0x2add42=_0x5a105f,_0x34c5cb=napCatCore[_0x2add42(0x1cf)][_0x2add42(0x1fa)]()[_0x2add42(0x1e1)](_0x59f363);return{'result':_0x34c5cb?.['result'],'errMsg':_0x34c5cb?.[_0x2add42(0x1e5)]};}static async['getSelfInfo'](){}static async[_0x5a105f(0x1e7)](_0x28ddcb){}static async[_0x5a105f(0x1f0)](_0x1993ea){const _0x1d45ad=_0x5a105f,_0x38a0f4={'qhNtD':function(_0x1c7fef,_0x4b7ecc){return _0x1c7fef(_0x4b7ecc);},'vAjuy':function(_0x587a3a,_0x39c927){return _0x587a3a(_0x39c927);},'NKjiT':function(_0x435f3c){return _0x435f3c();},'Wvjxe':function(_0x5755ad,_0x273ee6,_0x486002){return _0x5755ad(_0x273ee6,_0x486002);}},_0x284a90=napCatCore[_0x1d45ad(0x1cf)][_0x1d45ad(0x1fa)]();return new Promise((_0x5718bb,_0x480d8c)=>{const _0x5232cd=_0x1d45ad,_0x49c881={'xkEjK':function(_0x1d6de0,_0x28389e){const _0x445b1c=_0x3553;return _0x38a0f4[_0x445b1c(0x1d0)](_0x1d6de0,_0x28389e);},'ydTBT':_0x5232cd(0x1e2)},_0x3bdfa9=_0x38a0f4[_0x5232cd(0x1c4)](randomUUID);let _0x5899ee=![];_0x38a0f4[_0x5232cd(0x204)](setTimeout,()=>{const _0x2ae561=_0x5232cd;!_0x5899ee&&_0x49c881[_0x2ae561(0x1f5)](_0x480d8c,_0x49c881['ydTBT']);},0x1388),userDetailHandlers[_0x5232cd(0x203)](_0x3bdfa9,_0x5060e2=>{const _0x33f918=_0x5232cd;_0x5060e2[_0x33f918(0x1e8)]===_0x1993ea&&(_0x5899ee=!![],userDetailHandlers[_0x33f918(0x1f6)](_0x3bdfa9),uid2UinMap[_0x1993ea]=_0x5060e2['uin'],_0x38a0f4[_0x33f918(0x1df)](_0x5718bb,_0x5060e2));}),_0x284a90[_0x5232cd(0x205)](_0x1993ea,[0x0])[_0x5232cd(0x1d8)](_0x2d64e8=>{});});}static async[_0x5a105f(0x1d2)](_0x3e2db0,_0xec1ad5=!![]){const _0x114aa2=_0x5a105f,_0x3e2326={'QpBti':function(_0x3a1ddc,_0x3fd4d5){return _0x3a1ddc||_0x3fd4d5;},'VzHTc':function(_0x3286ee,_0x1e5fd4){return _0x3286ee>_0x1e5fd4;},'JMrVf':function(_0x4b9e6b,_0x4f367a){return _0x4b9e6b-_0x4f367a;},'mnQKL':function(_0x1178be,_0x670f7e){return _0x1178be*_0x670f7e;},'PKdsL':function(_0x27c93b,_0x38ab61){return _0x27c93b>_0x38ab61;},'WGlkU':function(_0x2bf0d6,_0x5aec16){return _0x2bf0d6===_0x5aec16;}},_0x3e0215=[],_0x228402={};for(const _0x1d962e in _0x3e2db0){const _0x23c03f=Credentials['PskeyData'][_0x114aa2(0x1cb)](_0x3e2db0[_0x1d962e]),_0x4d80c9=Credentials[_0x114aa2(0x1c8)][_0x114aa2(0x1cb)](_0x3e2db0[_0x1d962e]);_0x3e2326['QpBti'](!_0x23c03f,!_0x4d80c9)||_0x3e2326['VzHTc'](_0x3e2326[_0x114aa2(0x1ff)](Date[_0x114aa2(0x207)](),_0x4d80c9),_0x3e2326[_0x114aa2(0x1d1)](0x708,0x3e8))||!_0xec1ad5?_0x3e0215['push'](_0x3e2db0[_0x1d962e]):_0x228402[_0x3e2db0[_0x1d962e]]=_0x23c03f;}let _0x536ab4={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x3e2326[_0x114aa2(0x1fb)](_0x3e0215[_0x114aa2(0x1fe)],0x0)&&(_0x536ab4=await napCatCore[_0x114aa2(0x1cf)][_0x114aa2(0x1d5)]()[_0x114aa2(0x1d4)](_0x3e0215,!![]));const _0xc432cf=_0x536ab4[_0x114aa2(0x1ed)];for(const _0x5eba9e of _0xc432cf['entries']()){Credentials[_0x114aa2(0x1cc)]['set'](_0x5eba9e[0x0],_0x5eba9e[0x1]),Credentials[_0x114aa2(0x1c8)]['set'](_0x5eba9e[0x0],Date[_0x114aa2(0x207)]());}const _0x63b57c=Object['assign'](Object[_0x114aa2(0x1f9)](_0xc432cf),_0x228402);if(_0x3e2326[_0x114aa2(0x1db)](_0x536ab4['result'],0x0))return _0x63b57c;else logError(_0x114aa2(0x1e3),_0x536ab4['errMsg']);return{};}static async['getRobotUinRange'](){const _0x2cfbcb=_0x5a105f,_0x1f17ad=await napCatCore[_0x2cfbcb(0x1cf)][_0x2cfbcb(0x1f2)]()[_0x2cfbcb(0x1ca)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x1f17ad?.['response']?.[_0x2cfbcb(0x1fc)];}static async['getSkey'](_0x509de3=!![]){const _0x3be489=_0x5a105f,_0x207484={'xtQjh':function(_0x14a161,_0x5ddfdb){return _0x14a161>_0x5ddfdb;},'asuGO':function(_0x7d9f14,_0x528d3f){return _0x7d9f14-_0x528d3f;},'jXGjT':function(_0x68f482,_0x40a5d0){return _0x68f482*_0x40a5d0;},'puYzL':function(_0x4dc2b5,_0x2d8cbf){return _0x4dc2b5!==_0x2d8cbf;},'mouXO':function(_0x43d1f8,_0x8eadf6){return _0x43d1f8+_0x8eadf6;},'vATWl':function(_0x2bed68,_0x54b8dc){return _0x2bed68+_0x54b8dc;},'pkPEl':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','alYgC':_0x3be489(0x206),'GqqcB':_0x3be489(0x1c5),'xyNPN':function(_0x2eee76,_0x486485,_0x184118){return _0x2eee76(_0x486485,_0x184118);},'sbCnE':'skey'};try{if(Credentials[_0x3be489(0x1e4)]==0x0||_0x207484[_0x3be489(0x1f4)](_0x207484[_0x3be489(0x1e0)](Date[_0x3be489(0x207)](),Credentials[_0x3be489(0x1e4)]),_0x207484[_0x3be489(0x1d7)](0x3e8,0xe10))||!_0x509de3){const _0x370aee=await napCatCore[_0x3be489(0x1cf)][_0x3be489(0x1e6)]()['forceFetchClientKey']('');if(_0x207484['puYzL'](_0x370aee[_0x3be489(0x1c3)],0x0))return'';const _0x821b92=_0x370aee['clientKey'],_0x1f64d7=_0x370aee[_0x3be489(0x1dd)],_0x26df9d=_0x207484[_0x3be489(0x1f3)](_0x207484['vATWl'](_0x207484['mouXO'](_0x207484[_0x3be489(0x200)],selfInfo[_0x3be489(0x1cd)]),_0x207484[_0x3be489(0x1ef)])+_0x821b92+_0x207484[_0x3be489(0x201)],_0x1f64d7);let _0x34276a;try{_0x34276a=await RequestUtil[_0x3be489(0x1ea)](_0x26df9d);}catch(_0x2a859d){_0x207484['xyNPN'](logDebug,'请求获取Skey时失败',_0x2a859d),_0x34276a=new Map();}const _0x1dc9d2=_0x34276a['get'](_0x207484[_0x3be489(0x1c6)]);if(!_0x1dc9d2)return'';return Credentials[_0x3be489(0x1e4)]=Date['now'](),Credentials['Skey']=_0x1dc9d2,_0x1dc9d2;}return Credentials[_0x3be489(0x1c1)];}catch(_0x2e7ff9){}return undefined;}}