const _0xe011b=_0x4725;function _0x2f37(){const _0x5687c4=['oSJoN','errMsg','setQQAvatar','356672RXWmTQ','318ZraiLj','NUnjV','delete','set','getTicketService','setBuddyProfileLike','5208993gdwqWu','getUserDetailInfoWithBizInfo','PskeyTime','nsANJ','getUserInfo','push','Skey','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','fromEntries','getSelfInfo','getTipOffService','103250FwSuib','fIAiL','forEach','getUserDetailInfo','58NqwQUe','get','onProfileDetailInfoChanged','请求获取Skey时失败','length','erbEI','2199080VYeQLQ','robotUinRanges','like','entries','dwnND','1778952UToSOg','domainPskeyMap','UwwWN','HttpsGetCookies','response','uxdgH','CreatTime','getProfileService','now','getRobotUinRange','clientKey','mbfiJ','cqlKl','keyIndex','QQRhB','ULobx','oRmlA','fmZjr','getUserDetailInfo\x20timeout','XiPHM','getPskey','getPSkey','tkzcx','gDDeh','2788TRnhUY','setSelfOnlineStatus','eiQIw','lnYUF','JDJAO','MfLjR','1344936fIiHnv','10JNpwnv','uid','skey','获取Pskey失败','DFItC','Ljvgk','addListener','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','getMsgService','result','session','yekuW','setHeader'];_0x2f37=function(){return _0x5687c4;};return _0x2f37();}(function(_0x736c26,_0x1003aa){const _0x532f53=_0x4725,_0x3ac2d8=_0x736c26();while(!![]){try{const _0x223743=-parseInt(_0x532f53(0x10a))/0x1*(-parseInt(_0x532f53(0xdd))/0x2)+-parseInt(_0x532f53(0x115))/0x3+parseInt(_0x532f53(0xe3))/0x4+parseInt(_0x532f53(0x110))/0x5+parseInt(_0x532f53(0xf5))/0x6*(parseInt(_0x532f53(0x106))/0x7)+-parseInt(_0x532f53(0xf4))/0x8+parseInt(_0x532f53(0xfb))/0x9*(-parseInt(_0x532f53(0xe4))/0xa);if(_0x223743===_0x1003aa)break;else _0x3ac2d8['push'](_0x3ac2d8['shift']());}catch(_0x44fb9e){_0x3ac2d8['push'](_0x3ac2d8['shift']());}}}(_0x2f37,0x671a3));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';function _0x4725(_0x17dcc7,_0xe6fabf){const _0x2f371f=_0x2f37();return _0x4725=function(_0x4725f9,_0x94223c){_0x4725f9=_0x4725f9-0xd7;let _0x428ae1=_0x2f371f[_0x4725f9];return _0x428ae1;},_0x4725(_0x17dcc7,_0xe6fabf);}import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0xe011b(0x10c)]=_0x250033=>{const _0x13fdcc=_0xe011b;userInfoCache[_0x250033[_0x13fdcc(0xe5)]]=_0x250033,userDetailHandlers[_0x13fdcc(0x108)](_0xe418e7=>_0xe418e7(_0x250033));},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x2a0530=_0x4725;napCatCore[_0x2a0530(0xea)](profileListener);});},0x64);export class NTQQUserApi{static async[_0xe011b(0xde)](_0xbb682b,_0x1ca513,_0x3ffc1f){const _0x1d48ad=_0xe011b;return napCatCore['session'][_0x1d48ad(0xec)]()['setStatus']({'status':_0xbb682b,'extStatus':_0x1ca513,'batteryStatus':_0x3ffc1f});}static async[_0xe011b(0x112)](_0x17799e,_0x3e6ccc=0x1){const _0x3c6524=_0xe011b;return napCatCore[_0x3c6524(0xee)]['getProfileLikeService']()[_0x3c6524(0xfa)]({'friendUid':_0x17799e,'sourceId':0x47,'doLikeCount':_0x3e6ccc,'doLikeTollCount':0x0});}static async[_0xe011b(0xf3)](_0x357b41){const _0x3cc734=_0xe011b,_0x224518=napCatCore['session'][_0x3cc734(0x11c)]()[_0x3cc734(0xf0)](_0x357b41);return{'result':_0x224518?.[_0x3cc734(0xed)],'errMsg':_0x224518?.[_0x3cc734(0xf2)]};}static async[_0xe011b(0x104)](){}static async[_0xe011b(0xff)](_0xe9889c){}static async[_0xe011b(0x109)](_0x1a95a2){const _0x25e6fd=_0xe011b,_0x15fc28={'tkzcx':function(_0x4835cd,_0x56464a){return _0x4835cd===_0x56464a;},'yekuW':function(_0x4cbc48,_0xf5cd21){return _0x4cbc48(_0xf5cd21);},'NUnjV':function(_0x5c451a){return _0x5c451a();}},_0x514943=napCatCore[_0x25e6fd(0xee)]['getProfileService']();return new Promise((_0xc0ae1d,_0x58b64a)=>{const _0x49e3ee=_0x25e6fd,_0x544b89={'fmZjr':function(_0x433e42,_0xdbf56c){const _0x2eea85=_0x4725;return _0x15fc28[_0x2eea85(0xdb)](_0x433e42,_0xdbf56c);},'fIAiL':function(_0x309d91,_0x553db7){const _0xd6b132=_0x4725;return _0x15fc28[_0xd6b132(0xef)](_0x309d91,_0x553db7);}},_0x3ca5b8=_0x15fc28[_0x49e3ee(0xf6)](randomUUID);let _0x4e8d1d=![];setTimeout(()=>{const _0x4e1876=_0x49e3ee;!_0x4e8d1d&&_0x58b64a(_0x4e1876(0xd7));},0x1388),userDetailHandlers['set'](_0x3ca5b8,_0x537bf4=>{const _0x3cd96f=_0x49e3ee;_0x544b89[_0x3cd96f(0x126)](_0x537bf4[_0x3cd96f(0xe5)],_0x1a95a2)&&(_0x4e8d1d=!![],userDetailHandlers[_0x3cd96f(0xf7)](_0x3ca5b8),uid2UinMap[_0x1a95a2]=_0x537bf4['uin'],_0x544b89[_0x3cd96f(0x107)](_0xc0ae1d,_0x537bf4));}),_0x514943[_0x49e3ee(0xfc)](_0x1a95a2,[0x0])['then'](_0x3a96ab=>{});});}static async[_0xe011b(0xda)](_0x4ae4ae,_0x427e1a=!![]){const _0x57ec85=_0xe011b,_0x3d4f6e={'nsANJ':function(_0x2a6e38,_0x375699){return _0x2a6e38>_0x375699;},'MfLjR':function(_0x43fa09,_0x3ac7c4){return _0x43fa09-_0x3ac7c4;},'oSJoN':function(_0x416082,_0x148dc6){return _0x416082*_0x148dc6;},'DFItC':function(_0x583053,_0x501ba4){return _0x583053>_0x501ba4;},'gDDeh':function(_0x6cea67,_0x237e82){return _0x6cea67===_0x237e82;},'LsTej':function(_0x1e0cd4,_0x2b23b3,_0x90bd1c){return _0x1e0cd4(_0x2b23b3,_0x90bd1c);},'erbEI':_0x57ec85(0xe7)},_0xba7e7b=[],_0x22cc91={};for(const _0x3d3732 in _0x4ae4ae){const _0x433317=Credentials['PskeyData']['get'](_0x4ae4ae[_0x3d3732]),_0x284fb6=Credentials[_0x57ec85(0xfd)][_0x57ec85(0x10b)](_0x4ae4ae[_0x3d3732]);!_0x433317||!_0x284fb6||_0x3d4f6e[_0x57ec85(0xfe)](_0x3d4f6e[_0x57ec85(0xe2)](Date[_0x57ec85(0x11d)](),_0x284fb6),_0x3d4f6e[_0x57ec85(0xf1)](0x708,0x3e8))||!_0x427e1a?_0xba7e7b[_0x57ec85(0x100)](_0x4ae4ae[_0x3d3732]):_0x22cc91[_0x4ae4ae[_0x3d3732]]=_0x433317;}let _0x14012f={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x3d4f6e[_0x57ec85(0xe8)](_0xba7e7b[_0x57ec85(0x10e)],0x0)&&(_0x14012f=await napCatCore['session'][_0x57ec85(0x105)]()[_0x57ec85(0xd9)](_0xba7e7b,!![]));const _0x196793=_0x14012f[_0x57ec85(0x116)];for(const _0x3f8aba of _0x196793[_0x57ec85(0x113)]()){Credentials['PskeyData']['set'](_0x3f8aba[0x0],_0x3f8aba[0x1]),Credentials['PskeyTime'][_0x57ec85(0xf8)](_0x3f8aba[0x0],Date[_0x57ec85(0x11d)]());}const _0x21a720=Object['assign'](Object[_0x57ec85(0x103)](_0x196793),_0x22cc91);if(_0x3d4f6e[_0x57ec85(0xdc)](_0x14012f[_0x57ec85(0xed)],0x0))return _0x21a720;else _0x3d4f6e['LsTej'](logError,_0x3d4f6e[_0x57ec85(0x10f)],_0x14012f[_0x57ec85(0xf2)]);return{};}static async[_0xe011b(0x11e)](){const _0x455a13=_0xe011b,_0x41bcce=await napCatCore[_0x455a13(0xee)]['getRobotService']()[_0x455a13(0x11e)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x41bcce?.[_0x455a13(0x119)]?.[_0x455a13(0x111)];}static async['getSkey'](_0x1fb76a=!![]){const _0x7ef28f=_0xe011b,_0x1608eb={'oRmlA':function(_0x3735cd,_0x1cf681){return _0x3735cd>_0x1cf681;},'Ljvgk':function(_0x521b64,_0x17952b){return _0x521b64-_0x17952b;},'mbfiJ':function(_0x141cb1,_0x210531){return _0x141cb1*_0x210531;},'dwnND':function(_0x572a00,_0x4106ac){return _0x572a00!==_0x4106ac;},'cqlKl':function(_0x44701d,_0x1b26bb){return _0x44701d+_0x1b26bb;},'uxdgH':function(_0x5352c3,_0x3910c5){return _0x5352c3+_0x3910c5;},'lnYUF':function(_0x4a6d9f,_0x2266a8){return _0x4a6d9f+_0x2266a8;},'XiPHM':_0x7ef28f(0x102),'JDJAO':'&clientkey=','QQRhB':_0x7ef28f(0xeb),'eiQIw':function(_0x5cf847,_0x3fdbf7,_0x3d1b15){return _0x5cf847(_0x3fdbf7,_0x3d1b15);},'UwwWN':_0x7ef28f(0x10d),'ULobx':_0x7ef28f(0xe6)};try{if(Credentials[_0x7ef28f(0x11b)]==0x0||_0x1608eb[_0x7ef28f(0x125)](_0x1608eb[_0x7ef28f(0xe9)](Date['now'](),Credentials[_0x7ef28f(0x11b)]),_0x1608eb[_0x7ef28f(0x120)](0x3e8,0xe10))||!_0x1fb76a){const _0x1fe9ae=await napCatCore[_0x7ef28f(0xee)][_0x7ef28f(0xf9)]()['forceFetchClientKey']('');if(_0x1608eb[_0x7ef28f(0x114)](_0x1fe9ae['result'],0x0))return'';const _0x45b051=_0x1fe9ae[_0x7ef28f(0x11f)],_0xeeb1e0=_0x1fe9ae[_0x7ef28f(0x122)],_0x192eaf=_0x1608eb[_0x7ef28f(0x121)](_0x1608eb['cqlKl'](_0x1608eb[_0x7ef28f(0x11a)](_0x1608eb[_0x7ef28f(0xe0)](_0x1608eb[_0x7ef28f(0xd8)],selfInfo['uin'])+_0x1608eb[_0x7ef28f(0xe1)],_0x45b051),_0x1608eb[_0x7ef28f(0x123)]),_0xeeb1e0);let _0x4d3f9e;try{_0x4d3f9e=await RequestUtil[_0x7ef28f(0x118)](_0x192eaf);}catch(_0x5f4026){_0x1608eb[_0x7ef28f(0xdf)](logDebug,_0x1608eb[_0x7ef28f(0x117)],_0x5f4026),_0x4d3f9e=new Map();}const _0x2425e8=_0x4d3f9e[_0x7ef28f(0x10b)](_0x1608eb[_0x7ef28f(0x124)]);if(!_0x2425e8)return'';return Credentials[_0x7ef28f(0x11b)]=Date[_0x7ef28f(0x11d)](),Credentials[_0x7ef28f(0x101)]=_0x2425e8,_0x2425e8;}return Credentials[_0x7ef28f(0x101)];}catch(_0x37cae1){}return undefined;}}