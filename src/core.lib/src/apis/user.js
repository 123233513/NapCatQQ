const _0x45b44e=_0x770c;(function(_0x31aff0,_0x396c19){const _0x3664f4=_0x770c,_0x14781d=_0x31aff0();while(!![]){try{const _0x17ed57=parseInt(_0x3664f4(0x130))/0x1*(parseInt(_0x3664f4(0x12e))/0x2)+-parseInt(_0x3664f4(0x14c))/0x3*(parseInt(_0x3664f4(0x16c))/0x4)+-parseInt(_0x3664f4(0x165))/0x5+-parseInt(_0x3664f4(0x169))/0x6+parseInt(_0x3664f4(0x132))/0x7+parseInt(_0x3664f4(0x14a))/0x8+-parseInt(_0x3664f4(0x146))/0x9*(-parseInt(_0x3664f4(0x148))/0xa);if(_0x17ed57===_0x396c19)break;else _0x14781d['push'](_0x14781d['shift']());}catch(_0x173d34){_0x14781d['push'](_0x14781d['shift']());}}}(_0x477e,0x2c81b));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';function _0x477e(){const _0x3b50a7=['625870XJJBPo','PskeyData','forEach','获取Pskey失败','1391118qmzzjp','domainPskeyMap','DsWkN','4WAgxXC','getTicketService','bQrfs','get','setSelfOnlineStatus','PskeyTime','getSelfInfo','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','setQQAvatar','tJDUd','QEaUJ','UCaFa','getUserDetailInfo','LPHdY','setBuddyProfileLike','lbAqI','qmEds','getUserInfo','uin','addListener','oYPCf','&clientkey=','KeyIndex','6FOCBpq','getUserDetailInfoWithBizInfo','32530cAVLuj','getQzoneCookies','1236697jUScve','RswAf','getRobotService','response','getProfileLikeService','VDjcz','getTipOffService','now','setStatus','zzCeC','set','请求获取Skey时失败','getMsgService','Skey','result','forceFetchClientKey','fromEntries','ZtwXy','HttpsGetCookies','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','9aqhoNJ','skey','2316970IMcgvX','ligfY','2361856MzWtZJ','WNsSl','785592dduzNf','tWYRd','请求获取Cookies时失败','getPSkey','AamsQ','CiZoq','uid','errMsg','uykdW','setHeader','CreatTime','delete','NeikK','session','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','onLoginSuccess','clientKey','onProfileDetailInfoChanged','ClientKey','getProfileService','miwBe','pOgkq','like','uYLCV','TSxVp'];_0x477e=function(){return _0x3b50a7;};return _0x477e();}import{logDebug,logError}from'@/common/utils/log';function _0x770c(_0x119b37,_0x638c4b){const _0x477e41=_0x477e();return _0x770c=function(_0x770c84,_0x59fe21){_0x770c84=_0x770c84-0x11d;let _0x3691bd=_0x477e41[_0x770c84];return _0x3691bd;},_0x770c(_0x119b37,_0x638c4b);}const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x45b44e(0x15d)]=_0xd0de82=>{const _0x3621e5=_0x45b44e;userInfoCache[_0xd0de82[_0x3621e5(0x152)]]=_0xd0de82,userDetailHandlers[_0x3621e5(0x167)](_0x1084bc=>_0x1084bc(_0xd0de82));},setTimeout(()=>{const _0x324642=_0x45b44e;napCatCore[_0x324642(0x15b)](()=>{const _0xad599b=_0x324642;napCatCore[_0xad599b(0x12a)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x45b44e(0x170)](_0x4033e1,_0x317e79,_0x276e17){const _0x7ac9bb=_0x45b44e;return napCatCore['session'][_0x7ac9bb(0x13e)]()[_0x7ac9bb(0x13a)]({'status':_0x4033e1,'extStatus':_0x317e79,'batteryStatus':_0x276e17});}static async[_0x45b44e(0x162)](_0x3a4bbf,_0x549dfd=0x1){const _0x10fe53=_0x45b44e;return napCatCore[_0x10fe53(0x159)][_0x10fe53(0x136)]()[_0x10fe53(0x125)]({'friendUid':_0x3a4bbf,'sourceId':0x47,'doLikeCount':_0x549dfd,'doLikeTollCount':0x0});}static async[_0x45b44e(0x11f)](_0x56e34b){const _0x1920de=_0x45b44e,_0x1c215a=napCatCore[_0x1920de(0x159)][_0x1920de(0x15f)]()[_0x1920de(0x155)](_0x56e34b);return{'result':_0x1c215a?.[_0x1920de(0x140)],'errMsg':_0x1c215a?.[_0x1920de(0x153)]};}static async[_0x45b44e(0x11d)](){}static async[_0x45b44e(0x128)](_0x304e68){}static async[_0x45b44e(0x123)](_0x31987b){const _0x4a9a3f=_0x45b44e,_0x43d5e5={'QEaUJ':function(_0x47e05f,_0x78e104){return _0x47e05f===_0x78e104;},'EKFOF':function(_0x4b335f,_0x3bac18){return _0x4b335f(_0x3bac18);},'CiZoq':'getUserDetailInfo\x20timeout','uYLCV':function(_0x1ac236){return _0x1ac236();},'AsjkQ':function(_0x11aa46,_0x17e969,_0x32ea70){return _0x11aa46(_0x17e969,_0x32ea70);}},_0x272055=napCatCore[_0x4a9a3f(0x159)][_0x4a9a3f(0x15f)]();return new Promise((_0x13c619,_0x44d0db)=>{const _0x547b20=_0x4a9a3f,_0x424197={'RswAf':function(_0xad558c,_0x27768b){return _0x43d5e5['EKFOF'](_0xad558c,_0x27768b);},'UCaFa':_0x43d5e5[_0x547b20(0x151)]},_0x3a0be6=_0x43d5e5[_0x547b20(0x163)](randomUUID);let _0x1d26e3=![],_0x2beea0=undefined,_0x24b90d=!![];_0x43d5e5['AsjkQ'](setTimeout,()=>{const _0x533990=_0x547b20;!_0x1d26e3&&(_0x2beea0?_0x13c619(_0x2beea0):_0x424197[_0x533990(0x133)](_0x44d0db,_0x424197[_0x533990(0x122)])),userDetailHandlers[_0x533990(0x157)](_0x3a0be6);},0x1388),userDetailHandlers[_0x547b20(0x13c)](_0x3a0be6,_0x247e3c=>{const _0x2e361a=_0x547b20;_0x43d5e5[_0x2e361a(0x121)](_0x247e3c[_0x2e361a(0x152)],_0x31987b)&&(uid2UinMap[_0x31987b]=_0x247e3c[_0x2e361a(0x129)],_0x24b90d?(_0x2beea0=_0x247e3c,_0x24b90d=![]):(_0x1d26e3=!![],_0x13c619(_0x247e3c)));}),_0x272055[_0x547b20(0x12f)](_0x31987b,[0x0])['then'](_0x587c8d=>{});});}static async[_0x45b44e(0x14f)](_0x36234b,_0x382b65=!![]){const _0x49d78c=_0x45b44e,_0x2bafbd={'lbAqI':function(_0x5965b7,_0x3c92e8){return _0x5965b7>_0x3c92e8;},'jdjDY':function(_0x1b77fe,_0x1d9b5b){return _0x1b77fe-_0x1d9b5b;},'uykdW':function(_0x24c53d,_0x121e0d){return _0x24c53d*_0x121e0d;},'miwBe':function(_0x2caa8e,_0x45b887,_0x29a701){return _0x2caa8e(_0x45b887,_0x29a701);}},_0x4db8c1=[],_0x1e6eae={};for(const _0x2d8db9 in _0x36234b){const _0x16bc0f=Credentials[_0x49d78c(0x166)][_0x49d78c(0x16f)](_0x36234b[_0x2d8db9]),_0x3a7d8e=Credentials[_0x49d78c(0x171)][_0x49d78c(0x16f)](_0x36234b[_0x2d8db9]);!_0x16bc0f||!_0x3a7d8e||_0x2bafbd[_0x49d78c(0x126)](_0x2bafbd['jdjDY'](Date[_0x49d78c(0x139)](),_0x3a7d8e),_0x2bafbd[_0x49d78c(0x154)](0x708,0x3e8))||!_0x382b65?_0x4db8c1['push'](_0x36234b[_0x2d8db9]):_0x1e6eae[_0x36234b[_0x2d8db9]]=_0x16bc0f;}let _0x4b2845={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x4db8c1['length']>0x0&&(_0x4b2845=await napCatCore[_0x49d78c(0x159)][_0x49d78c(0x138)]()['getPskey'](_0x4db8c1,!![]));const _0x47da08=_0x4b2845[_0x49d78c(0x16a)];for(const _0x53358a of _0x47da08['entries']()){Credentials['PskeyData'][_0x49d78c(0x13c)](_0x53358a[0x0],_0x53358a[0x1]),Credentials[_0x49d78c(0x171)]['set'](_0x53358a[0x0],Date[_0x49d78c(0x139)]());}const _0x14fd80=Object['assign'](Object[_0x49d78c(0x142)](_0x47da08),_0x1e6eae);if(_0x4b2845[_0x49d78c(0x140)]===0x0)return _0x14fd80;else _0x2bafbd[_0x49d78c(0x160)](logError,_0x49d78c(0x168),_0x4b2845[_0x49d78c(0x153)]);return{};}static async['getRobotUinRange'](){const _0x40a248=_0x45b44e,_0x23a321=await napCatCore['session'][_0x40a248(0x134)]()['getRobotUinRange']({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x23a321?.[_0x40a248(0x135)]?.['robotUinRanges'];}static async[_0x45b44e(0x131)](){const _0x29cc8d=_0x45b44e,_0x5c0ac7={'pOgkq':function(_0x514965,_0x22db9e){return _0x514965+_0x22db9e;},'VDjcz':function(_0x55a3a1,_0x2a0c3c){return _0x55a3a1+_0x2a0c3c;},'LPHdY':function(_0x15d8f9,_0xd6793e){return _0x15d8f9+_0xd6793e;},'TSxVp':_0x29cc8d(0x15a),'NeikK':_0x29cc8d(0x145),'XshEV':'%2Finfocenter&keyindex=19%27'},_0x316d9c=_0x5c0ac7[_0x29cc8d(0x161)](_0x5c0ac7[_0x29cc8d(0x137)](_0x5c0ac7[_0x29cc8d(0x124)](_0x5c0ac7['pOgkq'](_0x5c0ac7[_0x29cc8d(0x164)],selfInfo['uin'])+_0x29cc8d(0x12c),Credentials[_0x29cc8d(0x15e)])+_0x5c0ac7[_0x29cc8d(0x158)],selfInfo[_0x29cc8d(0x129)]),_0x5c0ac7['XshEV']);let _0x344705={};try{_0x344705=await RequestUtil[_0x29cc8d(0x144)](_0x316d9c);}catch(_0x105294){logDebug(_0x29cc8d(0x14e),_0x105294),_0x344705={};}return _0x344705;}static async['getSkey'](_0x12c4da=!![]){const _0x513be0=_0x45b44e,_0x5058ad={'ligfY':function(_0x42b747,_0x1e8e0e){return _0x42b747==_0x1e8e0e;},'qmEds':function(_0xbaf333,_0x39f2e5){return _0xbaf333>_0x39f2e5;},'DsWkN':function(_0x43b032,_0x3d9ddb){return _0x43b032-_0x3d9ddb;},'WNsSl':function(_0x4a372e,_0x27994f){return _0x4a372e*_0x27994f;},'DxXyN':function(_0x38c5a2,_0x26b23b){return _0x38c5a2!==_0x26b23b;},'ZtwXy':function(_0x2b03e1,_0x25a4da){return _0x2b03e1+_0x25a4da;},'oYPCf':function(_0x282a3c,_0x2a37be){return _0x282a3c+_0x2a37be;},'bQrfs':function(_0x337a0f,_0x5051af){return _0x337a0f+_0x5051af;},'puHMM':_0x513be0(0x15a),'tJDUd':_0x513be0(0x12c),'zzCeC':_0x513be0(0x11e),'tWYRd':_0x513be0(0x13d),'AamsQ':_0x513be0(0x147)};try{if(_0x5058ad[_0x513be0(0x149)](Credentials[_0x513be0(0x156)],0x0)||_0x5058ad[_0x513be0(0x127)](_0x5058ad[_0x513be0(0x16b)](Date['now'](),Credentials[_0x513be0(0x156)]),_0x5058ad[_0x513be0(0x14b)](0x3e8,0xe10))||!_0x12c4da){const _0x1f8ae8=await napCatCore['session'][_0x513be0(0x16d)]()[_0x513be0(0x141)]('');if(_0x5058ad['DxXyN'](_0x1f8ae8['result'],0x0))return'';const _0x45b8f6=_0x1f8ae8[_0x513be0(0x15c)],_0x28a108=_0x1f8ae8['keyIndex'],_0x46e832=_0x5058ad[_0x513be0(0x143)](_0x5058ad[_0x513be0(0x12b)](_0x5058ad[_0x513be0(0x16e)](_0x5058ad['puHMM'],selfInfo[_0x513be0(0x129)]),_0x5058ad[_0x513be0(0x120)])+_0x45b8f6+_0x5058ad[_0x513be0(0x13b)],_0x28a108);let _0xbd21cf={};try{_0xbd21cf=await RequestUtil[_0x513be0(0x144)](_0x46e832);}catch(_0x370bd3){logDebug(_0x5058ad[_0x513be0(0x14d)],_0x370bd3),_0xbd21cf={};}const _0x79c1b2=_0xbd21cf[_0x5058ad[_0x513be0(0x150)]];if(!_0x79c1b2)return'';return Credentials[_0x513be0(0x15e)]=_0x45b8f6,Credentials[_0x513be0(0x12d)]=_0x28a108,Credentials[_0x513be0(0x156)]=Date[_0x513be0(0x139)](),Credentials[_0x513be0(0x13f)]=_0x79c1b2,_0x79c1b2;}return Credentials[_0x513be0(0x13f)];}catch(_0x5cafbe){}return undefined;}}