const _0x55a809=_0x598b;(function(_0x2023d6,_0x309add){const _0x5ebc61=_0x598b,_0x3a7987=_0x2023d6();while(!![]){try{const _0x2ce0e4=parseInt(_0x5ebc61(0x127))/0x1+-parseInt(_0x5ebc61(0x15b))/0x2*(parseInt(_0x5ebc61(0x130))/0x3)+parseInt(_0x5ebc61(0x15d))/0x4*(parseInt(_0x5ebc61(0x111))/0x5)+-parseInt(_0x5ebc61(0x151))/0x6*(parseInt(_0x5ebc61(0x12d))/0x7)+-parseInt(_0x5ebc61(0x14e))/0x8+-parseInt(_0x5ebc61(0x112))/0x9*(parseInt(_0x5ebc61(0x141))/0xa)+parseInt(_0x5ebc61(0x138))/0xb;if(_0x2ce0e4===_0x309add)break;else _0x3a7987['push'](_0x3a7987['shift']());}catch(_0x21fb09){_0x3a7987['push'](_0x3a7987['shift']());}}}(_0x2a47,0x47b9d));function _0x598b(_0x4903c9,_0x35459c){const _0x2a47a8=_0x2a47();return _0x598b=function(_0x598b1a,_0x4bc766){_0x598b1a=_0x598b1a-0x10e;let _0x2bf139=_0x2a47a8[_0x598b1a];return _0x2bf139;},_0x598b(_0x4903c9,_0x35459c);}import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener['onProfileDetailInfoChanged']=_0x47777f=>{const _0x4e5ba0=_0x598b;userInfoCache[_0x47777f[_0x4e5ba0(0x12b)]]=_0x47777f,userDetailHandlers[_0x4e5ba0(0x128)](_0x7f8d75=>_0x7f8d75(_0x47777f));},setTimeout(()=>{const _0x2a5fb1=_0x598b;napCatCore[_0x2a5fb1(0x114)](()=>{napCatCore['addListener'](profileListener);});},0x64);function _0x2a47(){const _0x1ed878=['PskeyData','forceFetchClientKey','teRGu','fqXRB','tLBGR','set','HttpsGetCookies','setBuddyProfileLike','setSelfOnlineStatus','MKweC','sqbUg','403558qrCxbn','forEach','PskeyTime','KeyIndex','uid','result','63xvGfgQ','unqPf','get','48903TKxICU','then','ecOqG','session','Skey','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','skey','getRobotUinRange','9962733ONJyLv','sLaNp','wwHwL','robotUinRanges','getProfileLikeService','getUserDetailInfo','getUserDetailInfo\x20timeout','osDci','rZNqc','1275220CSGtAy','assign','rVYGp','mCVql','entries','TOmaq','ClientKey','setQQAvatar','push','pIExO','getTicketService','like','mxdKn','3073336qyqJDp','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','%2Finfocenter&keyindex=19%27','385386EgLQPC','IWQSD','qzdxV','VJdXL','lYWcL','length','keyIndex','请求获取Cookies时失败','getUserInfo','getTipOffService','32poTyRt','获取Pskey失败','223408JakZrj','getSkey','getPskey','PmVHo','clientKey','setHeader','TojOH','30UMXYjO','9nDghzd','getUserDetailInfoWithBizInfo','onLoginSuccess','errMsg','getProfileService','&clientkey=','FIGSY','now','CreatTime','uin'];_0x2a47=function(){return _0x1ed878;};return _0x2a47();}export class NTQQUserApi{static async[_0x55a809(0x124)](_0x4c1703,_0x2bae93,_0x145d0d){return napCatCore['session']['getMsgService']()['setStatus']({'status':_0x4c1703,'extStatus':_0x2bae93,'batteryStatus':_0x145d0d});}static async[_0x55a809(0x14c)](_0x213847,_0xc52644=0x1){const _0x42c1f8=_0x55a809;return napCatCore[_0x42c1f8(0x133)][_0x42c1f8(0x13c)]()[_0x42c1f8(0x123)]({'friendUid':_0x213847,'sourceId':0x47,'doLikeCount':_0xc52644,'doLikeTollCount':0x0});}static async[_0x55a809(0x148)](_0x443ff1){const _0xf36f55=_0x55a809,_0x56bc7a=napCatCore['session']['getProfileService']()[_0xf36f55(0x10f)](_0x443ff1);return{'result':_0x56bc7a?.['result'],'errMsg':_0x56bc7a?.[_0xf36f55(0x115)]};}static async['getSelfInfo'](){}static async[_0x55a809(0x159)](_0x67c631){}static async[_0x55a809(0x13d)](_0x932ad7){const _0x5448f9=_0x55a809,_0x2ac1c6={'lYWcL':function(_0x5d7d64,_0x1f1f0f){return _0x5d7d64(_0x1f1f0f);},'teRGu':_0x5448f9(0x13e),'VJdXL':function(_0x2b68cd,_0x8fdfb1){return _0x2b68cd===_0x8fdfb1;},'fqXRB':function(_0x4e2db7){return _0x4e2db7();},'mxdKn':function(_0x3cfe0d,_0x71ac6e,_0xc26fed){return _0x3cfe0d(_0x71ac6e,_0xc26fed);}},_0x31b6f3=napCatCore[_0x5448f9(0x133)][_0x5448f9(0x116)]();return new Promise((_0x50dde3,_0x141368)=>{const _0x413170=_0x5448f9,_0x52ba70=_0x2ac1c6[_0x413170(0x11f)](randomUUID);let _0x505a71=![],_0x16a585=undefined,_0x569fca=!![];_0x2ac1c6[_0x413170(0x14d)](setTimeout,()=>{const _0x2de926=_0x413170;!_0x505a71&&(_0x16a585?_0x50dde3(_0x16a585):_0x2ac1c6[_0x2de926(0x155)](_0x141368,_0x2ac1c6[_0x2de926(0x11e)])),userDetailHandlers['delete'](_0x52ba70);},0x1388),userDetailHandlers[_0x413170(0x121)](_0x52ba70,_0x56474d=>{const _0x51329a=_0x413170;_0x2ac1c6[_0x51329a(0x154)](_0x56474d[_0x51329a(0x12b)],_0x932ad7)&&(uid2UinMap[_0x932ad7]=_0x56474d[_0x51329a(0x11b)],_0x569fca?(_0x16a585=_0x56474d,_0x569fca=![]):(_0x505a71=!![],_0x2ac1c6['lYWcL'](_0x50dde3,_0x56474d)));}),_0x31b6f3[_0x413170(0x113)](_0x932ad7,[0x0])[_0x413170(0x131)](_0x57867c=>{});});}static async['getPSkey'](_0x24e43f,_0x17ae87=!![]){const _0x3e576f=_0x55a809,_0x5e6088={'pIExO':function(_0x571ad9,_0x35e2a8){return _0x571ad9||_0x35e2a8;},'tLBGR':function(_0x5e86be,_0x5eb9e5){return _0x5e86be-_0x5eb9e5;},'ecOqG':function(_0x5d22ce,_0x3c4724){return _0x5d22ce>_0x3c4724;},'MKweC':function(_0x4ee554,_0x4a22d1){return _0x4ee554===_0x4a22d1;},'FIGSY':function(_0x37d306,_0x3891c1,_0x166377){return _0x37d306(_0x3891c1,_0x166377);},'qzdxV':_0x3e576f(0x15c)},_0x2f381b=[],_0x55942f={};for(const _0x46c617 in _0x24e43f){const _0x3e9a88=Credentials[_0x3e576f(0x11c)]['get'](_0x24e43f[_0x46c617]),_0x24de76=Credentials[_0x3e576f(0x129)][_0x3e576f(0x12f)](_0x24e43f[_0x46c617]);_0x5e6088[_0x3e576f(0x14a)](!_0x3e9a88,!_0x24de76)||_0x5e6088[_0x3e576f(0x120)](Date['now'](),_0x24de76)>0x708*0x3e8||!_0x17ae87?_0x2f381b[_0x3e576f(0x149)](_0x24e43f[_0x46c617]):_0x55942f[_0x24e43f[_0x46c617]]=_0x3e9a88;}let _0x16d650={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x5e6088[_0x3e576f(0x132)](_0x2f381b[_0x3e576f(0x156)],0x0)&&(_0x16d650=await napCatCore['session'][_0x3e576f(0x15a)]()[_0x3e576f(0x15f)](_0x2f381b,!![]));const _0xd24c3c=_0x16d650['domainPskeyMap'];for(const _0x52034f of _0xd24c3c[_0x3e576f(0x145)]()){Credentials[_0x3e576f(0x11c)][_0x3e576f(0x121)](_0x52034f[0x0],_0x52034f[0x1]),Credentials[_0x3e576f(0x129)][_0x3e576f(0x121)](_0x52034f[0x0],Date[_0x3e576f(0x119)]());}const _0x53a164=Object[_0x3e576f(0x142)](Object['fromEntries'](_0xd24c3c),_0x55942f);if(_0x5e6088[_0x3e576f(0x125)](_0x16d650['result'],0x0))return _0x53a164;else _0x5e6088[_0x3e576f(0x118)](logError,_0x5e6088[_0x3e576f(0x153)],_0x16d650[_0x3e576f(0x115)]);return{};}static async[_0x55a809(0x137)](){const _0x5c2087=_0x55a809,_0x4e0c87=await napCatCore['session']['getRobotService']()[_0x5c2087(0x137)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x4e0c87?.['response']?.[_0x5c2087(0x13b)];}static async['getQzoneCookies'](){const _0x24ffed=_0x55a809,_0xeeb248={'unqPf':function(_0x1e3d59,_0x7b3372){return _0x1e3d59+_0x7b3372;},'rVYGp':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','sqbUg':_0x24ffed(0x117),'TojOH':_0x24ffed(0x150),'mCVql':function(_0x5540e1,_0x522cab,_0xed133d){return _0x5540e1(_0x522cab,_0xed133d);},'qmVYb':_0x24ffed(0x158)},_0x318a8b=_0xeeb248[_0x24ffed(0x12e)](_0xeeb248[_0x24ffed(0x12e)](_0xeeb248[_0x24ffed(0x12e)](_0xeeb248['unqPf'](_0xeeb248[_0x24ffed(0x143)]+selfInfo[_0x24ffed(0x11b)],_0xeeb248[_0x24ffed(0x126)]),Credentials[_0x24ffed(0x147)])+_0x24ffed(0x14f),selfInfo[_0x24ffed(0x11b)]),_0xeeb248[_0x24ffed(0x110)]);let _0x37f84b={};try{_0x37f84b=await RequestUtil[_0x24ffed(0x122)](_0x318a8b);}catch(_0x16e499){_0xeeb248[_0x24ffed(0x144)](logDebug,_0xeeb248['qmVYb'],_0x16e499),_0x37f84b={};}return _0x37f84b;}static async[_0x55a809(0x15e)](_0x1a0068=!![]){const _0x2e2527=_0x55a809,_0x6513ef={'sLaNp':function(_0x57c5e9,_0xb4509d){return _0x57c5e9>_0xb4509d;},'vndWT':function(_0x3bacff,_0x5cf86f){return _0x3bacff-_0x5cf86f;},'TOmaq':function(_0x688ed6,_0x5324f0){return _0x688ed6*_0x5324f0;},'IWQSD':function(_0x1d74eb,_0x3d0b9e){return _0x1d74eb+_0x3d0b9e;},'wwHwL':function(_0x142547,_0x2c433c){return _0x142547+_0x2c433c;},'guHfA':function(_0x339c9a,_0x570fad){return _0x339c9a+_0x570fad;},'rZNqc':function(_0x5302cc,_0x371d5b){return _0x5302cc+_0x371d5b;},'vcuaT':_0x2e2527(0x135),'QplAn':'&clientkey=','osDci':'请求获取Skey时失败','PmVHo':_0x2e2527(0x136)};try{if(Credentials[_0x2e2527(0x11a)]==0x0||_0x6513ef[_0x2e2527(0x139)](_0x6513ef['vndWT'](Date[_0x2e2527(0x119)](),Credentials[_0x2e2527(0x11a)]),_0x6513ef[_0x2e2527(0x146)](0x3e8,0xe10))||!_0x1a0068){const _0x11ad50=await napCatCore[_0x2e2527(0x133)][_0x2e2527(0x14b)]()[_0x2e2527(0x11d)]('');if(_0x11ad50[_0x2e2527(0x12c)]!==0x0)return'';const _0x456d4a=_0x11ad50[_0x2e2527(0x10e)],_0x3819f9=_0x11ad50[_0x2e2527(0x157)],_0x3cfdc5=_0x6513ef[_0x2e2527(0x152)](_0x6513ef[_0x2e2527(0x13a)](_0x6513ef['guHfA'](_0x6513ef[_0x2e2527(0x140)](_0x6513ef['vcuaT'],selfInfo[_0x2e2527(0x11b)]),_0x6513ef['QplAn']),_0x456d4a),'&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=')+_0x3819f9;let _0x25d767={};try{_0x25d767=await RequestUtil[_0x2e2527(0x122)](_0x3cfdc5);}catch(_0x1d06d1){logDebug(_0x6513ef[_0x2e2527(0x13f)],_0x1d06d1),_0x25d767={};}const _0x26571c=_0x25d767[_0x6513ef[_0x2e2527(0x160)]];if(!_0x26571c)return'';return Credentials[_0x2e2527(0x147)]=_0x456d4a,Credentials[_0x2e2527(0x12a)]=_0x3819f9,Credentials['CreatTime']=Date['now'](),Credentials[_0x2e2527(0x134)]=_0x26571c,_0x26571c;}return Credentials['Skey'];}catch(_0x182f48){}return undefined;}}