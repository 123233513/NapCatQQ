function _0x5091(){const _0x2695a7=['keyIndex','onLoginSuccess','addListener','result','ZzKiI','16590624HvtldO','5KPkJJh','getUserInfo','JtbkY','3016TsoJJx','forEach','getUserDetailInfoWithBizInfo','AeOJY','getUserDetailInfo','setHeader','entries','setStatus','PskeyTime','now','43430AozgmG','then','CreatTime','uin','&clientkey=','ENDme','mCgdx','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','response','获取Pskey失败','QFMbe','Skey','set','clientKey','19017LHGyHs','forceFetchClientKey','19906oagUQs','getTipOffService','getRobotUinRange','HttpsGetCookies','robotUinRanges','694099BvevCm','6MENQiC','onProfileDetailInfoChanged','getUserDetailInfo\x20timeout','push','getProfileService','delete','session','1418523KjoLro','HupMq','getSelfInfo','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','tXAcB','get','473YYypcL','setBuddyProfileLike','NTEfn','bKmfO','errMsg','getProfileLikeService','DeLkZ','3019028UtRZDp','length','qIdmx','318CoRLdF','uid','skey','PskeyData','请求获取Skey时失败','getRobotService'];_0x5091=function(){return _0x2695a7;};return _0x5091();}const _0x428a8a=_0x2186;(function(_0xbf0536,_0x498bbb){const _0x10cba1=_0x2186,_0x2abeca=_0xbf0536();while(!![]){try{const _0x3cf59b=parseInt(_0x10cba1(0x18c))/0x1+-parseInt(_0x10cba1(0x17f))/0x2*(-parseInt(_0x10cba1(0x156))/0x3)+parseInt(_0x10cba1(0x153))/0x4*(parseInt(_0x10cba1(0x162))/0x5)+parseInt(_0x10cba1(0x185))/0x6*(-parseInt(_0x10cba1(0x184))/0x7)+-parseInt(_0x10cba1(0x165))/0x8*(parseInt(_0x10cba1(0x17d))/0x9)+parseInt(_0x10cba1(0x16f))/0xa*(-parseInt(_0x10cba1(0x14c))/0xb)+-parseInt(_0x10cba1(0x161))/0xc;if(_0x3cf59b===_0x498bbb)break;else _0x2abeca['push'](_0x2abeca['shift']());}catch(_0x3d852b){_0x2abeca['push'](_0x2abeca['shift']());}}}(_0x5091,0xba567));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';function _0x2186(_0x47a9b9,_0x51e497){const _0x509166=_0x5091();return _0x2186=function(_0x2186a0,_0x23dc2c){_0x2186a0=_0x2186a0-0x147;let _0x4caccf=_0x509166[_0x2186a0];return _0x4caccf;},_0x2186(_0x47a9b9,_0x51e497);}import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x428a8a(0x186)]=_0x2f5929=>{const _0x19640b=_0x428a8a;userInfoCache[_0x2f5929[_0x19640b(0x157)]]=_0x2f5929,userDetailHandlers[_0x19640b(0x166)](_0x549660=>_0x549660(_0x2f5929));},setTimeout(()=>{const _0x280a45=_0x428a8a;napCatCore[_0x280a45(0x15d)](()=>{const _0x2fb566=_0x280a45;napCatCore[_0x2fb566(0x15e)](profileListener);});},0x64);export class NTQQUserApi{static async['setSelfOnlineStatus'](_0x56e1ba,_0x239419,_0x545204){const _0x171312=_0x428a8a;return napCatCore[_0x171312(0x18b)]['getMsgService']()[_0x171312(0x16c)]({'status':_0x56e1ba,'extStatus':_0x239419,'batteryStatus':_0x545204});}static async['like'](_0x359743,_0x3b1e9f=0x1){const _0x337c5a=_0x428a8a;return napCatCore[_0x337c5a(0x18b)][_0x337c5a(0x151)]()[_0x337c5a(0x14d)]({'friendUid':_0x359743,'sourceId':0x47,'doLikeCount':_0x3b1e9f,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x1730a1){const _0x13a5e3=_0x428a8a,_0xbcad8d=napCatCore[_0x13a5e3(0x18b)][_0x13a5e3(0x189)]()[_0x13a5e3(0x16a)](_0x1730a1);return{'result':_0xbcad8d?.[_0x13a5e3(0x15f)],'errMsg':_0xbcad8d?.[_0x13a5e3(0x150)]};}static async[_0x428a8a(0x148)](){}static async[_0x428a8a(0x163)](_0x29d86f){}static async[_0x428a8a(0x169)](_0x1d7f33){const _0x356779=_0x428a8a,_0x227815={'GEKsW':function(_0x2c4fb3,_0x25a729){return _0x2c4fb3(_0x25a729);},'mCgdx':_0x356779(0x187)},_0x36c56d=napCatCore[_0x356779(0x18b)]['getProfileService']();return new Promise((_0x2dd7af,_0x3e3f41)=>{const _0x386a40=_0x356779,_0xea282f=randomUUID();let _0x803334=![];setTimeout(()=>{const _0x198f68=_0x2186;!_0x803334&&_0x227815['GEKsW'](_0x3e3f41,_0x227815[_0x198f68(0x175)]);},0x1388),userDetailHandlers[_0x386a40(0x17b)](_0xea282f,_0xc6a4ca=>{const _0x2a6b4d=_0x386a40;_0xc6a4ca[_0x2a6b4d(0x157)]===_0x1d7f33&&(_0x803334=!![],userDetailHandlers[_0x2a6b4d(0x18a)](_0xea282f),uid2UinMap[_0x1d7f33]=_0xc6a4ca[_0x2a6b4d(0x172)],_0x2dd7af(_0xc6a4ca));}),_0x36c56d[_0x386a40(0x167)](_0x1d7f33,[0x0])[_0x386a40(0x170)](_0x5cdaf7=>{});});}static async['getPSkey'](_0x4c6044,_0x35f3bd=!![]){const _0x5a2347=_0x428a8a,_0x1536ca={'ENDme':function(_0x1f3998,_0x58df55){return _0x1f3998||_0x58df55;},'qIdmx':function(_0x204f70,_0x2e452e){return _0x204f70>_0x2e452e;},'clLwJ':function(_0x38b54b,_0x1e2be7){return _0x38b54b-_0x1e2be7;},'HybHZ':function(_0x594af,_0x49fa3a){return _0x594af*_0x49fa3a;},'AeOJY':function(_0x33cbb7,_0x10551b){return _0x33cbb7===_0x10551b;},'ZzKiI':function(_0x561191,_0x10839d,_0x26fc36){return _0x561191(_0x10839d,_0x26fc36);}},_0x46c870=[],_0x54d9b8={};for(const _0x3d766d in _0x4c6044){const _0x34d9d2=Credentials[_0x5a2347(0x159)][_0x5a2347(0x14b)](_0x4c6044[_0x3d766d]),_0x1c98ec=Credentials[_0x5a2347(0x16d)][_0x5a2347(0x14b)](_0x4c6044[_0x3d766d]);_0x1536ca[_0x5a2347(0x174)](!_0x34d9d2,!_0x1c98ec)||_0x1536ca[_0x5a2347(0x155)](_0x1536ca['clLwJ'](Date[_0x5a2347(0x16e)](),_0x1c98ec),_0x1536ca['HybHZ'](0x708,0x3e8))||!_0x35f3bd?_0x46c870[_0x5a2347(0x188)](_0x4c6044[_0x3d766d]):_0x54d9b8[_0x4c6044[_0x3d766d]]=_0x34d9d2;}let _0x851080={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x1536ca[_0x5a2347(0x155)](_0x46c870[_0x5a2347(0x154)],0x0)&&(_0x851080=await napCatCore[_0x5a2347(0x18b)][_0x5a2347(0x180)]()['getPskey'](_0x46c870,!![]));const _0x1e9f15=_0x851080['domainPskeyMap'];for(const _0x2fb2ad of _0x1e9f15[_0x5a2347(0x16b)]()){Credentials['PskeyData'][_0x5a2347(0x17b)](_0x2fb2ad[0x0],_0x2fb2ad[0x1]),Credentials['PskeyTime']['set'](_0x2fb2ad[0x0],Date['now']());}const _0x3ecee7=Object['assign'](Object['fromEntries'](_0x1e9f15),_0x54d9b8);if(_0x1536ca[_0x5a2347(0x168)](_0x851080[_0x5a2347(0x15f)],0x0))return _0x3ecee7;else _0x1536ca[_0x5a2347(0x160)](logError,_0x5a2347(0x178),_0x851080[_0x5a2347(0x150)]);return{};}static async[_0x428a8a(0x181)](){const _0x5f303d=_0x428a8a,_0x3f9f26=await napCatCore[_0x5f303d(0x18b)][_0x5f303d(0x15b)]()[_0x5f303d(0x181)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x3f9f26?.[_0x5f303d(0x177)]?.[_0x5f303d(0x183)];}static async['getSkey'](_0x4a373f=!![]){const _0x19b60d=_0x428a8a,_0x5b7cb6={'kndTI':function(_0x467582,_0x5e3266){return _0x467582==_0x5e3266;},'BzrNr':function(_0x41fba1,_0x263dce){return _0x41fba1>_0x263dce;},'JtbkY':function(_0x59dd62,_0x5569a1){return _0x59dd62-_0x5569a1;},'tXAcB':function(_0x4a9ac8,_0x5ed1ee){return _0x4a9ac8*_0x5ed1ee;},'EEVHT':function(_0x256ac5,_0x4e449d){return _0x256ac5!==_0x4e449d;},'PJveN':function(_0x1d5f89,_0x320e9a){return _0x1d5f89+_0x320e9a;},'uJahB':function(_0xc32579,_0xed6f1f){return _0xc32579+_0xed6f1f;},'NTEfn':function(_0x61a40f,_0x1cb542){return _0x61a40f+_0x1cb542;},'QFMbe':function(_0x591adb,_0x44cfa2){return _0x591adb+_0x44cfa2;},'HupMq':_0x19b60d(0x149),'DeLkZ':_0x19b60d(0x173),'bKmfO':_0x19b60d(0x176),'fUlHy':_0x19b60d(0x15a)};try{if(_0x5b7cb6['kndTI'](Credentials[_0x19b60d(0x171)],0x0)||_0x5b7cb6['BzrNr'](_0x5b7cb6[_0x19b60d(0x164)](Date[_0x19b60d(0x16e)](),Credentials[_0x19b60d(0x171)]),_0x5b7cb6[_0x19b60d(0x14a)](0x3e8,0xe10))||!_0x4a373f){const _0xaa18b5=await napCatCore[_0x19b60d(0x18b)]['getTicketService']()[_0x19b60d(0x17e)]('');if(_0x5b7cb6['EEVHT'](_0xaa18b5[_0x19b60d(0x15f)],0x0))return'';const _0x3efed8=_0xaa18b5[_0x19b60d(0x17c)],_0x453bf2=_0xaa18b5[_0x19b60d(0x15c)],_0x51a38a=_0x5b7cb6['PJveN'](_0x5b7cb6['uJahB'](_0x5b7cb6[_0x19b60d(0x14e)](_0x5b7cb6[_0x19b60d(0x179)](_0x5b7cb6[_0x19b60d(0x147)],selfInfo['uin']),_0x5b7cb6[_0x19b60d(0x152)])+_0x3efed8,_0x5b7cb6[_0x19b60d(0x14f)]),_0x453bf2);let _0x13f96f;try{_0x13f96f=await RequestUtil[_0x19b60d(0x182)](_0x51a38a);}catch(_0x317301){logDebug(_0x5b7cb6['fUlHy'],_0x317301),_0x13f96f=new Map();}const _0x47b111=_0x13f96f[_0x19b60d(0x14b)](_0x19b60d(0x158));if(!_0x47b111)return'';return Credentials['CreatTime']=Date[_0x19b60d(0x16e)](),Credentials[_0x19b60d(0x17a)]=_0x47b111,_0x47b111;}return Credentials[_0x19b60d(0x17a)];}catch(_0x1ab182){}return undefined;}}