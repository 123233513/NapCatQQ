const _0x36a0e6=_0x2d5d;function _0x126a(){const _0x3c0980=['getProfileService','session','forceFetchClientKey','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','TxhKE','34305Jusrzg','getRobotService','robotUinRanges','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','3759680jjEmUJ','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','uid','clientKey','addListener','XMqix','uin','Cuinq','PskeyData','setBuddyProfileLike','CreatTime','PskeyTime','KoJZX','mGLxF','请求获取Skey时失败','getUserDetailInfo\x20timeout','&clientkey=','setSelfOnlineStatus','JunyS','onLoginSuccess','now','MpmDC','1WImdxS','response','getQzoneCookies','获取Pskey失败','MORzM','setQQAvatar','ItWjQ','aXBgl','iIGVy','%2Finfocenter&keyindex=19%27','assign','QLFKg','getUserDetailInfo','getTipOffService','getUserInfo','jzmEG','456VrMtWA','HttpsGetCookies','Fqqrv','delete','errMsg','push','4454004aBQVDe','set','fromEntries','keyIndex','24MfmxLV','841196GMTJDn','setStatus','Skey','ClientKey','snALq','VYdOs','请求获取Cookies时失败','result','KTpcK','domainPskeyMap','Mpdit','22qaRrne','getProfileLikeService','HQvUe','4164006WYdcpH','getSkey','1614330JojmGh','BWeTN','setHeader','ARwuI','getPskey','like','qJKqO','1298547msOevU','entries'];_0x126a=function(){return _0x3c0980;};return _0x126a();}(function(_0x331027,_0x86e8b9){const _0x1edf7c=_0x2d5d,_0x2e72dc=_0x331027();while(!![]){try{const _0x3d4a60=-parseInt(_0x1edf7c(0x126))/0x1*(-parseInt(_0x1edf7c(0xee))/0x2)+-parseInt(_0x1edf7c(0xfe))/0x3+-parseInt(_0x1edf7c(0x136))/0x4*(-parseInt(_0x1edf7c(0x10c))/0x5)+-parseInt(_0x1edf7c(0xe9))/0x6+-parseInt(_0x1edf7c(0xfc))/0x7+-parseInt(_0x1edf7c(0xed))/0x8*(-parseInt(_0x1edf7c(0x105))/0x9)+-parseInt(_0x1edf7c(0x110))/0xa*(-parseInt(_0x1edf7c(0xf9))/0xb);if(_0x3d4a60===_0x86e8b9)break;else _0x2e72dc['push'](_0x2e72dc['shift']());}catch(_0x146ad9){_0x2e72dc['push'](_0x2e72dc['shift']());}}}(_0x126a,0x7d0eb));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x2d5d(_0x56a931,_0x392dd8){const _0x126a3a=_0x126a();return _0x2d5d=function(_0x2d5d2c,_0x30c0a7){_0x2d5d2c=_0x2d5d2c-0xe6;let _0x44b739=_0x126a3a[_0x2d5d2c];return _0x44b739;},_0x2d5d(_0x56a931,_0x392dd8);}profileListener['onProfileDetailInfoChanged']=_0x4c1143=>{const _0x4df310=_0x2d5d;userInfoCache[_0x4c1143[_0x4df310(0x112)]]=_0x4c1143,userDetailHandlers['forEach'](_0xbecbb9=>_0xbecbb9(_0x4c1143));},setTimeout(()=>{const _0x58c201=_0x2d5d;napCatCore[_0x58c201(0x123)](()=>{const _0x29a584=_0x58c201;napCatCore[_0x29a584(0x114)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x36a0e6(0x121)](_0x56fd0d,_0xab60d9,_0x2a0f67){const _0x55dd78=_0x36a0e6;return napCatCore[_0x55dd78(0x108)]['getMsgService']()[_0x55dd78(0xef)]({'status':_0x56fd0d,'extStatus':_0xab60d9,'batteryStatus':_0x2a0f67});}static async[_0x36a0e6(0x103)](_0x453829,_0x10d937=0x1){const _0x3b191a=_0x36a0e6;return napCatCore[_0x3b191a(0x108)][_0x3b191a(0xfa)]()[_0x3b191a(0x119)]({'friendUid':_0x453829,'sourceId':0x47,'doLikeCount':_0x10d937,'doLikeTollCount':0x0});}static async[_0x36a0e6(0x12b)](_0x14de08){const _0x14d7c1=_0x36a0e6,_0x159ca7=napCatCore[_0x14d7c1(0x108)][_0x14d7c1(0x107)]()[_0x14d7c1(0x100)](_0x14de08);return{'result':_0x159ca7?.[_0x14d7c1(0xf5)],'errMsg':_0x159ca7?.[_0x14d7c1(0xe7)]};}static async['getSelfInfo'](){}static async[_0x36a0e6(0x134)](_0x26a675){}static async[_0x36a0e6(0x132)](_0x141f00){const _0x363e3b=_0x36a0e6,_0x4686a1={'aXBgl':_0x363e3b(0x11f),'JunyS':function(_0x4012c9,_0x2c3d2b){return _0x4012c9===_0x2c3d2b;},'Fqqrv':function(_0x359bc7){return _0x359bc7();},'jzmEG':function(_0x29c09f,_0x4e2d8b,_0x537d64){return _0x29c09f(_0x4e2d8b,_0x537d64);}},_0x2c09fc=napCatCore[_0x363e3b(0x108)][_0x363e3b(0x107)]();return new Promise((_0xb73849,_0x45540c)=>{const _0x391005=_0x363e3b,_0x3b97a2={'QLFKg':function(_0x57e074,_0x7764e1){return _0x57e074(_0x7764e1);},'MpmDC':_0x4686a1[_0x391005(0x12d)],'BjPOY':function(_0x2b98fd,_0x4d7ba4){const _0x1f6214=_0x391005;return _0x4686a1[_0x1f6214(0x122)](_0x2b98fd,_0x4d7ba4);},'CzBhy':function(_0x2d973c,_0xfbcb39){return _0x2d973c(_0xfbcb39);}},_0x502002=_0x4686a1[_0x391005(0x138)](randomUUID);let _0x30cb63=![],_0x2e2711=undefined,_0x306dc3=!![];_0x4686a1[_0x391005(0x135)](setTimeout,()=>{const _0x22a09c=_0x391005;!_0x30cb63&&(_0x2e2711?_0x3b97a2[_0x22a09c(0x131)](_0xb73849,_0x2e2711):_0x45540c(_0x3b97a2[_0x22a09c(0x125)])),userDetailHandlers[_0x22a09c(0xe6)](_0x502002);},0x1388),userDetailHandlers[_0x391005(0xea)](_0x502002,_0x20d67f=>{const _0x28e5ea=_0x391005;_0x3b97a2['BjPOY'](_0x20d67f['uid'],_0x141f00)&&(uid2UinMap[_0x141f00]=_0x20d67f[_0x28e5ea(0x116)],_0x306dc3?(_0x2e2711=_0x20d67f,_0x306dc3=![]):(_0x30cb63=!![],_0x3b97a2['CzBhy'](_0xb73849,_0x20d67f)));}),_0x2c09fc['getUserDetailInfoWithBizInfo'](_0x141f00,[0x0])['then'](_0x1596b5=>{});});}static async['getPSkey'](_0x3e3162,_0x243dfa=!![]){const _0x347ab2=_0x36a0e6,_0x3cc35c={'Cuinq':function(_0x299210,_0x3ae7ff){return _0x299210||_0x3ae7ff;},'VYdOs':function(_0x5d158d,_0xf98a1){return _0x5d158d>_0xf98a1;},'MORzM':function(_0x2ae644,_0x575438){return _0x2ae644*_0x575438;},'BWeTN':function(_0xcf84d7,_0x227a9e){return _0xcf84d7===_0x227a9e;}},_0x169b53=[],_0x196dd3={};for(const _0x386dd2 in _0x3e3162){const _0x5a08df=Credentials[_0x347ab2(0x118)]['get'](_0x3e3162[_0x386dd2]),_0x5c8cec=Credentials[_0x347ab2(0x11b)]['get'](_0x3e3162[_0x386dd2]);_0x3cc35c[_0x347ab2(0x117)](!_0x5a08df,!_0x5c8cec)||_0x3cc35c[_0x347ab2(0xf3)](Date['now']()-_0x5c8cec,_0x3cc35c[_0x347ab2(0x12a)](0x708,0x3e8))||!_0x243dfa?_0x169b53[_0x347ab2(0xe8)](_0x3e3162[_0x386dd2]):_0x196dd3[_0x3e3162[_0x386dd2]]=_0x5a08df;}let _0x1f24e8={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x3cc35c[_0x347ab2(0xf3)](_0x169b53['length'],0x0)&&(_0x1f24e8=await napCatCore[_0x347ab2(0x108)][_0x347ab2(0x133)]()[_0x347ab2(0x102)](_0x169b53,!![]));const _0x1151fd=_0x1f24e8[_0x347ab2(0xf7)];for(const _0x2637e3 of _0x1151fd[_0x347ab2(0x106)]()){Credentials[_0x347ab2(0x118)][_0x347ab2(0xea)](_0x2637e3[0x0],_0x2637e3[0x1]),Credentials['PskeyTime']['set'](_0x2637e3[0x0],Date[_0x347ab2(0x124)]());}const _0x473e78=Object[_0x347ab2(0x130)](Object[_0x347ab2(0xeb)](_0x1151fd),_0x196dd3);if(_0x3cc35c[_0x347ab2(0xff)](_0x1f24e8[_0x347ab2(0xf5)],0x0))return _0x473e78;else logError(_0x347ab2(0x129),_0x1f24e8[_0x347ab2(0xe7)]);return{};}static async['getRobotUinRange'](){const _0x42b9d3=_0x36a0e6,_0x5c1097=await napCatCore['session'][_0x42b9d3(0x10d)]()['getRobotUinRange']({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x5c1097?.[_0x42b9d3(0x127)]?.[_0x42b9d3(0x10e)];}static async[_0x36a0e6(0x128)](){const _0x9dd149=_0x36a0e6,_0x344f18={'ARwuI':function(_0x2c7115,_0x450caa){return _0x2c7115+_0x450caa;},'snALq':function(_0x9ee14c,_0x5ed594){return _0x9ee14c+_0x5ed594;},'Mpdit':function(_0x28c1cb,_0x57c5a4){return _0x28c1cb+_0x57c5a4;},'MRHBw':function(_0x9874b6,_0x412b19){return _0x9874b6+_0x412b19;},'KTpcK':function(_0x2235c2,_0x22c066){return _0x2235c2+_0x22c066;},'AvDnm':_0x9dd149(0x111),'KoJZX':_0x9dd149(0x120),'iIGVy':_0x9dd149(0x10a),'HQvUe':_0x9dd149(0x12f),'AaZve':function(_0x4a0090,_0x4f87c6,_0x3692b7){return _0x4a0090(_0x4f87c6,_0x3692b7);},'PzWBl':_0x9dd149(0xf4)},_0x47e5fb=_0x344f18[_0x9dd149(0x101)](_0x344f18[_0x9dd149(0xf2)](_0x344f18[_0x9dd149(0xf8)](_0x344f18['MRHBw'](_0x344f18['ARwuI'](_0x344f18[_0x9dd149(0xf6)](_0x344f18['AvDnm'],selfInfo[_0x9dd149(0x116)]),_0x344f18[_0x9dd149(0x11c)]),Credentials[_0x9dd149(0xf1)]),_0x344f18[_0x9dd149(0x12e)]),selfInfo[_0x9dd149(0x116)]),_0x344f18[_0x9dd149(0xfb)]);let _0x336ed5={};try{_0x336ed5=await RequestUtil['HttpsGetCookies'](_0x47e5fb);}catch(_0x578739){_0x344f18['AaZve'](logDebug,_0x344f18['PzWBl'],_0x578739),_0x336ed5={};}return _0x336ed5;}static async[_0x36a0e6(0xfd)](_0x4af64e=!![]){const _0x57bd83=_0x36a0e6,_0x19cddd={'ItWjQ':function(_0x296035,_0x29575c){return _0x296035==_0x29575c;},'TxhKE':function(_0x1489d1,_0x359597){return _0x1489d1-_0x359597;},'tWgzJ':function(_0xff58f3,_0x39380d){return _0xff58f3!==_0x39380d;},'mGLxF':function(_0x2983a6,_0x5cfcde){return _0x2983a6+_0x5cfcde;},'Iahmq':'&clientkey=','XMqix':function(_0x558af1,_0x48e737,_0x166164){return _0x558af1(_0x48e737,_0x166164);},'qJKqO':_0x57bd83(0x11e)};try{if(_0x19cddd[_0x57bd83(0x12c)](Credentials[_0x57bd83(0x11a)],0x0)||_0x19cddd[_0x57bd83(0x10b)](Date[_0x57bd83(0x124)](),Credentials[_0x57bd83(0x11a)])>0x3e8*0xe10||!_0x4af64e){const _0x2ac697=await napCatCore['session']['getTicketService']()[_0x57bd83(0x109)]('');if(_0x19cddd['tWgzJ'](_0x2ac697[_0x57bd83(0xf5)],0x0))return'';const _0x2e1edc=_0x2ac697[_0x57bd83(0x113)],_0xf862d5=_0x2ac697[_0x57bd83(0xec)],_0x1e4d64=_0x19cddd[_0x57bd83(0x11d)](_0x19cddd[_0x57bd83(0x11d)](_0x19cddd[_0x57bd83(0x11d)](_0x19cddd[_0x57bd83(0x11d)](_0x57bd83(0x111),selfInfo['uin']),_0x19cddd['Iahmq']),_0x2e1edc)+_0x57bd83(0x10f),_0xf862d5);let _0x44b283={};try{_0x44b283=await RequestUtil[_0x57bd83(0x137)](_0x1e4d64);}catch(_0xc7bbb1){_0x19cddd[_0x57bd83(0x115)](logDebug,_0x19cddd[_0x57bd83(0x104)],_0xc7bbb1),_0x44b283={};}const _0x102137=_0x44b283['skey'];if(!_0x102137)return'';return Credentials[_0x57bd83(0xf1)]=_0x2e1edc,Credentials['KeyIndex']=_0xf862d5,Credentials[_0x57bd83(0x11a)]=Date[_0x57bd83(0x124)](),Credentials[_0x57bd83(0xf0)]=_0x102137,_0x102137;}return Credentials[_0x57bd83(0xf0)];}catch(_0x284f7b){}return undefined;}}