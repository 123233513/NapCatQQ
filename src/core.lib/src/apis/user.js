const _0x3b6948=_0xed1c;(function(_0x822e2f,_0x4f84ce){const _0x45e850=_0xed1c,_0xdb08c7=_0x822e2f();while(!![]){try{const _0x2dc93e=parseInt(_0x45e850(0x9b))/0x1*(parseInt(_0x45e850(0xae))/0x2)+parseInt(_0x45e850(0x8e))/0x3+parseInt(_0x45e850(0x9e))/0x4*(-parseInt(_0x45e850(0x91))/0x5)+parseInt(_0x45e850(0x81))/0x6*(-parseInt(_0x45e850(0x99))/0x7)+parseInt(_0x45e850(0x85))/0x8+-parseInt(_0x45e850(0x8b))/0x9+parseInt(_0x45e850(0x8f))/0xa*(-parseInt(_0x45e850(0xac))/0xb);if(_0x2dc93e===_0x4f84ce)break;else _0xdb08c7['push'](_0xdb08c7['shift']());}catch(_0x187b7f){_0xdb08c7['push'](_0xdb08c7['shift']());}}}(_0x49cb,0x9a74b));import{Credentials,selfInfo}from'@/core/data';function _0xed1c(_0x36f6f0,_0x14cabd){const _0x49cb7f=_0x49cb();return _0xed1c=function(_0xed1c9a,_0x17acee){_0xed1c9a=_0xed1c9a-0x7c;let _0x3cb118=_0x49cb7f[_0xed1c9a];return _0x3cb118;},_0xed1c(_0x36f6f0,_0x14cabd);}import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{HttpGetCookies}from'../../../common/utils/request';import{logError}from'@/common/utils/log';function _0x49cb(){const _0x118e3a=['5056970TrbIJb','mPodn','10qrPgUz','TSenw','IrEwF','Skey','getSelfInfo','getUserInfo','TpfHP','forEach','7cuqIvo','forceFetchClientKey','795928NZkGLV','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','setSelfOnlineStatus','1207624diyFyN','onProfileDetailInfoChanged','uid','push','errMsg','getPskey','entries','now','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','getTipOffService','getTicketService','CreatTime','&clientkey=','eGqhO','11bTimvz','assign','2EFVkmJ','qcnMn','getMsgService','get','fromEntries','获取Pskey失败','PskeyData','mFkdH','onLoginSuccess','getUserDetailInfo','setBuddyProfileLike','fHmGZ','set','zCkoA','getPSkey','144930HtQSuo','delete','session','getProfileService','2259216ZTjQzj','jbwzK','result','KlTle','PskeyTime','getUserDetailInfoWithBizInfo','3415347qfoXgo','PvkFQ','getUserDetailInfo\x20timeout','3202404IJbsBl'];_0x49cb=function(){return _0x118e3a;};return _0x49cb();}const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x3b6948(0x9f)]=_0x526f48=>{const _0x3eb3a7=_0x3b6948;userInfoCache[_0x526f48[_0x3eb3a7(0xa0)]]=_0x526f48,userDetailHandlers[_0x3eb3a7(0x98)](_0x2102b7=>_0x2102b7(_0x526f48));},setTimeout(()=>{const _0x16b795=_0x3b6948;napCatCore[_0x16b795(0xb6)](()=>{napCatCore['addListener'](profileListener);});},0x64);export class NTQQUserApi{static async[_0x3b6948(0x9d)](_0x555ab6,_0x3baf9c,_0xd31a7f){const _0x437f5b=_0x3b6948;return napCatCore[_0x437f5b(0x83)][_0x437f5b(0xb0)]()['setStatus']({'status':_0x555ab6,'extStatus':_0x3baf9c,'batteryStatus':_0xd31a7f});}static async['like'](_0x108e87,_0x1acc06=0x1){const _0x1937e7=_0x3b6948;return napCatCore[_0x1937e7(0x83)]['getProfileLikeService']()[_0x1937e7(0x7c)]({'friendUid':_0x108e87,'sourceId':0x47,'doLikeCount':_0x1acc06,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x306ce0){const _0x4fe662=_0x3b6948,_0x1dbd2f=napCatCore[_0x4fe662(0x83)][_0x4fe662(0x84)]()['setHeader'](_0x306ce0);return{'result':_0x1dbd2f?.[_0x4fe662(0x87)],'errMsg':_0x1dbd2f?.[_0x4fe662(0xa2)]};}static async[_0x3b6948(0x95)](){}static async[_0x3b6948(0x96)](_0x14c35b){}static async[_0x3b6948(0xb7)](_0x2b9f8e){const _0x3aa321=_0x3b6948,_0x4062a5={'fHmGZ':function(_0x13cd31,_0xd38232){return _0x13cd31===_0xd38232;},'qcnMn':function(_0x220ab8,_0x1ab683){return _0x220ab8(_0x1ab683);},'KlTle':function(_0x384580,_0x474d4b,_0x447922){return _0x384580(_0x474d4b,_0x447922);}},_0x5473aa=napCatCore[_0x3aa321(0x83)][_0x3aa321(0x84)]();return new Promise((_0x656c3b,_0x5bc48e)=>{const _0x577449=_0x3aa321,_0x5435ae={'QAjIT':_0x577449(0x8d),'IGZWX':function(_0x56bf4c,_0x53749b){const _0xcbf845=_0x577449;return _0x4062a5[_0xcbf845(0x7d)](_0x56bf4c,_0x53749b);},'PvkFQ':function(_0x21fc02,_0x3cb0cd){const _0x399811=_0x577449;return _0x4062a5[_0x399811(0xaf)](_0x21fc02,_0x3cb0cd);}},_0x4a28a2=randomUUID();let _0x4aaf3c=![];_0x4062a5[_0x577449(0x88)](setTimeout,()=>{!_0x4aaf3c&&_0x5bc48e(_0x5435ae['QAjIT']);},0x1388),userDetailHandlers[_0x577449(0x7e)](_0x4a28a2,_0x4f7d66=>{const _0x3fc175=_0x577449;_0x5435ae['IGZWX'](_0x4f7d66[_0x3fc175(0xa0)],_0x2b9f8e)&&(_0x4aaf3c=!![],userDetailHandlers[_0x3fc175(0x82)](_0x4a28a2),_0x5435ae[_0x3fc175(0x8c)](_0x656c3b,_0x4f7d66));}),_0x5473aa[_0x577449(0x8a)](_0x2b9f8e,[0x0])['then'](_0x76dc72=>{});});}static async[_0x3b6948(0x80)](_0x5468e5,_0x2b5cba=!![]){const _0x8d89a1=_0x3b6948,_0x4ef831={'TSenw':function(_0x15f99c,_0x412269){return _0x15f99c-_0x412269;},'zCkoA':function(_0x5bc28f,_0x5d4ce3){return _0x5bc28f*_0x5d4ce3;},'mFkdH':function(_0x39d482,_0x3c5ec2){return _0x39d482===_0x3c5ec2;},'Mtnsy':_0x8d89a1(0xb3)};let _0x691729=[],_0x124bd2={};for(let _0x3670dd in _0x5468e5){let _0x4e3c02=Credentials[_0x8d89a1(0xb4)][_0x8d89a1(0xb1)](_0x5468e5[_0x3670dd]),_0x76ac7b=Credentials[_0x8d89a1(0x89)]['get'](_0x5468e5[_0x3670dd]);!_0x4e3c02||!_0x76ac7b||_0x4ef831[_0x8d89a1(0x92)](Date[_0x8d89a1(0xa5)](),_0x76ac7b)>_0x4ef831[_0x8d89a1(0x7f)](0x708,0x3e8)||!_0x2b5cba?_0x691729[_0x8d89a1(0xa1)](_0x5468e5[_0x3670dd]):_0x124bd2[_0x5468e5[_0x3670dd]]=_0x4e3c02;}let _0x4b1c82={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x691729['length']>0x0&&(_0x4b1c82=await napCatCore['session'][_0x8d89a1(0xa7)]()[_0x8d89a1(0xa3)](_0x691729,!![]));let _0x267a6c=_0x4b1c82['domainPskeyMap'];for(let _0x4df6d0 of _0x267a6c[_0x8d89a1(0xa4)]()){Credentials[_0x8d89a1(0xb4)]['set'](_0x4df6d0[0x0],_0x4df6d0[0x1]),Credentials[_0x8d89a1(0x89)][_0x8d89a1(0x7e)](_0x4df6d0[0x0],Date[_0x8d89a1(0xa5)]());}let _0x36fd14=Object[_0x8d89a1(0xad)](Object[_0x8d89a1(0xb2)](_0x267a6c),_0x124bd2);if(_0x4ef831[_0x8d89a1(0xb5)](_0x4b1c82[_0x8d89a1(0x87)],0x0))return _0x36fd14;else logError(_0x4ef831['Mtnsy'],_0x4b1c82[_0x8d89a1(0xa2)]);return{};}static async['getRobotUinRange'](){const _0x4d5112=await napCatCore['session']['getRobotService']()['getRobotUinRange']({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x4d5112?.['response']?.['robotUinRanges'];}static async['getSkey'](_0x36da8e=!![]){const _0x4d106f=_0x3b6948,_0x578f99={'IuNIS':function(_0x42bfc0,_0x20d94e){return _0x42bfc0>_0x20d94e;},'eGqhO':function(_0x312ac0,_0x1585f8){return _0x312ac0!==_0x1585f8;},'IrEwF':function(_0x4366f5,_0x5d9b39){return _0x4366f5+_0x5d9b39;},'jbwzK':function(_0x192c0d,_0x42f93f){return _0x192c0d+_0x42f93f;},'iDAmC':_0x4d106f(0xa6),'yqIHw':_0x4d106f(0xaa),'TpfHP':_0x4d106f(0x9c),'mPodn':'skey'};try{if(Credentials[_0x4d106f(0xa9)]==0x0||_0x578f99['IuNIS'](Date['now']()-Credentials[_0x4d106f(0xa9)],0x3e8*0xe10)||!_0x36da8e){const _0x2f4b93=await napCatCore[_0x4d106f(0x83)][_0x4d106f(0xa8)]()[_0x4d106f(0x9a)]('');if(_0x578f99[_0x4d106f(0xab)](_0x2f4b93[_0x4d106f(0x87)],0x0))return'';const _0x5ec466=_0x2f4b93['clientKey'],_0x409fd1=_0x2f4b93['keyIndex'],_0x5e59d5=_0x578f99[_0x4d106f(0x93)](_0x578f99[_0x4d106f(0x93)](_0x578f99[_0x4d106f(0x86)](_0x578f99['iDAmC'],selfInfo['uin'])+_0x578f99['yqIHw']+_0x5ec466,_0x578f99[_0x4d106f(0x97)]),_0x409fd1),_0x43a3b6=await HttpGetCookies(_0x5e59d5),_0x1fb099=_0x43a3b6[_0x4d106f(0xb1)](_0x578f99[_0x4d106f(0x90)]);if(!_0x1fb099)return'';return Credentials[_0x4d106f(0xa9)]=Date['now'](),Credentials[_0x4d106f(0x94)]=_0x1fb099,_0x1fb099;}return Credentials['Skey'];}catch(_0x54d337){}return undefined;}}