const _0xcd756a=_0x1c59;(function(_0x4e3392,_0x3a6fc8){const _0x2ac12e=_0x1c59,_0x1dfbe8=_0x4e3392();while(!![]){try{const _0x56ae4c=-parseInt(_0x2ac12e(0x107))/0x1+parseInt(_0x2ac12e(0xd9))/0x2+-parseInt(_0x2ac12e(0xf7))/0x3+-parseInt(_0x2ac12e(0x111))/0x4+-parseInt(_0x2ac12e(0xd5))/0x5+-parseInt(_0x2ac12e(0xe7))/0x6*(-parseInt(_0x2ac12e(0x10f))/0x7)+-parseInt(_0x2ac12e(0x11f))/0x8*(-parseInt(_0x2ac12e(0x109))/0x9);if(_0x56ae4c===_0x3a6fc8)break;else _0x1dfbe8['push'](_0x1dfbe8['shift']());}catch(_0x316569){_0x1dfbe8['push'](_0x1dfbe8['shift']());}}}(_0xec47,0x8952a));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';function _0xec47(){const _0x293720=['ClientKey','1101788oYjGrk','MNunJ','robotUinRanges','uid','session','Skey','fromEntries','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','getMsgService','KlPYk','clientKey','then','KeyIndex','kzpnh','816DtmqHb','wMDYs','getPSkey','UiARR','pYAHM','result','assign','请求获取Skey时失败','forEach','4695130zZIUqW','xlzvC','THuhV','getProfileService','936342CYFoAm','now','errMsg','getRobotUinRange','eGuVE','IwgMp','setBuddyProfileLike','&clientkey=','length','qHQwJ','oJgKu','%2Finfocenter&keyindex=19%27','PskeyData','getUserDetailInfo','210SXBKVs','getPskey','setQQAvatar','getTipOffService','getSkey','like','uLsCq','请求获取Cookies时失败','uin','dHSmI','MKpid','HttpsGetCookies','getTicketService','SsjTv','TvevB','IuVjU','265524TSbOts','keyIndex','setSelfOnlineStatus','myMvp','NDnrD','获取Pskey失败','getUserDetailInfo\x20timeout','yFFoN','setStatus','ClOXu','onLoginSuccess','getProfileLikeService','CreatTime','get','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','TABbn','441319AIgRYa','PskeyTime','134766oaVlhQ','getUserInfo','entries','JLlNE','set','onProfileDetailInfoChanged','62251SedAQO'];_0xec47=function(){return _0x293720;};return _0xec47();}import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';function _0x1c59(_0x380829,_0x123449){const _0xec4750=_0xec47();return _0x1c59=function(_0x1c59ad,_0x5bb898){_0x1c59ad=_0x1c59ad-0xce;let _0x27f107=_0xec4750[_0x1c59ad];return _0x27f107;},_0x1c59(_0x380829,_0x123449);}import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0xcd756a(0x10e)]=_0x466627=>{const _0xd6746e=_0xcd756a;userInfoCache[_0x466627['uid']]=_0x466627,userDetailHandlers[_0xd6746e(0xd4)](_0x5aedc3=>_0x5aedc3(_0x466627));},setTimeout(()=>{const _0x3458a4=_0xcd756a;napCatCore[_0x3458a4(0x101)](()=>{napCatCore['addListener'](profileListener);});},0x64);export class NTQQUserApi{static async[_0xcd756a(0xf9)](_0x3ef15e,_0x57812e,_0x2ff1e7){const _0x1a6cab=_0xcd756a;return napCatCore['session'][_0x1a6cab(0x119)]()[_0x1a6cab(0xff)]({'status':_0x3ef15e,'extStatus':_0x57812e,'batteryStatus':_0x2ff1e7});}static async[_0xcd756a(0xec)](_0x5632e9,_0x31b6ae=0x1){const _0x5b1a97=_0xcd756a;return napCatCore[_0x5b1a97(0x115)][_0x5b1a97(0x102)]()[_0x5b1a97(0xdf)]({'friendUid':_0x5632e9,'sourceId':0x47,'doLikeCount':_0x31b6ae,'doLikeTollCount':0x0});}static async[_0xcd756a(0xe9)](_0xebe72b){const _0x55c200=_0xcd756a,_0x59341a=napCatCore[_0x55c200(0x115)][_0x55c200(0xd8)]()['setHeader'](_0xebe72b);return{'result':_0x59341a?.[_0x55c200(0xd1)],'errMsg':_0x59341a?.['errMsg']};}static async['getSelfInfo'](){}static async[_0xcd756a(0x10a)](_0x56dafe){}static async[_0xcd756a(0xe6)](_0xbdbfc9){const _0x29df78=_0xcd756a,_0x1f1bba={'yFFoN':_0x29df78(0xfd),'dHSmI':function(_0x4a16cb,_0x2a474b){return _0x4a16cb===_0x2a474b;},'KlPYk':function(_0x3ca732,_0x371a6e){return _0x3ca732(_0x371a6e);},'dCvNm':function(_0x57abac){return _0x57abac();},'oJgKu':function(_0x5394da,_0x794055,_0x5e086f){return _0x5394da(_0x794055,_0x5e086f);}},_0x1f65bc=napCatCore[_0x29df78(0x115)][_0x29df78(0xd8)]();return new Promise((_0x22cfe4,_0x159b08)=>{const _0x3ab10e=_0x29df78,_0x1bc163={'NDnrD':function(_0x5761e8,_0x265eb1){const _0x35c8e1=_0x1c59;return _0x1f1bba[_0x35c8e1(0xf0)](_0x5761e8,_0x265eb1);},'uLsCq':function(_0x598fff,_0x276cc5){const _0x25653a=_0x1c59;return _0x1f1bba[_0x25653a(0x11a)](_0x598fff,_0x276cc5);}},_0x3eff0d=_0x1f1bba['dCvNm'](randomUUID);let _0x5110cd=![],_0x530e46=undefined,_0x5867e3=!![];_0x1f1bba[_0x3ab10e(0xe3)](setTimeout,()=>{const _0x2a73a9=_0x3ab10e;!_0x5110cd&&(_0x530e46?_0x22cfe4(_0x530e46):_0x159b08(_0x1f1bba[_0x2a73a9(0xfe)])),userDetailHandlers['delete'](_0x3eff0d);},0x1388),userDetailHandlers['set'](_0x3eff0d,_0x570204=>{const _0x188d10=_0x3ab10e;_0x1bc163[_0x188d10(0xfb)](_0x570204[_0x188d10(0x114)],_0xbdbfc9)&&(uid2UinMap[_0xbdbfc9]=_0x570204['uin'],_0x5867e3?(_0x530e46=_0x570204,_0x5867e3=![]):(_0x5110cd=!![],_0x1bc163[_0x188d10(0xed)](_0x22cfe4,_0x570204)));}),_0x1f65bc['getUserDetailInfoWithBizInfo'](_0xbdbfc9,[0x0])[_0x3ab10e(0x11c)](_0x130a87=>{});});}static async[_0xcd756a(0xce)](_0x488f56,_0x4361fb=!![]){const _0x1e3747=_0xcd756a,_0x54e1ec={'UiARR':function(_0x398aaf,_0x442bf8){return _0x398aaf||_0x442bf8;},'ClOXu':function(_0x5ebac6,_0x45a244){return _0x5ebac6>_0x45a244;},'XYRfI':function(_0x5a9b0e,_0x239f46){return _0x5a9b0e*_0x239f46;},'THuhV':function(_0xabae19,_0x272f1d){return _0xabae19===_0x272f1d;},'qHQwJ':function(_0x188e62,_0x1c5148,_0x28e94b){return _0x188e62(_0x1c5148,_0x28e94b);}},_0x5a6458=[],_0x234c80={};for(const _0x2ab2eb in _0x488f56){const _0x554772=Credentials[_0x1e3747(0xe5)][_0x1e3747(0x104)](_0x488f56[_0x2ab2eb]),_0x32837d=Credentials[_0x1e3747(0x108)][_0x1e3747(0x104)](_0x488f56[_0x2ab2eb]);_0x54e1ec[_0x1e3747(0xcf)](!_0x554772,!_0x32837d)||_0x54e1ec[_0x1e3747(0x100)](Date[_0x1e3747(0xda)]()-_0x32837d,_0x54e1ec['XYRfI'](0x708,0x3e8))||!_0x4361fb?_0x5a6458['push'](_0x488f56[_0x2ab2eb]):_0x234c80[_0x488f56[_0x2ab2eb]]=_0x554772;}let _0x25d622={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x54e1ec[_0x1e3747(0x100)](_0x5a6458[_0x1e3747(0xe1)],0x0)&&(_0x25d622=await napCatCore[_0x1e3747(0x115)][_0x1e3747(0xea)]()[_0x1e3747(0xe8)](_0x5a6458,!![]));const _0x5bf7d2=_0x25d622['domainPskeyMap'];for(const _0x40fcac of _0x5bf7d2[_0x1e3747(0x10b)]()){Credentials[_0x1e3747(0xe5)][_0x1e3747(0x10d)](_0x40fcac[0x0],_0x40fcac[0x1]),Credentials[_0x1e3747(0x108)][_0x1e3747(0x10d)](_0x40fcac[0x0],Date['now']());}const _0xce17f5=Object[_0x1e3747(0xd2)](Object[_0x1e3747(0x117)](_0x5bf7d2),_0x234c80);if(_0x54e1ec[_0x1e3747(0xd7)](_0x25d622['result'],0x0))return _0xce17f5;else _0x54e1ec[_0x1e3747(0xe2)](logError,_0x1e3747(0xfc),_0x25d622[_0x1e3747(0xdb)]);return{};}static async['getRobotUinRange'](){const _0x40c608=_0xcd756a,_0x379ec3=await napCatCore[_0x40c608(0x115)]['getRobotService']()[_0x40c608(0xdc)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x379ec3?.['response']?.[_0x40c608(0x113)];}static async['getQzoneCookies'](){const _0x116a22=_0xcd756a,_0x5ccaf0={'pYAHM':function(_0x113aec,_0x309a8){return _0x113aec+_0x309a8;},'xlzvC':function(_0x3e8afd,_0x3b00bb){return _0x3e8afd+_0x3b00bb;},'MKpid':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','wMDYs':_0x116a22(0x118),'SsjTv':_0x116a22(0xe4)},_0x4da7cf=_0x5ccaf0[_0x116a22(0xd0)](_0x5ccaf0[_0x116a22(0xd0)](_0x5ccaf0[_0x116a22(0xd6)](_0x5ccaf0[_0x116a22(0xd6)](_0x5ccaf0['pYAHM'](_0x5ccaf0['pYAHM'](_0x5ccaf0[_0x116a22(0xf1)],selfInfo['uin']),_0x116a22(0xe0)),Credentials[_0x116a22(0x110)]),_0x5ccaf0[_0x116a22(0x120)]),selfInfo[_0x116a22(0xef)]),_0x5ccaf0[_0x116a22(0xf4)]);let _0x2f57d6={};try{_0x2f57d6=await RequestUtil[_0x116a22(0xf2)](_0x4da7cf);}catch(_0x36bf7e){logDebug(_0x116a22(0xee),_0x36bf7e),_0x2f57d6={};}return _0x2f57d6;}static async[_0xcd756a(0xeb)](_0x14c660=!![]){const _0x30569b=_0xcd756a,_0x4603d5={'jtdPb':function(_0x4ce8f9,_0x2e39ad){return _0x4ce8f9==_0x2e39ad;},'eGuVE':function(_0xf849e3,_0x17945d){return _0xf849e3-_0x17945d;},'IuVjU':function(_0x1a1a40,_0x2a5ffe){return _0x1a1a40*_0x2a5ffe;},'kzpnh':function(_0x103184,_0x8f2fae){return _0x103184!==_0x8f2fae;},'TABbn':function(_0x4ca546,_0x1ea205){return _0x4ca546+_0x1ea205;},'myMvp':function(_0x3ca01c,_0x5927ff){return _0x3ca01c+_0x5927ff;},'ppdRl':function(_0x32023e,_0x178e11){return _0x32023e+_0x178e11;},'IwgMp':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','ppccY':_0x30569b(0x105),'MNunJ':function(_0xbb9219,_0x2a7e81,_0x156f86){return _0xbb9219(_0x2a7e81,_0x156f86);},'JLlNE':_0x30569b(0xd3),'TvevB':'skey'};try{if(_0x4603d5['jtdPb'](Credentials['CreatTime'],0x0)||_0x4603d5[_0x30569b(0xdd)](Date['now'](),Credentials[_0x30569b(0x103)])>_0x4603d5[_0x30569b(0xf6)](0x3e8,0xe10)||!_0x14c660){const _0x1378f4=await napCatCore[_0x30569b(0x115)][_0x30569b(0xf3)]()['forceFetchClientKey']('');if(_0x4603d5[_0x30569b(0x11e)](_0x1378f4[_0x30569b(0xd1)],0x0))return'';const _0x234dfd=_0x1378f4[_0x30569b(0x11b)],_0x402f44=_0x1378f4[_0x30569b(0xf8)],_0x36cfae=_0x4603d5[_0x30569b(0x106)](_0x4603d5[_0x30569b(0xfa)](_0x4603d5['myMvp'](_0x4603d5['ppdRl'](_0x4603d5[_0x30569b(0xde)]+selfInfo[_0x30569b(0xef)],_0x30569b(0xe0)),_0x234dfd),_0x4603d5['ppccY']),_0x402f44);let _0x540dc4={};try{_0x540dc4=await RequestUtil[_0x30569b(0xf2)](_0x36cfae);}catch(_0x2d52a3){_0x4603d5[_0x30569b(0x112)](logDebug,_0x4603d5[_0x30569b(0x10c)],_0x2d52a3),_0x540dc4={};}const _0x2abccb=_0x540dc4[_0x4603d5[_0x30569b(0xf5)]];if(!_0x2abccb)return'';return Credentials[_0x30569b(0x110)]=_0x234dfd,Credentials[_0x30569b(0x11d)]=_0x402f44,Credentials[_0x30569b(0x103)]=Date[_0x30569b(0xda)](),Credentials[_0x30569b(0x116)]=_0x2abccb,_0x2abccb;}return Credentials[_0x30569b(0x116)];}catch(_0x54f8bc){}return undefined;}}