const _0x3d52d6=_0x1b50;(function(_0x1e5830,_0x3ed884){const _0x51bd86=_0x1b50,_0x53f897=_0x1e5830();while(!![]){try{const _0x246212=parseInt(_0x51bd86(0x129))/0x1*(-parseInt(_0x51bd86(0x138))/0x2)+parseInt(_0x51bd86(0xfd))/0x3+parseInt(_0x51bd86(0x143))/0x4+parseInt(_0x51bd86(0x102))/0x5*(parseInt(_0x51bd86(0x103))/0x6)+parseInt(_0x51bd86(0x12d))/0x7*(parseInt(_0x51bd86(0x137))/0x8)+parseInt(_0x51bd86(0x145))/0x9*(-parseInt(_0x51bd86(0x135))/0xa)+-parseInt(_0x51bd86(0x10a))/0xb*(-parseInt(_0x51bd86(0x11c))/0xc);if(_0x246212===_0x3ed884)break;else _0x53f897['push'](_0x53f897['shift']());}catch(_0x3b007b){_0x53f897['push'](_0x53f897['shift']());}}}(_0x55d4,0xca027));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';function _0x55d4(){const _0x145b92=['PskeyTime','getPSkey','robotUinRanges','getMsgService','getPskey','uid','FTkbG','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','&clientkey=','BLhBx','push','setBuddyProfileLike','then','12120dLiIzW','forceFetchClientKey','result','getSelfInfo','FNhhx','ZSFXN','verLr','YzcYL','onLoginSuccess','HttpsGetCookies','like','SCDWT','assign','492617gEpApj','xoewm','set','getUserDetailInfoWithBizInfo','387674WyoChn','fromEntries','IKzhS','EKJaU','getUserInfo','%2Finfocenter&keyindex=19%27','length','skey','14427580RHohvs','CFgPh','80pqdxHU','6HBhBJd','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','hqmVO','Skey','domainPskeyMap','pMQvV','setQQAvatar','delete','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','knXNr','setSelfOnlineStatus','5465380eEIaOS','CsifL','9dFtcgt','now','hfNCY','uin','IiYuJ','get','EABpH','entries','PskeyData','CreatTime','getTipOffService','3896244zIHWuw','response','获取Pskey失败','KeyIndex','SpkNf','17045VWNfRD','318AUjVPh','clientKey','ClientKey','getRobotUinRange','getProfileService','session','keyIndex','3795ITdVap','errMsg','EeTZe','kFAfp','UwIVi'];_0x55d4=function(){return _0x145b92;};return _0x55d4();}import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x1b50(_0x14ba7c,_0x3ea0b6){const _0x55d4ea=_0x55d4();return _0x1b50=function(_0x1b506f,_0x5199ba){_0x1b506f=_0x1b506f-0xf6;let _0xd3caa7=_0x55d4ea[_0x1b506f];return _0xd3caa7;},_0x1b50(_0x14ba7c,_0x3ea0b6);}profileListener['onProfileDetailInfoChanged']=_0xe4ff9a=>{const _0x49b23e=_0x1b50;userInfoCache[_0xe4ff9a[_0x49b23e(0x114)]]=_0xe4ff9a,userDetailHandlers['forEach'](_0x4482d4=>_0x4482d4(_0xe4ff9a));},setTimeout(()=>{const _0x144791=_0x1b50;napCatCore[_0x144791(0x124)](()=>{napCatCore['addListener'](profileListener);});},0x64);export class NTQQUserApi{static async[_0x3d52d6(0x142)](_0x40ca2a,_0x1f0146,_0x1dc3f2){const _0x1f2b54=_0x3d52d6;return napCatCore[_0x1f2b54(0x108)][_0x1f2b54(0x112)]()['setStatus']({'status':_0x40ca2a,'extStatus':_0x1f0146,'batteryStatus':_0x1dc3f2});}static async[_0x3d52d6(0x126)](_0x5b8fe4,_0x4e0f91=0x1){const _0x47bb48=_0x3d52d6;return napCatCore[_0x47bb48(0x108)]['getProfileLikeService']()[_0x47bb48(0x11a)]({'friendUid':_0x5b8fe4,'sourceId':0x47,'doLikeCount':_0x4e0f91,'doLikeTollCount':0x0});}static async[_0x3d52d6(0x13e)](_0xdec8c4){const _0x279ad9=_0x3d52d6,_0x27ad8c=napCatCore[_0x279ad9(0x108)][_0x279ad9(0x107)]()['setHeader'](_0xdec8c4);return{'result':_0x27ad8c?.[_0x279ad9(0x11e)],'errMsg':_0x27ad8c?.[_0x279ad9(0x10b)]};}static async[_0x3d52d6(0x11f)](){}static async[_0x3d52d6(0x131)](_0x3875bf){}static async['getUserDetailInfo'](_0x394360){const _0x34b683={'CsifL':function(_0xe28acf,_0x455c96){return _0xe28acf(_0x455c96);},'zjpeC':function(_0x1e63e3){return _0x1e63e3();},'yQPPb':function(_0x4b14d0,_0x39e573,_0x44dc1e){return _0x4b14d0(_0x39e573,_0x44dc1e);}},_0x3e0fe1=napCatCore['session']['getProfileService']();return new Promise((_0x166137,_0x2f4018)=>{const _0x22012d=_0x1b50,_0x517283={'EeTZe':function(_0x58b08b,_0x2e2b0e){const _0x3077cc=_0x1b50;return _0x34b683[_0x3077cc(0x144)](_0x58b08b,_0x2e2b0e);}},_0x47be5d=_0x34b683['zjpeC'](randomUUID);let _0x181154=![],_0x3a293e=undefined,_0xefc1e5=!![];_0x34b683['yQPPb'](setTimeout,()=>{const _0x4ae69b=_0x1b50;!_0x181154&&(_0x3a293e?_0x517283[_0x4ae69b(0x10c)](_0x166137,_0x3a293e):_0x517283[_0x4ae69b(0x10c)](_0x2f4018,'getUserDetailInfo\x20timeout')),userDetailHandlers[_0x4ae69b(0x13f)](_0x47be5d);},0x1388),userDetailHandlers['set'](_0x47be5d,_0x127602=>{const _0x3eb48d=_0x1b50;_0x127602['uid']===_0x394360&&(uid2UinMap[_0x394360]=_0x127602[_0x3eb48d(0x148)],_0xefc1e5?(_0x3a293e=_0x127602,_0xefc1e5=![]):(_0x181154=!![],_0x517283['EeTZe'](_0x166137,_0x127602)));}),_0x3e0fe1[_0x22012d(0x12c)](_0x394360,[0x0])[_0x22012d(0x11b)](_0x4d3a5d=>{});});}static async[_0x3d52d6(0x110)](_0x5b56f4,_0x341c6d=!![]){const _0x37f85b=_0x3d52d6,_0x2ec163={'hfNCY':function(_0x2fbc69,_0x26b908){return _0x2fbc69||_0x26b908;},'FTkbG':function(_0x42b87f,_0x5da58d){return _0x42b87f>_0x5da58d;},'nyKAw':function(_0x50697e,_0x2bb515){return _0x50697e-_0x2bb515;},'BLhBx':function(_0x24aa72,_0x1961f0){return _0x24aa72*_0x1961f0;},'SpkNf':function(_0x31437b,_0x985c2f){return _0x31437b===_0x985c2f;},'SCDWT':function(_0x194cfd,_0x1d8c0e,_0x414801){return _0x194cfd(_0x1d8c0e,_0x414801);},'IKzhS':_0x37f85b(0xff)},_0x1f8c30=[],_0x5ba2c8={};for(const _0x4fc7d1 in _0x5b56f4){const _0x6562da=Credentials[_0x37f85b(0xfa)][_0x37f85b(0xf7)](_0x5b56f4[_0x4fc7d1]),_0x4f590e=Credentials[_0x37f85b(0x10f)][_0x37f85b(0xf7)](_0x5b56f4[_0x4fc7d1]);_0x2ec163[_0x37f85b(0x147)](!_0x6562da,!_0x4f590e)||_0x2ec163[_0x37f85b(0x115)](_0x2ec163['nyKAw'](Date[_0x37f85b(0x146)](),_0x4f590e),_0x2ec163[_0x37f85b(0x118)](0x708,0x3e8))||!_0x341c6d?_0x1f8c30[_0x37f85b(0x119)](_0x5b56f4[_0x4fc7d1]):_0x5ba2c8[_0x5b56f4[_0x4fc7d1]]=_0x6562da;}let _0x25262f={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x1f8c30[_0x37f85b(0x133)]>0x0&&(_0x25262f=await napCatCore[_0x37f85b(0x108)][_0x37f85b(0xfc)]()[_0x37f85b(0x113)](_0x1f8c30,!![]));const _0x5bdc2f=_0x25262f[_0x37f85b(0x13c)];for(const _0x5f3fb1 of _0x5bdc2f[_0x37f85b(0xf9)]()){Credentials['PskeyData']['set'](_0x5f3fb1[0x0],_0x5f3fb1[0x1]),Credentials[_0x37f85b(0x10f)][_0x37f85b(0x12b)](_0x5f3fb1[0x0],Date[_0x37f85b(0x146)]());}const _0x174250=Object[_0x37f85b(0x128)](Object[_0x37f85b(0x12e)](_0x5bdc2f),_0x5ba2c8);if(_0x2ec163[_0x37f85b(0x101)](_0x25262f['result'],0x0))return _0x174250;else _0x2ec163[_0x37f85b(0x127)](logError,_0x2ec163[_0x37f85b(0x12f)],_0x25262f['errMsg']);return{};}static async[_0x3d52d6(0x106)](){const _0x207d58=_0x3d52d6,_0x82c196=await napCatCore[_0x207d58(0x108)]['getRobotService']()[_0x207d58(0x106)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x82c196?.[_0x207d58(0xfe)]?.[_0x207d58(0x111)];}static async['getQzoneCookies'](){const _0x1b2e70=_0x3d52d6,_0x505cd0={'FNhhx':function(_0x16e220,_0x119374){return _0x16e220+_0x119374;},'yPdMX':function(_0x599a78,_0xee91da){return _0x599a78+_0xee91da;},'EABpH':_0x1b2e70(0x140),'YzcYL':_0x1b2e70(0x132),'xoewm':function(_0x6bd8ec,_0xf77ea1,_0x2531e0){return _0x6bd8ec(_0xf77ea1,_0x2531e0);},'ZSFXN':'请求获取Cookies时失败'},_0x5d4368=_0x505cd0[_0x1b2e70(0x120)](_0x505cd0[_0x1b2e70(0x120)](_0x505cd0['yPdMX'](_0x1b2e70(0x116)+selfInfo[_0x1b2e70(0x148)]+_0x1b2e70(0x117),Credentials['ClientKey']),_0x505cd0[_0x1b2e70(0xf8)]),selfInfo[_0x1b2e70(0x148)])+_0x505cd0[_0x1b2e70(0x123)];let _0x1852fa={};try{_0x1852fa=await RequestUtil['HttpsGetCookies'](_0x5d4368);}catch(_0x1b7d49){_0x505cd0[_0x1b2e70(0x12a)](logDebug,_0x505cd0[_0x1b2e70(0x121)],_0x1b7d49),_0x1852fa={};}return _0x1852fa;}static async['getSkey'](_0x2335ff=!![]){const _0x5b2fd4=_0x3d52d6,_0x585068={'CFgPh':function(_0x19794c,_0x6116ca){return _0x19794c==_0x6116ca;},'verLr':function(_0x157527,_0x26e4d0){return _0x157527>_0x26e4d0;},'knXNr':function(_0x50d010,_0x4e418e){return _0x50d010*_0x4e418e;},'hqmVO':function(_0x75a98c,_0x2f9aba){return _0x75a98c!==_0x2f9aba;},'EKJaU':function(_0x1f2ca9,_0x2e31bc){return _0x1f2ca9+_0x2e31bc;},'UwIVi':function(_0x55d731,_0xf13566){return _0x55d731+_0xf13566;},'IiYuJ':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','kFAfp':_0x5b2fd4(0x117),'pMQvV':_0x5b2fd4(0x134)};try{if(_0x585068[_0x5b2fd4(0x136)](Credentials[_0x5b2fd4(0xfb)],0x0)||_0x585068[_0x5b2fd4(0x122)](Date[_0x5b2fd4(0x146)]()-Credentials[_0x5b2fd4(0xfb)],_0x585068[_0x5b2fd4(0x141)](0x3e8,0xe10))||!_0x2335ff){const _0x32f563=await napCatCore[_0x5b2fd4(0x108)]['getTicketService']()[_0x5b2fd4(0x11d)]('');if(_0x585068[_0x5b2fd4(0x13a)](_0x32f563[_0x5b2fd4(0x11e)],0x0))return'';const _0x59405f=_0x32f563[_0x5b2fd4(0x104)],_0x35541a=_0x32f563[_0x5b2fd4(0x109)],_0x580c85=_0x585068[_0x5b2fd4(0x130)](_0x585068[_0x5b2fd4(0x130)](_0x585068['UwIVi'](_0x585068[_0x5b2fd4(0x10e)](_0x585068[_0x5b2fd4(0xf6)]+selfInfo['uin'],_0x585068[_0x5b2fd4(0x10d)]),_0x59405f),_0x5b2fd4(0x139)),_0x35541a);let _0xbfa30c={};try{_0xbfa30c=await RequestUtil[_0x5b2fd4(0x125)](_0x580c85);}catch(_0x40e1fc){logDebug('请求获取Skey时失败',_0x40e1fc),_0xbfa30c={};}const _0x3331e0=_0xbfa30c[_0x585068[_0x5b2fd4(0x13d)]];if(!_0x3331e0)return'';return Credentials[_0x5b2fd4(0x105)]=_0x59405f,Credentials[_0x5b2fd4(0x100)]=_0x35541a,Credentials['CreatTime']=Date[_0x5b2fd4(0x146)](),Credentials[_0x5b2fd4(0x13b)]=_0x3331e0,_0x3331e0;}return Credentials['Skey'];}catch(_0x3dc45a){}return undefined;}}