const _0x5d8945=_0x1c31;(function(_0x3b5ac9,_0xa91d75){const _0x3afdd9=_0x1c31,_0x2fa9e3=_0x3b5ac9();while(!![]){try{const _0x5a93e7=parseInt(_0x3afdd9(0x232))/0x1+-parseInt(_0x3afdd9(0x239))/0x2+-parseInt(_0x3afdd9(0x22f))/0x3*(-parseInt(_0x3afdd9(0x21c))/0x4)+-parseInt(_0x3afdd9(0x234))/0x5*(-parseInt(_0x3afdd9(0x208))/0x6)+parseInt(_0x3afdd9(0x20f))/0x7+parseInt(_0x3afdd9(0x1ed))/0x8+-parseInt(_0x3afdd9(0x236))/0x9;if(_0x5a93e7===_0xa91d75)break;else _0x2fa9e3['push'](_0x2fa9e3['shift']());}catch(_0xe90b27){_0x2fa9e3['push'](_0x2fa9e3['shift']());}}}(_0x39e1,0xc752a));import{Credentials,selfInfo}from'@/core/data';function _0x1c31(_0x2e35d8,_0x50ebc7){const _0x39e154=_0x39e1();return _0x1c31=function(_0x1c3185,_0xe52442){_0x1c3185=_0x1c3185-0x1df;let _0x1c610e=_0x39e154[_0x1c3185];return _0x1c610e;},_0x1c31(_0x2e35d8,_0x50ebc7);}import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';import{NTEventDispatch}from'@/common/utils/EventTask';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x39e1(){const _0x189029=['ClientKey','PskeyTime','domainPskeyMap','addListener','tqTPJ','%2Finfocenter&keyindex=19%27','skey','WdQWF','entries','fromEntries','qHBag','errMsg','getPSkey','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','CIVCV','onLoginSuccess','AIAyw','EzSaR','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','sCDme','setStatus','setHeader','now','oYqrP','Vmtzq','54kzWcff','NodeIKernelUixConvertService/getUin','get','getTipOffService','VqpCN','uid','uin','2300928BkPzQd','forEach','xWcYs','robotUinRanges','getProfileLikeService','CallNoListenerEvent','vgveW','获取Pskey失败','hiqvR','HttpsGetCookies','assign','&clientkey=','uidInfo','416348SKEDvJ','CreatTime','Skey','getUinByUid','setBuddyProfileLike','modifyDesktopMiniProfile','XSBfD','请求获取Cookies时失败','getSelfInfo','session','getUserDetailInfoByUin','NoDqX','wEItx','请求获取Skey时失败','onProfileDetailInfoChanged','PskeyData','DIKDv','bsCnz','setLongNick','45PgYZAb','getUserDetailInfoWithBizInfo','then','1188432KnoWsf','sgXqX','888495sbrpSV','YXZIY','31457736WKKuvf','getBuddyRecommendContactArkJson','getProfileService','1092502zmxoHz','getRobotUinRange','getUidByUin','getPskey','getTicketService','modifySelfProfile','getBuddyService','NodeIKernelProfileService/getUserDetailInfoByUin','response','keyIndex','FoBcI','getRobotService','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','WrqlJ','bxkuS','JKDyh','result','1441992cdBYYk','set'];_0x39e1=function(){return _0x189029;};return _0x39e1();}profileListener[_0x5d8945(0x22a)]=_0x5a2ab5=>{const _0x4dee9d=_0x5d8945;userInfoCache[_0x5a2ab5[_0x4dee9d(0x20d)]]=_0x5a2ab5,userDetailHandlers[_0x4dee9d(0x210)](_0x4d684e=>_0x4d684e(_0x5a2ab5));},setTimeout(()=>{const _0x3b754d=_0x5d8945;napCatCore[_0x3b754d(0x1fe)](()=>{const _0x2baccc=_0x3b754d;napCatCore[_0x2baccc(0x1f2)](profileListener);});},0x64);export class NTQQUserApi{static async['setLongNick'](_0x2aaa7d){const _0x312ebf=_0x5d8945;return napCatCore[_0x312ebf(0x225)][_0x312ebf(0x238)]()[_0x312ebf(0x22e)](_0x2aaa7d);}static async['setSelfOnlineStatus'](_0x519def,_0x2bacbe,_0x5df501){const _0x1ccc1c=_0x5d8945;return napCatCore['session']['getMsgService']()[_0x1ccc1c(0x203)]({'status':_0x519def,'extStatus':_0x2bacbe,'batteryStatus':_0x5df501});}static async[_0x5d8945(0x237)](_0x20a17f,_0x1b9120=''){const _0x550b6e=_0x5d8945;return napCatCore[_0x550b6e(0x225)][_0x550b6e(0x1e2)]()['getBuddyRecommendContactArkJson'](_0x20a17f,_0x1b9120);}static async['like'](_0x283e2e,_0x533b9c=0x1){const _0x12a9a1=_0x5d8945;return napCatCore[_0x12a9a1(0x225)][_0x12a9a1(0x213)]()[_0x12a9a1(0x220)]({'friendUid':_0x283e2e,'sourceId':0x47,'doLikeCount':_0x533b9c,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x55821c){const _0x1d3881=_0x5d8945,_0x2481fd=await napCatCore[_0x1d3881(0x225)][_0x1d3881(0x238)]()[_0x1d3881(0x204)](_0x55821c);return{'result':_0x2481fd?.[_0x1d3881(0x1ec)],'errMsg':_0x2481fd?.['errMsg']};}static async[_0x5d8945(0x224)](){}static async['getUserInfo'](_0x5d9517){}static async['getUserDetailInfo'](_0xa70aa7){const _0x469dd1=_0x5d8945,_0x4c6e7c={'Vmtzq':function(_0x378379,_0x2390ab){return _0x378379(_0x2390ab);},'hiqvR':function(_0x4e6ca0){return _0x4e6ca0();},'YXZIY':function(_0xf61305,_0xfb68fb,_0x38187f){return _0xf61305(_0xfb68fb,_0x38187f);}},_0x5c8445=napCatCore[_0x469dd1(0x225)][_0x469dd1(0x238)]();return new Promise((_0x5804c1,_0x3f811b)=>{const _0x47a093=_0x469dd1,_0x4d77b7={'vgveW':function(_0x34fefa,_0x41610a){const _0x11009c=_0x1c31;return _0x4c6e7c[_0x11009c(0x207)](_0x34fefa,_0x41610a);},'FoBcI':function(_0x324783,_0x27a279){return _0x324783===_0x27a279;}},_0x2f6cdc=_0x4c6e7c[_0x47a093(0x217)](randomUUID);let _0x494674=![],_0x1bbbdd=undefined,_0x5988b8=!![];_0x4c6e7c[_0x47a093(0x235)](setTimeout,()=>{const _0x3d21a7=_0x47a093;!_0x494674&&(_0x1bbbdd?_0x4d77b7[_0x3d21a7(0x215)](_0x5804c1,_0x1bbbdd):_0x4d77b7[_0x3d21a7(0x215)](_0x3f811b,'getUserDetailInfo\x20timeout')),userDetailHandlers['delete'](_0x2f6cdc);},0x1388),userDetailHandlers[_0x47a093(0x1ee)](_0x2f6cdc,_0x2856da=>{const _0x272fd4=_0x47a093;_0x4d77b7[_0x272fd4(0x1e6)](_0x2856da[_0x272fd4(0x20d)],_0xa70aa7)&&(_0x5988b8?(_0x1bbbdd=_0x2856da,_0x5988b8=![]):(_0x494674=!![],_0x4d77b7[_0x272fd4(0x215)](_0x5804c1,_0x2856da)));}),_0x5c8445[_0x47a093(0x230)](_0xa70aa7,[0x0])[_0x47a093(0x231)](_0x5621fc=>{});});}static async[_0x5d8945(0x1e1)](_0xdfadfa){const _0x529b1b=_0x5d8945;return napCatCore[_0x529b1b(0x225)][_0x529b1b(0x238)]()[_0x529b1b(0x221)](_0xdfadfa);}static async[_0x5d8945(0x1fb)](_0x267528,_0x23d9b1=!![]){const _0x80988a=_0x5d8945,_0x3aeff3={'JKDyh':function(_0x1bdec9,_0x22855c){return _0x1bdec9||_0x22855c;},'CIVCV':function(_0x5ad62d,_0x3b71db){return _0x5ad62d>_0x3b71db;},'tqTPJ':function(_0x442ddc,_0x3e3f82){return _0x442ddc*_0x3e3f82;},'ADjHn':function(_0x61480f,_0x24eacb){return _0x61480f>_0x24eacb;},'XSBfD':function(_0x2db9b9,_0x2c5ec9){return _0x2db9b9===_0x2c5ec9;},'hJIpI':function(_0xc06d96,_0x258286,_0x236f41){return _0xc06d96(_0x258286,_0x236f41);},'qHBag':_0x80988a(0x216)},_0x54f6dc=[],_0x4aac92={};for(const _0x14f2ea in _0x267528){const _0x1d810a=Credentials[_0x80988a(0x22b)]['get'](_0x267528[_0x14f2ea]),_0x4a67e2=Credentials[_0x80988a(0x1f0)][_0x80988a(0x20a)](_0x267528[_0x14f2ea]);_0x3aeff3[_0x80988a(0x1eb)](!_0x1d810a,!_0x4a67e2)||_0x3aeff3[_0x80988a(0x1fd)](Date['now']()-_0x4a67e2,_0x3aeff3[_0x80988a(0x1f3)](0x708,0x3e8))||!_0x23d9b1?_0x54f6dc['push'](_0x267528[_0x14f2ea]):_0x4aac92[_0x267528[_0x14f2ea]]=_0x1d810a;}let _0x514728={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x3aeff3['ADjHn'](_0x54f6dc['length'],0x0)&&(_0x514728=await napCatCore[_0x80988a(0x225)][_0x80988a(0x20b)]()[_0x80988a(0x1df)](_0x54f6dc,!![]));const _0x20eec9=_0x514728[_0x80988a(0x1f1)];for(const _0x89d119 of _0x20eec9[_0x80988a(0x1f7)]()){Credentials[_0x80988a(0x22b)][_0x80988a(0x1ee)](_0x89d119[0x0],_0x89d119[0x1]),Credentials[_0x80988a(0x1f0)][_0x80988a(0x1ee)](_0x89d119[0x0],Date[_0x80988a(0x205)]());}const _0x4bc11e=Object[_0x80988a(0x219)](Object[_0x80988a(0x1f8)](_0x20eec9),_0x4aac92);if(_0x3aeff3[_0x80988a(0x222)](_0x514728[_0x80988a(0x1ec)],0x0))return _0x4bc11e;else _0x3aeff3['hJIpI'](logError,_0x3aeff3[_0x80988a(0x1f9)],_0x514728[_0x80988a(0x1fa)]);return{};}static async['getRobotUinRange'](){const _0x507db5=_0x5d8945,_0x1208d7=await napCatCore['session'][_0x507db5(0x1e7)]()[_0x507db5(0x23a)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x1208d7?.[_0x507db5(0x1e4)]?.[_0x507db5(0x212)];}static async['getQzoneCookies'](){const _0x72cbea=_0x5d8945,_0x217b40={'NoDqX':function(_0x1e3a69,_0x305771){return _0x1e3a69+_0x305771;},'asXUD':function(_0x2ad864,_0x22767f){return _0x2ad864+_0x22767f;},'QmUoy':function(_0x2d3f5d,_0xccb019){return _0x2d3f5d+_0xccb019;},'eKhXZ':function(_0x5c6cb5,_0x5b7800){return _0x5c6cb5+_0x5b7800;},'qblGO':_0x72cbea(0x1e8),'bsCnz':_0x72cbea(0x1fc),'WdQWF':_0x72cbea(0x1f4)},_0x286014=_0x217b40[_0x72cbea(0x227)](_0x217b40['asXUD'](_0x217b40['QmUoy'](_0x217b40['eKhXZ'](_0x217b40['qblGO'],selfInfo['uin'])+_0x72cbea(0x21a),Credentials[_0x72cbea(0x1ef)])+_0x217b40[_0x72cbea(0x22d)],selfInfo[_0x72cbea(0x20e)]),_0x217b40[_0x72cbea(0x1f6)]);let _0x280746={};try{_0x280746=await RequestUtil[_0x72cbea(0x218)](_0x286014);}catch(_0x403437){logDebug(_0x72cbea(0x223),_0x403437),_0x280746={};}return _0x280746;}static async['getSkey'](_0xe3b293=!![]){const _0x24423d=_0x5d8945,_0x50db1c={'wEItx':function(_0x45aadf,_0x233663){return _0x45aadf==_0x233663;},'sCDme':function(_0x4140d3,_0x20ac7e){return _0x4140d3>_0x20ac7e;},'VqpCN':function(_0x2f0d8f,_0x3099cc){return _0x2f0d8f-_0x3099cc;},'EzSaR':function(_0x3d2bff,_0x40943f){return _0x3d2bff!==_0x40943f;},'xWcYs':function(_0x5dc6cd,_0x16c213){return _0x5dc6cd+_0x16c213;},'WrqlJ':function(_0x567fd9,_0x51e536){return _0x567fd9+_0x51e536;},'sgXqX':function(_0x3ff5f7,_0x2af20f){return _0x3ff5f7+_0x2af20f;},'DIKDv':_0x24423d(0x1e8),'bxkuS':_0x24423d(0x21a),'octDK':function(_0x464643,_0x4b8f0f,_0x5d2e57){return _0x464643(_0x4b8f0f,_0x5d2e57);},'EJYkq':_0x24423d(0x1f5)};try{if(_0x50db1c[_0x24423d(0x228)](Credentials[_0x24423d(0x21d)],0x0)||_0x50db1c[_0x24423d(0x202)](_0x50db1c[_0x24423d(0x20c)](Date[_0x24423d(0x205)](),Credentials[_0x24423d(0x21d)]),0x3e8*0xe10)||!_0xe3b293){const _0x393e0b=await napCatCore[_0x24423d(0x225)][_0x24423d(0x1e0)]()['forceFetchClientKey']('');if(_0x50db1c[_0x24423d(0x200)](_0x393e0b[_0x24423d(0x1ec)],0x0))return'';const _0x40fac8=_0x393e0b['clientKey'],_0x2443b9=_0x393e0b[_0x24423d(0x1e5)],_0x90c727=_0x50db1c[_0x24423d(0x211)](_0x50db1c['WrqlJ'](_0x50db1c[_0x24423d(0x233)](_0x50db1c[_0x24423d(0x1e9)](_0x50db1c[_0x24423d(0x22c)],selfInfo[_0x24423d(0x20e)]),_0x50db1c[_0x24423d(0x1ea)]),_0x40fac8)+_0x24423d(0x201),_0x2443b9);let _0xe9f633={};try{_0xe9f633=await RequestUtil[_0x24423d(0x218)](_0x90c727);}catch(_0x4cec93){_0x50db1c['octDK'](logDebug,_0x24423d(0x229),_0x4cec93),_0xe9f633={};}const _0x17b467=_0xe9f633[_0x50db1c['EJYkq']];if(!_0x17b467)return'';return Credentials['ClientKey']=_0x40fac8,Credentials['KeyIndex']=_0x2443b9,Credentials[_0x24423d(0x21d)]=Date[_0x24423d(0x205)](),Credentials[_0x24423d(0x21e)]=_0x17b467,_0x17b467;}return Credentials[_0x24423d(0x21e)];}catch(_0x54eba8){}return undefined;}static async[_0x5d8945(0x23b)](_0x316d79){const _0x16f6f5=_0x5d8945,_0x1943e9={'AIAyw':'NodeIKernelUixConvertService/getUid'};let _0x1d067a=await NTEventDispatch[_0x16f6f5(0x214)](_0x1943e9[_0x16f6f5(0x1ff)],0x1388,[_0x316d79]);return _0x1d067a[_0x16f6f5(0x21b)]['get'](_0x316d79);}static async[_0x5d8945(0x21f)](_0x240271){const _0x3a3ba5=_0x5d8945,_0x7d9a01={'qmZNp':_0x3a3ba5(0x209)};if(!_0x240271)return'';let _0x5aaebf=await NTEventDispatch[_0x3a3ba5(0x214)](_0x7d9a01['qmZNp'],0x1388,[_0x240271]);return _0x5aaebf['uinInfo'][_0x3a3ba5(0x20a)](_0x240271);}static async[_0x5d8945(0x226)](_0x1e91c6){const _0x228683=_0x5d8945,_0x4c711f={'oYqrP':_0x228683(0x1e3)};return NTEventDispatch[_0x228683(0x214)](_0x4c711f[_0x228683(0x206)],0x1388,_0x1e91c6);}}