const _0x6297b0=_0x4b7b;(function(_0x5467ce,_0x5678b7){const _0x4092a9=_0x4b7b,_0x3b8a7d=_0x5467ce();while(!![]){try{const _0x2bd61a=-parseInt(_0x4092a9(0x84))/0x1*(parseInt(_0x4092a9(0x99))/0x2)+parseInt(_0x4092a9(0x85))/0x3*(parseInt(_0x4092a9(0x6e))/0x4)+-parseInt(_0x4092a9(0x78))/0x5+-parseInt(_0x4092a9(0x86))/0x6*(-parseInt(_0x4092a9(0x8c))/0x7)+-parseInt(_0x4092a9(0xa8))/0x8+parseInt(_0x4092a9(0x89))/0x9+-parseInt(_0x4092a9(0xa6))/0xa;if(_0x2bd61a===_0x5678b7)break;else _0x3b8a7d['push'](_0x3b8a7d['shift']());}catch(_0x5379df){_0x3b8a7d['push'](_0x3b8a7d['shift']());}}}(_0x1ea5,0x1cb8d));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x4b7b(_0xab4ea6,_0x537ad0){const _0x1ea562=_0x1ea5();return _0x4b7b=function(_0x4b7b78,_0x40afaa){_0x4b7b78=_0x4b7b78-0x68;let _0x51e5d5=_0x1ea562[_0x4b7b78];return _0x51e5d5;},_0x4b7b(_0xab4ea6,_0x537ad0);}function _0x1ea5(){const _0x1dae55=['49832aruPyP','786YUgbri','88602LNLsMH','dSuxe','clientKey','1547019ODWjfG','Skey','push','91JhzWFX','onLoginSuccess','like','entries','PskeyTime','sCNar','getTipOffService','DmczJ','setStatus','HfjRa','HttpGetCookies','set','gbqJy','2fayVUU','hqKiS','getMsgService','session','getSelfInfo','getProfileService','spWlL','KTYTZ','vppZZ','getSkey','getRobotUinRange','RCgzy','errMsg','101530xlUXJm','length','1498968BNgLiN','result','uid','getUserDetailInfoWithBizInfo','&clientkey=','onProfileDetailInfoChanged','PskeyData','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','QCnNk','forceFetchClientKey','1112YfWUzw','delete','get','getUserDetailInfo','vvAeg','getUserInfo','LAwhE','assign','getPskey','获取Pskey失败','358485pgrjcb','getProfileLikeService','pHenu','response','now','getUserDetailInfo\x20timeout','CreatTime','forEach','skey','uin','dGSrP','irsnz'];_0x1ea5=function(){return _0x1dae55;};return _0x1ea5();}profileListener[_0x6297b0(0x68)]=_0x3691cf=>{const _0x470666=_0x6297b0;userInfoCache[_0x3691cf[_0x470666(0xaa)]]=_0x3691cf,userDetailHandlers[_0x470666(0x7f)](_0x14c2f7=>_0x14c2f7(_0x3691cf));},setTimeout(()=>{const _0x369c79=_0x6297b0;napCatCore[_0x369c79(0x8d)](()=>{napCatCore['addListener'](profileListener);});},0x64);export class NTQQUserApi{static async['setSelfOnlineStatus'](_0x5dbd74,_0x823783,_0xbeb476){const _0xc971ea=_0x6297b0;return napCatCore['session'][_0xc971ea(0x9b)]()[_0xc971ea(0x94)]({'status':_0x5dbd74,'extStatus':_0x823783,'batteryStatus':_0xbeb476});}static async[_0x6297b0(0x8e)](_0x446c9e,_0x58b99d=0x1){const _0x4286a1=_0x6297b0;return napCatCore[_0x4286a1(0x9c)][_0x4286a1(0x79)]()['setBuddyProfileLike']({'friendUid':_0x446c9e,'sourceId':0x47,'doLikeCount':_0x58b99d,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x5500a8){const _0x45cbfa=_0x6297b0,_0x3ee3da=napCatCore['session'][_0x45cbfa(0x9e)]()['setHeader'](_0x5500a8);return{'result':_0x3ee3da?.['result'],'errMsg':_0x3ee3da?.[_0x45cbfa(0xa5)]};}static async[_0x6297b0(0x9d)](){}static async[_0x6297b0(0x73)](_0x542280){}static async[_0x6297b0(0x71)](_0x8a35b6){const _0x26c404=_0x6297b0,_0x4e9afd={'dGSrP':function(_0x4a07ec,_0x1967ac){return _0x4a07ec(_0x1967ac);},'LAwhE':function(_0x185c4c,_0x44524d){return _0x185c4c===_0x44524d;},'zEDjy':function(_0x3652d8){return _0x3652d8();}},_0x380cdb=napCatCore[_0x26c404(0x9c)][_0x26c404(0x9e)]();return new Promise((_0x372322,_0x5b9e11)=>{const _0x145ef5=_0x26c404,_0x25426b=_0x4e9afd['zEDjy'](randomUUID);let _0x1653f9=![];setTimeout(()=>{const _0x157932=_0x4b7b;!_0x1653f9&&_0x4e9afd[_0x157932(0x82)](_0x5b9e11,_0x157932(0x7d));},0x1388),userDetailHandlers['set'](_0x25426b,_0x2856b5=>{const _0x2772e1=_0x4b7b;_0x4e9afd[_0x2772e1(0x74)](_0x2856b5[_0x2772e1(0xaa)],_0x8a35b6)&&(_0x1653f9=!![],userDetailHandlers[_0x2772e1(0x6f)](_0x25426b),uid2UinMap[_0x8a35b6]=_0x2856b5[_0x2772e1(0x81)],_0x4e9afd['dGSrP'](_0x372322,_0x2856b5));}),_0x380cdb[_0x145ef5(0xab)](_0x8a35b6,[0x0])['then'](_0xb576d4=>{});});}static async['getPSkey'](_0x175884,_0x197cc9=!![]){const _0x5cef8a=_0x6297b0,_0x3a885b={'hqKiS':function(_0x555c24,_0x381879){return _0x555c24||_0x381879;},'dSuxe':function(_0xac7837,_0x8a796f){return _0xac7837>_0x8a796f;},'vfByO':function(_0x50b5c5,_0xd0049c){return _0x50b5c5-_0xd0049c;},'RCgzy':function(_0x1790a2,_0x38c30a){return _0x1790a2*_0x38c30a;},'spWlL':function(_0x4c6dbe,_0x512e81,_0x1cd922){return _0x4c6dbe(_0x512e81,_0x1cd922);}},_0x541d26=[],_0x41a140={};for(const _0x20c7fd in _0x175884){const _0x24ca2f=Credentials[_0x5cef8a(0x69)][_0x5cef8a(0x70)](_0x175884[_0x20c7fd]),_0x19f7a8=Credentials[_0x5cef8a(0x90)]['get'](_0x175884[_0x20c7fd]);_0x3a885b[_0x5cef8a(0x9a)](!_0x24ca2f,!_0x19f7a8)||_0x3a885b['dSuxe'](_0x3a885b['vfByO'](Date[_0x5cef8a(0x7c)](),_0x19f7a8),_0x3a885b[_0x5cef8a(0xa4)](0x708,0x3e8))||!_0x197cc9?_0x541d26[_0x5cef8a(0x8b)](_0x175884[_0x20c7fd]):_0x41a140[_0x175884[_0x20c7fd]]=_0x24ca2f;}let _0x54ae06={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x3a885b[_0x5cef8a(0x87)](_0x541d26[_0x5cef8a(0xa7)],0x0)&&(_0x54ae06=await napCatCore['session'][_0x5cef8a(0x92)]()[_0x5cef8a(0x76)](_0x541d26,!![]));const _0x857665=_0x54ae06['domainPskeyMap'];for(const _0x262437 of _0x857665[_0x5cef8a(0x8f)]()){Credentials[_0x5cef8a(0x69)][_0x5cef8a(0x97)](_0x262437[0x0],_0x262437[0x1]),Credentials[_0x5cef8a(0x90)][_0x5cef8a(0x97)](_0x262437[0x0],Date[_0x5cef8a(0x7c)]());}const _0x1bf9ee=Object[_0x5cef8a(0x75)](Object['fromEntries'](_0x857665),_0x41a140);if(_0x54ae06[_0x5cef8a(0xa9)]===0x0)return _0x1bf9ee;else _0x3a885b[_0x5cef8a(0x9f)](logError,_0x5cef8a(0x77),_0x54ae06[_0x5cef8a(0xa5)]);return{};}static async[_0x6297b0(0xa3)](){const _0x4bf5c3=_0x6297b0,_0x535961=await napCatCore[_0x4bf5c3(0x9c)]['getRobotService']()[_0x4bf5c3(0xa3)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x535961?.[_0x4bf5c3(0x7b)]?.['robotUinRanges'];}static async[_0x6297b0(0xa2)](_0x98ec8a=!![]){const _0x55d3ba=_0x6297b0,_0x1c7f7d={'irsnz':function(_0x2991c8,_0x3a32ba){return _0x2991c8==_0x3a32ba;},'gbqJy':function(_0x523ed8,_0x3fa965){return _0x523ed8>_0x3fa965;},'GEIom':function(_0x1f88bb,_0x5d4d33){return _0x1f88bb-_0x5d4d33;},'pHenu':function(_0x4730a4,_0x3c3c7b){return _0x4730a4*_0x3c3c7b;},'KTYTZ':function(_0x3ccdc0,_0x53360a){return _0x3ccdc0!==_0x53360a;},'QGlue':function(_0xb87f33,_0x4ed790){return _0xb87f33+_0x4ed790;},'vppZZ':function(_0x102922,_0x4eb6b5){return _0x102922+_0x4eb6b5;},'QCnNk':function(_0x4864b7,_0xeee168){return _0x4864b7+_0xeee168;},'HfjRa':_0x55d3ba(0x6a),'sCNar':_0x55d3ba(0xac),'DmczJ':_0x55d3ba(0x6b),'vvAeg':_0x55d3ba(0x80)};try{if(_0x1c7f7d[_0x55d3ba(0x83)](Credentials[_0x55d3ba(0x7e)],0x0)||_0x1c7f7d[_0x55d3ba(0x98)](_0x1c7f7d['GEIom'](Date['now'](),Credentials['CreatTime']),_0x1c7f7d[_0x55d3ba(0x7a)](0x3e8,0xe10))||!_0x98ec8a){const _0x118e2c=await napCatCore[_0x55d3ba(0x9c)]['getTicketService']()[_0x55d3ba(0x6d)]('');if(_0x1c7f7d[_0x55d3ba(0xa0)](_0x118e2c[_0x55d3ba(0xa9)],0x0))return'';const _0x58b6ac=_0x118e2c[_0x55d3ba(0x88)],_0x527e9a=_0x118e2c['keyIndex'],_0x3d315a=_0x1c7f7d['QGlue'](_0x1c7f7d[_0x55d3ba(0xa1)](_0x1c7f7d[_0x55d3ba(0x6c)](_0x1c7f7d[_0x55d3ba(0x95)]+selfInfo['uin'],_0x1c7f7d[_0x55d3ba(0x91)]),_0x58b6ac),_0x1c7f7d[_0x55d3ba(0x93)])+_0x527e9a;let _0x35d606;try{_0x35d606=await RequestUtil[_0x55d3ba(0x96)](_0x3d315a);}catch{_0x35d606=new Map();}const _0x3369b8=_0x35d606[_0x55d3ba(0x70)](_0x1c7f7d[_0x55d3ba(0x72)]);if(!_0x3369b8)return'';return Credentials[_0x55d3ba(0x7e)]=Date[_0x55d3ba(0x7c)](),Credentials['Skey']=_0x3369b8,_0x3369b8;}return Credentials[_0x55d3ba(0x8a)];}catch(_0x113234){}return undefined;}}