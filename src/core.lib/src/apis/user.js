const _0x4f40aa=_0xe296;(function(_0x3d4829,_0x2715d2){const _0x267dd4=_0xe296,_0x41e517=_0x3d4829();while(!![]){try{const _0x443479=-parseInt(_0x267dd4(0xb0))/0x1*(-parseInt(_0x267dd4(0xaf))/0x2)+parseInt(_0x267dd4(0x7d))/0x3*(parseInt(_0x267dd4(0x9d))/0x4)+-parseInt(_0x267dd4(0xb9))/0x5*(parseInt(_0x267dd4(0xa5))/0x6)+-parseInt(_0x267dd4(0xbf))/0x7*(-parseInt(_0x267dd4(0xa1))/0x8)+parseInt(_0x267dd4(0xa8))/0x9*(parseInt(_0x267dd4(0xb1))/0xa)+parseInt(_0x267dd4(0xa7))/0xb*(parseInt(_0x267dd4(0xad))/0xc)+-parseInt(_0x267dd4(0x7e))/0xd;if(_0x443479===_0x2715d2)break;else _0x41e517['push'](_0x41e517['shift']());}catch(_0x566b00){_0x41e517['push'](_0x41e517['shift']());}}}(_0x250f,0x3c0d3));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';function _0x250f(){const _0xb8a543=['getMsgService','获取Pskey失败','4PdKSDT','iyCtN','EnGsB','bJOVW','24HrwHIP','PZlaq','getPSkey','setQQAvatar','318BnGYwk','get','2221714RuZQJQ','63702rrqdhx','robotUinRanges','setBuddyProfileLike','uid','setSelfOnlineStatus','24zJRycU','getRobotUinRange','688TmINkD','134OFCiiC','560FVJzNr','length','nKlxI','RhQkd','session','PskeyData','onProfileDetailInfoChanged','uin','7985LacvBU','getPskey','response','xKSkK','sSDUH','getTipOffService','601783awZDYD','CreatTime','getUserDetailInfoWithBizInfo','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','jWQEm','RPDiB','getUserDetailInfo','getProfileLikeService','728169qweUOK','13213590oGdZUP','dRzgq','zzVqW','clientKey','PskeyTime','push','then','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','PDqlb','onLoginSuccess','addListener','tmgDl','errMsg','LwoKy','YqdyE','result','like','delete','HttpGetCookies','forEach','Skey','set','getSkey','WrOrU','setStatus','domainPskeyMap','now','entries','getProfileService'];_0x250f=function(){return _0xb8a543;};return _0x250f();}import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';function _0xe296(_0x5b55ad,_0x42ecc5){const _0x250fee=_0x250f();return _0xe296=function(_0xe296dd,_0x371f02){_0xe296dd=_0xe296dd-0x79;let _0x3717d1=_0x250fee[_0xe296dd];return _0x3717d1;},_0xe296(_0x5b55ad,_0x42ecc5);}import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x4f40aa(0xb7)]=_0x31dfc4=>{const _0x3a6241=_0x4f40aa;userInfoCache[_0x31dfc4['uid']]=_0x31dfc4,userDetailHandlers[_0x3a6241(0x91)](_0x5d24b4=>_0x5d24b4(_0x31dfc4));},setTimeout(()=>{const _0x390de3=_0x4f40aa;napCatCore[_0x390de3(0x87)](()=>{const _0x51cc9b=_0x390de3;napCatCore[_0x51cc9b(0x88)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x4f40aa(0xac)](_0x46d8ea,_0x15f4a2,_0x3b2829){const _0x367ac1=_0x4f40aa;return napCatCore[_0x367ac1(0xb5)][_0x367ac1(0x9b)]()[_0x367ac1(0x96)]({'status':_0x46d8ea,'extStatus':_0x15f4a2,'batteryStatus':_0x3b2829});}static async[_0x4f40aa(0x8e)](_0x401746,_0x27485e=0x1){const _0x121673=_0x4f40aa;return napCatCore[_0x121673(0xb5)][_0x121673(0x7c)]()[_0x121673(0xaa)]({'friendUid':_0x401746,'sourceId':0x47,'doLikeCount':_0x27485e,'doLikeTollCount':0x0});}static async[_0x4f40aa(0xa4)](_0xb9a438){const _0x39b4a2=_0x4f40aa,_0x2672ab=napCatCore['session'][_0x39b4a2(0x9a)]()['setHeader'](_0xb9a438);return{'result':_0x2672ab?.[_0x39b4a2(0x8d)],'errMsg':_0x2672ab?.[_0x39b4a2(0x8a)]};}static async['getSelfInfo'](){}static async['getUserInfo'](_0x5d8dd3){}static async[_0x4f40aa(0x7b)](_0x5ee882){const _0x4e3d3a=_0x4f40aa,_0x346665={'PZlaq':function(_0x3112af,_0x5d1c48){return _0x3112af(_0x5d1c48);},'dRzgq':'getUserDetailInfo\x20timeout','sSDUH':function(_0x1a8e03,_0xb0cb72){return _0x1a8e03===_0xb0cb72;},'PDqlb':function(_0x2e10c1){return _0x2e10c1();},'tmgDl':function(_0x4ba90c,_0xdbca8a,_0x493a01){return _0x4ba90c(_0xdbca8a,_0x493a01);}},_0x1fb40e=napCatCore[_0x4e3d3a(0xb5)][_0x4e3d3a(0x9a)]();return new Promise((_0x2f5777,_0x34cc75)=>{const _0x2583c6=_0x4e3d3a,_0x5767f2={'iyCtN':function(_0x557354,_0x168ba4){const _0x43743f=_0xe296;return _0x346665[_0x43743f(0xa2)](_0x557354,_0x168ba4);},'xKSkK':_0x346665[_0x2583c6(0x7f)],'RhQkd':function(_0x208db5,_0x1e10fa){const _0xd2fa0d=_0x2583c6;return _0x346665[_0xd2fa0d(0xbd)](_0x208db5,_0x1e10fa);}},_0x300ef7=_0x346665[_0x2583c6(0x86)](randomUUID);let _0x7af91e=![];_0x346665[_0x2583c6(0x89)](setTimeout,()=>{const _0xf22023=_0x2583c6;!_0x7af91e&&_0x5767f2[_0xf22023(0x9e)](_0x34cc75,_0x5767f2[_0xf22023(0xbc)]);},0x1388),userDetailHandlers[_0x2583c6(0x93)](_0x300ef7,_0x5125dd=>{const _0x3771d4=_0x2583c6;_0x5767f2[_0x3771d4(0xb4)](_0x5125dd[_0x3771d4(0xab)],_0x5ee882)&&(_0x7af91e=!![],userDetailHandlers[_0x3771d4(0x8f)](_0x300ef7),uid2UinMap[_0x5ee882]=_0x5125dd[_0x3771d4(0xb8)],_0x5767f2[_0x3771d4(0x9e)](_0x2f5777,_0x5125dd));}),_0x1fb40e[_0x2583c6(0xc1)](_0x5ee882,[0x0])[_0x2583c6(0x84)](_0x19c639=>{});});}static async[_0x4f40aa(0xa3)](_0x5670bf,_0x235777=!![]){const _0xe7acf=_0x4f40aa,_0x598960={'nKlxI':function(_0x3ef522,_0x13f17c){return _0x3ef522>_0x13f17c;},'RPDiB':function(_0x47cecf,_0x52dd46){return _0x47cecf-_0x52dd46;},'zzVqW':function(_0x2d2c00,_0xdd8283){return _0x2d2c00===_0xdd8283;},'mcZif':function(_0x7be1f3,_0x5bf22c,_0x445111){return _0x7be1f3(_0x5bf22c,_0x445111);}},_0x1fda81=[],_0x439de6={};for(const _0x2143b3 in _0x5670bf){const _0x18dad3=Credentials[_0xe7acf(0xb6)][_0xe7acf(0xa6)](_0x5670bf[_0x2143b3]),_0x7391f3=Credentials[_0xe7acf(0x82)][_0xe7acf(0xa6)](_0x5670bf[_0x2143b3]);!_0x18dad3||!_0x7391f3||_0x598960[_0xe7acf(0xb3)](_0x598960[_0xe7acf(0x7a)](Date[_0xe7acf(0x98)](),_0x7391f3),0x708*0x3e8)||!_0x235777?_0x1fda81[_0xe7acf(0x83)](_0x5670bf[_0x2143b3]):_0x439de6[_0x5670bf[_0x2143b3]]=_0x18dad3;}let _0x1edbbf={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x598960[_0xe7acf(0xb3)](_0x1fda81[_0xe7acf(0xb2)],0x0)&&(_0x1edbbf=await napCatCore[_0xe7acf(0xb5)][_0xe7acf(0xbe)]()[_0xe7acf(0xba)](_0x1fda81,!![]));const _0x3fcd88=_0x1edbbf[_0xe7acf(0x97)];for(const _0x43fc00 of _0x3fcd88[_0xe7acf(0x99)]()){Credentials[_0xe7acf(0xb6)]['set'](_0x43fc00[0x0],_0x43fc00[0x1]),Credentials[_0xe7acf(0x82)][_0xe7acf(0x93)](_0x43fc00[0x0],Date[_0xe7acf(0x98)]());}const _0x74d614=Object['assign'](Object['fromEntries'](_0x3fcd88),_0x439de6);if(_0x598960[_0xe7acf(0x80)](_0x1edbbf['result'],0x0))return _0x74d614;else _0x598960['mcZif'](logError,_0xe7acf(0x9c),_0x1edbbf[_0xe7acf(0x8a)]);return{};}static async[_0x4f40aa(0xae)](){const _0x9c8474=_0x4f40aa,_0x4047c5=await napCatCore[_0x9c8474(0xb5)]['getRobotService']()['getRobotUinRange']({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x4047c5?.[_0x9c8474(0xbb)]?.[_0x9c8474(0xa9)];}static async[_0x4f40aa(0x94)](_0x3a57c0=!![]){const _0x34b32f=_0x4f40aa,_0x57384b={'bJOVW':function(_0x5009c2,_0x5aea38){return _0x5009c2==_0x5aea38;},'jWQEm':function(_0x1ed3b9,_0x4d238b){return _0x1ed3b9-_0x4d238b;},'TMIHU':function(_0x4d51cf,_0x5407c3){return _0x4d51cf*_0x5407c3;},'LwoKy':function(_0x24c4b3,_0x5c7a0e){return _0x24c4b3!==_0x5c7a0e;},'WrOrU':function(_0x49b205,_0x327193){return _0x49b205+_0x327193;},'YqdyE':function(_0x50682d,_0x39e257){return _0x50682d+_0x39e257;},'qtXeY':_0x34b32f(0x85),'EnGsB':'skey'};try{if(_0x57384b[_0x34b32f(0xa0)](Credentials['CreatTime'],0x0)||_0x57384b[_0x34b32f(0x79)](Date[_0x34b32f(0x98)](),Credentials[_0x34b32f(0xc0)])>_0x57384b['TMIHU'](0x3e8,0xe10)||!_0x3a57c0){const _0x464d12=await napCatCore[_0x34b32f(0xb5)]['getTicketService']()['forceFetchClientKey']('');if(_0x57384b[_0x34b32f(0x8b)](_0x464d12['result'],0x0))return'';const _0x28609f=_0x464d12[_0x34b32f(0x81)],_0x2d26ff=_0x464d12['keyIndex'],_0x5c49f6=_0x57384b[_0x34b32f(0x95)](_0x57384b['YqdyE'](_0x57384b[_0x34b32f(0x8c)](_0x34b32f(0xc2),selfInfo[_0x34b32f(0xb8)])+'&clientkey=',_0x28609f),_0x57384b['qtXeY'])+_0x2d26ff;let _0x2090ae;try{_0x2090ae=await RequestUtil[_0x34b32f(0x90)](_0x5c49f6);}catch{_0x2090ae=new Map();}const _0x5be78b=_0x2090ae['get'](_0x57384b[_0x34b32f(0x9f)]);if(!_0x5be78b)return'';return Credentials['CreatTime']=Date['now'](),Credentials[_0x34b32f(0x92)]=_0x5be78b,_0x5be78b;}return Credentials[_0x34b32f(0x92)];}catch(_0x461923){}return undefined;}}