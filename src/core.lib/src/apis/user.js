const _0x2dfefb=_0x20aa;(function(_0x1feae4,_0x298518){const _0x2794d3=_0x20aa,_0x301cf3=_0x1feae4();while(!![]){try{const _0x539ba4=parseInt(_0x2794d3(0x1e0))/0x1*(-parseInt(_0x2794d3(0x1d5))/0x2)+parseInt(_0x2794d3(0x1dd))/0x3+-parseInt(_0x2794d3(0x1bd))/0x4+parseInt(_0x2794d3(0x1d8))/0x5*(-parseInt(_0x2794d3(0x1c9))/0x6)+-parseInt(_0x2794d3(0x1de))/0x7+-parseInt(_0x2794d3(0x1eb))/0x8*(-parseInt(_0x2794d3(0x1e9))/0x9)+parseInt(_0x2794d3(0x1f0))/0xa;if(_0x539ba4===_0x298518)break;else _0x301cf3['push'](_0x301cf3['shift']());}catch(_0x5a6888){_0x301cf3['push'](_0x301cf3['shift']());}}}(_0xca08,0xeeee2));import{Credentials,selfInfo}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{HttpGetCookies}from'../../../common/utils/request';import{logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0xca08(){const _0x4dff8d=['raBeE','clientKey','4229346bsJGVF','947541uteOdS','getUserInfo','481bZuOrn','getPSkey','onProfileDetailInfoChanged','getUserDetailInfoWithBizInfo','LKnHq','like','forEach','addListener','ialdw','28494LRAEqi','AitQD','24DnIbAJ','cxfNg','getSkey','getMsgService','JtmLW','37932920JJBnmO','now','rfxaU','setStatus','keyIndex','push','CreatTime','Skey','setQQAvatar','getProfileLikeService','domainPskeyMap','6042180qCxcsI','bMjWy','getRobotUinRange','length','PskeyData','lNWAL','setBuddyProfileLike','uid','&clientkey=','result','entries','get','30JAdUMA','getTipOffService','CBVEX','setSelfOnlineStatus','set','fromEntries','skey','getProfileService','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','session','delete','vIEYZ','7432yCUxpM','ZHUlz','onLoginSuccess','800610kwTTxe','获取Pskey失败','robotUinRanges'];_0xca08=function(){return _0x4dff8d;};return _0xca08();}profileListener[_0x2dfefb(0x1e2)]=_0x3a4fd0=>{const _0x42768b=_0x2dfefb;userInfoCache[_0x3a4fd0[_0x42768b(0x1c4)]]=_0x3a4fd0,userDetailHandlers[_0x42768b(0x1e6)](_0x1da167=>_0x1da167(_0x3a4fd0));},setTimeout(()=>{const _0x3de60f=_0x2dfefb;napCatCore[_0x3de60f(0x1d7)](()=>{const _0x528bd9=_0x3de60f;napCatCore[_0x528bd9(0x1e7)](profileListener);});},0x64);function _0x20aa(_0x2262db,_0x2aad88){const _0xca08b4=_0xca08();return _0x20aa=function(_0x20aa8d,_0x457782){_0x20aa8d=_0x20aa8d-0x1b5;let _0x2f22a4=_0xca08b4[_0x20aa8d];return _0x2f22a4;},_0x20aa(_0x2262db,_0x2aad88);}export class NTQQUserApi{static async[_0x2dfefb(0x1cc)](_0x2ffdc9,_0x2fd87a,_0x1f39c3){const _0x2f3bf8=_0x2dfefb;return napCatCore[_0x2f3bf8(0x1d2)][_0x2f3bf8(0x1ee)]()[_0x2f3bf8(0x1b5)]({'status':_0x2ffdc9,'extStatus':_0x2fd87a,'batteryStatus':_0x1f39c3});}static async[_0x2dfefb(0x1e5)](_0x4fe478,_0x220b9e=0x1){const _0x2212c6=_0x2dfefb;return napCatCore['session'][_0x2212c6(0x1bb)]()[_0x2212c6(0x1c3)]({'friendUid':_0x4fe478,'sourceId':0x47,'doLikeCount':_0x220b9e,'doLikeTollCount':0x0});}static async[_0x2dfefb(0x1ba)](_0x4e7f3f){const _0x162c7c=_0x2dfefb,_0x5453ec=napCatCore[_0x162c7c(0x1d2)][_0x162c7c(0x1d0)]()['setHeader'](_0x4e7f3f);return{'result':_0x5453ec?.[_0x162c7c(0x1c6)],'errMsg':_0x5453ec?.['errMsg']};}static async['getSelfInfo'](){}static async[_0x2dfefb(0x1df)](_0xcff013){}static async['getUserDetailInfo'](_0x276e57){const _0x1012da=_0x2dfefb,_0x5bbd4e={'rJtXu':function(_0x50075b,_0x468b27){return _0x50075b(_0x468b27);},'ozdCU':function(_0x3704a5,_0x3dea7d){return _0x3704a5===_0x3dea7d;},'bMjWy':function(_0x3b0065,_0x4bb6e4){return _0x3b0065(_0x4bb6e4);},'CBVEX':function(_0x2c2c4b,_0x4ab473,_0x524c7a){return _0x2c2c4b(_0x4ab473,_0x524c7a);}},_0x8c8ea0=napCatCore['session'][_0x1012da(0x1d0)]();return new Promise((_0x28ed2,_0x402f47)=>{const _0x53d6dd=_0x1012da,_0x2c7cc1=randomUUID();let _0x396064=![];_0x5bbd4e[_0x53d6dd(0x1cb)](setTimeout,()=>{!_0x396064&&_0x5bbd4e['rJtXu'](_0x402f47,'getUserDetailInfo\x20timeout');},0x1388),userDetailHandlers[_0x53d6dd(0x1cd)](_0x2c7cc1,_0x129a31=>{const _0x315d02=_0x53d6dd;_0x5bbd4e['ozdCU'](_0x129a31[_0x315d02(0x1c4)],_0x276e57)&&(_0x396064=!![],userDetailHandlers[_0x315d02(0x1d3)](_0x2c7cc1),_0x5bbd4e[_0x315d02(0x1be)](_0x28ed2,_0x129a31));}),_0x8c8ea0[_0x53d6dd(0x1e3)](_0x276e57,[0x0])['then'](_0x4285cc=>{});});}static async[_0x2dfefb(0x1e1)](_0x1b5c2a,_0xd5b914=!![]){const _0xcb407=_0x2dfefb,_0x916cfc={'OejWM':function(_0x418d7c,_0x2c26e9){return _0x418d7c||_0x2c26e9;},'ialdw':function(_0x1f1f24,_0x50a70d){return _0x1f1f24-_0x50a70d;},'AitQD':function(_0x34682f,_0x493e1d){return _0x34682f*_0x493e1d;},'vIEYZ':function(_0x2922f3,_0x45bf9c){return _0x2922f3>_0x45bf9c;},'TYAqH':function(_0x45add5,_0x531974){return _0x45add5===_0x531974;},'JtmLW':function(_0x41dbf0,_0x5e613b,_0x3ae5b0){return _0x41dbf0(_0x5e613b,_0x3ae5b0);}};let _0x567ac3=[],_0x534781={};for(let _0x133165 in _0x1b5c2a){let _0x34f95e=Credentials[_0xcb407(0x1c1)][_0xcb407(0x1c8)](_0x1b5c2a[_0x133165]),_0x221a9e=Credentials['PskeyTime'][_0xcb407(0x1c8)](_0x1b5c2a[_0x133165]);_0x916cfc['OejWM'](!_0x34f95e,!_0x221a9e)||_0x916cfc[_0xcb407(0x1e8)](Date[_0xcb407(0x1f1)](),_0x221a9e)>_0x916cfc[_0xcb407(0x1ea)](0x708,0x3e8)||!_0xd5b914?_0x567ac3[_0xcb407(0x1b7)](_0x1b5c2a[_0x133165]):_0x534781[_0x1b5c2a[_0x133165]]=_0x34f95e;}let _0x47b1d6={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x916cfc[_0xcb407(0x1d4)](_0x567ac3[_0xcb407(0x1c0)],0x0)&&(_0x47b1d6=await napCatCore['session'][_0xcb407(0x1ca)]()['getPskey'](_0x567ac3,!![]));let _0x7b267f=_0x47b1d6[_0xcb407(0x1bc)];for(let _0x2fb9f0 of _0x7b267f[_0xcb407(0x1c7)]()){Credentials[_0xcb407(0x1c1)][_0xcb407(0x1cd)](_0x2fb9f0[0x0],_0x2fb9f0[0x1]),Credentials['PskeyTime'][_0xcb407(0x1cd)](_0x2fb9f0[0x0],Date[_0xcb407(0x1f1)]());}let _0x3dec5a=Object['assign'](Object[_0xcb407(0x1ce)](_0x7b267f),_0x534781);if(_0x916cfc['TYAqH'](_0x47b1d6[_0xcb407(0x1c6)],0x0))return _0x3dec5a;else _0x916cfc[_0xcb407(0x1ef)](logError,_0xcb407(0x1d9),_0x47b1d6['errMsg']);return{};}static async[_0x2dfefb(0x1bf)](){const _0x2fd067=_0x2dfefb,_0x7640b6=await napCatCore[_0x2fd067(0x1d2)]['getRobotService']()[_0x2fd067(0x1bf)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x7640b6?.['response']?.[_0x2fd067(0x1da)];}static async[_0x2dfefb(0x1ed)](_0x2bada1=!![]){const _0x366915=_0x2dfefb,_0x2bd63e={'bVEOI':function(_0x1ab4fe,_0xd5a173){return _0x1ab4fe==_0xd5a173;},'EWPZX':function(_0x38ef58,_0x3214c4){return _0x38ef58>_0x3214c4;},'lNWAL':function(_0xf8d5a2,_0x3139e1){return _0xf8d5a2-_0x3139e1;},'cxfNg':function(_0x4b53a6,_0x50ac9d){return _0x4b53a6*_0x50ac9d;},'ZHUlz':function(_0x152db4,_0x3ac8b1){return _0x152db4!==_0x3ac8b1;},'rfxaU':function(_0x48c6db,_0xdc061b){return _0x48c6db+_0xdc061b;},'tzivt':'https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','LKnHq':_0x366915(0x1d1),'raBeE':_0x366915(0x1cf)};try{if(_0x2bd63e['bVEOI'](Credentials['CreatTime'],0x0)||_0x2bd63e['EWPZX'](_0x2bd63e[_0x366915(0x1c2)](Date[_0x366915(0x1f1)](),Credentials[_0x366915(0x1b8)]),_0x2bd63e[_0x366915(0x1ec)](0x3e8,0xe10))||!_0x2bada1){const _0x7d54ee=await napCatCore[_0x366915(0x1d2)]['getTicketService']()['forceFetchClientKey']('');if(_0x2bd63e[_0x366915(0x1d6)](_0x7d54ee[_0x366915(0x1c6)],0x0))return'';const _0x59e538=_0x7d54ee[_0x366915(0x1dc)],_0x35df3a=_0x7d54ee[_0x366915(0x1b6)],_0x567734=_0x2bd63e['rfxaU'](_0x2bd63e[_0x366915(0x1f2)](_0x2bd63e[_0x366915(0x1f2)](_0x2bd63e['rfxaU'](_0x2bd63e['tzivt'],selfInfo['uin'])+_0x366915(0x1c5),_0x59e538),_0x2bd63e[_0x366915(0x1e4)]),_0x35df3a),_0x438602=await HttpGetCookies(_0x567734),_0x12bb13=_0x438602[_0x366915(0x1c8)](_0x2bd63e[_0x366915(0x1db)]);if(!_0x12bb13)return'';return Credentials[_0x366915(0x1b8)]=Date['now'](),Credentials[_0x366915(0x1b9)]=_0x12bb13,_0x12bb13;}return Credentials[_0x366915(0x1b9)];}catch(_0x27c542){}return undefined;}}