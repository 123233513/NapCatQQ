const _0x38e534=_0xe429;(function(_0x240aa9,_0x37e6f9){const _0x5a4065=_0xe429,_0x301969=_0x240aa9();while(!![]){try{const _0x45505d=parseInt(_0x5a4065(0x1c8))/0x1+parseInt(_0x5a4065(0x1c2))/0x2+-parseInt(_0x5a4065(0x1a5))/0x3+parseInt(_0x5a4065(0x1ab))/0x4*(-parseInt(_0x5a4065(0x169))/0x5)+parseInt(_0x5a4065(0x1b9))/0x6+-parseInt(_0x5a4065(0x1ae))/0x7*(-parseInt(_0x5a4065(0x17e))/0x8)+-parseInt(_0x5a4065(0x1ad))/0x9*(parseInt(_0x5a4065(0x1b2))/0xa);if(_0x45505d===_0x37e6f9)break;else _0x301969['push'](_0x301969['shift']());}catch(_0x2aabc0){_0x301969['push'](_0x301969['shift']());}}}(_0xd6c6,0xaf4e4));import{Credentials,selfInfo}from'@/core/data';import{napCatCore}from'@/core';function _0xd6c6(){const _0x1a1233=['CreatTime','EMJeb','domainPskeyMap','ymIBI','Magfy','Skey','robotUinRanges','getProfileService','PskeyData','uinInfo','kdzGb','onProfileDetailInfoChanged','entries','KVKyT','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','uid','onLoginSuccess','152EgzHhV','NodeIKernelUixConvertService/getUin','&clientkey=','BiuBC','clientKey','MVchT','biJhL','modifySelfProfile','setStatus','setHeader','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','now','CallNoListenerEvent','PskeyTime','getUserDetailInfoWithBizInfo','setQQAvatar','ayHXM','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','length','%2Finfocenter&keyindex=19%27','getQzoneCookies','getUserDetailInfo\x20timeout','getPskey','qAOph','NodeIKernelProfileService/getUserDetailInfoByUin','getSkey','getBuddyRecommendContactArkJson','forEach','getPSkey','KQnNK','GcJkN','then','getUidByUin','ClientKey','ahtop','mCsmu','getRobotUinRange','getUinByUid','addListener','2274894pgHTAW','请求获取Skey时失败','uin','getUserInfo','setBuddyProfileLike','push','765256feuhHo','lyNbm','8469AvZCKh','427371DxOvYt','ZGmCY','请求获取Cookies时失败','getProfileLikeService','10070VkXsBY','setSelfOnlineStatus','getMsgService','HttpsGetCookies','getTipOffService','set','KeyIndex','815544szzyVO','wOTXC','keyIndex','cMbrP','like','获取Pskey失败','EwwPN','assign','session','2146876iXZOjp','errMsg','CHhiQ','response','SMpcG','IGKMQ','245882YnLNST','VefDj','NodeIKernelUixConvertService/getUid','getBuddyService','getRobotService','result','5kMUaqy','fromEntries','modifyDesktopMiniProfile','get'];_0xd6c6=function(){return _0x1a1233;};return _0xd6c6();}import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';function _0xe429(_0x25bd93,_0x40c155){const _0xd6c639=_0xd6c6();return _0xe429=function(_0xe42969,_0x2d4e66){_0xe42969=_0xe42969-0x167;let _0x31af37=_0xd6c639[_0xe42969];return _0x31af37;},_0xe429(_0x25bd93,_0x40c155);}import{logDebug,logError}from'@/common/utils/log';import{NTEventDispatch}from'@/common/utils/EventTask';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x38e534(0x178)]=_0xd7e8c3=>{const _0x2594e1=_0x38e534;userInfoCache[_0xd7e8c3[_0x2594e1(0x17c)]]=_0xd7e8c3,userDetailHandlers[_0x2594e1(0x199)](_0x583c6c=>_0x583c6c(_0xd7e8c3));},setTimeout(()=>{const _0xa186fd=_0x38e534;napCatCore[_0xa186fd(0x17d)](()=>{const _0x18d9e0=_0xa186fd;napCatCore[_0x18d9e0(0x1a4)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x38e534(0x1b3)](_0x2268f5,_0x1fc003,_0x2ccce5){const _0x3c7a67=_0x38e534;return napCatCore[_0x3c7a67(0x1c1)][_0x3c7a67(0x1b4)]()[_0x3c7a67(0x186)]({'status':_0x2268f5,'extStatus':_0x1fc003,'batteryStatus':_0x2ccce5});}static async[_0x38e534(0x198)](_0x362eb0,_0x5ee2d5=''){const _0x3f0b5e=_0x38e534;return napCatCore[_0x3f0b5e(0x1c1)][_0x3f0b5e(0x1cb)]()[_0x3f0b5e(0x198)](_0x362eb0,_0x5ee2d5);}static async[_0x38e534(0x1bd)](_0x37c690,_0x156d8e=0x1){const _0x1eda1d=_0x38e534;return napCatCore['session'][_0x1eda1d(0x1b1)]()[_0x1eda1d(0x1a9)]({'friendUid':_0x37c690,'sourceId':0x47,'doLikeCount':_0x156d8e,'doLikeTollCount':0x0});}static async[_0x38e534(0x18d)](_0x569e49){const _0x1ee397=_0x38e534,_0x2964e9=napCatCore['session']['getProfileService']()[_0x1ee397(0x187)](_0x569e49);return{'result':_0x2964e9?.[_0x1ee397(0x168)],'errMsg':_0x2964e9?.['errMsg']};}static async['getSelfInfo'](){}static async[_0x38e534(0x1a8)](_0x28bf0c){}static async['getUserDetailInfo'](_0x59f096){const _0x12dfee=_0x38e534,_0x4a1641={'kdzGb':function(_0x509b70,_0x2f343a){return _0x509b70(_0x2f343a);},'KQnNK':function(_0x3b6973,_0x4a84d3){return _0x3b6973(_0x4a84d3);},'wOTXC':_0x12dfee(0x193),'RBozh':function(_0x4921b6,_0x4e655b){return _0x4921b6===_0x4e655b;},'mCsmu':function(_0x4bb4d1){return _0x4bb4d1();}},_0x2c43e6=napCatCore[_0x12dfee(0x1c1)][_0x12dfee(0x174)]();return new Promise((_0x4a6cd6,_0x28084a)=>{const _0x2b4673=_0x12dfee,_0x5f191c=_0x4a1641[_0x2b4673(0x1a1)](randomUUID);let _0x30f84c=![],_0x5320f0=undefined,_0x24fcb8=!![];setTimeout(()=>{const _0x1f03b0=_0x2b4673;!_0x30f84c&&(_0x5320f0?_0x4a1641[_0x1f03b0(0x177)](_0x4a6cd6,_0x5320f0):_0x4a1641[_0x1f03b0(0x19b)](_0x28084a,_0x4a1641[_0x1f03b0(0x1ba)])),userDetailHandlers['delete'](_0x5f191c);},0x1388),userDetailHandlers[_0x2b4673(0x1b7)](_0x5f191c,_0x59a56f=>{const _0x525ca4=_0x2b4673;_0x4a1641['RBozh'](_0x59a56f[_0x525ca4(0x17c)],_0x59f096)&&(_0x24fcb8?(_0x5320f0=_0x59a56f,_0x24fcb8=![]):(_0x30f84c=!![],_0x4a1641[_0x525ca4(0x19b)](_0x4a6cd6,_0x59a56f)));}),_0x2c43e6[_0x2b4673(0x18c)](_0x59f096,[0x0])[_0x2b4673(0x19d)](_0x5de958=>{});});}static async[_0x38e534(0x185)](_0x23009b){const _0x1d1a28=_0x38e534;return napCatCore[_0x1d1a28(0x1c1)][_0x1d1a28(0x174)]()[_0x1d1a28(0x16b)](_0x23009b);}static async[_0x38e534(0x19a)](_0x33b21f,_0x39a070=!![]){const _0x554c0d=_0x38e534,_0x3178ea={'Magfy':function(_0x4bb5e1,_0x7f0a6){return _0x4bb5e1||_0x7f0a6;},'SjAQn':function(_0x1d5639,_0xd49e39){return _0x1d5639>_0xd49e39;},'ahtop':function(_0x2f5273,_0x1bab55){return _0x2f5273-_0x1bab55;},'ayHXM':function(_0x3dfc79,_0x1a34aa){return _0x3dfc79*_0x1a34aa;},'IGKMQ':function(_0x5319a3,_0x4ab5ef){return _0x5319a3===_0x4ab5ef;},'oTgzf':_0x554c0d(0x1be)},_0x4a5819=[],_0x42d2d7={};for(const _0x495390 in _0x33b21f){const _0x5e48e9=Credentials[_0x554c0d(0x175)][_0x554c0d(0x16c)](_0x33b21f[_0x495390]),_0x28c109=Credentials[_0x554c0d(0x18b)][_0x554c0d(0x16c)](_0x33b21f[_0x495390]);_0x3178ea[_0x554c0d(0x171)](!_0x5e48e9,!_0x28c109)||_0x3178ea['SjAQn'](_0x3178ea[_0x554c0d(0x1a0)](Date[_0x554c0d(0x189)](),_0x28c109),_0x3178ea[_0x554c0d(0x18e)](0x708,0x3e8))||!_0x39a070?_0x4a5819[_0x554c0d(0x1aa)](_0x33b21f[_0x495390]):_0x42d2d7[_0x33b21f[_0x495390]]=_0x5e48e9;}let _0xce0b59={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x4a5819[_0x554c0d(0x190)]>0x0&&(_0xce0b59=await napCatCore[_0x554c0d(0x1c1)][_0x554c0d(0x1b6)]()[_0x554c0d(0x194)](_0x4a5819,!![]));const _0x47b2ab=_0xce0b59[_0x554c0d(0x16f)];for(const _0x5b2fe7 of _0x47b2ab[_0x554c0d(0x179)]()){Credentials[_0x554c0d(0x175)][_0x554c0d(0x1b7)](_0x5b2fe7[0x0],_0x5b2fe7[0x1]),Credentials[_0x554c0d(0x18b)][_0x554c0d(0x1b7)](_0x5b2fe7[0x0],Date[_0x554c0d(0x189)]());}const _0xa957e5=Object[_0x554c0d(0x1c0)](Object[_0x554c0d(0x16a)](_0x47b2ab),_0x42d2d7);if(_0x3178ea[_0x554c0d(0x1c7)](_0xce0b59[_0x554c0d(0x168)],0x0))return _0xa957e5;else logError(_0x3178ea['oTgzf'],_0xce0b59[_0x554c0d(0x1c3)]);return{};}static async['getRobotUinRange'](){const _0x1beaea=_0x38e534,_0x4e200a=await napCatCore[_0x1beaea(0x1c1)][_0x1beaea(0x167)]()[_0x1beaea(0x1a2)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x4e200a?.[_0x1beaea(0x1c5)]?.[_0x1beaea(0x173)];}static async[_0x38e534(0x192)](){const _0x5d424a=_0x38e534,_0x4b2407={'GcJkN':function(_0x1b4241,_0x4f9127){return _0x1b4241+_0x4f9127;},'EwwPN':function(_0x329191,_0x21bb3a){return _0x329191+_0x21bb3a;},'BiuBC':function(_0x162d7e,_0x3d24c8){return _0x162d7e+_0x3d24c8;},'AulWX':_0x5d424a(0x18f),'FCuRh':_0x5d424a(0x180),'IiobU':_0x5d424a(0x17b),'gkNQN':function(_0x6c5f9a,_0x39ba4c,_0x485fa8){return _0x6c5f9a(_0x39ba4c,_0x485fa8);}},_0x4d635e=_0x4b2407[_0x5d424a(0x19c)](_0x4b2407[_0x5d424a(0x1bf)](_0x4b2407[_0x5d424a(0x181)](_0x4b2407[_0x5d424a(0x1bf)](_0x4b2407[_0x5d424a(0x1bf)](_0x4b2407['AulWX'],selfInfo[_0x5d424a(0x1a7)]),_0x4b2407['FCuRh']),Credentials['ClientKey']),_0x4b2407['IiobU']),selfInfo[_0x5d424a(0x1a7)])+_0x5d424a(0x191);let _0x41d1c9={};try{_0x41d1c9=await RequestUtil[_0x5d424a(0x1b5)](_0x4d635e);}catch(_0x4fcbf6){_0x4b2407['gkNQN'](logDebug,_0x5d424a(0x1b0),_0x4fcbf6),_0x41d1c9={};}return _0x41d1c9;}static async[_0x38e534(0x197)](_0x373c98=!![]){const _0x358f88=_0x38e534,_0x154da6={'XPlKk':function(_0x37a6f4,_0x206beb){return _0x37a6f4>_0x206beb;},'MVchT':function(_0x4f487a,_0x52cf12){return _0x4f487a-_0x52cf12;},'lyNbm':function(_0xeee2de,_0x234d6c){return _0xeee2de*_0x234d6c;},'qAOph':function(_0x279fb8,_0x800fe1){return _0x279fb8!==_0x800fe1;},'ZGmCY':function(_0x4e5f16,_0x1884ce){return _0x4e5f16+_0x1884ce;},'biJhL':function(_0x24ae3f,_0x8a88ca){return _0x24ae3f+_0x8a88ca;},'vSdgV':function(_0xd81424,_0x51f829){return _0xd81424+_0x51f829;},'SMpcG':function(_0xd1c388,_0x33e46a){return _0xd1c388+_0x33e46a;},'CHhiQ':_0x358f88(0x18f),'VefDj':_0x358f88(0x188),'ymIBI':function(_0xb5f815,_0x436a10,_0x3e0be4){return _0xb5f815(_0x436a10,_0x3e0be4);},'KVKyT':_0x358f88(0x1a6),'cMbrP':'skey'};try{if(Credentials[_0x358f88(0x16d)]==0x0||_0x154da6['XPlKk'](_0x154da6[_0x358f88(0x183)](Date[_0x358f88(0x189)](),Credentials[_0x358f88(0x16d)]),_0x154da6[_0x358f88(0x1ac)](0x3e8,0xe10))||!_0x373c98){const _0x58a9cc=await napCatCore[_0x358f88(0x1c1)]['getTicketService']()['forceFetchClientKey']('');if(_0x154da6[_0x358f88(0x195)](_0x58a9cc[_0x358f88(0x168)],0x0))return'';const _0x175e24=_0x58a9cc[_0x358f88(0x182)],_0x2bf517=_0x58a9cc[_0x358f88(0x1bb)],_0x2356fe=_0x154da6[_0x358f88(0x1af)](_0x154da6[_0x358f88(0x184)](_0x154da6['vSdgV'](_0x154da6[_0x358f88(0x184)](_0x154da6[_0x358f88(0x1c6)](_0x154da6[_0x358f88(0x1c4)],selfInfo[_0x358f88(0x1a7)]),'&clientkey='),_0x175e24),_0x154da6[_0x358f88(0x1c9)]),_0x2bf517);let _0x52e3e0={};try{_0x52e3e0=await RequestUtil[_0x358f88(0x1b5)](_0x2356fe);}catch(_0x30fc71){_0x154da6[_0x358f88(0x170)](logDebug,_0x154da6[_0x358f88(0x17a)],_0x30fc71),_0x52e3e0={};}const _0x252e81=_0x52e3e0[_0x154da6[_0x358f88(0x1bc)]];if(!_0x252e81)return'';return Credentials[_0x358f88(0x19f)]=_0x175e24,Credentials[_0x358f88(0x1b8)]=_0x2bf517,Credentials['CreatTime']=Date['now'](),Credentials[_0x358f88(0x172)]=_0x252e81,_0x252e81;}return Credentials[_0x358f88(0x172)];}catch(_0x566b94){}return undefined;}static async[_0x38e534(0x19e)](_0x4eade8){const _0x5a9108=_0x38e534,_0x159b31={'EMJeb':_0x5a9108(0x1ca)};let _0x19775d=await NTEventDispatch[_0x5a9108(0x18a)](_0x159b31[_0x5a9108(0x16e)],0x1388,[_0x4eade8]);return _0x19775d['uidInfo'][_0x5a9108(0x16c)](_0x4eade8);}static async[_0x38e534(0x1a3)](_0x2de6b4){const _0x4316c0=_0x38e534;if(!_0x2de6b4)return'';let _0xa29ea2=await NTEventDispatch[_0x4316c0(0x18a)](_0x4316c0(0x17f),0x1388,[_0x2de6b4]);return _0xa29ea2[_0x4316c0(0x176)][_0x4316c0(0x16c)](_0x2de6b4);}static async['getUserDetailInfoByUin'](_0x3419b6){const _0x28b0fe=_0x38e534;return NTEventDispatch[_0x28b0fe(0x18a)](_0x28b0fe(0x196),0x1388,_0x3419b6);}}