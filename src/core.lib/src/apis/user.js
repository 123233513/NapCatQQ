const _0x328945=_0x3a10;(function(_0x4b43a8,_0x36348e){const _0x549ed2=_0x3a10,_0x3d609a=_0x4b43a8();while(!![]){try{const _0x532814=-parseInt(_0x549ed2(0x14a))/0x1+parseInt(_0x549ed2(0x153))/0x2*(parseInt(_0x549ed2(0x152))/0x3)+-parseInt(_0x549ed2(0x13b))/0x4+parseInt(_0x549ed2(0x120))/0x5+parseInt(_0x549ed2(0x11a))/0x6+-parseInt(_0x549ed2(0x151))/0x7*(parseInt(_0x549ed2(0x12e))/0x8)+-parseInt(_0x549ed2(0x114))/0x9;if(_0x532814===_0x36348e)break;else _0x3d609a['push'](_0x3d609a['shift']());}catch(_0x1ff5dd){_0x3d609a['push'](_0x3d609a['shift']());}}}(_0x58d8,0xa999d));import{Credentials,selfInfo}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';import{NTEventDispatch}from'@/common/utils/EventTask';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();function _0x3a10(_0x345901,_0x4055dd){const _0x58d806=_0x58d8();return _0x3a10=function(_0x3a1030,_0x2ba2b7){_0x3a1030=_0x3a1030-0xf4;let _0x565eb0=_0x58d806[_0x3a1030];return _0x565eb0;},_0x3a10(_0x345901,_0x4055dd);}function _0x58d8(){const _0x4c433d=['delete','10318dYuCdI','3pCuzpf','1545550JcOjBY','UyXiU','PskeyData','getPskey','getProfileService','uinInfo','vfXai','session','ClientKey','AryDS','CallNoListenerEvent','EXHWn','setHeader','forEach','CreatTime','vIhNj','lHrDk','getRobotService','haobv','getMsgService','HttpsGetCookies','vnfvj','GGOAk','%2Finfocenter&keyindex=19%27','getQzoneCookies','getBuddyService','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','wOBtu','fromEntries','onLoginSuccess','getRobotUinRange','setStatus','NodeIKernelProfileService/getUserDetailInfoByUin','getUserDetailInfo\x20timeout','13553334JiDiGS','WyBNL','qCawR','result','UObZb','MVGcH','6485928wtVJDQ','push','uidInfo','getUserInfo','getUserDetailInfoWithBizInfo','TnHBP','5723165OaFhXu','OKurw','getBuddyRecommendContactArkJson','获取Pskey失败','domainPskeyMap','like','KeyIndex','NPeSF','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','now','addListener','get','entries','3776Ehcrlb','Skey','getUidByUin','SAGqu','getPSkey','forceFetchClientKey','Eznkx','PskeyTime','&clientkey=','HKOcd','TwrXb','onProfileDetailInfoChanged','getUinByUid','179048FDIpKL','errMsg','then','setSelfOnlineStatus','uid','QlVsC','XTAgo','uin','set','rqtIK','XWTnn','length','getTipOffService','rcKcW','response','57295IiKOCD','getSelfInfo','clientKey','skey','getUserDetailInfo','getProfileLikeService'];_0x58d8=function(){return _0x4c433d;};return _0x58d8();}profileListener[_0x328945(0x139)]=_0x420cb1=>{const _0x24b556=_0x328945;userInfoCache[_0x420cb1[_0x24b556(0x13f)]]=_0x420cb1,userDetailHandlers[_0x24b556(0xff)](_0x55a149=>_0x55a149(_0x420cb1));},setTimeout(()=>{const _0x6bf42b=_0x328945;napCatCore[_0x6bf42b(0x10f)](()=>{const _0x53d5f9=_0x6bf42b;napCatCore[_0x53d5f9(0x12b)](profileListener);});},0x64);export class NTQQUserApi{static async[_0x328945(0x13e)](_0x49025a,_0x3ef031,_0x566385){const _0x3610c9=_0x328945;return napCatCore['session'][_0x3610c9(0x105)]()[_0x3610c9(0x111)]({'status':_0x49025a,'extStatus':_0x3ef031,'batteryStatus':_0x566385});}static async[_0x328945(0x122)](_0x342d9c,_0x544959=''){const _0xc99e6=_0x328945;return napCatCore[_0xc99e6(0xf9)][_0xc99e6(0x10b)]()[_0xc99e6(0x122)](_0x342d9c,_0x544959);}static async[_0x328945(0x125)](_0x23cf57,_0x13eb75=0x1){const _0xa56852=_0x328945;return napCatCore[_0xa56852(0xf9)][_0xa56852(0x14f)]()['setBuddyProfileLike']({'friendUid':_0x23cf57,'sourceId':0x47,'doLikeCount':_0x13eb75,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x1fdbac){const _0x1c2ad1=_0x328945,_0x328e8a=napCatCore[_0x1c2ad1(0xf9)][_0x1c2ad1(0xf6)]()[_0x1c2ad1(0xfe)](_0x1fdbac);return{'result':_0x328e8a?.[_0x1c2ad1(0x117)],'errMsg':_0x328e8a?.[_0x1c2ad1(0x13c)]};}static async[_0x328945(0x14b)](){}static async[_0x328945(0x11d)](_0x3c0564){}static async[_0x328945(0x14e)](_0x25c6a0){const _0xca6ed5=_0x328945,_0x2d02b3={'XTAgo':function(_0x233a0a,_0x1f636e){return _0x233a0a===_0x1f636e;},'rcKcW':function(_0x2123e5,_0x5a9fe1){return _0x2123e5(_0x5a9fe1);},'SAGqu':_0xca6ed5(0x113),'njyAZ':function(_0x4c6807){return _0x4c6807();},'NPeSF':function(_0x2b0ec6,_0x3e6432,_0x16f814){return _0x2b0ec6(_0x3e6432,_0x16f814);}},_0x4b097d=napCatCore[_0xca6ed5(0xf9)][_0xca6ed5(0xf6)]();return new Promise((_0x217609,_0x22d133)=>{const _0xf1d41a=_0xca6ed5,_0x155b25={'lHrDk':function(_0x14afc5,_0x1c4533){const _0x526524=_0x3a10;return _0x2d02b3[_0x526524(0x148)](_0x14afc5,_0x1c4533);},'AryDS':_0x2d02b3[_0xf1d41a(0x131)]},_0x2ba2a8=_0x2d02b3['njyAZ'](randomUUID);let _0x1f4418=![],_0x1b4636=undefined,_0xc7617a=!![];_0x2d02b3[_0xf1d41a(0x127)](setTimeout,()=>{const _0x5666fb=_0xf1d41a;!_0x1f4418&&(_0x1b4636?_0x217609(_0x1b4636):_0x155b25[_0x5666fb(0x102)](_0x22d133,_0x155b25[_0x5666fb(0xfb)])),userDetailHandlers[_0x5666fb(0x150)](_0x2ba2a8);},0x1388),userDetailHandlers[_0xf1d41a(0x143)](_0x2ba2a8,_0x5bf056=>{const _0x3d88be=_0xf1d41a;_0x2d02b3[_0x3d88be(0x141)](_0x5bf056[_0x3d88be(0x13f)],_0x25c6a0)&&(_0xc7617a?(_0x1b4636=_0x5bf056,_0xc7617a=![]):(_0x1f4418=!![],_0x217609(_0x5bf056)));}),_0x4b097d[_0xf1d41a(0x11e)](_0x25c6a0,[0x0])[_0xf1d41a(0x13d)](_0x1231c7=>{});});}static async['modifySelfProfile'](_0x5d3a19){const _0x3d3102=_0x328945;return napCatCore[_0x3d3102(0xf9)][_0x3d3102(0xf6)]()['modifyDesktopMiniProfile'](_0x5d3a19);}static async[_0x328945(0x132)](_0x23a695,_0x53091e=!![]){const _0x567ee1=_0x328945,_0x176955={'HKOcd':function(_0x3b9e10,_0x11814c){return _0x3b9e10||_0x11814c;},'LWysf':function(_0x473fce,_0x5cabb6){return _0x473fce>_0x5cabb6;},'TwrXb':function(_0xf56cc9,_0xb332a0){return _0xf56cc9-_0xb332a0;},'UObZb':function(_0x11d53b,_0x576e16){return _0x11d53b*_0x576e16;},'vIhNj':function(_0x55a419,_0x5444ec){return _0x55a419===_0x5444ec;},'vnfvj':function(_0x322fd1,_0x4c1390,_0x3cbd0e){return _0x322fd1(_0x4c1390,_0x3cbd0e);},'whPME':_0x567ee1(0x123)},_0x5da64f=[],_0x138418={};for(const _0x3c5e28 in _0x23a695){const _0xd1ef74=Credentials[_0x567ee1(0xf4)][_0x567ee1(0x12c)](_0x23a695[_0x3c5e28]),_0x44279e=Credentials[_0x567ee1(0x135)][_0x567ee1(0x12c)](_0x23a695[_0x3c5e28]);_0x176955[_0x567ee1(0x137)](!_0xd1ef74,!_0x44279e)||_0x176955['LWysf'](_0x176955[_0x567ee1(0x138)](Date[_0x567ee1(0x12a)](),_0x44279e),_0x176955[_0x567ee1(0x118)](0x708,0x3e8))||!_0x53091e?_0x5da64f[_0x567ee1(0x11b)](_0x23a695[_0x3c5e28]):_0x138418[_0x23a695[_0x3c5e28]]=_0xd1ef74;}let _0x54c23d={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x5da64f[_0x567ee1(0x146)]>0x0&&(_0x54c23d=await napCatCore[_0x567ee1(0xf9)][_0x567ee1(0x147)]()[_0x567ee1(0xf5)](_0x5da64f,!![]));const _0x476ce5=_0x54c23d[_0x567ee1(0x124)];for(const _0x4791c9 of _0x476ce5[_0x567ee1(0x12d)]()){Credentials[_0x567ee1(0xf4)]['set'](_0x4791c9[0x0],_0x4791c9[0x1]),Credentials[_0x567ee1(0x135)][_0x567ee1(0x143)](_0x4791c9[0x0],Date[_0x567ee1(0x12a)]());}const _0x3c2ca6=Object['assign'](Object[_0x567ee1(0x10e)](_0x476ce5),_0x138418);if(_0x176955[_0x567ee1(0x101)](_0x54c23d[_0x567ee1(0x117)],0x0))return _0x3c2ca6;else _0x176955[_0x567ee1(0x107)](logError,_0x176955['whPME'],_0x54c23d['errMsg']);return{};}static async[_0x328945(0x110)](){const _0x35e4d8=_0x328945,_0xc9f393=await napCatCore['session'][_0x35e4d8(0x103)]()['getRobotUinRange']({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0xc9f393?.[_0x35e4d8(0x149)]?.['robotUinRanges'];}static async[_0x328945(0x10a)](){const _0x58a777=_0x328945,_0x38de7d={'WyBNL':function(_0x3ebaca,_0x31cd01){return _0x3ebaca+_0x31cd01;},'EXHWn':function(_0x1d98f9,_0x445ec2){return _0x1d98f9+_0x445ec2;},'FkENh':_0x58a777(0x129),'haobv':'&clientkey=','cXkwx':_0x58a777(0x10c),'MVGcH':_0x58a777(0x109),'GGOAk':function(_0x1e528e,_0x5a9ceb,_0x9b443d){return _0x1e528e(_0x5a9ceb,_0x9b443d);},'GmGFx':'请求获取Cookies时失败'},_0x24b6ac=_0x38de7d[_0x58a777(0x115)](_0x38de7d[_0x58a777(0xfd)](_0x38de7d['EXHWn'](_0x38de7d[_0x58a777(0xfd)](_0x38de7d['FkENh']+selfInfo['uin']+_0x38de7d[_0x58a777(0x104)],Credentials[_0x58a777(0xfa)]),_0x38de7d['cXkwx']),selfInfo['uin']),_0x38de7d[_0x58a777(0x119)]);let _0x39317b={};try{_0x39317b=await RequestUtil[_0x58a777(0x106)](_0x24b6ac);}catch(_0x366b25){_0x38de7d[_0x58a777(0x108)](logDebug,_0x38de7d['GmGFx'],_0x366b25),_0x39317b={};}return _0x39317b;}static async['getSkey'](_0xf55ebb=!![]){const _0x3c28ae=_0x328945,_0x39a50e={'XWTnn':function(_0x23505f,_0x40f63e){return _0x23505f>_0x40f63e;},'quAbt':function(_0x3240ef,_0x535e05){return _0x3240ef*_0x535e05;},'OKurw':function(_0x1eb448,_0x2277af){return _0x1eb448!==_0x2277af;},'Eznkx':function(_0x8045e5,_0x215a35){return _0x8045e5+_0x215a35;},'wOBtu':function(_0x36925f,_0xaa0c79){return _0x36925f+_0xaa0c79;},'TnHBP':_0x3c28ae(0x129),'KdcxE':_0x3c28ae(0x128),'qCawR':function(_0x53e340,_0x1848e1,_0x4b7e70){return _0x53e340(_0x1848e1,_0x4b7e70);},'vfXai':'请求获取Skey时失败','rqtIK':_0x3c28ae(0x14d)};try{if(Credentials['CreatTime']==0x0||_0x39a50e[_0x3c28ae(0x145)](Date[_0x3c28ae(0x12a)]()-Credentials['CreatTime'],_0x39a50e['quAbt'](0x3e8,0xe10))||!_0xf55ebb){const _0x18ae49=await napCatCore[_0x3c28ae(0xf9)]['getTicketService']()[_0x3c28ae(0x133)]('');if(_0x39a50e[_0x3c28ae(0x121)](_0x18ae49[_0x3c28ae(0x117)],0x0))return'';const _0x1f20e5=_0x18ae49[_0x3c28ae(0x14c)],_0x2cc7cc=_0x18ae49['keyIndex'],_0x49727f=_0x39a50e[_0x3c28ae(0x134)](_0x39a50e[_0x3c28ae(0x134)](_0x39a50e[_0x3c28ae(0x10d)](_0x39a50e[_0x3c28ae(0x10d)](_0x39a50e[_0x3c28ae(0x11f)]+selfInfo[_0x3c28ae(0x142)],_0x3c28ae(0x136)),_0x1f20e5),_0x39a50e['KdcxE']),_0x2cc7cc);let _0x5bc9a9={};try{_0x5bc9a9=await RequestUtil[_0x3c28ae(0x106)](_0x49727f);}catch(_0x4b40d6){_0x39a50e[_0x3c28ae(0x116)](logDebug,_0x39a50e[_0x3c28ae(0xf8)],_0x4b40d6),_0x5bc9a9={};}const _0x5e0ab0=_0x5bc9a9[_0x39a50e[_0x3c28ae(0x144)]];if(!_0x5e0ab0)return'';return Credentials[_0x3c28ae(0xfa)]=_0x1f20e5,Credentials[_0x3c28ae(0x126)]=_0x2cc7cc,Credentials[_0x3c28ae(0x100)]=Date[_0x3c28ae(0x12a)](),Credentials[_0x3c28ae(0x12f)]=_0x5e0ab0,_0x5e0ab0;}return Credentials[_0x3c28ae(0x12f)];}catch(_0x3bbde5){}return undefined;}static async[_0x328945(0x130)](_0x125410){const _0x1fd237=_0x328945,_0x407eac={'QlVsC':'NodeIKernelUixConvertService/getUid'};let _0x424c0a=await NTEventDispatch[_0x1fd237(0xfc)](_0x407eac[_0x1fd237(0x140)],0x1388,[_0x125410]);return _0x424c0a[_0x1fd237(0x11c)][_0x1fd237(0x12c)](_0x125410);}static async[_0x328945(0x13a)](_0x5c6f5e){const _0x3f31e7=_0x328945;if(!_0x5c6f5e)return'';let _0x3d3cb8=await NTEventDispatch[_0x3f31e7(0xfc)]('NodeIKernelUixConvertService/getUin',0x1388,[_0x5c6f5e]);return _0x3d3cb8[_0x3f31e7(0xf7)]['get'](_0x5c6f5e);}static async['getUserDetailInfoByUin'](_0xcada22){const _0x229008=_0x328945,_0x3e1242={'UyXiU':_0x229008(0x112)};return NTEventDispatch[_0x229008(0xfc)](_0x3e1242[_0x229008(0x154)],0x1388,_0xcada22);}}