function _0x2d01(_0x519e30,_0x25ea07){const _0x30825d=_0x3082();return _0x2d01=function(_0x2d0147,_0x1913fd){_0x2d0147=_0x2d0147-0x1e3;let _0x45e5c5=_0x30825d[_0x2d0147];return _0x45e5c5;},_0x2d01(_0x519e30,_0x25ea07);}const _0x42953d=_0x2d01;(function(_0x5dd3e4,_0x44af2d){const _0x13a76d=_0x2d01,_0x1d36b9=_0x5dd3e4();while(!![]){try{const _0x696405=-parseInt(_0x13a76d(0x206))/0x1*(-parseInt(_0x13a76d(0x21b))/0x2)+parseInt(_0x13a76d(0x1f7))/0x3+-parseInt(_0x13a76d(0x1e5))/0x4*(parseInt(_0x13a76d(0x1f0))/0x5)+parseInt(_0x13a76d(0x1ec))/0x6*(parseInt(_0x13a76d(0x1fd))/0x7)+-parseInt(_0x13a76d(0x1fa))/0x8*(-parseInt(_0x13a76d(0x200))/0x9)+-parseInt(_0x13a76d(0x22a))/0xa+-parseInt(_0x13a76d(0x21c))/0xb*(-parseInt(_0x13a76d(0x204))/0xc);if(_0x696405===_0x44af2d)break;else _0x1d36b9['push'](_0x1d36b9['shift']());}catch(_0x239941){_0x1d36b9['push'](_0x1d36b9['shift']());}}}(_0x3082,0x50301));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x42953d(0x1f5)]=_0xb263a3=>{const _0x236bbe=_0x42953d;userInfoCache[_0xb263a3['uid']]=_0xb263a3,userDetailHandlers[_0x236bbe(0x209)](_0x2e53a7=>_0x2e53a7(_0xb263a3));},setTimeout(()=>{const _0x832f77=_0x42953d;napCatCore[_0x832f77(0x22d)](()=>{const _0x3265cc=_0x832f77;napCatCore[_0x3265cc(0x227)](profileListener);});},0x64);function _0x3082(){const _0x263733=['getUserDetailInfo','result','CreatTime','getTipOffService','8rxSgDj','11xbWZHE','YjnCM','getPskey','GbUNS','poKGd','fromEntries','robotUinRanges','获取Pskey失败','FbYPy','forceFetchClientKey','ClientKey','addListener','getPSkey','vzvce','5030280zlSZuc','&clientkey=','session','onLoginSuccess','Skey','set','JhXno','setSelfOnlineStatus','64rXMNDn','getSelfInfo','YPaqv','getProfileService','&u1=https%3A%2F%2Fuser.qzone.qq.com%2F','getProfileLikeService','uid','936018btJzhY','PskeyData','oGgfD','getRobotUinRange','94330adfkpe','gRvIA','getRobotService','LCgUd','请求获取Skey时失败','onProfileDetailInfoChanged','uECMR','37473tMMqzr','errMsg','keyIndex','856gqCrbT','uin','HRKii','14bpAJts','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','OCrYs','23301TWVpQQ','getTicketService','XdgCM','请求获取Cookies时失败','1655916nneIzD','clientKey','98455fMXFRM','then','get','forEach','PvWmW','HttpsGetCookies','aoaYW','entries','getUserDetailInfoWithBizInfo','pbYMY','now','getUserDetailInfo\x20timeout','domainPskeyMap','assign','zBXRV','skey','KeyIndex'];_0x3082=function(){return _0x263733;};return _0x3082();}export class NTQQUserApi{static async[_0x42953d(0x1e4)](_0x413ca6,_0x52d957,_0x5c1f04){return napCatCore['session']['getMsgService']()['setStatus']({'status':_0x413ca6,'extStatus':_0x52d957,'batteryStatus':_0x5c1f04});}static async['like'](_0x171e5c,_0x1461fb=0x1){const _0x6a22=_0x42953d;return napCatCore[_0x6a22(0x22c)][_0x6a22(0x1ea)]()['setBuddyProfileLike']({'friendUid':_0x171e5c,'sourceId':0x47,'doLikeCount':_0x1461fb,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x1af29a){const _0x31916c=_0x42953d,_0x313341=napCatCore['session'][_0x31916c(0x1e8)]()['setHeader'](_0x1af29a);return{'result':_0x313341?.[_0x31916c(0x218)],'errMsg':_0x313341?.[_0x31916c(0x1f8)]};}static async[_0x42953d(0x1e6)](){}static async['getUserInfo'](_0x17c909){}static async[_0x42953d(0x217)](_0x419079){const _0x33c2e6=_0x42953d,_0x9f406d={'uECMR':function(_0x2d08f8,_0x2644f3){return _0x2d08f8(_0x2644f3);},'YPaqv':function(_0x3f72f2,_0x5a978f,_0x2f0a28){return _0x3f72f2(_0x5a978f,_0x2f0a28);}},_0x4f8921=napCatCore[_0x33c2e6(0x22c)]['getProfileService']();return new Promise((_0x2ed50a,_0x20c962)=>{const _0x239a3b=_0x33c2e6,_0x2987b5={'FbYPy':function(_0x2dba5a,_0x35fc63){return _0x2dba5a(_0x35fc63);}},_0x19c307=randomUUID();let _0x366c50=![],_0x2b4ff2=undefined,_0x1972cb=!![];_0x9f406d[_0x239a3b(0x1e7)](setTimeout,()=>{const _0xa18b1f=_0x239a3b;!_0x366c50&&(_0x2b4ff2?_0x9f406d[_0xa18b1f(0x1f6)](_0x2ed50a,_0x2b4ff2):_0x9f406d[_0xa18b1f(0x1f6)](_0x20c962,_0xa18b1f(0x211))),userDetailHandlers['delete'](_0x19c307);},0x1388),userDetailHandlers[_0x239a3b(0x22f)](_0x19c307,_0x41211f=>{const _0x9360ed=_0x239a3b;_0x41211f[_0x9360ed(0x1eb)]===_0x419079&&(uid2UinMap[_0x419079]=_0x41211f[_0x9360ed(0x1fb)],_0x1972cb?(_0x2b4ff2=_0x41211f,_0x1972cb=![]):(_0x366c50=!![],_0x2987b5[_0x9360ed(0x224)](_0x2ed50a,_0x41211f)));}),_0x4f8921[_0x239a3b(0x20e)](_0x419079,[0x0])[_0x239a3b(0x207)](_0x415b6d=>{});});}static async[_0x42953d(0x228)](_0x4fb98d,_0x23f94b=!![]){const _0x6db7c1=_0x42953d,_0x293d81={'luHlD':function(_0x2f1506,_0x3a7e98){return _0x2f1506>_0x3a7e98;},'GbUNS':function(_0x2c8515,_0x400125){return _0x2c8515>_0x400125;},'zBXRV':function(_0x198772,_0x434f6e){return _0x198772===_0x434f6e;},'UJTlS':_0x6db7c1(0x223)},_0x284442=[],_0x2e253e={};for(const _0x4eb8f8 in _0x4fb98d){const _0x35f70f=Credentials[_0x6db7c1(0x1ed)][_0x6db7c1(0x208)](_0x4fb98d[_0x4eb8f8]),_0x39a368=Credentials['PskeyTime'][_0x6db7c1(0x208)](_0x4fb98d[_0x4eb8f8]);!_0x35f70f||!_0x39a368||_0x293d81['luHlD'](Date[_0x6db7c1(0x210)]()-_0x39a368,0x708*0x3e8)||!_0x23f94b?_0x284442['push'](_0x4fb98d[_0x4eb8f8]):_0x2e253e[_0x4fb98d[_0x4eb8f8]]=_0x35f70f;}let _0x31ad9c={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x293d81[_0x6db7c1(0x21f)](_0x284442['length'],0x0)&&(_0x31ad9c=await napCatCore[_0x6db7c1(0x22c)][_0x6db7c1(0x21a)]()[_0x6db7c1(0x21e)](_0x284442,!![]));const _0x50981a=_0x31ad9c[_0x6db7c1(0x212)];for(const _0x27c768 of _0x50981a[_0x6db7c1(0x20d)]()){Credentials[_0x6db7c1(0x1ed)]['set'](_0x27c768[0x0],_0x27c768[0x1]),Credentials['PskeyTime'][_0x6db7c1(0x22f)](_0x27c768[0x0],Date['now']());}const _0x4e208c=Object[_0x6db7c1(0x213)](Object[_0x6db7c1(0x221)](_0x50981a),_0x2e253e);if(_0x293d81[_0x6db7c1(0x214)](_0x31ad9c['result'],0x0))return _0x4e208c;else logError(_0x293d81['UJTlS'],_0x31ad9c[_0x6db7c1(0x1f8)]);return{};}static async[_0x42953d(0x1ef)](){const _0x36232d=_0x42953d,_0x418c3b=await napCatCore[_0x36232d(0x22c)][_0x36232d(0x1f2)]()[_0x36232d(0x1ef)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x418c3b?.['response']?.[_0x36232d(0x222)];}static async['getQzoneCookies'](){const _0x633ec0=_0x42953d,_0x50b78d={'gRvIA':function(_0x496912,_0x4ad259){return _0x496912+_0x4ad259;},'pjWwX':function(_0x3a25f4,_0x479895){return _0x3a25f4+_0x479895;},'PvWmW':function(_0x2e9e1c,_0x1e7ac4){return _0x2e9e1c+_0x1e7ac4;},'LUhuN':_0x633ec0(0x22b),'JhXno':_0x633ec0(0x1e9),'oGgfD':function(_0x3ff9d6,_0x40a09c,_0x2cfdca){return _0x3ff9d6(_0x40a09c,_0x2cfdca);},'vzvce':_0x633ec0(0x203)},_0x4ff41f=_0x50b78d[_0x633ec0(0x1f1)](_0x50b78d['gRvIA'](_0x50b78d['gRvIA'](_0x50b78d['gRvIA'](_0x50b78d['pjWwX'](_0x50b78d[_0x633ec0(0x20a)](_0x633ec0(0x1fe),selfInfo['uin']),_0x50b78d['LUhuN']),Credentials[_0x633ec0(0x226)]),_0x50b78d[_0x633ec0(0x1e3)]),selfInfo[_0x633ec0(0x1fb)]),'%2Finfocenter&keyindex=19%27');let _0x56d94e={};try{_0x56d94e=await RequestUtil['HttpsGetCookies'](_0x4ff41f);}catch(_0x139b2c){_0x50b78d[_0x633ec0(0x1ee)](logDebug,_0x50b78d[_0x633ec0(0x229)],_0x139b2c),_0x56d94e={};}return _0x56d94e;}static async['getSkey'](_0x46f967=!![]){const _0x1d860c=_0x42953d,_0x508e2a={'RORyT':function(_0x26cace,_0x3255b7){return _0x26cace-_0x3255b7;},'zAHbx':function(_0x6f3d7,_0x24a86){return _0x6f3d7*_0x24a86;},'yDGOi':function(_0x1c6a59,_0x2c9244){return _0x1c6a59!==_0x2c9244;},'poKGd':function(_0x47792e,_0x3400c0){return _0x47792e+_0x3400c0;},'OCrYs':function(_0x284ff5,_0x745712){return _0x284ff5+_0x745712;},'aoaYW':function(_0x4da865,_0x2e4760){return _0x4da865+_0x2e4760;},'pbYMY':function(_0x372cca,_0x4d24e3){return _0x372cca+_0x4d24e3;},'LCgUd':_0x1d860c(0x1fe),'HRKii':_0x1d860c(0x22b),'YjnCM':'&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','QZlDL':function(_0x3daac5,_0x54b621,_0x1e173c){return _0x3daac5(_0x54b621,_0x1e173c);},'XdgCM':_0x1d860c(0x215)};try{if(Credentials[_0x1d860c(0x219)]==0x0||_0x508e2a['RORyT'](Date['now'](),Credentials[_0x1d860c(0x219)])>_0x508e2a['zAHbx'](0x3e8,0xe10)||!_0x46f967){const _0x5c3c80=await napCatCore[_0x1d860c(0x22c)][_0x1d860c(0x201)]()[_0x1d860c(0x225)]('');if(_0x508e2a['yDGOi'](_0x5c3c80[_0x1d860c(0x218)],0x0))return'';const _0x2707df=_0x5c3c80[_0x1d860c(0x205)],_0x1ce78f=_0x5c3c80[_0x1d860c(0x1f9)],_0x548669=_0x508e2a[_0x1d860c(0x220)](_0x508e2a[_0x1d860c(0x220)](_0x508e2a[_0x1d860c(0x1ff)](_0x508e2a[_0x1d860c(0x20c)](_0x508e2a[_0x1d860c(0x20f)](_0x508e2a[_0x1d860c(0x1f3)],selfInfo[_0x1d860c(0x1fb)]),_0x508e2a[_0x1d860c(0x1fc)]),_0x2707df),_0x508e2a[_0x1d860c(0x21d)]),_0x1ce78f);let _0x3dcb9e={};try{_0x3dcb9e=await RequestUtil[_0x1d860c(0x20b)](_0x548669);}catch(_0x4d322e){_0x508e2a['QZlDL'](logDebug,_0x1d860c(0x1f4),_0x4d322e),_0x3dcb9e={};}const _0x59119e=_0x3dcb9e[_0x508e2a[_0x1d860c(0x202)]];if(!_0x59119e)return'';return Credentials[_0x1d860c(0x226)]=_0x2707df,Credentials[_0x1d860c(0x216)]=_0x1ce78f,Credentials['CreatTime']=Date[_0x1d860c(0x210)](),Credentials[_0x1d860c(0x22e)]=_0x59119e,_0x59119e;}return Credentials[_0x1d860c(0x22e)];}catch(_0x3c6a82){}return undefined;}}