const _0x4d1dfe=_0x5049;function _0x2f0c(){const _0x29c0b3=['XxmLE','forEach','assign','mmvzJ','setBuddyProfileLike','HttpsGetCookies','now','setHeader','1JekbIs','oJvnf','like','result','vcJVA','JoAEB','rJzox','forceFetchClientKey','getPSkey','&u1=https%3A%2F%2Fh5.qzone.qq.com%2Fqqnt%2Fqzoneinpcqq%2Ffriend%3Frefresh%3D0%26clientuin%3D0%26darkMode%3D0&keyindex=','请求获取Skey时失败','6vyINlF','rmAml','response','getRobotService','keyIndex','oqhlT','OMFwX','22NVEHwJ','push','onLoginSuccess','2134464CGTInQ','onProfileDetailInfoChanged','getTicketService','domainPskeyMap','getTipOffService','获取Pskey失败','1651407uIxPuv','entries','KssWg','231273XiVPvd','tJDiK','getMsgService','gozIL','Skey','getUserInfo','setStatus','getSkey','session','EUWSB','uid','grNCZ','setSelfOnlineStatus','getProfileService','get','fromEntries','getPskey','https://ssl.ptlogin2.qq.com/jump?ptlang=1033&clientuin=','errMsg','length','clientKey','set','PskeyData','delete','PskeyTime','8vJsGQy','getRobotUinRange','2989pKxjse','then','bzDcU','bvQaZ','1099648obgZUn','skey','CreatTime','JMYtA','getProfileLikeService','&clientkey=','9576fprzkB','6348190EdnEXw','kJhkZ','460rSAcPU','AFZnl','22220705vyjcsD'];_0x2f0c=function(){return _0x29c0b3;};return _0x2f0c();}(function(_0x1420c2,_0x54c427){const _0x5d4dba=_0x5049,_0x11c573=_0x1420c2();while(!![]){try{const _0x564f5a=-parseInt(_0x5d4dba(0xec))/0x1*(parseInt(_0x5d4dba(0x129))/0x2)+parseInt(_0x5d4dba(0x107))/0x3*(parseInt(_0x5d4dba(0x123))/0x4)+-parseInt(_0x5d4dba(0xdf))/0x5*(parseInt(_0x5d4dba(0xf7))/0x6)+parseInt(_0x5d4dba(0x125))/0x7*(parseInt(_0x5d4dba(0xde))/0x8)+-parseInt(_0x5d4dba(0x10a))/0x9*(parseInt(_0x5d4dba(0xe1))/0xa)+-parseInt(_0x5d4dba(0xfe))/0xb*(-parseInt(_0x5d4dba(0x101))/0xc)+parseInt(_0x5d4dba(0xe3))/0xd;if(_0x564f5a===_0x54c427)break;else _0x11c573['push'](_0x11c573['shift']());}catch(_0x2fd7ae){_0x11c573['push'](_0x11c573['shift']());}}}(_0x2f0c,0xa4eea));import{Credentials,selfInfo,uid2UinMap}from'@/core/data';import{napCatCore}from'@/core';import{ProfileListener}from'@/core/listeners';import{randomUUID}from'crypto';import{RequestUtil}from'@/common/utils/request';import{logDebug,logError}from'@/common/utils/log';function _0x5049(_0x17f3ad,_0x4823cd){const _0x2f0c44=_0x2f0c();return _0x5049=function(_0x50493d,_0x4c6ff5){_0x50493d=_0x50493d-0xdb;let _0x46d687=_0x2f0c44[_0x50493d];return _0x46d687;},_0x5049(_0x17f3ad,_0x4823cd);}const userInfoCache={},profileListener=new ProfileListener(),userDetailHandlers=new Map();profileListener[_0x4d1dfe(0x102)]=_0x2a0420=>{const _0x3a2694=_0x4d1dfe;userInfoCache[_0x2a0420[_0x3a2694(0x114)]]=_0x2a0420,userDetailHandlers[_0x3a2694(0xe5)](_0x51dd24=>_0x51dd24(_0x2a0420));},setTimeout(()=>{const _0x140fc4=_0x4d1dfe;napCatCore[_0x140fc4(0x100)](()=>{napCatCore['addListener'](profileListener);});},0x64);export class NTQQUserApi{static async[_0x4d1dfe(0x116)](_0x3cbe72,_0x3d8442,_0x3e67da){const _0x397fa3=_0x4d1dfe;return napCatCore['session'][_0x397fa3(0x10c)]()[_0x397fa3(0x110)]({'status':_0x3cbe72,'extStatus':_0x3d8442,'batteryStatus':_0x3e67da});}static async[_0x4d1dfe(0xee)](_0x12bb37,_0x1e3c5f=0x1){const _0x55bc03=_0x4d1dfe;return napCatCore[_0x55bc03(0x112)][_0x55bc03(0xdc)]()[_0x55bc03(0xe8)]({'friendUid':_0x12bb37,'sourceId':0x47,'doLikeCount':_0x1e3c5f,'doLikeTollCount':0x0});}static async['setQQAvatar'](_0x592db5){const _0x2e7be1=_0x4d1dfe,_0x43eda7=napCatCore[_0x2e7be1(0x112)][_0x2e7be1(0x117)]()[_0x2e7be1(0xeb)](_0x592db5);return{'result':_0x43eda7?.[_0x2e7be1(0xef)],'errMsg':_0x43eda7?.['errMsg']};}static async['getSelfInfo'](){}static async[_0x4d1dfe(0x10f)](_0x13b6ff){}static async['getUserDetailInfo'](_0xaf74cd){const _0x2380a8=_0x4d1dfe,_0x325b97={'tJDiK':function(_0xff6d45,_0xd6ccc5){return _0xff6d45===_0xd6ccc5;},'vcJVA':function(_0x512375,_0x39d270){return _0x512375(_0x39d270);},'JoAEB':function(_0x4299dc){return _0x4299dc();}},_0x3d4227=napCatCore[_0x2380a8(0x112)][_0x2380a8(0x117)]();return new Promise((_0x4e2a93,_0x2e1b11)=>{const _0x132d69=_0x2380a8,_0x3a5e48={'kJhkZ':function(_0x116cc4,_0x209341){const _0x5a8c98=_0x5049;return _0x325b97[_0x5a8c98(0x10b)](_0x116cc4,_0x209341);},'mmvzJ':function(_0x43087b,_0x93f44b){const _0x4fb9fb=_0x5049;return _0x325b97[_0x4fb9fb(0xf0)](_0x43087b,_0x93f44b);}},_0x4f8e72=_0x325b97[_0x132d69(0xf1)](randomUUID);let _0x40a2a3=![];setTimeout(()=>{!_0x40a2a3&&_0x2e1b11('getUserDetailInfo\x20timeout');},0x1388),userDetailHandlers[_0x132d69(0x11f)](_0x4f8e72,_0x544eac=>{const _0x57ed9c=_0x132d69;_0x3a5e48[_0x57ed9c(0xe0)](_0x544eac['uid'],_0xaf74cd)&&(_0x40a2a3=!![],userDetailHandlers[_0x57ed9c(0x121)](_0x4f8e72),uid2UinMap[_0xaf74cd]=_0x544eac['uin'],_0x3a5e48[_0x57ed9c(0xe7)](_0x4e2a93,_0x544eac));}),_0x3d4227['getUserDetailInfoWithBizInfo'](_0xaf74cd,[0x0])[_0x132d69(0x126)](_0x29ac0f=>{});});}static async[_0x4d1dfe(0xf4)](_0x132a5a,_0x45159b=!![]){const _0x8cf91f=_0x4d1dfe,_0x1d98dc={'jHVdm':function(_0x23ff9d,_0x30832f){return _0x23ff9d>_0x30832f;},'rmAml':function(_0x31ad6d,_0x2642ef){return _0x31ad6d-_0x2642ef;},'grNCZ':function(_0x4524c1,_0x22d9e3){return _0x4524c1*_0x22d9e3;},'Lihxy':function(_0x33e03d,_0x35fd11){return _0x33e03d>_0x35fd11;},'AFZnl':function(_0x32fadb,_0x2a2b1f){return _0x32fadb===_0x2a2b1f;},'XxmLE':function(_0x44394f,_0x27cf54,_0x4744d6){return _0x44394f(_0x27cf54,_0x4744d6);}},_0x3277e5=[],_0x368c8e={};for(const _0x162f6d in _0x132a5a){const _0x3bf7dd=Credentials[_0x8cf91f(0x120)][_0x8cf91f(0x118)](_0x132a5a[_0x162f6d]),_0x5e3a37=Credentials[_0x8cf91f(0x122)][_0x8cf91f(0x118)](_0x132a5a[_0x162f6d]);!_0x3bf7dd||!_0x5e3a37||_0x1d98dc['jHVdm'](_0x1d98dc[_0x8cf91f(0xf8)](Date[_0x8cf91f(0xea)](),_0x5e3a37),_0x1d98dc[_0x8cf91f(0x115)](0x708,0x3e8))||!_0x45159b?_0x3277e5[_0x8cf91f(0xff)](_0x132a5a[_0x162f6d]):_0x368c8e[_0x132a5a[_0x162f6d]]=_0x3bf7dd;}let _0x36940e={'result':0x0,'errMsg':'','domainPskeyMap':new Map()};_0x1d98dc['Lihxy'](_0x3277e5[_0x8cf91f(0x11d)],0x0)&&(_0x36940e=await napCatCore[_0x8cf91f(0x112)][_0x8cf91f(0x105)]()[_0x8cf91f(0x11a)](_0x3277e5,!![]));const _0x112078=_0x36940e[_0x8cf91f(0x104)];for(const _0x10ece6 of _0x112078[_0x8cf91f(0x108)]()){Credentials[_0x8cf91f(0x120)]['set'](_0x10ece6[0x0],_0x10ece6[0x1]),Credentials[_0x8cf91f(0x122)][_0x8cf91f(0x11f)](_0x10ece6[0x0],Date[_0x8cf91f(0xea)]());}const _0x1b2802=Object[_0x8cf91f(0xe6)](Object[_0x8cf91f(0x119)](_0x112078),_0x368c8e);if(_0x1d98dc[_0x8cf91f(0xe2)](_0x36940e[_0x8cf91f(0xef)],0x0))return _0x1b2802;else _0x1d98dc[_0x8cf91f(0xe4)](logError,_0x8cf91f(0x106),_0x36940e[_0x8cf91f(0x11c)]);return{};}static async[_0x4d1dfe(0x124)](){const _0x593711=_0x4d1dfe,_0x560c30=await napCatCore[_0x593711(0x112)][_0x593711(0xfa)]()[_0x593711(0x124)]({'justFetchMsgConfig':'1','type':0x1,'version':0x0,'aioKeywordVersion':0x0});return _0x560c30?.[_0x593711(0xf9)]?.['robotUinRanges'];}static async[_0x4d1dfe(0x111)](_0xa37b61=!![]){const _0xf21157=_0x4d1dfe,_0x7443a8={'gozIL':function(_0x164027,_0x26a7ce){return _0x164027>_0x26a7ce;},'bzDcU':function(_0x88da92,_0x38733c){return _0x88da92-_0x38733c;},'oJvnf':function(_0x10e5f3,_0x238776){return _0x10e5f3+_0x238776;},'KssWg':function(_0x15bb79,_0x55969b){return _0x15bb79+_0x55969b;},'OMFwX':function(_0x54f01f,_0x2a48b2){return _0x54f01f+_0x2a48b2;},'oqhlT':_0xf21157(0x11b),'JMYtA':_0xf21157(0xf5),'EUWSB':function(_0x29863a,_0x159c14,_0x288dfa){return _0x29863a(_0x159c14,_0x288dfa);},'rJzox':_0xf21157(0xf6),'bvQaZ':_0xf21157(0x12a)};try{if(Credentials[_0xf21157(0x12b)]==0x0||_0x7443a8[_0xf21157(0x10d)](_0x7443a8[_0xf21157(0x127)](Date[_0xf21157(0xea)](),Credentials['CreatTime']),0x3e8*0xe10)||!_0xa37b61){const _0x31064e=await napCatCore[_0xf21157(0x112)][_0xf21157(0x103)]()[_0xf21157(0xf3)]('');if(_0x31064e[_0xf21157(0xef)]!==0x0)return'';const _0x154124=_0x31064e[_0xf21157(0x11e)],_0x4a2d2d=_0x31064e[_0xf21157(0xfb)],_0x4abac6=_0x7443a8[_0xf21157(0xed)](_0x7443a8[_0xf21157(0xed)](_0x7443a8[_0xf21157(0x109)](_0x7443a8[_0xf21157(0xfd)](_0x7443a8[_0xf21157(0xfc)]+selfInfo['uin'],_0xf21157(0xdd)),_0x154124),_0x7443a8[_0xf21157(0xdb)]),_0x4a2d2d);let _0x391c95;try{_0x391c95=await RequestUtil[_0xf21157(0xe9)](_0x4abac6);}catch(_0x36cc4b){_0x7443a8[_0xf21157(0x113)](logDebug,_0x7443a8[_0xf21157(0xf2)],_0x36cc4b),_0x391c95=new Map();}const _0x58a709=_0x391c95[_0xf21157(0x118)](_0x7443a8[_0xf21157(0x128)]);if(!_0x58a709)return'';return Credentials['CreatTime']=Date[_0xf21157(0xea)](),Credentials['Skey']=_0x58a709,_0x58a709;}return Credentials[_0xf21157(0x10e)];}catch(_0x5a088c){}return undefined;}}