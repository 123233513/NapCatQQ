const _0x457e45=_0x4e0e;function _0x4b5b(){const _0x240b2b=['getBuddyService','uin','set','AKKSa','234905esmYTn','getFriends','handleFriendRequest','获取好友列表超时','then','24826QGlpMc','delete','reqTime','KdUKu','2718HumsHl','6MgUQiL','809763HqUALi','1595344wOHVui','push','uid','getBuddyList','qsLsI','onBuddyListChange','31AXCCFJ','NzWmT','2280061jdrGaL','approvalFriendRequest','16cTHQou','2765609liXDhA','onLoginSuccess','7500rqLYqO','friendUid','session'];_0x4b5b=function(){return _0x240b2b;};return _0x4b5b();}(function(_0xd63ec6,_0x2cba24){const _0x245a4a=_0x4e0e,_0x9931d6=_0xd63ec6();while(!![]){try{const _0x479e62=-parseInt(_0x245a4a(0x1e6))/0x1*(-parseInt(_0x245a4a(0x1f9))/0x2)+parseInt(_0x245a4a(0x1df))/0x3+parseInt(_0x245a4a(0x1ea))/0x4*(parseInt(_0x245a4a(0x1f4))/0x5)+-parseInt(_0x245a4a(0x1fe))/0x6*(parseInt(_0x245a4a(0x1e8))/0x7)+parseInt(_0x245a4a(0x1e0))/0x8+parseInt(_0x245a4a(0x1fd))/0x9*(-parseInt(_0x245a4a(0x1ed))/0xa)+-parseInt(_0x245a4a(0x1eb))/0xb;if(_0x479e62===_0x2cba24)break;else _0x9931d6['push'](_0x9931d6['shift']());}catch(_0x1bfb06){_0x9931d6['push'](_0x9931d6['shift']());}}}(_0x4b5b,0x3a358));import{BuddyListener,napCatCore}from'@/core';import{logDebug}from'@/common/utils/log';import{uid2UinMap}from'@/core/data';function _0x4e0e(_0x492aba,_0x2490de){const _0x4b5b78=_0x4b5b();return _0x4e0e=function(_0x4e0ec9,_0x351c9d){_0x4e0ec9=_0x4e0ec9-0x1df;let _0x4612a2=_0x4b5b78[_0x4e0ec9];return _0x4612a2;},_0x4e0e(_0x492aba,_0x2490de);}import{randomUUID}from'crypto';const buddyChangeTasks=new Map(),buddyListener=new BuddyListener();buddyListener[_0x457e45(0x1e5)]=_0x1c2a8e=>{const _0x323186=_0x457e45,_0x3c7104={'HvjSC':function(_0x4f1440,_0x4d9691){return _0x4f1440(_0x4d9691);}};for(const [_0x5efea5,_0x480780]of buddyChangeTasks){_0x3c7104['HvjSC'](_0x480780,_0x1c2a8e),buddyChangeTasks[_0x323186(0x1fa)](_0x5efea5);}},setTimeout(()=>{const _0x377492=_0x457e45;napCatCore[_0x377492(0x1ec)](()=>{napCatCore['addListener'](buddyListener);});},0x64);export class NTQQFriendApi{static async[_0x457e45(0x1f5)](_0xb2ddf2=![]){const _0x328b82=_0x457e45,_0x1ce56b={'qsLsI':function(_0x4702e9,_0x283231){return _0x4702e9(_0x283231);},'KdUKu':_0x328b82(0x1f7),'NzWmT':function(_0x846f01,_0x413925){return _0x846f01(_0x413925);},'AKKSa':function(_0x40b5f6,_0x5b741f,_0x5ebbb3){return _0x40b5f6(_0x5b741f,_0x5ebbb3);}};return new Promise((_0x5ac26f,_0x263ade)=>{const _0x5d8984=_0x328b82;let _0x24f5a8=![];_0x1ce56b[_0x5d8984(0x1f3)](setTimeout,()=>{const _0x14e176=_0x5d8984;!_0x24f5a8&&(_0x1ce56b[_0x14e176(0x1e4)](logDebug,_0x1ce56b[_0x14e176(0x1fc)]),_0x1ce56b[_0x14e176(0x1e4)](_0x263ade,_0x14e176(0x1f7)));},0x1388);const _0x2a1e1e=[],_0x2b2771=_0x1b6532=>{const _0x4e755a=_0x5d8984;for(const _0x136476 of _0x1b6532){for(const _0x233f4d of _0x136476['buddyList']){_0x2a1e1e[_0x4e755a(0x1e1)](_0x233f4d),uid2UinMap[_0x233f4d[_0x4e755a(0x1e2)]]=_0x233f4d[_0x4e755a(0x1f1)];}}_0x24f5a8=!![],_0x1ce56b[_0x4e755a(0x1e7)](_0x5ac26f,_0x2a1e1e);};buddyChangeTasks[_0x5d8984(0x1f2)](randomUUID(),_0x2b2771),napCatCore[_0x5d8984(0x1ef)][_0x5d8984(0x1f0)]()[_0x5d8984(0x1e3)](_0xb2ddf2)[_0x5d8984(0x1f8)](_0x1d398c=>{logDebug('开始获取好友列表',_0x1d398c);});});}static async[_0x457e45(0x1f6)](_0x209772,_0x81cd4b){const _0x3648ed=_0x457e45;napCatCore[_0x3648ed(0x1ef)]['getBuddyService']()?.[_0x3648ed(0x1e9)]({'friendUid':_0x209772[_0x3648ed(0x1ee)],'reqTime':_0x209772[_0x3648ed(0x1fb)],'accept':_0x81cd4b});}}