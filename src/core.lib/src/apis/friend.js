const _0x43dd2c=_0x5939;(function(_0x3f0948,_0x2220a7){const _0x3aed13=_0x5939,_0x102844=_0x3f0948();while(!![]){try{const _0x4a64cc=parseInt(_0x3aed13(0xdd))/0x1+parseInt(_0x3aed13(0xe2))/0x2+parseInt(_0x3aed13(0xda))/0x3*(parseInt(_0x3aed13(0xe6))/0x4)+-parseInt(_0x3aed13(0xd7))/0x5*(-parseInt(_0x3aed13(0xd8))/0x6)+parseInt(_0x3aed13(0xe8))/0x7*(parseInt(_0x3aed13(0xcd))/0x8)+parseInt(_0x3aed13(0xe7))/0x9+-parseInt(_0x3aed13(0xd5))/0xa;if(_0x4a64cc===_0x2220a7)break;else _0x102844['push'](_0x102844['shift']());}catch(_0x300adf){_0x102844['push'](_0x102844['shift']());}}}(_0x4299,0xc6b73));import{BuddyListener,napCatCore}from'@/core';import{logDebug}from'@/common/utils/log';function _0x4299(){const _0x5b2552=['lCnbW','addListener','uin','set','429090sgnIes','buddyList','reqTime','delete','18932IkKgmA','14617521acaUiC','4565589coPzWQ','then','friendUid','8YfuetW','YNWKr','approvalFriendRequest','handleFriendRequest','uaCDk','session','onLoginSuccess','onBuddyListChange','47419370DLLoZU','getFriends','915cJKDDf','50118FxXbzX','getBuddyService','447ySdZLd','获取好友列表超时','nBYTn','831119fsVvWl'];_0x4299=function(){return _0x5b2552;};return _0x4299();}import{uid2UinMap}from'@/core/data';import{randomUUID}from'crypto';const buddyChangeTasks=new Map(),buddyListener=new BuddyListener();buddyListener[_0x43dd2c(0xd4)]=_0x36c2ef=>{const _0x4d227a=_0x43dd2c;for(const [_0x2525d8,_0x2918d8]of buddyChangeTasks){_0x2918d8(_0x36c2ef),buddyChangeTasks[_0x4d227a(0xe5)](_0x2525d8);}},setTimeout(()=>{const _0x2f46fd=_0x43dd2c;napCatCore[_0x2f46fd(0xd3)](()=>{const _0x1c9338=_0x2f46fd;napCatCore[_0x1c9338(0xdf)](buddyListener);});},0x64);function _0x5939(_0x14ea9d,_0x18d356){const _0x429948=_0x4299();return _0x5939=function(_0x593964,_0x591dfb){_0x593964=_0x593964-0xcb;let _0x2ac127=_0x429948[_0x593964];return _0x2ac127;},_0x5939(_0x14ea9d,_0x18d356);}export class NTQQFriendApi{static async[_0x43dd2c(0xd6)](_0x4bd3d0=![]){const _0xf71124=_0x43dd2c,_0x335f55={'YNWKr':function(_0x312862,_0x1bdfd5,_0x5b516f){return _0x312862(_0x1bdfd5,_0x5b516f);},'QPipX':function(_0x32b173,_0x43987c){return _0x32b173(_0x43987c);},'qLDkr':_0xf71124(0xdb),'uaCDk':function(_0x2949cd){return _0x2949cd();}};return new Promise((_0x21d542,_0x174af3)=>{const _0x5afb3c=_0xf71124,_0x2c4301={'nBYTn':function(_0x21d91d,_0x1b26d5){return _0x335f55['QPipX'](_0x21d91d,_0x1b26d5);},'lCnbW':_0x335f55['qLDkr']};let _0x241c8f=![];setTimeout(()=>{const _0x360c60=_0x5939;!_0x241c8f&&(_0x2c4301[_0x360c60(0xdc)](logDebug,_0x2c4301[_0x360c60(0xde)]),_0x2c4301[_0x360c60(0xdc)](_0x174af3,_0x2c4301['lCnbW']));},0x1388);const _0x4c16d9=[],_0x826f68=_0x356376=>{const _0x1b45b3=_0x5939;for(const _0x2c0005 of _0x356376){for(const _0x4d73ef of _0x2c0005[_0x1b45b3(0xe3)]){_0x4c16d9['push'](_0x4d73ef),uid2UinMap[_0x4d73ef['uid']]=_0x4d73ef[_0x1b45b3(0xe0)];}}_0x241c8f=!![],logDebug('获取好友列表完成',_0x4c16d9),_0x2c4301['nBYTn'](_0x21d542,_0x4c16d9);};buddyChangeTasks[_0x5afb3c(0xe1)](_0x335f55[_0x5afb3c(0xd1)](randomUUID),_0x826f68),napCatCore[_0x5afb3c(0xd2)][_0x5afb3c(0xd9)]()['getBuddyList'](_0x4bd3d0)[_0x5afb3c(0xcb)](_0x417a99=>{const _0xc33c96=_0x5afb3c;_0x335f55[_0xc33c96(0xce)](logDebug,'开始获取好友列表',_0x417a99);});});}static async[_0x43dd2c(0xd0)](_0x1ce1cd,_0x508ed7){const _0x48a93a=_0x43dd2c;napCatCore['session'][_0x48a93a(0xd9)]()?.[_0x48a93a(0xcf)]({'friendUid':_0x1ce1cd[_0x48a93a(0xcc)],'reqTime':_0x1ce1cd[_0x48a93a(0xe4)],'accept':_0x508ed7});}}