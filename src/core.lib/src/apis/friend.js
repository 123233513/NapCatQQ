const _0xab4bb5=_0x2831;(function(_0x5c21cf,_0x1b96a5){const _0x58088f=_0x2831,_0x26895c=_0x5c21cf();while(!![]){try{const _0x129344=-parseInt(_0x58088f(0x161))/0x1+-parseInt(_0x58088f(0x174))/0x2*(-parseInt(_0x58088f(0x15d))/0x3)+-parseInt(_0x58088f(0x15f))/0x4+parseInt(_0x58088f(0x169))/0x5*(parseInt(_0x58088f(0x171))/0x6)+-parseInt(_0x58088f(0x175))/0x7*(parseInt(_0x58088f(0x16e))/0x8)+parseInt(_0x58088f(0x179))/0x9+parseInt(_0x58088f(0x178))/0xa;if(_0x129344===_0x1b96a5)break;else _0x26895c['push'](_0x26895c['shift']());}catch(_0x573142){_0x26895c['push'](_0x26895c['shift']());}}}(_0x376c,0xbb4b0));import{BuddyListener,napCatCore}from'@/core';import{logDebug}from'@/common/utils/log';import{uid2UinMap}from'@/core/data';import{randomUUID}from'crypto';const buddyChangeTasks=new Map(),buddyListener=new BuddyListener();function _0x2831(_0x2bf0e6,_0x3fa3c5){const _0x376cc5=_0x376c();return _0x2831=function(_0x28313b,_0x5c1bec){_0x28313b=_0x28313b-0x15d;let _0x357408=_0x376cc5[_0x28313b];return _0x357408;},_0x2831(_0x2bf0e6,_0x3fa3c5);}buddyListener[_0xab4bb5(0x167)]=_0x5e9f39=>{const _0x3e0578=_0xab4bb5,_0x10751c={'jJdMb':function(_0x3e4b90,_0x107e58){return _0x3e4b90(_0x107e58);}};for(const [_0xa17eb5,_0x11d15b]of buddyChangeTasks){_0x10751c[_0x3e0578(0x17c)](_0x11d15b,_0x5e9f39),buddyChangeTasks[_0x3e0578(0x163)](_0xa17eb5);}},setTimeout(()=>{const _0x5109b6=_0xab4bb5;napCatCore[_0x5109b6(0x164)](()=>{const _0xd33cf1=_0x5109b6;napCatCore[_0xd33cf1(0x160)](buddyListener);});},0x64);function _0x376c(){const _0x3f082e=['16DbENeV','35xnenhV','获取好友列表超时','TGVpX','15440900DTHxXf','11090043RcpENf','approvalFriendRequest','getBuddyService','jJdMb','10239unydGd','fDAzZ','1664060KKCjoK','addListener','856742HpRTWv','VLSSh','delete','onLoginSuccess','uin','uid','onBuddyListChange','getBuddyList','138095ekoidy','NYtaA','buddyList','zhhPS','getFriends','1973176EmNHvB','eTnDD','session','102IaibJB','push','reqTime'];_0x376c=function(){return _0x3f082e;};return _0x376c();}export class NTQQFriendApi{static async[_0xab4bb5(0x16d)](_0x908e69=![]){const _0x3035f2=_0xab4bb5,_0x4b4026={'fDAzZ':function(_0x25c808,_0x4b25cb){return _0x25c808(_0x4b25cb);},'eTnDD':_0x3035f2(0x176),'TGVpX':function(_0x1cb39c,_0x50f053,_0x1309c3){return _0x1cb39c(_0x50f053,_0x1309c3);},'VLSSh':function(_0x23aada,_0x1bd081){return _0x23aada(_0x1bd081);},'zhhPS':function(_0xc77e22,_0x2401f5,_0x534441){return _0xc77e22(_0x2401f5,_0x534441);},'NYtaA':function(_0x50024d){return _0x50024d();}};return new Promise((_0x14bfe8,_0x315d29)=>{const _0x2fe389=_0x3035f2,_0x463fc7={'PBtCU':'开始获取好友列表'};let _0x11f52b=![];_0x4b4026[_0x2fe389(0x16c)](setTimeout,()=>{const _0x306202=_0x2fe389;!_0x11f52b&&(_0x4b4026[_0x306202(0x15e)](logDebug,_0x4b4026[_0x306202(0x16f)]),_0x315d29(_0x4b4026[_0x306202(0x16f)]));},0x1388);const _0x126876=[],_0x11aac7=_0x16034f=>{const _0x5cedf6=_0x2fe389;for(const _0x1bb84e of _0x16034f){for(const _0x56d67b of _0x1bb84e[_0x5cedf6(0x16b)]){_0x126876[_0x5cedf6(0x172)](_0x56d67b),uid2UinMap[_0x56d67b[_0x5cedf6(0x166)]]=_0x56d67b[_0x5cedf6(0x165)];}}_0x11f52b=!![],_0x4b4026[_0x5cedf6(0x177)](logDebug,'获取好友列表完成',_0x126876),_0x4b4026[_0x5cedf6(0x162)](_0x14bfe8,_0x126876);};buddyChangeTasks['set'](_0x4b4026[_0x2fe389(0x16a)](randomUUID),_0x11aac7),napCatCore[_0x2fe389(0x170)]['getBuddyService']()[_0x2fe389(0x168)](_0x908e69)['then'](_0x5bdb67=>{logDebug(_0x463fc7['PBtCU'],_0x5bdb67);});});}static async['handleFriendRequest'](_0x5d6b12,_0x456c19){const _0x2bbb2a=_0xab4bb5;napCatCore[_0x2bbb2a(0x170)][_0x2bbb2a(0x17b)]()?.[_0x2bbb2a(0x17a)]({'friendUid':_0x5d6b12['friendUid'],'reqTime':_0x5d6b12[_0x2bbb2a(0x173)],'accept':_0x456c19});}}