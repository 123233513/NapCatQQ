const _0x2cc820=_0x531e;function _0x5009(){const _0x44b3b4=['brVcj','gGITh','error','2149542MpYJut','loginErrorInfo','quick','90296cvkzGA','system.login.qrcode','listener','175zRaItT','md5','proofWaterUrl','errMsg','1DMClof','init','xSRuJ','passwordLogin','876130ibJtrw','4875138MorUFh','system.login.error','initConfig','EJmLL','digest','140022013','\x20is\x20not\x20available','LocalLoginInfoList','NodeIKernelLoginService','onLoginFailed','core','609fHVqCl','aoMJJ','addKernelLoginListener','emit','system.login.slider','createHash','update','1030374sXqGDI','No\x20quick\x20login\x20accounts\x20available','onQRCodeSessionFailed','initListener','FpUza','password','NodeIKernelLoginListener','qrcodeUrl','result','Quick\x20login\x20for\x20','service','YMflm','getQRCodePicture','561orClrX','hex','3|1|2|4|0','140022008','44970RTRtHY','107304OUzjuH','getLoginList'];_0x5009=function(){return _0x44b3b4;};return _0x5009();}(function(_0x128f68,_0x3143ec){const _0x580d79=_0x531e,_0x1c79ab=_0x128f68();while(!![]){try{const _0x4de595=-parseInt(_0x580d79(0x1cc))/0x1*(-parseInt(_0x580d79(0x1d0))/0x2)+parseInt(_0x580d79(0x1c2))/0x3+-parseInt(_0x580d79(0x1bd))/0x4*(parseInt(_0x580d79(0x1c8))/0x5)+parseInt(_0x580d79(0x1ab))/0x6+parseInt(_0x580d79(0x1a4))/0x7*(parseInt(_0x580d79(0x1c5))/0x8)+-parseInt(_0x580d79(0x199))/0x9+parseInt(_0x580d79(0x1bc))/0xa*(-parseInt(_0x580d79(0x1b8))/0xb);if(_0x4de595===_0x3143ec)break;else _0x1c79ab['push'](_0x1c79ab['shift']());}catch(_0x2d04dd){_0x1c79ab['push'](_0x1c79ab['shift']());}}}(_0x5009,0x92142));import*as _0x4ae3c5 from'node:crypto';import{Wrapper as _0x2180db}from'./qqnt';import{LoginListener}from'./qqnt/listeners';import{sleep}from'@/common/utils/helper';function _0x531e(_0x134bb2,_0x34dd0b){const _0x5009b5=_0x5009();return _0x531e=function(_0x531e36,_0x40845c){_0x531e36=_0x531e36-0x199;let _0x5cb037=_0x5009b5[_0x531e36];return _0x5cb037;},_0x531e(_0x134bb2,_0x34dd0b);}export class NapCatCoreLogin{[_0x2cc820(0x1a3)];[_0x2cc820(0x1b5)];[_0x2cc820(0x1c7)];constructor(_0x149440){const _0x188e33=_0x2cc820,_0x471132={'nkjOS':_0x188e33(0x1ba)},_0x3f0b35=_0x471132['nkjOS']['split']('|');let _0x584ec3=0x0;while(!![]){switch(_0x3f0b35[_0x584ec3++]){case'0':this['listener']['onLoginFailed']=_0x1fc824=>{const _0x1796e1=_0x188e33;console['error'](_0x1796e1(0x1a2),_0x1fc824);};continue;case'1':this['service']=new _0x2180db[(_0x188e33(0x1a1))]();continue;case'2':this[_0x188e33(0x1c7)]=new LoginListener();continue;case'3':this[_0x188e33(0x1a3)]=_0x149440;continue;case'4':this[_0x188e33(0x1c7)][_0x188e33(0x1ad)]=_0x6bdb6d=>{const _0x1b4590=_0x188e33;console[_0x1b4590(0x1c1)](_0x1b4590(0x1ad),_0x6bdb6d);};continue;}break;}}[_0x2cc820(0x1cd)](_0x1f10c9){const _0x18d4aa=_0x2cc820;this[_0x18d4aa(0x1b5)][_0x18d4aa(0x19b)](_0x1f10c9),this[_0x18d4aa(0x1ae)](),this[_0x18d4aa(0x1b5)][_0x18d4aa(0x1a6)](new _0x2180db[(_0x18d4aa(0x1b1))](this['listener']));}[_0x2cc820(0x1ae)](){const _0xc52e05=_0x2cc820,_0x5a2c33={'wUPfO':_0xc52e05(0x1c6)};this['listener']['onQRCodeGetPicture']=_0xb8ac93=>{const _0x4ada9c=_0xc52e05;this[_0x4ada9c(0x1a3)][_0x4ada9c(0x1a7)](_0x5a2c33['wUPfO'],{'url':_0xb8ac93[_0x4ada9c(0x1b2)],'base64':_0xb8ac93['pngBase64QrcodeData']});},this[_0xc52e05(0x1c7)]['onQRCodeLoginSucceed']=_0x4c77fc=>{const _0x4e0d31=_0xc52e05;this[_0x4e0d31(0x1a3)]['initPostLogin'](_0x4c77fc);};}[_0x2cc820(0x1be)](){const _0x6742f1=_0x2cc820;return this[_0x6742f1(0x1b5)][_0x6742f1(0x1be)]();}async['qrcode'](){const _0x5f2f8e=_0x2cc820;this[_0x5f2f8e(0x1b5)][_0x5f2f8e(0x1b7)]();}async[_0x2cc820(0x1c4)](_0x2505c3){const _0x21a339=_0x2cc820,_0x2533f3={'EJmLL':function(_0x2a9098,_0x4e3e54){return _0x2a9098!==_0x4e3e54;},'xSRuJ':_0x21a339(0x1ac),'tZTNt':function(_0x33a6b8,_0x1d290a){return _0x33a6b8(_0x1d290a);},'aoMJJ':_0x21a339(0x19a)},_0x46f26b=await this[_0x21a339(0x1be)]();if(_0x2533f3[_0x21a339(0x19c)](_0x46f26b[_0x21a339(0x1b3)],0x0))throw new Error(_0x2533f3[_0x21a339(0x1ce)]);const _0x56a29f=_0x46f26b[_0x21a339(0x1a0)]['find'](_0x39941c=>_0x39941c['uin']===_0x2505c3);if(!_0x56a29f||!_0x56a29f?.['isQuickLogin'])throw new Error(_0x21a339(0x1b4)+_0x2505c3+_0x21a339(0x19f));await _0x2533f3['tZTNt'](sleep,0x3e8);const _0x5b0418=await this[_0x21a339(0x1b5)]['quickLoginWithUin'](_0x2505c3);if(!_0x5b0418[_0x21a339(0x1b3)])this[_0x21a339(0x1a3)][_0x21a339(0x1a7)](_0x2533f3[_0x21a339(0x1a5)],{'code':_0x5b0418[_0x21a339(0x1b3)],'message':_0x5b0418['loginErrorInfo'][_0x21a339(0x1cb)]});}async[_0x2cc820(0x1b0)](_0x30d135,_0x1440ac,_0x32ce36,_0x170ea4,_0x1df4ba){const _0x406608=_0x2cc820,_0x5abee1={'moToX':_0x406608(0x1c9),'gGITh':_0x406608(0x1b9),'BHwRm':function(_0x17c72c,_0xb277d1){return _0x17c72c&&_0xb277d1;},'brVcj':function(_0xd7cde1,_0x2c9c04){return _0xd7cde1||_0x2c9c04;},'FpUza':function(_0x3981e7,_0x2a368a){return _0x3981e7||_0x2a368a;},'IrjzA':function(_0x46da55,_0x3fa7f3){return _0x46da55(_0x3fa7f3);},'YMflm':_0x406608(0x1bb),'cSDjP':_0x406608(0x19a)},_0x42fa81=_0x4ae3c5[_0x406608(0x1a9)](_0x5abee1['moToX'])[_0x406608(0x1aa)](_0x1440ac)[_0x406608(0x19d)](_0x5abee1[_0x406608(0x1c0)]),_0x20590d={'uin':_0x30d135,'passwordMd5':_0x42fa81,'step':_0x5abee1['BHwRm'](_0x32ce36,_0x170ea4)&&_0x1df4ba?0x1:0x0,'newDeviceLoginSig':'','proofWaterSig':_0x5abee1[_0x406608(0x1bf)](_0x32ce36,''),'proofWaterRand':_0x5abee1[_0x406608(0x1af)](_0x170ea4,''),'proofWaterSid':_0x1df4ba||''};await this[_0x406608(0x1be)](),await _0x5abee1['IrjzA'](sleep,0x3e8);const _0x40dd55=await this[_0x406608(0x1b5)][_0x406608(0x1cf)](_0x20590d);switch(_0x40dd55[_0x406608(0x1b3)]){case'0':{break;}case _0x5abee1[_0x406608(0x1b6)]:{this['core'][_0x406608(0x1a7)](_0x406608(0x1a8),{'url':_0x40dd55[_0x406608(0x1c3)][_0x406608(0x1ca)]});break;}case'4':case _0x406608(0x19e):default:{this[_0x406608(0x1a3)][_0x406608(0x1a7)](_0x5abee1['cSDjP'],{'code':_0x40dd55['result'],'message':_0x40dd55[_0x406608(0x1c3)]['errMsg']});}}}}