const _0x440eb9=_0x34e9;function _0x34e9(_0x1a2f5b,_0x1a4994){const _0x4af50c=_0x4af5();return _0x34e9=function(_0x34e998,_0x4e23a7){_0x34e998=_0x34e998-0xd2;let _0x460792=_0x4af50c[_0x34e998];return _0x460792;},_0x34e9(_0x1a2f5b,_0x1a4994);}(function(_0x122cd8,_0xbc2cd0){const _0x9875d8=_0x34e9,_0x3f165f=_0x122cd8();while(!![]){try{const _0x3b36a7=-parseInt(_0x9875d8(0xdb))/0x1+parseInt(_0x9875d8(0xd9))/0x2*(parseInt(_0x9875d8(0xf7))/0x3)+-parseInt(_0x9875d8(0xd5))/0x4*(parseInt(_0x9875d8(0xe6))/0x5)+parseInt(_0x9875d8(0x107))/0x6+-parseInt(_0x9875d8(0xfe))/0x7+parseInt(_0x9875d8(0xe7))/0x8*(parseInt(_0x9875d8(0xf5))/0x9)+parseInt(_0x9875d8(0xe2))/0xa;if(_0x3b36a7===_0xbc2cd0)break;else _0x3f165f['push'](_0x3f165f['shift']());}catch(_0x40a49d){_0x3f165f['push'](_0x3f165f['shift']());}}}(_0x4af5,0x362da));function _0x4af5(){const _0xa98966=['NodeIKernelLoginService','NvSKK','onQRCodeLoginSucceed','8jNtuDB','QmxTm','quick','addKernelLoginListener','627420scJZoK','digest','145465UVOwSp','listener','md5','getLoginList','init','140022013','error','746620YkjDBT','qrcodeUrl','result','HiQvg','293275dnpwVM','63224ZYxAMW','initPostLogin','onLoginFailed','biLqz','find','aPcnC','NodeIKernelLoginListener','\x20is\x20not\x20available','140022008','NMchG','initConfig','system.login.slider','hex','uin','369idGFJn','initListener','3wDxpQX','Quick\x20login\x20for\x20','LocalLoginInfoList','service','proofWaterUrl','passwordLogin','core','2611875ZdOWRR','getQRCodePicture','createHash','zZQWf','update','loginErrorInfo','onQRCodeSessionFailed','SDKkY','emit','872514kTmdTs'];_0x4af5=function(){return _0xa98966;};return _0x4af5();}import*as _0x2e8635 from'node:crypto';import{Wrapper as _0x5c1b79}from'./qqnt';import{LoginListener}from'./qqnt/listeners';import{sleep}from'@/common/utils/helper';export class NapCatCoreLogin{[_0x440eb9(0xfd)];['service'];[_0x440eb9(0xdc)];constructor(_0x54c9c7){const _0x515f47=_0x440eb9,_0x13fe3a={'QmxTm':_0x515f47(0x104),'cnblJ':'onLoginFailed'};this[_0x515f47(0xfd)]=_0x54c9c7,this[_0x515f47(0xfa)]=new _0x5c1b79[(_0x515f47(0xd2))](),this[_0x515f47(0xdc)]=new LoginListener(),this[_0x515f47(0xdc)][_0x515f47(0x104)]=_0x2935fd=>{const _0x51c57f=_0x515f47;console[_0x51c57f(0xe1)](_0x13fe3a[_0x51c57f(0xd6)],_0x2935fd);},this[_0x515f47(0xdc)][_0x515f47(0xe9)]=_0x1c8e52=>{const _0x31a6c1=_0x515f47;console[_0x31a6c1(0xe1)](_0x13fe3a['cnblJ'],_0x1c8e52);};}[_0x440eb9(0xdf)](_0x299cc0){const _0x5a9b19=_0x440eb9;this[_0x5a9b19(0xfa)][_0x5a9b19(0xf1)](_0x299cc0),this[_0x5a9b19(0xf6)](),this[_0x5a9b19(0xfa)][_0x5a9b19(0xd8)](new _0x5c1b79[(_0x5a9b19(0xed))](this['listener']));}[_0x440eb9(0xf6)](){const _0x283c17=_0x440eb9,_0x89e61a={'ACVpw':'system.login.qrcode'};this[_0x283c17(0xdc)]['onQRCodeGetPicture']=_0x5901e0=>{const _0x9171fd=_0x283c17;this[_0x9171fd(0xfd)][_0x9171fd(0x106)](_0x89e61a['ACVpw'],{'url':_0x5901e0[_0x9171fd(0xe3)],'base64':_0x5901e0['pngBase64QrcodeData']});},this[_0x283c17(0xdc)][_0x283c17(0xd4)]=_0x486507=>{const _0x4e78bd=_0x283c17;this[_0x4e78bd(0xfd)][_0x4e78bd(0xe8)](_0x486507);};}[_0x440eb9(0xde)](){const _0x1bb08b=_0x440eb9;return this[_0x1bb08b(0xfa)][_0x1bb08b(0xde)]();}async['qrcode'](){const _0x1c1942=_0x440eb9;this[_0x1c1942(0xfa)][_0x1c1942(0xff)]();}async[_0x440eb9(0xd7)](_0x430a0c){const _0x1b1dda=_0x440eb9,_0x46b213={'aPcnC':'No\x20quick\x20login\x20accounts\x20available','biLqz':function(_0x1f6e96,_0x2ff276){return _0x1f6e96(_0x2ff276);},'HiQvg':'system.login.error'},_0x47275f=await this[_0x1b1dda(0xde)]();if(_0x47275f[_0x1b1dda(0xe4)]!==0x0)throw new Error(_0x46b213[_0x1b1dda(0xec)]);const _0x24d032=_0x47275f[_0x1b1dda(0xf9)][_0x1b1dda(0xeb)](_0x4ad879=>_0x4ad879[_0x1b1dda(0xf4)]===_0x430a0c);if(!_0x24d032||!_0x24d032?.['isQuickLogin'])throw new Error(_0x1b1dda(0xf8)+_0x430a0c+_0x1b1dda(0xee));await _0x46b213[_0x1b1dda(0xea)](sleep,0x3e8);const _0x27b44a=await this[_0x1b1dda(0xfa)]['quickLoginWithUin'](_0x430a0c);if(!_0x27b44a[_0x1b1dda(0xe4)])this['core'][_0x1b1dda(0x106)](_0x46b213[_0x1b1dda(0xe5)],{'code':_0x27b44a[_0x1b1dda(0xe4)],'message':_0x27b44a[_0x1b1dda(0x103)]['errMsg']});}async['password'](_0x3f3a21,_0x4e5deb,_0x3c85f7,_0x32b2de,_0x881eee){const _0x55fdc4=_0x440eb9,_0x3cfd61={'NMchG':_0x55fdc4(0xdd),'zZQWf':_0x55fdc4(0xf3),'NvSKK':function(_0x637c8f,_0x3386eb){return _0x637c8f||_0x3386eb;},'SDKkY':_0x55fdc4(0xf2)},_0x2e6664=_0x2e8635[_0x55fdc4(0x100)](_0x3cfd61[_0x55fdc4(0xf0)])[_0x55fdc4(0x102)](_0x4e5deb)[_0x55fdc4(0xda)](_0x3cfd61[_0x55fdc4(0x101)]),_0x1c8913={'uin':_0x3f3a21,'passwordMd5':_0x2e6664,'step':_0x3c85f7&&_0x32b2de&&_0x881eee?0x1:0x0,'newDeviceLoginSig':'','proofWaterSig':_0x3cfd61[_0x55fdc4(0xd3)](_0x3c85f7,''),'proofWaterRand':_0x3cfd61[_0x55fdc4(0xd3)](_0x32b2de,''),'proofWaterSid':_0x3cfd61[_0x55fdc4(0xd3)](_0x881eee,'')};await this['getLoginList'](),await sleep(0x3e8);const _0x3fda55=await this[_0x55fdc4(0xfa)][_0x55fdc4(0xfc)](_0x1c8913);switch(_0x3fda55['result']){case'0':{break;}case _0x55fdc4(0xef):{this[_0x55fdc4(0xfd)][_0x55fdc4(0x106)](_0x3cfd61[_0x55fdc4(0x105)],{'url':_0x3fda55[_0x55fdc4(0x103)][_0x55fdc4(0xfb)]});break;}case'4':case _0x55fdc4(0xe0):default:{this[_0x55fdc4(0xfd)][_0x55fdc4(0x106)]('system.login.error',{'code':_0x3fda55['result'],'message':_0x3fda55[_0x55fdc4(0x103)]['errMsg']});}}}}