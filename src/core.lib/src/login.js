const _0x5c0c07=_0x7c41;function _0x498f(){const _0x5ab21e=['921645tdUKer','OpvEx','140022008','qrcodeUrl','password','listener','system.login.slider','initListener','init','FmlSH','update','106508qHKgJE','660226LXKKvs','md5','initPostLogin','onLoginFailed','Quick\x20login\x20for\x20','service','find','uin','system.login.error','izyCz','10reLcvH','addKernelLoginListener','emit','6957050ZBenys','error','initConfig','onQRCodeGetPicture','onQRCodeSessionFailed','loginErrorInfo','4369392Hyqtiq','getLoginList','isQuickLogin','No\x20quick\x20login\x20accounts\x20available','quickLoginWithUin','wMtCc','7191610pNgjwv','result','88xSOWTF','system.login.qrcode','core','123rIrdTn','zUtxQ','passwordLogin','hex','createHash','qwils','NodeIKernelLoginListener','pngBase64QrcodeData','102903YiXaDp','digest','quick'];_0x498f=function(){return _0x5ab21e;};return _0x498f();}(function(_0x3ba56e,_0x17f415){const _0x188025=_0x7c41,_0x22856e=_0x3ba56e();while(!![]){try{const _0xd982ee=parseInt(_0x188025(0xe0))/0x1*(-parseInt(_0x188025(0xc4))/0x2)+parseInt(_0x188025(0xd8))/0x3*(-parseInt(_0x188025(0xee))/0x4)+parseInt(_0x188025(0xc7))/0x5+parseInt(_0x188025(0xcd))/0x6+-parseInt(_0x188025(0xef))/0x7*(-parseInt(_0x188025(0xd5))/0x8)+-parseInt(_0x188025(0xe3))/0x9+-parseInt(_0x188025(0xd3))/0xa;if(_0xd982ee===_0x17f415)break;else _0x22856e['push'](_0x22856e['shift']());}catch(_0x211627){_0x22856e['push'](_0x22856e['shift']());}}}(_0x498f,0xb2108));import*as _0x464a33 from'node:crypto';import{Wrapper as _0x495889}from'./qqnt';function _0x7c41(_0x438931,_0x48c6e5){const _0x498f80=_0x498f();return _0x7c41=function(_0x7c41fc,_0x1f0430){_0x7c41fc=_0x7c41fc-0xc3;let _0x3407c2=_0x498f80[_0x7c41fc];return _0x3407c2;},_0x7c41(_0x438931,_0x48c6e5);}import{LoginListener}from'./qqnt/listeners';import{sleep}from'@/common/utils/helper';export class NapCatCoreLogin{[_0x5c0c07(0xd7)];['service'];[_0x5c0c07(0xe8)];constructor(_0x3d3e75){const _0x2454a1=_0x5c0c07,_0x80740f={'OpvEx':_0x2454a1(0xcb),'XRovW':'onLoginFailed'};this[_0x2454a1(0xd7)]=_0x3d3e75,this[_0x2454a1(0xf4)]=new _0x495889['NodeIKernelLoginService'](),this[_0x2454a1(0xe8)]=new LoginListener(),this[_0x2454a1(0xe8)][_0x2454a1(0xcb)]=_0x22d630=>{const _0x10deee=_0x2454a1;console[_0x10deee(0xc8)](_0x80740f[_0x10deee(0xe4)],_0x22d630);},this['listener'][_0x2454a1(0xf2)]=_0x3263ab=>{console['error'](_0x80740f['XRovW'],_0x3263ab);};}[_0x5c0c07(0xeb)](_0x4c6314){const _0x2f7129=_0x5c0c07;this['service'][_0x2f7129(0xc9)](_0x4c6314),this['initListener'](),this[_0x2f7129(0xf4)][_0x2f7129(0xc5)](new _0x495889[(_0x2f7129(0xde))](this['listener']));}[_0x5c0c07(0xea)](){const _0x4c7f44=_0x5c0c07,_0x109a22={'zUtxQ':_0x4c7f44(0xd6)};this[_0x4c7f44(0xe8)][_0x4c7f44(0xca)]=_0x52d098=>{const _0x100c6d=_0x4c7f44;this['core'][_0x100c6d(0xc6)](_0x109a22[_0x100c6d(0xd9)],{'url':_0x52d098[_0x100c6d(0xe6)],'base64':_0x52d098[_0x100c6d(0xdf)]});},this[_0x4c7f44(0xe8)]['onQRCodeLoginSucceed']=_0x14a9c4=>{const _0x529519=_0x4c7f44;this[_0x529519(0xd7)][_0x529519(0xf1)](_0x14a9c4);};}['getLoginList'](){const _0x158f64=_0x5c0c07;return this[_0x158f64(0xf4)][_0x158f64(0xce)]();}async['qrcode'](){const _0x1f488f=_0x5c0c07;this[_0x1f488f(0xf4)]['getQRCodePicture']();}async[_0x5c0c07(0xe2)](_0x178f42){const _0x11e7e9=_0x5c0c07,_0x347e1a={'kmejd':function(_0x3910df,_0x41c2fc){return _0x3910df!==_0x41c2fc;},'MfxKb':_0x11e7e9(0xd0),'FmlSH':function(_0x3bc544,_0x311d36){return _0x3bc544(_0x311d36);}},_0x1a17e0=await this['getLoginList']();if(_0x347e1a['kmejd'](_0x1a17e0['result'],0x0))throw new Error(_0x347e1a['MfxKb']);const _0x4c9dc7=_0x1a17e0['LocalLoginInfoList'][_0x11e7e9(0xf5)](_0x5ec4de=>_0x5ec4de[_0x11e7e9(0xf6)]===_0x178f42);if(!_0x4c9dc7||!_0x4c9dc7?.[_0x11e7e9(0xcf)])throw new Error(_0x11e7e9(0xf3)+_0x178f42+'\x20is\x20not\x20available');await _0x347e1a[_0x11e7e9(0xec)](sleep,0x3e8);const _0x3bc026=await this[_0x11e7e9(0xf4)][_0x11e7e9(0xd1)](_0x178f42);if(!_0x3bc026[_0x11e7e9(0xd4)])this[_0x11e7e9(0xd7)][_0x11e7e9(0xc6)](_0x11e7e9(0xf7),{'code':_0x3bc026[_0x11e7e9(0xd4)],'message':_0x3bc026[_0x11e7e9(0xcc)]['errMsg']});}async[_0x5c0c07(0xe7)](_0x734848,_0x3b901c,_0x2c2cf3,_0x5d6e0c,_0x4e4b0f){const _0x968873=_0x5c0c07,_0x119fe4={'izyCz':function(_0x1d1d22,_0x2ad3d0){return _0x1d1d22||_0x2ad3d0;},'mlFyd':_0x968873(0xe5),'wMtCc':_0x968873(0xe9),'qwils':'system.login.error'},_0x2aaecc=_0x464a33[_0x968873(0xdc)](_0x968873(0xf0))[_0x968873(0xed)](_0x3b901c)[_0x968873(0xe1)](_0x968873(0xdb)),_0x2fc2e2={'uin':_0x734848,'passwordMd5':_0x2aaecc,'step':_0x2c2cf3&&_0x5d6e0c&&_0x4e4b0f?0x1:0x0,'newDeviceLoginSig':'','proofWaterSig':_0x119fe4[_0x968873(0xc3)](_0x2c2cf3,''),'proofWaterRand':_0x5d6e0c||'','proofWaterSid':_0x119fe4[_0x968873(0xc3)](_0x4e4b0f,'')};await this[_0x968873(0xce)](),await sleep(0x3e8);const _0x48dfc1=await this['service'][_0x968873(0xda)](_0x2fc2e2);switch(_0x48dfc1[_0x968873(0xd4)]){case'0':{break;}case _0x119fe4['mlFyd']:{this[_0x968873(0xd7)][_0x968873(0xc6)](_0x119fe4[_0x968873(0xd2)],{'url':_0x48dfc1[_0x968873(0xcc)]['proofWaterUrl']});break;}case'4':case'140022013':default:{this['core'][_0x968873(0xc6)](_0x119fe4[_0x968873(0xdd)],{'code':_0x48dfc1['result'],'message':_0x48dfc1[_0x968873(0xcc)]['errMsg']});}}}}